{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/yilia/source/ads.txt","path":"ads.txt","modified":1,"renderable":1},{"_id":"themes/yilia/source/main.507b3a.css","path":"main.507b3a.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/run.html","path":"run.html","modified":1,"renderable":1},{"_id":"themes/yilia/source/slider.e37972.js","path":"slider.e37972.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/test.html","path":"test.html","modified":1,"renderable":1},{"_id":"source/images/KeyCastr1.png","path":"images/KeyCastr1.png","modified":1,"renderable":0},{"_id":"source/images/KeyCastr3.png","path":"images/KeyCastr3.png","modified":1,"renderable":0},{"_id":"source/images/KeyCastr5.gif","path":"images/KeyCastr5.gif","modified":1,"renderable":0},{"_id":"source/images/airline.png","path":"images/airline.png","modified":1,"renderable":0},{"_id":"source/images/favicon.ico","path":"images/favicon.ico","modified":1,"renderable":0},{"_id":"source/images/mp.jpg","path":"images/mp.jpg","modified":1,"renderable":0},{"_id":"source/images/mysqlrpm.png","path":"images/mysqlrpm.png","modified":1,"renderable":0},{"_id":"source/images/pm2-list.png","path":"images/pm2-list.png","modified":1,"renderable":0},{"_id":"source/images/screen_shot_category.jpg","path":"images/screen_shot_category.jpg","modified":1,"renderable":0},{"_id":"source/images/springhw1.png","path":"images/springhw1.png","modified":1,"renderable":0},{"_id":"source/images/springhw3.png","path":"images/springhw3.png","modified":1,"renderable":0},{"_id":"source/images/springhw4.png","path":"images/springhw4.png","modified":1,"renderable":0},{"_id":"source/images/springjson.png","path":"images/springjson.png","modified":1,"renderable":0},{"_id":"source/images/whitespace.gif","path":"images/whitespace.gif","modified":1,"renderable":0},{"_id":"source/images/wxsq1.png","path":"images/wxsq1.png","modified":1,"renderable":0},{"_id":"themes/yilia/source/main.507b3a.js","path":"main.507b3a.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/mobile.fdc4b7.js","path":"mobile.fdc4b7.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/tools/index.html","path":"tools/index.html","modified":1,"renderable":1},{"_id":"source/images/KeyCastr2.png","path":"images/KeyCastr2.png","modified":1,"renderable":0},{"_id":"source/images/KeyCastr4.gif","path":"images/KeyCastr4.gif","modified":1,"renderable":0},{"_id":"source/images/avator.jpg","path":"images/avator.jpg","modified":1,"renderable":0},{"_id":"source/images/chuxi2.jpeg","path":"images/chuxi2.jpeg","modified":1,"renderable":0},{"_id":"source/images/closetag.gif","path":"images/closetag.gif","modified":1,"renderable":0},{"_id":"source/images/gundo.gif","path":"images/gundo.gif","modified":1,"renderable":0},{"_id":"source/images/jrejdk.png","path":"images/jrejdk.png","modified":1,"renderable":0},{"_id":"source/images/pm2-key.png","path":"images/pm2-key.png","modified":1,"renderable":0},{"_id":"source/images/pygraphql1.png","path":"images/pygraphql1.png","modified":1,"renderable":0},{"_id":"source/images/springhw2.png","path":"images/springhw2.png","modified":1,"renderable":0},{"_id":"source/images/surround.gif","path":"images/surround.gif","modified":1,"renderable":0},{"_id":"themes/yilia/source/css/loader.css","path":"css/loader.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/css/pricing.css","path":"css/pricing.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/compression-image/index.html","path":"compression-image/index.html","modified":1,"renderable":1},{"_id":"themes/yilia/source/css/signin.css","path":"css/signin.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/css/ts.css","path":"css/ts.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/css/style.css","path":"css/style.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/fonts/default-skin.b257fa.svg","path":"fonts/default-skin.b257fa.svg","modified":1,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.16acc2.ttf","path":"fonts/iconfont.16acc2.ttf","modified":1,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.8c627f.woff","path":"fonts/iconfont.8c627f.woff","modified":1,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.b322fa.eot","path":"fonts/iconfont.b322fa.eot","modified":1,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.45d7ee.svg","path":"fonts/iconfont.45d7ee.svg","modified":1,"renderable":1},{"_id":"themes/yilia/source/fonts/tooltip.4004ff.svg","path":"fonts/tooltip.4004ff.svg","modified":1,"renderable":1},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","path":"img/scrollbar_arrow.png","modified":1,"renderable":1},{"_id":"themes/yilia/source/img/default-skin.png","path":"img/default-skin.png","modified":1,"renderable":1},{"_id":"themes/yilia/source/img/preloader.gif","path":"img/preloader.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/countdown.js","path":"js/countdown.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ext-beautify.js","path":"js/ext-beautify.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/crypto-js.min.js","path":"js/crypto-js.min.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/hmac-sha1.js","path":"js/hmac-sha1.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ip.min.js","path":"js/ip.min.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/js.cookie.min.js","path":"js/js.cookie.min.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/lrz.bundle.js","path":"js/lrz.bundle.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/moment.min.js","path":"js/moment.min.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/qrcode.min.js","path":"js/qrcode.min.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/tools-common.js","path":"js/tools-common.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/tools-login.js","path":"js/tools-login.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/tools-run.js","path":"js/tools-run.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/tools-wapi.js","path":"js/tools-wapi.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/web-tools.js","path":"js/web-tools.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ts.js","path":"js/ts.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/web-tools.min.js","path":"js/web-tools.min.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/wxnacy.js","path":"js/wxnacy.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/wxnacy.min.js","path":"js/wxnacy.min.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/layui.js","path":"layui/layui.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/layer/layer.js","path":"layer/layer.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ts.min.js","path":"js/ts.min.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/run/index.html","path":"run/index.html","modified":1,"renderable":1},{"_id":"themes/yilia/source/test/test_login.html","path":"test/test_login.html","modified":1,"renderable":1},{"_id":"themes/yilia/source/test/index.html","path":"test/index.html","modified":1,"renderable":1},{"_id":"themes/yilia/source/wapi/index.html","path":"wapi/index.html","modified":1,"renderable":1},{"_id":"themes/yilia/source/tools/head.html","path":"tools/head.html","modified":1,"renderable":1},{"_id":"themes/yilia/source/tools/model.html","path":"tools/model.html","modified":1,"renderable":1},{"_id":"themes/yilia/source/tools/nav.html","path":"tools/nav.html","modified":1,"renderable":1},{"_id":"themes/yilia/source/wread/books.json","path":"wread/books.json","modified":1,"renderable":1},{"_id":"source/notebook/faker/command.ipynb","path":"notebook/faker/command.ipynb","modified":1,"renderable":0},{"_id":"source/notebook/faker/quickstart.ipynb","path":"notebook/faker/quickstart.ipynb","modified":1,"renderable":0},{"_id":"source/notebook/faker/locales.ipynb","path":"notebook/faker/locales.ipynb","modified":1,"renderable":0},{"_id":"source/images/alisq.png","path":"images/alisq.png","modified":1,"renderable":0},{"_id":"source/images/chrome1.png","path":"images/chrome1.png","modified":1,"renderable":0},{"_id":"source/images/bjid1.png","path":"images/bjid1.png","modified":1,"renderable":0},{"_id":"source/images/ctrlpfu.gif","path":"images/ctrlpfu.gif","modified":1,"renderable":0},{"_id":"source/images/expand-region.gif","path":"images/expand-region.gif","modified":1,"renderable":0},{"_id":"source/images/gzjzz3.png","path":"images/gzjzz3.png","modified":1,"renderable":0},{"_id":"source/images/htmltestrunner.png","path":"images/htmltestrunner.png","modified":1,"renderable":0},{"_id":"source/images/httpie1.png","path":"images/httpie1.png","modified":1,"renderable":0},{"_id":"source/images/ipapico.png","path":"images/ipapico.png","modified":1,"renderable":0},{"_id":"source/images/operator.gif","path":"images/operator.gif","modified":1,"renderable":0},{"_id":"source/images/rss.png","path":"images/rss.png","modified":1,"renderable":0},{"_id":"source/images/wxsq.png","path":"images/wxsq.png","modified":1,"renderable":0},{"_id":"source/images/vim-gocode.gif","path":"images/vim-gocode.gif","modified":1,"renderable":0},{"_id":"source/images/ycm.gif","path":"images/ycm.gif","modified":1,"renderable":0},{"_id":"themes/yilia/source/js/jquery.min.js","path":"js/jquery.min.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/require.js","path":"js/require.js","modified":1,"renderable":1},{"_id":"source/images/KeyCastr6.png","path":"images/KeyCastr6.png","modified":1,"renderable":0},{"_id":"source/images/abbreviations.gif","path":"images/abbreviations.gif","modified":1,"renderable":0},{"_id":"source/images/ctrlp.gif","path":"images/ctrlp.gif","modified":1,"renderable":0},{"_id":"source/images/gzjzz1.png","path":"images/gzjzz1.png","modified":1,"renderable":0},{"_id":"source/images/ip-api.png","path":"images/ip-api.png","modified":1,"renderable":0},{"_id":"source/images/iterm3.png","path":"images/iterm3.png","modified":1,"renderable":0},{"_id":"source/images/ipstack1_1237.png","path":"images/ipstack1_1237.png","modified":1,"renderable":0},{"_id":"source/images/nerdc.gif","path":"images/nerdc.gif","modified":1,"renderable":0},{"_id":"source/images/iterm2.png","path":"images/iterm2.png","modified":1,"renderable":0},{"_id":"source/images/pm2-monitor.png","path":"images/pm2-monitor.png","modified":1,"renderable":0},{"_id":"source/images/quickrun.gif","path":"images/quickrun.gif","modified":1,"renderable":0},{"_id":"source/images/screen_shot_mac_homebrew.jpg","path":"images/screen_shot_mac_homebrew.jpg","modified":1,"renderable":0},{"_id":"source/images/tern.gif","path":"images/tern.gif","modified":1,"renderable":0},{"_id":"source/images/wxsq2.png","path":"images/wxsq2.png","modified":1,"renderable":0},{"_id":"source/images/xuezhiqian.jpg","path":"images/xuezhiqian.jpg","modified":1,"renderable":0},{"_id":"source/images/zip-code.png","path":"images/zip-code.png","modified":1,"renderable":0},{"_id":"themes/yilia/source/js/ace/anchor.js","path":"js/ace/anchor.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ace.js","path":"js/ace/ace.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/anchor_test.js","path":"js/ace/anchor_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ace_test.js","path":"js/ace/ace_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/apply_delta.js","path":"js/ace/apply_delta.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/autocomplete.js","path":"js/ace/autocomplete.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/background_tokenizer.js","path":"js/ace/background_tokenizer.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/bidihandler.js","path":"js/ace/bidihandler.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/background_tokenizer_test.js","path":"js/ace/background_tokenizer_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/clipboard.js","path":"js/ace/clipboard.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/config.js","path":"js/ace/config.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/config_test.js","path":"js/ace/config_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/document.js","path":"js/ace/document.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/document_test.js","path":"js/ace/document_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/edit_session_test.js","path":"js/ace/edit_session_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/editor_change_document_test.js","path":"js/ace/editor_change_document_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/editor_commands_test.js","path":"js/ace/editor_commands_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/editor_highlight_selected_word_test.js","path":"js/ace/editor_highlight_selected_word_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/editor_navigation_test.js","path":"js/ace/editor_navigation_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/editor_text_edit_test.js","path":"js/ace/editor_text_edit_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/incremental_search.js","path":"js/ace/incremental_search.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/incremental_search_test.js","path":"js/ace/incremental_search_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/line_widgets.js","path":"js/ace/line_widgets.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/multi_select.js","path":"js/ace/multi_select.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/multi_select_test.js","path":"js/ace/multi_select_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/occur.js","path":"js/ace/occur.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/occur_test.js","path":"js/ace/occur_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/placeholder.js","path":"js/ace/placeholder.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/placeholder_test.js","path":"js/ace/placeholder_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/range.js","path":"js/ace/range.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/range_list.js","path":"js/ace/range_list.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/range_list_test.js","path":"js/ace/range_list_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/range_test.js","path":"js/ace/range_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/renderloop.js","path":"js/ace/renderloop.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/scrollbar.js","path":"js/ace/scrollbar.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/search_highlight.js","path":"js/ace/search_highlight.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/search.js","path":"js/ace/search.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/search_test.js","path":"js/ace/search_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/selection_test.js","path":"js/ace/selection_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets.js","path":"js/ace/snippets.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/selection.js","path":"js/ace/selection.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets_test.js","path":"js/ace/snippets_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/split.js","path":"js/ace/split.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/token_iterator.js","path":"js/ace/token_iterator.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/tokenizer.js","path":"js/ace/tokenizer.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/token_iterator_test.js","path":"js/ace/token_iterator_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/tokenizer_dev.js","path":"js/ace/tokenizer_dev.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/tooltip.js","path":"js/ace/tooltip.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/tokenizer_test.js","path":"js/ace/tokenizer_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/undomanager.js","path":"js/ace/undomanager.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/undomanager_test.js","path":"js/ace/undomanager_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/virtual_renderer.js","path":"js/ace/virtual_renderer.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/unicode.js","path":"js/ace/unicode.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/virtual_renderer_test.js","path":"js/ace/virtual_renderer_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/font/iconfont.eot","path":"layui/font/iconfont.eot","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/font/iconfont.ttf","path":"layui/font/iconfont.ttf","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/font/iconfont.woff","path":"layui/font/iconfont.woff","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/css/layui.css","path":"layui/css/layui.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/css/layui.mobile.css","path":"layui/css/layui.mobile.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/layer/mobile/layer.js","path":"layer/mobile/layer.js","modified":1,"renderable":1},{"_id":"source/images/bjsb2.png","path":"images/bjsb2.png","modified":1,"renderable":0},{"_id":"source/images/easygrep.gif","path":"images/easygrep.gif","modified":1,"renderable":0},{"_id":"source/images/elk1.png","path":"images/elk1.png","modified":1,"renderable":0},{"_id":"source/images/emmet.gif","path":"images/emmet.gif","modified":1,"renderable":0},{"_id":"source/images/ideanote.png","path":"images/ideanote.png","modified":1,"renderable":0},{"_id":"source/images/ip-api_1231.png","path":"images/ip-api_1231.png","modified":1,"renderable":0},{"_id":"source/images/ipstack_1258.png","path":"images/ipstack_1258.png","modified":1,"renderable":0},{"_id":"source/images/pm2-logs.png","path":"images/pm2-logs.png","modified":1,"renderable":0},{"_id":"source/images/screen_shot_python_index.jpg","path":"images/screen_shot_python_index.jpg","modified":1,"renderable":0},{"_id":"themes/yilia/source/js/ace/edit_session.js","path":"js/ace/edit_session.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/editor.js","path":"js/ace/editor.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/abap.snippets","path":"js/ace/snippets/abap.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/ada.snippets","path":"js/ace/snippets/ada.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/all_modes.snippets","path":"js/ace/snippets/all_modes.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/apache_conf.snippets","path":"js/ace/snippets/apache_conf.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/applescript.snippets","path":"js/ace/snippets/applescript.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/asciidoc.snippets","path":"js/ace/snippets/asciidoc.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/asl.snippets","path":"js/ace/snippets/asl.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/assembly_x86.snippets","path":"js/ace/snippets/assembly_x86.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/autohotkey.snippets","path":"js/ace/snippets/autohotkey.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/batchfile.snippets","path":"js/ace/snippets/batchfile.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/c9search.snippets","path":"js/ace/snippets/c9search.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/cirru.snippets","path":"js/ace/snippets/cirru.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/cobol.snippets","path":"js/ace/snippets/cobol.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/coldfusion.snippets","path":"js/ace/snippets/coldfusion.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/csharp.snippets","path":"js/ace/snippets/csharp.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/csound_score.snippets","path":"js/ace/snippets/csound_score.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/curly.snippets","path":"js/ace/snippets/curly.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/d.snippets","path":"js/ace/snippets/d.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/dockerfile.snippets","path":"js/ace/snippets/dockerfile.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/dot.snippets","path":"js/ace/snippets/dot.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/eiffel.snippets","path":"js/ace/snippets/eiffel.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/ejs.snippets","path":"js/ace/snippets/ejs.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/elixir.snippets","path":"js/ace/snippets/elixir.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/elm.snippets","path":"js/ace/snippets/elm.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/forth.snippets","path":"js/ace/snippets/forth.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/fsharp.snippets","path":"js/ace/snippets/fsharp.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/ftl.snippets","path":"js/ace/snippets/ftl.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/gcode.snippets","path":"js/ace/snippets/gcode.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/gherkin.snippets","path":"js/ace/snippets/gherkin.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/gitignore.snippets","path":"js/ace/snippets/gitignore.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/glsl.snippets","path":"js/ace/snippets/glsl.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/golang.snippets","path":"js/ace/snippets/golang.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/groovy.snippets","path":"js/ace/snippets/groovy.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/handlebars.snippets","path":"js/ace/snippets/handlebars.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/haxe.snippets","path":"js/ace/snippets/haxe.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/html_elixir.snippets","path":"js/ace/snippets/html_elixir.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/html_ruby.snippets","path":"js/ace/snippets/html_ruby.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/ini.snippets","path":"js/ace/snippets/ini.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/io.snippets","path":"js/ace/snippets/io.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/jack.snippets","path":"js/ace/snippets/jack.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/jade.snippets","path":"js/ace/snippets/jade.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/json.snippets","path":"js/ace/snippets/json.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/jssm.snippets","path":"js/ace/snippets/jssm.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/jsx.snippets","path":"js/ace/snippets/jsx.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/julia.snippets","path":"js/ace/snippets/julia.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/latex.snippets","path":"js/ace/snippets/latex.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/less.snippets","path":"js/ace/snippets/less.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/liquid.snippets","path":"js/ace/snippets/liquid.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/lisp.snippets","path":"js/ace/snippets/lisp.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/livescript.snippets","path":"js/ace/snippets/livescript.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/logiql.snippets","path":"js/ace/snippets/logiql.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/luapage.snippets","path":"js/ace/snippets/luapage.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/lucene.snippets","path":"js/ace/snippets/lucene.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/matlab.snippets","path":"js/ace/snippets/matlab.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/mel.snippets","path":"js/ace/snippets/mel.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/mushcode.snippets","path":"js/ace/snippets/mushcode.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/mushcode_high_rules.snippets","path":"js/ace/snippets/mushcode_high_rules.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/mysql.snippets","path":"js/ace/snippets/mysql.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/nix.snippets","path":"js/ace/snippets/nix.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/objectivec.snippets","path":"js/ace/snippets/objectivec.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/ocaml.snippets","path":"js/ace/snippets/ocaml.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/pascal.snippets","path":"js/ace/snippets/pascal.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/pgsql.snippets","path":"js/ace/snippets/pgsql.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/php_laravel_blade.snippets","path":"js/ace/snippets/php_laravel_blade.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/plain_text.snippets","path":"js/ace/snippets/plain_text.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/powershell.snippets","path":"js/ace/snippets/powershell.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/praat.snippets","path":"js/ace/snippets/praat.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/properties.snippets","path":"js/ace/snippets/properties.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/prolog.snippets","path":"js/ace/snippets/prolog.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/protobuf.snippets","path":"js/ace/snippets/protobuf.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/rdoc.snippets","path":"js/ace/snippets/rdoc.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/rhtml.snippets","path":"js/ace/snippets/rhtml.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/rust.snippets","path":"js/ace/snippets/rust.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/sass.snippets","path":"js/ace/snippets/sass.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/scad.snippets","path":"js/ace/snippets/scad.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/scala.snippets","path":"js/ace/snippets/scala.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/scheme.snippets","path":"js/ace/snippets/scheme.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/scss.snippets","path":"js/ace/snippets/scss.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/sjs.snippets","path":"js/ace/snippets/sjs.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/slim.snippets","path":"js/ace/snippets/slim.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/smarty.snippets","path":"js/ace/snippets/smarty.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/soy_template.snippets","path":"js/ace/snippets/soy_template.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/space.snippets","path":"js/ace/snippets/space.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/stylus.snippets","path":"js/ace/snippets/stylus.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/svg.snippets","path":"js/ace/snippets/svg.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/text.snippets","path":"js/ace/snippets/text.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/tmsnippet.snippets","path":"js/ace/snippets/tmsnippet.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/toml.snippets","path":"js/ace/snippets/toml.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/twig.snippets","path":"js/ace/snippets/twig.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/typescript.snippets","path":"js/ace/snippets/typescript.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/vala.snippets","path":"js/ace/snippets/vala.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/vbscript.snippets","path":"js/ace/snippets/vbscript.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/verilog.snippets","path":"js/ace/snippets/verilog.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/vhdl.snippets","path":"js/ace/snippets/vhdl.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/xml.snippets","path":"js/ace/snippets/xml.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/layui.all.js","path":"layui/layui.all.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/yaml.snippets","path":"js/ace/snippets/yaml.snippets","modified":1,"renderable":1},{"_id":"source/images/ctrlsf.gif","path":"images/ctrlsf.gif","modified":1,"renderable":0},{"_id":"themes/yilia/source/js/ace/autocomplete/popup.js","path":"js/ace/autocomplete/popup.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/autocomplete/util.js","path":"js/ace/autocomplete/util.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/autocomplete/text_completer.js","path":"js/ace/autocomplete/text_completer.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/commands/command_manager.js","path":"js/ace/commands/command_manager.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/commands/command_manager_test.js","path":"js/ace/commands/command_manager_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/commands/default_commands.js","path":"js/ace/commands/default_commands.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/commands/incremental_search_commands.js","path":"js/ace/commands/incremental_search_commands.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/commands/occur_commands.js","path":"js/ace/commands/occur_commands.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/commands/multi_select_commands.js","path":"js/ace/commands/multi_select_commands.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/css/expand-marker.png","path":"js/ace/css/expand-marker.png","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/css/codefolding-fold-button-states.png","path":"js/ace/css/codefolding-fold-button-states.png","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/css/editor.css","path":"js/ace/css/editor.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/edit_session/bracket_match.js","path":"js/ace/edit_session/bracket_match.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/edit_session/fold.js","path":"js/ace/edit_session/fold.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/edit_session/folding.js","path":"js/ace/edit_session/folding.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/edit_session/fold_line.js","path":"js/ace/edit_session/fold_line.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/beautify_test.js","path":"js/ace/ext/beautify_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/beautify.js","path":"js/ace/ext/beautify.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/emmet.js","path":"js/ace/ext/emmet.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/elastic_tabstops_lite.js","path":"js/ace/ext/elastic_tabstops_lite.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/error_marker.js","path":"js/ace/ext/error_marker.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/keybinding_menu.js","path":"js/ace/ext/keybinding_menu.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/linking.js","path":"js/ace/ext/linking.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/modelist.js","path":"js/ace/ext/modelist.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/language_tools.js","path":"js/ace/ext/language_tools.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/options.js","path":"js/ace/ext/options.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/searchbox.css","path":"js/ace/ext/searchbox.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/searchbox.js","path":"js/ace/ext/searchbox.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/settings_menu.js","path":"js/ace/ext/settings_menu.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/spellcheck.js","path":"js/ace/ext/spellcheck.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/split.js","path":"js/ace/ext/split.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/static.css","path":"js/ace/ext/static.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/static_highlight_test.js","path":"js/ace/ext/static_highlight_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/statusbar.js","path":"js/ace/ext/statusbar.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/static_highlight.js","path":"js/ace/ext/static_highlight.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/textarea.js","path":"js/ace/ext/textarea.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/themelist.js","path":"js/ace/ext/themelist.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/whitespace.js","path":"js/ace/ext/whitespace.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/whitespace_test.js","path":"js/ace/ext/whitespace_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/layer/lines.js","path":"js/ace/layer/lines.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/layer/cursor.js","path":"js/ace/layer/cursor.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/layer/font_metrics.js","path":"js/ace/layer/font_metrics.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/layer/gutter.js","path":"js/ace/layer/gutter.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/layer/marker.js","path":"js/ace/layer/marker.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/layer/text.js","path":"js/ace/layer/text.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/layer/text_test.js","path":"js/ace/layer/text_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/keyboard/emacs.js","path":"js/ace/keyboard/emacs.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/keyboard/emacs_test.js","path":"js/ace/keyboard/emacs_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/keyboard/hash_handler.js","path":"js/ace/keyboard/hash_handler.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/keyboard/keybinding.js","path":"js/ace/keyboard/keybinding.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/keyboard/keybinding_test.js","path":"js/ace/keyboard/keybinding_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/keyboard/state_handler.js","path":"js/ace/keyboard/state_handler.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/keyboard/textarea.js","path":"js/ace/keyboard/textarea.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/keyboard/textinput.js","path":"js/ace/keyboard/textinput.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/keyboard/textinput_ios.js","path":"js/ace/keyboard/textinput_ios.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/model/editor.js","path":"js/ace/model/editor.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mouse/default_gutter_handler.js","path":"js/ace/mouse/default_gutter_handler.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mouse/fold_handler.js","path":"js/ace/mouse/fold_handler.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mouse/dragdrop_handler.js","path":"js/ace/mouse/dragdrop_handler.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mouse/default_handlers.js","path":"js/ace/mouse/default_handlers.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mouse/mouse_event.js","path":"js/ace/mouse/mouse_event.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mouse/mouse_handler.js","path":"js/ace/mouse/mouse_handler.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mouse/mouse_handler_test.js","path":"js/ace/mouse/mouse_handler_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mouse/multi_select_handler.js","path":"js/ace/mouse/multi_select_handler.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/requirejs/text_loader_webpack.js","path":"js/ace/requirejs/text_loader_webpack.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/requirejs/text.js","path":"js/ace/requirejs/text.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/test/all.js","path":"js/ace/test/all.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/requirejs/text_build.js","path":"js/ace/requirejs/text_build.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/test/all_browser.js","path":"js/ace/test/all_browser.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/test/assertions.js","path":"js/ace/test/assertions.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/test/benchmark.js","path":"js/ace/test/benchmark.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/test/mockdom.js","path":"js/ace/test/mockdom.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/test/mockrenderer.js","path":"js/ace/test/mockrenderer.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/test/tests.html","path":"js/ace/test/tests.html","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/abap_highlight_rules.js","path":"js/ace/mode/abap_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/abap.js","path":"js/ace/mode/abap.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/abc.js","path":"js/ace/mode/abc.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/abc_highlight_rules.js","path":"js/ace/mode/abc_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/actionscript_highlight_rules.js","path":"js/ace/mode/actionscript_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/actionscript.js","path":"js/ace/mode/actionscript.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/ada.js","path":"js/ace/mode/ada.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/ada_highlight_rules.js","path":"js/ace/mode/ada_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/apache_conf.js","path":"js/ace/mode/apache_conf.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/apache_conf_highlight_rules.js","path":"js/ace/mode/apache_conf_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/applescript.js","path":"js/ace/mode/applescript.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/applescript_highlight_rules.js","path":"js/ace/mode/applescript_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/asciidoc.js","path":"js/ace/mode/asciidoc.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/asl.js","path":"js/ace/mode/asl.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/asciidoc_highlight_rules.js","path":"js/ace/mode/asciidoc_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/asl_highlight_rules.js","path":"js/ace/mode/asl_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/assembly_x86.js","path":"js/ace/mode/assembly_x86.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/autohotkey.js","path":"js/ace/mode/autohotkey.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/assembly_x86_highlight_rules.js","path":"js/ace/mode/assembly_x86_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/batchfile_highlight_rules.js","path":"js/ace/mode/batchfile_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/behaviour.js","path":"js/ace/mode/behaviour.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/autohotkey_highlight_rules.js","path":"js/ace/mode/autohotkey_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/bro_highlight_rules.js","path":"js/ace/mode/bro_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/batchfile.js","path":"js/ace/mode/batchfile.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/c9search.js","path":"js/ace/mode/c9search.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/c9search_highlight_rules.js","path":"js/ace/mode/c9search_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/bro.js","path":"js/ace/mode/bro.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/c_cpp.js","path":"js/ace/mode/c_cpp.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/c_cpp_highlight_rules.js","path":"js/ace/mode/c_cpp_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/cirru.js","path":"js/ace/mode/cirru.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/cirru_highlight_rules.js","path":"js/ace/mode/cirru_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/cobol.js","path":"js/ace/mode/cobol.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/clojure_highlight_rules.js","path":"js/ace/mode/clojure_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/clojure.js","path":"js/ace/mode/clojure.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/cobol_highlight_rules.js","path":"js/ace/mode/cobol_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/coffee_worker.js","path":"js/ace/mode/coffee_worker.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/coldfusion_test.js","path":"js/ace/mode/coldfusion_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/coldfusion.js","path":"js/ace/mode/coldfusion.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/coldfusion_highlight_rules.js","path":"js/ace/mode/coldfusion_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/csharp_highlight_rules.js","path":"js/ace/mode/csharp_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/csharp.js","path":"js/ace/mode/csharp.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/csound_document.js","path":"js/ace/mode/csound_document.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/csound_document_highlight_rules.js","path":"js/ace/mode/csound_document_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/csound_orchestra.js","path":"js/ace/mode/csound_orchestra.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/csound_orchestra_highlight_rules.js","path":"js/ace/mode/csound_orchestra_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/csound_preprocessor_highlight_rules.js","path":"js/ace/mode/csound_preprocessor_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/csound_score.js","path":"js/ace/mode/csound_score.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/csound_score_highlight_rules.js","path":"js/ace/mode/csound_score_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/csp.js","path":"js/ace/mode/csp.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/csp_highlight_rules.js","path":"js/ace/mode/csp_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/css.js","path":"js/ace/mode/css.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/css_completions.js","path":"js/ace/mode/css_completions.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/css_highlight_rules.js","path":"js/ace/mode/css_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/css_test.js","path":"js/ace/mode/css_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/css_worker.js","path":"js/ace/mode/css_worker.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/css_worker_test.js","path":"js/ace/mode/css_worker_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/curly.js","path":"js/ace/mode/curly.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/coffee.js","path":"js/ace/mode/coffee.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/curly_highlight_rules.js","path":"js/ace/mode/curly_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/coffee_highlight_rules.js","path":"js/ace/mode/coffee_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/d.js","path":"js/ace/mode/d.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/d_highlight_rules.js","path":"js/ace/mode/d_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/dart.js","path":"js/ace/mode/dart.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/dart_highlight_rules.js","path":"js/ace/mode/dart_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/diff.js","path":"js/ace/mode/diff.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/django.js","path":"js/ace/mode/django.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/diff_highlight_rules.js","path":"js/ace/mode/diff_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/doc_comment_highlight_rules.js","path":"js/ace/mode/doc_comment_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/dockerfile.js","path":"js/ace/mode/dockerfile.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/dot_highlight_rules.js","path":"js/ace/mode/dot_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/dot.js","path":"js/ace/mode/dot.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/dockerfile_highlight_rules.js","path":"js/ace/mode/dockerfile_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/drools.js","path":"js/ace/mode/drools.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/drools_highlight_rules.js","path":"js/ace/mode/drools_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/edifact.js","path":"js/ace/mode/edifact.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/eiffel.js","path":"js/ace/mode/eiffel.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/edifact_highlight_rules.js","path":"js/ace/mode/edifact_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/ejs.js","path":"js/ace/mode/ejs.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/eiffel_highlight_rules.js","path":"js/ace/mode/eiffel_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/elixir.js","path":"js/ace/mode/elixir.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/elixir_highlight_rules.js","path":"js/ace/mode/elixir_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/elm_highlight_rules.js","path":"js/ace/mode/elm_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/elm.js","path":"js/ace/mode/elm.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/erlang.js","path":"js/ace/mode/erlang.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/erlang_highlight_rules.js","path":"js/ace/mode/erlang_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/forth.js","path":"js/ace/mode/forth.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/forth_highlight_rules.js","path":"js/ace/mode/forth_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/fortran.js","path":"js/ace/mode/fortran.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/fortran_highlight_rules.js","path":"js/ace/mode/fortran_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/fsharp.js","path":"js/ace/mode/fsharp.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/fsharp_highlight_rules.js","path":"js/ace/mode/fsharp_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/ftl.js","path":"js/ace/mode/ftl.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/gcode.js","path":"js/ace/mode/gcode.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/ftl_highlight_rules.js","path":"js/ace/mode/ftl_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/gcode_highlight_rules.js","path":"js/ace/mode/gcode_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/gherkin.js","path":"js/ace/mode/gherkin.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/gitignore.js","path":"js/ace/mode/gitignore.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/gherkin_highlight_rules.js","path":"js/ace/mode/gherkin_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/glsl.js","path":"js/ace/mode/glsl.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/gitignore_highlight_rules.js","path":"js/ace/mode/gitignore_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/glsl_highlight_rules.js","path":"js/ace/mode/glsl_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/gobstones.js","path":"js/ace/mode/gobstones.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/gobstones_highlight_rules.js","path":"js/ace/mode/gobstones_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/golang.js","path":"js/ace/mode/golang.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/golang_highlight_rules.js","path":"js/ace/mode/golang_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/graphqlschema.js","path":"js/ace/mode/graphqlschema.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/graphqlschema_highlight_rules.js","path":"js/ace/mode/graphqlschema_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/groovy_highlight_rules.js","path":"js/ace/mode/groovy_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/groovy.js","path":"js/ace/mode/groovy.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/haml.js","path":"js/ace/mode/haml.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/haml_highlight_rules.js","path":"js/ace/mode/haml_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/handlebars.js","path":"js/ace/mode/handlebars.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/handlebars_highlight_rules.js","path":"js/ace/mode/handlebars_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/haskell.js","path":"js/ace/mode/haskell.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/haskell_cabal.js","path":"js/ace/mode/haskell_cabal.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/haskell_cabal_highlight_rules.js","path":"js/ace/mode/haskell_cabal_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/haskell_highlight_rules.js","path":"js/ace/mode/haskell_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/haxe_highlight_rules.js","path":"js/ace/mode/haxe_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/haxe.js","path":"js/ace/mode/haxe.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/hjson.js","path":"js/ace/mode/hjson.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/hjson_highlight_rules.js","path":"js/ace/mode/hjson_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/html.js","path":"js/ace/mode/html.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/html_completions.js","path":"js/ace/mode/html_completions.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/html_elixir.js","path":"js/ace/mode/html_elixir.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/html_elixir_highlight_rules.js","path":"js/ace/mode/html_elixir_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/html_highlight_rules.js","path":"js/ace/mode/html_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/html_ruby.js","path":"js/ace/mode/html_ruby.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/html_ruby_highlight_rules.js","path":"js/ace/mode/html_ruby_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/html_test.js","path":"js/ace/mode/html_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/html_worker.js","path":"js/ace/mode/html_worker.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/ini.js","path":"js/ace/mode/ini.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/io.js","path":"js/ace/mode/io.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/ini_highlight_rules.js","path":"js/ace/mode/ini_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/io_highlight_rules.js","path":"js/ace/mode/io_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/jack.js","path":"js/ace/mode/jack.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/jack_highlight_rules.js","path":"js/ace/mode/jack_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/jade.js","path":"js/ace/mode/jade.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/jade_highlight_rules.js","path":"js/ace/mode/jade_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/java.js","path":"js/ace/mode/java.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/java_highlight_rules.js","path":"js/ace/mode/java_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/javascript.js","path":"js/ace/mode/javascript.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/javascript_highlight_rules.js","path":"js/ace/mode/javascript_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/javascript_test.js","path":"js/ace/mode/javascript_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/javascript_worker.js","path":"js/ace/mode/javascript_worker.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/javascript_worker_test.js","path":"js/ace/mode/javascript_worker_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/js_regex_highlight_rules.js","path":"js/ace/mode/js_regex_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/json.js","path":"js/ace/mode/json.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/json_highlight_rules.js","path":"js/ace/mode/json_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/json_worker.js","path":"js/ace/mode/json_worker.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/json_worker_test.js","path":"js/ace/mode/json_worker_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/jsp.js","path":"js/ace/mode/jsp.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/jsoniq.js","path":"js/ace/mode/jsoniq.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/jssm.js","path":"js/ace/mode/jssm.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/jsp_highlight_rules.js","path":"js/ace/mode/jsp_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/jssm_highlight_rules.js","path":"js/ace/mode/jssm_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/jsx.js","path":"js/ace/mode/jsx.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/julia_highlight_rules.js","path":"js/ace/mode/julia_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/jsx_highlight_rules.js","path":"js/ace/mode/jsx_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/kotlin.js","path":"js/ace/mode/kotlin.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/kotlin_highlight_rules.js","path":"js/ace/mode/kotlin_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/julia.js","path":"js/ace/mode/julia.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/latex.js","path":"js/ace/mode/latex.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/latex_highlight_rules.js","path":"js/ace/mode/latex_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/less.js","path":"js/ace/mode/less.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/less_highlight_rules.js","path":"js/ace/mode/less_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/liquid.js","path":"js/ace/mode/liquid.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/liquid_highlight_rules.js","path":"js/ace/mode/liquid_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/livescript.js","path":"js/ace/mode/livescript.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/lisp.js","path":"js/ace/mode/lisp.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/logiql.js","path":"js/ace/mode/logiql.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/logiql_highlight_rules.js","path":"js/ace/mode/logiql_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/lisp_highlight_rules.js","path":"js/ace/mode/lisp_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/logiql_test.js","path":"js/ace/mode/logiql_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/lsl.js","path":"js/ace/mode/lsl.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/lsl_highlight_rules.js","path":"js/ace/mode/lsl_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/lua_highlight_rules.js","path":"js/ace/mode/lua_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/lua_worker.js","path":"js/ace/mode/lua_worker.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/luapage.js","path":"js/ace/mode/luapage.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/lua.js","path":"js/ace/mode/lua.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/luapage_highlight_rules.js","path":"js/ace/mode/luapage_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/makefile.js","path":"js/ace/mode/makefile.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/lucene.js","path":"js/ace/mode/lucene.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/lucene_highlight_rules.js","path":"js/ace/mode/lucene_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/markdown.js","path":"js/ace/mode/markdown.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/makefile_highlight_rules.js","path":"js/ace/mode/makefile_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/markdown_highlight_rules.js","path":"js/ace/mode/markdown_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/mask.js","path":"js/ace/mode/mask.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/matching_brace_outdent.js","path":"js/ace/mode/matching_brace_outdent.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/mask_highlight_rules.js","path":"js/ace/mode/mask_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/matlab.js","path":"js/ace/mode/matlab.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/matching_parens_outdent.js","path":"js/ace/mode/matching_parens_outdent.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/matlab_highlight_rules.js","path":"js/ace/mode/matlab_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/maze.js","path":"js/ace/mode/maze.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/maze_highlight_rules.js","path":"js/ace/mode/maze_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/mel.js","path":"js/ace/mode/mel.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/mel_highlight_rules.js","path":"js/ace/mode/mel_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/mixal.js","path":"js/ace/mode/mixal.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/mixal_highlight_rules.js","path":"js/ace/mode/mixal_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/mushcode.js","path":"js/ace/mode/mushcode.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/mushcode_highlight_rules.js","path":"js/ace/mode/mushcode_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/mysql.js","path":"js/ace/mode/mysql.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/mysql_highlight_rules.js","path":"js/ace/mode/mysql_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/nix.js","path":"js/ace/mode/nix.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/nix_highlight_rules.js","path":"js/ace/mode/nix_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/nsis.js","path":"js/ace/mode/nsis.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/nsis_highlight_rules.js","path":"js/ace/mode/nsis_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/objectivec.js","path":"js/ace/mode/objectivec.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/objectivec_highlight_rules.js","path":"js/ace/mode/objectivec_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/ocaml.js","path":"js/ace/mode/ocaml.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/pascal.js","path":"js/ace/mode/pascal.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/pascal_highlight_rules.js","path":"js/ace/mode/pascal_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/ocaml_highlight_rules.js","path":"js/ace/mode/ocaml_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/perl.js","path":"js/ace/mode/perl.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/perl_highlight_rules.js","path":"js/ace/mode/perl_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/pgsql.js","path":"js/ace/mode/pgsql.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/pgsql_highlight_rules.js","path":"js/ace/mode/pgsql_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/php.js","path":"js/ace/mode/php.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/php_test.js","path":"js/ace/mode/php_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/php_laravel_blade.js","path":"js/ace/mode/php_laravel_blade.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/php_laravel_blade_highlight_rules.js","path":"js/ace/mode/php_laravel_blade_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/pig.js","path":"js/ace/mode/pig.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/php_worker.js","path":"js/ace/mode/php_worker.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/pig_highlight_rules.js","path":"js/ace/mode/pig_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/plain_text.js","path":"js/ace/mode/plain_text.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/powershell.js","path":"js/ace/mode/powershell.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/plain_text_test.js","path":"js/ace/mode/plain_text_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/powershell_highlight_rules.js","path":"js/ace/mode/powershell_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/praat.js","path":"js/ace/mode/praat.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/praat_highlight_rules.js","path":"js/ace/mode/praat_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/prolog.js","path":"js/ace/mode/prolog.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/prolog_highlight_rules.js","path":"js/ace/mode/prolog_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/properties.js","path":"js/ace/mode/properties.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/properties_highlight_rules.js","path":"js/ace/mode/properties_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/protobuf.js","path":"js/ace/mode/protobuf.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/protobuf_highlight_rules.js","path":"js/ace/mode/protobuf_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/python.js","path":"js/ace/mode/python.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/python_highlight_rules.js","path":"js/ace/mode/python_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/python_test.js","path":"js/ace/mode/python_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/r.js","path":"js/ace/mode/r.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/razor.js","path":"js/ace/mode/razor.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/rdoc.js","path":"js/ace/mode/rdoc.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/razor_completions.js","path":"js/ace/mode/razor_completions.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/razor_highlight_rules.js","path":"js/ace/mode/razor_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/red.js","path":"js/ace/mode/red.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/rdoc_highlight_rules.js","path":"js/ace/mode/rdoc_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/red_highlight_rules.js","path":"js/ace/mode/red_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/redshift.js","path":"js/ace/mode/redshift.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/redshift_highlight_rules.js","path":"js/ace/mode/redshift_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/rhtml.js","path":"js/ace/mode/rhtml.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/rhtml_highlight_rules.js","path":"js/ace/mode/rhtml_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/rst.js","path":"js/ace/mode/rst.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/rst_highlight_rules.js","path":"js/ace/mode/rst_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/ruby.js","path":"js/ace/mode/ruby.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/ruby_highlight_rules.js","path":"js/ace/mode/ruby_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/ruby_test.js","path":"js/ace/mode/ruby_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/rust.js","path":"js/ace/mode/rust.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/sass.js","path":"js/ace/mode/sass.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/sass_highlight_rules.js","path":"js/ace/mode/sass_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/rust_highlight_rules.js","path":"js/ace/mode/rust_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/scad.js","path":"js/ace/mode/scad.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/scad_highlight_rules.js","path":"js/ace/mode/scad_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/scala_highlight_rules.js","path":"js/ace/mode/scala_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/scala.js","path":"js/ace/mode/scala.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/scheme_highlight_rules.js","path":"js/ace/mode/scheme_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/scheme.js","path":"js/ace/mode/scheme.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/scss_highlight_rules.js","path":"js/ace/mode/scss_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/scss.js","path":"js/ace/mode/scss.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/sh.js","path":"js/ace/mode/sh.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/sh_highlight_rules.js","path":"js/ace/mode/sh_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/sjs_highlight_rules.js","path":"js/ace/mode/sjs_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/sjs.js","path":"js/ace/mode/sjs.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/slim.js","path":"js/ace/mode/slim.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/slim_highlight_rules.js","path":"js/ace/mode/slim_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/smarty.js","path":"js/ace/mode/smarty.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/smarty_highlight_rules.js","path":"js/ace/mode/smarty_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/snippets.js","path":"js/ace/mode/snippets.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/r_highlight_rules.js","path":"js/ace/mode/r_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/soy_template.js","path":"js/ace/mode/soy_template.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/soy_template_highlight_rules.js","path":"js/ace/mode/soy_template_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/space.js","path":"js/ace/mode/space.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/sparql.js","path":"js/ace/mode/sparql.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/sparql_highlight_rules.js","path":"js/ace/mode/sparql_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/sql.js","path":"js/ace/mode/sql.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/space_highlight_rules.js","path":"js/ace/mode/space_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/sql_highlight_rules.js","path":"js/ace/mode/sql_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/stylus.js","path":"js/ace/mode/stylus.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/sqlserver_highlight_rules.js","path":"js/ace/mode/sqlserver_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/sqlserver.js","path":"js/ace/mode/sqlserver.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/stylus_highlight_rules.js","path":"js/ace/mode/stylus_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/svg_highlight_rules.js","path":"js/ace/mode/svg_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/svg.js","path":"js/ace/mode/svg.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/swift.js","path":"js/ace/mode/swift.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/swift_highlight_rules.js","path":"js/ace/mode/swift_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/tcl.js","path":"js/ace/mode/tcl.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/tcl_highlight_rules.js","path":"js/ace/mode/tcl_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/tex.js","path":"js/ace/mode/tex.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/tex_highlight_rules.js","path":"js/ace/mode/tex_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/text.js","path":"js/ace/mode/text.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/text_highlight_rules.js","path":"js/ace/mode/text_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/text_test.js","path":"js/ace/mode/text_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/textile.js","path":"js/ace/mode/textile.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/toml.js","path":"js/ace/mode/toml.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/textile_highlight_rules.js","path":"js/ace/mode/textile_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/toml_highlight_rules.js","path":"js/ace/mode/toml_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/tsx.js","path":"js/ace/mode/tsx.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/turtle.js","path":"js/ace/mode/turtle.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/turtle_highlight_rules.js","path":"js/ace/mode/turtle_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/twig.js","path":"js/ace/mode/twig.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/twig_highlight_rules.js","path":"js/ace/mode/twig_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/typescript.js","path":"js/ace/mode/typescript.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/vala.js","path":"js/ace/mode/vala.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/typescript_highlight_rules.js","path":"js/ace/mode/typescript_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/vbscript.js","path":"js/ace/mode/vbscript.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/vala_highlight_rules.js","path":"js/ace/mode/vala_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/vbscript_highlight_rules.js","path":"js/ace/mode/vbscript_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/velocity.js","path":"js/ace/mode/velocity.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/verilog.js","path":"js/ace/mode/verilog.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/velocity_highlight_rules.js","path":"js/ace/mode/velocity_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/vhdl.js","path":"js/ace/mode/vhdl.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/verilog_highlight_rules.js","path":"js/ace/mode/verilog_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/vhdl_highlight_rules.js","path":"js/ace/mode/vhdl_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/wollok.js","path":"js/ace/mode/wollok.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/xml.js","path":"js/ace/mode/xml.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/wollok_highlight_rules.js","path":"js/ace/mode/wollok_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/xml_highlight_rules.js","path":"js/ace/mode/xml_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/xml_test.js","path":"js/ace/mode/xml_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/xml_worker.js","path":"js/ace/mode/xml_worker.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/xquery.js","path":"js/ace/mode/xquery.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/yaml.js","path":"js/ace/mode/yaml.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/yaml_highlight_rules.js","path":"js/ace/mode/yaml_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/ambiance.css","path":"js/ace/theme/ambiance.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/ambiance.js","path":"js/ace/theme/ambiance.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/chaos.css","path":"js/ace/theme/chaos.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/chaos.js","path":"js/ace/theme/chaos.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/xquery_worker.js","path":"js/ace/mode/xquery_worker.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/chrome.js","path":"js/ace/theme/chrome.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/chrome.css","path":"js/ace/theme/chrome.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/clouds.css","path":"js/ace/theme/clouds.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/clouds.js","path":"js/ace/theme/clouds.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/clouds_midnight.css","path":"js/ace/theme/clouds_midnight.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/cobalt.css","path":"js/ace/theme/cobalt.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/clouds_midnight.js","path":"js/ace/theme/clouds_midnight.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/cobalt.js","path":"js/ace/theme/cobalt.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/crimson_editor.js","path":"js/ace/theme/crimson_editor.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/crimson_editor.css","path":"js/ace/theme/crimson_editor.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/dawn.css","path":"js/ace/theme/dawn.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/dawn.js","path":"js/ace/theme/dawn.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/dreamweaver.js","path":"js/ace/theme/dreamweaver.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/dreamweaver.css","path":"js/ace/theme/dreamweaver.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/eclipse.css","path":"js/ace/theme/eclipse.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/eclipse.js","path":"js/ace/theme/eclipse.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/dracula.js","path":"js/ace/theme/dracula.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/dracula.css","path":"js/ace/theme/dracula.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/github.js","path":"js/ace/theme/github.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/gob.css","path":"js/ace/theme/gob.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/github.css","path":"js/ace/theme/github.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/gob.js","path":"js/ace/theme/gob.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/gruvbox.css","path":"js/ace/theme/gruvbox.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/gruvbox.js","path":"js/ace/theme/gruvbox.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/idle_fingers.css","path":"js/ace/theme/idle_fingers.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/idle_fingers.js","path":"js/ace/theme/idle_fingers.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/iplastic.css","path":"js/ace/theme/iplastic.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/iplastic.js","path":"js/ace/theme/iplastic.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/katzenmilch.js","path":"js/ace/theme/katzenmilch.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/katzenmilch.css","path":"js/ace/theme/katzenmilch.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/kuroir.css","path":"js/ace/theme/kuroir.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/kr_theme.css","path":"js/ace/theme/kr_theme.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/kr_theme.js","path":"js/ace/theme/kr_theme.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/kuroir.js","path":"js/ace/theme/kuroir.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/merbivore.css","path":"js/ace/theme/merbivore.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/merbivore_soft.js","path":"js/ace/theme/merbivore_soft.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/merbivore.js","path":"js/ace/theme/merbivore.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/merbivore_soft.css","path":"js/ace/theme/merbivore_soft.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/mono_industrial.css","path":"js/ace/theme/mono_industrial.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/mono_industrial.js","path":"js/ace/theme/mono_industrial.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/monokai.css","path":"js/ace/theme/monokai.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/monokai.js","path":"js/ace/theme/monokai.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/pastel_on_dark.css","path":"js/ace/theme/pastel_on_dark.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/pastel_on_dark.js","path":"js/ace/theme/pastel_on_dark.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/solarized_dark.css","path":"js/ace/theme/solarized_dark.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/solarized_dark.js","path":"js/ace/theme/solarized_dark.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/solarized_light.css","path":"js/ace/theme/solarized_light.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/solarized_light.js","path":"js/ace/theme/solarized_light.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/sqlserver.css","path":"js/ace/theme/sqlserver.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/sqlserver.js","path":"js/ace/theme/sqlserver.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/terminal.js","path":"js/ace/theme/terminal.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/terminal.css","path":"js/ace/theme/terminal.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/textmate.css","path":"js/ace/theme/textmate.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/textmate.js","path":"js/ace/theme/textmate.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/tomorrow.css","path":"js/ace/theme/tomorrow.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/tomorrow.js","path":"js/ace/theme/tomorrow.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/tomorrow_night.css","path":"js/ace/theme/tomorrow_night.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/tomorrow_night.js","path":"js/ace/theme/tomorrow_night.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/tomorrow_night_blue.css","path":"js/ace/theme/tomorrow_night_blue.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/tomorrow_night_blue.js","path":"js/ace/theme/tomorrow_night_blue.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/tomorrow_night_bright.css","path":"js/ace/theme/tomorrow_night_bright.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/tomorrow_night_bright.js","path":"js/ace/theme/tomorrow_night_bright.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/tomorrow_night_eighties.js","path":"js/ace/theme/tomorrow_night_eighties.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/tomorrow_night_eighties.css","path":"js/ace/theme/tomorrow_night_eighties.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/twilight.css","path":"js/ace/theme/twilight.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/twilight.js","path":"js/ace/theme/twilight.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/xcode.css","path":"js/ace/theme/xcode.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/vibrant_ink.css","path":"js/ace/theme/vibrant_ink.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/vibrant_ink.js","path":"js/ace/theme/vibrant_ink.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/theme/xcode.js","path":"js/ace/theme/xcode.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/worker/worker_client.js","path":"js/ace/worker/worker_client.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/worker/worker.js","path":"js/ace/worker/worker.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/worker/mirror.js","path":"js/ace/worker/mirror.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/worker/worker_test.js","path":"js/ace/worker/worker_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/abap.js","path":"js/ace/snippets/abap.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/abc.snippets","path":"js/ace/snippets/abc.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/actionscript.js","path":"js/ace/snippets/actionscript.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/actionscript.snippets","path":"js/ace/snippets/actionscript.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/abc.js","path":"js/ace/snippets/abc.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/ada.js","path":"js/ace/snippets/ada.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/all_modes.js","path":"js/ace/snippets/all_modes.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/apache_conf.js","path":"js/ace/snippets/apache_conf.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/apache.snippets","path":"js/ace/snippets/apache.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/applescript.js","path":"js/ace/snippets/applescript.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/asciidoc.js","path":"js/ace/snippets/asciidoc.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/asl.js","path":"js/ace/snippets/asl.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/autohotkey.js","path":"js/ace/snippets/autohotkey.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/autoit.snippets","path":"js/ace/snippets/autoit.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/assembly_x86.js","path":"js/ace/snippets/assembly_x86.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/batchfile.js","path":"js/ace/snippets/batchfile.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/bro.js","path":"js/ace/snippets/bro.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/c.snippets","path":"js/ace/snippets/c.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/c9search.js","path":"js/ace/snippets/c9search.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/c_cpp.js","path":"js/ace/snippets/c_cpp.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/c_cpp.snippets","path":"js/ace/snippets/c_cpp.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/chef.snippets","path":"js/ace/snippets/chef.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/cirru.js","path":"js/ace/snippets/cirru.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/clojure.js","path":"js/ace/snippets/clojure.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/cmake.snippets","path":"js/ace/snippets/cmake.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/clojure.snippets","path":"js/ace/snippets/clojure.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/cobol.js","path":"js/ace/snippets/cobol.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/coffee.js","path":"js/ace/snippets/coffee.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/coldfusion.js","path":"js/ace/snippets/coldfusion.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/coffee.snippets","path":"js/ace/snippets/coffee.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/cs.snippets","path":"js/ace/snippets/cs.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/csharp.js","path":"js/ace/snippets/csharp.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/csound_document.js","path":"js/ace/snippets/csound_document.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/csound_document.snippets","path":"js/ace/snippets/csound_document.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/csound_orchestra.snippets","path":"js/ace/snippets/csound_orchestra.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/csound_orchestra.js","path":"js/ace/snippets/csound_orchestra.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/csp.js","path":"js/ace/snippets/csp.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/csound_score.js","path":"js/ace/snippets/csound_score.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/css.js","path":"js/ace/snippets/css.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/css.snippets","path":"js/ace/snippets/css.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/curly.js","path":"js/ace/snippets/curly.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/d.js","path":"js/ace/snippets/d.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/dart.snippets","path":"js/ace/snippets/dart.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/dart.js","path":"js/ace/snippets/dart.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/diff.snippets","path":"js/ace/snippets/diff.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/diff.js","path":"js/ace/snippets/diff.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/django.js","path":"js/ace/snippets/django.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/django.snippets","path":"js/ace/snippets/django.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/dockerfile.js","path":"js/ace/snippets/dockerfile.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/dot.js","path":"js/ace/snippets/dot.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/drools.js","path":"js/ace/snippets/drools.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/drools.snippets","path":"js/ace/snippets/drools.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/dummy.js","path":"js/ace/snippets/dummy.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/dummy_syntax.js","path":"js/ace/snippets/dummy_syntax.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/edifact.js","path":"js/ace/snippets/edifact.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/edifact.snippets","path":"js/ace/snippets/edifact.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/eiffel.js","path":"js/ace/snippets/eiffel.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/ejs.js","path":"js/ace/snippets/ejs.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/elixir.js","path":"js/ace/snippets/elixir.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/elm.js","path":"js/ace/snippets/elm.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/erlang.js","path":"js/ace/snippets/erlang.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/erlang.snippets","path":"js/ace/snippets/erlang.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/eruby.snippets","path":"js/ace/snippets/eruby.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/forth.js","path":"js/ace/snippets/forth.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/falcon.snippets","path":"js/ace/snippets/falcon.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/fsharp.js","path":"js/ace/snippets/fsharp.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/ftl.js","path":"js/ace/snippets/ftl.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/gcode.js","path":"js/ace/snippets/gcode.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/gherkin.js","path":"js/ace/snippets/gherkin.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/gitignore.js","path":"js/ace/snippets/gitignore.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/glsl.js","path":"js/ace/snippets/glsl.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/go.snippets","path":"js/ace/snippets/go.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/gobstones.snippets","path":"js/ace/snippets/gobstones.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/gobstones.js","path":"js/ace/snippets/gobstones.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/golang.js","path":"js/ace/snippets/golang.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/groovy.js","path":"js/ace/snippets/groovy.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/graphqlschema.snippets","path":"js/ace/snippets/graphqlschema.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/graphqlschema.js","path":"js/ace/snippets/graphqlschema.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/haml.js","path":"js/ace/snippets/haml.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/handlebars.js","path":"js/ace/snippets/handlebars.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/haml.snippets","path":"js/ace/snippets/haml.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/haskell.js","path":"js/ace/snippets/haskell.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/haskell.snippets","path":"js/ace/snippets/haskell.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/haxe.js","path":"js/ace/snippets/haxe.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/hjson.js","path":"js/ace/snippets/hjson.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/html.snippets","path":"js/ace/snippets/html.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/html.js","path":"js/ace/snippets/html.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/html_elixir.js","path":"js/ace/snippets/html_elixir.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/html_ruby.js","path":"js/ace/snippets/html_ruby.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/htmldjango.snippets","path":"js/ace/snippets/htmldjango.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/htmltornado.snippets","path":"js/ace/snippets/htmltornado.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/ini.js","path":"js/ace/snippets/ini.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/io.js","path":"js/ace/snippets/io.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/jack.js","path":"js/ace/snippets/jack.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/jade.js","path":"js/ace/snippets/jade.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/java.js","path":"js/ace/snippets/java.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/javascript-jquery.snippets","path":"js/ace/snippets/javascript-jquery.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/java.snippets","path":"js/ace/snippets/java.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/javascript.js","path":"js/ace/snippets/javascript.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/json.js","path":"js/ace/snippets/json.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/javascript.snippets","path":"js/ace/snippets/javascript.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/jsoniq.js","path":"js/ace/snippets/jsoniq.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/jsoniq.snippets","path":"js/ace/snippets/jsoniq.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/jsp.snippets","path":"js/ace/snippets/jsp.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/jsp.js","path":"js/ace/snippets/jsp.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/jssm.js","path":"js/ace/snippets/jssm.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/jsx.js","path":"js/ace/snippets/jsx.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/kotlin.js","path":"js/ace/snippets/kotlin.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/julia.js","path":"js/ace/snippets/julia.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/latex.js","path":"js/ace/snippets/latex.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/less.js","path":"js/ace/snippets/less.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/ledger.snippets","path":"js/ace/snippets/ledger.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/lisp.js","path":"js/ace/snippets/lisp.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/liquid.js","path":"js/ace/snippets/liquid.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/logiql.js","path":"js/ace/snippets/logiql.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/livescript.js","path":"js/ace/snippets/livescript.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/lsl.js","path":"js/ace/snippets/lsl.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/lsl.snippets","path":"js/ace/snippets/lsl.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/lua.js","path":"js/ace/snippets/lua.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/lua.snippets","path":"js/ace/snippets/lua.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/luapage.js","path":"js/ace/snippets/luapage.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/lucene.js","path":"js/ace/snippets/lucene.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/makefile.js","path":"js/ace/snippets/makefile.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/makefile.snippets","path":"js/ace/snippets/makefile.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/mako.snippets","path":"js/ace/snippets/mako.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/markdown.js","path":"js/ace/snippets/markdown.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/maze.js","path":"js/ace/snippets/maze.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/matlab.js","path":"js/ace/snippets/matlab.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/markdown.snippets","path":"js/ace/snippets/markdown.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/maze.snippets","path":"js/ace/snippets/maze.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/mel.js","path":"js/ace/snippets/mel.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/mushcode.js","path":"js/ace/snippets/mushcode.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/mushcode_high_rules.js","path":"js/ace/snippets/mushcode_high_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/mysql.js","path":"js/ace/snippets/mysql.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/nsis.js","path":"js/ace/snippets/nsis.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/nix.js","path":"js/ace/snippets/nix.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/objectivec.js","path":"js/ace/snippets/objectivec.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/objc.snippets","path":"js/ace/snippets/objc.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/ocaml.js","path":"js/ace/snippets/ocaml.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/pascal.js","path":"js/ace/snippets/pascal.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/perl.js","path":"js/ace/snippets/perl.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/perl.snippets","path":"js/ace/snippets/perl.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/pgsql.js","path":"js/ace/snippets/pgsql.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/php.snippets","path":"js/ace/snippets/php.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/php.js","path":"js/ace/snippets/php.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/php_laravel_blade.js","path":"js/ace/snippets/php_laravel_blade.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/plain_text.js","path":"js/ace/snippets/plain_text.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/powershell.js","path":"js/ace/snippets/powershell.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/prolog.js","path":"js/ace/snippets/prolog.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/praat.js","path":"js/ace/snippets/praat.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/protobuf.js","path":"js/ace/snippets/protobuf.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/properties.js","path":"js/ace/snippets/properties.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/python.js","path":"js/ace/snippets/python.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/python.snippets","path":"js/ace/snippets/python.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/r.js","path":"js/ace/snippets/r.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/r.snippets","path":"js/ace/snippets/r.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/razor.snippets","path":"js/ace/snippets/razor.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/razor.js","path":"js/ace/snippets/razor.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/rdoc.js","path":"js/ace/snippets/rdoc.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/red.js","path":"js/ace/snippets/red.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/rhtml.js","path":"js/ace/snippets/rhtml.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/red.snippets","path":"js/ace/snippets/red.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/rst.snippets","path":"js/ace/snippets/rst.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/ruby.js","path":"js/ace/snippets/ruby.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/rust.js","path":"js/ace/snippets/rust.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/ruby.snippets","path":"js/ace/snippets/ruby.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/sass.js","path":"js/ace/snippets/sass.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/scad.js","path":"js/ace/snippets/scad.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/scala.js","path":"js/ace/snippets/scala.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/scheme.js","path":"js/ace/snippets/scheme.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/scss.js","path":"js/ace/snippets/scss.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/sh.js","path":"js/ace/snippets/sh.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/sh.snippets","path":"js/ace/snippets/sh.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/sjs.js","path":"js/ace/snippets/sjs.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/slim.js","path":"js/ace/snippets/slim.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/smarty.js","path":"js/ace/snippets/smarty.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/snippets.js","path":"js/ace/snippets/snippets.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/snippets.snippets","path":"js/ace/snippets/snippets.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/soy_template.js","path":"js/ace/snippets/soy_template.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/space.js","path":"js/ace/snippets/space.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/sparql.js","path":"js/ace/snippets/sparql.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/sql.js","path":"js/ace/snippets/sql.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/sqlserver.js","path":"js/ace/snippets/sqlserver.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/sql.snippets","path":"js/ace/snippets/sql.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/sqlserver.snippets","path":"js/ace/snippets/sqlserver.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/svg.js","path":"js/ace/snippets/svg.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/stylus.js","path":"js/ace/snippets/stylus.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/tcl.js","path":"js/ace/snippets/tcl.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/tcl.snippets","path":"js/ace/snippets/tcl.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/tex.js","path":"js/ace/snippets/tex.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/tex.snippets","path":"js/ace/snippets/tex.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/text.js","path":"js/ace/snippets/text.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/textile.snippets","path":"js/ace/snippets/textile.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/toml.js","path":"js/ace/snippets/toml.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/turtle.js","path":"js/ace/snippets/turtle.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/twig.js","path":"js/ace/snippets/twig.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/typescript.js","path":"js/ace/snippets/typescript.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/vala.js","path":"js/ace/snippets/vala.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/vbscript.js","path":"js/ace/snippets/vbscript.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/velocity.js","path":"js/ace/snippets/velocity.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/velocity.snippets","path":"js/ace/snippets/velocity.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/verilog.js","path":"js/ace/snippets/verilog.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/vhdl.js","path":"js/ace/snippets/vhdl.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/wollok.snippets","path":"js/ace/snippets/wollok.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/xml.js","path":"js/ace/snippets/xml.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/wollok.js","path":"js/ace/snippets/wollok.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/textile.js","path":"js/ace/snippets/textile.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/xquery.js","path":"js/ace/snippets/xquery.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/xquery.snippets","path":"js/ace/snippets/xquery.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/xslt.snippets","path":"js/ace/snippets/xslt.snippets","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/snippets/yaml.js","path":"js/ace/snippets/yaml.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/css/modules/code.css","path":"layui/css/modules/code.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/lay/modules/carousel.js","path":"layui/lay/modules/carousel.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/lay/modules/flow.js","path":"layui/lay/modules/flow.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/lay/modules/element.js","path":"layui/lay/modules/element.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/lay/modules/code.js","path":"layui/lay/modules/code.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/lay/modules/form.js","path":"layui/lay/modules/form.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/lay/modules/laydate.js","path":"layui/lay/modules/laydate.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/lay/modules/layedit.js","path":"layui/lay/modules/layedit.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/lay/modules/laypage.js","path":"layui/lay/modules/laypage.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/lay/modules/layer.js","path":"layui/lay/modules/layer.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/lay/modules/laytpl.js","path":"layui/lay/modules/laytpl.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/lay/modules/mobile.js","path":"layui/lay/modules/mobile.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/lay/modules/table.js","path":"layui/lay/modules/table.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/lay/modules/tree.js","path":"layui/lay/modules/tree.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/lay/modules/util.js","path":"layui/lay/modules/util.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/lay/modules/upload.js","path":"layui/lay/modules/upload.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/0.gif","path":"layui/images/face/0.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/10.gif","path":"layui/images/face/10.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/13.gif","path":"layui/images/face/13.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/11.gif","path":"layui/images/face/11.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layer/mobile/need/layer.css","path":"layer/mobile/need/layer.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/1.gif","path":"layui/images/face/1.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/12.gif","path":"layui/images/face/12.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/14.gif","path":"layui/images/face/14.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/15.gif","path":"layui/images/face/15.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/16.gif","path":"layui/images/face/16.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/17.gif","path":"layui/images/face/17.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/18.gif","path":"layui/images/face/18.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/19.gif","path":"layui/images/face/19.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/2.gif","path":"layui/images/face/2.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/20.gif","path":"layui/images/face/20.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/22.gif","path":"layui/images/face/22.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/21.gif","path":"layui/images/face/21.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/23.gif","path":"layui/images/face/23.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/24.gif","path":"layui/images/face/24.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/25.gif","path":"layui/images/face/25.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/26.gif","path":"layui/images/face/26.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/27.gif","path":"layui/images/face/27.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/28.gif","path":"layui/images/face/28.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/30.gif","path":"layui/images/face/30.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/3.gif","path":"layui/images/face/3.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/29.gif","path":"layui/images/face/29.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/31.gif","path":"layui/images/face/31.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/32.gif","path":"layui/images/face/32.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/33.gif","path":"layui/images/face/33.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/34.gif","path":"layui/images/face/34.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/35.gif","path":"layui/images/face/35.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/37.gif","path":"layui/images/face/37.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/36.gif","path":"layui/images/face/36.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/38.gif","path":"layui/images/face/38.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/39.gif","path":"layui/images/face/39.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/4.gif","path":"layui/images/face/4.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/41.gif","path":"layui/images/face/41.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/40.gif","path":"layui/images/face/40.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/42.gif","path":"layui/images/face/42.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/44.gif","path":"layui/images/face/44.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/43.gif","path":"layui/images/face/43.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/45.gif","path":"layui/images/face/45.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/46.gif","path":"layui/images/face/46.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/47.gif","path":"layui/images/face/47.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/48.gif","path":"layui/images/face/48.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/49.gif","path":"layui/images/face/49.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/5.gif","path":"layui/images/face/5.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/50.gif","path":"layui/images/face/50.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/51.gif","path":"layui/images/face/51.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/52.gif","path":"layui/images/face/52.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/54.gif","path":"layui/images/face/54.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/53.gif","path":"layui/images/face/53.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/55.gif","path":"layui/images/face/55.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/56.gif","path":"layui/images/face/56.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/57.gif","path":"layui/images/face/57.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/6.gif","path":"layui/images/face/6.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/58.gif","path":"layui/images/face/58.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/59.gif","path":"layui/images/face/59.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/60.gif","path":"layui/images/face/60.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/61.gif","path":"layui/images/face/61.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/62.gif","path":"layui/images/face/62.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/65.gif","path":"layui/images/face/65.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/63.gif","path":"layui/images/face/63.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/66.gif","path":"layui/images/face/66.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/64.gif","path":"layui/images/face/64.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/67.gif","path":"layui/images/face/67.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/68.gif","path":"layui/images/face/68.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/69.gif","path":"layui/images/face/69.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/70.gif","path":"layui/images/face/70.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/71.gif","path":"layui/images/face/71.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/8.gif","path":"layui/images/face/8.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/9.gif","path":"layui/images/face/9.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/images/face/7.gif","path":"layui/images/face/7.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layer/theme/default/icon-ext.png","path":"layer/theme/default/icon-ext.png","modified":1,"renderable":1},{"_id":"themes/yilia/source/layer/theme/default/icon.png","path":"layer/theme/default/icon.png","modified":1,"renderable":1},{"_id":"themes/yilia/source/layer/theme/default/layer.css","path":"layer/theme/default/layer.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/layer/theme/default/loading-0.gif","path":"layer/theme/default/loading-0.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layer/theme/default/loading-1.gif","path":"layer/theme/default/loading-1.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layer/theme/default/loading-2.gif","path":"layer/theme/default/loading-2.gif","modified":1,"renderable":1},{"_id":"source/images/bjsb1.png","path":"images/bjsb1.png","modified":1,"renderable":0},{"_id":"source/images/mapping.gif","path":"images/mapping.gif","modified":1,"renderable":0},{"_id":"themes/yilia/source/js/ace/mode/php_highlight_rules.js","path":"js/ace/mode/php_highlight_rules.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/lay/modules/jquery.js","path":"layui/lay/modules/jquery.js","modified":1,"renderable":1},{"_id":"source/images/chuxi.jpg","path":"images/chuxi.jpg","modified":1,"renderable":0},{"_id":"source/images/elk2.png","path":"images/elk2.png","modified":1,"renderable":0},{"_id":"source/images/pm2-monit.png","path":"images/pm2-monit.png","modified":1,"renderable":0},{"_id":"source/images/uncomplete.png","path":"images/uncomplete.png","modified":1,"renderable":0},{"_id":"themes/yilia/source/js/ace/ext/menu_tools/get_editor_keyboard_shortcuts.js","path":"js/ace/ext/menu_tools/get_editor_keyboard_shortcuts.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/menu_tools/overlay_page.js","path":"js/ace/ext/menu_tools/overlay_page.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/ext/menu_tools/settings_menu.css","path":"js/ace/ext/menu_tools/settings_menu.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/keyboard/vim_test.js","path":"js/ace/keyboard/vim_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/test/asyncjs/assert.js","path":"js/ace/test/asyncjs/assert.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/test/asyncjs/index.js","path":"js/ace/test/asyncjs/index.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/test/asyncjs/async.js","path":"js/ace/test/asyncjs/async.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/test/asyncjs/test.js","path":"js/ace/test/asyncjs/test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/test/asyncjs/utils.js","path":"js/ace/test/asyncjs/utils.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/behaviour/behaviour_test.js","path":"js/ace/mode/behaviour/behaviour_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/behaviour/css.js","path":"js/ace/mode/behaviour/css.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/behaviour/xquery.js","path":"js/ace/mode/behaviour/xquery.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/behaviour/cstyle.js","path":"js/ace/mode/behaviour/cstyle.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/behaviour/html.js","path":"js/ace/mode/behaviour/html.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/behaviour/xml.js","path":"js/ace/mode/behaviour/xml.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/coffee/parser_test.js","path":"js/ace/mode/coffee/parser_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/asciidoc.js","path":"js/ace/mode/folding/asciidoc.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/c9search.js","path":"js/ace/mode/folding/c9search.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/coffee.js","path":"js/ace/mode/folding/coffee.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/coffee_test.js","path":"js/ace/mode/folding/coffee_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/csharp.js","path":"js/ace/mode/folding/csharp.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/cstyle.js","path":"js/ace/mode/folding/cstyle.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/diff.js","path":"js/ace/mode/folding/diff.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/cstyle_test.js","path":"js/ace/mode/folding/cstyle_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/drools.js","path":"js/ace/mode/folding/drools.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/fold_mode.js","path":"js/ace/mode/folding/fold_mode.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/haskell_cabal.js","path":"js/ace/mode/folding/haskell_cabal.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/html.js","path":"js/ace/mode/folding/html.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/html_test.js","path":"js/ace/mode/folding/html_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/latex.js","path":"js/ace/mode/folding/latex.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/ini.js","path":"js/ace/mode/folding/ini.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/lua.js","path":"js/ace/mode/folding/lua.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/markdown.js","path":"js/ace/mode/folding/markdown.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/mixed.js","path":"js/ace/mode/folding/mixed.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/pythonic.js","path":"js/ace/mode/folding/pythonic.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/sqlserver.js","path":"js/ace/mode/folding/sqlserver.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/pythonic_test.js","path":"js/ace/mode/folding/pythonic_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/xml_test.js","path":"js/ace/mode/folding/xml_test.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/xml.js","path":"js/ace/mode/folding/xml.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/folding/velocity.js","path":"js/ace/mode/folding/velocity.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/json/json_parse.js","path":"js/ace/mode/json/json_parse.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/lua/luaparse.js","path":"js/ace/mode/lua/luaparse.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/xml/sax.js","path":"js/ace/mode/xml/sax.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/xml/dom-parser.js","path":"js/ace/mode/xml/dom-parser.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/xml/dom.js","path":"js/ace/mode/xml/dom.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/xquery/Readme.md","path":"js/ace/mode/xquery/Readme.md","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/font/iconfont.svg","path":"layui/font/iconfont.svg","modified":1,"renderable":1},{"_id":"source/images/vimgrep.gif","path":"images/vimgrep.gif","modified":1,"renderable":0},{"_id":"themes/yilia/source/js/ace/keyboard/vim.js","path":"js/ace/keyboard/vim.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/php/php.js","path":"js/ace/mode/php/php.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/css/modules/layer/default/icon-ext.png","path":"layui/css/modules/layer/default/icon-ext.png","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/css/modules/layer/default/layer.css","path":"layui/css/modules/layer/default/layer.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/css/modules/layer/default/icon.png","path":"layui/css/modules/layer/default/icon.png","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/css/modules/laydate/default/laydate.css","path":"layui/css/modules/laydate/default/laydate.css","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/css/modules/layer/default/loading-0.gif","path":"layui/css/modules/layer/default/loading-0.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/css/modules/layer/default/loading-2.gif","path":"layui/css/modules/layer/default/loading-2.gif","modified":1,"renderable":1},{"_id":"themes/yilia/source/layui/css/modules/layer/default/loading-1.gif","path":"layui/css/modules/layer/default/loading-1.gif","modified":1,"renderable":1},{"_id":"source/images/ack.gif","path":"images/ack.gif","modified":1,"renderable":0},{"_id":"themes/yilia/source/js/ace/mode/php_completions.js","path":"js/ace/mode/php_completions.js","modified":1,"renderable":1},{"_id":"source/images/gzjzz4.png","path":"images/gzjzz4.png","modified":1,"renderable":0},{"_id":"themes/yilia/source/js/ace/mode/coffee/coffee.js","path":"js/ace/mode/coffee/coffee.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/css/csslint.js","path":"js/ace/mode/css/csslint.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/html/saxparser.js","path":"js/ace/mode/html/saxparser.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/javascript/jshint.js","path":"js/ace/mode/javascript/jshint.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/xquery/jsoniq_lexer.js","path":"js/ace/mode/xquery/jsoniq_lexer.js","modified":1,"renderable":1},{"_id":"themes/yilia/source/js/ace/mode/xquery/xquery_lexer.js","path":"js/ace/mode/xquery/xquery_lexer.js","modified":1,"renderable":1},{"_id":"source/images/gzjzz2.png","path":"images/gzjzz2.png","modified":1,"renderable":0},{"_id":"source/images/gzjzz5.png","path":"images/gzjzz5.png","modified":1,"renderable":0},{"_id":"source/images/ins.png","path":"images/ins.png","modified":1,"renderable":0},{"_id":"themes/yilia/source/js/ace/mode/xquery/xqlint.js","path":"js/ace/mode/xquery/xqlint.js","modified":1,"renderable":1}],"Cache":[{"_id":"themes/yilia/.babelrc","hash":"b1b76475ac17dc9e2fa50af96c9e31eea2d0f2b4","modified":1598024585000},{"_id":"themes/yilia/.eslintignore","hash":"df0a50b13cc00acb749226fee3cee6e0351fb1d9","modified":1598024585000},{"_id":"themes/yilia/.editorconfig","hash":"da6d022b8f4d9c961e2f8f80677e92af8de0db4d","modified":1598024585000},{"_id":"themes/yilia/.eslintrc.js","hash":"5696ae049de010ed3786768b0c359f14c05b5ec6","modified":1598024585000},{"_id":"themes/yilia/.gitattributes","hash":"e0f24dceeb1e6878a1dd9b01a2b9df1bc037a867","modified":1598024585000},{"_id":"themes/yilia/README.md","hash":"99985dc9f0f3473a26341245e436751bc42fd322","modified":1598024585000},{"_id":"themes/yilia/_config.yml","hash":"c7108ff7ebfddeb63cd4077cc67438d066d3e95e","modified":1598024585000},{"_id":"themes/yilia/package.json","hash":"367cb9579d35968a942c243ab248a5f5ebfaf462","modified":1598024585000},{"_id":"themes/yilia/webpack.config.js","hash":"05ba46a4ae744272f5312e684928910dccad3755","modified":1598024585000},{"_id":"themes/yilia/languages/fr.yml","hash":"84ab164b37c6abf625473e9a0c18f6f815dd5fd9","modified":1598024585000},{"_id":"themes/yilia/languages/default.yml","hash":"3083f319b352d21d80fc5e20113ddf27889c9d11","modified":1598024585000},{"_id":"themes/yilia/languages/nl.yml","hash":"12ed59faba1fc4e8cdd1d42ab55ef518dde8039c","modified":1598024585000},{"_id":"themes/yilia/languages/no.yml","hash":"965a171e70347215ec726952e63f5b47930931ef","modified":1598024585000},{"_id":"themes/yilia/languages/ru.yml","hash":"4fda301bbd8b39f2c714e2c934eccc4b27c0a2b0","modified":1598024585000},{"_id":"themes/yilia/languages/zh-CN.yml","hash":"ca40697097ab0b3672a80b455d3f4081292d1eed","modified":1598024585000},{"_id":"themes/yilia/languages/zh-tw.yml","hash":"53ce3000c5f767759c7d2c4efcaa9049788599c3","modified":1598024585000},{"_id":"themes/yilia/layout/archive.ejs","hash":"2703b07cc8ac64ae46d1d263f4653013c7e1666b","modified":1598024585000},{"_id":"themes/yilia/layout/index.ejs","hash":"a35dc900203f9d8dd863ea4c1722198d6d457ec8","modified":1598024585000},{"_id":"themes/yilia/layout/category.ejs","hash":"765426a9c8236828dc34759e604cc2c52292835a","modified":1598024585000},{"_id":"themes/yilia/layout/layout.ejs","hash":"0a332bdbd3b86c231d690614687f5b97186b85d5","modified":1598024585000},{"_id":"themes/yilia/layout/page.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1598024585000},{"_id":"themes/yilia/layout/post.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1598024585000},{"_id":"themes/yilia/layout/tag.ejs","hash":"eaa7b4ccb2ca7befb90142e4e68995fb1ea68b2e","modified":1598024585000},{"_id":"themes/yilia/source/ads.txt","hash":"0b83b29b0ed50ceda70b6eea9bb9b693016221f1","modified":1598024585000},{"_id":"themes/yilia/source/main.507b3a.css","hash":"ddf6e2c6b953c2c59a3c271e6070010a4cc81cf9","modified":1598024585000},{"_id":"themes/yilia/source/run.html","hash":"553b799224d212aa119b6e46196958676e640741","modified":1598024585000},{"_id":"themes/yilia/source/slider.e37972.js","hash":"6dec4e220c89049037eebc44404abd8455d22ad7","modified":1598024585000},{"_id":"themes/yilia/source/test.html","hash":"83a83f1c515182b50234f2dc1dab9118f8c9ed88","modified":1598024585000},{"_id":"themes/yilia/source-src/css.ejs","hash":"94dbdb02ca11849e415d54fb28546a598f2cffb1","modified":1598024585000},{"_id":"themes/yilia/source-src/script.ejs","hash":"c21381e1317db7bb157f1d182b8c088cb7cba411","modified":1598024585000},{"_id":"source/2018-books/index.md","hash":"bd8e5cc9b7d7204bab134e28571505b9b0a3473f","modified":1598024585000},{"_id":"source/album/index.md","hash":"02186a2254df6064c3a429f77ee3469444afd3af","modified":1598024585000},{"_id":"source/_drafts/alembic.md","hash":"7573ba590b34a0720a5c334ec6629e2f0200ab26","modified":1598024585000},{"_id":"source/_drafts/doc.md","hash":"ee9691e234f1d0ac795daebf7c173c17b2618fb0","modified":1598024585000},{"_id":"source/_drafts/chrome-extensions-qrcode.md","hash":"0ac0485c915d4f8a4f9aa087423f8a20f36b2d09","modified":1598024585000},{"_id":"source/_drafts/docker-grep-log.md","hash":"00fbc735d3e61bfb90ad5df5bcf16bb2b413fa1f","modified":1598024585000},{"_id":"source/_drafts/flask-login.md","hash":"c9b71e379d67dbc991c75f3b05829ed23a12bd3c","modified":1598024585000},{"_id":"source/_drafts/docker-run-openresty.md","hash":"f4cbc637049cd83b2918cf92969102ce99ac0dd5","modified":1598024585000},{"_id":"source/_drafts/flask-routing.md","hash":"51f4dd2ff4aa489afc4ca2c4aa4e22bbd869f5e5","modified":1598024585000},{"_id":"source/_drafts/graphql.md","hash":"a07b98717b691511f29b8b1d7e3ff91f6988e4f4","modified":1598024585000},{"_id":"source/_drafts/hexo.md","hash":"b725ead55f6f7bd17a9df24bf5a021f8b0129d8e","modified":1598024585000},{"_id":"source/_drafts/hexo-reload-html.md","hash":"ff5a7ba9ef32ff90be3a14fa6a6caf21fae50972","modified":1598024585000},{"_id":"source/_drafts/maven.md","hash":"3a35c0c09dfa9f2f0e5b02ea66ea1094844f34f8","modified":1598024585000},{"_id":"source/_drafts/node-express-request-use-time.md","hash":"523fa2079533bccdf4aa8e62b2b0092756980243","modified":1598024585000},{"_id":"source/_drafts/python-awesome.md","hash":"5f0f9e2a75755a0208c116fc43dbcb73508b2607","modified":1598024585000},{"_id":"source/_drafts/pyinstaller.md","hash":"92848b5ddff65ebdbbf5d6d5c383dba50ca27033","modified":1598024585000},{"_id":"source/_drafts/python-decorator.md","hash":"894fd4c3a19deaad7a1ef6ec82c3278959f952f9","modified":1598024585000},{"_id":"source/_drafts/test.md","hash":"b61936734c6bc11d6f05c30c0e8eb07941f977b0","modified":1598024585000},{"_id":"source/_drafts/ubunto1604-nginx.md","hash":"f50c97145a12551b2d0bfcaf46e2b49e130299bc","modified":1598024585000},{"_id":"source/_drafts/spring-data-jparepository.md","hash":"ad177b0593de3884622f0889019dfbb90d86f4a1","modified":1598024585000},{"_id":"source/_drafts/wx-open-guide.md","hash":"3269de1d1c4bb9599443d974f9685a8d09efd983","modified":1598024585000},{"_id":"source/category/index.md","hash":"ce71f512c833da1a622ba0702bdd0fc78ef81e79","modified":1598024585000},{"_id":"source/_drafts/wx-pay-sign-error.md","hash":"2ac4d3c07b5137484c9bbe8a08e39d08fd6136a1","modified":1598024585000},{"_id":"source/hot/index.md","hash":"097a3560f32c24cf5bc3946164cc6a6c81586238","modified":1598024585000},{"_id":"source/linux/index.md","hash":"cdfd253abecef996c32ff127334149dc6cd733e3","modified":1598024585000},{"_id":"source/python/index.md","hash":"49a20ca94a9f465aecc4fda3a69267fa6ad746a7","modified":1598024585000},{"_id":"source/redpecket/index.md","hash":"bb8c77c37bd73f91b06dc362aea858b27be8af6a","modified":1598024585000},{"_id":"source/images/KeyCastr1.png","hash":"19ba257d4c949bf5de62cae0f0c4cd9864fe96ac","modified":1598024585000},{"_id":"source/images/KeyCastr3.png","hash":"07ed94cc6d5bc4369b0000879798ce2b96aff702","modified":1598024585000},{"_id":"source/images/KeyCastr5.gif","hash":"2f92b5f7e812d30b8e905ff0997cb509f783723d","modified":1598024585000},{"_id":"source/images/airline.png","hash":"7a22e31c4a3e1ec22d2f03f83c3497f5a5ecd463","modified":1598024585000},{"_id":"source/images/favicon.ico","hash":"6bae50c5d577612f03b4facf40e0705d7da03fe2","modified":1598024585000},{"_id":"source/images/mp.jpg","hash":"d8e9078c0e1b9a242d21c9fe3cc55c240813128d","modified":1598024585000},{"_id":"source/images/mysqlrpm.png","hash":"559d34dc76a2e61d66739b2d8f0c0465dc33966a","modified":1598024585000},{"_id":"source/images/pm2-list.png","hash":"2cb70816d807507467bcf7f5dba54a2c7136fcad","modified":1598024585000},{"_id":"source/images/screen_shot_category.jpg","hash":"2b6c8f4dff9f219520f9106a118879d8800586b4","modified":1598024585000},{"_id":"source/images/springhw1.png","hash":"1dddee530740e88873e2520313cd4bac09be3620","modified":1598024585000},{"_id":"source/images/springhw3.png","hash":"ea680f56ea6d29bb0c1bb1baf45da0ac7268dbba","modified":1598024585000},{"_id":"source/images/springhw4.png","hash":"192282b84be8a4abee3d04652cb96cd4b1df33e7","modified":1598024585000},{"_id":"source/images/springjson.png","hash":"540cfc5e2b2ba0deb9a55d1a0fc2e13822890284","modified":1598024585000},{"_id":"source/images/whitespace.gif","hash":"f904dd506bb94c9ed59ee368e13dad9864f1c9d7","modified":1598024585000},{"_id":"source/images/wxsq1.png","hash":"56091e65fbbd23699e650c4962d7ff809ab02e83","modified":1598024585000},{"_id":"source/tool/index.md","hash":"d6e03201e163a7e711c614c3ea5e4eaea9ba895d","modified":1598024585000},{"_id":"source/vim/index.md","hash":"472ee6254e01be0de406c5803881e5c1ca7b3da9","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/toc.ejs","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/main.507b3a.js","hash":"59ccafbd45d28c397a8a901152ef5e196077e4f4","modified":1598024585000},{"_id":"themes/yilia/source/mobile.fdc4b7.js","hash":"6bfff9bfe4d7e067b6289e851a4c424ac815af5e","modified":1598024585000},{"_id":"themes/yilia/source/tools/index.html","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"source/_posts/.2020-06-13-hexo-use-jupyter-notebook.md.swp","hash":"d4409032352242d2aff6311ce0cd963433c725c5","modified":1598033718000},{"_id":"source/_posts/2017-09-17-life-so-hard.md","hash":"9e3af78aea8fbe445d43f46c78eef01515c11e51","modified":1598024585000},{"_id":"source/_posts/2017-09-17-blog-to-hexo.md","hash":"5435eb0b81dad9a9d7b53be3ecb8b52cfeeb8ddc","modified":1598024585000},{"_id":"source/_posts/2017-09-19-git-submodule.md","hash":"16e329df42417c6451808a17727fc7960644d9bf","modified":1598024585000},{"_id":"source/_posts/2017-09-18-busuanzi.md","hash":"fa84fe11b1a8c14af03e5a47abd9f882824877ee","modified":1598024585000},{"_id":"source/_posts/2017-09-19-mysql-my-cnf.md","hash":"e0531eb0d56b8f9d241e2490043a43b596aff9cc","modified":1598024585000},{"_id":"source/_posts/2017-09-19-mysqldump.md","hash":"d51bd7f2ff19cc236b0bcf36cbd6f37321d4bb28","modified":1598024585000},{"_id":"source/_posts/2017-09-21-http.md","hash":"871fff59adca8e37bc1c46779bbce9d003e7a604","modified":1598024585000},{"_id":"source/_posts/2017-09-20-vim-plugin-pathogen.md","hash":"8ac1193cccb6fc9071f87eea76400c40f2944bb3","modified":1598024585000},{"_id":"source/_posts/2017-09-22-vim-plugin-tern.md","hash":"dcf4bee7ca955fedbb3f04ffb601a27a21c82532","modified":1598024585000},{"_id":"source/_posts/2017-09-22-vim-plugin-youcompleteme.md","hash":"9290fdc9aa7a915cbf0cedd221f6047b02c1de53","modified":1598024585000},{"_id":"source/_posts/2017-09-23-vim-plugin-ctrlp.md","hash":"64e8e1672cd04a8f261fadb424a5a10bbfa68d92","modified":1598024585000},{"_id":"source/_posts/2017-09-23-vim-plugin-expand-region.md","hash":"ab2dc2dc639c13d76ce40140bf6a409a8c89b38d","modified":1598024585000},{"_id":"source/_posts/2017-09-23-vim-plugin-quickrun.md","hash":"74fb12e51f504adb98055634783ab34d7f12ab18","modified":1598024585000},{"_id":"source/_posts/2017-09-24-tmux.md","hash":"d86a10926ddc4b152cb6bf5c6d07a476792cda31","modified":1598024585000},{"_id":"source/_posts/2017-09-25-mosh.md","hash":"d1de9c1e8da9195e2a144a6af8fe49faafcd4bc2","modified":1598024585000},{"_id":"source/_posts/2017-09-25-vim-plugin-artline.md","hash":"a9267f559457869aac9226fa279b1afbb5b1dbd0","modified":1598024585000},{"_id":"source/_posts/2017-09-25-vim-plugin-closetag.md","hash":"6ee1933b381f87bc202764a3a0e50fd1f243c332","modified":1598024585000},{"_id":"source/_posts/2017-09-25-vim-plugin-repeat.md","hash":"54d0aadad95d03ebe325cab52cec635b6e16b801","modified":1598024585000},{"_id":"source/_posts/2017-09-25-vim-plugin-gundo.md","hash":"4aa2f622ea21f06dd4180656186ff1999eeb0d7b","modified":1598024585000},{"_id":"source/_posts/2017-09-25-vim-plugin-nerdcommenter.md","hash":"bf7cafc72c1b9539e4e3a275c901e4252667495e","modified":1598024585000},{"_id":"source/_posts/2017-09-25-vim-plugin-solarize.md","hash":"2b06d966aff0141a96761617cd1a5b65c95c1046","modified":1598024585000},{"_id":"source/_posts/2017-09-25-vim-plugin-surround.md","hash":"fb81115e8d7d077b52dff1642b8e8c58345597a8","modified":1598024585000},{"_id":"source/_posts/2017-10-04-tmux-plugin-resurect-continuum.md","hash":"3a23af3ee938b5571a0f19914109a94b24edeb0e","modified":1598024585000},{"_id":"source/_posts/2017-10-13-need-learn.md","hash":"e678dd3dabde04f2ad17130e310fa983b58be04d","modified":1598024585000},{"_id":"source/_posts/2017-10-13-vim-grep.md","hash":"65f72130beb0819bff2d501789505d092b42ab18","modified":1598024585000},{"_id":"source/_posts/2017-10-13-vim-plugin-ack.md","hash":"0a468fd8c8930b7575858bfecf0aed7a3bc29f0c","modified":1598024585000},{"_id":"source/_posts/2017-09-25-vim-plugin-whitespace.md","hash":"f2655a78d4b3ec79f6783feec4452d4352a8edfa","modified":1598024585000},{"_id":"source/_posts/2017-10-13-vim-plugin-ctrlsf.md","hash":"b9178c56949a493225722442c40fead98b6e9ec7","modified":1598024585000},{"_id":"source/_posts/2017-10-13-vim-plugin-easygrep.md","hash":"0a31a06b3f7f9c4955b4179cd1b1c709cbfe0f98","modified":1598024585000},{"_id":"source/_posts/2017-10-31-k8s-minikube.md","hash":"bdb159e691f9510d9222c9c8ccbeb608e1d766e8","modified":1598024585000},{"_id":"source/_posts/2017-11-21-pyenv-mac.md","hash":"39fd5ec8fc7b97b6a8c179dda6f100206c00ebb0","modified":1598024585000},{"_id":"source/_posts/2017-11-22-interest-not-important.md","hash":"614525cb1c286712e4c346df3dd80cd7b83c7327","modified":1598024585000},{"_id":"source/_posts/2017-11-22-no-c-compiler.md","hash":"c78052eb010101df2999d2347cdad2220e521cb7","modified":1598024585000},{"_id":"source/_posts/2017-11-23-apt.md","hash":"60cca869430137a7dc3521443bcec87f10a767fb","modified":1598024585000},{"_id":"source/_posts/2017-11-24-get-os-name.md","hash":"66921454525be57d098b95be8e7eb49fb0b7fd41","modified":1598024585000},{"_id":"source/_posts/2017-11-23-unable-to-locate-package.md","hash":"2f92ad0f5a0c7ba6702b1dc0a82b00edafc00c04","modified":1598024585000},{"_id":"source/_posts/2017-11-24-python-list.md","hash":"4138c48e7ca798b281c6a057738370d0ba2416e9","modified":1598024585000},{"_id":"source/_posts/2017-11-27-make-time-firends.md","hash":"d6f8812e11322a67a2da49097d16c863749569b8","modified":1598024585000},{"_id":"source/_posts/2017-11-29-vim-abbreviations.md","hash":"32d00f93827f4125aa2706fd1f8ec6dff97ce14b","modified":1598024585000},{"_id":"source/_posts/2017-12-01-vim-mappings.md","hash":"04c1b14c6fcb3f2c188fa98662fee0883324e5b4","modified":1598024585000},{"_id":"source/_posts/2017-11-30-get-ip-location-timezone.md","hash":"5ab022aa89e131005902fab7f77d2cec25de4eab","modified":1598024585000},{"_id":"source/_posts/2017-12-05-distance-between-points.md","hash":"a65b9a57e65af7fa80893962dcea041b9587659d","modified":1598024585000},{"_id":"source/_posts/2017-12-05-python-timestamp-keng.md","hash":"a586c1c03b6b7666706afd9302985a601b41864a","modified":1598024585000},{"_id":"source/_posts/2017-12-06-get-random.md","hash":"af74f2d9bb3b4653d5dfdd032e457fa886639b3e","modified":1598024585000},{"_id":"source/_posts/2017-12-02-operator-pending.md","hash":"64db01ad76fb8eaefcce14df7ab9d0de7a02e653","modified":1598024585000},{"_id":"source/_posts/2017-12-07-java-compile.md","hash":"70ef6776cc5fa9c4c2901400d047f6fc48f6a60c","modified":1598024585000},{"_id":"source/_posts/2017-12-08-parse-url-params.md","hash":"c296bdb2cefc4b5bad460bf53bb83423f73498fd","modified":1598024585000},{"_id":"source/_posts/2017-12-09-python-linux-cmd.md","hash":"ee890697de96124d23020e72620159e49da5395a","modified":1598024585000},{"_id":"source/_posts/2017-12-09-timestamp.md","hash":"20a38e8e1ee3a00b17192bbfbe2980c82f1df171","modified":1598024585000},{"_id":"source/_posts/2017-12-10-python-datetime.md","hash":"aff3fb1f1ab3105c968084c1379c785858dc20c2","modified":1598024585000},{"_id":"source/_posts/2017-12-11-twitter-snowflake.md","hash":"73692df3e154bc18abf080212ad86d6e17544519","modified":1598024585000},{"_id":"source/_posts/2017-12-12-hexo-cust-js.md","hash":"8df17693bb2670df386663feb40b06a9b8327934","modified":1598024585000},{"_id":"source/_posts/2017-12-13-python-mysql.md","hash":"565dbb9b6c646878960732979bbcb5cfe20c2706","modified":1598024585000},{"_id":"source/_posts/2017-12-14-uglifyjs.md","hash":"4409f504e4ae85100fe75165f6fca144afceedaa","modified":1598024585000},{"_id":"source/_posts/2017-12-16-node-send-email.md","hash":"b69f745fcb2c9cdfd55164e46fa8df0aadc2a82b","modified":1598024585000},{"_id":"source/_posts/2017-12-17-fetch.md","hash":"3e7f4c870ffc18b6170bac8612f360f509921a4d","modified":1598024585000},{"_id":"source/_posts/2017-12-15-nvm.md","hash":"f7c7ba7ab56d5adbd77f0e7e1ed8de050bc2c136","modified":1598024585000},{"_id":"source/_posts/2017-12-18-python-email.md","hash":"9505124eb467f6e64d3d1cb7962a9c88303c21e5","modified":1598024585000},{"_id":"source/_posts/2017-12-19-tool-crypto.md","hash":"9db61f3ecfa25f334e36db2e5d273e0201d1857b","modified":1598024585000},{"_id":"source/_posts/2017-12-20-cryptojs.md","hash":"9310ffe420c006c6e233c879bf83a37febabd54f","modified":1598024585000},{"_id":"source/_posts/2017-12-21-screen.md","hash":"3bd48fd76caaabcf38c98a59a0e618344211da12","modified":1598024585000},{"_id":"source/_posts/2017-12-26-xincanzhe.md","hash":"5e20e5d169b5a55f33e6310395ffdc5e6c83d06d","modified":1598024585000},{"_id":"source/_posts/2017-12-22-ip-api.md","hash":"d0953a3bc04a413e7231b5e6b1179ea1c8e65ba1","modified":1598024585000},{"_id":"source/_posts/2017-12-24-mysql-select-rank.md","hash":"d2ceda1c24ae23d8981d6ba4bc4df0563609790e","modified":1598024585000},{"_id":"source/_posts/2017-12-23-us-tax.md","hash":"f7517faa9bec4d4d86ad0adf169f87c2f087e3cd","modified":1598024585000},{"_id":"source/_posts/2017-12-25-msgpack.md","hash":"5d099eab3c8b9a65e7eb31f7938658f02e77e6e3","modified":1598024585000},{"_id":"source/_posts/2017-12-27-python-decorator.md","hash":"45a2c3efffb028164bcdba98f303c2ca6a827cf3","modified":1598024585000},{"_id":"source/_posts/2017-12-28-node-sequelize.md","hash":"fcbd11ef2dc07b316fe07043974d5f57971a246c","modified":1598024585000},{"_id":"source/_posts/2017-12-29-linux-device-space.md","hash":"9c0e2a98fa7605c8fa3cebe9a46a1d6889803595","modified":1598024585000},{"_id":"source/_posts/2018-01-01-2018-begin.md","hash":"a988e494944c53f022baec320fef01265303f943","modified":1598024585000},{"_id":"source/_posts/2017-12-30-vim-plugin-write-helloworld.md","hash":"732cf05d8719803fc01db3ea6dced1f98b126e21","modified":1598024585000},{"_id":"source/_posts/2017-12-31-2017-end.md","hash":"0014c7509858fd1ead719a359c30946d85448b0a","modified":1598024585000},{"_id":"source/_posts/2018-01-02-vim-plugin-py-write.md","hash":"2e0e5a1d46d4c8a649b56f528339a5a65f7928d4","modified":1598024585000},{"_id":"source/_posts/2018-01-03-python-format.md","hash":"85972061da4124247f6461a2efdb59fd262f74b8","modified":1598024585000},{"_id":"source/_posts/2018-01-04-use-google-search-website.md","hash":"f41b55cb13127edb55d16d3ca87e3f550cff067b","modified":1598024585000},{"_id":"source/_posts/2018-01-06-convert-size.md","hash":"13dab0928a061cc6d11ccb0069ac2406b39203ef","modified":1598024585000},{"_id":"source/_posts/2018-01-05-urlencode.md","hash":"c676878026c0af67031f41630b8f4d49c00b3a06","modified":1598024585000},{"_id":"source/_posts/2018-01-07-chenshuiderenyuzhijia.md","hash":"fa8d50d04a5e739edef0da1365989e1a7c518ece","modified":1598024585000},{"_id":"source/_posts/2018-01-08-maven-spring-hello-world.md","hash":"ab4dde9f11eefe6bb4b9155c556bb236cfd4da8d","modified":1598024585000},{"_id":"source/_posts/2018-01-09-fix-refusing-to-merge-unrelated-histories.md","hash":"749275dabd9dddcbaa49a31e8b27342de4d90d80","modified":1598024585000},{"_id":"source/_posts/2018-01-10-maven-springmvc-return-json.md","hash":"06056dd57c26111e156b2c83ad6fe928499c9a2f","modified":1598024585000},{"_id":"source/_posts/2018-01-11-jinja-templateinheritance.md","hash":"70c70694b2c24dc29aeccfe42dd5fa324b042efd","modified":1598024585000},{"_id":"source/_posts/2018-01-13-python-isinstance.md","hash":"21d92624714903590515ccad818f6d011d063752","modified":1598024585000},{"_id":"source/_posts/2018-01-12-hexo-specific-symbol.md","hash":"5f1cc481641d4167179169529aef0918f1eb24d4","modified":1598024585000},{"_id":"source/_posts/2018-01-14-input-astrict.md","hash":"1d86c1e57af7595de0e16cca4d81b35dc137809f","modified":1598024585000},{"_id":"source/_posts/2018-01-15-linux-crontab.md","hash":"c93b07868427f425c477176b3944655b95be236f","modified":1598024585000},{"_id":"source/_posts/2018-01-17-bjsb-canbaodingzhi.md","hash":"5fdc61f83ddb44c6bbe1057442c60b95602607f6","modified":1598024585000},{"_id":"source/_posts/2018-01-16-python-f-strings.md","hash":"4383f2d1e22b8f22577cc98b41ebbfeb131d6147","modified":1598024585000},{"_id":"source/_posts/2018-01-18-jay-new-song-fangxuebiezou.md","hash":"1b77b3ca60651cd919931cd92aa34b9af43eb5a0","modified":1598024585000},{"_id":"source/_posts/2018-01-19-python-random.md","hash":"dc07ec5693bbf5f74cb520b7c9c6a53e9279113d","modified":1598024585000},{"_id":"source/_posts/2018-01-20-maven-spring-boot-hello-world.md","hash":"67edb6965fd4b27ec25dda786e64c82473bca137","modified":1598024585000},{"_id":"source/_posts/2018-01-21-maven-springboot-jpa-restful.md","hash":"25ebdea1d1bc10c6b011ecf91533d8d829a4a488","modified":1598024585000},{"_id":"source/_posts/2018-01-22-python-datetime-timedelta.md","hash":"6b560832c61c23e8f5b5e4c396c752b01e4a671f","modified":1598024585000},{"_id":"source/_posts/2018-01-23-python-apscheduler.md","hash":"81e850b416350eb9062c293976daadd1844f40db","modified":1598024585000},{"_id":"source/_posts/2018-01-24-python-sqlalchemy.md","hash":"4fe6f2c7988a72d4ab90fdf5bb86bb6b022aeb7c","modified":1598024585000},{"_id":"source/_posts/2018-01-26-flask-restless.md","hash":"2be9ed2a729a69da922be85afeb1bc565df0f119","modified":1598024585000},{"_id":"source/_posts/2018-01-27-json-formatter.md","hash":"09b918e2d18c46be80a9448b9dfe12c38ff474b9","modified":1598024585000},{"_id":"source/_posts/2018-01-28-qrcode-marker.md","hash":"77691b8884087d4eda179fa2b83f8b6242194947","modified":1598024585000},{"_id":"source/_posts/2018-01-29-download-from-img-src-data.md","hash":"3e004310ebcdecd6ecfe557bd45ea12aa0dcdf92","modified":1598024585000},{"_id":"source/_posts/2018-01-30-iframe-load-html-code.md","hash":"92730571afb8a098e6d26588e6d5d15a5691b6e3","modified":1598024585000},{"_id":"source/_posts/2018-01-31-console-log-to-html.md","hash":"cd8ac4f3edeef86c45eb44f7320226d45ca372ea","modified":1598024585000},{"_id":"source/_posts/2018-02-01-wx-getuser-messy-code.md","hash":"78aa6ff433c23aa8389524bbc1d8c2f1715f5f36","modified":1598024585000},{"_id":"source/_posts/2018-02-03-mac-open-finder-in-terminal.md","hash":"7a2ee19e110e758722e78737a8d48a53b79e8149","modified":1598024585000},{"_id":"source/_posts/2018-02-04-react-ace-onchange-setstate.md","hash":"37034a06a1feb1f3bdacf0d4ecf7a417e73e89fd","modified":1598024585000},{"_id":"source/_posts/2018-02-05-puppeteer-crawler.md","hash":"3acc629a833721b65ba500e1e05fdbda459934f7","modified":1598024585000},{"_id":"source/_posts/2018-02-06-pm2.md","hash":"2cfbfcc4628ecb3056ffdd154236ff8d3c0fb9e2","modified":1598024585000},{"_id":"source/_posts/2018-02-07-react-deply-nginx.md","hash":"f6ccfdcd50e8d94ef4225d11e4bd63a1e2f8cfdc","modified":1598024585000},{"_id":"source/_posts/2018-02-08-react-import-first.md","hash":"4e9a9751c21c667037ceee475739816f5a573ecc","modified":1598024585000},{"_id":"source/_posts/2018-02-09-linux-common-use.md","hash":"8d4bda42966b297038e22c502a1dd2d96792371f","modified":1598024585000},{"_id":"source/_posts/2018-02-11-beijing-xiaolvka.md","hash":"6ec70764bd24c804b959bbff49df7e650b0f4b4f","modified":1598024585000},{"_id":"source/_posts/2018-02-12-headless-chrome.md","hash":"1cf5a7b2293d1e11cea22f15cf87d1107aa8a110","modified":1598024585000},{"_id":"source/_posts/2018-02-10-react-set-port.md","hash":"5c70b6d324ebb35139a82470a1f6986a847a4445","modified":1598024585000},{"_id":"source/_posts/2018-01-25-flask-sqlalchemy.md","hash":"7ed4810002ac97a0bc65f8f2bdb840d0446522e6","modified":1598024585000},{"_id":"source/_posts/2018-02-14-graphene-type-json.md","hash":"ac1bd267f6ac62074c28b82647d89ad3d1e594ba","modified":1598024585000},{"_id":"source/_posts/2018-02-13-javascript-trim.md","hash":"ae512ad2f4ed1c34a5b4eaae35fcbb128394fa2f","modified":1598024585000},{"_id":"source/_posts/2018-02-15-chuxile.md","hash":"3dc6d10191b0d5c825322f6a3615109070a4d27a","modified":1598024585000},{"_id":"source/_posts/2018-02-17-linux-install-openresty.md","hash":"811383036ac679850c9421f14bd2deaa9177b5f5","modified":1598024585000},{"_id":"source/_posts/2018-02-18-json5.md","hash":"c3fa59ebbb63287f8b9a1d392f631d81b9f6aef6","modified":1598024585000},{"_id":"source/_posts/2018-02-19-flask-log.md","hash":"0716a3021c4f224335d07e5144f4558208273954","modified":1598024585000},{"_id":"source/_posts/2018-02-02-pyexecjs.md","hash":"7c3a3ca52fd1350dce0dda888867e0737dd8be1c","modified":1598024585000},{"_id":"source/_posts/2018-02-20-javascript-replace.md","hash":"04fe5c01edc5c89ff93a104a8b6ff6997ce53390","modified":1598024585000},{"_id":"source/_posts/2018-02-21-biran.md","hash":"aed4ec90dcd166e7543120c73011282e33698e45","modified":1598024585000},{"_id":"source/_posts/2018-02-22-python-super.md","hash":"6509edf3a8336d2c2cab24eeabbc4643a20590f6","modified":1598024585000},{"_id":"source/_posts/2018-02-24-chromedriver.md","hash":"e989e33171bd7991f5f78f1714f6bea9886a3fc2","modified":1598024585000},{"_id":"source/_posts/2018-02-23-python-graphql.md","hash":"cc2975bf8a92c7b75f78df8680bce86a919b684c","modified":1598024585000},{"_id":"source/_posts/2018-02-26-iterm2-expect.md","hash":"b54709741cbad47d27d17ee90c2b99bd5f7a9ea0","modified":1598024585000},{"_id":"source/_posts/2018-02-27-python-built-func.md","hash":"3cb304556d20363cb142a1b461a0e1f60a8a9efd","modified":1598024585000},{"_id":"source/_posts/2018-02-25-splinter.md","hash":"59d4974b30b0f404bd76563a09bb8f9c6633517f","modified":1598024585000},{"_id":"source/_posts/2018-02-28-terminal-proxy.md","hash":"78b45e4343a38a8a9b18afe7a599be36ff253255","modified":1598024585000},{"_id":"source/_posts/2018-02-16-fetch-timeout.md","hash":"92b4abcfc75bea59f40ce0038c9fbe545eef8c2d","modified":1598024585000},{"_id":"source/_posts/2018-03-01-python-module-class.md","hash":"9d2124f00f1ec6919e5352a070057e735dfb5a13","modified":1598024585000},{"_id":"source/_posts/2018-03-02-python-hasattr.md","hash":"06a7ac9cf2beefbbd53e52bf5dab7f5b6506a387","modified":1598024585000},{"_id":"source/_posts/2018-03-03-vim-paste-messy-code.md","hash":"6db227b1de52bd7c51c507f766dbd226b14a44f7","modified":1598024585000},{"_id":"source/_posts/2018-03-04-onkeydown-onkeypress-onkeyup.md","hash":"95602cfa27ddb47a53b32b2653f9589fb83aaf4b","modified":1598024585000},{"_id":"source/_posts/2018-03-05-feibaoligoutong.md","hash":"8f82420e1e5dc972416d33f31053df1e7a75258a","modified":1598024585000},{"_id":"source/_posts/2018-03-07-tr-Illegal-byte-sequence.md","hash":"8db552d8a077ba2dba9825312c06fc70e2ba9424","modified":1598024585000},{"_id":"source/_posts/2018-03-06-python-json-double-quotes-error.md","hash":"779188143c10877d272334f5c20d1f550dd3236d","modified":1598024585000},{"_id":"source/_posts/2018-03-08-python-common-decorator.md","hash":"820a9d3b03fc86e5a9323e1119227b6ffdbd8fd8","modified":1598024585000},{"_id":"source/_posts/2018-03-09-apk-decompile.md","hash":"cb4151e1497b8f5c6a5cd685518039692bbc3c8c","modified":1598024585000},{"_id":"source/_posts/2018-03-10-python-crypto.md","hash":"4ef76b2cf326d3269a25cb119b936782dcfc8573","modified":1598024585000},{"_id":"source/_posts/2018-03-11-binascii.md","hash":"d1be6a649f09bed0700b37dd6abaf38979b675c2","modified":1598024585000},{"_id":"source/_posts/2018-03-12-dev-random.md","hash":"302682762431edadf62220f07a97adc6a88185bb","modified":1598024585000},{"_id":"source/_posts/2018-03-13-english-again.md","hash":"f4e42b968e4769656585a3616c6d64c36393da00","modified":1598024585000},{"_id":"source/_posts/2018-03-14-redpacket-require-notice.md","hash":"44fea71d3eaf901917eb8d3bb6fa0753f345ca33","modified":1598024585000},{"_id":"source/_posts/2018-03-15-mysql-auto-generate-id.md","hash":"e0866e6e2ef17088a6ae4dbb6fce2b89ce004c6c","modified":1598024585000},{"_id":"source/_posts/2018-03-16-import-by-string.md","hash":"be018f792cc7067da2339eaf3dfb99fb65dbf2d9","modified":1598024585000},{"_id":"source/_posts/2018-03-17-python-upper-lower.md","hash":"e7f81c4d0929bd14227d8d36d06c22323207843b","modified":1598024585000},{"_id":"source/_posts/2018-03-18-python-class-name.md","hash":"0cb789b6361f1acb6ca90770ce3439e42664d9ea","modified":1598024585000},{"_id":"source/_posts/2018-03-19-pymysql.md","hash":"22b572ccaf1c2e55afdd9d69d8152b996f7c6359","modified":1598024585000},{"_id":"source/_posts/2018-03-20-update-htmltestrunner.md","hash":"a6ce61abb345c50c625e8ee0db549c81c3f4dc78","modified":1598024585000},{"_id":"source/_posts/2018-03-21-unittest.md","hash":"2995b7a95fd11c997bed80b2a246bf822ed4a0af","modified":1598024585000},{"_id":"source/_posts/2018-03-23-python-user-agents.md","hash":"0086f91e715c6e608a0b54ee1fbb5f81a6b48ca8","modified":1598024585000},{"_id":"source/_posts/2018-03-22-js-get-location-data.md","hash":"d35b5311834ad7f96bca40cae34ab1799b0ef7e4","modified":1598024585000},{"_id":"source/_posts/2018-03-24-py2-end-day.md","hash":"7ca016077c088c37a7f3acdf2e1e149e61789f89","modified":1598024585000},{"_id":"source/_posts/2018-03-25-vim-plugin-emmet.md","hash":"e28918700d7e3d779fa068b577aafd570bbae08c","modified":1598024585000},{"_id":"source/_posts/2018-03-27-sqlalchemy-paginate.md","hash":"5719eb1e04f154474268fe28040debaff299175a","modified":1598024585000},{"_id":"source/_posts/2018-03-26-replace-into.md","hash":"b8514b279149b425f9a56de80e33314dcbf27ebe","modified":1598024585000},{"_id":"source/_posts/2018-03-28-js-countdown.md","hash":"4deacecad3efa73a5151ed5f1f2ffb5a0be76334","modified":1598024585000},{"_id":"source/_posts/2018-03-31-linux-install-nginx.md","hash":"18f46bd46810b7676a350a5e772769c2630f8b3b","modified":1598024585000},{"_id":"source/_posts/2018-03-29-js-date.md","hash":"bdb8a94f06fdfbe68df13428c06dad66b42162c0","modified":1598024585000},{"_id":"source/_posts/2018-03-30-nginx-error-unknown-directive.md","hash":"0ad0e0ff86d7a9cff30318243fe79b43c35b71b9","modified":1598024585000},{"_id":"source/_posts/2018-04-01-nginx-geoip.md","hash":"521f6525e29a5951e935b942781d57894c6b17a0","modified":1598024585000},{"_id":"source/_posts/2018-04-03-shell-test.md","hash":"30e6a54c3806bce1b8ebdd74b1edabc7fbd30962","modified":1598024585000},{"_id":"source/_posts/2018-04-02-nginx-split-log.md","hash":"3cd8fbc3777f0deb107f9c0e08534e0ea79c607b","modified":1598024585000},{"_id":"source/_posts/2018-04-04-mysql-clone-table.md","hash":"c35da4d212ba17dd0f0c0490262038c03a30c802","modified":1598024585000},{"_id":"source/_posts/2018-04-05-nginx-params.md","hash":"218ec7bb633cd68cc05cc93493e8198d505bcd2e","modified":1598024585000},{"_id":"source/_posts/2018-04-06-linux-date.md","hash":"96ee57a6cb876d749d60a845f2de78e722edd2fa","modified":1598024585000},{"_id":"source/_posts/2018-04-08-bj-change-id-card.md","hash":"b711dbd94df0216c978a644b9d9bed4d17caf44e","modified":1598024585000},{"_id":"source/_posts/2018-04-07-first-book.md","hash":"f7152b05d3c3ad631904c37c7a5e3703aa95ad57","modified":1598024585000},{"_id":"source/_posts/2018-04-09-nginx-need-openssl.md","hash":"0519547d15697673c15f16a7fe6e8e98cf71e70b","modified":1598024585000},{"_id":"source/_posts/2018-04-10-centos-need-rpm.md","hash":"93b2b4502c8140f5e4e335bc92ee394903846a44","modified":1598024585000},{"_id":"source/_posts/2018-04-12-osx-user-sshfs.md","hash":"d26d72a23663dbbc587c8054824f525f6b75e146","modified":1598024585000},{"_id":"source/_posts/2018-04-14-bower.md","hash":"7639bec7b76dbdac1582caac6b2389b1ce10a555","modified":1598024585000},{"_id":"source/_posts/2018-04-11-template-no-auto-escaping.md","hash":"dfe735e1cb6f8703184e2f3a1224d092e25627c2","modified":1598024585000},{"_id":"source/_posts/2018-04-13-compression-image.md","hash":"9ff01bac542ef7bc1cb3e884c3282e933ca2673c","modified":1598024585000},{"_id":"source/_posts/2018-04-15-use-lrz.md","hash":"94303fde5e96fb03b9f4e00e0c9b27285cc61126","modified":1598024585000},{"_id":"source/_posts/2018-04-17-git-permission1.md","hash":"641cc4368656a7c753f0d25e6c2b73b033ee0094","modified":1598024585000},{"_id":"source/_posts/2018-04-21-where-yum-install.md","hash":"43eed636e8c3d2e85b87e05571ffa2cc741e52a2","modified":1598024585000},{"_id":"source/_posts/2018-04-20-js-dom.md","hash":"16fa9ceaaf44085b5aeb3929d428018344cf8bff","modified":1598024585000},{"_id":"source/_posts/2018-04-22-ipython-autoreload.md","hash":"c93c8cc0ad36096d7754f6ebc62983d64243b884","modified":1598024585000},{"_id":"source/_posts/2018-04-16-youtube-dl.md","hash":"9babe2f3e287a001f4143d5a9fc1d1c71b7ae4ee","modified":1598024585000},{"_id":"source/_posts/2018-04-19-12-jinglu.md","hash":"660e0d6517376a4ed46d7ab2214807fbd0eacbb1","modified":1598024585000},{"_id":"source/_posts/2018-04-18-python-quzheng.md","hash":"bc821ee4688d6c609a62ec9616b6dadea8d01e3e","modified":1598024585000},{"_id":"source/_posts/2018-04-23-ipython-use-virtualenv.md","hash":"fc3401bf827b35e6d0b4dd8fbd44c05ecb9e5aa3","modified":1598024585000},{"_id":"source/_posts/2018-04-24-python-json.md","hash":"1293cd4ae80ad31ffaa20beb5d9aff9090912f4a","modified":1598024585000},{"_id":"source/_posts/2018-04-27-js-file-field.md","hash":"c791aa25b513f134b9ca5228e09118162601730e","modified":1598024585000},{"_id":"source/_posts/2018-04-29-cdn-use-ace.md","hash":"c09f5179f11168d755b54065db9b518875faae3d","modified":1598024585000},{"_id":"source/_posts/2018-05-01-dom-target.md","hash":"0ffc8057bbb3d0af8fb88612bf437e64ba4cf38f","modified":1598024585000},{"_id":"source/_posts/2018-04-28-html-import.md","hash":"43532d21e37208a9fcad3252edfe21af5ca33de8","modified":1598024585000},{"_id":"source/_posts/2018-04-26-js-image-size.md","hash":"3922e64f9a25194df3077deeabf485c781b663ab","modified":1598024585000},{"_id":"source/_posts/2018-04-25-aliyun-acs-endpoint-error.md","hash":"43c84c6815eff6f7149463ef790a2547647c453b","modified":1598024585000},{"_id":"source/_posts/2018-04-30-js-cookie.md","hash":"a5d79b1a7c75d6a19ba6a1280e752843c90902a5","modified":1598024585000},{"_id":"source/_posts/2018-05-03-js-select-dom.md","hash":"2567696dda458df6a36c7e0f8c816f6d75db0a89","modified":1598024585000},{"_id":"source/_posts/2018-05-04-js-bind-key.md","hash":"cd5260674de2f2b3bdc95c4988be5e1b133c5cba","modified":1598024585000},{"_id":"source/_posts/2018-05-06-js-json.md","hash":"d332f579718563ecfb8fde06c64f7c3e6df41bc6","modified":1598024585000},{"_id":"source/_posts/2018-05-02-cdn-lib.md","hash":"4a6bab132585eb3cc9b4e5b79ee37a8b72109705","modified":1598024585000},{"_id":"source/_posts/2018-05-05-storage.md","hash":"c9ab71c27612efcb7a23d498baef43cb23b90412","modified":1598024585000},{"_id":"source/_posts/2018-05-07-tree.md","hash":"27be57ac146081d214965f0ca76195857a4919cf","modified":1598024585000},{"_id":"source/_posts/2018-05-08-js-custom-event.md","hash":"7060703e87bfe891af7826f908d5839c9b707e5d","modified":1598024585000},{"_id":"source/_posts/2018-05-09-es6-class.md","hash":"0601b1b2d34997a2620cb9ead06e1a30e1d4a541","modified":1598024585000},{"_id":"source/_posts/2018-05-10-use-electron-builder.md","hash":"a8db038b17c431457176a06ce3b2882da0b81ce2","modified":1598024585000},{"_id":"source/_posts/2018-05-11-pm2-run-hexo.md","hash":"9c37bb725a584d1ba839b8c59205f8b9436a8ba3","modified":1598024585000},{"_id":"source/_posts/2018-05-12-ubuntu-install-yarn.md","hash":"41aea75bee46812354bb18a7eabb4a81408cb57b","modified":1598024585000},{"_id":"source/_posts/2018-05-13-yarn-guide.md","hash":"cd404b6c11c74cea0cb2e39d3cdd7c9b783cfce8","modified":1598024585000},{"_id":"source/_posts/2018-05-14-pyenv.md","hash":"7f89fdd92045d5371cfd6af1c62cf4a1a2882e68","modified":1598024585000},{"_id":"source/_posts/2018-05-15-centos-install-docker.md","hash":"dbee44e917d7b4f89b87d3830d08d12f7c0f3bfd","modified":1598024585000},{"_id":"source/_posts/2018-05-17-docker-error.md","hash":"2b1677cf8da4463acd5aa17ea54724bf08f5000e","modified":1598024585000},{"_id":"source/_posts/2018-05-16-use-docker.md","hash":"96862df3a238f8079a969f806facd4d51db987ff","modified":1598024585000},{"_id":"source/_posts/2018-05-19-centos-install-htop.md","hash":"a22112c0ff60e3e2f3551507b86fe8e71e0a6f95","modified":1598024585000},{"_id":"source/_posts/2018-05-18-ubuntu-14-04-install-docker.md","hash":"b9020251614c9979d18f3d25f7cc6df9bd1c193c","modified":1598024585000},{"_id":"source/_posts/2018-05-20-ubuntu-16-04-install-docker.md","hash":"ed0b0cd36d915de88571f988e0539175584c5069","modified":1598024585000},{"_id":"source/_posts/2018-05-21-mac-use-vagrant.md","hash":"a3a52023fdfd5509ca7f1fa04e851cf3ab7e00b5","modified":1598024585000},{"_id":"source/_posts/2018-05-22-linux-install-dig.md","hash":"0fce62fd7f2c41a29860b7e54ae9e7c3b76fcd7c","modified":1598024585000},{"_id":"source/_posts/2018-05-24-nginx-upsync.md","hash":"8ef89cf25497f5c5e18300ba2832926e23621a1b","modified":1598024585000},{"_id":"source/_posts/2018-05-23-etcd.md","hash":"3cd468d3d95ec2711f6a2d4f02758c6fcbc05cef","modified":1598024585000},{"_id":"source/_posts/2018-05-25-docker-restart.md","hash":"61a7eaed30c873db9cd5986e3ea329e763332d8e","modified":1598024585000},{"_id":"source/_posts/2018-05-26-shell-split.md","hash":"eaabbd4c18260388efee2bd37762d6561964cb27","modified":1598024585000},{"_id":"source/_posts/2018-05-27-echo.md","hash":"4b39e8da76daf417c2b5e0da3a8c5a08cb030068","modified":1598024585000},{"_id":"source/_posts/2018-05-28-macos-version.md","hash":"11cec58a59a08aea90b8f2144a36d8543c8acc9c","modified":1598024585000},{"_id":"source/_posts/2018-05-30-nginx-http-https.md","hash":"a31baa652d484d06eb75d1fdd0ccd4e8c3b4de39","modified":1598024585000},{"_id":"source/_posts/2018-05-29-shell-string-contain.md","hash":"c17842f1ecc29e3a3a13eead07435d5acb558683","modified":1598024585000},{"_id":"source/_posts/2018-05-31-expect-file.md","hash":"32c2e741c638bdc5e101261289634dd3e6d31e09","modified":1598024585000},{"_id":"source/_posts/2018-06-01-shell-profile.md","hash":"70a77a0c4894ad62adb4ddffe97576aeea6304cd","modified":1598024585000},{"_id":"source/_posts/2018-06-03-tee.md","hash":"3ef6cef688fe7fd56ed8f4ec057d3be455a8f095","modified":1598024585000},{"_id":"source/_posts/2018-06-04-shell-args.md","hash":"884bdde0bc2e4d42704d44a717249e771a4d6a66","modified":1598024585000},{"_id":"source/_posts/2018-06-02-file-permission-denied.md","hash":"bc67c6b52305d7fe71d9cc4537b26f7e60fac3c2","modified":1598024585000},{"_id":"source/_posts/2018-06-05-ubuntu1604-install-mysql.md","hash":"375bd86f6cf2e117900ed9ff8219c3c0c5194553","modified":1598024585000},{"_id":"source/_posts/2018-06-06-i-am-a-dad.md","hash":"ff32111aa3c95ccdb453c54cfa74d71aaa7926b4","modified":1598024585000},{"_id":"source/_posts/2018-06-07-install-ack.md","hash":"4ab35e58b9e898f50ef45a42d2ad664e208cc411","modified":1598024585000},{"_id":"source/_posts/2018-06-09-baby1.md","hash":"50600bbab10c9dbabd1c47a7ab1fdffd0ea49ec4","modified":1598024585000},{"_id":"source/_posts/2018-06-08-jre-jdk.md","hash":"9b31fe3cff74df8e1b5dc5c4ee38e111df77613b","modified":1598024585000},{"_id":"source/_posts/2018-06-11-python-simple-server.md","hash":"b7564fcc439a0b07f329819589b924702a6ad3eb","modified":1598024585000},{"_id":"source/_posts/2018-06-10-centos7-install-mysql.md","hash":"ade0018fd0a905fcd6c5ddc7e7588706d9aabad4","modified":1598024585000},{"_id":"source/_posts/2018-06-12-centos7-install-es.md","hash":"4efc44c0daf4b117d522016f295360e997abcda1","modified":1598024585000},{"_id":"source/_posts/2018-06-15-centos-install-jdk.md","hash":"5cf1ee8593f0209973b2db8c2f532b3c827fa149","modified":1598024585000},{"_id":"source/_posts/2018-06-13-baby7-nanshou.md","hash":"f7b955350634ae35341649bd843715bb91a482c0","modified":1598024585000},{"_id":"source/_posts/2018-06-14-docker-log.md","hash":"ba666a42dc38130789f718afb27016552e9f3f04","modified":1598024585000},{"_id":"source/_posts/2018-06-17-baby10.md","hash":"f04271f12ee21c404485301f5996ef2ece1378ec","modified":1598024585000},{"_id":"source/_posts/2018-06-16-mysql-vagrant-connect.md","hash":"cf56087361f71576d0a92e9eec08ac67bfae3736","modified":1598024585000},{"_id":"source/_posts/2018-06-18-expect-source.md","hash":"9a129bb1827ee1760594aa146ac3a9618cae2f2f","modified":1598024585000},{"_id":"source/_posts/2018-06-20-shell-replace.md","hash":"49ab504a80f01714e5a6b84fa0350c88bf294249","modified":1598024585000},{"_id":"source/_posts/2018-06-19-ubuntu-install-jdk.md","hash":"14c604d1fe80aa3a37a9b16e8ff9dd4100fa7203","modified":1598024585000},{"_id":"source/_posts/2018-06-21-python-short-url.md","hash":"407609edc598907a174fbbc6401acd3d1c1a4d26","modified":1598024585000},{"_id":"source/_posts/2018-06-22-js-doc-link.md","hash":"16381761d2613898bd38d9eb3d843eb7108feb48","modified":1598024585000},{"_id":"source/_posts/2018-06-24-ubuntu1604-install-chrome.md","hash":"45ffacbaef293d62956ce24653ab09bbdea3c314","modified":1598024585000},{"_id":"source/_posts/2018-06-26-node-ws.md","hash":"445e7d723b54d5bcbd6b95b997168f45f3825f39","modified":1598024585000},{"_id":"source/_posts/2018-06-23-wget.md","hash":"ee35e46432dca065b4b7217b92b3263d494cbab8","modified":1598024585000},{"_id":"source/_posts/2018-06-25-baby19.md","hash":"4c7a242574914a8c8ed8fec00f45f3b8ee146a21","modified":1598024585000},{"_id":"source/_posts/2018-06-28-ufw.md","hash":"d6e4f61e39aacc8585453bafeb83239bfb59064f","modified":1598024585000},{"_id":"source/_posts/2018-06-30-centos-yum-config-manager-not-found.md","hash":"d677131277395d041cba5f3d0f79fbd6fc5f1d0c","modified":1598024585000},{"_id":"source/_posts/2018-06-29-wshell.md","hash":"acf98e506e9d310645d639078b2b397068c30fcc","modified":1598024585000},{"_id":"source/_posts/2018-07-02-mysql-biaoqing.md","hash":"c653b28d6c0d709a1e342a2d50562dd841b7c0d1","modified":1598024585000},{"_id":"source/_posts/2018-06-27-is-install.md","hash":"62fc8553afa30f5aa15b5fe767aeaf2bc61954b2","modified":1598024585000},{"_id":"source/_posts/2018-07-01-ansible-task1.md","hash":"57f427b43381627f5eec56e8b12a43f2116bbbf7","modified":1598024585000},{"_id":"source/_posts/2018-07-04-linux-install-es.md","hash":"f9dd8e14129b9362d70a6b11cee20587f11204eb","modified":1598024585000},{"_id":"source/_posts/2018-07-03-centos-install-ifconfig.md","hash":"6561ed54c0eda5bbf98cfb568ccff4403c53afbc","modified":1598024585000},{"_id":"source/_posts/2018-07-05-elk.md","hash":"b06c92d682991ceaf4d57ae357f4f5cdd68c0d16","modified":1598024585000},{"_id":"source/_posts/2018-07-08-css-radius.md","hash":"0ba7ed90283b7b4691ed07993cf3377681de6bbb","modified":1598024585000},{"_id":"source/_posts/2018-07-06-mount.md","hash":"bbc25f28291cf7e5519105b8f7f56f394d916e6a","modified":1598024585000},{"_id":"source/_posts/2018-07-10-yum.md","hash":"8cb9b7de3e0f996ee1a726be613d0213fc48fd4c","modified":1598024585000},{"_id":"source/_posts/2018-07-07-xmltojson.md","hash":"2f1bdaa22803423508b823837e596637222ea92b","modified":1598024585000},{"_id":"source/_posts/2018-07-09-linux-case.md","hash":"19909c4c77cbc1324db9988bf5c776be5cab9f4b","modified":1598024585000},{"_id":"source/_posts/2018-07-12-flask-cookie.md","hash":"15f435261f585be6568fccdd8b0af6d580fefc44","modified":1598024585000},{"_id":"source/_posts/2018-07-11-linux-install-vagrant.md","hash":"6adb711825678c238ad6d5a8a4c82bac526174a3","modified":1598024585000},{"_id":"source/_posts/2018-07-13-python-create-pip.md","hash":"d8bf596b0b2fbbe8c44434e84f9451c835274e0c","modified":1598024585000},{"_id":"source/_posts/2018-07-14-wx-open-scope-issue.md","hash":"f2af049a4123b3d14cd2a5b4d389e9c964ab6bf3","modified":1598024585000},{"_id":"source/_posts/2018-07-16-linux-fenbianlv.md","hash":"293cbc83b67f2a91e1548e4710a842523f1d37f4","modified":1598024585000},{"_id":"source/_posts/2018-07-17-jquery-fn.md","hash":"da9f1dbbe013a497ed110a7e78541e8df5f9d8a1","modified":1598024585000},{"_id":"source/_posts/2018-07-18-ubuntu-vim-clipboard.md","hash":"71699067f51eee6a30a803e9b00a230779dc124b","modified":1598024585000},{"_id":"source/_posts/2018-07-19-mysql-string-prefix.md","hash":"bd7b2d44fb841224537e3375f267a2b2adc0c0a2","modified":1598024585000},{"_id":"source/_posts/2018-07-20-string-no-letters.md","hash":"bb519670ff70846abd92883fa186f7f48cf43d79","modified":1598024585000},{"_id":"source/_posts/2018-07-21-python-pip-install-requires.md","hash":"ea8601a98e33bb0348fa87258479f6e6f84c67b8","modified":1598024585000},{"_id":"source/_posts/2018-07-24-vagrantfile.md","hash":"89f45b6c4d074c216656502e96e3f806d0387593","modified":1598024585000},{"_id":"source/_posts/2018-07-23-ssl-checker.md","hash":"0973a74299e81f525ed02dcbb8e9c9f00ecc294f","modified":1598024585000},{"_id":"source/_posts/2018-07-25-pip-china.md","hash":"ecf7d730492a82e1b99adf2495b93ac6397c769e","modified":1598024585000},{"_id":"source/_posts/2018-07-26-python-chardet.md","hash":"434a8490395292e4df0eabdff9573c3b6214fd37","modified":1598024585000},{"_id":"source/_posts/2018-07-27-python-json-filter.md","hash":"96aff7a9ac200b0d781632a561d9e5d4089d5574","modified":1598024585000},{"_id":"source/_posts/2018-07-28-get-video-duration.md","hash":"2eb4587b1616535f92edb243a585cc229b449df8","modified":1598024585000},{"_id":"source/_posts/2018-07-15-supervisor-issue-eisdir.md","hash":"4548559dbc226bcfa154a0f5eed0475cdea7d314","modified":1598024585000},{"_id":"source/_posts/2018-07-22-openresty-error-ngx-postgres.md","hash":"ff0c24a95a781392960f8dfbba4131d6553a0357","modified":1598024585000},{"_id":"source/_posts/2018-07-30-wx-open-issue1.md","hash":"f20be3a94809d73e049dbfd6be8f1ef385e24622","modified":1598024585000},{"_id":"source/_posts/2018-07-29-python-is-number.md","hash":"cf7e2895d0d492a4598ee908bd9de25f699cb404","modified":1598024585000},{"_id":"source/_posts/2018-08-01-python-format-show-big-parantheses.md","hash":"c637f2f624e6b3905a308691a2cffa8730ef9997","modified":1598024585000},{"_id":"source/_posts/2018-08-02-du-diff-df.md","hash":"7329fe67bda367a03c35bd6509493985e06a7a08","modified":1598024585000},{"_id":"source/_posts/2018-07-31-flask-redirect.md","hash":"df9bde2e9e3f7ebb43c5d40af26821e3331c1d23","modified":1598024585000},{"_id":"source/_posts/2018-08-03-flask-login-fetch.md","hash":"118966fa1d09472c55a5b54acc693f0dc1f57525","modified":1598024585000},{"_id":"source/_posts/2018-08-04-jquery-addclass.md","hash":"28e4237a746b2c03e15efd467345713c73750e37","modified":1598024585000},{"_id":"source/_posts/2018-08-05-iframe-parent-sun.md","hash":"5e13c6cdd25f5ffe29f7c6bfcefb59f0e663a531","modified":1598024585000},{"_id":"source/_posts/2018-08-06-html-reload.md","hash":"92018f0807def1ef05f493daf9b871cd2bce7229","modified":1598024585000},{"_id":"source/_posts/2018-08-07-jquery-listen-change.md","hash":"7ae166e411da7ea89359b17a843890e635de4800","modified":1598024585000},{"_id":"source/_posts/2018-08-08-markdown-table.md","hash":"8ddceccd386e7f0a015064ce2113c050503361e7","modified":1598024585000},{"_id":"source/_posts/2018-08-09-java-error-list1.md","hash":"2b13f0adaec16d44e9023da9d1621639c6993972","modified":1598024585000},{"_id":"source/_posts/2018-08-10-go-main-not-found.md","hash":"d6e019e2d2e645841a5527f6e3869247d4edeccc","modified":1598024585000},{"_id":"source/_posts/2018-08-11-go-map.md","hash":"4a034abbb8a4dc1015b319e7452f36eaddc6b07c","modified":1598024585000},{"_id":"source/_posts/2018-08-12-go-array-go.md","hash":"66ade3a18e3ac5afb1a4653dd59b46f876f4a59c","modified":1598024585000},{"_id":"source/_posts/2018-08-13-go-decision.md","hash":"88fb31ad601d3fcf8c4fbb5788ee4771d8f0d2b5","modified":1598024585000},{"_id":"source/_posts/2018-08-14-go-struct.md","hash":"3457d03fa365e14f235ae18418a0f97ad6c38e85","modified":1598024585000},{"_id":"source/_posts/2018-08-15-go-byte-string.md","hash":"d0acba864bcd751c06302f0cbd6a9504cfa4520f","modified":1598024585000},{"_id":"source/_posts/2018-08-16-go-syntax-error2.md","hash":"aeb5b3bf4bdf6c8c6421c83274c136ccf7ab60c9","modified":1598024585000},{"_id":"source/_posts/2018-08-18-js-copy.md","hash":"cc16a9f277935a1875abfa64b8c15604f1c8155e","modified":1598024585000},{"_id":"source/_posts/2018-08-17-python-pycrypto-rsa.md","hash":"49d9a5621bbb20a61ac8bf9e62fcce837775646a","modified":1598024585000},{"_id":"source/_posts/2018-08-19-go-struct-to-json.md","hash":"1ec00777f3c27524a26b77cdde9c41b0e4d98176","modified":1598024585000},{"_id":"source/_posts/2018-08-20-go-syntax-error1.md","hash":"c9894ea2759d2b2776d378ad0fb0d73704e8017a","modified":1598024585000},{"_id":"source/_posts/2018-08-21-go-daxiaoxie.md","hash":"7f2458ddce6b23782b0458455387260aef02e4ca","modified":1598024585000},{"_id":"source/_posts/2018-08-22-go-md5-hmac.md","hash":"5a0a1a752842b571b4ff680105c1820d5814b8e2","modified":1598024585000},{"_id":"source/_posts/2018-08-23-go-main-redeclared.md","hash":"96ff1a69a8bc7459c3aa7272b977a1373d65dccd","modified":1598024585000},{"_id":"source/_posts/2018-08-24-go-loops.md","hash":"338e05cedf47b87e13b50b621ab6f263310ee1af","modified":1598024585000},{"_id":"source/_posts/2018-08-25-python-PyCrypto-error.md","hash":"cbf48599afe98c78cf66697cbfe226227b3bb980","modified":1598024585000},{"_id":"source/_posts/2018-08-26-go-flag.md","hash":"0b8e2f3d984a56ab73ebf6273fb058858ffac56f","modified":1598024585000},{"_id":"source/_posts/2018-08-27-go-time.md","hash":"062760c52ccc3a6169613461746cb39210275d33","modified":1598024585000},{"_id":"source/_posts/2018-08-28-go-callback.md","hash":"d6ef144a21494b094550ae6158373d8e5ecd3994","modified":1598024585000},{"_id":"source/_posts/2018-09-01-linux-jq.md","hash":"3fb6720a7b8cf87b92a467b5cea0a0f5a494fc8a","modified":1598024585000},{"_id":"source/_posts/2018-08-29-python-pip-install-error-setuptools-too-old.md","hash":"a0b69085d0663c44ec74ed346ac900f2933b66f8","modified":1598024585000},{"_id":"source/_posts/2018-09-02-linux-pipeline.md","hash":"6419dc66370866d32c71d845132e9a65d5b9e3b0","modified":1598024585000},{"_id":"source/_posts/2018-08-31-salt-bcrypt.md","hash":"17918fa6b3549737a0ba1e12d32fcce1df5d8f79","modified":1598024585000},{"_id":"source/_posts/2018-08-30-go-exists-file.md","hash":"e6c34b211ed9e92fed72bae55ad7d9040148c934","modified":1598024585000},{"_id":"source/_posts/2018-09-03-sort-map-by-key.md","hash":"b6436a6a408ae7008c67638f24d0579d04c92755","modified":1598024585000},{"_id":"source/_posts/2018-09-05-http-accept-ranges.md","hash":"db819ab38a92be740ad5551af0689ab5fc23b792","modified":1598024585000},{"_id":"source/_posts/2018-09-04-thunder-url-parse.md","hash":"1ee8dc1d73c73a3eb7e30f05a6f1287ebbabb07f","modified":1598024585000},{"_id":"source/_posts/2018-09-06-macos-md5sum.md","hash":"4996710a55d1a93a84501c2e4962821d50cc4154","modified":1598024585000},{"_id":"source/_posts/2018-09-07-go-fmt-color.md","hash":"01f892beed9be0858f71773fb90b70f48d2dd5c2","modified":1598024585000},{"_id":"source/_posts/2018-09-09-go-chan-select.md","hash":"3ca0761450794b420a752189b13e675399c0266f","modified":1598024585000},{"_id":"source/_posts/2018-09-08-go-mysql.md","hash":"1f4c6e18edda8a9fa74e8585691247748ef685ff","modified":1598024585000},{"_id":"source/_posts/2018-09-10-wcrypto.md","hash":"c993368136a958a6328d2639a6f157f1b1fd1dd4","modified":1598024585000},{"_id":"source/_posts/2018-09-11-linux-sed.md","hash":"92a32e3d9db0ebc14bc53a6123ff81e61885ce34","modified":1598024585000},{"_id":"source/_posts/2018-09-12-linux-seq.md","hash":"c232bd64aaff97e101f0dae36ff40bd1584df0be","modified":1598024585000},{"_id":"source/_posts/2018-09-13-linux-awk.md","hash":"f863f54d4a9b67fa90605c6a54aa190b8a900507","modified":1598024585000},{"_id":"source/_posts/2018-09-14-go-multi-install.md","hash":"a3ea3acca0b92ec3d5e84999d1de9956d1cbe3ba","modified":1598024585000},{"_id":"source/_posts/2018-09-15-mysql-timestamp-format.md","hash":"fef1099930c8ac08f2c82dbdb459bbc84c58ea1b","modified":1598024585000},{"_id":"source/_posts/2018-09-16-ideanote.md","hash":"3385bc5f5f322ac7c357611d36a7d49811c26811","modified":1598024585000},{"_id":"source/_posts/2018-09-17-vim-plugin-gocode.md","hash":"3e8b805864b0e8488eb57ce7e4996f1b5aef7fb6","modified":1598024585000},{"_id":"source/_posts/2018-09-18-mac-use-sed.md","hash":"d85a57ab1676311722c41e7892f6219c02c0c37e","modified":1598024585000},{"_id":"source/_posts/2018-09-19-zip-unzip.md","hash":"c9edc5b23033e02fc506e6538097d597f9fce05c","modified":1598024585000},{"_id":"source/_posts/2018-09-20-mysql-var.md","hash":"f3055fbc10ebe4e3a02190a78943e5001e003e08","modified":1598024585000},{"_id":"source/_posts/2018-09-22-go-time-sleep.md","hash":"b1a98e72bff1c73d5450a8e1508c750592d1c130","modified":1598024585000},{"_id":"source/_posts/2018-09-21-go-type.md","hash":"46a969347e7a54c428e4a0cf341883db25fac782","modified":1598024585000},{"_id":"source/_posts/2018-09-23-go-string-substr.md","hash":"cfa72a66627109ca7e03e8d391a25bccda63d461","modified":1598024585000},{"_id":"source/_posts/2018-09-24-redis-cli-login.md","hash":"84fc85497159b9314b29c8ea497508fb3fe3e936","modified":1598024585000},{"_id":"source/_posts/2018-09-26-mysql-error-match-value.md","hash":"d2f9ea36db2aa1ee2587636254bf203849d08a99","modified":1598024585000},{"_id":"source/_posts/2018-09-27-python-googletrans.md","hash":"5629ea852aa717c1f24f747991a186a5338b5b18","modified":1598024585000},{"_id":"source/_posts/2018-09-27-linux-cat-hide-char.md","hash":"e94e740cbef02b2b3a3262bf6144c1519ebadc3d","modified":1598024585000},{"_id":"source/_posts/2018-09-29-python-timezone-offset.md","hash":"b9d41ce0c3ba585e7978c3bc15cdeb6c5184f3bf","modified":1598024585000},{"_id":"source/_posts/2018-09-28-mysql-like-Underline.md","hash":"7a4d606ed7d70c32b814d7cb5f1477196a6ba4c5","modified":1598024585000},{"_id":"source/_posts/2018-09-30-git-update-editor.md","hash":"3762bdabc97e76b4dd50de246aa0b94563c81ab4","modified":1598024585000},{"_id":"source/_posts/2018-10-01-python-file.md","hash":"dad04836eeaf49e65b1b3c828ce023235fb3d8c7","modified":1598024585000},{"_id":"source/_posts/2018-10-02-python2-3-urlencode-urldecode.md","hash":"d239ef8b7761eaf95f0171fbfd82b0b3e920878b","modified":1598024585000},{"_id":"source/_posts/2018-10-03-python-thumbnail-image.md","hash":"3c9f5095f4d14ba7012ad86f1d808d18a54d7ab8","modified":1598024585000},{"_id":"source/_posts/2018-10-04-python-type-create-class.md","hash":"0ae8f00458c7ada8503bb15b58c924451289ea09","modified":1598024585000},{"_id":"source/_posts/2018-10-05-python-date-week.md","hash":"b342837a6f6353a871bf9660931d5c39bf381f7c","modified":1598024585000},{"_id":"source/_posts/2018-10-06-algorithm-integer-reverse.md","hash":"5071d6b9b404f0971144cbfa12f874090dd2fcd9","modified":1598024585000},{"_id":"source/_posts/2018-10-09-mysql-substring.md","hash":"53402275f686f137d1287a88844fd7a136538f9a","modified":1598024585000},{"_id":"source/_posts/2018-10-07-algorithm-add-two-numbers.md","hash":"10de6c5f900946c76c31721d3fbdf8930ab777d8","modified":1598024585000},{"_id":"source/_posts/2018-10-10-python-requests.md","hash":"eeb250dc22426087e5b1ef918b284bab6efd4a9a","modified":1598024585000},{"_id":"source/_posts/2018-10-11-ubuntu1804-install-mysql.md","hash":"4d0d87991e47e2db5aff62511e3bc844466d24ec","modified":1598024585000},{"_id":"source/_posts/2018-10-08-zsh-startup-files.md","hash":"5494df747c578a0917dec4f65f0fdc48397dc192","modified":1598024585000},{"_id":"source/_posts/2018-10-12-go-invalid-memory.md","hash":"2e5c48e2d666bba3db180adaf23e23ceccab42db","modified":1598024585000},{"_id":"source/_posts/2018-10-14-leetcode-2-add-two-numbers.md","hash":"7c389e67b918c7dc82b54a95fa3de3d530d11caa","modified":1598024585000},{"_id":"source/_posts/2018-10-15-leetcode-3-longest-substring-without-repeating-characters.md","hash":"45cbb085fbef88418f6c8ad381af092c1a831a07","modified":1598024585000},{"_id":"source/_posts/2018-10-16-leetcode-7-reverse-integer.md","hash":"241ea28b13be8731fb48fa73209657507ed0baaf","modified":1598024585000},{"_id":"source/_posts/2018-10-13-leetcode-1-two-sum.md","hash":"e3f9c9dc3381dce19ac388958c11d59f13e6eed6","modified":1598024585000},{"_id":"source/_posts/2018-10-17-ubuntu-error-could-not-get-lock.md","hash":"2459610db5003eeff685f8a911b6cf274c235de3","modified":1598024585000},{"_id":"source/_posts/2018-10-18-leetcode-136-single-number.md","hash":"cbfc71fcfc5e07d28331f4c9af70692b7d7a7169","modified":1598024585000},{"_id":"source/_posts/2018-10-19-mac-disk-utility.md","hash":"d396c8322e8c61ad19a0004abe3aaf4f7901cd1e","modified":1598024585000},{"_id":"source/_posts/2018-10-22-common-linux-command.md","hash":"89940f608afe9ceb1f25cca381f5b5bad53d938d","modified":1598024585000},{"_id":"source/_posts/2018-10-20-Python-frozenset.md","hash":"e51b1f808fe3d1b3e906560a20c0748ded51e256","modified":1598024585000},{"_id":"source/_posts/2018-10-23-ifconfig-ip.md","hash":"42b6e8b3441276fd5f17310dc637bc658faa2113","modified":1598024585000},{"_id":"source/_posts/2018-10-24-go-progress.md","hash":"9c6c049f14a55338ac4c61bf5da5f0e10b2383de","modified":1598024585000},{"_id":"source/_posts/2018-10-25-deepin-capslock-control.md","hash":"ec6e73f8a135dfeb839d013122be8ef33ca24838","modified":1598024585000},{"_id":"source/_posts/2018-10-26-git-store-password.md","hash":"b09240c8b66e2da8649b7e4c888adf12051fdf17","modified":1598024585000},{"_id":"source/_posts/2018-10-27-expect-args.md","hash":"4d7889c4c8bf9b6045b670ff7f3323fa2b32d8d0","modified":1598024585000},{"_id":"source/_posts/2018-10-29-go-fresh.md","hash":"74d4f0bd343d27131f62e4849a9317370b828b91","modified":1598024585000},{"_id":"source/_posts/2018-10-21-http-status-code.md","hash":"1441977c9eec57b2cbcb46115b3444efbf607bc8","modified":1598024585000},{"_id":"source/_posts/2018-10-28-shell-read.md","hash":"ab18326b3325da111b29273b397c2b68ec6260db","modified":1598024585000},{"_id":"source/_posts/2018-11-02-go-error-to-string.md","hash":"6545bf1a81b121c0de4c7f521cd535318df7716c","modified":1598024585000},{"_id":"source/_posts/2018-11-07-go-rune-string.md","hash":"4c87ecd40ddc41d885adc27cecdf0fb988b3577f","modified":1598024585000},{"_id":"source/_posts/2018-11-13-marvel-disaster-day.md","hash":"f05b4e3aec2e74af05f5103c9d67dce606931784","modified":1598024585000},{"_id":"source/_posts/2018-11-09-go-since.md","hash":"df5d6d71f17d917e99a2904fbf533b14aeeb5a89","modified":1598024585000},{"_id":"source/_posts/2018-11-15-cdn-test.md","hash":"5b88b02ec772f298988a6e857209cc2cc041c2ee","modified":1598024585000},{"_id":"source/_posts/2018-11-19-go-json-fmt-print.md","hash":"4b4dd7ed9ca1a2cffdb7e05381f62cae5084712f","modified":1598024585000},{"_id":"source/_posts/2018-11-20-go-in-array.md","hash":"7a94df61e14b19a6b261c7453f8ae76589594fc4","modified":1598024585000},{"_id":"source/_posts/2018-11-27-linux-install-ffmpeg.md","hash":"6b919f1249efb07026395cc440928a267072bb0a","modified":1598024585000},{"_id":"source/_posts/2018-11-28-node-rune-command.md","hash":"38f13ff106cbb098d00992b1d2d5fc370ae0b00f","modified":1598024585000},{"_id":"source/_posts/2018-12-06-baby-first-baba.md","hash":"b7973da04b7f143be9f345e3467fcba8a1da967c","modified":1598024585000},{"_id":"source/_posts/2018-12-10-supervisord-start-error.md","hash":"008a8c0fa68ad9bd99ed3e77b1488e8d72782512","modified":1598024585000},{"_id":"source/_posts/2018-12-11-mac-KeyCastr.md","hash":"0c504c1788966f012b7ceef72523d7d68fda3b2a","modified":1598024585000},{"_id":"source/_posts/2018-12-12-hexo-add-rss.md","hash":"5586a6d34c444b7ce4955b1ac46ba518c2a65956","modified":1598024585000},{"_id":"source/_posts/2018-12-13-redis-cli.md","hash":"af3f042f178f0253886f35eb26842c0253443af8","modified":1598024585000},{"_id":"source/_posts/2018-12-17-waner.md","hash":"7d6223044eefc16c35ddb84b5e1955c23a6a060f","modified":1598024585000},{"_id":"source/_posts/2018-12-20-python-error-loca-variable.md","hash":"4d3d7116298b9645bc00b8d6343173932b0901c8","modified":1598024585000},{"_id":"source/_posts/2018-12-18-dig-simple.md","hash":"0172d490f124f6222cdd84fdc19ecdab0a97578b","modified":1598024585000},{"_id":"source/_posts/2018-12-24-java-11-new-string.md","hash":"da35226c315c77973af7169b9263dda782f02ce8","modified":1598024585000},{"_id":"source/_posts/2018-12-25-java-11-new1.md","hash":"ad661b1b91c5c3e3446a758483fe5c665ac3e7e7","modified":1598024585000},{"_id":"source/_posts/2018-12-26-ubuntu-install-jdk11.md","hash":"08aaa9880cea56252ce756130ef2036f99b6f51d","modified":1598024585000},{"_id":"source/_posts/2018-12-27-centos7-install-java11.md","hash":"4325708c45cbde50c7140d075f1fa9b056a5943f","modified":1598024585000},{"_id":"source/_posts/2018-12-28-python-str-count.md","hash":"610e239accc5e970deb65d9e47cb8cf98a9bcaf0","modified":1598024585000},{"_id":"source/_posts/2018-12-30-java-renew-modification.md","hash":"c34fe63ed46e69cf411a8987a956bfe83bc5b6bb","modified":1598024585000},{"_id":"source/_posts/2018-12-29-java-renew-why.md","hash":"70ded98747f0dad6535911d7d3b6a42c8c6c9050","modified":1598024585000},{"_id":"source/_posts/2019-01-01-2019-begin.md","hash":"e94bdee749e7c893f8b9f20ff4795d4c0865fe8f","modified":1598024585000},{"_id":"source/_posts/2018-12-31-2018-end.md","hash":"b0e89fd11435ce73c33b665ffc297fe64c77a83e","modified":1598024585000},{"_id":"source/_posts/2019-01-03-java-renew-why-set-get.md","hash":"1af2e128af3f898c95e1ff3f5b5f61d98fddba7d","modified":1598024585000},{"_id":"source/_posts/2019-01-07-2019-books.md","hash":"0fffe9bc55cb5cafd605a39ed0fd351c5963e905","modified":1598024585000},{"_id":"source/_posts/2019-01-06-linux-ab.md","hash":"0e2c1d0e2a11d13b5fc5ea033c0187aa4fae1285","modified":1598024585000},{"_id":"source/_posts/2019-01-08-java-jar-class-list.md","hash":"b141e66a6cb64c0b7f9b810e3cc28d88eec8fbec","modified":1598024585000},{"_id":"source/_posts/2019-01-09-java-renew-parse-xml.md","hash":"f21af11457a5f0b78627eaffc95f5bc396e8bdff","modified":1598024585000},{"_id":"source/_posts/2019-01-10-java-renew-maven-start.md","hash":"e2ca951107e5e4ac29c019791260ad36c86af72f","modified":1598024585000},{"_id":"source/_posts/2019-01-11-java-renew-maven-where-jar.md","hash":"7ed46691af1bf6f7bd6cf005ae250e0319abebb8","modified":1598024585000},{"_id":"source/_posts/2019-01-14-ab-lh-error.md","hash":"baec97621e487cfacea6f40ab5c2bf65358e79da","modified":1598024585000},{"_id":"source/_posts/2019-01-15-go-nfnt-resize.md","hash":"498cbf954abc8305e4816408e2a235ba43d18dde","modified":1598024585000},{"_id":"source/_posts/2019-01-18-create-react-app.md","hash":"091fad1c860f027b4391b383ca767c2f5c458341","modified":1598024585000},{"_id":"source/_posts/2019-01-22-centos7-install-pyaudio-error.md","hash":"311bbbfc815e237ed2722387ce8e5b8cdb69fffb","modified":1598024585000},{"_id":"source/_posts/2019-01-19-hexo-render-toc-error.md","hash":"4b2a01190934fe9f179fc83fe3c3c7d6db8f61ba","modified":1598024585000},{"_id":"source/_posts/2019-01-23-docker-compose-up-error.md","hash":"c984fc5f7859ea1e1eed3a5714b402d0701936c8","modified":1598024585000},{"_id":"source/_posts/2019-01-26-mysql-json-functions.md","hash":"6bd414f452ae45a5bf9d05a0ed310bb7aaf20b9c","modified":1598024585000},{"_id":"source/_posts/2019-02-02-python-mysql-hash-split-table.md","hash":"fcc91e6e790ccef0dc045b377cf23961bed8cd59","modified":1598024585000},{"_id":"source/_posts/2019-02-01-linux-wc.md","hash":"a26ae3f428dbebd735a147e976320defcd84371f","modified":1598024585000},{"_id":"source/_posts/2019-02-03-go-gopath.md","hash":"31550bad077971a2acf98defb32c7d40f6fb399f","modified":1598024585000},{"_id":"source/_posts/2019-02-04-vim-show-message.md","hash":"a3a87ebda8cf1820ce79f66d6a02df6415c883c9","modified":1598024585000},{"_id":"source/_posts/2019-02-05-vagrant-commands.md","hash":"069ef496f828608293ca3caefc4403bcd82b85a7","modified":1598024585000},{"_id":"source/_posts/2019-02-07-linux-install-ssr.md","hash":"a71a825a17ab8d24f5e8689b81bffbf7ada1f82f","modified":1598024585000},{"_id":"source/_posts/2019-02-17-go-os-user.md","hash":"418f809d624c95fc79c4176b781af9d148775b77","modified":1598024585000},{"_id":"source/_posts/2019-02-19-go-interface.md","hash":"4a145dc2be50b04692f30f7c5c6b814e600b9d4c","modified":1598024585000},{"_id":"source/_posts/2019-02-18-python-signletion.md","hash":"9a758120f04c8b809ea852bc1b2af09b66c1f1a0","modified":1598024585000},{"_id":"source/_posts/2019-02-21-vimscript-file-exists.md","hash":"a6f1fa78f2c349be1e664ddc19d1da4a873fc9f7","modified":1598024585000},{"_id":"source/_posts/2019-02-20-time-complexity.md","hash":"8da8f072905dbfdc05e6be9d3a3bab6683f354c0","modified":1598024585000},{"_id":"source/_posts/2019-02-24-mysql-insert-on-duplicate-key-update.md","hash":"c7e9ff8766b356be0b9e06372a3a69433e1ce4c4","modified":1598024585000},{"_id":"source/_posts/2019-02-26-vim8-pack.md","hash":"132980ba70ce7e6cac2b10e02f771440175e949e","modified":1598024585000},{"_id":"source/_posts/2019-02-28-asymmetric-encryption.md","hash":"696e773beb75d3df8d1e2e2dc77fd06d4088df76","modified":1598024585000},{"_id":"source/_posts/2019-02-27-linux-caseignore.md","hash":"38a207e7915a6836776157a7fa1df6650dd114a0","modified":1598024585000},{"_id":"source/_posts/2019-03-04-go-open-brower.md","hash":"55bbe5b9c36e87bd318400312e4e1a90d8a4566b","modified":1598024585000},{"_id":"source/_posts/2019-03-01-go-iris-simple.md","hash":"61f5c7513a08ccc2ec5e80634b1c71bc2591ae52","modified":1598024585000},{"_id":"source/_posts/2019-03-12-python-list-diff-inter.md","hash":"21e4838e09875702a717a6152dc013c1baa96fb2","modified":1598024585000},{"_id":"source/_posts/2019-03-11-adb.md","hash":"f97b48b420975d1506da1c0946d8605452459077","modified":1598024585000},{"_id":"source/_posts/2019-03-16-shell-calculation.md","hash":"220e21033d1366720169c9449ac48e4f2019fa68","modified":1598024585000},{"_id":"source/_posts/2019-03-15-vim-error-caught-deadly-signal-segv.md","hash":"7262bdf4ddbeb2c70bbce8e82e6dc109f2daffdc","modified":1598024585000},{"_id":"source/_posts/2019-03-25-adb-connect-yeshen.md","hash":"e601193b0906f954fd2bb09e0e9e770c206712de","modified":1598024585000},{"_id":"source/_posts/2019-03-17-python-redis-watch.md","hash":"e15ba9e3ded10fa953eb3ab4d1f1e4029a5c736b","modified":1598024585000},{"_id":"source/_posts/2019-03-26-python-timeit.md","hash":"d9cfda3e41510c4cb25b2a0614de9caf891ada77","modified":1598024585000},{"_id":"source/_posts/2019-03-27-python-doc-zh.md","hash":"cfc3a9b0d2030ecc0075539d7854a21d521be279","modified":1598024585000},{"_id":"source/_posts/2019-03-28-gevent.md","hash":"5c68fd93e841bef4afc780b38f092956420e9076","modified":1598024585000},{"_id":"source/_posts/2019-03-29-ossfs.md","hash":"93f6535c021febb11631274c9480d49d84856db7","modified":1598024585000},{"_id":"source/_posts/2019-04-02-bpython.md","hash":"b076109bd8d5e79c18ccfc69cc292aa800c35fe8","modified":1598024585000},{"_id":"source/_posts/2019-04-03-mac-fonts-path.md","hash":"e69a5e520494975db981e685fa3077ebd3bcbec0","modified":1598024585000},{"_id":"source/_posts/2019-03-30-sqlalchemy-error-order-by.md","hash":"09b6aa68df411af0ed6521ffa92591345543e01e","modified":1598024585000},{"_id":"source/_posts/2019-04-04-zsh-speed-optimization.md","hash":"7ed4d3d550f532aca7d72be133ee9d8298c78312","modified":1598024585000},{"_id":"source/_posts/2019-03-31-pyenv-zlib-not-available.md","hash":"56b520ea2ee81ec8335786b1059ffe2a8eb81b3a","modified":1598024585000},{"_id":"source/_posts/2019-04-01-python-loop-speed-comparison.md","hash":"7f0f138362b9d388ab84b35825f6c6cf9c86f21f","modified":1598024585000},{"_id":"source/_posts/2019-04-05-expect-variables.md","hash":"d34f4a5736d32a1c6355f38b0fa149227848abfc","modified":1598024585000},{"_id":"source/_posts/2019-04-06-python-clipboard.md","hash":"a50a3babdef318b87dd7f951b69ad8e5f86a3eb1","modified":1598024585000},{"_id":"source/_posts/2019-04-07-python-copy-command.md","hash":"7ec6df6dab79d153b1d379e251ffbbd62c316f63","modified":1598024585000},{"_id":"source/_posts/2019-04-08-ffmpeg-drawtext.md","hash":"5fb89fc643b5be8cc1e5c5feaab781ae5531ee87","modified":1598024585000},{"_id":"source/_posts/2019-04-09-python-create-file.md","hash":"c6fe14e583c9b77de0d878dcad2d2145d4ab29f6","modified":1598024585000},{"_id":"source/_posts/2019-04-12-python-single-line-progress.md","hash":"b8b7290f501fcf0de83bdd91e74de8104c28cdab","modified":1598024585000},{"_id":"source/_posts/2019-04-11-python-configparser.md","hash":"106bda7abfd0cd2eac644006e2fc5c5db44db9c4","modified":1598024585000},{"_id":"source/_posts/2019-04-13-linux-tar.md","hash":"b123fcd97def2271495725c46817ae2e54a076c5","modified":1598024585000},{"_id":"source/_posts/2019-04-14-goss.md","hash":"554a3a514f6bb96008fd43753f55f74901fce6de","modified":1598024585000},{"_id":"source/_posts/2019-04-15-vim-run-shell.md","hash":"68f1e9eb8a01b1b58b627667700eca696bb5e061","modified":1598024585000},{"_id":"source/_posts/2019-04-16-ffmpeg-split-video-audio.md","hash":"046ee1b0a61572e9387304864fd39ead3f38d18c","modified":1598024585000},{"_id":"source/_posts/2019-04-17-python-locals.md","hash":"3b3fd7b68487449afdeff4489cf2314ac2edb0d0","modified":1598024585000},{"_id":"source/_posts/2019-04-18-vim-in-shell.md","hash":"865f9a7d51e6083df3649d3788731d6c7487e72b","modified":1598024585000},{"_id":"source/_posts/2019-04-24-python-print-color.md","hash":"257f0ffeff4ec089be97ae056aea818ee199bbb9","modified":1598024585000},{"_id":"source/_posts/2019-04-23-redis-error-wrong-kind.md","hash":"a81f3ad0717aaf8c66a3f1f86ddd98fd044abcb3","modified":1598024585000},{"_id":"source/_posts/2019-04-25-sqlalchemy-isolation-level.md","hash":"b6616acdaa6e620f3366d1cb0c834becb75dd0e9","modified":1598024585000},{"_id":"source/_posts/2019-04-28-python-isupper.md","hash":"8f9c31104ee313555ec2e6ec28414a7bdbda41b9","modified":1598024585000},{"_id":"source/_posts/2019-04-26-awk-regex-use-var.md","hash":"95e467986ac72155948b0bfb25bae332916c6306","modified":1598024585000},{"_id":"source/_posts/2019-05-13-python-get-image-from-clipboard-on-mac.md","hash":"04aaf46551acf9e3258cdb32fb4d8d67db73a4ad","modified":1598024585000},{"_id":"source/_posts/2019-05-17-vim-open-terminal.md","hash":"fb779f2015c4bca6b6d0fa57b77de8c114b00e24","modified":1598024585000},{"_id":"source/_posts/2019-05-19-install-pycurl-error.md","hash":"ac476ce4c3fc4128748435d77871bd67a7a406f4","modified":1598024585000},{"_id":"source/_posts/2019-04-29-linux-time.md","hash":"787dc35f566b93948062113ca83002a78fca9b9a","modified":1598024585000},{"_id":"source/_posts/2019-05-20-pyspider-install-error-with-3-7.md","hash":"b9a916d9de3b787fbd9f79bdad0b229570cebe23","modified":1598024585000},{"_id":"source/_posts/2019-05-05-python-memory-profiler.md","hash":"e67eea077f15b3fd903251117ee6fe4414ca8841","modified":1598024585000},{"_id":"source/_posts/2019-05-25-js-href.md","hash":"72518f118abd1ca6961190d9729350fb8104b464","modified":1598024585000},{"_id":"source/_posts/2019-05-27-python-list-time-complexity.md","hash":"4b679e12d52267155fc3100227a7870d56a7135d","modified":1598024585000},{"_id":"source/_posts/2019-05-28-what-is-xor.md","hash":"26fa063fdcaf3a7b12d87023ad8cbff212381cc9","modified":1598024585000},{"_id":"source/_posts/2019-05-21-git-blame.md","hash":"8cb2bb4d1cddce4cf9cdd895d9f62babb6ba751e","modified":1598024585000},{"_id":"source/_posts/2019-05-29-java-array.md","hash":"53dbcfc30f94b191b1ccec685f08d64834f90842","modified":1598024585000},{"_id":"source/_posts/2019-06-04-lovely-404.md","hash":"567daec75da8f19867dfc002aae85cf75885cea1","modified":1598024585000},{"_id":"source/_posts/2019-06-03-mkdocs.md","hash":"80ae28c77c60b546294c75622225457d45ada75e","modified":1598024585000},{"_id":"source/_posts/2019-06-06-curl-return-code.md","hash":"5214f3f7887b9d7c59951d2a4f3c55aff4d9eed3","modified":1598024585000},{"_id":"source/_posts/2019-06-07-python-bisect.md","hash":"1d7ca2c3e67205ac3523b1df7a2d6b708af1acb6","modified":1598024585000},{"_id":"source/_posts/2019-06-12-python-collections-namedtuple.md","hash":"00a8d4cb8315670fa05ec755332cc544a2baaf15","modified":1598024585000},{"_id":"source/_posts/2019-06-08-linux-show-file.md","hash":"a699fcd1cb3814cc9bf0e16608cc4c54181bed12","modified":1598024585000},{"_id":"source/_posts/2019-06-18-date-want-time.md","hash":"c233304b51bc1ccf9c1e1acdcd8f636e958de786","modified":1598024585000},{"_id":"source/_posts/2019-06-16-python-memory-management.md","hash":"ae04e519a9f388e705aa516be88b3a9a7cd2084e","modified":1598024585000},{"_id":"source/_posts/2019-07-08-python-argparse.md","hash":"9d16787e2d15aeafe7977e23fff4c7c125f88010","modified":1598024585000},{"_id":"source/_posts/2019-06-25-linux-split.md","hash":"860be0f90f539da5728ac99420b22b39a8a6b3f9","modified":1598024585000},{"_id":"source/_posts/2019-07-10-python-memory-mul.md","hash":"2c2417c8e00929647f18eb0d23cc8eeb03321393","modified":1598024585000},{"_id":"source/_posts/2019-07-11-apt-install-error.md","hash":"4aac9f8dbd4f4dc2660ed41161b0f03b19e49c2a","modified":1598024585000},{"_id":"source/_posts/2019-07-12-centos7-install-redis.md","hash":"8d207800c8486c1ac0ee5fb0e8117484041dc99a","modified":1598024585000},{"_id":"source/_posts/2019-07-13-python-json-encoder-decoder.md","hash":"7474b5a51f93d4e356d2aa6d0f7fc6b361330f73","modified":1598024585000},{"_id":"source/_posts/2019-07-16-nginx-no-resolver-defined-to-resolve.md","hash":"e24a4083c67d2d38c68db60b3af4b9bce4bfcd3f","modified":1598024585000},{"_id":"source/_posts/2019-07-17-requests-auth.md","hash":"2ec2b00d01833bcc900649d8160cfcf6943755fc","modified":1598024585000},{"_id":"source/_posts/2019-07-18-vagrant-root-login.md","hash":"30080a14718340bca914b91c31c993096ceb29e2","modified":1598024585000},{"_id":"source/_posts/2019-07-22-docker-before-from-use-args.md","hash":"84fa0238ee8a43238d31c0ad96e442d1972f9361","modified":1598024585000},{"_id":"source/_posts/2019-07-26-docker-change-store-dir.md","hash":"83aa76361e81f551296bc9b3d26d57038a59a801","modified":1598024585000},{"_id":"source/_posts/2019-07-30-python-f-string-error1.md","hash":"7635b4f09629fa37bbbd3263dcb19144d7061ba3","modified":1598024585000},{"_id":"source/_posts/2019-07-31-ansible-vagrant-host.md","hash":"353670bbb3370c1eed7dd8013f1e1bd3f103d3dc","modified":1598024585000},{"_id":"source/_posts/2019-07-27-docker-container-cmd.md","hash":"4d994cde7ca6c0f72c1760c1fbd6ca199057b001","modified":1598024585000},{"_id":"source/_posts/2019-08-12-docker-use-china-mirrors.md","hash":"7fea1914d5bdab6f7fdaa36ffd9ab888b1060db3","modified":1598024585000},{"_id":"source/_posts/2019-08-15-pillow-overlay.md","hash":"b39b423cf93d34d06144c4f2351a4f8f7f4d13e3","modified":1598024585000},{"_id":"source/_posts/2019-08-01-mysql-slow-query-log.md","hash":"8d3dc7ee1480ddd5cafa0526409d0e73cac962b7","modified":1598024585000},{"_id":"source/_posts/2019-08-22-docker-logs.md","hash":"338771046644c1bcf92c44f72de7c1b3eac1a849","modified":1598024585000},{"_id":"source/_posts/2019-08-20-python-current-module.md","hash":"939bc8c79b4ec52906f3c2e6b532da7b59ea5d9f","modified":1598024585000},{"_id":"source/_posts/2019-08-21-pm2-env.md","hash":"9575e38a871d3405062c1fb9228cc977df44eb5a","modified":1598024585000},{"_id":"source/_posts/2019-08-29-python-pillow-text-watermark.md","hash":"bab0bce2eef08eedb64d8c1b855eb84672805ba7","modified":1598024585000},{"_id":"source/_posts/2019-08-31-python-sort-multi-field.md","hash":"229aaa846ec29197fb86b99ff91bb62b065c2452","modified":1598024585000},{"_id":"source/_posts/2019-09-01-chrome-open-multi-download.md","hash":"8fd6073442647caaee5ee18528eea633a24344c2","modified":1598024585000},{"_id":"source/_posts/2019-09-09-vm-error-unfound-file.md","hash":"fe0b6266c93a0d43e2048c7d48f8a6cbee6a72f1","modified":1598024585000},{"_id":"source/_posts/2019-09-08-weixin-two-reply.md","hash":"712494fa4ea37875a9061138ecd82a699332d44d","modified":1598024585000},{"_id":"source/_posts/2019-09-15-use-youtube-dl.md","hash":"49887505fad261bbce14d22ed2ea1643ab38d349","modified":1598024585000},{"_id":"source/_posts/2019-09-18-wx-upload-media.md","hash":"c1f4d2722e1397192b2d0fdb680c0828034f69f4","modified":1598024585000},{"_id":"source/_posts/2019-09-19-youtube-block-region.md","hash":"0d1fdbd29b9d0571752378d70f7875b464b45813","modified":1598024585000},{"_id":"source/_posts/2019-09-22-world-currency.md","hash":"95cb6cbb8f2d4f5f7f54f55e01f5a59ae649c5a7","modified":1598024585000},{"_id":"source/_posts/2019-10-17-nginx-the-ssl-depreated.md","hash":"7c968031061abf7f41fe35f3c069e9c01dc4b67a","modified":1598024585000},{"_id":"source/_posts/2019-10-28-mac-vmware-error-broken-pipe.md","hash":"681221a032349d0ebac28dcb1081716f8d8b2d47","modified":1598024585000},{"_id":"source/_posts/2019-11-12-js-padstart.md","hash":"bce1dfce062e03a156afbcaa525a6186503d452b","modified":1598024585000},{"_id":"source/_posts/2019-11-19-nginx-loss-headers.md","hash":"63a986d4d3d62b00964720b1320890177f86dcc7","modified":1598024585000},{"_id":"source/_posts/2019-12-05-mysql-rand.md","hash":"4be6f3bb8c50988bd936a7e27c024f1b55056ddb","modified":1598024585000},{"_id":"source/_posts/2019-12-09-ffmpeg-shell.md","hash":"a60a4f647193d8c5c85b0da4f820711c5ba66dcc","modified":1598024585000},{"_id":"source/_posts/2020-01-07-shell-string-length.md","hash":"9a78a729edfa949a0c48d3929a47fc576ed708f1","modified":1598024585000},{"_id":"source/_posts/2020-01-08-mysql-group-last-row.md","hash":"50cc4806ceba7c8cbf4ac8ade84d19e367842146","modified":1598024585000},{"_id":"source/_posts/2020-01-09-shell-file-size.md","hash":"9a217816f110c53525969b33d7041df07f955a1e","modified":1598024585000},{"_id":"source/_posts/2020-01-13-shell-substr.md","hash":"185452ff7139b7f490b01f2462d48fa8f21d1c46","modified":1598024585000},{"_id":"source/_posts/2019-12-26-docker-log-too-big.md","hash":"41e072b2093880a27e4d656836b46dbd58e67011","modified":1598024585000},{"_id":"source/_posts/2020-02-15-mac-finder-get-pwd.md","hash":"3548896fc7f6460bffaf6f03ad71bbb667e7b143","modified":1598024585000},{"_id":"source/_posts/2020-03-06-node-pipe-input.md","hash":"9e8a413850d30b599126d39d3f1319a0e2a3f853","modified":1598024585000},{"_id":"source/_posts/2020-03-07-node-read-write-file.md","hash":"5a6fa5f489fc946f1be46d550ada198b73af23aa","modified":1598024585000},{"_id":"source/_posts/2020-03-08-shell-loop.md","hash":"3f2efb7aa13e9f11d8992fe4bec5769ae8fce375","modified":1598024585000},{"_id":"source/_posts/2020-04-11-python-os.md","hash":"39d78bb1442a041b82ea407321f61202c5e94bdc","modified":1598024585000},{"_id":"source/_posts/2020-04-01-linux-login-name.md","hash":"b35ee630e6ee3b693197f71df6aa9da4b3555fc8","modified":1598024585000},{"_id":"source/_posts/2020-05-01-python-print-dict-double-quotation-marks.md","hash":"7ae7f5b06b073b978646f8204ea07ba39328ff28","modified":1598024585000},{"_id":"source/_posts/2020-05-02-mysql-select-and-insert.md","hash":"f83f77c4f18622a65f3b4c3fd721f32e317514d3","modified":1598024585000},{"_id":"source/_posts/2020-05-19-flask-reload.md","hash":"957ff77ec2673e6a4e43aba839e58709dde51775","modified":1598024585000},{"_id":"source/_posts/2020-05-16-python-urllib3.md","hash":"2961f42029007e6fc9d281d810e6aa959ed2c11c","modified":1598024585000},{"_id":"source/_posts/2020-06-02-shell-loop-lines.md","hash":"4c496651fa1cb83268799c4e6c482fe092525bc8","modified":1598024585000},{"_id":"source/_posts/2020-06-03-mac-show-hide-file.md","hash":"beb534c87fce81b0c735f801a6eb635d1f02fc95","modified":1598024585000},{"_id":"source/_posts/2020-06-04-ansible-debug.md","hash":"735188013a1fec18a1d8de3a3f18044ffd900b99","modified":1598024585000},{"_id":"source/_posts/2020-06-13-hexo-use-jupyter-notebook.md","hash":"f1cf45a48ec06f92b395141d0ecd4aa405927d07","modified":1598024585000},{"_id":"source/_posts/2020-06-09-python-faker.md","hash":"b56cfb792a0b287a15684f72e5d2a761a436c538","modified":1598024585000},{"_id":"source/_posts/2020-06-19-win7-install-need-cd-dvd.md","hash":"d7e7f3caab9da3fde0ba025fe7ad0bcb41bffcba","modified":1598024585000},{"_id":"source/_posts/2020-07-18-excel-ctrld.md","hash":"728e3ffdd9a7c842d202e5b1256d4ed2d1c3b39f","modified":1598024585000},{"_id":"source/_posts/2020-07-19-sqlalchemy-selectable.md","hash":"dcd185dcd1a46a159449e58431b72e12e8a5f7a0","modified":1598024585000},{"_id":"source/_posts/2020-07-20-javascript-random.md","hash":"1bb5662cf96ff769877cf972c14b295b6913b28c","modified":1598024585000},{"_id":"source/_posts/2020-07-23-wx-platform-error.md","hash":"bcfd13fe1df3b6bcad28f7aeb0931f1bec89cd37","modified":1598024585000},{"_id":"source/_posts/2020-07-24-docker-the-latest.md","hash":"38faa25176b7fdce89d6b48eba219ba7f55324b3","modified":1598024585000},{"_id":"source/_posts/2020-07-30-mysql-concat.md","hash":"20f2d628ccf81c8d3cf48e3a0e0a9236c66e2792","modified":1598024585000},{"_id":"source/_posts/2020-08-01-python-get-week-of-month.md","hash":"8a3564372c9d23d3dddc3b92560aaf372d0d2408","modified":1598024585000},{"_id":"source/_posts/2020-08-06-excel-group-by.md","hash":"37c5ddeb4e252af8d4f3f09ffe78ecd6fe3339d7","modified":1598024585000},{"_id":"source/_posts/algorithm-2017-08-05-bank_verify.md","hash":"a13e7bd84be74a56c286bee509414c786ffd4437","modified":1598024585000},{"_id":"source/_posts/algorithm-2017-08-05-identity_verify.md","hash":"a93adc1598fac1492bac8aa2b71b443fb4aba908","modified":1598024585000},{"_id":"source/_posts/ansible-2017-08-08-item-basic_get_started.md","hash":"98a3f0eda604d6e364b2f8ea718b3900ed9009ad","modified":1598024585000},{"_id":"source/_posts/ansible-2017-08-08-item-basic_playbooks.md","hash":"d21d199fdcdc455fd18375e0dfda3caaa02605b0","modified":1598024585000},{"_id":"source/_posts/ansible-2017-08-08-item-basic_playbooks_ext.md","hash":"cf41bf647b8d700f89b88cd48a690aaf76883828","modified":1598024585000},{"_id":"source/_posts/ansible-2017-08-14-album-study-notes.md","hash":"0d614581cb9e9b00ee9bb14c6476ee2f47ccad96","modified":1598024585000},{"_id":"source/_posts/develop-2017-09-08-regex-basic.md","hash":"eea22fffba75d0fe58f5f7426255979ba0ade343","modified":1598024585000},{"_id":"source/_posts/git-2017-08-04-basic-cmd.md","hash":"1c20434aef8efba93447d9ac93241441aa263631","modified":1598024585000},{"_id":"source/_posts/http-2017-08-16-basic.md","hash":"f66daa1d1ed2823ae3b3f08f1f104396f74ffdc0","modified":1598024585000},{"_id":"source/_posts/js-2017-08-05-screen_wh.md","hash":"556df4013401ac016523a1cc45ed18670020e208","modified":1598024585000},{"_id":"source/_posts/life-2017-09-06-beijing.md","hash":"17687eac9fa4a275a2a8d790f0e481c898d69ccc","modified":1598024585000},{"_id":"source/_posts/linux-2017-08-15-nohup.md","hash":"c7098cebb60a15e1fec3620a99322615b1fee0d2","modified":1598024585000},{"_id":"source/_posts/life-2017-09-06-fixed-point-hospital.md","hash":"a92db69edf6e4b5ba0cbe1d21d4ea7d73852d246","modified":1598024585000},{"_id":"source/_posts/linux-2017-08-16-curl.md","hash":"ee8a1e18fd42ac88bc72a7bcba17dbd9d7f4eafb","modified":1598024585000},{"_id":"source/_posts/linux-2017-08-22-centos-start-stop-restart-sshd.md","hash":"7217ac2f551d3ac6925ee934c4cf162d3c813e61","modified":1598024585000},{"_id":"source/_posts/linux-2017-08-22-sftp-scp.md","hash":"de6c69dc8b53b1de2901614c656f5419a8daf907","modified":1598024585000},{"_id":"source/_posts/linux-2017-08-23-ssh.md","hash":"3794470ef567ee2b96125bbe5c727247c2cb6fb9","modified":1598024585000},{"_id":"source/_posts/linux-2017-08-28-ln.md","hash":"475806170bf1e63945ed9c8794fc9f2f2924abd5","modified":1598024585000},{"_id":"source/_posts/linux-2017-09-11-grep.md","hash":"b3acd21fff506884003178b153f770b862e34fb1","modified":1598024585000},{"_id":"source/_posts/linux-2017-09-11-redirection.md","hash":"2e085d384e85f586732d5b870103adb6ea273439","modified":1598024585000},{"_id":"source/_posts/linux-2017-09-15-expect.md","hash":"f304fba3b94eb58caefbe581d629b6b143145d59","modified":1598024585000},{"_id":"source/_posts/mac-2017-08-10-clear-dns.md","hash":"0ee0b4aba4ff064b7dd572ff8fb7a8d3bbf2a06d","modified":1598024585000},{"_id":"source/_posts/mac-2017-08-23-develop-hotapps.md","hash":"35e1e4702ed632bb4baee281b5d9269c90c36279","modified":1598024585000},{"_id":"source/_posts/mac-2017-09-07-homebrew.md","hash":"ab4ba91f84fe2e003402cb3e4f66f2a84212e3a5","modified":1598024585000},{"_id":"source/_posts/movie-2017-08-13-MCU.md","hash":"ef6177e56fb2d3e856e7f3dbe92f709a17edbcf7","modified":1598024585000},{"_id":"source/_posts/mysql-2017-08-06-basic_cmd.md","hash":"748a9abb397cfb6eaf1fc6fea8c69937aab545f8","modified":1598024585000},{"_id":"source/_posts/mysql-2017-08-06-item-daily.md","hash":"0aeacc8b5187317b283fbee211f1a9ed6ec021b4","modified":1598024585000},{"_id":"source/_posts/mysql-2017-08-07-item-daily.md","hash":"3dbe18f2791c19d3fc1a22671eb163e92cff7a70","modified":1598024585000},{"_id":"source/_posts/mysql-2017-08-08-item-daily.md","hash":"e52fc5d026a56d840e89c215a89b62506c626d53","modified":1598024585000},{"_id":"source/_posts/mysql-2017-08-09-basic_index.md","hash":"60ed0e41df07f317de887859381509fa44ebfc40","modified":1598024585000},{"_id":"source/_posts/mysql-2017-08-09-prompt.md","hash":"88adc325e8683f3aa5448ac9a1453bfbd92cddee","modified":1598024585000},{"_id":"source/_posts/mysql-2017-08-09-item-daily.md","hash":"4d3eb8f99cc28ec0a2458b3141e4c7ebd73b7796","modified":1598024585000},{"_id":"source/_posts/mysql-2017-08-10-item-daily.md","hash":"e50a5c60578d22c87863b3de2f6e33dd60b287b3","modified":1598024585000},{"_id":"source/_posts/mysql-2017-08-09-select-format.md","hash":"dd3e1d5873f43dec0725ca3f0cf6ac2ed013473a","modified":1598024585000},{"_id":"source/_posts/mysql-2017-08-09-skill.md","hash":"61050553361256ff608b657b9191c8bcdc0e0a07","modified":1598024585000},{"_id":"source/_posts/mysql-2017-08-11-item-daily.md","hash":"9e57a6d5cd32a32c661b3d85ad861ab4da64a08e","modified":1598024585000},{"_id":"source/_posts/mysql-2017-08-12-item-daily.md","hash":"18406ea83d015dd680c678dd0ac4cb84f4995d77","modified":1598024585000},{"_id":"source/_posts/mysql-2017-09-15-tmp-mysql-sock.md","hash":"4f130bee4d54cc149cbd95a67aae9495492e5e90","modified":1598024585000},{"_id":"source/_posts/openresty-2017-08-16-install.md","hash":"b9ed0d1e87a654f0fbd41d5ce8590b6b5f60c408","modified":1598024585000},{"_id":"source/_posts/nodejs-2017-09-12-npm.md","hash":"dcac5038b6d8aaf1eff2d194dfbc3e0998be2584","modified":1598024585000},{"_id":"source/_posts/python-2017-08-10-pyenv-cmd.md","hash":"43b5e630372cf98555bc292735c03be97d89b93d","modified":1598024585000},{"_id":"source/_posts/python-2017-08-10-pyenv-linux.md","hash":"e54b7df4b3b055e0cd3dae98d1d4c0b656a2d363","modified":1598024585000},{"_id":"source/_posts/python-2017-08-11-os_file.md","hash":"da28a23c3e06d313f66bcd213674e9fe384cfec3","modified":1598024585000},{"_id":"source/_posts/python-2017-08-14-sqlalchemy-filter.md","hash":"7904c559a87795d9d8061d3dc4ffe59cde2c3ae6","modified":1598024585000},{"_id":"source/_posts/python-2017-08-15-flask-env-config.md","hash":"44dd9b65d588ec7b6b6cb6eafa5760793186be46","modified":1598024585000},{"_id":"source/_posts/python-2017-08-15-config-pythonpath.md","hash":"a0e051b9d069c4c55177432d7e9f20b345e339b3","modified":1598024585000},{"_id":"source/_posts/python-2017-08-15-flask-hello-world.md","hash":"83ee5d0e87e53576029f50c32c2f6fd319030641","modified":1598024585000},{"_id":"source/_posts/python-2017-08-15-gunicorn-run.md","hash":"8504a2ad55228ec1fd910bbefb088fb78200e4e7","modified":1598024585000},{"_id":"source/_posts/python-2017-08-18-pip_not_found.md","hash":"4c8b074ce2dfee563aa45c97d2f5c82974297dfb","modified":1598024585000},{"_id":"source/_posts/python-2017-08-18-basic-supervisor.md","hash":"8903fbe40b9f8ca59b16602a94707827d7912942","modified":1598024585000},{"_id":"source/_posts/python-2017-08-22-get-image-size.md","hash":"345946ed920cb9d95f0f43bbfd70a07982db782e","modified":1598024585000},{"_id":"source/_posts/python-2017-08-23-scrapy-basic.md","hash":"ddef46839dc60e9ccc3a8f2a92104c69f1320329","modified":1598024585000},{"_id":"source/_posts/python-2017-08-19-pigar.md","hash":"df426fec9cc0b13ab36afd2aad7cea79b1cf16a4","modified":1598024585000},{"_id":"source/_posts/python-2017-09-05-wx-create-menu-err.md","hash":"08df9a43e0fca9315873112d40aaa1d33cfdc346","modified":1598024585000},{"_id":"source/_posts/python-2017-09-07-flask-api.md","hash":"aff17641ff42f31c02d2ed9d6773b288d9b8b184","modified":1598024585000},{"_id":"source/_posts/python-2017-09-06-use-markdown.md","hash":"7c7ae53ad86d61e3599c10b10d4b6fa374aedcc6","modified":1598024585000},{"_id":"source/_posts/shell-2017-09-02-basic.md","hash":"20bf774da3feed98ef3bb1a478b2d651fd04170a","modified":1598024585000},{"_id":"source/_posts/shell-2017-08-16-zsh-install.md","hash":"eb718132ac236915f47f8d2eca929da792762b69","modified":1598024585000},{"_id":"source/images/KeyCastr2.png","hash":"c9efacf3089e4b39deccd9abe76e0ae1d1fef8ab","modified":1598024585000},{"_id":"source/_posts/vim-2017-08-29-plug.md","hash":"fa2eaef377ba6cba622e8dec14785c9500c9a6fa","modified":1598024585000},{"_id":"source/images/KeyCastr4.gif","hash":"f6eb855e7f694d6d61b40bcaa37c5e95b212a9b0","modified":1598024585000},{"_id":"source/_posts/vim-2017-08-23-basic-cmd.md","hash":"97cabcb2de034b048fd3f3dc710a0d480030cd0b","modified":1598024585000},{"_id":"source/images/avator.jpg","hash":"d316a169a136286c4c1b8c09e5c19f74efaaa8b5","modified":1598024585000},{"_id":"source/images/chuxi2.jpeg","hash":"ce3c8241fa77b722a1ca24a7fe8c96f96168fb91","modified":1598024585000},{"_id":"source/images/closetag.gif","hash":"4032b0e78d4399975b411baf3e6de03f0b436e52","modified":1598024585000},{"_id":"source/images/gundo.gif","hash":"fcbd500a6c3f75dbb8c2b236126154695530a2f4","modified":1598024585000},{"_id":"source/images/jrejdk.png","hash":"03d237a1cc9314c1234c6f1a8f9b790718c616ee","modified":1598024585000},{"_id":"source/images/pm2-key.png","hash":"204c2d7bc97c1701b29ccafa34a2e6acd5ef1b77","modified":1598024585000},{"_id":"source/images/pygraphql1.png","hash":"9195f81b08b3e6e22dd834ecdbdd063f9b077803","modified":1598024585000},{"_id":"source/images/springhw2.png","hash":"8807cb1613c6348d62f7f924dedcaa5829269e3b","modified":1598024585000},{"_id":"source/images/surround.gif","hash":"3f5ed90ece8ba18086211b4af5750e803396ea5d","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/after-footer.ejs","hash":"b86b248720ad415ec1b5fee53fb583776c776f83","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/article.ejs","hash":"2f732783b1ea85691014150afb52a343e6e0819a","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/archive.ejs","hash":"a6e94061ac55b9eb55275f87b608d62f6ea35659","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/archive-post.ejs","hash":"1f7d4819b7f67602c4a1b99871808d2160b60978","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/baidu-analytics.ejs","hash":"f0e6e88f9f7eb08b8fe51449a8a3016273507924","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/footer.ejs","hash":"3b6b3a2ed6b56e833ecfad5cebba60685b6edb33","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/aside.ejs","hash":"8edbd7993b9b061611a193533a664e2e85eae748","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/css.ejs","hash":"b011d92be321ebe09fa2b3179c08aa435b9d051c","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/google-analytics.ejs","hash":"f921e7f9223d7c95165e0f835f353b2938e40c45","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/head.ejs","hash":"9cbdf204e11fd04990561c6bc450c89acd4788b1","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/header.ejs","hash":"6387a93dad7c3d778eb91e3821852fbf6813880c","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/left-col.ejs","hash":"408495c129ae5c4f88a83061c4a3ceaaafb280b3","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/mathjax.ejs","hash":"151a1ef2173ba7b6789d349f0f8da89616cc1394","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/mobile-nav.ejs","hash":"7fbbfabf5e29525b24ada14613c21a26789132b4","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/tools.ejs","hash":"c41341b9618e591538e1136a2d1637587c1bbd90","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/viewer.ejs","hash":"e495790b2abe2290875817e42bd505bc611d3e26","modified":1598024585000},{"_id":"themes/yilia/source/css/loader.css","hash":"f50e155e7679a2725643f75159051048dd91ed02","modified":1598024585000},{"_id":"themes/yilia/source/css/pricing.css","hash":"80fc193611e3e082148f4a1185ef0570d5f7a00d","modified":1598024585000},{"_id":"themes/yilia/source/compression-image/index.html","hash":"17c35ef6a0d57f06eca17f4e7257a8a7329394a1","modified":1598024585000},{"_id":"themes/yilia/source/css/signin.css","hash":"0b0fd79ba85cc7a817a3670165720cf4c8c39fcf","modified":1598024585000},{"_id":"themes/yilia/source/css/ts.css","hash":"1e9a356fbfc14c6da82d504a22dfd35d3eec3d0d","modified":1598024585000},{"_id":"themes/yilia/source/css/style.css","hash":"c0c94e0d90f518d2fb8a48c33a50f4ba9382ecb4","modified":1598024585000},{"_id":"themes/yilia/source/fonts/default-skin.b257fa.svg","hash":"2ac727c9e092331d35cce95af209ccfac6d4c7c7","modified":1598024585000},{"_id":"themes/yilia/source/fonts/iconfont.16acc2.ttf","hash":"f342ac8bf4d937f42a7d6a0032ad267ab47eb7f2","modified":1598024585000},{"_id":"themes/yilia/source/fonts/iconfont.8c627f.woff","hash":"aa9672cb097f7fd73ae5a03bcd3d9d726935bc0a","modified":1598024585000},{"_id":"themes/yilia/source/fonts/iconfont.b322fa.eot","hash":"bc8c5e88f4994a852041b4d83f126d9c4d419b4a","modified":1598024585000},{"_id":"themes/yilia/source/fonts/iconfont.45d7ee.svg","hash":"f9304e5714d20861be7d8f4d36687e88e86b9e1b","modified":1598024585000},{"_id":"themes/yilia/source/fonts/tooltip.4004ff.svg","hash":"a5e9fe67e0604c24279281d9fdd2ce1f4536d3e5","modified":1598024585000},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1598024585000},{"_id":"themes/yilia/source/img/default-skin.png","hash":"ed95a8e40a2c3478c5915376acb8e5f33677f24d","modified":1598024585000},{"_id":"themes/yilia/source/img/preloader.gif","hash":"6342367c93c82da1b9c620e97c84a389cc43d96d","modified":1598024585000},{"_id":"themes/yilia/source/js/countdown.js","hash":"300f2f7e1b3d67da7d8f92e419e649c1acb97273","modified":1598024585000},{"_id":"themes/yilia/source/js/ext-beautify.js","hash":"5de951ff458460461b3ce20d4fdc961e56c0661e","modified":1598024585000},{"_id":"themes/yilia/source/js/crypto-js.min.js","hash":"5989527a378b55011a59522f41eeb3981518325c","modified":1598024585000},{"_id":"themes/yilia/source/js/hmac-sha1.js","hash":"818800b462ee6b2e7c4e58e1209e0b63bad64d6b","modified":1598024585000},{"_id":"themes/yilia/source/js/ip.min.js","hash":"6e642df56f5d8605beef0593a62a0511cb719057","modified":1598024585000},{"_id":"themes/yilia/source/js/js.cookie.min.js","hash":"ee9541cf1a95d2a885f8b143a105caaa08ca9c9d","modified":1598024585000},{"_id":"themes/yilia/source/js/lrz.bundle.js","hash":"0d724e7918dfbd4eb786921308b6973b72886f6c","modified":1598024585000},{"_id":"themes/yilia/source/js/moment.min.js","hash":"859f0365c78d8472d8882a96781aeab35c561e88","modified":1598024585000},{"_id":"themes/yilia/source/js/qrcode.min.js","hash":"2d06c1f823f34c19981c6ae0b0eb0f5861c5e14b","modified":1598024585000},{"_id":"themes/yilia/source/js/tools-common.js","hash":"aafd234f37d016f2978a55a8537962a96d6a75f6","modified":1598024585000},{"_id":"themes/yilia/source/js/tools-login.js","hash":"146072ce7c041feefa442520b2834275beed3c5c","modified":1598024585000},{"_id":"themes/yilia/source/js/tools-run.js","hash":"04d0e80619300b7cb92ea2f8e23a010d4b639ab7","modified":1598024585000},{"_id":"themes/yilia/source/js/tools-wapi.js","hash":"a4e4989f3fd17ab5c225b0c8e68b6682dfa01b38","modified":1598024585000},{"_id":"themes/yilia/source/js/web-tools.js","hash":"cdb8805e813fde9463862bf15f4f4d64929b84c0","modified":1598024585000},{"_id":"themes/yilia/source/js/ts.js","hash":"279e4bfba1c1bf29146824c098c8f5fee13a7997","modified":1598024585000},{"_id":"themes/yilia/source/js/web-tools.min.js","hash":"d4d9215e3fd76b65afe14b869ee25ff84ec1f1e2","modified":1598024585000},{"_id":"themes/yilia/source/js/wxnacy.js","hash":"a5936051abfeff5f5ba0e08a3717e7a6373f72a5","modified":1598024585000},{"_id":"themes/yilia/source/js/wxnacy.min.js","hash":"b262ec3c258b3b1d37da23a451eef0148632b6df","modified":1598024585000},{"_id":"themes/yilia/source/layui/layui.js","hash":"eb7ab8b2d0ce7e3687e77768d236377d27949a30","modified":1598024585000},{"_id":"themes/yilia/source/layer/layer.js","hash":"7034e797787919a6742525a69723bf9dfda13790","modified":1598024585000},{"_id":"themes/yilia/source/js/ts.min.js","hash":"7bb32a53e452bab8bd8d6bc52343f6fe29839e3f","modified":1598024585000},{"_id":"themes/yilia/source/run/index.html","hash":"12e7d95e1bcd76a664d071f5e1c717c6eb91941b","modified":1598024585000},{"_id":"themes/yilia/source/test/test_login.html","hash":"7ecffe8f5fb4b2e268e6c59bfd378a560d0a1ef5","modified":1598024585000},{"_id":"themes/yilia/source/test/index.html","hash":"cfd1165d472c786ced13130fdce621656fbc0f16","modified":1598024585000},{"_id":"themes/yilia/source/wapi/index.html","hash":"84c703565341eca7dc7dff151d7457d5cb3d1b93","modified":1598024585000},{"_id":"themes/yilia/source/tools/head.html","hash":"a5658c0e5dd456cf0e4e20202c512117abb541d1","modified":1598024585000},{"_id":"themes/yilia/source/tools/model.html","hash":"260ceb2f35ed3a9afbc05b7726fe94d273af0ee8","modified":1598024585000},{"_id":"themes/yilia/source/tools/nav.html","hash":"5368f8733ae92f2cba07cc01eec0a4957b8b0d76","modified":1598024585000},{"_id":"themes/yilia/source/wread/books.json","hash":"ab1c03a20615e35111e837c10ef12166ad6ccdaa","modified":1598024585000},{"_id":"themes/yilia/source-src/js/Q.js","hash":"d011af172064b6c6e0c7051d8f9879373ddac113","modified":1598024585000},{"_id":"themes/yilia/source-src/js/aside.js","hash":"754f771264548a6c5a8ad842908e59ae4e7ed099","modified":1598024585000},{"_id":"themes/yilia/source-src/js/browser.js","hash":"04095b38cfd4316a23f8eb14b1ffaf95f78a4260","modified":1598024585000},{"_id":"themes/yilia/source-src/js/anm.js","hash":"4a4c5d82b09a3063f91a434388e6aa064fd7fd98","modified":1598024585000},{"_id":"themes/yilia/source-src/js/fix.js","hash":"7f9599ffd5c5551538e90b97023e7d6c599d1ee6","modified":1598024585000},{"_id":"themes/yilia/source-src/js/main.js","hash":"3894e60827c817319e43c9ff3ed045fc3d7336ce","modified":1598024585000},{"_id":"themes/yilia/source-src/js/mobile.js","hash":"4d823b039fd296d24a454eae5a798b93c44560cb","modified":1598024585000},{"_id":"themes/yilia/source-src/js/report.js","hash":"3704def97db6df25e0fee761e279eb7ecc8419d0","modified":1598024585000},{"_id":"themes/yilia/source-src/js/share.js","hash":"b090f82cf80cba7da764753906d9e2cc2acdf30d","modified":1598024585000},{"_id":"themes/yilia/source-src/js/util.js","hash":"8456e9d6b19532742582c99b2fb9d09e146e1c58","modified":1598024585000},{"_id":"themes/yilia/source-src/js/viewer.js","hash":"e8a35d4497fe1e0f119662ae08bd8404e5dab2a4","modified":1598024585000},{"_id":"themes/yilia/source-src/css/_core.scss","hash":"24f347a2412abbf58318369152504da9538f8d3b","modified":1598024585000},{"_id":"themes/yilia/source-src/css/_function.scss","hash":"93a50dd19a93485712da1f8d0a1672482dd1eabc","modified":1598024585000},{"_id":"themes/yilia/source-src/js/slider.js","hash":"e846bcc5aac9c68b93f7b8de353df54d8d29f666","modified":1598024585000},{"_id":"themes/yilia/source-src/css/article-inner.scss","hash":"d79f2d35a06de83a2a226ca790b7a0a34789c115","modified":1598024585000},{"_id":"themes/yilia/source-src/css/archive.scss","hash":"7d27e22ac898e8fafec14549e940c73cbea1fba8","modified":1598024585000},{"_id":"themes/yilia/source-src/css/article-main.scss","hash":"3fad68bd74260326f83090b0974dd80707e7bac7","modified":1598024585000},{"_id":"themes/yilia/source-src/css/article-nav.scss","hash":"43e507f2a48504079afd9471353337e23ca47470","modified":1598024585000},{"_id":"themes/yilia/source-src/css/article.scss","hash":"0f6d61af99ed4db87f8589db1feaea7747b55963","modified":1598024585000},{"_id":"themes/yilia/source-src/css/comment.scss","hash":"cafe3834017a3bf47420f37543725025225a2c89","modified":1598024585000},{"_id":"themes/yilia/source-src/css/aside.scss","hash":"578a67464dd0f542197f7fcee158c991db058563","modified":1598024585000},{"_id":"themes/yilia/source-src/css/fonts.scss","hash":"97b8fba41c914145710b90091f400b845879577f","modified":1598024585000},{"_id":"themes/yilia/source-src/css/footer.scss","hash":"7c995410b25baaf61dfc5e148e22ca60330abcd3","modified":1598024585000},{"_id":"themes/yilia/source-src/css/highlight.scss","hash":"3719994c2c9393813cc1d42b657205c368a329cb","modified":1598024585000},{"_id":"themes/yilia/source-src/css/global.scss","hash":"b4cb4f45a55d4250cd9056f76dab2a3c0dabcec4","modified":1598024585000},{"_id":"themes/yilia/source-src/css/grid.scss","hash":"849a29fcd7150214fcf7b9715fa5dc71d1f9b896","modified":1598024585000},{"_id":"themes/yilia/source-src/css/main.scss","hash":"2f86a014af93583caba78a563d9549826bf28294","modified":1598024585000},{"_id":"themes/yilia/source-src/css/left.scss","hash":"0d30c0e7cdb831c3881a017006c782f2214ac195","modified":1598024585000},{"_id":"themes/yilia/source-src/css/mobile-slider.scss","hash":"f053c609d84df0dd9eee1d11ddf0c19163a456be","modified":1598024585000},{"_id":"themes/yilia/source-src/css/mobile.scss","hash":"ace041d72f95b419f6a5e443191703c2b62007f4","modified":1598024585000},{"_id":"themes/yilia/source-src/css/page.scss","hash":"bf206bb7f7d0967bc8b7fdf01b7ffc99aff9ba88","modified":1598024585000},{"_id":"themes/yilia/source-src/css/reward.scss","hash":"80a4fcf9171d4a33235da96ac8a2b7dcabc45dfb","modified":1598024585000},{"_id":"themes/yilia/source-src/css/scroll.scss","hash":"9c8dfd1c76854ef063494ca76fac6360b391ed6d","modified":1598024585000},{"_id":"themes/yilia/source-src/css/share.scss","hash":"150c6425f6582e7ec78a873256ce49c9930e8805","modified":1598024585000},{"_id":"themes/yilia/source-src/css/tools.scss","hash":"1b1aa0908e58cf942b28e3881d07c5573c4129e1","modified":1598024585000},{"_id":"themes/yilia/source-src/css/tags-cloud.scss","hash":"c8aa84fca93862d3caae77c552873b8610f33327","modified":1598024585000},{"_id":"themes/yilia/source-src/css/social.scss","hash":"724162ccf3977e70a45d189abfaa20b6e2fba87b","modified":1598024585000},{"_id":"themes/yilia/source-src/css/tags.scss","hash":"ac67a3c7097849206244db9b0ba91daaba017ef5","modified":1598024585000},{"_id":"themes/yilia/source-src/css/tooltip.scss","hash":"53d5a554bc2f38e9bb3d26400a47767013c05216","modified":1598024585000},{"_id":"source/notebook/faker/command.ipynb","hash":"e85a4e87415f7be4ad987504cd46b47bb8a1f959","modified":1598024585000},{"_id":"source/notebook/faker/quickstart.ipynb","hash":"23d1835633f880b275fb89c6c259016b630fa71c","modified":1598024585000},{"_id":"source/notebook/faker/locales.ipynb","hash":"0ab430fe5a0ce047b7d6f5e85c0f9064ec777a00","modified":1598024585000},{"_id":"source/images/alisq.png","hash":"ea508767d2a6f90cb5472bbce8bce90f26671acf","modified":1598024585000},{"_id":"source/images/chrome1.png","hash":"7a0ab0e20eaab69adab7f91529a1dd97c91763d4","modified":1598024585000},{"_id":"source/images/bjid1.png","hash":"b477edcdc32b156f256f0098a1e059c615ef8bdd","modified":1598024585000},{"_id":"source/images/ctrlpfu.gif","hash":"6c445c8689dd613496f249b68893f233a7f546f7","modified":1598024585000},{"_id":"source/images/expand-region.gif","hash":"04f37f065a97d95759908fd9a9384c1e273d2cbf","modified":1598024585000},{"_id":"source/images/gzjzz3.png","hash":"27c5cd1c33738a19f4024fff8f5d3b1a897d7eaa","modified":1598024585000},{"_id":"source/images/htmltestrunner.png","hash":"f69806ecc0af60dc7d4ab29339b76cfe2264d03d","modified":1598024585000},{"_id":"source/images/httpie1.png","hash":"d3518f01d2a19b3a590d5cdff45b2a8b4015a660","modified":1598024585000},{"_id":"source/images/ipapico.png","hash":"b1c67a25f1c15106b3c2d6de071dadedff21df97","modified":1598024585000},{"_id":"source/images/operator.gif","hash":"0c605d54445acf5282fe63ff3103f9eafe420a89","modified":1598024585000},{"_id":"source/images/rss.png","hash":"089f15e3f5e4f8d61e0531be87df9e7ea91f2c86","modified":1598024585000},{"_id":"source/images/wxsq.png","hash":"5e81c951f98f1aebd630c4632fa7433019c601cd","modified":1598024585000},{"_id":"source/images/vim-gocode.gif","hash":"d7e323eec67f59890c495f2a3eb13f09aeaf5e43","modified":1598024585000},{"_id":"source/images/ycm.gif","hash":"56044c1bd3b5728d70416f42b4abae0dca299068","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/script.ejs","hash":"439f2afa6c3515a7edd67d512aae6eba5b1b0d0b","modified":1598024585000},{"_id":"themes/yilia/source/js/jquery.min.js","hash":"0dc32db4aa9c5f03f3b38c47d883dbd4fed13aae","modified":1598024585000},{"_id":"themes/yilia/source/js/require.js","hash":"6503d2f5070bdb5718188d862a141a877b8dda6c","modified":1598024585000},{"_id":"source/images/KeyCastr6.png","hash":"debf78e35c2e76d2e76e24e14044f3ec81dd1013","modified":1598024585000},{"_id":"source/images/abbreviations.gif","hash":"14f84e69cdf64a2c29bf760d2954a8992bbb6c5a","modified":1598024585000},{"_id":"source/images/ctrlp.gif","hash":"f249db9dddd80d4627569d5bb7a88c8aed08d720","modified":1598024585000},{"_id":"source/images/gzjzz1.png","hash":"effab521c288cb66746b447192214d32cae5b119","modified":1598024585000},{"_id":"source/images/ip-api.png","hash":"a2ad90ccdc85eeca0ab80e1f0d911b0f54381787","modified":1598024585000},{"_id":"source/images/iterm3.png","hash":"3c39ec5cb2a5d7a82f7cb0dd9d1f16d4d5c17775","modified":1598024585000},{"_id":"source/images/ipstack1_1237.png","hash":"b975766adbfaf04ff4033f4b2b1ee58c13ac5d63","modified":1598024585000},{"_id":"source/images/nerdc.gif","hash":"a9e5add31604604e71d9a04bbf1b4878473aff81","modified":1598024585000},{"_id":"source/images/iterm2.png","hash":"1e9714cb8ad9467c7fef597b1934164588347794","modified":1598024585000},{"_id":"source/images/pm2-monitor.png","hash":"3edaf026b7e7d0f1465f461dd33ea78b9a51334e","modified":1598024585000},{"_id":"source/images/quickrun.gif","hash":"0dd8477a0b61342646e8d852f602b88e3b4de951","modified":1598024585000},{"_id":"source/images/screen_shot_mac_homebrew.jpg","hash":"8ca953135169368f3da25ed56886a38ae8aaf87c","modified":1598024585000},{"_id":"source/images/tern.gif","hash":"f85fff4f16c96e85bdbcdacad87a5e0fcc973f0d","modified":1598024585000},{"_id":"source/images/wxsq2.png","hash":"ad67ef9308c3ceb7a8b2c5bfe5b3c0565d7ee68c","modified":1598024585000},{"_id":"source/images/xuezhiqian.jpg","hash":"030fc255608b4476504032643733dedfd504c62e","modified":1598024585000},{"_id":"source/images/zip-code.png","hash":"28f6ec8b8f6f8cdb73db2977ec0078d74b282e94","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/post/category.ejs","hash":"0809a4829aabeb4e911a3ed04ec28db4df7dfe3f","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/post/changyan.ejs","hash":"ec71ffc2023cebd933c96bd35a7a23d44a30a422","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/post/date.ejs","hash":"ef71c4081e866a494367575c59610e7e6339ece0","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/post/duoshuo.ejs","hash":"e8399025ed3b980aedb821c92855889f5f12fd5b","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/post/nav.ejs","hash":"1036c8e4e1a7bc935ba173744da735a0d6ed09cd","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/post/tag.ejs","hash":"2e783e68755abb852760eb0e627a3fbb50a05a55","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/post/gitment.ejs","hash":"e68bbac9ffb1ad27b56837c9abad6ed6bb7daa0c","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/post/share.ejs","hash":"341103df70d0b476e3acd0afbc507a4a120d8f5f","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/post/title.ejs","hash":"2f275739b6f1193c123646a5a31f37d48644c667","modified":1598024585000},{"_id":"themes/yilia/layout/_partial/post/wangyiyun.ejs","hash":"ea41c462168d9697caef9485862e9cac718a12c1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/anchor.js","hash":"d6cf30d97f846c3d3f894389fd065f7ae64c1e2a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ace.js","hash":"a0353158e1cf8d145beb52399da355afeab6fa88","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/anchor_test.js","hash":"138bf2d7b7df61fa4132d9aa7133085f1c0bab30","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ace_test.js","hash":"106f09a4dfaca6ccbaac80db42dfaaa6d3ec4ae6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/apply_delta.js","hash":"3d24cf0bba698fbb5b4e9d1728f7c0906a4b996f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/autocomplete.js","hash":"0706da0f1349a66a49325e7107f99d03cfe8e4dc","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/background_tokenizer.js","hash":"d479911215670d513bb3c628ce834ae576960fc9","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/bidihandler.js","hash":"849e86b454c67068e9abb0d8082d8d8944bb072d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/background_tokenizer_test.js","hash":"6c78a9ba2bc1893843bc160154a17862b94a8c51","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/clipboard.js","hash":"b924f9393fcd0e805eb6745fb7c6ff513b487a62","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/config.js","hash":"4ee1c10d2ae20bdcebe7ae7fceefbb83e07ac059","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/config_test.js","hash":"74535eeb00a9e1b818f63a8f01f86fa1f6547b32","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/document.js","hash":"b9e54ce72afd8170da479c286fb4b56f9c79a484","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/document_test.js","hash":"47c85a7bd84c7f77dd23bf0c051a6cfff65c45b3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/edit_session_test.js","hash":"260a8262b34262e0309f79f7b2a4ff31ab4403eb","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/editor_change_document_test.js","hash":"0902da9ecec3e1e0ed31c2eef6b64cb7db2664be","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/editor_commands_test.js","hash":"3333c2ef0be33f12be252a445568361996f0c2db","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/editor_highlight_selected_word_test.js","hash":"cc1ce046212b30bea4b4ba75a41d8ed6ebad3471","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/editor_navigation_test.js","hash":"d63f59976d1e5a5101e5fdd3e5a0548970447a39","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/editor_text_edit_test.js","hash":"a729966fdbecab4cf1c62764e86521eae0ffd0e9","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/incremental_search.js","hash":"6e1d8c8d1a799b20f5cdb0294a656f1225610488","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/incremental_search_test.js","hash":"f41c4e6782107e1b99d663f77f1e175db0cd2003","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/line_widgets.js","hash":"8068c9ddd979dddc9e1db8c8426082693e12f9cd","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/multi_select.js","hash":"827d5e6a32d8895da4ae04be63640a170682b435","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/multi_select_test.js","hash":"107f4148e30ada8900a6b93836ddcef9c19a47f7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/occur.js","hash":"aa3d9f6215fa502c0eb47ff50ea540b0fa3b2f52","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/occur_test.js","hash":"4617a10ff1f3649f338fb69d7a3daf879424a925","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/placeholder.js","hash":"eae9cfd7f25ba3471f207112a37c35f2d4e216ed","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/placeholder_test.js","hash":"bf72e690579e2c4a15a0d2ed21ddaf3ac2bb3e03","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/range.js","hash":"5adaadee6066bdccfa96e993e0a0d21aab4b73e3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/range_list.js","hash":"d056f66cbfa615dec60ed77b929ae77fc78b3aa1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/range_list_test.js","hash":"d7ed7826a48fee2de385f5ff6a1c8b127f41c405","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/range_test.js","hash":"ee6f3f1fd89bcd2767ebe535dd2cd94aefa5eb99","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/renderloop.js","hash":"9f5a6160e8257be6aa09a38c5b8f1e4d8ef2d3bb","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/scrollbar.js","hash":"5808ddd6236989423e98fa8c652c4aaa791f3474","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/search_highlight.js","hash":"2b86d309e757042ea490407dc858a806b8288085","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/search.js","hash":"9b0efe9eda3a11f617ce7c8ae30e25980228ed54","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/search_test.js","hash":"008e6b1ef6519c3369e3905eef2d60ce24721ebe","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/selection_test.js","hash":"89f27a35059bd579053c6a6708d882d6ef6548e0","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets.js","hash":"a22dd91f9bce3dd2815790ddbe314d38b1b2b9a3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/selection.js","hash":"fab6a73181154e4aad16077ea4802f8b41d0c32a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets_test.js","hash":"160f47b69ed76d419d3112bb8a38310748ab48cd","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/split.js","hash":"52c93bfabb32ef2cdda304a984a7bd3c88f8240d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/token_iterator.js","hash":"fdcfd1f245043aaab28e6566b3edbf0d2b99bce7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/tokenizer.js","hash":"e96385b5708c28e7920bfba56b20257d0ebe1bd0","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/token_iterator_test.js","hash":"61f8d81f033af470a485fcca781bd1713ec27f89","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/tokenizer_dev.js","hash":"749ef42290e5b1b893382940f6b100d03e731a42","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/tooltip.js","hash":"ccc9798fe1ac2d091fc86cee60d7f5f2a165e03f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/tokenizer_test.js","hash":"8aefb6d3a91a7eb3f9d6c648b0b4a686f3d57a0b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/undomanager.js","hash":"4f719ea27a4102944dc32074e228f006a5514544","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/undomanager_test.js","hash":"fcbcfdf412ef335e42e8d800361dbd41a60180c3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/virtual_renderer.js","hash":"34a6bbedf1bc3c417293813e8a5c962e89a68e5f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/unicode.js","hash":"3a6c79299ac5921592994eea53e0ef777a36fb53","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/virtual_renderer_test.js","hash":"511f142cf02c07edb2ef2809fada344d7cd3c124","modified":1598024585000},{"_id":"themes/yilia/source/layui/font/iconfont.eot","hash":"17eac96bcbe30df2957e4b2488cf69bb753d2392","modified":1598024585000},{"_id":"themes/yilia/source/layui/font/iconfont.ttf","hash":"3b47737a171c9a056e5d02077194cdd11fa78995","modified":1598024585000},{"_id":"themes/yilia/source/layui/font/iconfont.woff","hash":"c1d5d7186c2f6850980c1c1254936fcf3c77b378","modified":1598024585000},{"_id":"themes/yilia/source/layui/css/layui.css","hash":"085f08b725a667a2c63b3af01602415c5e3d082c","modified":1598024585000},{"_id":"themes/yilia/source/layui/css/layui.mobile.css","hash":"21abd557f34131f2c057850cc617f12300a48eb9","modified":1598024585000},{"_id":"themes/yilia/source/layer/mobile/layer.js","hash":"d7c67e69722ef416c5af2ece22d9aa840e637bc0","modified":1598024585000},{"_id":"themes/yilia/source-src/css/fonts/iconfont.eot","hash":"bc8c5e88f4994a852041b4d83f126d9c4d419b4a","modified":1598024585000},{"_id":"themes/yilia/source-src/css/fonts/iconfont.svg","hash":"f9304e5714d20861be7d8f4d36687e88e86b9e1b","modified":1598024585000},{"_id":"themes/yilia/source-src/css/fonts/iconfont.woff","hash":"aa9672cb097f7fd73ae5a03bcd3d9d726935bc0a","modified":1598024585000},{"_id":"themes/yilia/source-src/css/fonts/iconfont.ttf","hash":"f342ac8bf4d937f42a7d6a0032ad267ab47eb7f2","modified":1598024585000},{"_id":"themes/yilia/source-src/css/core/_animation.scss","hash":"63a37f26276f9207405afe0f2d65339ce295bbaf","modified":1598024585000},{"_id":"themes/yilia/source-src/css/core/_reset.scss","hash":"fab871fa93bd542e76a71a56428f2994a4aaf443","modified":1598024585000},{"_id":"themes/yilia/source-src/css/core/_media-queries.scss","hash":"491ab3378d5c11005ba65c607608bb36b368a9d5","modified":1598024585000},{"_id":"themes/yilia/source-src/css/core/_mixin.scss","hash":"3bba5c77bad5981eac859fe05c9561d580ba7fa9","modified":1598024585000},{"_id":"themes/yilia/source-src/css/core/_variables.scss","hash":"fb511c505d1309249f21dc577d4ad2bad99a764f","modified":1598024585000},{"_id":"themes/yilia/source-src/css/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1598024585000},{"_id":"themes/yilia/source-src/css/img/tooltip.svg","hash":"a5e9fe67e0604c24279281d9fdd2ce1f4536d3e5","modified":1598024585000},{"_id":"themes/yilia/source-src/css/img/checkered-pattern.png","hash":"049262fa0886989d750637b264bed34ab51c23c8","modified":1598024585000},{"_id":"source/images/bjsb2.png","hash":"006fdcdd2e1e5bf2152cd643dcfb5ff5aa1661ff","modified":1598024585000},{"_id":"source/images/easygrep.gif","hash":"8521d434d88d8f444b718541d7ee1897b37da118","modified":1598024585000},{"_id":"source/images/elk1.png","hash":"e056ea44e6fa4bcd6f8a843357fd638217b206d3","modified":1598024585000},{"_id":"source/images/emmet.gif","hash":"054d14ee8f09f1a6016dba314199fa07f0ae8355","modified":1598024585000},{"_id":"source/images/ideanote.png","hash":"20c3f82f69a94736b83c40153800ca4dd7494b91","modified":1598024585000},{"_id":"source/images/ip-api_1231.png","hash":"4ba09b75b783e29d4aca93e1e372444e73d80c5b","modified":1598024585000},{"_id":"source/images/ipstack_1258.png","hash":"f25a9e27d76af7c9065297663efecba109445766","modified":1598024585000},{"_id":"source/images/pm2-logs.png","hash":"ca3fe105a1bb26e29ed4f15bbc731a0ed77f999f","modified":1598024585000},{"_id":"source/images/screen_shot_python_index.jpg","hash":"ba9bac700d29d8288ae2db6f2f7da28eae13da05","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/edit_session.js","hash":"6efd4e94694fea96eaef31cbe347b727ecfadfd6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/editor.js","hash":"c75e7a8a85a1ade0b73e25bb4f7c64c8bb42af3f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/_all_modes.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/abap.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/ada.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/all_modes.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/apache_conf.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/applescript.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/asciidoc.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/asl.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/assembly_x86.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/autohotkey.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/batchfile.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/c9search.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/cirru.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/cobol.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/coldfusion.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/csharp.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/csound_score.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/curly.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/d.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/dockerfile.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/dot.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/eiffel.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/ejs.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/elixir.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/elm.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/forth.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/fsharp.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/ftl.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/gcode.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/gherkin.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/gitignore.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/glsl.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/golang.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/groovy.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/handlebars.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/haxe.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/html_elixir.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/html_ruby.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/ini.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/io.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/jack.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/jade.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/json.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/jssm.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/jsx.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/julia.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/latex.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/less.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/liquid.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/lisp.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/livescript.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/logiql.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/luapage.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/lucene.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/matlab.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/mel.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/mushcode.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/mushcode_high_rules.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/mysql.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/nix.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/objectivec.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/ocaml.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/pascal.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/pgsql.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/php_laravel_blade.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/plain_text.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/powershell.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/praat.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/properties.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/prolog.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/protobuf.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/rdoc.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/rhtml.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/rust.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/sass.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/scad.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/scala.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/scheme.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/scss.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/sjs.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/slim.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/smarty.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/soy_template.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/space.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/stylus.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/svg.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/text.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/tmsnippet.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/toml.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/twig.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/typescript.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/vala.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/vbscript.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/verilog.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/vhdl.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/xml.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"themes/yilia/source/layui/layui.all.js","hash":"2ed4c16ec4a07be59a0eb645f3f9bbdea3722c26","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/yaml.snippets","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1598024585000},{"_id":"source/images/ctrlsf.gif","hash":"1446e4bc9eac48076f39f78ba2ec55e4e9e8de7f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/autocomplete/popup.js","hash":"db7ebd842f611e96c7e851ecdb7ba78d7ea7060f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/autocomplete/util.js","hash":"8ee50310c8c1d8dcaa533309663f725e7a500acb","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/autocomplete/text_completer.js","hash":"4c32007e5c8603d8f46f833c59e24260c321ba5c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/commands/command_manager.js","hash":"c4e1f52fe17252ec47ceebf21f24157726969d39","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/commands/command_manager_test.js","hash":"61f550dcf74891f190e39f11f5d4b6034234f0c6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/commands/default_commands.js","hash":"a3d308417ce28525c837817ff300a6209fffa16e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/commands/incremental_search_commands.js","hash":"a9ce5cf77619b08851596b45b115d7298ff7bd1c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/commands/occur_commands.js","hash":"16e8782a487f37169dee58fe5d551372afe68207","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/commands/multi_select_commands.js","hash":"b13761613e8b9b7ce353943cc016246fccf7db72","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/css/expand-marker.png","hash":"513f77a72d323f7f87f27b1b7204c75571ad03c5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/css/codefolding-fold-button-states.png","hash":"51008f4abbf2dee8092e404e8f261bdcdd91e73b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/css/editor.css","hash":"7fe03fb880f7273ffa54cc14cec79c28979e10f8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/edit_session/bracket_match.js","hash":"10caba3338dead310d962ea75c7eb76a8654ca6b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/edit_session/fold.js","hash":"f46f6890be829e2d1a9ce20059dc90b450575b4c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/edit_session/folding.js","hash":"4393579437a52a300e97cdef4b44d565f8de7960","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/edit_session/fold_line.js","hash":"525bcc9084e77ad508673383c5679020ea4f15a6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/beautify_test.js","hash":"a4624d8541c2afb348d60ec328dbbdd83357a829","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/beautify.js","hash":"9718eea74ddb526ce36ddd8d77b31d4f2530c434","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/emmet.js","hash":"1a417310b67ab03ee845ebc030056dde0059cbd5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/elastic_tabstops_lite.js","hash":"070607eaae725fa6e954973a606d6b4d552fbaec","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/error_marker.js","hash":"4a3f030565bedf199bb38b4fb3f4ed811afe9935","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/keybinding_menu.js","hash":"ca4fa14ae430fb2cf47782f95e50d99fb9e908a9","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/linking.js","hash":"4bb3b7eeffe7dad49d6b02d5b3bb0b31023bb9a6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/modelist.js","hash":"a2889d918a34e92074884e339c4c62b99093ebef","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/language_tools.js","hash":"6585091712b7f8a77f12e94aab80b387a28a0939","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/options.js","hash":"48485fcb6ecdad3db6b2b9f0bf139a87942e607b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/searchbox.css","hash":"07df3db888c44bfd40b1a45f097e02fb2cb5ffde","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/searchbox.js","hash":"4c6966e1ebab588d00e420c27a585da461b17e0a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/settings_menu.js","hash":"ace2f2637568e404de5777c03bf7c787859e663f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/spellcheck.js","hash":"c5b23fe64aab1ae37902441f33dcf6225a17b3d5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/split.js","hash":"6d1072ae48f5cc6bb8f87f791fc5856a3300674b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/static.css","hash":"3f5714fda2aaeb13891587b4b09a3f5e75c3c22f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/static_highlight_test.js","hash":"deb8f146b88a11f3a98c1c1c62573f2cbab72fa4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/statusbar.js","hash":"440524c52c203512a2dc5bbd28ffa952efb36e59","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/static_highlight.js","hash":"e27d512f68585cd79f4ba60b95c607c83e8e31e7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/textarea.js","hash":"9cfbcf3347ea6cb86a754be8e7b9a96005044d53","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/themelist.js","hash":"4cb98d655d4f1d34676ac6f533f85e9dab5f865c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/whitespace.js","hash":"aeec16fadddc0518d57a7dee4258016167fedeac","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/whitespace_test.js","hash":"2195c785c910dc91db41545e040cf574d602d5b6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/layer/lines.js","hash":"bf2a0199afa5c3022f246b055fcdd79c8f28c9af","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/layer/cursor.js","hash":"ec1766547b4a47820eef791a4ed913756dbcbac8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/layer/font_metrics.js","hash":"7b0ba3714af3f3a7b58208b076dbbfdf11a8ffdc","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/layer/gutter.js","hash":"885f893505bb4893e42b89d8f145153f1a8f58cd","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/layer/marker.js","hash":"25beb7a9d1ade90ffd16fcc5892360efec4631ce","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/layer/text.js","hash":"5d80f0240dd9d4b856b8efeaedc1e412c0f99c04","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/layer/text_test.js","hash":"dcfb58c877a255b5622bc868d5ca344ea9448c9a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/keyboard/emacs.js","hash":"b65592592c4b9d3f26aa21c55bdafe3892d7ad43","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/keyboard/emacs_test.js","hash":"324b7b6c4d68ba85e85974a11884e9da269ad48f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/keyboard/hash_handler.js","hash":"cf22057ab399f94921f168d5e292d386077673cd","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/keyboard/keybinding.js","hash":"d2189b6372f6fa4e8df1611887a2ad51e0f7dae6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/keyboard/keybinding_test.js","hash":"a03e504953c11bf4336aae131dec2c74bb0f64dd","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/keyboard/state_handler.js","hash":"3747eb7785776597c88edd397d1c40e314320c17","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/keyboard/textarea.js","hash":"518503da4d7b176c603e549f18bbd1b3953318ac","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/keyboard/textinput.js","hash":"55488d8a5b5fae9f91d628d6eb95c526f217ca4d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/keyboard/textinput_ios.js","hash":"6fa4de37f6281ab191ae64aa877aefebc09ebd74","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/model/editor.js","hash":"068ca5b1725b55ed5e08516b24920f0c0e409c02","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mouse/default_gutter_handler.js","hash":"e08c4f5dcda8b60fcd7ec7e707c0b11c10c15d4d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mouse/fold_handler.js","hash":"895984026c27492992b4297406b78ec48da8c244","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mouse/dragdrop_handler.js","hash":"5a429f9c8aece38d6d7ec549e1e5136b676a021a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mouse/default_handlers.js","hash":"689adc43d73f7fac0cd5f943f6700a43bd474259","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mouse/mouse_event.js","hash":"b91b7bc8f715ecf39e3d3ba02feb6e33e328786e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mouse/mouse_handler.js","hash":"85a87e45e0a2a11187f4070aa2b806c31e2b932b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mouse/mouse_handler_test.js","hash":"ce7e940b361f8eaae4a0650dcf16923e8d11a878","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mouse/multi_select_handler.js","hash":"a6af0f8644228f9d793b009f8e0f7a1f2c4eed7e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/requirejs/text_loader_webpack.js","hash":"ed894bed4fef157d9fc29d63d1d54341857d11e1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/requirejs/text.js","hash":"2d2064bd7166d5c13183a237fdee91a0b7e9c149","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/test/all.js","hash":"2b78089bd5504a064625286eb8e1aa43830c4ba0","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/requirejs/text_build.js","hash":"1fca800f57c5abfee2b9970158d0172387513db5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/test/all_browser.js","hash":"7203ca2a8ebab586c4c7f55d264dc443a7033d0e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/test/assertions.js","hash":"5d4ed66d1be92f49f7766d17676d59b75b8ed14a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/test/benchmark.js","hash":"b4b6dcfbce7bd2cfcf4cfd817ae945d6653574e5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/test/mockdom.js","hash":"97050e962c5f7585453f93a5817d2312683a54d8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/test/mockrenderer.js","hash":"9a0c4d3204287d2e96716827828c4a1968089c70","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/test/tests.html","hash":"5ab082a9aaa71cbe44929bbfff52814ad92dd3d6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/abap_highlight_rules.js","hash":"1c6dfc09de4ae682f1d7222361d1ce04fa811942","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/abap.js","hash":"e33f381edc08cf586af75a95e638782fe0fac9fb","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/abc.js","hash":"c9cd31b2ee5dbfb58bf117ec2ef951862fa3cea0","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/abc_highlight_rules.js","hash":"5bd568edc8dabb501b6285f735858fec1b7d8c9a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/actionscript_highlight_rules.js","hash":"67d86eff3cf886458c4c10b91b1cedbe7d349e62","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/actionscript.js","hash":"9ae538b103a5f46847b0dbf67bcae86c894b790e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/ada.js","hash":"f6afd61405baf4862e88a25c1b3cc675cc8e564a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/ada_highlight_rules.js","hash":"99b28ef733f82ea9cc375e460ff33de6e52c7011","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/apache_conf.js","hash":"9116652ce681c73af1c0416d8f70efc62b47a68a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/apache_conf_highlight_rules.js","hash":"30c5b245131a1aad610b3f70b7521c9ca24029d9","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/applescript.js","hash":"b4f9ddc5a2bb63cc0b6ed7c60b2a41934adebe38","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/applescript_highlight_rules.js","hash":"82edec8c05cd1ba1bb9d7515eb2be4976a8a5b2b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/asciidoc.js","hash":"f49edbd70129028b9cd96500705d2e3b5f78494e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/asl.js","hash":"dfe2d8f25c72e37910de130248e9386193e8e986","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/asciidoc_highlight_rules.js","hash":"974ac24a1d9e83565b04a22436f50b7ae37555a2","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/asl_highlight_rules.js","hash":"682d5eb4b886bd619889434124a15c092d5dee9c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/assembly_x86.js","hash":"80621fa955ac45ff43ae401da66e25248a66b725","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/autohotkey.js","hash":"52cfa1a50f6e781f82af7ecc1844f9ad4e37bfba","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/assembly_x86_highlight_rules.js","hash":"a94e5143d0f98b69231b6c9df97cb8075ee915a3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/batchfile_highlight_rules.js","hash":"d873e0e070d061e73695a8c185ff0e2c7518962f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/behaviour.js","hash":"a56f3e8a6e6937a2d961206f6aae278e74252ee3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/autohotkey_highlight_rules.js","hash":"9128508f5570be116a3580aa14fda22ea30e9fbb","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/bro_highlight_rules.js","hash":"fd4099bff01650e98c77e2a4bc1c0ce5c070c38d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/batchfile.js","hash":"c124be1e8695e3a46194465a50159fe4c5145ff8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/c9search.js","hash":"59ae614cef4358210bdbce2087a98c9aec33c1fb","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/c9search_highlight_rules.js","hash":"dfca8f9c4835715f3577983c2ed0caf2f62f2996","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/bro.js","hash":"9b5202aad87805e187e58a537dfa0246be318fb4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/c_cpp.js","hash":"1f817b53beac9f6f5229015a791e9c7d5dfa8c1e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/c_cpp_highlight_rules.js","hash":"c56c0abdd4c1c496aa133c6f2343e853862928e1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/cirru.js","hash":"bf79ef8ab4874a1241a3d7b80d5da468422e2b10","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/cirru_highlight_rules.js","hash":"08c8d78e688c4e8b5fbef67736c13787481f7df7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/cobol.js","hash":"a63fa1276720cf8fb4b6f1dd707aa14708f0cdda","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/clojure_highlight_rules.js","hash":"59faaa1860bce10332aed767f44b912f6b5b5aa4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/clojure.js","hash":"50ec4bbf3df831d33a3790fb2aef74b278a05aa7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/cobol_highlight_rules.js","hash":"0fbb5bb35fff395270d403e4d142b819b98083e3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/coffee_worker.js","hash":"61795734891d0fcffb6e60eb2cae97ad856f9de5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/coldfusion_test.js","hash":"88df9ad30140fb79ef2bfbe1f0aab1209a02f8ba","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/coldfusion.js","hash":"b6148fffeb8b9f162135cd8490965d7f230ee44f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/coldfusion_highlight_rules.js","hash":"503d6cd984934b3e77869730813a9c1ef443bb91","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/csharp_highlight_rules.js","hash":"f399123c85d849444eeb0752f330f78e74ea92ab","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/csharp.js","hash":"a6b7e9ff669565472abea4d8ac99b37ce30f2bdf","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/csound_document.js","hash":"8a00a174b259c1d68ff1fb78b6f5032e7a125dc4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/csound_document_highlight_rules.js","hash":"7da3ab2c560c4fd749ae09c63a217d1526ceab17","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/csound_orchestra.js","hash":"a59f06f0ad4edf285ad385b73b4e79132ec0aef9","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/csound_orchestra_highlight_rules.js","hash":"17cb010112c8cbd3340eb62610fd90108f7ee966","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/csound_preprocessor_highlight_rules.js","hash":"89504872bc60161a709fef806e77c3f154ce288a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/csound_score.js","hash":"274d74e2d7d502880b4d8c338fcc02ece42ca309","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/csound_score_highlight_rules.js","hash":"59d0d02815c7baf38b8e3fb15999007057b9021c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/csp.js","hash":"ac93080633f5e2742c63a8f863d64f0c1bfceb82","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/csp_highlight_rules.js","hash":"9c2972b46105f6765a4ff21faf537ca53f29aac4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/css.js","hash":"16eddbbf01282ff3954834d6c33dbb11144ea0f8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/css_completions.js","hash":"72652be103af06ba0eab9f3c07ea7335e11a2aa5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/css_highlight_rules.js","hash":"6cd34a928e514879fedf506de955a56a9085f023","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/css_test.js","hash":"9859219a35697e9bf411187ca48fc35c05f75a5f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/css_worker.js","hash":"2f4057e57a5b570e91dcd20deb67f8b106a13303","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/css_worker_test.js","hash":"368bdd8abc538640719fdd0721ad3503c101c53a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/curly.js","hash":"b7bd69e882737976393ffe39f2813bc1f73c9530","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/coffee.js","hash":"d6d944701a070734d110350677d8f4683c2012ed","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/curly_highlight_rules.js","hash":"3fd462b26a97791200b5cfb8992336ed8606d2bf","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/coffee_highlight_rules.js","hash":"a2af4dc2bede1ff34001a9010a345931abfb4173","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/d.js","hash":"c19827499d4f70352592cde7fd6bbae4f4a5fd25","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/d_highlight_rules.js","hash":"d9498252453898c0a3a9b462d3b31d2b62f56e91","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/dart.js","hash":"38b060edee2ec7ba46c4138c9a4f32d222f7fd81","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/dart_highlight_rules.js","hash":"b562650c1227118d3377623c770ace9774dddb90","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/diff.js","hash":"00f71ae3c5c0990fe8c340291a9cc2fea5b6f4d2","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/django.js","hash":"902307964b678f36aa2e216c2af85edaf560b11f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/diff_highlight_rules.js","hash":"acb5745988e692f656f02e626cb0df24ef8c0f5d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/doc_comment_highlight_rules.js","hash":"dc9936b9405ba6d1023bcb1e9b56996bb4e854c1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/dockerfile.js","hash":"22aef9567cb5508adb55d6797220c4f4a21350c8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/dot_highlight_rules.js","hash":"880f7bd888539d5835634f7f886c2f422e3aef29","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/dot.js","hash":"4cb45307f8b4962c43b11da5f51a8e5d59082f1e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/dockerfile_highlight_rules.js","hash":"62ae3c390349acdc5b72ac256d6bc22d67f69dff","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/drools.js","hash":"7b10e69b08cf425ecaf325ad2ab70c763ec36e50","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/drools_highlight_rules.js","hash":"e627263aef7794acd1ee01eefa14e9fd59e30480","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/edifact.js","hash":"e85ea5855884c466375522cba420fc79b2096aac","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/eiffel.js","hash":"f1eea9c4de750d0fbf20891d9e260e370343988f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/edifact_highlight_rules.js","hash":"ca8b082dfcddfee421a7bf85633aced169de7b3a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/ejs.js","hash":"a0681767943354a6f07b9219729c73d9581601e9","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/eiffel_highlight_rules.js","hash":"15398c87177f5eafb706b15c44654d49ccf36145","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/elixir.js","hash":"e714f47bf849df907ce99273c852426b0dba1cd0","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/elixir_highlight_rules.js","hash":"bcdfc346ba3da9ce2414ee4f1fbd9207bf58155e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/elm_highlight_rules.js","hash":"775983e7db78db4a70064aaf9a31e8c0dfa7984d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/elm.js","hash":"f2c91d53aab69f419a513e5aa39268e9e0c6b069","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/erlang.js","hash":"19a19e11aa1cd55bae3ae53836b028aeff68472f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/erlang_highlight_rules.js","hash":"d76207797d25f3916baae466f2c10521a7a88c92","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/forth.js","hash":"2340c4039b1661f9ad5a277a779ce7796a3fa0e5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/forth_highlight_rules.js","hash":"fec11b8f79d25c5b9e4cb7c40d3d7fb65415f9cc","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/fortran.js","hash":"52718424dd23eb48674cb3ce3145ba771ee5abcb","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/fortran_highlight_rules.js","hash":"059f4a5d88c172180d9c40ed449cba071ae9b2e3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/fsharp.js","hash":"4a9cc5c51992ad5996bcd34e502ce99042dcd021","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/fsharp_highlight_rules.js","hash":"c4cd3ee2784d20be435f19b6c4ac970d244e446a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/ftl.js","hash":"25108bae9db72584fe8ea164f9d2ace0810be0b7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/gcode.js","hash":"6f789f444a42e50d7dca6297ba4bac2abb3de9b9","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/ftl_highlight_rules.js","hash":"22ded01cae201a7f0a3803419d7b8083c5ec2b42","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/gcode_highlight_rules.js","hash":"78b330e9d8549b7ffe3667b5fbc4108bc07360a0","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/gherkin.js","hash":"3c3c823916cd0f844a0f5b92e7824b42571c4f72","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/gitignore.js","hash":"a5fc9502d8fa98b6d11c236c373dd26831ba71f3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/gherkin_highlight_rules.js","hash":"429306a426e053a2ec3df1edbcf6dcdd605ce17e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/glsl.js","hash":"602a55b855103213eda7ce52b008c594e0c1dc02","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/gitignore_highlight_rules.js","hash":"6864b89030815c7d58000ac92eb5423e15c7a85c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/glsl_highlight_rules.js","hash":"709a52ff7da305c699b1297151813b3692887b4f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/gobstones.js","hash":"3589b6085305b6df70a6f771a7cbe97f1d3cc589","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/gobstones_highlight_rules.js","hash":"3c3816611a889dc99d0c1697b3c960dceb44dd3e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/golang.js","hash":"5a9083c8b61a9dca48fce2497b8c3cc4385b18b8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/golang_highlight_rules.js","hash":"fe0a7264153ceb2608b9c5bc810cd6af08ac39fd","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/graphqlschema.js","hash":"ab44846f55349ed2894a06af87e7d1cfe76b2e41","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/graphqlschema_highlight_rules.js","hash":"47c832146b2dfab5633842d9e7ca6cc4653f0258","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/groovy_highlight_rules.js","hash":"ac1a890b268a8318d62fb6b57616d100b3287102","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/groovy.js","hash":"30d93216e232f808f39c31be71d2d9c4a31b1944","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/haml.js","hash":"5986f3ebdcaed13710c695bf9b04f6e051e8b154","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/haml_highlight_rules.js","hash":"f275b54c091669b419093644dc602ecfff9c832f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/handlebars.js","hash":"79c8db2bf6a38eeaf955a5c35ce344dd54f004f7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/handlebars_highlight_rules.js","hash":"fa5616dd9da41f6d80d8f15439a69986d1e703d9","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/haskell.js","hash":"589edafe156b7fdf2d0766d1d2abdf21c1239919","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/haskell_cabal.js","hash":"ea17db591627891b0636542d079d9901e194d21f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/haskell_cabal_highlight_rules.js","hash":"3d2a4b2fbe84aa519720e19ed56d90a6acff992f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/haskell_highlight_rules.js","hash":"7706e554c31c5671ce840fc3385b5a908b9a6250","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/haxe_highlight_rules.js","hash":"bfd4d929024ae53d599871bbeab6307cf8031ff4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/haxe.js","hash":"c8a37af22292df603f12abad882ea0d8e327476b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/hjson.js","hash":"528a2ae9d23692a4b1f6f2d02b9305f2059bde7f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/hjson_highlight_rules.js","hash":"c2a5df68a48981ea5f13d883a35793d0c327d510","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/html.js","hash":"b477d6d8141162be949105d3b067f8c8a5a2c5ff","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/html_completions.js","hash":"dc6a3014322c0139601162bdfef41b21361f71c1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/html_elixir.js","hash":"be7861608830c5943e0168939905966079f2aa94","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/html_elixir_highlight_rules.js","hash":"13c23c61e3dd117d38d630dd3e46c9cbddc073aa","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/html_highlight_rules.js","hash":"f5cc20c22d1cfbac20a3751b43c6a12f2d573abe","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/html_ruby.js","hash":"28e3b80427106ea40f492e88cf8664e7c5dc1679","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/html_ruby_highlight_rules.js","hash":"fe162524a58e0409b7ea155f78fe7acb3574e676","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/html_test.js","hash":"c9eaa0653351b684332331d4b782f45831964eec","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/html_worker.js","hash":"b102b57604710586c2d42f7b25be493e2c700d1c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/ini.js","hash":"6a83c2b9f5ef9f865e3bdb50b0d8ca6586832bef","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/io.js","hash":"111cf0776ff5c903939f31c236c226bf38565f5c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/ini_highlight_rules.js","hash":"3ad273bfcccce4d8e6306026898c48682de01eac","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/io_highlight_rules.js","hash":"c5be7240fd0d98ff88725e603a1692b402d5b776","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/jack.js","hash":"16e86c208dbc8537f0df0d7aaddf74cb917db1da","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/jack_highlight_rules.js","hash":"22bba382ac39080f5359ce08d300dce796930bd8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/jade.js","hash":"1bea13f74fdbc255ab48ae2668ed54f31161bcc4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/jade_highlight_rules.js","hash":"b05b37b15179491dbb68d2302019f2cf4d2794b3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/java.js","hash":"3b4ad38ade9daf5953f74d06dd9d74f93fd9a6fe","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/java_highlight_rules.js","hash":"1d65ebb86781b54da8df58cb3555d5c12fdd8c4d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/javascript.js","hash":"8788627d1ef27e15d3541a069aa9994d5b1f0631","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/javascript_highlight_rules.js","hash":"2febcbf072f906b1ff22c3a950bcc3ec86a20b91","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/javascript_test.js","hash":"0cb371a09f8a0d0b3db5da0b83866b585279a38d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/javascript_worker.js","hash":"34bdb8976840f126e779694ccab8651ddee1aaa9","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/javascript_worker_test.js","hash":"a6cbd368baa38b33ee33ed461a6167c48d1dc3fb","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/js_regex_highlight_rules.js","hash":"1e72a6ffa9cf86c5d2142f19ad99fc64dc4f522d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/json.js","hash":"8a77765712439338696fde65cbc214bcb4d4eb79","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/json_highlight_rules.js","hash":"366aad318fd846e9ed3001519c9a87824b2b6b48","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/json_worker.js","hash":"6492d440e5f5b506f63728fbb3044228191402ac","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/json_worker_test.js","hash":"84c25177dc91a07e361378e5956d10e1a5b85fd4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/jsp.js","hash":"ff9d45f1cbe03db48ce8e04cc6b4c2fe6745594c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/jsoniq.js","hash":"c8437d2e371ae628aafa4fe157f316ac76a41777","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/jssm.js","hash":"abaa55a09df254cbb41f32a9ee3052881915f687","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/jsp_highlight_rules.js","hash":"c53e54093518920db12518e0f97e29174459f695","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/jssm_highlight_rules.js","hash":"b7f4dd14571f9e65ce8598888c7cfe7eca9059b0","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/jsx.js","hash":"6a7699c8f3f7972b3006be58cc290f38adf12de6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/julia_highlight_rules.js","hash":"119ec33bc6ed5cddbb745e9467393ef2653c9d1e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/jsx_highlight_rules.js","hash":"5d50efaf8219ed5a7bfd300fe51e28189bb11909","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/kotlin.js","hash":"f375491829c0d8a77160152671a073625ee48218","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/kotlin_highlight_rules.js","hash":"547bd1aa294690c7357eef44b67b830544e6f872","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/julia.js","hash":"c397c7d91c20648db0c8c965748662e9c21af5e1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/latex.js","hash":"f43e92eef4051dc8da00866e19c8c0381e8bae89","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/latex_highlight_rules.js","hash":"ef88a6211a370b1f0af5a2a7ad77e97943be8c09","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/less.js","hash":"d808ce8ebf374be376c6702ed097d3d4e0c73622","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/less_highlight_rules.js","hash":"1f490b41dca61174edb0ce719efb5d2cf3835454","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/liquid.js","hash":"1abd29b452705f055f3907e44f22cb85af48ba95","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/liquid_highlight_rules.js","hash":"c2d60b3b9406d0fe6701d958e8cece12f220a25d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/livescript.js","hash":"c83052a3f9b4899430eae2bfbe28e05eb56d86c6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/lisp.js","hash":"06b038e354b3fb90c9332db955af4aefd1f55464","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/logiql.js","hash":"7a5dbd25d0344506d6c38a8735c2ce97c19402fe","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/logiql_highlight_rules.js","hash":"a290d6bc0907fc3f4dc70c42ec82bd2519313b81","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/lisp_highlight_rules.js","hash":"4b0f0d560754f59e9c8361573a7b7c841fad0561","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/logiql_test.js","hash":"15dbb9da60a7e8356c35eb37a1d2c9073f33189c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/lsl.js","hash":"3c0ad66978dbed51532ff7eb425f11a0ad9704b6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/lsl_highlight_rules.js","hash":"7f2a9778bb3865d16255ba0ae0e896490b2b9c6a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/lua_highlight_rules.js","hash":"92fccc9f087f2c9d62ac256b30428bacac199bdd","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/lua_worker.js","hash":"faa4212898c3ccbcb952a695e82ba81627396794","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/luapage.js","hash":"65e954a7898ee01744f3baa21e848ce81693f4af","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/lua.js","hash":"772089b1fb58e6d499d8c3f717ad40a58e9ff3d3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/luapage_highlight_rules.js","hash":"8d347acfcc35388bfd00cb42f8c47833bc74285e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/makefile.js","hash":"bdd27259631cb22e4a7f22f2dfa7e1be20e529f4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/lucene.js","hash":"805ec9b2e1f803b420eae49683720a60fc0016b7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/lucene_highlight_rules.js","hash":"b863beae173266bc4195813040834ffd715625d3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/markdown.js","hash":"1a8b0a12310824cc4429f5ac746337e255f8e3ae","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/makefile_highlight_rules.js","hash":"2da6e498797730afab5b85216f49663e9f9456f4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/markdown_highlight_rules.js","hash":"591bf82b604a9e70ef014be598ff8930033ed570","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/mask.js","hash":"82fec807751dbc07afd72b393d0d32bf5cc53979","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/matching_brace_outdent.js","hash":"ba066426865d15f3f28a225a9982feaadee21e34","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/mask_highlight_rules.js","hash":"d179915c20786df1a18ed841b40346c8065eac39","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/matlab.js","hash":"108335bdd8014e237a181e0e668b5a0a196e798f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/matching_parens_outdent.js","hash":"337475366898aa4a370c4af57b154ff92c1d957c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/matlab_highlight_rules.js","hash":"e79a99a8a8424c28901c7d2cb35c2472d41f93f5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/maze.js","hash":"552a4b105d6ea104aee78667db363aa42577bbf4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/maze_highlight_rules.js","hash":"088fdd531639de5b7a303feda031d36c8e7c06be","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/mel.js","hash":"099c03f5178f0aba02ab683c7613624155cd1d7f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/mel_highlight_rules.js","hash":"375657fd8f221a37e2c5a71cf9e5e7efa401331d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/mixal.js","hash":"6526bae748ef69e8a610a646f611fd7d7213d8e1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/mixal_highlight_rules.js","hash":"6ac75f550166b3accc0aaa3abf070d9ebee377f2","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/mushcode.js","hash":"fe463b706124b09eef7baa3cc85e6539ffa76359","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/mushcode_highlight_rules.js","hash":"ada6275f08ed543fc452e4adbab2c0249bfe3833","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/mysql.js","hash":"49e602d99db4e9488ceff76a6ddce5f345da9c38","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/mysql_highlight_rules.js","hash":"246debe04db2d33f53ab9d0d811bd08a70448df8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/nix.js","hash":"233751b772558076921d316652c9a51882e9cbce","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/nix_highlight_rules.js","hash":"30dd9217ad4cd0aa5b108b4654555830f34f9f00","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/nsis.js","hash":"67aeee98a9533a67a39e8cce36e80d86fbc531d8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/nsis_highlight_rules.js","hash":"cbb5d23f501c821b88328ea93e96041f6a77c40d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/objectivec.js","hash":"5ac8c38041599c38be8846ea8a375536e24dadad","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/objectivec_highlight_rules.js","hash":"abb6bbcbada20fe6c0eb03353d72a960be37b809","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/ocaml.js","hash":"2ce23d4d91a198127a1b668115eb730d13635e9f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/pascal.js","hash":"3850833a402901c3d0ccd194883b2365081b58da","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/pascal_highlight_rules.js","hash":"4f3723c88297c7a1884edc08b03f7c3996672ec2","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/ocaml_highlight_rules.js","hash":"1d08153aff903096d2b6c9fb25ba266e2b71b484","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/perl.js","hash":"d8b8a7daa767feb7d502ef6fabee6717f7e292f0","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/perl_highlight_rules.js","hash":"2a79d1f434ef36b919b3e907f8877973f8e9c3ff","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/pgsql.js","hash":"04d2228514e4b68075c736adcf4b39b9aa36bde5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/pgsql_highlight_rules.js","hash":"dc6be7e2ebb84de732fcf1cd7188a69bfdd09b3a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/php.js","hash":"6c3ee702a0dc05fac52134672448169c4f8a83b4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/php_test.js","hash":"f67ed19d5b22e8110a01b7642a49b5056963e163","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/php_laravel_blade.js","hash":"1b5553e072bf49ae7999ba1b348c52ffc91a9405","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/php_laravel_blade_highlight_rules.js","hash":"1ef28ff739d01d66ac9414344beee41213478de4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/pig.js","hash":"854b88742c695e2314abcc7c37dcba84f5da9efa","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/php_worker.js","hash":"0779ba837884401b5507f1446b86934cfdc4e82e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/pig_highlight_rules.js","hash":"e1ba28672c7d055786c645f282ee0dc5ebbd7c8a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/plain_text.js","hash":"e4314f56887a2691bf8a6d28a656a3b8341a8c33","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/powershell.js","hash":"e8c066616140b10325e105b906db34fe99f74a42","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/plain_text_test.js","hash":"755bd6779a749c596456db978400bb8694bc2cc6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/powershell_highlight_rules.js","hash":"0f72878a0f7d70773496903b9633e408378d84c5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/praat.js","hash":"d70459b8b61f094784f9cfc0f0bdd3412a0437c1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/praat_highlight_rules.js","hash":"44a1ac283f187c5d4da4feeff6a6dff4074fdd05","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/prolog.js","hash":"9e4a1c8deafa338edb00e68f6e55a6151f3b0615","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/prolog_highlight_rules.js","hash":"a0b72506c2e49ac5235c0d69c2213a531c7639dd","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/properties.js","hash":"37faaf5fd4bfd442277080a54fb0b8f1c9211ccc","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/properties_highlight_rules.js","hash":"8cf350977f4ca44b81074d82e7f2a1b2719bd176","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/protobuf.js","hash":"80bb7517c16b75b5a77bec07ef2c034c82115e06","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/protobuf_highlight_rules.js","hash":"52b591b6681b4c8f112163bed2e02be27c37dcbc","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/python.js","hash":"2aa0b99f62e1e4dd7cd1e597656186aa37654346","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/python_highlight_rules.js","hash":"2d88bdc3bfc109d6cc4b95e41364037a3b6083f4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/python_test.js","hash":"621398880495edf25336ad9e69bddca5b062f807","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/r.js","hash":"53e6bd82152c2249ad58f249d029959432c43d3f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/razor.js","hash":"41459368163ac0843433d8a1adfda9e98efe68c2","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/rdoc.js","hash":"bc894822b2f0ecd14ff73a1c7253725c6ce3cbba","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/razor_completions.js","hash":"1a27bf19376b646df175727c39d75f0857823914","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/razor_highlight_rules.js","hash":"2eb160945e5afe15f9782f685527983863919617","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/red.js","hash":"3159210ddb6c81daf79561e288a2464604f91782","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/rdoc_highlight_rules.js","hash":"767caa6d04f355fb381d13cd803150eb163d719e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/red_highlight_rules.js","hash":"fa190eff14edf8894dde03e4171fd7cb4dc8f066","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/redshift.js","hash":"b4f1a6d90f2ef91d95afe67e1332ac400ba16f42","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/redshift_highlight_rules.js","hash":"43254f9f52f04a29268d7986b9b7d7e3fbcadccb","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/rhtml.js","hash":"e09f50a23bdb3bf9af72621b2d7c0608331e7391","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/rhtml_highlight_rules.js","hash":"67ee56cf1901514950cf9d3a197f3f11c8b56c4a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/rst.js","hash":"8aca44ebcd7cd3c7af40002c20729937092a5c38","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/rst_highlight_rules.js","hash":"0f4004f1939d97fc53ca027952b94bdc859d06af","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/ruby.js","hash":"da3cd5647052f4b0dade3d8bbbd36df720b85b82","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/ruby_highlight_rules.js","hash":"d7d7b09981ef12573f9cdbbac4a4bfbaeccede9d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/ruby_test.js","hash":"b92fbb8924fe17448677d0ad229ef60e0b92ec25","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/rust.js","hash":"84938c6aaffa3c5bf59bbb00877694e083fba265","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/sass.js","hash":"38396766840d32e7797a361c80941b6bd54ac194","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/sass_highlight_rules.js","hash":"731b23b337e9124599158b7792652dea06e83735","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/rust_highlight_rules.js","hash":"1e5a69f5d961596d057876a9c8bede1e64a63fc8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/scad.js","hash":"8bc243980a85d2dcf5c1b57f8ff91350f07782cd","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/scad_highlight_rules.js","hash":"5e6b52e2d34ee40b35852817e66fe10bb6524437","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/scala_highlight_rules.js","hash":"f454b9b8508a1665ec77496a0197b2165283f886","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/scala.js","hash":"de28c5d69917dfea365c0f4a96cbe5d201f81830","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/scheme_highlight_rules.js","hash":"7646dfbebfb33356d945559b9212d59acc0319c2","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/scheme.js","hash":"19a6238dca9714f40f9ed21ed49e5d7fe1e1ce80","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/scss_highlight_rules.js","hash":"a5feaa192742cda1d47e1ff175f2ac95653e6c38","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/scss.js","hash":"3530b33dba9ae0083c42be060da14bc5b5934584","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/sh.js","hash":"a0196f37cce737cbc4bb4cdfd8d10719cf2b3def","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/sh_highlight_rules.js","hash":"21d78950dee0657501dc3bc5a6e724f82162fd5a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/sjs_highlight_rules.js","hash":"3cbf9c302ae7c8e92a229191c55cc346baef3914","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/sjs.js","hash":"64dad239c9b7796a6399166f9853618fe2c380da","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/slim.js","hash":"2df829b9a196fde23fef7a556a5c5c27592c794f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/slim_highlight_rules.js","hash":"7f97b4b2669d47e684c815ab951da58c912f2546","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/smarty.js","hash":"e4d1c86ff144892ae1e1d7ab0245533f3411657e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/smarty_highlight_rules.js","hash":"b220e2675b46309c271a6d01acc86f3bfb1637ad","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/snippets.js","hash":"38877b265ee29226f4d72be67c163329e4693f97","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/r_highlight_rules.js","hash":"4a5663ec5ac2e1b2fe0f6c6c5450ac8b523ad7c0","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/soy_template.js","hash":"e3bcef54e2ea08ab535e36298f05cacb2f8e4992","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/soy_template_highlight_rules.js","hash":"b05bb211b8530714f7bd8431e87696e62464f329","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/space.js","hash":"cdb0f6d196417bdd4e538407d96be98d04525b0d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/sparql.js","hash":"767f9c9fe44d1777a81ecbcccb68511f37ec1cfc","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/sparql_highlight_rules.js","hash":"92d67866f515f3fc49923615643e1978d0af5bb3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/sql.js","hash":"877ef8fe76bef149f7895f27bdb9f9c2f0dad5e6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/space_highlight_rules.js","hash":"09d65dc0d63550427f67a26d8f487ecb7083db94","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/sql_highlight_rules.js","hash":"b5b29fffe995a9389789f35247a36dfdc5183e80","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/stylus.js","hash":"861003183588ecab84e95b792267673c7120a5d5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/sqlserver_highlight_rules.js","hash":"088a87eb804af1bb24d955cf2d04dd7324f27766","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/sqlserver.js","hash":"a2e5d6cdf8e93896ad3c194d1b3773ddcd5e55d5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/stylus_highlight_rules.js","hash":"b010bb479a42967bda09ed0414feeafa9f0287e7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/svg_highlight_rules.js","hash":"e13ffe53d5f6ee173ee8c3d1f494bd88200b502c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/svg.js","hash":"93284eb31aaad2e91d147d1c3d98eef81c793614","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/swift.js","hash":"a223c4c68bcc46ca2d8e5041e0d861c6c2d6844b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/swift_highlight_rules.js","hash":"c27e126be9b92b4b10c5a5ce2707596c58489c14","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/tcl.js","hash":"1d4a5673b1673c54a9d1a7d0201fc41f1a8641d0","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/tcl_highlight_rules.js","hash":"972a57846edd1b73a67d143fee64598e8a095544","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/tex.js","hash":"6e3e37ad01a13ff9af4b60a6f0e0a1e1c33482d6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/tex_highlight_rules.js","hash":"e2cd3e38d9fc433cd676dcfb2c13da8f01563b79","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/text.js","hash":"ca67ff86d66c9ca8aade229a27030c05ee565cde","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/text_highlight_rules.js","hash":"f31f6294734dd1d7016d1f8640d22da96dd2afa5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/text_test.js","hash":"5d7606b8c79df971cfce37121cb3689a7c180e0d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/textile.js","hash":"527d82da5c7b33336199efdce57a2fde9deda4cd","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/toml.js","hash":"16eab772aa0c66f1573e75b3f198135eb25cbd98","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/textile_highlight_rules.js","hash":"f41f0463e9f85ab3bddbc924e4073ad687856db3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/toml_highlight_rules.js","hash":"145ade37f5b17b63825f5529c69a41dd777b3a08","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/tsx.js","hash":"07c2549e57014f4d6f867d6f4849f459877808c5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/turtle.js","hash":"047a1a839d24a894bb130489ed1b1156e0183777","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/turtle_highlight_rules.js","hash":"9385f0884cc719e17304cadb937c8e650188e867","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/twig.js","hash":"88fee9843a046b04897299b8bb9f3f7f1c6afdf6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/twig_highlight_rules.js","hash":"465b12e1ded401a22b31590c5a5eeb86e7df5f11","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/typescript.js","hash":"12e0f7e137cd6ff6889e60f38e3a14a602bea7cb","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/vala.js","hash":"8d9242e79d962bd1b75a3ae41715c8d172e06ae0","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/typescript_highlight_rules.js","hash":"20305554aa73fa7c0435a7db18f670374d0aa8d7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/vbscript.js","hash":"c5ab7fab92589f2fff0d5bedd1c0b66cfaedf7dc","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/vala_highlight_rules.js","hash":"3449b82be2a949c0376fc8da407b04a7e0151794","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/vbscript_highlight_rules.js","hash":"e5aa10f9b820d8418ddae5cd29825b991f46ef7d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/velocity.js","hash":"c7ffa3a8cfa2d4eba722add11bb80cb29e1caf51","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/verilog.js","hash":"0349c628cc652166d2c4a7a79a200827db0fc137","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/velocity_highlight_rules.js","hash":"3d15594ecaffc564cf11b765a604e1a0eec25440","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/vhdl.js","hash":"b3d6076f5cb3dd46dff513f41b41ed3263902ca3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/verilog_highlight_rules.js","hash":"558c98c36dcca426be8e0924cdb57a3688d258a7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/vhdl_highlight_rules.js","hash":"111c6d01a48ab1bce86b1577bbf1edabdbad4855","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/wollok.js","hash":"b1bf457d84728d0b0c373dc92ce24449fdbdd1f1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/xml.js","hash":"c5b0e1825ff6a10c4bc4ded6cb50aff5dae6e4bc","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/wollok_highlight_rules.js","hash":"77dea3d907503dbd1c4982ba8ed841d8ed6bc5b8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/xml_highlight_rules.js","hash":"eb9e21f5fd7b85670430aa696e4566498157794c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/xml_test.js","hash":"7cef8d31131812a0e1e186366c39cd9adfaaec0d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/xml_worker.js","hash":"0c48aa498ea7723a93703f7e103db4881b7b70e4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/xquery.js","hash":"b2d74297327090ab18324e81e205c7581dc03144","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/yaml.js","hash":"5c9c977cb4a4ff23d9f8f72b631817bafa7d986b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/yaml_highlight_rules.js","hash":"3505ebd447435fc98a107d60a23510a61dfceb4c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/ambiance.css","hash":"4ee73780a1d28134b829cf4c37eb4a7978fff3f1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/ambiance.js","hash":"d4e40cf9c72b22cd1a1947077f6eecd02f0aaae0","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/chaos.css","hash":"1096352d8c3712ed26c030ea32a24f70adcd4cde","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/chaos.js","hash":"d22b9057371eb5458fb16f8c7724adafe2523759","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/xquery_worker.js","hash":"a75d03aa9e0bb4deacf9d02132290a70cab4f28e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/chrome.js","hash":"8e0195b457171fc58793697126128ae06a93bda0","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/chrome.css","hash":"0d5c5c3c9beb5216a19871e4480c3cd1763207f3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/clouds.css","hash":"374d2d94cbe7e856115686b44a669203cc2c8316","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/clouds.js","hash":"671456708b798232338d497da469e757e78848ef","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/clouds_midnight.css","hash":"343c8df1d4f1a949df10427c28661bf3b5c497d0","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/cobalt.css","hash":"dfe9588c5a7b198ec3f99083e12db8df8333c85a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/clouds_midnight.js","hash":"c1ec39cfe9fe400ef4c1a7d0d67c58add648e81e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/cobalt.js","hash":"913ffce77f8c0ec9ca9ec57cf55d43e1edda17be","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/crimson_editor.js","hash":"284a7be4e4c1d0d4b3068523af05802583f0dc46","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/crimson_editor.css","hash":"35796af7bfb4839183af2a40621c27eac0879327","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/dawn.css","hash":"224d209f2df9e64ae7157c49273078a913a87a62","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/dawn.js","hash":"734b5702ac34bd36e241f2a2139b9cd96ccf9970","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/dreamweaver.js","hash":"1cf088eebd719730101aa1b7e7555933129246c1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/dreamweaver.css","hash":"73bd036fdda397f12c932ee73ef88e2539c1b219","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/eclipse.css","hash":"94b60dc8fea8a5788d166b0b9047c1e1758e6ff4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/eclipse.js","hash":"e844df14e6665fd9f72741b245b9927cfa8705f1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/dracula.js","hash":"9ac7b1444fc96a0767b62f39bf39d8c1c897a2ea","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/dracula.css","hash":"b3f9de7873bd8c4a2fb5313f6f2c46cf8be53a50","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/github.js","hash":"818e60abfb7f8552084bd37385fba899fed17961","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/gob.css","hash":"76f610933c67a760d01725e8c3558634f621ab6a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/github.css","hash":"010a0a30b23e5da930a5a0f3892f5812c6f4f0f4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/gob.js","hash":"84d533c39b78d2b8d0e8a30c7fd36906857853d2","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/gruvbox.css","hash":"0bca3e3a46c369b407213c90d4e68f002c33de7b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/gruvbox.js","hash":"758ffb5dda65cac1af787bbc9c3bebeb4e03e792","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/idle_fingers.css","hash":"45d6b81be497283bcd41fe56543ac2da588fea2e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/idle_fingers.js","hash":"b0b91d0aa985820f81847a42ff9cdefc756903a7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/iplastic.css","hash":"7c2821d0f782aecf6386253ba69bab58fd776f95","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/iplastic.js","hash":"8399634c0ecb119f1965fd0635f02f4398e440c8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/katzenmilch.js","hash":"46e37945e466703d2e4724dfbe5b01cb16197cd5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/katzenmilch.css","hash":"a77ed9a14de28d843a8bbbf0ce347ed68d9cae05","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/kuroir.css","hash":"b117002c125ce360b97357e67965dcf3e2ce76e4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/kr_theme.css","hash":"1cfb1bfd0ec7b7a3595d6fdb00eb10b8d252727e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/kr_theme.js","hash":"8ff1150f438504c64234c4ed3fce99f5ca2df9a6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/kuroir.js","hash":"e44d4bf35c4aa854295dbcd367137192adfbf47a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/merbivore.css","hash":"4da5d6031cd89380c68533b7dc8b09bd6fd5b56f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/merbivore_soft.js","hash":"2c2d591e214c1124b9558a676472fe8c643ba46e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/merbivore.js","hash":"500e38b27516042b078612fdd60f687eaeed085f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/merbivore_soft.css","hash":"53eb082bdf9cef3b499cef907e788c976e83c030","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/mono_industrial.css","hash":"f6adf553add749602f7130f2ca60302436bd8808","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/mono_industrial.js","hash":"769b0ddc8048eeb3c766f162fa631c6e51652f65","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/monokai.css","hash":"e7fc64f16b39a283031229b6b7507d45e4737700","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/monokai.js","hash":"39cdab3f4ff4752075b51a1cd95e8a49e905f16e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/pastel_on_dark.css","hash":"62789239f328fae5904cb2cc5d74483f9c71c7fe","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/pastel_on_dark.js","hash":"722dd97e4e59f7f3fcb069fb12e294e8b0f91744","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/solarized_dark.css","hash":"552a49f5d765fca8186d5160855fca38800c3f0e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/solarized_dark.js","hash":"38ee65718e8b42508dbefe7d4279fc7724520108","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/solarized_light.css","hash":"6ce2139e395cc32837f6c39bd931ea649111095c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/solarized_light.js","hash":"0f3b9a967a0e623e9a0cd15bc4158ee79c7f21e0","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/sqlserver.css","hash":"fbf0ce9f2dff74151078ad9842bc713b1d84d2b8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/sqlserver.js","hash":"4ae700d3f204adcaf2e68a965c4cd884fb2c2e8c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/terminal.js","hash":"ce5fdc94898254b02083f60ca14c55ff342cc7bf","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/terminal.css","hash":"f9c5c6d3b6851eab5f2c49479ac27314c752c31d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/textmate.css","hash":"5920d4bb4bbb5b6f57ce8f5a08e8c8a57051ba8c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/textmate.js","hash":"b33cadbe999830a0900ed4947f5b7115b6b8a082","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/tomorrow.css","hash":"04a951001627ea3ce3966751e236e175f8b1edc1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/tomorrow.js","hash":"efec353970da69810d95cc0a4b3a411c204f48dc","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/tomorrow_night.css","hash":"7acf0b6373f82ad0fa4d9597f8cbcc7aa6eade29","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/tomorrow_night.js","hash":"c8cac9d171a06ad000cfc8ca938fa6f4b6499867","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/tomorrow_night_blue.css","hash":"6e99ac7c492536c2c3619996861c6136b7b78be4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/tomorrow_night_blue.js","hash":"37f68879e05b7e64322021548b7cb07e08385946","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/tomorrow_night_bright.css","hash":"48bf09d5ae3c3bc5f33c2f64114a05adb9d49da0","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/tomorrow_night_bright.js","hash":"d320bff36c018b440072a8a76d4c4766e433917e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/tomorrow_night_eighties.js","hash":"fac96b0081920d9ee9680396caf8766561aaea6c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/tomorrow_night_eighties.css","hash":"c68fc42351e29162e86da1556a8597f067352940","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/twilight.css","hash":"d91c08e6097f666169f49d52e2a03218354f824e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/twilight.js","hash":"1acbd392e0d9bd614fee1ac87261948efe0959b7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/xcode.css","hash":"4063bc6c438e27eb36e583f3a756fb225059ced7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/vibrant_ink.css","hash":"945903619c75b498d3534763595612eee6773cab","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/vibrant_ink.js","hash":"fbea7b03e3f097b5885e6d3a280129172dee601c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/theme/xcode.js","hash":"315715dea2ef16d8219cdcdbd082003aed4a8f0d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/worker/worker_client.js","hash":"a13cc07c53833eed120a4b2515504267634623f9","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/worker/worker.js","hash":"0f828a9be924aa7565dc84c625eefa28f9f6c305","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/worker/mirror.js","hash":"88b4399eaca0cc6d80f0ef97cfd64de6c2386769","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/worker/worker_test.js","hash":"61857001a5625f28fedc54446b709da103896360","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/_.snippets","hash":"9dc90ded3bae0f839a68d0635a7f20707d3527b1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/_all_modes.js","hash":"6beae895b12a67ed3ee5d72ffc81f6b8baec2282","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/abap.js","hash":"1f4e4d06b1a1adfd8d59b6785abbf605eafce81c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/abc.snippets","hash":"db97fdd26808c16b83f130e999452b768e38b1fb","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/actionscript.js","hash":"d8c32261349cab1824b9ee0b12a00aa114eb4ddd","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/actionscript.snippets","hash":"5464feaa164c08801d3ecd730ec7d19011874c6e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/abc.js","hash":"1b0c7598e41faa7133b409a2ff42df3f5c05a00c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/ada.js","hash":"fc95e37af074e9d15175778c01044f5b9fba1000","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/all_modes.js","hash":"24d4b165df36a8a8f52b15c8ea2c1625a0391583","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/apache_conf.js","hash":"22ab0da71165b17811b32f3955873be9c6b02da4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/apache.snippets","hash":"ddf20407ef2c959a4a45eee84c30910e64fe2b67","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/applescript.js","hash":"b761a34db47f6c6298e249df485a471ffb438cb3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/asciidoc.js","hash":"976c260ce9f19920bf4ca6639950289bfb50530b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/asl.js","hash":"e9ccfcfce9cfb16b77314d3a49568cef014d81ba","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/autohotkey.js","hash":"2b0eab8a19e1fbcb9982a849b92a0acffc263245","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/autoit.snippets","hash":"bbf9d9c4bded0625993474d0077229394b8bace7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/assembly_x86.js","hash":"2a8af6f407e342e7d4a89e9ca2f154c85192364f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/batchfile.js","hash":"bf0fbf8cf27f2fcec755deef2866e1ed94f44aef","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/bro.js","hash":"962b995beb7259376e2b4d7c3684ae131bb4ffec","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/c.snippets","hash":"50d8b3bf69725b9c1695002878d83298a8cecca8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/c9search.js","hash":"44d8f51a90ebbb5afafc08fb9238257c0ad49ac9","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/c_cpp.js","hash":"7d3241a0709e46f2b307ae82bf39364eac1cb340","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/c_cpp.snippets","hash":"11353c5b5ff4ddfd3cb3978c0ed20888fbbbb56b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/chef.snippets","hash":"a2cabfa97ee85db77daf455badc7ef02a9f78a15","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/cirru.js","hash":"bf9ff7d3cb74b2faddf729625ef1b33e0280c4f2","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/clojure.js","hash":"52813131b4e58be91321a252af820bcec40542ea","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/cmake.snippets","hash":"26afbc5d2006a574c928b95238d983f4de253415","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/clojure.snippets","hash":"023d711bd36b8d0361c3ba40e775427e15a877b0","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/cobol.js","hash":"c7944d3710ef6a5161069280abeb0112cb120c77","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/coffee.js","hash":"1c46136501d22b764691d1fc74749509c6d6a001","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/coldfusion.js","hash":"53795dfa5af5b41ff9025f2db336636b509b6282","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/coffee.snippets","hash":"0904c577411fea04a536beec07b180059f08c19f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/cs.snippets","hash":"d35328b4477c8ffc1798464eab3f40fff660f1b2","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/csharp.js","hash":"0d465bcdf2967de8cdb9f9c2f7ab1fd144cb63a8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/csound_document.js","hash":"2640fdfdb36b4c15d182f15870d4458cd192aeec","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/csound_document.snippets","hash":"191fce78919fc7db3028eea148240838218a2b93","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/csound_orchestra.snippets","hash":"c5d18d26ca75a3e0946aa454207139da7591aed5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/csound_orchestra.js","hash":"90d07fd8e71acceed2446cdce9509c443d00b1fb","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/csp.js","hash":"962b995beb7259376e2b4d7c3684ae131bb4ffec","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/csound_score.js","hash":"25e2de992e218d3e619c6b45ea1bc6d4a8fe0343","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/css.js","hash":"1dc61b6c9213dd5cabe691affcf24fc922a6fb5f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/css.snippets","hash":"865519eea510e2e9e0bf3ed5a4379a329a100dd0","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/curly.js","hash":"ca91a9fb6c4f0b7b678c95fd689f32b7f1aca101","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/d.js","hash":"4866b96f14eab4cd8d10f6ea7a3d4f588a6c6d4b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/dart.snippets","hash":"8a5dd5fa36c04fefeee0cd3f11bb61c9c5565cce","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/dart.js","hash":"39f6105558a059be49a261201b40a00271ad509a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/diff.snippets","hash":"f8c598ca623664416cd2c8ff0747f36716addf93","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/diff.js","hash":"ab349720f685b26f29b52475d6dd504b49a4d516","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/django.js","hash":"b5a1a49344c3363eac6b62a643f94a5fc01d7342","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/django.snippets","hash":"170b4cf9bfc993dd43c10277063cf1ab195650ab","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/dockerfile.js","hash":"be5aafc47f904af38e7546b5a72182ee60edfd39","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/dot.js","hash":"9fa065ab718156a5a3703e1125578578c3b7af48","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/drools.js","hash":"144024153b2f17501ded658c25b2084b0b173994","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/drools.snippets","hash":"f56b9c11973bd0191eaa7c156c982274c064b7b8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/dummy.js","hash":"962b995beb7259376e2b4d7c3684ae131bb4ffec","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/dummy_syntax.js","hash":"962b995beb7259376e2b4d7c3684ae131bb4ffec","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/edifact.js","hash":"65c706e324800f1b63f048e647ae138bc5aadfaa","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/edifact.snippets","hash":"3d07e0cf9aa90d251b70468a4444761c763c4d7e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/eiffel.js","hash":"f23a5473039bb4bc7d0de7f9759d2196d46fddfe","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/ejs.js","hash":"e6bd2ddbb00e2c8b4f94c79c66407081b3692d73","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/elixir.js","hash":"962b995beb7259376e2b4d7c3684ae131bb4ffec","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/elm.js","hash":"ad14757947b69b6174a2bb74da6f94d649cb1edd","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/erlang.js","hash":"a9f2b68e701dc401a99e6298ce78414e29c66961","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/erlang.snippets","hash":"bcf27e3b3eaac9162b1ce6ccf244bda01b1e795b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/eruby.snippets","hash":"8218b76aab74881a41ce78faa7ae4e920b9b8373","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/forth.js","hash":"3eda538962eaa29ef2a62115eee982e14a4f8b83","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/falcon.snippets","hash":"5da0c04b2cd6c4b0827fab550bee4a9214403f61","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/fsharp.js","hash":"740e1db03ecf887a00c63b8cb809acc7fb5e50fb","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/ftl.js","hash":"75288b4851967e4191acdb1fd97a96bf8685461b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/gcode.js","hash":"c4a59ffb86f30309f8fe7ce6309da28a98e5232b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/gherkin.js","hash":"9f3c0c9c7351fb4f48604b2cc2bf00adad0b632b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/gitignore.js","hash":"a976593e8e5ebead4a817e518ce0ca995badaba3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/glsl.js","hash":"cee64770aa935e6ec05cdaeada3a4cd2c598929d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/go.snippets","hash":"da64fa164eddbb3bddf3f284dd9bf624b836cc72","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/gobstones.snippets","hash":"a89930104e0fd50fb7e0aadea5ff5f2978d1c34d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/gobstones.js","hash":"22a67409160f4a464c8320ebe1f6239bc6d6c7ca","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/golang.js","hash":"1cf1cbd1e3074122dacd2b205e3c9fc763b7f086","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/groovy.js","hash":"e52ef2e3648eb782083dddeb16a997580b38cda9","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/graphqlschema.snippets","hash":"a5704f9d7aaaa7de1e15038a8c63b6bc746aa89a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/graphqlschema.js","hash":"8b7d9c095e7cc58819471f39e47e0dbf85187fa2","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/haml.js","hash":"338fae0b43d24a936230f569ad5afb7b86ce76b4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/handlebars.js","hash":"3c8333dbc89f641984ef017b4ba655d2ac886b0e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/haml.snippets","hash":"8e2e502911bc51039ed151a065092350d59c1924","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/haskell.js","hash":"680d5e973ac3228a83ecfa0bcb7b72162cf0c950","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/haskell.snippets","hash":"0755397ccd8e216e4204041144fc141a0894748e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/haxe.js","hash":"fcaa8706333f32f5713aae2ce2b3ba455bb586a6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/hjson.js","hash":"962b995beb7259376e2b4d7c3684ae131bb4ffec","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/html.snippets","hash":"58e170a5f7e69feeb877b196c5f5607afe9705d7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/html.js","hash":"3c3debd7fd1282541fe32b7cbaa14e4f4755ba2a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/html_elixir.js","hash":"52b5f91ed63a27a5b69225d55fd220feec76bb83","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/html_ruby.js","hash":"e60c51caee133783bafac3b66b7b576ee2c80530","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/htmldjango.snippets","hash":"68478b906a0cc96aed613e7b250903e1281d8c59","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/htmltornado.snippets","hash":"e5a26dbbdd3267a88bd8c155e64180f081d18b2a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/ini.js","hash":"4dc69a79689ac5bee485af562761d6d8733205fc","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/io.js","hash":"5dd8113277c88ef5f2baa6ce45d2567fbf3f31c5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/jack.js","hash":"2df38194f7ac4e5ae562add987508148d1bbfa1d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/jade.js","hash":"88d159ce70d6aeb8b2cb2023c6c9a218e5fcd0e5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/java.js","hash":"2831a096a1a36b58380cba1548ebbcea849ad96b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/javascript-jquery.snippets","hash":"a8e0863d8a02fa779d08f19da443fc72c8ec1a7f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/java.snippets","hash":"c250cba7dc2224b789536dc135b3de2a2f6fd97f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/javascript.js","hash":"dbcdab302609f1b86114efee1b5ac579c555370f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/json.js","hash":"731409474647e50423749a234b6624d07d1528c2","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/javascript.snippets","hash":"b89c9a0cbc6dd6f39a4a3e29f72e0a1075225237","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/jsoniq.js","hash":"8c5069858291daac9437645ec4198d2c356ce1b5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/jsoniq.snippets","hash":"3254d011094bb9fb3f6a4bd218f61e5cb52a4251","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/jsp.snippets","hash":"82429ee9a81ebe8d89f6640634edee08690764c7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/jsp.js","hash":"fdc44a99885e81e2fa6c6dabfc936f1ef5ca4ac3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/jssm.js","hash":"962b995beb7259376e2b4d7c3684ae131bb4ffec","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/jsx.js","hash":"72b8cb938f486a44c967ac5df73fc7e43afa215f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/kotlin.js","hash":"962b995beb7259376e2b4d7c3684ae131bb4ffec","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/julia.js","hash":"63b0a9b867c6742238977a5a08d05cf5597cc38e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/latex.js","hash":"7e8de74147e689c3970e7e7075fa8f3016dfb591","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/less.js","hash":"f1118ab5acd1d498fd66dded358be2e750a844da","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/ledger.snippets","hash":"50ff9c402014f6c2a321e240ecdef411c47a1394","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/lisp.js","hash":"4579e65a8578a730f6ea0821c1d4deaea0463ad8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/liquid.js","hash":"c8f82fbbd9c426f63029a74c482507bd9861494e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/logiql.js","hash":"3aadfdc4e4f4bbc203cd24d3de4efc5e3da93767","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/livescript.js","hash":"5d6227027216ba881fa4d231d942dc73d7d4a492","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/lsl.js","hash":"b9e3830e948ffdf5c8bb068ae769d9468cc902df","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/lsl.snippets","hash":"54f77ec1a3b2302a49d37dab345207a0848fd47a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/lua.js","hash":"11e3ec503f36dd84513788872bae8cf109fc4ed6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/lua.snippets","hash":"4f34353a2de6a9e893a960e9d3e2fd762cffae77","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/luapage.js","hash":"d4ff79994ae5a2a7e6e4092dffa9d6314cf0dca6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/lucene.js","hash":"4245fdb9ca06474236f395c3a64cc622a8138e04","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/makefile.js","hash":"0ee05888c90026f6cb102444f4684f2b2fbe8940","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/makefile.snippets","hash":"a72c4a70d6a8a657c58a25e6d0d539f4d7e32719","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/mako.snippets","hash":"969b86af6aa1a8a689d426b698e10cfead6e546c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/markdown.js","hash":"d6664b5ed02bc72fd469b1406605bbdc264a9f41","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/maze.js","hash":"bd568d867d0d2dca91125b0dc333422fd1d64b9d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/matlab.js","hash":"528347353f4acdc895c6ccd0e146527d614d5dc2","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/markdown.snippets","hash":"0b0680baf37274c97c7dcc0781510e5d5147d860","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/maze.snippets","hash":"3a16b010e793c41218ecc2f86d2da659137c9135","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/mel.js","hash":"5ff9d4a2ef3c59bf29e14010cd308d011c80fdd1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/mushcode.js","hash":"aaf379b1426e6bdf2f9d51b5b754be53e1026dda","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/mushcode_high_rules.js","hash":"1a6cd62288bc4f4fcdc7e131e82816d956ceb3cb","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/mysql.js","hash":"7cef4385364a137440e3dd8bb2953cf7156d609d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/nsis.js","hash":"962b995beb7259376e2b4d7c3684ae131bb4ffec","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/nix.js","hash":"40fcf809c0b337f19c9d322ec1e0170accd277c5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/objectivec.js","hash":"1eeec0181690c5c3036e270758f81cab54a1dc48","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/objc.snippets","hash":"8805e1513e14f62648eefdd8eb6aa7714ba00ad2","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/ocaml.js","hash":"609b054794af524c86262a3dea6af6f79cdb9a23","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/pascal.js","hash":"62376e9ac030d4abcfabbea4e9a3ab646b51dc97","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/perl.js","hash":"8da9fe2cf436bd949ac316d9feca9fcc518a1a83","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/perl.snippets","hash":"db957139a350dcf7b83f7e78f3ee5c4a1f26ffda","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/pgsql.js","hash":"0c8b6e1de061ea108bd5d2d19008d3c20bd9f96c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/php.snippets","hash":"4aa371052aeda50380b666935f940e65478d4ad3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/php.js","hash":"cdfefa0724d999f96934a5606166450894dcb16b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/php_laravel_blade.js","hash":"25e62f64fe33517ab8aa8787cc6a5c2accb51435","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/plain_text.js","hash":"0f674426f0720c077121c8d0a1a96baa4594b298","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/powershell.js","hash":"48e767924747c73c9675bd15ed9204333b818f59","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/prolog.js","hash":"1688eb6708ef988e87d985180d0cb6aa075c92c7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/praat.js","hash":"3912079f00ae63598e42b6bd00b26a5013f59a58","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/protobuf.js","hash":"ec2dcc3ae81f160bb508e7eda5e11b20df450e8e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/properties.js","hash":"073a99bc2017db676f978c2ed5034796dcbed9f6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/python.js","hash":"0a456e6a06dbca1f3269c577e267be38409b8ec3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/python.snippets","hash":"b92159b7ef4954a6a6f96df887d9e393106a368e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/r.js","hash":"c8de59fad327637bf5a7db6b648ce4d4d9976490","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/r.snippets","hash":"141f9d2b9a16a447d4de9633c3e6b660164bf4cb","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/razor.snippets","hash":"33dba4f04ac7da559540bf65029a3f652ff72719","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/razor.js","hash":"c18db77cdec4ba753cfd9db3775baaf9a9bf8eaf","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/rdoc.js","hash":"5a01d1b02169d35faedd9f6d732ff279edff495c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/red.js","hash":"89e8393c92a78f9ab491708d8573f7e6c445e084","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/rhtml.js","hash":"b04da5ec4907bc1b1f540e78c57d18eddc2e8a08","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/red.snippets","hash":"b858cb282617fb0956d960215c8e84d1ccf909c6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/rst.snippets","hash":"539e86e31d51b4b4d89fb9377ed0011f0c6999ed","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/ruby.js","hash":"25c710f3e8273abdaab7975602153c18fbe064e4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/rust.js","hash":"32973722c8e5bc1b09ed1aaf4d0b49f95b6ff4fc","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/ruby.snippets","hash":"a1f7f4646e121ec68b2a63ce552e43153c4b65b2","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/sass.js","hash":"5d79c15efa40f2f10f1e7021f786e54be7e669a9","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/scad.js","hash":"527e28a3d9bdf9deb684a24c5430cb7f4f53da96","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/scala.js","hash":"567998ab6dd5f1420d76345f37c7ed751cc2026c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/scheme.js","hash":"d90b23ab179c59a3298121d2a7eb46796db0554d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/scss.js","hash":"bf3e1fe81ed3def7ff661a7e03b286895256cb9d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/sh.js","hash":"8c5d95879b685f41bd0a0ade04fc7f099ffaf69c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/sh.snippets","hash":"b99aea6b89cda999e81f0c167cf350c14e43ca9c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/sjs.js","hash":"6857f053906bc74a8381b3b0ec81ce1c5cedd1a9","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/slim.js","hash":"7f0043c34d255678cf0c0eeb8f302d93549e3ac9","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/smarty.js","hash":"b19dbaeb86f6be7098bea74dd099deb7d363218e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/snippets.js","hash":"8281c0074583c644ef96a7840ee07b776c7bf5b6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/snippets.snippets","hash":"f54758ee9c7ac3cfb7b6bd3ef66768bdd13b97f1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/soy_template.js","hash":"029143992ed2ba09abf8b1ff103767c422377fd5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/space.js","hash":"a8d7ebbbde2afee4507eb7351d1c4f621931f799","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/sparql.js","hash":"962b995beb7259376e2b4d7c3684ae131bb4ffec","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/sql.js","hash":"0605d86373f340e030afee08783432771aa866b0","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/sqlserver.js","hash":"c75ef89fee51b6d1bf1e671cb15928e0a080453e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/sql.snippets","hash":"0022e7ad1489ccb9f4e3e5a1290a6ce8f6d387b1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/sqlserver.snippets","hash":"0b9ec0dfd69fd77bece9ef19327e355a2d93cd79","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/svg.js","hash":"86599de0810acbd91eb7ac1e4d6b00f8ce065155","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/stylus.js","hash":"36d643ac6b6d7c75a25b09d1aefcbfc96ccb898a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/tcl.js","hash":"0d5e7d51796a6730ba503d016a65bd8ff9d430e9","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/tcl.snippets","hash":"79debf1a5cb8f0367239fe969d1d6cddde48e55f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/tex.js","hash":"53f886f96afda5c2074145b6bd57af2c8d594503","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/tex.snippets","hash":"0069769daf074ba13ad77f5aff603f1c4340efa0","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/text.js","hash":"43108544ca1713d2c87b711cb9479be94edcb36b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/textile.snippets","hash":"20c3f8cce339bd12377f6f3843b54b43434a2d0e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/toml.js","hash":"95e46c4fdbe4578363394cbf94235cb73392d3be","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/turtle.js","hash":"962b995beb7259376e2b4d7c3684ae131bb4ffec","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/twig.js","hash":"3f33fb22a8564bf84c632a47837b5324179f773a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/typescript.js","hash":"af222b3bb2b55c604d01795770bc8560da576679","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/vala.js","hash":"bd8393e73681a3c097c86808a09bbe9b3791b992","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/vbscript.js","hash":"a4e6b7791d10c708f6a882d7e0b22822a367e7a3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/velocity.js","hash":"bf1f9ec597fad276c15d746be483cb023c90b506","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/velocity.snippets","hash":"a76cff7ec4778105428a8418aebdb4304a71d9dd","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/verilog.js","hash":"3aab404d84bb40e667b752c01ef15e2220a17510","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/vhdl.js","hash":"ced8be9092d2253c29c9ac73431cf00d0abd37d3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/wollok.snippets","hash":"ff3476a6b88493fe5dcf3da986cd402ac3d237d9","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/xml.js","hash":"d022b29110a4be4706055a594ae623fb681a84a8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/wollok.js","hash":"3994d99ce6fe32fa86489dc58616e3aae9d83c9c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/textile.js","hash":"88f7e37b98f3f774a63b727e7b0a1d68666dfaa2","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/xquery.js","hash":"e510bc039226f4dc5638af61f09a7f5143a1c232","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/xquery.snippets","hash":"3254d011094bb9fb3f6a4bd218f61e5cb52a4251","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/xslt.snippets","hash":"46405ea2c346fb6658a0e87bb8f87894568d4f8b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/snippets/yaml.js","hash":"ee433cab3ea2bbc0ef8818eb417dd24a0556a52b","modified":1598024585000},{"_id":"themes/yilia/source/layui/css/modules/code.css","hash":"25d585c054d7a5879fa6b7477dca64e5b3baa054","modified":1598024585000},{"_id":"themes/yilia/source/layui/lay/modules/carousel.js","hash":"be2aa5f26fb8bbb0eddda34be905c5cb758aae61","modified":1598024585000},{"_id":"themes/yilia/source/layui/lay/modules/flow.js","hash":"ab2956bda824d257212f81f3473aaab8d79e6b94","modified":1598024585000},{"_id":"themes/yilia/source/layui/lay/modules/element.js","hash":"a6bc896aa30d306a6e21368016ec08c32a0bebbe","modified":1598024585000},{"_id":"themes/yilia/source/layui/lay/modules/code.js","hash":"359a653d43cf3d4817a3d3c68c6a3deb1fad2b5e","modified":1598024585000},{"_id":"themes/yilia/source/layui/lay/modules/form.js","hash":"658fdc98675180baeb4e52e49a81370eacf8462e","modified":1598024585000},{"_id":"themes/yilia/source/layui/lay/modules/laydate.js","hash":"2478be6e1b39194424e40ddbde70bb96e73c932a","modified":1598024585000},{"_id":"themes/yilia/source/layui/lay/modules/layedit.js","hash":"4e91702cec15021622fc646decebc53a403c29c7","modified":1598024585000},{"_id":"themes/yilia/source/layui/lay/modules/laypage.js","hash":"fae5f13de7103c3231010d39792992427418235b","modified":1598024585000},{"_id":"themes/yilia/source/layui/lay/modules/layer.js","hash":"b9adbb3d6156c8afcb7ffb5e785d92bf8ca74b7a","modified":1598024585000},{"_id":"themes/yilia/source/layui/lay/modules/laytpl.js","hash":"03e49bd63a4465fcb06730da5d53a1bd6494ae2e","modified":1598024585000},{"_id":"themes/yilia/source/layui/lay/modules/mobile.js","hash":"d23fae394c21aede37650cc2020d1acf20ca02e4","modified":1598024585000},{"_id":"themes/yilia/source/layui/lay/modules/table.js","hash":"a10e78d08768940f6279c36e0aeb249d1d2067e5","modified":1598024585000},{"_id":"themes/yilia/source/layui/lay/modules/tree.js","hash":"ae50a18afbfbc67d536cef1c541ff526077efc51","modified":1598024585000},{"_id":"themes/yilia/source/layui/lay/modules/util.js","hash":"4e7ba8ffd2aac1558ee4b0b94c7668470602ec71","modified":1598024585000},{"_id":"themes/yilia/source/layui/lay/modules/upload.js","hash":"02220d2475fa17b27a82e118d4a527f4c1c08c4f","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/0.gif","hash":"87db440c06299666a8a1f407a6008c5bf6d70817","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/10.gif","hash":"04fe5b26b7e2c980d12ad7157a4ce908c2a74f14","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/13.gif","hash":"0afcb6c47cb53fa4a8467d7d7bf00ec464df2f8e","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/11.gif","hash":"170c2e16dd383e26d9d68406eb217dbf191ea14e","modified":1598024585000},{"_id":"themes/yilia/source/layer/mobile/need/layer.css","hash":"e11ebb64a70272c4f35b92fea064f27c4b87efad","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/1.gif","hash":"e6da9a45ecb8c766a8f7c2362ccf2976d20d17a9","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/12.gif","hash":"f5da3f33448e67537e3df8ff63b010247b06841c","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/14.gif","hash":"1af45520e97328498b1a281b6955df5029fc9679","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/15.gif","hash":"a0f216d0aaaeec369109e4b581eacd4e83e5ccb6","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/16.gif","hash":"54db2506b93b76c58174177245dcc6ef3fd0591f","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/17.gif","hash":"0b88c01b477d4ca98eb99a665c0ab8738551aeec","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/18.gif","hash":"eeee84a351d6e84d291b0c27e5d70014a3a2748d","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/19.gif","hash":"620b2afa4c36cbfdd09c57807d8a662a5267ea51","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/2.gif","hash":"43b3ca892341431f697e1326aa693c1f252922be","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/20.gif","hash":"7f1cefe1db5c5ee6a9b0eea4d9618cba4b1ac790","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/22.gif","hash":"dcad257d86505e921618f7d85b60bf6ac2ce319d","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/21.gif","hash":"86d3d5273ffd13841d246698eb648d85e178c4dc","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/23.gif","hash":"43295056d287f3da526dfb77915edc3de7551e3e","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/24.gif","hash":"02a263028625496740eea9a50141a4ad98d826a1","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/25.gif","hash":"05eeb7a9c42a2cd3876417944143078ce514a8b9","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/26.gif","hash":"153c5f602881b04bed23d5c7d21a977563075ee2","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/27.gif","hash":"814bad015177103646b0216367fa9707361998d3","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/28.gif","hash":"5830d72546907c962b6c9003fa923798a67b0406","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/30.gif","hash":"886222551781040325cfd3307fbfba2a1d434a9e","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/3.gif","hash":"339482962bc4995e16e99ac9de9fc067636fd79e","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/29.gif","hash":"ef1d583626e7447f546995a5b296f34eb3364902","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/31.gif","hash":"29043ca9d16adf6574d4d7efde1af7a615689931","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/32.gif","hash":"9af01aea73b614e5820a00bcc890840493f9dd70","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/33.gif","hash":"5f02bc5ec8d6220a872f1ca1fa2abaa92d46c361","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/34.gif","hash":"e0e500feecd8274490a3bdbf64d2555c16a86261","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/35.gif","hash":"141ae180796db9800770dc9dbb8c9beda6f170e8","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/37.gif","hash":"850b9425421c3072a4898154d41776c02a4d64f7","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/36.gif","hash":"55abcc242354c9c1c73538db5d8c7b984de5ca52","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/38.gif","hash":"336cb3cbe0fd6cac96cd7cd5ca847c6a01f95b50","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/39.gif","hash":"6380eb13d87fc4242d2c6eec57f482ac8ca1ad1f","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/4.gif","hash":"878c3da67e6aec79c9b8dba6f34368586f4bd097","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/41.gif","hash":"c37fb5c43ea499a005d88075a392ed2e09c331df","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/40.gif","hash":"c1b0fef186697125b66c1b4617fa3f9abc4d92eb","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/42.gif","hash":"86f11fca6a9c42d3678ec8af35c077a9790ce777","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/44.gif","hash":"32a9fa973626a3a06646095aeeecb919923f7d16","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/43.gif","hash":"6a16279bea1179b3fd3a45736ecffd983a42272d","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/45.gif","hash":"864dfc9b99f5641f6d5a0081dc14d84872c1b3c6","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/46.gif","hash":"b6c74edb2dc383e0f3e28a0859fa87683fea18e2","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/47.gif","hash":"653e07693ee719cafbce662bb5e410646fe4695a","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/48.gif","hash":"8a8483cd4e3b4b6ac0567eab41c5655ace4b3a81","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/49.gif","hash":"dbf616c5537074ace036340bdddf7948c138c3d7","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/5.gif","hash":"cf43cfcf14bbc7f8e430b74a97eb3b260f16b08c","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/50.gif","hash":"94a521d4f9a69c4eb59f5bbe673c8803246bdf5e","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/51.gif","hash":"1ef1419f1ba2fd28e7de676ae5c388074646be53","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/52.gif","hash":"b516f6bd28cee1fe34144d897b702989782be4ec","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/54.gif","hash":"75c738c517217f6b09d51ca3036cf54a01891c4d","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/53.gif","hash":"a03f9bbb0202d24d3313286f60ce08b214c013d2","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/55.gif","hash":"c446b5eca2cce1faa7f2147a8b646cc774011de1","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/56.gif","hash":"a71c1ef36706c4ddf7959c68d6c40920db3efe67","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/57.gif","hash":"b797ac8509a8f8bc328b10153e0026449a6139ec","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/6.gif","hash":"697d8f2262c535cd61808a564b21fc10ea93f0db","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/58.gif","hash":"5c70cba8adb0b42c0da4d922498c265e5d8034d7","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/59.gif","hash":"c50da42e6f2ec33112261f46c30e5ea5b4a0f889","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/60.gif","hash":"bdb24b7ec836fbf6c60c4d7ad97d73f041a154a8","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/61.gif","hash":"a5db56b975970ebe7048a5c824604d64559392b9","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/62.gif","hash":"a839a263600c034bb11411a7f762dfa917155d10","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/65.gif","hash":"93cab4423539955a25d17c83da6aee277a6402aa","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/63.gif","hash":"28e9ec7a3882fec8c63dd731b06a9bbcc179aff7","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/66.gif","hash":"6efe452b1f7a697db1c654130a9c2b872f528654","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/64.gif","hash":"38a537e9ac930736e162be81c13c5f708ff948bd","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/67.gif","hash":"50e2ed8f7773e60ae7d40b612db98554b8277b6e","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/68.gif","hash":"e779199003a7415a29d50ecf0bbfed04e031f1ab","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/69.gif","hash":"76ac840c5bc5ad44302daa921e7217149576b89e","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/70.gif","hash":"7c2641bef26579d9f90bdc0b740357527dd6e484","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/71.gif","hash":"c6323d6d6d262011faed18e758e9e83e7b6812b8","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/8.gif","hash":"43baffc48b0fbe649ed920bad713e2ccab9b7344","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/9.gif","hash":"8df9fc1055efeffdb72d499c064c05445adaa9be","modified":1598024585000},{"_id":"themes/yilia/source/layui/images/face/7.gif","hash":"ad4e2ea1864a85f5729a1347c2f8c49fdb3b2def","modified":1598024585000},{"_id":"themes/yilia/source/layer/theme/default/icon-ext.png","hash":"ddf2a30ad34bac4e9a1250f29c46ac0823d62a12","modified":1598024585000},{"_id":"themes/yilia/source/layer/theme/default/icon.png","hash":"fe47ec617507e9ce5f6ce7ac9b179a3c9231882b","modified":1598024585000},{"_id":"themes/yilia/source/layer/theme/default/layer.css","hash":"9d55e153b30fd7414fada5718e20918e9c7f65e7","modified":1598024585000},{"_id":"themes/yilia/source/layer/theme/default/loading-0.gif","hash":"ba81388bbac5bc223f94489b97a95a13f3c78e47","modified":1598024585000},{"_id":"themes/yilia/source/layer/theme/default/loading-1.gif","hash":"49e54acbf5674212195e581848ec0d490282448f","modified":1598024585000},{"_id":"themes/yilia/source/layer/theme/default/loading-2.gif","hash":"c641615e851254111e268da42d72ae684b3ce967","modified":1598024585000},{"_id":"source/images/bjsb1.png","hash":"36eca53e0000ca0016055ce1a6023646499f780a","modified":1598024585000},{"_id":"source/images/mapping.gif","hash":"97e19ebfdd5496159370cfa5e8cede4e2d4f5a5b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/php_highlight_rules.js","hash":"1a2459c41331d77b4e43ec0968b887d326687853","modified":1598024585000},{"_id":"themes/yilia/source/layui/lay/modules/jquery.js","hash":"812e07fc69c8f843fae4ebd4aa7289c1aeabb458","modified":1598024585000},{"_id":"source/images/chuxi.jpg","hash":"72e4a105f1095159ac0c25eccc2f95e7c18434c7","modified":1598024585000},{"_id":"source/images/elk2.png","hash":"7a0de373b71974eba20812dd9c9c671c2d753b4d","modified":1598024585000},{"_id":"source/images/pm2-monit.png","hash":"03bf5dffce27630ea9641245fd4a17251e6f9a23","modified":1598024585000},{"_id":"source/images/uncomplete.png","hash":"7ca728936a5df731fa8585c027fdb804208eb085","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/menu_tools/get_editor_keyboard_shortcuts.js","hash":"a6490438ae6a13533b89828a7781132552dbcc83","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/menu_tools/overlay_page.js","hash":"e84db0485f405bc6cd57893f44fb5933892f7bbb","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/ext/menu_tools/settings_menu.css","hash":"e6613a12303a1e04676f8291fd3a2bd430f6c965","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/keyboard/vim_test.js","hash":"1eb52eea4490e2864c41be9d7645eaecb7c0c59e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/test/asyncjs/assert.js","hash":"c8f76a30578a0f1a20755784e5d159215e463deb","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/test/asyncjs/index.js","hash":"5e1efe15fc7e5865cbfa1e278bda4df4cf5aaf95","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/test/asyncjs/async.js","hash":"b6964b0aa959daf976df88fc8d40833f7d855cde","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/test/asyncjs/test.js","hash":"bb7e28a9efdd5a00a9b770fd3a99ebe56238ab03","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/test/asyncjs/utils.js","hash":"0eca2b901049842f67cc6798e646f76ebad26c85","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/highlight_rules_test.js","hash":"933c5fb5712e599e3cf2cfdd3f8c4b5cabcc4f3a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/Readme.md","hash":"afd8662077643c4abe1d6541a693b89c66afc956","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/text_asciidoc.txt","hash":"07a81882ffdae190be3107a4416594bcc1adf250","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/text_coffee.txt","hash":"c02cf2bd5b8d1ad45c6f411fae5f872b6af5908c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/text_coldfusion.txt","hash":"078f3a1c8e13de9740555058236702a3d6369107","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/text_curly.txt","hash":"4986b030a5984f01c6cef3b1e16b7a33f6623fde","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/text_ejs.txt","hash":"2462094bc7c14099de950d64bebdbf0adfecd366","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/text_gobstones.txt","hash":"ed9b5a50c27d9df4a7eca91384bf848f27aec0a4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/text_html.txt","hash":"e27c3b4962efb7a5ea290cad95ae66089f586f76","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/text_javascript.txt","hash":"c0e15141d275e61da3344235571b187458e35e72","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/text_livescript.txt","hash":"8ddf43624a1ae9433079e599048163c37fd6e74a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/text_lucene.txt","hash":"d4d12f8de19333fad7d24b766595baac3f4d2bf9","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/text_markdown.txt","hash":"1e809de16296560b5ff32ed9771a8d141ca83198","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/text_php.txt","hash":"4cd6ff3f39de9980c18ddd32265f06e9cc57feb0","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/text_ruby.txt","hash":"7e15fc107daacc6e54e0f83f9a2aa6703d14d138","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/text_rust.txt","hash":"ce29835eae1edbd0799e4cbff0344c1e1e02b2c3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/text_verilog.txt","hash":"41c8554bf9c0f4ae9b7cab1bfcad1484fc1ee6cb","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/text_wollok.txt","hash":"f9709fb8e98d3b592538af938ed4c0b9e1cbaa63","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/text_xml.txt","hash":"1bd94a81559f1ffcd81341df58891a6026a8d177","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_abap.json","hash":"a49ff80dd2a198e5b69c87365b98a1b7efc9211a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_actionscript.json","hash":"1b87fc384f523c08d7551a46a33d77c2ba0b3984","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_assembly_x86.json","hash":"12aa14dc72d07df13bcf62c9c31c0a67e8223bf4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_ada.json","hash":"f5ab0d4cbab15bce2f86b341ba7bf84743587fdf","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_asciidoc.json","hash":"8d10dc06ccbb37539c2d9a586475b86faf89448a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_c9search.json","hash":"b06aa2d98a7d814108f6c1b05944223e3107ed09","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_batchfile.json","hash":"0c5dffd0766b7d3800bf222e2c1272b363153dd7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_autohotkey.json","hash":"7ff464a2c5ccfd3b903684a08e28f784ff11d561","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_c_cpp.json","hash":"e3261035cc3232f157d3153648aaef7f4f35f64a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_clojure.json","hash":"cab37d9fbd86802681cc3589935b88b2f8407d69","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_cirru.json","hash":"154bb20b28d80320e88c5e2bbef9dc1ffd79c5e9","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_cobol.json","hash":"592b86e47358484c919121c4adbdecb0cab9b5a7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_coffee.json","hash":"58e35feffed773b4332329befd71afa6923f9576","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_coldfusion.json","hash":"c7ae7225fe3bbd0d9b753f5307849d6feb6b5290","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_csharp.json","hash":"8a890901a1e8745283b18b3a4a8fca8a801f100d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_csound_document.json","hash":"b9d2a17efc96157d6249a25869c14ed6f3b412c6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_csound_orchestra.json","hash":"d600faa313376529702eeb16dcb7ef60cf8a6673","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_csound_score.json","hash":"22b10b7f5862fb50dec5c822ca0b85b9d9ee9377","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_css.json","hash":"be69bae2e79f0c38997efbc1ab833e54ed131e29","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_csp.json","hash":"1d2e6da5e72720e6fdf55052247ac8ddbb18fe0b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_curly.json","hash":"53bcf3aa45a5ac2990aa0f3f15be7e5ad67bc880","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_d.json","hash":"de0d0f41d810eb7e34a1d2ee481f2e1e322221e8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_dart.json","hash":"e3dceb510e4e06b465dde179d1c775d3ee7a343e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_diff.json","hash":"c05a6d25177373f2cab767a98cc0b51e4c8c8047","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_dot.json","hash":"1d614f2bdac9b4233ebc7a6f8018120c1daf8724","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_drools.json","hash":"35b984e93d53295c4b506fb57c92dd491a325d82","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_eiffel.json","hash":"108bff76ed7a5af72ff8303823075271dd3be7de","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_ejs.json","hash":"1d8e8e5918dfd039867cf1e93095f97168afb8a1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_erlang.json","hash":"110997a08045d389d2c0fe14772ae6571f22eb1c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_elixir.json","hash":"909ada01503a719adb24eff57e299d5af69153c6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_elm.json","hash":"7d5fc6ad6f3f0857291fa08f137515c4977d1088","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_fsharp.json","hash":"b50bb53855c06f43fe2ce28ab05e5d542daa54ae","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_forth.json","hash":"50efbc4cb723259edcf4d6a27db69681825ff3d1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_ftl.json","hash":"cfa74a193a8d78a1fa9f7bc61a0ac348336ca339","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_fortran.json","hash":"004f71e9d910fdf939a29cb71920ce2193364a8d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_gcode.json","hash":"ee47a50c6ccc6e30fcbe56266606a38e53aaf88f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_gherkin.json","hash":"2be1d20bc8dd5d64c283eedf705bd3afcf15623f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_gitignore.json","hash":"4a90cc333fd13beb31471dcd3ab26d550eeac68a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_gobstones.json","hash":"0708c956af74c71e4c75bb13753c38561474e400","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_glsl.json","hash":"6051ced8bf06cb882458a42df33e0b5db2411787","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_golang.json","hash":"3094f20eb5bd1f21113a701a6b14208b37fd0ff2","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_graphqlschema.json","hash":"616b72fbb2930585f5816b953e55a9f0161debd9","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_groovy.json","hash":"fa22a8ba7bbccedba492b0b3dbf34b64a88bd60c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_haml.json","hash":"215f2a89813dbe19b47df1917ff4282da380e8c8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_haskell.json","hash":"e2dfd91f698c16657c6f1914fe3e724e8a98b893","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_handlebars.json","hash":"c1d009f08bff4f5b362b70640f149420823f2b05","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_haskell_cabal.json","hash":"725656f16b1a57ec4f194341d429bd2c3f8d7dd1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_haxe.json","hash":"791b0070da5cb1b96d3ec7cf6a54577f0cf69ae8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_hjson.json","hash":"8c589c5319e529808b312eca7b4a8386f5a9d2e5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_html.json","hash":"008a6045c12b31f380d65971ec1678286cf7fe8e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_html_elixir.json","hash":"3b8ab9bb55352bb0c93de8cd3ee518f2adfe40b5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_html_ruby.json","hash":"8e1fa11e2f3b7ef5560e959d4881579fb37b0104","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_jack.json","hash":"a2c1dbfcab2159a4f1794b2791fb5f097fd09e0b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_java.json","hash":"0214f5ca8c284530200c2e2a49bdffe3e4514681","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_ini.json","hash":"6fed6a463d541f82ad21ad281c03c3e478653bc6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_io.json","hash":"e1b06c40db5b8a44a737ca8ef70d406d2f4db969","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_javascript.json","hash":"51a37d00ef6cd2b1a1438da01793d0a5daea602e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_json.json","hash":"c89e1f45ad0426a1173dbf8aef7b3a60cf693550","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_jade.json","hash":"c68a268051baa758c64e6a783b6de879a5e3a0ce","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_jsoniq.json","hash":"87b7c8fdda4901c2c00fdee213976990ec4113aa","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_jsp.json","hash":"5d9c5a6b4795f2a6cde7d647e38cb69e3e9a0153","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_julia.json","hash":"ae99b220e8592917e01d6c6696f1d2563a90d5e0","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_jssm.json","hash":"6d2d668ff207b04ad5404b68460908ea59f8cf55","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_jsx.json","hash":"e20dea2de059086e96d8a1205f30cdf3d8d44c98","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_kotlin.json","hash":"58cd10aef0e7a42db722d2810abe18f75731074e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_latex.json","hash":"28ab10ce4d2a9cab677107b36201d03c56244304","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_less.json","hash":"0fddb8592afdeaddece58462a47d269d57b50b15","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_liquid.json","hash":"bbb453466d07784eea3b245175df27b3703650a4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_lisp.json","hash":"4e83fcdb447618cc6cd232ce94c365157102ce8a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_livescript.json","hash":"2ccbd08ef7e76a67281b3cf6cf7a97fcf6e4f33a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_logiql.json","hash":"ed98252f90ac91df16435c3dbb36bc918c1dcfea","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_lua.json","hash":"b2329ca5ed9f5c83f8c21c00f7d848e88695523d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_luapage.json","hash":"4d39b1088245bf8c5c0a79b8085f0bdc3feb46fb","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_lsl.json","hash":"bacc405d20f9bc81ab2990ad3e2bc9d0cd5341b2","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_lucene.json","hash":"d572b84978f51c72d64558d0d8ee05e8481cc14a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_markdown.json","hash":"9b26a7f28d7587ab67233d5f340d362cbc313951","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_mask.json","hash":"4deba42f836c73ac785ad07a46a1e95d6a537850","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_matlab.json","hash":"3516a0a58e820673facfd1817e94dcc15abb167a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_maze.json","hash":"c50786f5a2f8c77c44632947c0533869a409cf78","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_mel.json","hash":"0dc65a989add5015f619231196dda1a1a458a88f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_mixal.json","hash":"e7059cef25a4b22a077eb1f0398185a47f1000cb","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_nsis.json","hash":"059298777a1f9009469a4e6084b7e79c0a5856fb","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_mushcode.json","hash":"4e22d8956e5375488ca942bb0931bff80b4e9594","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_mysql.json","hash":"592b86e47358484c919121c4adbdecb0cab9b5a7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_nix.json","hash":"a3733a5470efdb4910e1722eef140f263c314d76","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_ocaml.json","hash":"caedc0673b94be67488d8c6c0449a3ac6b7c0628","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_objectivec.json","hash":"a2e3b8bd1b197a7a277bfc692d345ab7dfe0dc8d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_pascal.json","hash":"f3c40978b3747ae1b98ea5537e6e5da476071443","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_perl.json","hash":"2c94777c6ff6f14d77e47d1549630cbc69eac779","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_pgsql.json","hash":"f9e97d99f66ab7ca98d6be64468cdde89b661b9b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_php.json","hash":"5eed1216eac2fa109be7cc082a5d021a13ba00c6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_php_laravel_blade.json","hash":"80644a08f88139748c01903eaf9977b40d195585","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_pig.json","hash":"adf4122c82db0c4a68b952f75ccee06a15fd8c40","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_powershell.json","hash":"f8baedcd89d636084194f0a6f951a401fa9e876a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_praat.json","hash":"0077fa1eb80910153297897f9ba18eaf83db50fd","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_prolog.json","hash":"abd22c636cf9d36b516690ebda88daf84eb5b635","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_properties.json","hash":"19579f5f3102e07b1878fa8a0ef84ca3543609d6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_protobuf.json","hash":"e9c66a6196cbe586dfa690fd24fd26b2092407b7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_razor.json","hash":"1b3d8ca9a7469eb1ee7fa0aaf00a436065252fc5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_r.json","hash":"53029efeab074919ad1184293a60b8623863f4d1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_python.json","hash":"75ee8e713bcbc843885ee83fa5a942e8489ba256","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_rhtml.json","hash":"9ec70b212e9ebfc6d223342dd1419a7c094f40c3","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_rdoc.json","hash":"8f333bc990c3d4f4cc1ae48d438f38c664eda6f8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_red.json","hash":"2c254cefbe903baddf546d0ec8c94cbb48227a55","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_rst.json","hash":"034d99d6d33fbda785a4c0ece1b8185b6d680da6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_ruby.json","hash":"d6a2430e4178d1dfebf6276b1e2a97c6241f9d4c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_sass.json","hash":"1e8c298625fe7bfc479aa43c81a2212223a19279","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_scad.json","hash":"a1e7c5410fe8d35e856e5bc5455a8752ed605aa5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_scheme.json","hash":"766c24e011e49d7ba5b0507e4dc408044bbba0d0","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_scala.json","hash":"7a22da2a8f46aefa8a5ebf1c9955904b94ff89f4","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_sh.json","hash":"5c8f186f158b764273ca980afa2bfdd18d47d079","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_scss.json","hash":"c75585b282aa5374fa749b4ea6db136cf54e0d0a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_sjs.json","hash":"9959b4fb9d55ba5828db28091261df58e03be2cd","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_smarty.json","hash":"47c134959dcf036d2fc3ccedd4de4554ddb041bc","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_slim.json","hash":"f6007261145f0bbfa91a2b44b8ec8836561670dd","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_snippets.json","hash":"043d15a5a270136a2fc6b655c2ef14f7423c152b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_soy_template.json","hash":"cf2a369cd2879cccd384f695b07d2859cd46ce86","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_sparql.json","hash":"855275e52036ba2cf980a3a9ab01cba5b9a289a1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_space.json","hash":"7981d6d2b8e979f0c363fcfab808a7b250052c12","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_sql.json","hash":"1f005b79e4c353c7cd70b5eba0b3d13a977a84b1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_stylus.json","hash":"a92c392a8e0526d98cb8bdbf88bfd423742b90fa","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_sqlserver.json","hash":"2d869927722bd19bc0d6ba38004d83d636fa9ec8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_svg.json","hash":"cb85d28f8a3d2b1f3bb27e7cbebd7e5998137e8c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_swift.json","hash":"fff878d4463047504f927f55a5180787ca841c08","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_tcl.json","hash":"5839207be764b9350fded40548cf4d36db4e196c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_text.json","hash":"825c30667a0aa24013bf9fde850bab7886692bf2","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_tex.json","hash":"44d6538cb3bddc3e0833e1ccc3d3952453950b77","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_textile.json","hash":"ad95a718d7174b64a91c8f5d63f1d047a41dba8f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_rust.json","hash":"ca5b54e8c895a64da970438a2021ca6bce923e18","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_tsx.json","hash":"92572a2f4e8ce2908dc0f558c2864f54b89f69cb","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_toml.json","hash":"5318b6423ebef7c5ee238e08d1980e6d99bd0ac5","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_turtle.json","hash":"339aec556bb531b04217f44859ab5ca0060df9ac","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_twig.json","hash":"28ca664aca848fe1a5041e923e03d7285b98ed55","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_typescript.json","hash":"235ffdb25039f411938466d02fd933e21d3e656c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_velocity.json","hash":"08a8512b867631c0e5a1d51bd7819e3caa98afa7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_vala.json","hash":"a06d977cc905e26e9f8b002bdf224e43d519af46","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_vbscript.json","hash":"ebb1b7aef7f860e8f5996fa81003900e6042f63a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_vhdl.json","hash":"2154c656fa52dc0dfdcfda529a80bf1f8f3ce886","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_verilog.json","hash":"2feccfddb7860898e400f15699cd32d04efee77a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_yaml.json","hash":"e5f85af48b42260973659dbe2add9aeae149eb1d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_wollok.json","hash":"de8ba145aa86d70d67aee808e6777a428b674a0e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_xml.json","hash":"716ff4968487c07b5a207caf8eb2febe505631b7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_xquery.json","hash":"b317a721bde5214b262b9c709b9a7ea7dc9e5c0c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/behaviour/behaviour_test.js","hash":"4f8643b690f76cfa3262fe5189766532260ac3ad","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/behaviour/css.js","hash":"8751854bbc1dac4ea36ae4ca10ab5608b945400c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/behaviour/xquery.js","hash":"0e82b786b5e6915ef634868802cf1397fac9142e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/behaviour/cstyle.js","hash":"921329a221e472bf2b22c7050cc91c660daed616","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/behaviour/html.js","hash":"79f866be1fbd92140e4ec948c393b1a5a0a62613","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/behaviour/xml.js","hash":"c04c3851807ea2fcd97169c58f4483fd992d5f88","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/coffee/parser_test.js","hash":"59364bec286a810f95f1e7330afb211f196c5e4e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/asciidoc.js","hash":"b9df1cdf514dcec34a975b615a57b05970770a1b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/c9search.js","hash":"7d366c0d3b967feb39f5a1ff08d9f1b1d878423c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/coffee.js","hash":"98faa9945498b7487bb6af3603743c966e389250","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/coffee_test.js","hash":"bf38aa78b2b72104d70d9ec1e219167e3a328097","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/csharp.js","hash":"2235b5ea07af46bf785d992900be6b2f09b1724a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/cstyle.js","hash":"478f8484d80efac82099d7d022be1c302b6a236b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/diff.js","hash":"e7bb7ecbf08003e168aa0e086788ebf655060944","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/cstyle_test.js","hash":"e1a41b7ff205bb20b54e4a6f99fc6390886c3a13","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/drools.js","hash":"d49bf86dd8f23ff3764380e7bfb57aa6dd67734b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/fold_mode.js","hash":"54ca3b63b9812465efb1fe3bfabedda11c664b3c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/haskell_cabal.js","hash":"8a5ff27748512da0a333f4e85ae4fb62f6b09771","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/html.js","hash":"dd6f61e9166b4e0b614afd1e7e15e3013b253afe","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/html_test.js","hash":"44dd86854056a449268fdb1b7ff69680cfb2718e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/latex.js","hash":"590015ff8a198c483c0cf20e9b31e71275b9539c","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/ini.js","hash":"45bccdf70defb9bc9ff985bd4362d97d575ca9c1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/lua.js","hash":"f16b74b85d74b67ab1aca6d7ba341db6e6864b51","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/markdown.js","hash":"871d719cb19f5fe107926200ae468a5c8705d78d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/mixed.js","hash":"33b3075c96454dff5228ea6044460f9b35d0a6a9","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/pythonic.js","hash":"09c1b16c9a5d2f24cbcdd69ab47ebb50d47e8fc6","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/sqlserver.js","hash":"1da193b02de5180db3aca2a7fa4ac15300ed5094","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/pythonic_test.js","hash":"64cf6f617c277b3c8fae78c38cfe8a38273cefa7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/xml_test.js","hash":"72440d8d9c6712d95d88e92f4435a599d110fe66","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/xml.js","hash":"89c49ef6f82e4c69b2ec2d527fb9989324006e77","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/folding/velocity.js","hash":"de58d492268e71cf13ae3884e4c1cfee5be1572f","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/json/json_parse.js","hash":"4a3c78fad0f2b937f5c95c7091941553ff801e5a","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/lua/luaparse.js","hash":"a55c5419925e10f493133b9f78c24a29a0f4b2d7","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/xml/sax.js","hash":"2c3ede9a1aa3e85ec637a7b4fd43d366b64843d9","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/xml/dom-parser.js","hash":"548b159a3717a207764870a040d0807daffb6afe","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/xml/dom.js","hash":"11d50305452157963fbd12a64fa9e691765ec533","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/xquery/Readme.md","hash":"2396e2448824f28beba87dbfc28ad2d8c6bad979","modified":1598024585000},{"_id":"themes/yilia/source/layui/font/iconfont.svg","hash":"3fd31f64c0ca8d4a37ff3d80b3357917a4eb5882","modified":1598024585000},{"_id":"source/images/vimgrep.gif","hash":"4284786081148c5cef76df0cf2cf201fff2cf799","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/keyboard/vim.js","hash":"a54ea80b7dc5a8228a6b1a11ffcc239140e0d4b8","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/_test/tokens_abc.json","hash":"e0c0292bf6ba7592affcdde98ede8cf817f2c988","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/php/php.js","hash":"79579431fc10676937af276e9f57fd9da2226a82","modified":1598024585000},{"_id":"themes/yilia/source/layui/css/modules/layer/default/icon-ext.png","hash":"ddf2a30ad34bac4e9a1250f29c46ac0823d62a12","modified":1598024585000},{"_id":"themes/yilia/source/layui/css/modules/layer/default/layer.css","hash":"5857f6d1250e31308073ebc5beff013f58a7ab72","modified":1598024585000},{"_id":"themes/yilia/source/layui/css/modules/layer/default/icon.png","hash":"fe47ec617507e9ce5f6ce7ac9b179a3c9231882b","modified":1598024585000},{"_id":"themes/yilia/source/layui/css/modules/laydate/default/laydate.css","hash":"d32d319b74c2232cb76f82edaee2ee452cfbda6b","modified":1598024585000},{"_id":"themes/yilia/source/layui/css/modules/layer/default/loading-0.gif","hash":"ba81388bbac5bc223f94489b97a95a13f3c78e47","modified":1598024585000},{"_id":"themes/yilia/source/layui/css/modules/layer/default/loading-2.gif","hash":"c641615e851254111e268da42d72ae684b3ce967","modified":1598024585000},{"_id":"themes/yilia/source/layui/css/modules/layer/default/loading-1.gif","hash":"49e54acbf5674212195e581848ec0d490282448f","modified":1598024585000},{"_id":"source/images/ack.gif","hash":"15a43d09a544a4260752eb511bfcfaa8a6b56f01","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/php_completions.js","hash":"60dcc403910f7f5647abd0e7e4adf7e3835e0c84","modified":1598024585000},{"_id":"source/images/gzjzz4.png","hash":"2752c822e78fcb10dcafa1f2e3819782bfd19b1b","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/coffee/coffee.js","hash":"d39358d53286ea30efe6960b8ff11c2a091e7d89","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/css/csslint.js","hash":"585378e91d20fbd98bfa053bd58e06dd98f3297d","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/html/saxparser.js","hash":"4e070b45bd3c5b17c027d223613b9615c84caa24","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/javascript/jshint.js","hash":"7dd50557fae42fcf86c989fd74a9e6d162cae7e2","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/xquery/jsoniq_lexer.js","hash":"6c083fcd76d276dd1997f4f5861e96341aff6b3e","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/xquery/xquery_lexer.js","hash":"cc892a993cda4ef4d6872566f32d0f5509b80745","modified":1598024585000},{"_id":"source/images/gzjzz2.png","hash":"9fd2a4043b428295e611e99b0b6717d6d7d109be","modified":1598024585000},{"_id":"source/images/gzjzz5.png","hash":"c336a3eaf779e6d864404a45fe6aa1cd1b5763df","modified":1598024585000},{"_id":"source/images/ins.png","hash":"3a8c8cb8c8b830385f8c5ef48460ab26d5a457c1","modified":1598024585000},{"_id":"themes/yilia/source/js/ace/mode/xquery/xqlint.js","hash":"90b09a0adfb0e7d11a40fab42da7244d7f7a952b","modified":1598024585000}],"Category":[],"Data":[],"Page":[{"title":"2018 年读书目录","date":"2018-01-15T11:26:34.000Z","_content":"\n本章记录 2018 年读书情况\n\n## 目标\n2018 年每周要至少读够 5 小时书，一年至少读完 30 本书\n\n\n## 读完的\n\n- 2018-01-01 09:32:48 读完《绝味天下》                                             花费2小时52分钟\n- 2018-01-01 16:53:57 读完《哈弗凌晨四点半》                                       花费4小时21分钟\n- 2018-01-07 10:06:21 读完[《沉睡的人鱼之家》](/2018/01/07/chenshuiderenyuzhijia/) 花费5小时14分钟\n- 2018-01-15 22:02:34 读完《坏小孩》第二遍                                         花费5小时33分钟\n- 2018-01-18 08:54:14 读完《创京东》                                               花费9小时13分钟\n- 2018-01-27 21:36:56 读完《白金数据》                                             花费5小时29分钟\n- 2018-02-05 23:28:00 读完《死亡通知单外传惩罚》第二遍                             花费5小时54分钟\n- 2018-02-16 08:47:00 读完《死亡通知单：暗黑者》第二遍                             花费5小时10分钟\n- 2018-02-21 08:40:00 读完[《必然》](/2018/02/21/biran/)                           花费5小时50分钟\n- 2018-02-22 11:59:00 读完《与我十年长跑的女友明天要嫁人了》                       花费5小时07分钟\n- 2018-02-27 07:55:00 读完《死亡通知单：宿命》第二遍                               花费12小时07分钟\n- 2018-03-01 00:28:00 读完《睡前胎教故事》                                         花费1小时50分钟\n- 2018-03-03 08:17:00 读完[《非暴力沟通》](/2018/03/05/feibaoligoutong/)           花费3小时17分钟\n- 2018-03-07 13:35:00 读完《伽利略的苦恼》                                         花费4小时23分钟\n- 2018-03-11 15:58:00 读完《马云：未来已来》                                       花费4小时22分钟\n- 2018-03-13 09:11:00 读完《死亡通知单：离别曲》第二遍                             花费10小时53分钟\n- 2018-03-14 13:44:00 读完《人生的84000种可能》                                    花费3小时17分钟\n- 2018-03-19 17:00:00 读完《一场关于前男友的葬礼》                                 花费3小时0分钟\n- 2018-03-22 08:35:00 读完《高智商犯罪2》第二遍                                    花费3小时0分钟\n- 2018-03-24 08:25:00 读完《憋说话，吻我》                                         花费32分钟\n- 2018-03-26 12:09:00 读完《凶画》                                                 花费1小时48分钟\n- 2018-03-31 09:01:00 读完《天才源自刻意联系》                                     花费3小时49分钟\n- 2018-04-01 17:11:00 读完《东京一年》                                             花费3小时19分钟\n- 2018-04-04 22:07:00 读完《准爸爸读胎教故事》                                     花费1小时07分钟\n- 2018-04-06 13:54:00 读完《消失的证人》                                           花费5小时01分钟\n- 2018-04-10 08:46:00 读完《生命不息，折腾不止》                                   花费9小时19分钟\n- 2018-04-17 18:27:00 读完《腾讯传》                                               花费7小时22分钟\n- 2018-04-17 20:56:00 读完《医本正经》                                             花费3小时56分钟\n- 2018-04-22 17:21:00 读完《三体》第二遍                                           花费22小时27分钟\n- 2018-04-30 09:47:00 读完《流星之绊》                                             花费4小时48分钟\n- 2018-05-05 10:45:00 读完《平行世界-爱情》                                        花费3小时57分钟\n- 2018-05-08 08:35:00 读完《邪恶催眠师1》第二遍                                    花费5小时01分钟\n- 2018-05-13 10:37:00 读完《红手指》                                               花费2小时02分钟\n- 2018-05-14 17:36:00 读完《邪恶催眠师2》第二遍                                    花费4小时09分钟\n- 2018-05-19 14:25:00 读完《邪恶催眠师3》第二遍                                    花费4小时17分钟\n- 2018-05-28 09:28:00 读完《假面饭店》                                             花费6小时0分钟\n- 2018-06-02 16:49:00 读完《假面前夜》                                             花费3小时11分钟\n- 2018-06-02 18:05:00 读完《说医不二》                                             花费2小时34分钟\n- 2018-07-08 15:58:00 读完《余罪1-8》                                              花费58小时52分钟\n- 2018-08-26 19:50:00 读完《斗破苍穹》第 N 遍                                      花费75小时06分钟\n- 2018-09-26 09:35:00 读完《美人毒计1》                                            花费06小时0分钟\n- 2018-09-28 13:28:00 读完《美人毒计2》                                            花费03小时31分钟\n- 2018-11-10 05:13:00 读完《假面山庄》                                             花费02小时34分钟\n- 2018-11-10 19:42:00 读完《我可以咬一口吗》                                       花费00小时24分钟\n- 2018-11-22 12:02:00 读完《咏远有李》                                             花费03小时15分钟\n- 2018-11-23 10:27:00 读完《写给大人的睡前故事》                                   花费01小时36分钟\n- 2018-11-24 21:27:00 读完《南极姑娘》                                             花费02小时06分钟\n- 2018-12-04 21:05:00 读完《坏蛋是怎样炼成的1》第 N 遍                             花费30小时11分钟\n- 2018-12-06 16:07:00 读完[《玩儿》](/2018/12/17/waner/)                           花费05小时11分钟\n- 2018-12-06 18:14:00 读完《就是想看你笑的样子》                                   花费00小时33分钟\n- 2018-12-07 18:31:00 读完《月光的谎言》                                           花费00小时59分钟\n- 2018-12-13 21:33:00 读完《真相推理者：复仇》                                     花费06小时12分钟\n- 2018-12-18 05:54:00 读完《真相推理者：嬗变》                                     花费06小时16分钟\n- 2018-12-24 18:11:00 读完《真相推理者：幸存》                                     花费05小时02分钟\n\n总共 55 本\n\n## 时间\n\n2018 年第一周读书   01.01 - 01.07 07小时21分钟\n2018 年第二周读书   01.08 - 01.14 09小时02分钟\n2018 年第三周读书   01.15 - 01.21 10小时48分钟\n2018 年第四周读书   01.22 - 01.28 10小时04分钟\n2018 年第五周读书   01.29 - 02.04 10小时08分钟\n2018 年第六周读书   02.05 - 02.11 10小时32分钟\n2018 年第六周读书   02.12 - 02.18 10小时47分钟\n2018 年第七周读书   02.19 - 02.25 15小时01分钟\n2018 年第八周读书   02.26 - 03.04 10小时40分钟\n2018 年第九周读书   03.05 - 03.11 11小时23分钟\n2018 年第十周读书   03.12 - 03.18 10小时12分钟\n2018 年第十一周读书 03.19 - 03.25 08小时18分钟\n2018 年第十二周读书 03.26 - 04.01 10小时11分钟\n2018 年第十三周读书 04.02 - 04.08 11小时20分钟\n2018 年第十四周读书 04.09 - 04.15 10小时48分钟\n2018 年第十五周读书 04.16 - 04.22 10小时10分钟\n2018 年第十六周读书 04.23 - 04.29 03小时48分钟（这周的空闲时间都用来刷妇联3的剧透了，罪过）\n2018 年第十七周读书 04.30 - 05.06 07小时05分钟\n2018 年第十八周读书 05.07 - 05.13 10小时52分钟\n2018 年第十九周读书 05.14 - 05.20 12小时28分钟\n2018 年第二十周读书 05.21 - 05.27 10小时54分钟\n2018 年第二一周读书 05.28 - 06.03 13小时51分钟\n2018 年第二二周读书 06.04 - 06.10 07小时39分钟（女儿出生周）\n2018 年第二三周读书 06.11 - 06.17 07小时33分钟\n2018 年第二四周读书 06.18 - 06.24 09小时05分钟（把攒了近三年的海贼看完了，恩，在攒几年）\n2018 年第二四周读书 06.25 - 07.01 05小时33分钟\n2018 年第二六周读书 07.02 - 07.08 06小时39分钟\n2018 年第二七周读书 07.09 - 07.15 00小时01分钟\n2018 年第二八周读书 07.16 - 07.22 02小时00分钟\n2018 年第二九周读书 07.23 - 07.29 24小时35分钟\n2018 年第三十周读书 07.30 - 08.05 10小时32分钟\n2018 年第三一周读书 08.06 - 08.12 20小时12分钟\n2018 年第三二周读书 08.13 - 08.19 08小时12分钟\n2018 年第三三周读书 08.20 - 08.26 05小时32分钟\n2018 年第三四周读书 08.27 - 09.02 12小时28分钟\n2018 年第三五周读书 09.03 - 09.09 00小时00分钟\n2018 年第三六周读书 09.10 - 09.16 00小时12分钟\n2018 年第三七周读书 09.17 - 09.23 00小时40分钟\n2018 年第四四周读书 11.05 - 11.11 08小时11分钟 (生活终于有稳定了下来，继续看书)\n2018 年第四五周读书 11.12 - 11.18 08小时07分钟\n2018 年第四六周读书 11.19 - 11.25 22小时24分钟\n2018 年第四七周读书 11.26 - 12.02 15小时16分钟\n2018 年第四八周读书 12.03 - 12.09 15小时23分钟\n2018 年第四九周读书 12.10 - 12.16 15小时10分钟\n2018 年第五十周读书 12.17 - 12.23 15小时59分钟\n2018 年第五一周读书 12.24 - 12.30 13小时15分钟\n\n\n总共 460 小时 21 分钟\n\n\n","source":"2018-books/index.md","raw":"---\ntitle: 2018 年读书目录\ndate: 2018-01-15 11:26:34\n---\n\n本章记录 2018 年读书情况\n\n## 目标\n2018 年每周要至少读够 5 小时书，一年至少读完 30 本书\n\n\n## 读完的\n\n- 2018-01-01 09:32:48 读完《绝味天下》                                             花费2小时52分钟\n- 2018-01-01 16:53:57 读完《哈弗凌晨四点半》                                       花费4小时21分钟\n- 2018-01-07 10:06:21 读完[《沉睡的人鱼之家》](/2018/01/07/chenshuiderenyuzhijia/) 花费5小时14分钟\n- 2018-01-15 22:02:34 读完《坏小孩》第二遍                                         花费5小时33分钟\n- 2018-01-18 08:54:14 读完《创京东》                                               花费9小时13分钟\n- 2018-01-27 21:36:56 读完《白金数据》                                             花费5小时29分钟\n- 2018-02-05 23:28:00 读完《死亡通知单外传惩罚》第二遍                             花费5小时54分钟\n- 2018-02-16 08:47:00 读完《死亡通知单：暗黑者》第二遍                             花费5小时10分钟\n- 2018-02-21 08:40:00 读完[《必然》](/2018/02/21/biran/)                           花费5小时50分钟\n- 2018-02-22 11:59:00 读完《与我十年长跑的女友明天要嫁人了》                       花费5小时07分钟\n- 2018-02-27 07:55:00 读完《死亡通知单：宿命》第二遍                               花费12小时07分钟\n- 2018-03-01 00:28:00 读完《睡前胎教故事》                                         花费1小时50分钟\n- 2018-03-03 08:17:00 读完[《非暴力沟通》](/2018/03/05/feibaoligoutong/)           花费3小时17分钟\n- 2018-03-07 13:35:00 读完《伽利略的苦恼》                                         花费4小时23分钟\n- 2018-03-11 15:58:00 读完《马云：未来已来》                                       花费4小时22分钟\n- 2018-03-13 09:11:00 读完《死亡通知单：离别曲》第二遍                             花费10小时53分钟\n- 2018-03-14 13:44:00 读完《人生的84000种可能》                                    花费3小时17分钟\n- 2018-03-19 17:00:00 读完《一场关于前男友的葬礼》                                 花费3小时0分钟\n- 2018-03-22 08:35:00 读完《高智商犯罪2》第二遍                                    花费3小时0分钟\n- 2018-03-24 08:25:00 读完《憋说话，吻我》                                         花费32分钟\n- 2018-03-26 12:09:00 读完《凶画》                                                 花费1小时48分钟\n- 2018-03-31 09:01:00 读完《天才源自刻意联系》                                     花费3小时49分钟\n- 2018-04-01 17:11:00 读完《东京一年》                                             花费3小时19分钟\n- 2018-04-04 22:07:00 读完《准爸爸读胎教故事》                                     花费1小时07分钟\n- 2018-04-06 13:54:00 读完《消失的证人》                                           花费5小时01分钟\n- 2018-04-10 08:46:00 读完《生命不息，折腾不止》                                   花费9小时19分钟\n- 2018-04-17 18:27:00 读完《腾讯传》                                               花费7小时22分钟\n- 2018-04-17 20:56:00 读完《医本正经》                                             花费3小时56分钟\n- 2018-04-22 17:21:00 读完《三体》第二遍                                           花费22小时27分钟\n- 2018-04-30 09:47:00 读完《流星之绊》                                             花费4小时48分钟\n- 2018-05-05 10:45:00 读完《平行世界-爱情》                                        花费3小时57分钟\n- 2018-05-08 08:35:00 读完《邪恶催眠师1》第二遍                                    花费5小时01分钟\n- 2018-05-13 10:37:00 读完《红手指》                                               花费2小时02分钟\n- 2018-05-14 17:36:00 读完《邪恶催眠师2》第二遍                                    花费4小时09分钟\n- 2018-05-19 14:25:00 读完《邪恶催眠师3》第二遍                                    花费4小时17分钟\n- 2018-05-28 09:28:00 读完《假面饭店》                                             花费6小时0分钟\n- 2018-06-02 16:49:00 读完《假面前夜》                                             花费3小时11分钟\n- 2018-06-02 18:05:00 读完《说医不二》                                             花费2小时34分钟\n- 2018-07-08 15:58:00 读完《余罪1-8》                                              花费58小时52分钟\n- 2018-08-26 19:50:00 读完《斗破苍穹》第 N 遍                                      花费75小时06分钟\n- 2018-09-26 09:35:00 读完《美人毒计1》                                            花费06小时0分钟\n- 2018-09-28 13:28:00 读完《美人毒计2》                                            花费03小时31分钟\n- 2018-11-10 05:13:00 读完《假面山庄》                                             花费02小时34分钟\n- 2018-11-10 19:42:00 读完《我可以咬一口吗》                                       花费00小时24分钟\n- 2018-11-22 12:02:00 读完《咏远有李》                                             花费03小时15分钟\n- 2018-11-23 10:27:00 读完《写给大人的睡前故事》                                   花费01小时36分钟\n- 2018-11-24 21:27:00 读完《南极姑娘》                                             花费02小时06分钟\n- 2018-12-04 21:05:00 读完《坏蛋是怎样炼成的1》第 N 遍                             花费30小时11分钟\n- 2018-12-06 16:07:00 读完[《玩儿》](/2018/12/17/waner/)                           花费05小时11分钟\n- 2018-12-06 18:14:00 读完《就是想看你笑的样子》                                   花费00小时33分钟\n- 2018-12-07 18:31:00 读完《月光的谎言》                                           花费00小时59分钟\n- 2018-12-13 21:33:00 读完《真相推理者：复仇》                                     花费06小时12分钟\n- 2018-12-18 05:54:00 读完《真相推理者：嬗变》                                     花费06小时16分钟\n- 2018-12-24 18:11:00 读完《真相推理者：幸存》                                     花费05小时02分钟\n\n总共 55 本\n\n## 时间\n\n2018 年第一周读书   01.01 - 01.07 07小时21分钟\n2018 年第二周读书   01.08 - 01.14 09小时02分钟\n2018 年第三周读书   01.15 - 01.21 10小时48分钟\n2018 年第四周读书   01.22 - 01.28 10小时04分钟\n2018 年第五周读书   01.29 - 02.04 10小时08分钟\n2018 年第六周读书   02.05 - 02.11 10小时32分钟\n2018 年第六周读书   02.12 - 02.18 10小时47分钟\n2018 年第七周读书   02.19 - 02.25 15小时01分钟\n2018 年第八周读书   02.26 - 03.04 10小时40分钟\n2018 年第九周读书   03.05 - 03.11 11小时23分钟\n2018 年第十周读书   03.12 - 03.18 10小时12分钟\n2018 年第十一周读书 03.19 - 03.25 08小时18分钟\n2018 年第十二周读书 03.26 - 04.01 10小时11分钟\n2018 年第十三周读书 04.02 - 04.08 11小时20分钟\n2018 年第十四周读书 04.09 - 04.15 10小时48分钟\n2018 年第十五周读书 04.16 - 04.22 10小时10分钟\n2018 年第十六周读书 04.23 - 04.29 03小时48分钟（这周的空闲时间都用来刷妇联3的剧透了，罪过）\n2018 年第十七周读书 04.30 - 05.06 07小时05分钟\n2018 年第十八周读书 05.07 - 05.13 10小时52分钟\n2018 年第十九周读书 05.14 - 05.20 12小时28分钟\n2018 年第二十周读书 05.21 - 05.27 10小时54分钟\n2018 年第二一周读书 05.28 - 06.03 13小时51分钟\n2018 年第二二周读书 06.04 - 06.10 07小时39分钟（女儿出生周）\n2018 年第二三周读书 06.11 - 06.17 07小时33分钟\n2018 年第二四周读书 06.18 - 06.24 09小时05分钟（把攒了近三年的海贼看完了，恩，在攒几年）\n2018 年第二四周读书 06.25 - 07.01 05小时33分钟\n2018 年第二六周读书 07.02 - 07.08 06小时39分钟\n2018 年第二七周读书 07.09 - 07.15 00小时01分钟\n2018 年第二八周读书 07.16 - 07.22 02小时00分钟\n2018 年第二九周读书 07.23 - 07.29 24小时35分钟\n2018 年第三十周读书 07.30 - 08.05 10小时32分钟\n2018 年第三一周读书 08.06 - 08.12 20小时12分钟\n2018 年第三二周读书 08.13 - 08.19 08小时12分钟\n2018 年第三三周读书 08.20 - 08.26 05小时32分钟\n2018 年第三四周读书 08.27 - 09.02 12小时28分钟\n2018 年第三五周读书 09.03 - 09.09 00小时00分钟\n2018 年第三六周读书 09.10 - 09.16 00小时12分钟\n2018 年第三七周读书 09.17 - 09.23 00小时40分钟\n2018 年第四四周读书 11.05 - 11.11 08小时11分钟 (生活终于有稳定了下来，继续看书)\n2018 年第四五周读书 11.12 - 11.18 08小时07分钟\n2018 年第四六周读书 11.19 - 11.25 22小时24分钟\n2018 年第四七周读书 11.26 - 12.02 15小时16分钟\n2018 年第四八周读书 12.03 - 12.09 15小时23分钟\n2018 年第四九周读书 12.10 - 12.16 15小时10分钟\n2018 年第五十周读书 12.17 - 12.23 15小时59分钟\n2018 年第五一周读书 12.24 - 12.30 13小时15分钟\n\n\n总共 460 小时 21 分钟\n\n\n","updated":"2020-08-21T15:43:05.000Z","path":"2018-books/index.html","comments":1,"layout":"page","_id":"cke4k29u300005gqo1mslfu0y"},{"title":"合辑","date":"2018-12-10T16:46:23.000Z","_content":"\n- [Vim 专辑](/vim)\n- [Python 练级手册](/python)\n- [Linux 练级手册](/linux)\n- [2018 年读书目录](/2018-books)\n","source":"album/index.md","raw":"---\ntitle: 合辑\ndate: 2018-12-10 16:46:23\n---\n\n- [Vim 专辑](/vim)\n- [Python 练级手册](/python)\n- [Linux 练级手册](/linux)\n- [2018 年读书目录](/2018-books)\n","updated":"2020-08-21T15:43:05.000Z","path":"album/index.html","comments":1,"layout":"page","_id":"cke4k29u900025gqomvnm63tc"},{"title":"category","date":"2017-09-15T21:47:26.000Z","_content":"","source":"category/index.md","raw":"---\ntitle: category\ndate: 2017-09-15 21:47:26\n---\n","updated":"2020-08-21T15:43:05.000Z","path":"category/index.html","comments":1,"layout":"page","_id":"cke4k29ug00065gqowfapq6ny"},{"title":"Linux 练级手册","date":"2017-11-22T16:41:10.000Z","_content":"<!-- toc -->\n## SSH\n- [SSH](/2017/08/23/linux-2017-08-23-ssh/)\n- [CentOS 各个版本启动SSHD服务命令](/2017/08/22/linux-2017-08-22-centos-start-stop-restart-sshd/)\n- [SFTP 与 SCP](/2017/08/22/linux-2017-08-22-sftp-scp/)\n- [Mosh](/2017/09/25/mosh/)\n\n## shell\n- [Zsh](/2017/08/16/shell-2017-08-16-zsh-install/)\n- [使用 expect 交互免输入密码](/2017/09/15/linux-2017-09-15-expect/)\n- [数据流重定向](/2017/09/11/linux-2017-09-11-redirection/)\n- [链接](/2017/08/28/linux-2017-08-28-ln/)\n- [分析磁盘空间](/2017/12/29/linux-device-space/)\n\n### 搜索\n- [grep](/2017/09/11/linux-2017-09-11-grep/)\n\n### 软件安装工具\n- [Ubuntu Apt](/2017/11/23/apt/)\n\n## 窗口管理工具\n- [Tmux](/2017/09/24/tmux/)\n\n## 网络请求工具\n- [cURL](/2017/08/16/linux-2017-08-16-curl/)\n- [HTTPie](/2017/09/21/http/)\n\n## 远程操控机器 ansible\n- [Get Started](/2017/08/08/ansible-2017-08-08-item-basic-get-started/)\n\n## 杂谈\n- [使用nohup在后台不挂断执行命令](/2017/08/15/linux-2017-08-15-nohup/)\n- [如何判断 Unix 系统 OS 版本](/2017/11/24/get-os-name/)\n## 常见错误\n- [no acceptable C compiler found in $PATH](/2017/11/22/no-c-compiler/)\n- [Ubuntu 报错 Unable to locate package](/2017/11/23/unable-to-locate-package/)\n","source":"linux/index.md","raw":"---\ntitle: Linux 练级手册\ndate: 2017-11-22 16:41:10\n---\n<!-- toc -->\n## SSH\n- [SSH](/2017/08/23/linux-2017-08-23-ssh/)\n- [CentOS 各个版本启动SSHD服务命令](/2017/08/22/linux-2017-08-22-centos-start-stop-restart-sshd/)\n- [SFTP 与 SCP](/2017/08/22/linux-2017-08-22-sftp-scp/)\n- [Mosh](/2017/09/25/mosh/)\n\n## shell\n- [Zsh](/2017/08/16/shell-2017-08-16-zsh-install/)\n- [使用 expect 交互免输入密码](/2017/09/15/linux-2017-09-15-expect/)\n- [数据流重定向](/2017/09/11/linux-2017-09-11-redirection/)\n- [链接](/2017/08/28/linux-2017-08-28-ln/)\n- [分析磁盘空间](/2017/12/29/linux-device-space/)\n\n### 搜索\n- [grep](/2017/09/11/linux-2017-09-11-grep/)\n\n### 软件安装工具\n- [Ubuntu Apt](/2017/11/23/apt/)\n\n## 窗口管理工具\n- [Tmux](/2017/09/24/tmux/)\n\n## 网络请求工具\n- [cURL](/2017/08/16/linux-2017-08-16-curl/)\n- [HTTPie](/2017/09/21/http/)\n\n## 远程操控机器 ansible\n- [Get Started](/2017/08/08/ansible-2017-08-08-item-basic-get-started/)\n\n## 杂谈\n- [使用nohup在后台不挂断执行命令](/2017/08/15/linux-2017-08-15-nohup/)\n- [如何判断 Unix 系统 OS 版本](/2017/11/24/get-os-name/)\n## 常见错误\n- [no acceptable C compiler found in $PATH](/2017/11/22/no-c-compiler/)\n- [Ubuntu 报错 Unable to locate package](/2017/11/23/unable-to-locate-package/)\n","updated":"2020-08-21T15:43:05.000Z","path":"linux/index.html","comments":1,"layout":"page","_id":"cke4k29ui00085gqopclbv84t"},{"title":"热门文章","date":"2017-12-22T14:18:55.000Z","_content":"\n- [《把时间当作朋友》读后感](/2017/11/27/make-time-firends)\n- [Vim 插件 tern_for_vim Javascript 自动补全](/2017/09/22/vim-plugin-tern)\n- [Vim 插件 YouCompleteMe 代码自动补全](/2017/09/22/vim-plugin-youcompleteme)\n- [窗口管理工具 Tmux](/2017/09/24/tmux)\n- [Vim 插件 Ack 全局搜索文件](/2017/10/13/vim-plugin-ack)\n- [《新参者》：好东西是不会消亡的](/2017/12/26/xincanzhe)\n- [Mac 包管理神器 HomeBrew](/2017/09/07/mac-2017-09-07-homebrew)\n- [Vim 插件 ctrlp.vim 模糊搜索文件](/2017/09/23/vim-plugin-ctrlp)\n- [MD5，SHA，HMAC ，AES 在线加密计算](/2017/12/19/tool-crypto)\n- [Vim 插件 CtrlSF 全局搜索文件](/2017/10/13/vim-plugin-ctrlsf)\n\n<!-- - [《把时间当作朋友》读后感](/2017/11/27/make-time-firends) -->\n<!-- - [Vim 插件 YouCompleteMe 代码自动补全](/2017/09/22/vim-plugin-youcompleteme) -->\n<!-- - [Vim 插件 Ack 全局搜索文件](/2017/10/13/vim-plugin-ack) -->\n<!-- - [Vim 插件 ctrlp 模糊搜索文件](/2017/09/23/vim-plugin-ctrlp) -->\n<!-- - [MD5，SHA，HMAC ，AES 在线加密计算](/2017/12/19/tool-crypto) -->\n<!-- - [Vim 插件 CtrlSF 全局搜索文件](/2017/10/13/vim-plugin-ctrlsf/) -->\n<!-- - [Vim 插件 vim-airline 状态栏增强显示](/2017/09/25/vim-plugin-artline) -->\n<!-- - [Vim 插件 pathogen 插件管理](/2017/09/20/vim-plugin-pathogen) -->\n<!-- - [Hexo 使用不蒜子计算访问量](/2017/09/18/busuanzi/) -->\n<!-- - [Vim 插件 EasyGrep 全局搜索文件](/2017/10/13/vim-plugin-easygrep) -->\n<!-- [> - [如何获取指定位数随机数](/2017/12/06/get-random/) <] -->\n<!-- [> - [获取时间戳及世界时间转换](/2017/12/09/timestamp/) <] -->\n<!-- [> - [网络请求断线重连工具 Mosh](/2017/09/25/mosh/) <] -->\n","source":"hot/index.md","raw":"---\ntitle: 热门文章\ndate: 2017-12-22 14:18:55\n---\n\n- [《把时间当作朋友》读后感](/2017/11/27/make-time-firends)\n- [Vim 插件 tern_for_vim Javascript 自动补全](/2017/09/22/vim-plugin-tern)\n- [Vim 插件 YouCompleteMe 代码自动补全](/2017/09/22/vim-plugin-youcompleteme)\n- [窗口管理工具 Tmux](/2017/09/24/tmux)\n- [Vim 插件 Ack 全局搜索文件](/2017/10/13/vim-plugin-ack)\n- [《新参者》：好东西是不会消亡的](/2017/12/26/xincanzhe)\n- [Mac 包管理神器 HomeBrew](/2017/09/07/mac-2017-09-07-homebrew)\n- [Vim 插件 ctrlp.vim 模糊搜索文件](/2017/09/23/vim-plugin-ctrlp)\n- [MD5，SHA，HMAC ，AES 在线加密计算](/2017/12/19/tool-crypto)\n- [Vim 插件 CtrlSF 全局搜索文件](/2017/10/13/vim-plugin-ctrlsf)\n\n<!-- - [《把时间当作朋友》读后感](/2017/11/27/make-time-firends) -->\n<!-- - [Vim 插件 YouCompleteMe 代码自动补全](/2017/09/22/vim-plugin-youcompleteme) -->\n<!-- - [Vim 插件 Ack 全局搜索文件](/2017/10/13/vim-plugin-ack) -->\n<!-- - [Vim 插件 ctrlp 模糊搜索文件](/2017/09/23/vim-plugin-ctrlp) -->\n<!-- - [MD5，SHA，HMAC ，AES 在线加密计算](/2017/12/19/tool-crypto) -->\n<!-- - [Vim 插件 CtrlSF 全局搜索文件](/2017/10/13/vim-plugin-ctrlsf/) -->\n<!-- - [Vim 插件 vim-airline 状态栏增强显示](/2017/09/25/vim-plugin-artline) -->\n<!-- - [Vim 插件 pathogen 插件管理](/2017/09/20/vim-plugin-pathogen) -->\n<!-- - [Hexo 使用不蒜子计算访问量](/2017/09/18/busuanzi/) -->\n<!-- - [Vim 插件 EasyGrep 全局搜索文件](/2017/10/13/vim-plugin-easygrep) -->\n<!-- [> - [如何获取指定位数随机数](/2017/12/06/get-random/) <] -->\n<!-- [> - [获取时间戳及世界时间转换](/2017/12/09/timestamp/) <] -->\n<!-- [> - [网络请求断线重连工具 Mosh](/2017/09/25/mosh/) <] -->\n","updated":"2020-08-21T15:43:05.000Z","path":"hot/index.html","comments":1,"layout":"page","_id":"cke4k29uk000a5gqo4z55vtwx"},{"title":"Python 练级手册","date":"2017-11-21T21:07:36.000Z","_content":"<!-- toc -->\n## 基础\n- [Python编程规范](http://pan.baidu.com/s/1boX8P6v) 密码:p73y\n- [Python编码Yes or No.pdf](http://pan.baidu.com/s/1skNCT7v) 密码:5tta\n- [了解 PYTHONPATH](/2017/08/15/python-2017-08-15-config-pythonpath/)\n- [时间](/2017/12/10/python-datetime/)\n- [timedelta 时间差](/2018/01/22/python-datetime-timedelta/)\n- [列表 List](/2017/11/24/python-list/)\n- [isinstance 函数判断对象类型](/2018/01/13/python-isinstance/)\n- [格式化函数 format](/2018/01/03/python-format/)\n- [处理 Linux 命令](/2017/12/09/python-linux-cmd/)\n- [操作目录文件相关命令](/2017/08/11/python-2017-08-11-os-file/)\n- [SQLAlchemy 各种查询语句写法](/2017/08/14/python-2017-08-14-sqlalchemy-filter/)\n\n## 高级\n- [APScheduler 定时任务](/2018/01/23/python-apscheduler/)\n- [SQLAlchemy 数据库 ORM 框架](/2018/01/24/python-sqlalchemy/)\n- [pigar 管理 requirements.txt](/2017/08/19/python-2017-08-19-pigar/)\n- [使用 gunicorn 启动你的项目](/2017/08/15/python-2017-08-15-gunicorn-run/)\n- [使用 Supervisor 管理进程](/2017/08/18/python-2017-08-18-basic-supervisor/)\n\n### Flask\n- [Hello World](/2017/08/15/python-2017-08-15-flask-hello-world/)\n- [SQLAlchemy 框架的使用](/2018/01/25/flask-sqlalchemy/)\n- [配置多环境](/2017/08/15/python-2017-08-15-flask-env-config/)\n### pyenv\n> [pyenv](https://github.com/yyuu/pyenv) 是一款特别好用的Python版本管理器，\n使用它我们可以在不同的项目使用不同的 Python 版本，并且互不影响。\n> [pyenv-virtualenv](https://github.com/yyuu/pyenv-virtualenv) 是 pyenv 的一个 plugin（插件），\n可以用来创建基于不同Python版本的干净的虚拟环境。\n- [Linux 安装](/2017/08/10/python-2017-08-10-pyenv-linux/)\n- [Mac 安装](/2017/11/21/pyenv-mac/)\n- [常用命令](/2017/08/10/python-2017-08-10-pyenv-cmd/)\n\n## 杂谈\n\n- [Markdown](/2017/09/06/python-2017-09-06-use-markdown/)\n- [Python 微信公众号接口创建菜单编码问题](/2017/09/05/python-2017-09-05-wx-create-menu-err/)\n- [获取本地或网络图片的宽高](/2017/08/22/python-2017-08-22-get-image-size/)\n- [Linux 执行 pip 报错 command not found](/2017/08/18/python-2017-08-18-pip-not-found/)\n\n## 参考资料\n- [PyFormat](https://pyformat.info/)\n","source":"python/index.md","raw":"---\ntitle: Python 练级手册\ndate: 2017-11-21 21:07:36\n---\n<!-- toc -->\n## 基础\n- [Python编程规范](http://pan.baidu.com/s/1boX8P6v) 密码:p73y\n- [Python编码Yes or No.pdf](http://pan.baidu.com/s/1skNCT7v) 密码:5tta\n- [了解 PYTHONPATH](/2017/08/15/python-2017-08-15-config-pythonpath/)\n- [时间](/2017/12/10/python-datetime/)\n- [timedelta 时间差](/2018/01/22/python-datetime-timedelta/)\n- [列表 List](/2017/11/24/python-list/)\n- [isinstance 函数判断对象类型](/2018/01/13/python-isinstance/)\n- [格式化函数 format](/2018/01/03/python-format/)\n- [处理 Linux 命令](/2017/12/09/python-linux-cmd/)\n- [操作目录文件相关命令](/2017/08/11/python-2017-08-11-os-file/)\n- [SQLAlchemy 各种查询语句写法](/2017/08/14/python-2017-08-14-sqlalchemy-filter/)\n\n## 高级\n- [APScheduler 定时任务](/2018/01/23/python-apscheduler/)\n- [SQLAlchemy 数据库 ORM 框架](/2018/01/24/python-sqlalchemy/)\n- [pigar 管理 requirements.txt](/2017/08/19/python-2017-08-19-pigar/)\n- [使用 gunicorn 启动你的项目](/2017/08/15/python-2017-08-15-gunicorn-run/)\n- [使用 Supervisor 管理进程](/2017/08/18/python-2017-08-18-basic-supervisor/)\n\n### Flask\n- [Hello World](/2017/08/15/python-2017-08-15-flask-hello-world/)\n- [SQLAlchemy 框架的使用](/2018/01/25/flask-sqlalchemy/)\n- [配置多环境](/2017/08/15/python-2017-08-15-flask-env-config/)\n### pyenv\n> [pyenv](https://github.com/yyuu/pyenv) 是一款特别好用的Python版本管理器，\n使用它我们可以在不同的项目使用不同的 Python 版本，并且互不影响。\n> [pyenv-virtualenv](https://github.com/yyuu/pyenv-virtualenv) 是 pyenv 的一个 plugin（插件），\n可以用来创建基于不同Python版本的干净的虚拟环境。\n- [Linux 安装](/2017/08/10/python-2017-08-10-pyenv-linux/)\n- [Mac 安装](/2017/11/21/pyenv-mac/)\n- [常用命令](/2017/08/10/python-2017-08-10-pyenv-cmd/)\n\n## 杂谈\n\n- [Markdown](/2017/09/06/python-2017-09-06-use-markdown/)\n- [Python 微信公众号接口创建菜单编码问题](/2017/09/05/python-2017-09-05-wx-create-menu-err/)\n- [获取本地或网络图片的宽高](/2017/08/22/python-2017-08-22-get-image-size/)\n- [Linux 执行 pip 报错 command not found](/2017/08/18/python-2017-08-18-pip-not-found/)\n\n## 参考资料\n- [PyFormat](https://pyformat.info/)\n","updated":"2020-08-21T15:43:05.000Z","path":"python/index.html","comments":1,"layout":"page","_id":"cke4k29un000d5gqovv61u0gc"},{"title":"领取红包","date":"2018-12-07T23:16:19.000Z","_content":"\n使用支付宝扫码，或打开支付宝首页搜“607252290”领红包\n\n领到大红包的小伙伴赶紧使用哦！\n\n![redpecket](http://wxnacy-img.oss-cn-beijing.aliyuncs.com/common/2018/WechatIMG118.png)\n","source":"redpecket/index.md","raw":"---\ntitle: 领取红包\ndate: 2018-12-07 23:16:19\n---\n\n使用支付宝扫码，或打开支付宝首页搜“607252290”领红包\n\n领到大红包的小伙伴赶紧使用哦！\n\n![redpecket](http://wxnacy-img.oss-cn-beijing.aliyuncs.com/common/2018/WechatIMG118.png)\n","updated":"2020-08-21T15:43:05.000Z","path":"redpecket/index.html","comments":1,"layout":"page","_id":"cke4k29va001i5gqosj4mwras"},{"title":"在线工具","date":"2017-12-10T08:01:08.000Z","_content":"\n- [时间戳转换](/2017/12/09/timestamp/)\n- [生成随机密码](/2017/12/06/get-random/)\n- [在线加密](/2017/12/19/tool-crypto/)\n- [UrlEncode/UrlDecode 编解码](/2018/01/05/urlencode/)\n- [filesize 转换](/2018/01/06/convert-size/)\n- [JSON Format 工具](/2018/01/27/json-formatter/)\n- [二维码生成器](/2018/01/28/qrcode-marker/)\n- [在线编辑](/run/)\n","source":"tool/index.md","raw":"---\ntitle: 在线工具\ndate: 2017-12-10 08:01:08\n---\n\n- [时间戳转换](/2017/12/09/timestamp/)\n- [生成随机密码](/2017/12/06/get-random/)\n- [在线加密](/2017/12/19/tool-crypto/)\n- [UrlEncode/UrlDecode 编解码](/2018/01/05/urlencode/)\n- [filesize 转换](/2018/01/06/convert-size/)\n- [JSON Format 工具](/2018/01/27/json-formatter/)\n- [二维码生成器](/2018/01/28/qrcode-marker/)\n- [在线编辑](/run/)\n","updated":"2020-08-21T15:43:05.000Z","path":"tool/index.html","comments":1,"layout":"page","_id":"cke4k29wy001j5gqoua8rt3tm"},{"title":"Vim 专辑","date":"2017-09-20T18:02:20.000Z","_content":"\n<!-- toc -->\n\n## 基础篇\n- [Vim 基础命令](/2017/08/23/vim-2017-08-23-basic-cmd)\n## 高级篇\n- [vimgrep 全局搜索文件](/2017/10/13/vim-grep)\n- [abbreviations 快速输入](/2017/11/29/vim-abbreviations/)\n- [Mapping 映射](/2017/12/01/vim-mappings/)\n- [Operator-Pending 映射](/2017/12/02/operator-pending/)\n\n## 插件篇\n### 我的作品\n- [Vim 插件 vim-mysql 快速运行 sql](https://github.com/wxnacy/vim-mysql)\n### 编写插件\n- [Vim 如何编写插件：Hello World](/2017/12/30/vim-plugin-write-helloworld/)\n- [Vim 如何编写插件：使用 Python 编写插件](/2018/01/02/vim-plugin-py-write/)\n### 插件管理\n- [Vim 插件 pathogen 插件管理](/2017/09/20/vim-plugin-pathogen)\n### 功能\n- [Vim 插件 quickrun 快速运行](/2017/09/23/vim-plugin-quickrun)\n- [Vim 插件 expand-region 区域选中](/2017/09/23/vim-plugin-expand-region/)\n- [Vim 插件 vim-surround 单词加环绕符号](/2017/09/25/vim-plugin-surround)\n- [Vim 插件 vim-repeat 重复插件操作](/2017/09/25/vim-plugin-repeat)\n- [Vim 插件 gundo 代码回滚](/2017/09/25/vim-plugin-gundo)\n- [Vim 插件 closetag 成对标签自动补全](/2017/09/25/vim-plugin-closetag)\n- [Vim 插件 vim-trailing-whitespace 去掉行尾空格](/2017/09/25/vim-plugin-whitespace)\n- [Vim 插件 nerdcommenter 快速注释](/2017/09/25/vim-plugin-nerdcommenter/)\n### 搜索\n- [Vim 插件 ctrlp 模糊搜索文件](/2017/09/23/vim-plugin-ctrlp)\n- [Vim 插件 EasyGrep 全局搜索文件](/2017/10/13/vim-plugin-easygrep)\n- [Vim 插件 Ack 全局搜索文件](/2017/10/13/vim-plugin-ack)\n- [Vim 插件 CtrlSF 全局搜索文件](/2017/10/13/vim-plugin-ctrlsf)\n### 美化\n- [Vim 插件 vim-colors-solarized 主题](/2017/09/25/vim-plugin-solarize)\n- [Vim 插件 vim-airline 状态栏增强显示](/2017/09/25/vim-plugin-artline)\n### 代码补全\n- [Vim 插件 YouCompleteMe 代码自动补全](/2017/09/22/vim-plugin-youcompleteme)\n- [Vim 插件 tern_for_vim Javascript 自动补全](/2017/09/22/vim-plugin-tern)\n\n## 参考文献\n- [Vim 参考手册](http://vimcdoc.sourceforge.net/doc/)\n- [像 IDE 一样使用 vim](http://treelib.com/book-detail-id-48-aid-2937.html)\n- [Vim 与系统剪切板交互](http://blog.fooleap.org/using-vim-with-clipboard-on-archlinux.html)\n- [笨方法学 Vimscript](http://learnvimscriptthehardway.onefloweroneworld.com/)\n- [笨方法学Vimscript - 看云](https://www.kancloud.cn/kancloud/learn-vimscript-the-hard-way/49321)\n- [Learn Vimscript the Hard Way](http://learnvimscriptthehardway.stevelosh.com/)\n- [Vim scripting cheatsheet](https://devhints.io/vimscript)\n- [Vim help files](http://vimhelp.appspot.com/)\n","source":"vim/index.md","raw":"---\ntitle: Vim 专辑\ndate: 2017-09-20 18:02:20\n---\n\n<!-- toc -->\n\n## 基础篇\n- [Vim 基础命令](/2017/08/23/vim-2017-08-23-basic-cmd)\n## 高级篇\n- [vimgrep 全局搜索文件](/2017/10/13/vim-grep)\n- [abbreviations 快速输入](/2017/11/29/vim-abbreviations/)\n- [Mapping 映射](/2017/12/01/vim-mappings/)\n- [Operator-Pending 映射](/2017/12/02/operator-pending/)\n\n## 插件篇\n### 我的作品\n- [Vim 插件 vim-mysql 快速运行 sql](https://github.com/wxnacy/vim-mysql)\n### 编写插件\n- [Vim 如何编写插件：Hello World](/2017/12/30/vim-plugin-write-helloworld/)\n- [Vim 如何编写插件：使用 Python 编写插件](/2018/01/02/vim-plugin-py-write/)\n### 插件管理\n- [Vim 插件 pathogen 插件管理](/2017/09/20/vim-plugin-pathogen)\n### 功能\n- [Vim 插件 quickrun 快速运行](/2017/09/23/vim-plugin-quickrun)\n- [Vim 插件 expand-region 区域选中](/2017/09/23/vim-plugin-expand-region/)\n- [Vim 插件 vim-surround 单词加环绕符号](/2017/09/25/vim-plugin-surround)\n- [Vim 插件 vim-repeat 重复插件操作](/2017/09/25/vim-plugin-repeat)\n- [Vim 插件 gundo 代码回滚](/2017/09/25/vim-plugin-gundo)\n- [Vim 插件 closetag 成对标签自动补全](/2017/09/25/vim-plugin-closetag)\n- [Vim 插件 vim-trailing-whitespace 去掉行尾空格](/2017/09/25/vim-plugin-whitespace)\n- [Vim 插件 nerdcommenter 快速注释](/2017/09/25/vim-plugin-nerdcommenter/)\n### 搜索\n- [Vim 插件 ctrlp 模糊搜索文件](/2017/09/23/vim-plugin-ctrlp)\n- [Vim 插件 EasyGrep 全局搜索文件](/2017/10/13/vim-plugin-easygrep)\n- [Vim 插件 Ack 全局搜索文件](/2017/10/13/vim-plugin-ack)\n- [Vim 插件 CtrlSF 全局搜索文件](/2017/10/13/vim-plugin-ctrlsf)\n### 美化\n- [Vim 插件 vim-colors-solarized 主题](/2017/09/25/vim-plugin-solarize)\n- [Vim 插件 vim-airline 状态栏增强显示](/2017/09/25/vim-plugin-artline)\n### 代码补全\n- [Vim 插件 YouCompleteMe 代码自动补全](/2017/09/22/vim-plugin-youcompleteme)\n- [Vim 插件 tern_for_vim Javascript 自动补全](/2017/09/22/vim-plugin-tern)\n\n## 参考文献\n- [Vim 参考手册](http://vimcdoc.sourceforge.net/doc/)\n- [像 IDE 一样使用 vim](http://treelib.com/book-detail-id-48-aid-2937.html)\n- [Vim 与系统剪切板交互](http://blog.fooleap.org/using-vim-with-clipboard-on-archlinux.html)\n- [笨方法学 Vimscript](http://learnvimscriptthehardway.onefloweroneworld.com/)\n- [笨方法学Vimscript - 看云](https://www.kancloud.cn/kancloud/learn-vimscript-the-hard-way/49321)\n- [Learn Vimscript the Hard Way](http://learnvimscriptthehardway.stevelosh.com/)\n- [Vim scripting cheatsheet](https://devhints.io/vimscript)\n- [Vim help files](http://vimhelp.appspot.com/)\n","updated":"2020-08-21T15:43:05.000Z","path":"vim/index.html","comments":1,"layout":"page","_id":"cke4k29wz001k5gqo9bz2mhqn"}],"Post":[{"title":"各种文档","_content":"\n- [HTTP状态码](https://zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81#4xx%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%94%99%E8%AF%AF)\n","source":"_drafts/doc.md","raw":"---\ntitle: 各种文档\ntags: [工具]\n---\n\n- [HTTP状态码](https://zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81#4xx%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%94%99%E8%AF%AF)\n","slug":"doc","published":0,"date":"2020-08-21T17:55:56.000Z","updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k29u500015gqoeowtian8"},{"title":"alembic","_content":"\n```bash\n$ pip install alembic\n```\n\n- [alembic](http://alembic.zzzcomputing.com/en/latest/)\n","source":"_drafts/alembic.md","raw":"---\ntitle: alembic\ntags:\n---\n\n```bash\n$ pip install alembic\n```\n\n- [alembic](http://alembic.zzzcomputing.com/en/latest/)\n","slug":"alembic","published":0,"date":"2020-08-21T17:55:56.000Z","updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k29uf00055gqob0wim6co"},{"title":"Chrome extensions：显示当前地址的二维码","_content":"\n这不是编写 Chrome extensions 的教程，只是通过显示当前地址二维码这个例子，来了解一下 Chrome extensions\n<!-- more --><!-- toc -->\n\n## 目的\n这个 Demo 的目的是为了通过 Chrome 插件的形式来实现显示当前地址二维码的功能。Demo 地址为：https://github.com/wxnacy/study/tree/master/node/chrome_extensions/qrcode\n\n## 概况\n首先我们需要知道在哪可以看到 Chrome 安装了哪些插件，除了在地址栏右侧的看到插件的图标外，还可以通过键入地址 `chrome://extensions/` 进行查看\n![/images/chrome1.png](/images/chrome1.png)\n\n从这界面中，我们可以看到安装的插件列表，\n","source":"_drafts/chrome-extensions-qrcode.md","raw":"---\ntitle: Chrome extensions：显示当前地址的二维码\ntags: [javascript]\n---\n\n这不是编写 Chrome extensions 的教程，只是通过显示当前地址二维码这个例子，来了解一下 Chrome extensions\n<!-- more --><!-- toc -->\n\n## 目的\n这个 Demo 的目的是为了通过 Chrome 插件的形式来实现显示当前地址二维码的功能。Demo 地址为：https://github.com/wxnacy/study/tree/master/node/chrome_extensions/qrcode\n\n## 概况\n首先我们需要知道在哪可以看到 Chrome 安装了哪些插件，除了在地址栏右侧的看到插件的图标外，还可以通过键入地址 `chrome://extensions/` 进行查看\n![/images/chrome1.png](/images/chrome1.png)\n\n从这界面中，我们可以看到安装的插件列表，\n","slug":"chrome-extensions-qrcode","published":0,"date":"2020-08-21T17:55:56.000Z","updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k29uh00075gqo9dtabw8e"},{"title":"Docker 使用 grep 过滤日志无效","_content":"","source":"_drafts/docker-grep-log.md","raw":"---\ntitle: Docker 使用 grep 过滤日志无效\ntags: [docker]\n---\n","slug":"docker-grep-log","published":0,"date":"2020-08-21T17:55:56.000Z","updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k29uj00095gqo1zsdiycx"},{"title":"flask-login","_content":"","source":"_drafts/flask-login.md","raw":"---\ntitle: flask-login\ntags:\n---\n","slug":"flask-login","published":0,"date":"2020-08-21T17:55:56.000Z","updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k29ul000c5gqozb4pjhfd"},{"title":"使用 Docker 启动 openresty","_content":"\n```bash\n/etc/nginx/conf.d/default.conf\n```\n\n```bash\n/usr/local/openresty/nginx/conf/nginx.conf\n```\n","source":"_drafts/docker-run-openresty.md","raw":"---\ntitle: 使用 Docker 启动 openresty\ntags: [docker, openresty]\n---\n\n```bash\n/etc/nginx/conf.d/default.conf\n```\n\n```bash\n/usr/local/openresty/nginx/conf/nginx.conf\n```\n","slug":"docker-run-openresty","published":0,"date":"2020-08-21T17:55:56.000Z","updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k29un000e5gqom9d1pk0q"},{"title":"flask-routing","_content":"\n<!-- more -->\n<!-- toc -->\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\n>>> from flask import Flask\n>>> from pprint import pprint\n>>> app = Flask(__name__)\n>>> pprint(app.url_map.converters)\n{'any': <class 'werkzeug.routing.AnyConverter'>,\n 'default': <class 'werkzeug.routing.UnicodeConverter'>,\n 'float': <class 'werkzeug.routing.FloatConverter'>,\n 'int': <class 'werkzeug.routing.IntegerConverter'>,\n 'path': <class 'werkzeug.routing.PathConverter'>,\n 'string': <class 'werkzeug.routing.UnicodeConverter'>,\n 'uuid': <class 'werkzeug.routing.UUIDConverter'>}\n```\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\n>>> from flask import Flask\n>>> app = Flask(__name__)\n>>> @app.route('/<path:wikipage>')\n... def wikipage(wikipage):\n...     return wikipage\n...\n>>> app.test_client().get(\"/test\").data\nb'test'\n>>> app.test_client().get(\"/test/1\").data\nb'test/1'\n>>> @app.route('/other')\n... def other():\n...     return 'hello world'\n...\n>>> app.test_client().get(\"/other\").data\nb'hello world'\n>>> app.test_client().get(\"/other/1\").data\nb'other/1'\n```\n","source":"_drafts/flask-routing.md","raw":"---\ntitle: flask-routing\ntags: [python, flask]\n---\n\n<!-- more -->\n<!-- toc -->\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\n>>> from flask import Flask\n>>> from pprint import pprint\n>>> app = Flask(__name__)\n>>> pprint(app.url_map.converters)\n{'any': <class 'werkzeug.routing.AnyConverter'>,\n 'default': <class 'werkzeug.routing.UnicodeConverter'>,\n 'float': <class 'werkzeug.routing.FloatConverter'>,\n 'int': <class 'werkzeug.routing.IntegerConverter'>,\n 'path': <class 'werkzeug.routing.PathConverter'>,\n 'string': <class 'werkzeug.routing.UnicodeConverter'>,\n 'uuid': <class 'werkzeug.routing.UUIDConverter'>}\n```\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\n>>> from flask import Flask\n>>> app = Flask(__name__)\n>>> @app.route('/<path:wikipage>')\n... def wikipage(wikipage):\n...     return wikipage\n...\n>>> app.test_client().get(\"/test\").data\nb'test'\n>>> app.test_client().get(\"/test/1\").data\nb'test/1'\n>>> @app.route('/other')\n... def other():\n...     return 'hello world'\n...\n>>> app.test_client().get(\"/other\").data\nb'hello world'\n>>> app.test_client().get(\"/other/1\").data\nb'other/1'\n```\n","slug":"flask-routing","published":0,"date":"2020-08-21T17:55:56.000Z","updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k29uo000f5gqouqkogmz4"},{"title":"graphql","_content":"\n\n```bash\nsudo pip install \"graphene>=2.0\"\nsudo pip install graphene_sqlalchemy\nsudo pip install Flask-GraphQL\n```\n","source":"_drafts/graphql.md","raw":"---\ntitle: graphql\ntags:\n---\n\n\n```bash\nsudo pip install \"graphene>=2.0\"\nsudo pip install graphene_sqlalchemy\nsudo pip install Flask-GraphQL\n```\n","slug":"graphql","published":0,"date":"2020-08-21T17:55:56.000Z","updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k29up000i5gqowxwuz92c"},{"title":"hexo-reload-html","_content":"\n<!-- more -->\n<!-- toc -->\n{% raw %}\n<iframe id='ipynb' marginheight=\"0\" frameborder=\"0\" width='924px'  src=\"https://notebook.wxnacy.com/modules/faker/quickstart.html\" style=\"scrolling:no;\">\n</iframe>\n<script type=\"text/javascript\">\n$(\"#ipynb\").load( function() {\n// console.log($(\"#ipynb\").contents().find(\"body\").find(\"#notebook\"));\ndocument.getElementById('ipynb').height=$(\"#ipynb\").contents().find(\"#notebook\").height()+100;\n})\n</script>\n{% endraw %}\n","source":"_drafts/hexo-reload-html.md","raw":"---\ntitle: hexo-reload-html\ntags:\n---\n\n<!-- more -->\n<!-- toc -->\n{% raw %}\n<iframe id='ipynb' marginheight=\"0\" frameborder=\"0\" width='924px'  src=\"https://notebook.wxnacy.com/modules/faker/quickstart.html\" style=\"scrolling:no;\">\n</iframe>\n<script type=\"text/javascript\">\n$(\"#ipynb\").load( function() {\n// console.log($(\"#ipynb\").contents().find(\"body\").find(\"#notebook\"));\ndocument.getElementById('ipynb').height=$(\"#ipynb\").contents().find(\"#notebook\").height()+100;\n})\n</script>\n{% endraw %}\n","slug":"hexo-reload-html","published":0,"date":"2020-08-21T17:55:56.000Z","updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k29ur000j5gqo2a67jhxp"},{"title":"hexo","_content":"\nhexo new page vim\nhexo new new-art\nhexo new draft new-draft\n\nhexo server --draft\n","source":"_drafts/hexo.md","raw":"---\ntitle: hexo\ntags:\n---\n\nhexo new page vim\nhexo new new-art\nhexo new draft new-draft\n\nhexo server --draft\n","slug":"hexo","published":0,"date":"2020-08-21T17:55:56.000Z","updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k29ut000l5gqoh6irxdli"},{"title":"Maven 教程","_content":"\n## 下载\nUbuntu\n```bash\n$ apt install maven\n```\nMacOS\n```bash\n$ brew install maven\n```\n\n```bash\nmvn -v\nmvn compile\nmvn package\nmvn install\nmvn clean\n\nmvn archetype:generate\n-DgroupId=test.maven\n-DartifactId=quick\n-DarchetypeArtifactId=maven-archetype-quickstart\n-DinteractiveMode=false\n\nmvn archetype:generate -DgroupId=com.wxnacy.jar -DartifactId=ProjectJar -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false\nmvn archetype:generate -DgroupId=com.wxnacy.web -DartifactId=ProjectWar -DarchetypeArtifactId=maven-archetype-webapp -DinteractiveMode=false\n\n```\n","source":"_drafts/maven.md","raw":"---\ntitle: Maven 教程\ntags: [java]\n---\n\n## 下载\nUbuntu\n```bash\n$ apt install maven\n```\nMacOS\n```bash\n$ brew install maven\n```\n\n```bash\nmvn -v\nmvn compile\nmvn package\nmvn install\nmvn clean\n\nmvn archetype:generate\n-DgroupId=test.maven\n-DartifactId=quick\n-DarchetypeArtifactId=maven-archetype-quickstart\n-DinteractiveMode=false\n\nmvn archetype:generate -DgroupId=com.wxnacy.jar -DartifactId=ProjectJar -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false\nmvn archetype:generate -DgroupId=com.wxnacy.web -DartifactId=ProjectWar -DarchetypeArtifactId=maven-archetype-webapp -DinteractiveMode=false\n\n```\n","slug":"maven","published":0,"date":"2020-08-21T17:55:56.000Z","updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k29uu000n5gqojl5rrg55"},{"title":"node-express-request-use-time","_content":"","source":"_drafts/node-express-request-use-time.md","raw":"---\ntitle: node-express-request-use-time\ntags:\n---\n","slug":"node-express-request-use-time","published":0,"date":"2020-08-21T17:55:56.000Z","updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k29uv000p5gqob13l9xzk"},{"title":"使用 Pyinstaller 将 Python 程序打包成 shell 或 exe 可执行文件","_content":"","source":"_drafts/pyinstaller.md","raw":"---\ntitle: 使用 Pyinstaller 将 Python 程序打包成 shell 或 exe 可执行文件\ntags: [python]\n---\n","slug":"pyinstaller","published":0,"date":"2020-08-21T17:55:56.000Z","updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k29uw000q5gqobpuxex9v"},{"title":"Python 一些很棒的库和文章","_content":"\n记录一些使用 Python 编写的很棒的库和文章\n\n<!-- more -->\n\n## 库\n\n- [click](https://click.palletsprojects.com/en/7.x/) 最好的命令行解析工具\n    - [中文文档](https://click-docs-zh-cn.readthedocs.io/zh/latest/index.html)\n- [colorama](https://github.com/tartley/colorama) Python中的简单跨平台彩色终端文本\n\n## 文章\n\n- 协程\n\n","source":"_drafts/python-awesome.md","raw":"---\ntitle: Python 一些很棒的库和文章\ntags: [python]\n---\n\n记录一些使用 Python 编写的很棒的库和文章\n\n<!-- more -->\n\n## 库\n\n- [click](https://click.palletsprojects.com/en/7.x/) 最好的命令行解析工具\n    - [中文文档](https://click-docs-zh-cn.readthedocs.io/zh/latest/index.html)\n- [colorama](https://github.com/tartley/colorama) Python中的简单跨平台彩色终端文本\n\n## 文章\n\n- 协程\n\n","slug":"python-awesome","published":0,"date":"2020-08-21T17:55:56.000Z","updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k29ux000s5gqoa2h2a8jj"},{"title":"Python 装饰器","_content":"\n> 要不这样吧，如果编程语言里有个地方你弄不明白，而正好又有个人用了这个功能，那就开枪把他打死。这比学习新特性要容易些，然后过不了多久，那些活下来的程序员就会开始用 0.9.6 版的 Python，而且他们只需要使用这个版本中易于理解的那一小部分就好了（眨眼）。\n>   —— Tim Peters （传奇的核心开发者，“Python 之禅”作者）\n\n今天我们来聊一聊 Python 装饰器。\n\n<!-- more -->\n<!-- toc -->\n\n## 什么是装饰器\n\n**装饰器是可调用的对象，其参数是另一个函数（被装饰的函数）。** 装饰器可能会处理被装饰的函数，然后把它返回，或者将其替换成另一个函数或可调用对象。\n\n先来看一个例子\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef deco(func):                     # 1 创建一个装饰器\n    def inner():\n        print('running inner()')\n    return inner\n\n@deco                               # 2 使用装饰器装饰一个函数\ndef target():\n    print(\"running target()\")\n\nif __name__ == \"__main__\":\n    # 3 执行装饰器返回的函数\n    target()                        # running inner()\n    # 4 此时 target 是 inner 对象的引用\n    print(target)                   # <function deco.<locals>.inner at 0x101609378>\n```\n\n装饰器 `deco` 动态的修改了函数 `target()` 的行为，而没有修改它的内容。\n\n严格来说，装饰器只是语法糖。装饰器可以像常规的可调用对象那样调用，其参数是另一个函数，就像下面这样。\n\n```python\n>>> t = deco(target)\n>>> t()\nrunning inner\n```\n\n## 两大特性\n\n装饰器有两大特性：\n- 把被装饰的函数替换成其他函数。\n- 装饰器在加载模块时立即执行。\n\n第一个特性，通过上面的例子我们已经看到了，这是装饰器的主要作用，但并不是必须的。有时候也会将函数直接返回，只是不太常用。\n\n看一个例子 `registeration.py`\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nregistry = []\n\ndef register(func):\n    print(f'running register({func})')\n    registry.append(func)\n    return func\n\n@register\ndef f1():\n    print('running f1()')\n\n@register\ndef f2():\n    print('running f2()')\n\ndef f3():\n    print('running f3()')\n\ndef main():\n    print('running main()')\n    print(f'registry -> {registry}')\n    f1()\n    f2()\n    f3()\n\nif __name__ == \"__main__\":\n    main()\n```\n\n```python\n$ python registeration.py\nrunning register(<function f1 at 0x105485048>)  # 1\nrunning register(<function f2 at 0x1054850d0>)  # 2\nrunning main()\nregistry -> [<function f1 at 0x105cb3048>, <function f2 at 0x105cb30d0>]\nrunning f1()\nrunning f2()\nrunning f3()\n```\n\n在这个例子中，`1, 2` 的输出在 `running main()` 之前，说明了装饰器在模块加载及执行的特性。\n\n## 变量作用域\n## 参数化装饰器\n","source":"_drafts/python-decorator.md","raw":"---\ntitle: Python 装饰器\ntags: [python]\n---\n\n> 要不这样吧，如果编程语言里有个地方你弄不明白，而正好又有个人用了这个功能，那就开枪把他打死。这比学习新特性要容易些，然后过不了多久，那些活下来的程序员就会开始用 0.9.6 版的 Python，而且他们只需要使用这个版本中易于理解的那一小部分就好了（眨眼）。\n>   —— Tim Peters （传奇的核心开发者，“Python 之禅”作者）\n\n今天我们来聊一聊 Python 装饰器。\n\n<!-- more -->\n<!-- toc -->\n\n## 什么是装饰器\n\n**装饰器是可调用的对象，其参数是另一个函数（被装饰的函数）。** 装饰器可能会处理被装饰的函数，然后把它返回，或者将其替换成另一个函数或可调用对象。\n\n先来看一个例子\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef deco(func):                     # 1 创建一个装饰器\n    def inner():\n        print('running inner()')\n    return inner\n\n@deco                               # 2 使用装饰器装饰一个函数\ndef target():\n    print(\"running target()\")\n\nif __name__ == \"__main__\":\n    # 3 执行装饰器返回的函数\n    target()                        # running inner()\n    # 4 此时 target 是 inner 对象的引用\n    print(target)                   # <function deco.<locals>.inner at 0x101609378>\n```\n\n装饰器 `deco` 动态的修改了函数 `target()` 的行为，而没有修改它的内容。\n\n严格来说，装饰器只是语法糖。装饰器可以像常规的可调用对象那样调用，其参数是另一个函数，就像下面这样。\n\n```python\n>>> t = deco(target)\n>>> t()\nrunning inner\n```\n\n## 两大特性\n\n装饰器有两大特性：\n- 把被装饰的函数替换成其他函数。\n- 装饰器在加载模块时立即执行。\n\n第一个特性，通过上面的例子我们已经看到了，这是装饰器的主要作用，但并不是必须的。有时候也会将函数直接返回，只是不太常用。\n\n看一个例子 `registeration.py`\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nregistry = []\n\ndef register(func):\n    print(f'running register({func})')\n    registry.append(func)\n    return func\n\n@register\ndef f1():\n    print('running f1()')\n\n@register\ndef f2():\n    print('running f2()')\n\ndef f3():\n    print('running f3()')\n\ndef main():\n    print('running main()')\n    print(f'registry -> {registry}')\n    f1()\n    f2()\n    f3()\n\nif __name__ == \"__main__\":\n    main()\n```\n\n```python\n$ python registeration.py\nrunning register(<function f1 at 0x105485048>)  # 1\nrunning register(<function f2 at 0x1054850d0>)  # 2\nrunning main()\nregistry -> [<function f1 at 0x105cb3048>, <function f2 at 0x105cb30d0>]\nrunning f1()\nrunning f2()\nrunning f3()\n```\n\n在这个例子中，`1, 2` 的输出在 `running main()` 之前，说明了装饰器在模块加载及执行的特性。\n\n## 变量作用域\n## 参数化装饰器\n","slug":"python-decorator","published":0,"date":"2020-08-21T17:55:56.000Z","updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k29uy000u5gqohov56px4"},{"title":"test","_content":"\n\n{% raw %}\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title></title>\n</head>\n<body>\n    <button onClick=\"login()\">登陆</button>\n    <button onClick=\"user()\">信息</button>\n\n    <script>\n        function login(){\n            fetch('/adminapi/v3/test/login', {\n                method: \"POST\"\n            }).then(function(res){\n                return res.json()\n            }).then(function(data){\n                console.log(data);\n            })\n        };\n        function user(){\n            fetch('/adminapi/v3/test/user', {\n                method: \"GET\",\n            }).then(function(res){\n                return res.json()\n            }).then(function(data){\n                console.log(data);\n            })\n        };\n    </script>\n</body>\n</html>\n{% endraw %}\n","source":"_drafts/test.md","raw":"---\ntitle: test\ntags:\n---\n\n\n{% raw %}\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title></title>\n</head>\n<body>\n    <button onClick=\"login()\">登陆</button>\n    <button onClick=\"user()\">信息</button>\n\n    <script>\n        function login(){\n            fetch('/adminapi/v3/test/login', {\n                method: \"POST\"\n            }).then(function(res){\n                return res.json()\n            }).then(function(data){\n                console.log(data);\n            })\n        };\n        function user(){\n            fetch('/adminapi/v3/test/user', {\n                method: \"GET\",\n            }).then(function(res){\n                return res.json()\n            }).then(function(data){\n                console.log(data);\n            })\n        };\n    </script>\n</body>\n</html>\n{% endraw %}\n","slug":"test","published":0,"date":"2020-08-21T17:55:56.000Z","updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k29uz000x5gqoldlalyqv"},{"title":"ubunto1604-nginx","_content":"","source":"_drafts/ubunto1604-nginx.md","raw":"---\ntitle: ubunto1604-nginx\ntags:\n---\n","slug":"ubunto1604-nginx","published":0,"date":"2020-08-21T17:55:56.000Z","updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k29v0000z5gqo9fj4u90m"},{"title":"spring-data-jparepository","_content":"\n```java\npublic interface JpaRepository<T, ID extends Serializable> extends PagingAndSortingRepository<T, ID>, QueryByExampleExecutor<T> {\n    List<T> findAll();\n\n    List<T> findAll(Sort var1);\n\n    List<T> findAll(Iterable<ID> var1);\n\n    <S extends T> List<S> save(Iterable<S> var1);\n\n    void flush();\n\n    <S extends T> S saveAndFlush(S var1);\n\n    void deleteInBatch(Iterable<T> var1);\n\n    void deleteAllInBatch();\n\n    T getOne(ID var1);\n\n    <S extends T> List<S> findAll(Example<S> var1);\n\n    <S extends T> List<S> findAll(Example<S> var1, Sort var2);\n\n}\n```\n\n- [Spring Data JPA 2.0.2.RELEASE API](https://docs.spring.io/spring-data/data-jpa/docs/current/api/)\n- [Interface JpaRepository](https://docs.spring.io/spring-data/data-jpa/docs/current/api/)\n","source":"_drafts/spring-data-jparepository.md","raw":"---\ntitle: spring-data-jparepository\ntags: [spring, jpa]\n---\n\n```java\npublic interface JpaRepository<T, ID extends Serializable> extends PagingAndSortingRepository<T, ID>, QueryByExampleExecutor<T> {\n    List<T> findAll();\n\n    List<T> findAll(Sort var1);\n\n    List<T> findAll(Iterable<ID> var1);\n\n    <S extends T> List<S> save(Iterable<S> var1);\n\n    void flush();\n\n    <S extends T> S saveAndFlush(S var1);\n\n    void deleteInBatch(Iterable<T> var1);\n\n    void deleteAllInBatch();\n\n    T getOne(ID var1);\n\n    <S extends T> List<S> findAll(Example<S> var1);\n\n    <S extends T> List<S> findAll(Example<S> var1, Sort var2);\n\n}\n```\n\n- [Spring Data JPA 2.0.2.RELEASE API](https://docs.spring.io/spring-data/data-jpa/docs/current/api/)\n- [Interface JpaRepository](https://docs.spring.io/spring-data/data-jpa/docs/current/api/)\n","slug":"spring-data-jparepository","published":0,"date":"2020-08-21T17:55:56.000Z","updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k29v000115gqonajzj2kv"},{"title":"微信第三方平台授权全教程","_content":"\n迫于工作原因，最近一周一直在搞微信第三方平台授权的事情，不得不说微信的这个各种平台真是搞得让人头疼，文档写的也不清晰，各种莫名其妙的坑，凭着各种 google 总算是跑通了流程，在此准备总结下整个流程，也算对得起这段时间消耗的脑细胞，如果恰巧能帮到你，那就太好了。\n<!-- more --><!-- toc -->\n首先认识第三方平台是干什么的，假设一个小公司，没能力请程序猿开发公众平台功能，也没能力找运营来运营自己的公众平台，而他又想要有一个看上次不错能吸粉的公众号。此时我有能力开发各种功能，那我就是作为第三方平台的存在，我想在第三方平台上操作该公司公众号的种种业务，第一步就要让他对我进行授权。\n\n## 创建第三方平台\n\n不对，第一步并不是授权，而是先创建一个自己的第三方平台，注册登录微信[开发平台](https://open.weixin.qq.com/)，然后点击`管理中心==》第三方平台==》创建第三方平台`，如图\n\n![wx1](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/upload/2018/wxo1.jpeg)\n\n### 输入基本信息\n\n点击创建第三方平台后，就进入各种填写信息的步骤了，本来第一项没什么好说的，就是自己平台的基本信息，但是到了上传 logo 这出了点问题。\n\n第一次让设计同学传了一张图，可能时间太长了，提示重新打开输入页面，照做之，吭哧吭哧把上边的必要信息填完后，再次上传，提示图片不符合尺寸。\n\n贴给设计同学，他也不服气，这就是 `108x108` 怎么就不符合，我又重复实验几次，还是这样，咋回事，郁闷了半天，突然想是不是微信出问题，把图给同事让他上传一次，成功！？\n\n呵呵，Are you kidding me？就这样本来应该是最简单的第一个步骤，折腾了好久了，直到第二天在我的电脑上传才回复正常，心好累，我隐约觉得往前不会太顺利。\n\n### 选择权限\n\n怀着忐忑的心情来到第二步，这一步是真正的选择困难症，选择开发公众号后，列出了一长溜的权限，挨个看过之后，选择了网页服务和用户管理权限，你也不用担心，后边还是可以改的，所以你可以先大概选几个可能会用到的权限。\n\n### 填写开发资料\n\n这一步要考验真正的技术了，只是为了填写这一页的资料，可能你就要进行很多开发工作了，我们慢慢说。\n\n- **授权流程相关**\n\n\n","source":"_drafts/wx-open-guide.md","raw":"---\ntitle: 微信第三方平台授权全教程\ntags: [微信]\n---\n\n迫于工作原因，最近一周一直在搞微信第三方平台授权的事情，不得不说微信的这个各种平台真是搞得让人头疼，文档写的也不清晰，各种莫名其妙的坑，凭着各种 google 总算是跑通了流程，在此准备总结下整个流程，也算对得起这段时间消耗的脑细胞，如果恰巧能帮到你，那就太好了。\n<!-- more --><!-- toc -->\n首先认识第三方平台是干什么的，假设一个小公司，没能力请程序猿开发公众平台功能，也没能力找运营来运营自己的公众平台，而他又想要有一个看上次不错能吸粉的公众号。此时我有能力开发各种功能，那我就是作为第三方平台的存在，我想在第三方平台上操作该公司公众号的种种业务，第一步就要让他对我进行授权。\n\n## 创建第三方平台\n\n不对，第一步并不是授权，而是先创建一个自己的第三方平台，注册登录微信[开发平台](https://open.weixin.qq.com/)，然后点击`管理中心==》第三方平台==》创建第三方平台`，如图\n\n![wx1](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/upload/2018/wxo1.jpeg)\n\n### 输入基本信息\n\n点击创建第三方平台后，就进入各种填写信息的步骤了，本来第一项没什么好说的，就是自己平台的基本信息，但是到了上传 logo 这出了点问题。\n\n第一次让设计同学传了一张图，可能时间太长了，提示重新打开输入页面，照做之，吭哧吭哧把上边的必要信息填完后，再次上传，提示图片不符合尺寸。\n\n贴给设计同学，他也不服气，这就是 `108x108` 怎么就不符合，我又重复实验几次，还是这样，咋回事，郁闷了半天，突然想是不是微信出问题，把图给同事让他上传一次，成功！？\n\n呵呵，Are you kidding me？就这样本来应该是最简单的第一个步骤，折腾了好久了，直到第二天在我的电脑上传才回复正常，心好累，我隐约觉得往前不会太顺利。\n\n### 选择权限\n\n怀着忐忑的心情来到第二步，这一步是真正的选择困难症，选择开发公众号后，列出了一长溜的权限，挨个看过之后，选择了网页服务和用户管理权限，你也不用担心，后边还是可以改的，所以你可以先大概选几个可能会用到的权限。\n\n### 填写开发资料\n\n这一步要考验真正的技术了，只是为了填写这一页的资料，可能你就要进行很多开发工作了，我们慢慢说。\n\n- **授权流程相关**\n\n\n","slug":"wx-open-guide","published":0,"date":"2020-08-21T17:55:56.000Z","updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k29v100145gqox4mvmyw2"},{"title":"微信支付调用报错【签名错误】详解","_content":"\n微信的 API 真的让人狠的牙痒痒，却又不得不用，抱怨的先不说了，先来解决今天的问题。\n\n<!-- more -->\n<!-- toc -->\n\n网上搜了下，调用支付相关接口，报【签名错误】的人真是不胜其数，这不算什么，神奇的是他们最后查到的原因还各不相同，我再结合自己出现的问题，在这里总结一下哪些操作可能会出现【签名错误】\n\n官网文档镇楼：https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=4_3\n\n校验工具压惊：https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=20_1\n\n## 参数完全参与\n\n**接口的参数除了 `sign`，必须全部参数签名运算**\n\n理论上这是一个基本的条件，因为签名本身就是为了防止网络请求过程中被第三方篡改参数，但是我还是漏掉了一些参数。\n\n这就是为什么我用上面的【校验工具】验证签名完全没有问题，但是请求却依然报错的原因。\n\n我反思了下，大概是因为长久以来对微信 API 的恐怖经验造成的，让我把精力放在了其他的显式问题上，也就是下面要说到的。\n\n## 三个关键信息\n\n\n\n\n\n\n\n\n","source":"_drafts/wx-pay-sign-error.md","raw":"---\ntitle: 微信支付调用报错【签名错误】详解\ntags: [微信]\n---\n\n微信的 API 真的让人狠的牙痒痒，却又不得不用，抱怨的先不说了，先来解决今天的问题。\n\n<!-- more -->\n<!-- toc -->\n\n网上搜了下，调用支付相关接口，报【签名错误】的人真是不胜其数，这不算什么，神奇的是他们最后查到的原因还各不相同，我再结合自己出现的问题，在这里总结一下哪些操作可能会出现【签名错误】\n\n官网文档镇楼：https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=4_3\n\n校验工具压惊：https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=20_1\n\n## 参数完全参与\n\n**接口的参数除了 `sign`，必须全部参数签名运算**\n\n理论上这是一个基本的条件，因为签名本身就是为了防止网络请求过程中被第三方篡改参数，但是我还是漏掉了一些参数。\n\n这就是为什么我用上面的【校验工具】验证签名完全没有问题，但是请求却依然报错的原因。\n\n我反思了下，大概是因为长久以来对微信 API 的恐怖经验造成的，让我把精力放在了其他的显式问题上，也就是下面要说到的。\n\n## 三个关键信息\n\n\n\n\n\n\n\n\n","slug":"wx-pay-sign-error","published":0,"date":"2020-08-21T17:55:56.000Z","updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k29v300165gqoas7x47sh"},{"title":"人生为什么活的这么艰难？","date":"2016-03-25T03:53:00.000Z","_content":"\n现在是北京凌晨两点多，差不多是平常快要入睡的时间。\n但是今天不同，近一个月来首次12点之前陪老婆睡觉。\n然而经历了两个多小时的代码梦加上翻来覆去的头疼，我忍无可忍的坐起身来清醒了一番。\n然后，就再也睡不着了。\n\n<!-- more -->\n<!-- toc -->\n\n想想这段时间真的很操蛋。\n忘了什么时候，大概是我与生俱来的责任感（呵呵，老子就是喜欢这么夸自己），\n每天都很晚才能入睡，晚则4 5点，早也1 2点，\n老婆称我们这叫一面夫妻，晚上我回来见她睡梦中脸一面，\n早上她走之前见我睡死的脸一面。\n\n这段时间最对不起的就是我的老婆大人，本应该陪她一起吃饭一起睡觉的时间，\n我都在陪着代码。怨念也随着我说，过几天就能早点回来的次数增加，而越来越深。\n也是个经历过了绝望的女人。\n\n偶尔我狠下心来盖下笔记本早点回来，\n她终于看到了不睡死过去的我，开始是高兴的，\n然后当瞥见我带回来的电脑时，还是一声咆哮，怎么又把电脑带回来了。\n我也只能无奈的笑笑，想要先陪她睡着，她还是会催促我早点写完早点睡觉，\n我还能说什么呢，唯有起身草代码到2点半。\n\n最近不知道为什么左边后脑勺肿起来一片，各种疼痛加烦躁，\n摸着同样发疼脖子想起一些往事。那大概是小学的时候，有一天上课的时候突然脖子一疼，\n我呼啦一把，掉下来一个不知道什么虫子，我在摸脖子就凸起了一个包，位置在后边靠左，\n对，就是皮特帕克被蜘蛛咬的地方。然后就只是凸起了一块也不疼，这么多年回去了，\n终于随着这次头肿有了反应，刚又摸了下，哎呦，卧槽，疼。\n所以我预感到过不了多久，我就要穿上紧身衣去拯救世界了。\n\n其实失眠的时候感受着老婆均匀的呼吸，也是很安心的，\n至少给了我再累死累活一段时间的动力。\n\n听说你们今天开4.0的会了，呵呵哒\n\n","source":"_posts/2017-09-17-life-so-hard.md","raw":"---\ntitle: 人生为什么活的这么艰难？\ndate: 2016-03-25 03:53:00\ntags: [杂谈]\n---\n\n现在是北京凌晨两点多，差不多是平常快要入睡的时间。\n但是今天不同，近一个月来首次12点之前陪老婆睡觉。\n然而经历了两个多小时的代码梦加上翻来覆去的头疼，我忍无可忍的坐起身来清醒了一番。\n然后，就再也睡不着了。\n\n<!-- more -->\n<!-- toc -->\n\n想想这段时间真的很操蛋。\n忘了什么时候，大概是我与生俱来的责任感（呵呵，老子就是喜欢这么夸自己），\n每天都很晚才能入睡，晚则4 5点，早也1 2点，\n老婆称我们这叫一面夫妻，晚上我回来见她睡梦中脸一面，\n早上她走之前见我睡死的脸一面。\n\n这段时间最对不起的就是我的老婆大人，本应该陪她一起吃饭一起睡觉的时间，\n我都在陪着代码。怨念也随着我说，过几天就能早点回来的次数增加，而越来越深。\n也是个经历过了绝望的女人。\n\n偶尔我狠下心来盖下笔记本早点回来，\n她终于看到了不睡死过去的我，开始是高兴的，\n然后当瞥见我带回来的电脑时，还是一声咆哮，怎么又把电脑带回来了。\n我也只能无奈的笑笑，想要先陪她睡着，她还是会催促我早点写完早点睡觉，\n我还能说什么呢，唯有起身草代码到2点半。\n\n最近不知道为什么左边后脑勺肿起来一片，各种疼痛加烦躁，\n摸着同样发疼脖子想起一些往事。那大概是小学的时候，有一天上课的时候突然脖子一疼，\n我呼啦一把，掉下来一个不知道什么虫子，我在摸脖子就凸起了一个包，位置在后边靠左，\n对，就是皮特帕克被蜘蛛咬的地方。然后就只是凸起了一块也不疼，这么多年回去了，\n终于随着这次头肿有了反应，刚又摸了下，哎呦，卧槽，疼。\n所以我预感到过不了多久，我就要穿上紧身衣去拯救世界了。\n\n其实失眠的时候感受着老婆均匀的呼吸，也是很安心的，\n至少给了我再累死累活一段时间的动力。\n\n听说你们今天开4.0的会了，呵呵哒\n\n","slug":"life-so-hard","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a3s001l5gqodp9t4z2t"},{"title":"博客迁移到 hexo","date":"2017-09-17T19:10:24.000Z","_content":"\n很早就想搭建自己的博客，两个月前用 python + markdown 搭建了自己的博客，服务器采用 openresty + gunicorn 启动服务。\n\n<!-- more -->\n\n用了一段时间，自己也用 python 处理了 markdown 转静态页面的一些问题，但是跟网上一些个人博客对比在方便度上总是有很大差别，最近接触到 [Hexo](https://hexo.io/) 感觉很方便，决定将博客迁移过来。\n\n现在这个[wxnacy 博客](http://wxnacy.com)使用 hexo + openresty 部署，主题采用[Yilia](https://github.com/litten/hexo-theme-yilia)主题\n\n贴上几张老站截图当做纪念\n\n\n![image](/images/screen_shot_python_index.jpg)\n![image](/images/screen_shot_category.jpg)\n![image](/images/screen_shot_mac_homebrew.jpg)\n\n","source":"_posts/2017-09-17-blog-to-hexo.md","raw":"---\ntitle: 博客迁移到 hexo\ndate: 2017-09-17 19:10:24\ntags: hexo\n---\n\n很早就想搭建自己的博客，两个月前用 python + markdown 搭建了自己的博客，服务器采用 openresty + gunicorn 启动服务。\n\n<!-- more -->\n\n用了一段时间，自己也用 python 处理了 markdown 转静态页面的一些问题，但是跟网上一些个人博客对比在方便度上总是有很大差别，最近接触到 [Hexo](https://hexo.io/) 感觉很方便，决定将博客迁移过来。\n\n现在这个[wxnacy 博客](http://wxnacy.com)使用 hexo + openresty 部署，主题采用[Yilia](https://github.com/litten/hexo-theme-yilia)主题\n\n贴上几张老站截图当做纪念\n\n\n![image](/images/screen_shot_python_index.jpg)\n![image](/images/screen_shot_category.jpg)\n![image](/images/screen_shot_mac_homebrew.jpg)\n\n","slug":"blog-to-hexo","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a3u001m5gqo8sn8iwal"},{"title":"Git 工具 submodule","date":"2017-09-19T22:14:07.000Z","_content":"\n> Git submodule 是一个很好的多项目使用共同类库的工具，他允许类库项目做为repository,子项目做为一个单独的 Git 项目存在父项目中，子项目可以有自己的独立的commit，push，pull。而父项目以Submodule的形式包含子项目，父项目可以指定子项目header，父项目中会的提交信息包含Submodule的信息，再clone父项目的时候可以把Submodule初始化。\n\n<!-- more -->\n添加\n```bash\n$ git submodule add https://github.com/chaconinc/DbConnector\n```\n\n通过 `git status` 查看状态\n```bash\n$ git status\nOn branch master\nYour branch is up-to-date with 'origin/master'.\n\nChanges to be committed:\n  (use \"git reset HEAD <file>...\" to unstage)\n\n\tnew file:   .gitmodules\n\tnew file:   DbConnector\n```\n\n此时项目中增加一个 ***.gitmodules*** 文件\n```bash\n$ cat .gitmodules\n[submodule \"DbConnector\"]\n\tpath = DbConnector\n\turl = https://github.com/chaconinc/DbConnector\n```\n增加一个模块，该文件就会增加一条记录。\n该文件也会受到版本控制，这样项目就知道从哪里获取子模块\n\n## 克隆含有子模块的项目\n接下来我们将会克隆一个含有子模块的项目。 当你在克隆这样的项目时，默认会包含该子模块目录，但其中还没有任何文件：\n```bash\n$ git clone https://github.com/chaconinc/MainProject\n```\n现在 DbConnector 目录是空的，只有执行如下两个命令才可以\n```bash\n$ git submodule init\n$ git submodule update\n```\n或者\n```bash\n$ git submodule update --init --recursive\n```\n不过还有更简单一点的方式。 如果给 `git clone` 命令传递 `--recursive` 选项，它就会自动初始化并更新仓库中的每一个子模块。\n```bash\n$ git clone --recursive https://github.com/chaconinc/MainProject\n```\n\n## 删除子模块\n想要删除子模块需要进行两部操作\n```bash\n$ rm -rf DbConnector/\n$ git rm DbConnector/\n```\n此时想要重新添加该子模块可能会报 ***'DbConnector' already exists in the index*** 的错误，此时我们需要加上 `--force` 参数\n```bash\n$ git submodule add --force https://github.com/chaconinc/DbConnector\n```\n\n## 参考文献\n- [Git 工具 - 子模块](https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%AD%90%E6%A8%A1%E5%9D%97)\n","source":"_posts/2017-09-19-git-submodule.md","raw":"---\ntitle: Git 工具 submodule\ndate: 2017-09-19 22:14:07\ntags: [git]\n---\n\n> Git submodule 是一个很好的多项目使用共同类库的工具，他允许类库项目做为repository,子项目做为一个单独的 Git 项目存在父项目中，子项目可以有自己的独立的commit，push，pull。而父项目以Submodule的形式包含子项目，父项目可以指定子项目header，父项目中会的提交信息包含Submodule的信息，再clone父项目的时候可以把Submodule初始化。\n\n<!-- more -->\n添加\n```bash\n$ git submodule add https://github.com/chaconinc/DbConnector\n```\n\n通过 `git status` 查看状态\n```bash\n$ git status\nOn branch master\nYour branch is up-to-date with 'origin/master'.\n\nChanges to be committed:\n  (use \"git reset HEAD <file>...\" to unstage)\n\n\tnew file:   .gitmodules\n\tnew file:   DbConnector\n```\n\n此时项目中增加一个 ***.gitmodules*** 文件\n```bash\n$ cat .gitmodules\n[submodule \"DbConnector\"]\n\tpath = DbConnector\n\turl = https://github.com/chaconinc/DbConnector\n```\n增加一个模块，该文件就会增加一条记录。\n该文件也会受到版本控制，这样项目就知道从哪里获取子模块\n\n## 克隆含有子模块的项目\n接下来我们将会克隆一个含有子模块的项目。 当你在克隆这样的项目时，默认会包含该子模块目录，但其中还没有任何文件：\n```bash\n$ git clone https://github.com/chaconinc/MainProject\n```\n现在 DbConnector 目录是空的，只有执行如下两个命令才可以\n```bash\n$ git submodule init\n$ git submodule update\n```\n或者\n```bash\n$ git submodule update --init --recursive\n```\n不过还有更简单一点的方式。 如果给 `git clone` 命令传递 `--recursive` 选项，它就会自动初始化并更新仓库中的每一个子模块。\n```bash\n$ git clone --recursive https://github.com/chaconinc/MainProject\n```\n\n## 删除子模块\n想要删除子模块需要进行两部操作\n```bash\n$ rm -rf DbConnector/\n$ git rm DbConnector/\n```\n此时想要重新添加该子模块可能会报 ***'DbConnector' already exists in the index*** 的错误，此时我们需要加上 `--force` 参数\n```bash\n$ git submodule add --force https://github.com/chaconinc/DbConnector\n```\n\n## 参考文献\n- [Git 工具 - 子模块](https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%AD%90%E6%A8%A1%E5%9D%97)\n","slug":"git-submodule","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a3v001o5gqovzixldgb"},{"title":"Hexo 使用不蒜子计算访问量","date":"2017-09-18T17:55:54.000Z","_content":"\n> 静态网页最快接入计算访问量插件[ 不蒜子 ](http://busuanzi.ibruce.info/)\n\n<!-- more -->\n\n接入方式很简单只需要将如下代码加入到页面中想要显示的位置\n```javascript\n<script async src=\"//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js\"></script>\n<span id=\"busuanzi_container_site_pv\">\n本站总访问量<span id=\"busuanzi_value_site_pv\"></span>次\n本站访客数<span id=\"busuanzi_value_site_uv\"></span>人次\n本文总阅读量<span id=\"busuanzi_value_page_pv\"></span>次\n</span>\n```\n在 hexo 中使用不蒜子，只需要将上边这段代码加入到你使用的模板的 footer.ejs 中\n位置在 ***themes/你的主题/layout/_partial/footer.ejs***\n```javascript\n<footer id=\"footer\">\n  <div class=\"outer\">\n    <div id=\"footer-info\">\n    \t<div class=\"footer-left\">\n    \t\t&copy; <%= date(new Date(), 'YYYY') %> <%= config.author || config.title %>\n        <script async src=\"//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js\"></script>\n            <span id=\"busuanzi_container_site_pv\">\n            本站总访问量<span id=\"busuanzi_value_site_pv\"></span>次\n            本站访客数<span id=\"busuanzi_value_site_uv\"></span>人次\n            本文总阅读量<span id=\"busuanzi_value_page_pv\"></span>次\n            </span>\n    \t</div>\n      \t<div class=\"footer-right\">\n      \t\t<a href=\"http://hexo.io/\" target=\"_blank\">Hexo</a>  Theme <a href=\"https://github.com/litten/hexo-theme-yilia\" target=\"_blank\">Yilia</a> by Litten\n      \t</div>\n    </div>\n  </div>\n</footer>\n```\n当然你也可以放在任何你想展示的地方\n如果你是刚建站，只想计数，不想展示，则只引入第一行 js 文件即可\n```javascript\n<script async src=\"//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js\"></script>\n```\n\n","source":"_posts/2017-09-18-busuanzi.md","raw":"---\ntitle: Hexo 使用不蒜子计算访问量\ndate: 2017-09-18 17:55:54\ntags: [hexo]\n---\n\n> 静态网页最快接入计算访问量插件[ 不蒜子 ](http://busuanzi.ibruce.info/)\n\n<!-- more -->\n\n接入方式很简单只需要将如下代码加入到页面中想要显示的位置\n```javascript\n<script async src=\"//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js\"></script>\n<span id=\"busuanzi_container_site_pv\">\n本站总访问量<span id=\"busuanzi_value_site_pv\"></span>次\n本站访客数<span id=\"busuanzi_value_site_uv\"></span>人次\n本文总阅读量<span id=\"busuanzi_value_page_pv\"></span>次\n</span>\n```\n在 hexo 中使用不蒜子，只需要将上边这段代码加入到你使用的模板的 footer.ejs 中\n位置在 ***themes/你的主题/layout/_partial/footer.ejs***\n```javascript\n<footer id=\"footer\">\n  <div class=\"outer\">\n    <div id=\"footer-info\">\n    \t<div class=\"footer-left\">\n    \t\t&copy; <%= date(new Date(), 'YYYY') %> <%= config.author || config.title %>\n        <script async src=\"//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js\"></script>\n            <span id=\"busuanzi_container_site_pv\">\n            本站总访问量<span id=\"busuanzi_value_site_pv\"></span>次\n            本站访客数<span id=\"busuanzi_value_site_uv\"></span>人次\n            本文总阅读量<span id=\"busuanzi_value_page_pv\"></span>次\n            </span>\n    \t</div>\n      \t<div class=\"footer-right\">\n      \t\t<a href=\"http://hexo.io/\" target=\"_blank\">Hexo</a>  Theme <a href=\"https://github.com/litten/hexo-theme-yilia\" target=\"_blank\">Yilia</a> by Litten\n      \t</div>\n    </div>\n  </div>\n</footer>\n```\n当然你也可以放在任何你想展示的地方\n如果你是刚建站，只想计数，不想展示，则只引入第一行 js 文件即可\n```javascript\n<script async src=\"//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js\"></script>\n```\n\n","slug":"busuanzi","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a3w001p5gqozlw3ajjh"},{"title":"Mysql 配置文件 my.cnf","date":"2017-09-19T17:04:51.000Z","_content":"\n> Mysql 配置文件为 my.cnf，它所在位置根据安装时设定的\n\n<!-- more -->\n```bash\n/etc/my.cnf\n/etc/mysql/my.cnf\n/opt/mysql/etc/my.cnf\n~/.my.cnf\n```\n当启动 mysqld 服务时，它会根据如上列表的顺序读取 my.cnf\n如果存在多个配置文件，mysql 会以最后一个配置中的参数为准\n\n## 常用配置\n\n```bash\nport                   = 3306            # mysqld服务运行时的端口号，默认为3306\nsocket                 = /tmp/mysql.sock # socket文件是linux/unix系统特有的，用户在该环境下的客户端连接可以不通过tcp/ip网络，而直接使用socket文件连接\nback_log               = 300             # 该值为设定档mysql暂时停止响应新的请求前，短时间内有多少个请求可以存在堆栈内，如果系统在短时间内有很多的连接，应该增大该值，该值最好设置小于512的整数\nskip-networking                          # 不在tcp/ip端口上进行监听，所有的连接都是通过本地的socket文件连接，这样可以提高安全性，确定是不能通过网络连接数据库。\nskip-locking                             # 避免mysql的外部锁定，增强稳定性\nskip-name-resolve                        # 避免mysql对外部的连接进行DNS解析，若使用此设置，那么远程主机连接时只能使用ip，而不能使用域名\nmax_connections        = 3000            # 指定mysql服务所允许的最大连接进程数，\nmax_connect_errors     = 1000            # 每个主机连接允许异常中断的次数，当超过该次数mysql服务器将禁止该主机的连接请求，直到mysql服务重启，或者flushhosts命令清空host的相关信息\ntable_cache            = 614k            # 表的高速缓冲区的大小，当mysql访问一个表时，如果mysql表缓冲区还有空间，那么这个表就会被打开通放入高速缓冲区，好处是可以更快速的访问表中的内容。\n                                         # 如果open_tables和opened_tables的值接近该值，那么久该增加该值的大小\nmax_allowed_packet     = 4M              # 设定在网络传输中一次可以传输消息的最大值，系统默认为1M，最大可以是1G\nsort_buffer_size       = 16M             # 排序缓冲区用来处理类似orderby以及groupby队列所引起的排序，系统默认大小为2M,该参数对应分配内存是每个连接独占的，若有100个连接，实际分配的排序缓冲区大小为6*100；推荐设置为6M-8M\njoin_buffer_size 8M                      # 联合查询操作所使用的缓冲区大小。\nthread_cache_size      = 64              # 设置threadcache池中可以缓存连接线程的最大数量，默认为0，该值表示可以重新利用保存在缓存中线程的数量，当断开连接时若缓存中还有空间，那么客户端的线程将被放到缓存中，如果线程重新被请求，那么请求将从缓存中读取，若果缓存中是空的或者是新的请求，那么线程将被重新创建。设置规律为：1G内存设置为8,2G内存设置为16,4G以上设置为64\nquery_cache_size       = 64M             # 指定mysql查询缓冲区的大小，用来缓冲select的结果，并在下一次同样查询的时候不再执行查询而直接返回结果，根据Qcache_lowmem_prunes的大小，来查看当前的负载是否足够高\nquery_cache_limit      = 4M              # 只有小于该值的结果才被缓冲，放置一个极大的结果将其他所有的查询结果都覆盖\ntmp_table_size 256M                      # 内存临时表的大小，如果超过该值，会将临时表写入磁盘\ndefault_storage_engine = MYISAM          # 创建表时默认使用的存储引擎\nlog-bin                = mysql-bin       # 打开二进制日志功能\nkey_buffer_size        = 384M            # 指定索引缓冲区的大小，内存为4G时刻设置为256M或384M\nread_buffer_size       = 8M              # 用来做MYISAM表全表扫描的缓冲大小\n```\n\n## 常用配置\n```bash\n[client]\ndefault-character-set = utf8\nport = 3306\nsocket = /tmp/mysql.sock\n[mysqld]\nuser = mysql\nport = 3306\nsocket = /tmp/mysql.sock\nbasedir = /opt/mysql\ndatadir = /opt/mysql/var\nlog-error = /opt/mysql/var/mysql-error.log\npid-file = /opt/mysql/var/mysql.pid\nlog_slave_updates = 1\nlog-bin = /opt/mysql/var/mysql-bin\nbinlog_format = mixed\nbinlog_cache_size = 4M\nmax_binlog_cache_size = 8M\nmax_binlog_size = 1G\nexpire_logs_days = 90\nkey_buffer_size = 384M\nsort_buffer_size = 2M\nread_buffer_size = 2M\nread_rnd_buffer_size = 16M\njoin_buffer_size = 2M\nthread_cache_size = 8\nquery_cache_size = 32M\nquery_cache_limit = 2M\nquery_cache_min_res_unit = 2k\nthread_concurrency = 32\ntable_cache = 614\ntable_open_cache = 512\nopen_files_limit = 10240\nback_log = 600\nmax_connections = 5000\nmax_connect_errors = 6000\nexternal-locking = FALSE\nmax_allowed_packet = 16M\ndefault-storage-engine = MYISAM\nthread_stack = 192k\ntransaction_isolation = READ-COMMITTED\ntmp_table_size = 256M\nmax_heap_table_size = 512M\nbulk_insert_buffer_size = 64M\nmyisam_sort_buffer_size = 64M\nmyisam_max_sort_file_size = 10G\nmyisam_repair_threads = 1\nmyisam_recover\nlong_query_time = 2\nslow_query_log\nslow_query_log_file = /opt/mysql/var/slow.log\nskip-name-resolve\nskip-locking\nskip-networking\ninnodb_additional_mem_pool_size = 16M\ninnodb_buffer_pool_size = 512M\ninnodb_data_file_path = ibdata1:256M:autoextend\ninnodb_file_io_threads = 4\ninnodb_thread_aoncurrency = 8\ninnodb_flush_log_at_trx_commit = 2\ninnodb_log_buffer_size = 16M\ninnodb_log_file_size = 128M\ninnodb_log_files_in_group = 3\ninnodb_max_dirty_pages_pct = 90\ninnodb_lock_wait_timeout = 120\ninnodb_file_per_table = 0\n[mysqldump]\nquick\nmax_allow_packet = 64M\n[mysql]\nno-auto-rehash\nsafr-updates\n[myisamchk]\nkey_buffer_size = 256M\nsort_buffer_size = 256M\nread_buffer = 2M\n[mysqldump]\nquick\nmax_allow_packet = 64M\n[mysql]\nno-auto-rehash\nsafe-updates\n[myisamchk]\nkey_buffer_size = 256M\nsort_buffer_size = 256M\nread_buffer = 2M\nwrite_buffer = 2M\n[mysqlhotcopy]\ninteractive-timeout\n```\n\n[原文](http://zhujiangtao.blog.51cto.com/6387416/1296931)\n","source":"_posts/2017-09-19-mysql-my-cnf.md","raw":"---\ntitle: Mysql 配置文件 my.cnf\ndate: 2017-09-19 17:04:51\ntags:\n---\n\n> Mysql 配置文件为 my.cnf，它所在位置根据安装时设定的\n\n<!-- more -->\n```bash\n/etc/my.cnf\n/etc/mysql/my.cnf\n/opt/mysql/etc/my.cnf\n~/.my.cnf\n```\n当启动 mysqld 服务时，它会根据如上列表的顺序读取 my.cnf\n如果存在多个配置文件，mysql 会以最后一个配置中的参数为准\n\n## 常用配置\n\n```bash\nport                   = 3306            # mysqld服务运行时的端口号，默认为3306\nsocket                 = /tmp/mysql.sock # socket文件是linux/unix系统特有的，用户在该环境下的客户端连接可以不通过tcp/ip网络，而直接使用socket文件连接\nback_log               = 300             # 该值为设定档mysql暂时停止响应新的请求前，短时间内有多少个请求可以存在堆栈内，如果系统在短时间内有很多的连接，应该增大该值，该值最好设置小于512的整数\nskip-networking                          # 不在tcp/ip端口上进行监听，所有的连接都是通过本地的socket文件连接，这样可以提高安全性，确定是不能通过网络连接数据库。\nskip-locking                             # 避免mysql的外部锁定，增强稳定性\nskip-name-resolve                        # 避免mysql对外部的连接进行DNS解析，若使用此设置，那么远程主机连接时只能使用ip，而不能使用域名\nmax_connections        = 3000            # 指定mysql服务所允许的最大连接进程数，\nmax_connect_errors     = 1000            # 每个主机连接允许异常中断的次数，当超过该次数mysql服务器将禁止该主机的连接请求，直到mysql服务重启，或者flushhosts命令清空host的相关信息\ntable_cache            = 614k            # 表的高速缓冲区的大小，当mysql访问一个表时，如果mysql表缓冲区还有空间，那么这个表就会被打开通放入高速缓冲区，好处是可以更快速的访问表中的内容。\n                                         # 如果open_tables和opened_tables的值接近该值，那么久该增加该值的大小\nmax_allowed_packet     = 4M              # 设定在网络传输中一次可以传输消息的最大值，系统默认为1M，最大可以是1G\nsort_buffer_size       = 16M             # 排序缓冲区用来处理类似orderby以及groupby队列所引起的排序，系统默认大小为2M,该参数对应分配内存是每个连接独占的，若有100个连接，实际分配的排序缓冲区大小为6*100；推荐设置为6M-8M\njoin_buffer_size 8M                      # 联合查询操作所使用的缓冲区大小。\nthread_cache_size      = 64              # 设置threadcache池中可以缓存连接线程的最大数量，默认为0，该值表示可以重新利用保存在缓存中线程的数量，当断开连接时若缓存中还有空间，那么客户端的线程将被放到缓存中，如果线程重新被请求，那么请求将从缓存中读取，若果缓存中是空的或者是新的请求，那么线程将被重新创建。设置规律为：1G内存设置为8,2G内存设置为16,4G以上设置为64\nquery_cache_size       = 64M             # 指定mysql查询缓冲区的大小，用来缓冲select的结果，并在下一次同样查询的时候不再执行查询而直接返回结果，根据Qcache_lowmem_prunes的大小，来查看当前的负载是否足够高\nquery_cache_limit      = 4M              # 只有小于该值的结果才被缓冲，放置一个极大的结果将其他所有的查询结果都覆盖\ntmp_table_size 256M                      # 内存临时表的大小，如果超过该值，会将临时表写入磁盘\ndefault_storage_engine = MYISAM          # 创建表时默认使用的存储引擎\nlog-bin                = mysql-bin       # 打开二进制日志功能\nkey_buffer_size        = 384M            # 指定索引缓冲区的大小，内存为4G时刻设置为256M或384M\nread_buffer_size       = 8M              # 用来做MYISAM表全表扫描的缓冲大小\n```\n\n## 常用配置\n```bash\n[client]\ndefault-character-set = utf8\nport = 3306\nsocket = /tmp/mysql.sock\n[mysqld]\nuser = mysql\nport = 3306\nsocket = /tmp/mysql.sock\nbasedir = /opt/mysql\ndatadir = /opt/mysql/var\nlog-error = /opt/mysql/var/mysql-error.log\npid-file = /opt/mysql/var/mysql.pid\nlog_slave_updates = 1\nlog-bin = /opt/mysql/var/mysql-bin\nbinlog_format = mixed\nbinlog_cache_size = 4M\nmax_binlog_cache_size = 8M\nmax_binlog_size = 1G\nexpire_logs_days = 90\nkey_buffer_size = 384M\nsort_buffer_size = 2M\nread_buffer_size = 2M\nread_rnd_buffer_size = 16M\njoin_buffer_size = 2M\nthread_cache_size = 8\nquery_cache_size = 32M\nquery_cache_limit = 2M\nquery_cache_min_res_unit = 2k\nthread_concurrency = 32\ntable_cache = 614\ntable_open_cache = 512\nopen_files_limit = 10240\nback_log = 600\nmax_connections = 5000\nmax_connect_errors = 6000\nexternal-locking = FALSE\nmax_allowed_packet = 16M\ndefault-storage-engine = MYISAM\nthread_stack = 192k\ntransaction_isolation = READ-COMMITTED\ntmp_table_size = 256M\nmax_heap_table_size = 512M\nbulk_insert_buffer_size = 64M\nmyisam_sort_buffer_size = 64M\nmyisam_max_sort_file_size = 10G\nmyisam_repair_threads = 1\nmyisam_recover\nlong_query_time = 2\nslow_query_log\nslow_query_log_file = /opt/mysql/var/slow.log\nskip-name-resolve\nskip-locking\nskip-networking\ninnodb_additional_mem_pool_size = 16M\ninnodb_buffer_pool_size = 512M\ninnodb_data_file_path = ibdata1:256M:autoextend\ninnodb_file_io_threads = 4\ninnodb_thread_aoncurrency = 8\ninnodb_flush_log_at_trx_commit = 2\ninnodb_log_buffer_size = 16M\ninnodb_log_file_size = 128M\ninnodb_log_files_in_group = 3\ninnodb_max_dirty_pages_pct = 90\ninnodb_lock_wait_timeout = 120\ninnodb_file_per_table = 0\n[mysqldump]\nquick\nmax_allow_packet = 64M\n[mysql]\nno-auto-rehash\nsafr-updates\n[myisamchk]\nkey_buffer_size = 256M\nsort_buffer_size = 256M\nread_buffer = 2M\n[mysqldump]\nquick\nmax_allow_packet = 64M\n[mysql]\nno-auto-rehash\nsafe-updates\n[myisamchk]\nkey_buffer_size = 256M\nsort_buffer_size = 256M\nread_buffer = 2M\nwrite_buffer = 2M\n[mysqlhotcopy]\ninteractive-timeout\n```\n\n[原文](http://zhujiangtao.blog.51cto.com/6387416/1296931)\n","slug":"mysql-my-cnf","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a3x001q5gqotuyo8f0t"},{"title":"Mysql 备份命令 mysqldump 和导入数据","date":"2017-09-19T15:39:01.000Z","_content":"\n<!-- toc -->\n<!-- more -->\n## 简单例子\n导出整个数据库\n```bash\n$ mysqldump -u 用户名 -p 数据库名 > 导出的文件名\n```\n\n导出一个表\n```bash\n$ mysqldump -u 用户名 -p 数据库名 表名> 导出的文件名\n```\n\n导出一个数据库结构\n```bash\n$ mysqldump -u 用户名 -p -d 数据库名 表名> 导出的文件名\n```\n\n导出多个数据库\n```bash\n$ mysqldump -u 用户名 -p --databases 数据库名 数据库名 > 导出文件名\n```\n\n导出所有库\n```bash\n$ mysqldump -u 用户名 -p -all-databases  > 导出文件名\n```\n\n## 导入数据\n登陆同时导入\n```bash\n$ mysql -uroot -p <db_name> < <dump_file_name>\n```\n登陆后导入\n```bash\n$ mysql -uroot -p\nmysql > source <dump_file_name>\n```\n\n## mysqldump 参数说明\n```bash\n--all-databases  , -A                   # 导出全部数据库。\n--all-tablespaces  , -Y                 # 导出全部表空间。\n--no-tablespaces  , -y                  # 不导出任何表空间信息。\n--add-drop-database                     # 每个数据库创建之前添加drop数据库语句。\n--add-drop-table                        # 每个数据表创建之前添加drop数据表语句。(默认为打开状态，使用--skip-add-drop-table取消选项)\n--add-locks                             # 在每个表导出之前增加LOCK TABLES并且之后UNLOCK  TABLE。(默认为打开状态，使用--skip-add-locks取消选项)\n--allow-keywords                        # 允许创建是关键词的列名字。这由表名前缀于每个列名做到。\n--apply-slave-statements                # 在'CHANGE MASTER'前添加'STOP SLAVE'，并且在导出的最后添加'START SLAVE'。\n--character-sets-dir                    # 字符集文件的目录\n# mysqldump  -uroot -p --all-databases  --character-sets-dir=/usr/local/mysql/share/mysql/charsets\n--comments                              # 附加注释信息。默认为打开，可以用--skip-comments取消\n--compatible                            # 导出的数据将和其它数据库或旧版本的MySQL 相兼容。\n# 值可以为ansi、mysql323、mysql40、postgresql、oracle、mssql、db2、maxdb、no_key_options、no_tables_options、no_field_options等，\n# 要使用几个值，用逗号将它们隔开。它并不保证能完全兼容，而是尽量兼容。\n--compact                               # 导出更少的输出信息(用于调试)。去掉注释和头尾等结构。可以使用选项：--skip-add-drop-table  --skip-add-locks --skip-comments --skip-disable-keys\n--complete-insert,  -c                  # 使用完整的insert语句(包含列名称)。这么做能提高插入效率，但是可能会受到max_allowed_packet参数的影响而导致插入失败。\n--compress, -C                          # 在客户端和服务器之间启用压缩传递所有信息\n--create-options,  -a                   # 在CREATE TABLE语句中包括所有MySQL特性选项。(默认为打开状态)\n--databases,  -B                        # 导出几个数据库。参数后面所有名字参量都被看作数据库名。\n--debug                                 # 输出debug信息，用于调试。默认值为：d:t:o,/tmp/mysqldump.trace\n# mysqldump  -uroot -p --all-databases --debug\n# mysqldump  -uroot -p --all-databases --debug=” d:t:o,/tmp/debug.trace”\n--debug-check                           # 检查内存和打开文件使用说明并退出。\n--debug-info                            # 输出调试信息并退出\n--default-character-set                 # 设置默认字符集，默认值为utf8\n--delayed-insert                        # 采用延时插入方式（INSERT DELAYED）导出数据\n--delete-master-logs                    # master备份后删除日志. 这个参数将自动激活--master-data。\n--disable-keys                          # 对于每个表，用/*!40000 ALTER TABLE tbl_name DISABLE KEYS */;和/*!40000 ALTER TABLE tbl_name ENABLE KEYS */;语句引用INSERT语句。这样可以更快地导入dump出来的文件，因为它是在插入所有行后创建索引的。该选项只适合MyISAM表，默认为打开状态。\n--dump-slave                            # 该选项将导致主的binlog位置和文件名追加到导出数据的文件中。设置为1时，将会以CHANGE MASTER命令输出到数据文件；设置为2时，在命令前增加说明信息。该选项将会打开--lock-all-tables，除非--single-transaction被指定。该选项会自动关闭--lock-tables选项。默认值为0。\n--events, -E                            # 导出事件。\n--extended-insert,  -e                  # 使用具有多个VALUES列的INSERT语法。这样使导出文件更小，并加速导入时的速度。默认为打开状态，使用--skip-extended-insert取消选项。\n--fields-terminated-by                  # 导出文件中忽略给定字段。与--tab选项一起使用，不能用于--databases和--all-databases选项\n# mysqldump  -uroot -p test test --tab=”/home/mysql” --fields-terminated-by=”#”\n--fields-enclosed-by                    # 输出文件中的各个字段用给定字符包裹。与--tab选项一起使用，不能用于--databases和--all-databases选项\n# mysqldump  -uroot -p test test --tab=”/home/mysql” --fields-enclosed-by=”#”\n\n--fields-optionally-enclosed-by\n\n输出文件中的各个字段用给定字符选择性包裹。与--tab选项一起使用，不能用于--databases和--all-databases选项\n\nmysqldump  -uroot -p test test --tab=”/home/mysql”  --fields-enclosed-by=”#” --fields-optionally-enclosed-by  =”#”\n\n--fields-escaped-by\n\n输出文件中的各个字段忽略给定字符。与--tab选项一起使用，不能用于--databases和--all-databases选项\n\nmysqldump  -uroot -p mysql user --tab=”/home/mysql” --fields-escaped-by=”#”\n\n--flush-logs\n\n开始导出之前刷新日志。\n\n请注意：假如一次导出多个数据库(使用选项--databases或者--all-databases)，将会逐个数据库刷新日志。除使用--lock-all-tables或者--master-data外。在这种情况下，日志将会被刷新一次，相应的所以表同时被锁定。因此，如果打算同时导出和刷新日志应该使用--lock-all-tables 或者--master-data 和--flush-logs。\n\nmysqldump  -uroot -p --all-databases --flush-logs\n\n--flush-privileges                  # 在导出mysql数据库之后，发出一条FLUSH  PRIVILEGES 语句。为了正确恢复，该选项应该用于导出mysql数据库和依赖mysql数据库数据的任何时候。\n--force                 # 在导出过程中忽略出现的SQL错误。\n--help                  # 显示帮助信息并退出。\n--hex-blob                  # 使用十六进制格式导出二进制字符串字段。如果有二进制数据就必须使用该选项。影响到的字段类型有BINARY、VARBINARY、BLOB。\n--host, -h                  # 需要导出的主机信息\n--ignore-table\n\n不导出指定表。指定忽略多个表时，需要重复多次，每次一个表。每个表必须同时指定数据库和表名。例如：--ignore-table=database.table1 --ignore-table=database.table2 ……\n\nmysqldump  -uroot -p --host=localhost --all-databases --ignore-table=mysql.user\n\n--include-master-host-port\n\n在--dump-slave产生的'CHANGE  MASTER TO..'语句中增加'MASTER_HOST=<host>，MASTER_PORT=<port>'\n\nmysqldump  -uroot -p --host=localhost --all-databases --include-master-host-port\n\n--insert-ignore\n\n在插入行时使用INSERT IGNORE语句.\n\nmysqldump  -uroot -p --host=localhost --all-databases --insert-ignore\n\n--lines-terminated-by\n\n输出文件的每行用给定字符串划分。与--tab选项一起使用，不能用于--databases和--all-databases选项。\n\nmysqldump  -uroot -p --host=localhost test test --tab=”/tmp/mysql”  --lines-terminated-by=”##”\n\n--lock-all-tables,  -x\n\n提交请求锁定所有数据库中的所有表，以保证数据的一致性。这是一个全局读锁，并且自动关闭--single-transaction 和--lock-tables 选项。\n\nmysqldump  -uroot -p --host=localhost --all-databases --lock-all-tables\n\n--lock-tables,  -l\n\n开始导出前，锁定所有表。用READ  LOCAL锁定表以允许MyISAM表并行插入。对于支持事务的表例如InnoDB和BDB，--single-transaction是一个更好的选择，因为它根本不需要锁定表。\n\n请注意当导出多个数据库时，--lock-tables分别为每个数据库锁定表。因此，该选项不能保证导出文件中的表在数据库之间的逻辑一致性。不同数据库表的导出状态可以完全不同。\n\nmysqldump  -uroot -p --host=localhost --all-databases --lock-tables\n\n--log-error\n\n附加警告和错误信息到给定文件\n\nmysqldump  -uroot -p --host=localhost --all-databases  --log-error=/tmp/mysqldump_error_log.err\n\n--master-data\n\n该选项将binlog的位置和文件名追加到输出文件中。如果为1，将会输出CHANGE MASTER 命令；如果为2，输出的CHANGE  MASTER命令前添加注释信息。该选项将打开--lock-all-tables 选项，除非--single-transaction也被指定（在这种情况下，全局读锁在开始导出时获得很短的时间；其他内容参考下面的--single-transaction选项）。该选项自动关闭--lock-tables选项。\n\nmysqldump  -uroot -p --host=localhost --all-databases --master-data=1;\n\nmysqldump  -uroot -p --host=localhost --all-databases --master-data=2;\n\n--max_allowed_packet\n\n服务器发送和接受的最大包长度。\n\nmysqldump  -uroot -p --host=localhost --all-databases --max_allowed_packet=10240\n\n--net_buffer_length\n\nTCP/IP和socket连接的缓存大小。\n\nmysqldump  -uroot -p --host=localhost --all-databases --net_buffer_length=1024\n\n--no-autocommit\n\n使用autocommit/commit 语句包裹表。\n\nmysqldump  -uroot -p --host=localhost --all-databases --no-autocommit\n\n--no-create-db,  -n\n\n只导出数据，而不添加CREATE DATABASE 语句。\n\nmysqldump  -uroot -p --host=localhost --all-databases --no-create-db\n\n--no-create-info,  -t\n\n只导出数据，而不添加CREATE TABLE 语句。\n\nmysqldump  -uroot -p --host=localhost --all-databases --no-create-info\n\n--no-data, -d\n\n不导出任何数据，只导出数据库表结构。\n\nmysqldump  -uroot -p --host=localhost --all-databases --no-data\n\n--no-set-names,  -N\n\n等同于--skip-set-charset\n\nmysqldump  -uroot -p --host=localhost --all-databases --no-set-names\n\n--opt\n\n等同于--add-drop-table,  --add-locks, --create-options, --quick, --extended-insert, --lock-tables,  --set-charset, --disable-keys 该选项默认开启,  可以用--skip-opt禁用.\n\nmysqldump  -uroot -p --host=localhost --all-databases --opt\n\n--order-by-primary\n\n如果存在主键，或者第一个唯一键，对每个表的记录进行排序。在导出MyISAM表到InnoDB表时有效，但会使得导出工作花费很长时间。\n\nmysqldump  -uroot -p --host=localhost --all-databases --order-by-primary\n\n--password, -p\n\n连接数据库密码\n\n--pipe(windows系统可用)\n\n使用命名管道连接mysql\n\nmysqldump  -uroot -p --host=localhost --all-databases --pipe\n\n--port, -P\n\n连接数据库端口号\n\n--protocol\n\n使用的连接协议，包括：tcp, socket, pipe, memory.\n\nmysqldump  -uroot -p --host=localhost --all-databases --protocol=tcp\n\n--quick, -q\n\n不缓冲查询，直接导出到标准输出。默认为打开状态，使用--skip-quick取消该选项。\n\nmysqldump  -uroot -p --host=localhost --all-databases\n\nmysqldump  -uroot -p --host=localhost --all-databases --skip-quick\n\n--quote-names,-Q\n\n使用（`）引起表和列名。默认为打开状态，使用--skip-quote-names取消该选项。\n\nmysqldump  -uroot -p --host=localhost --all-databases\n\nmysqldump  -uroot -p --host=localhost --all-databases --skip-quote-names\n\n--replace\n\n使用REPLACE INTO 取代INSERT INTO.\n\nmysqldump  -uroot -p --host=localhost --all-databases --replace\n\n--result-file,  -r\n\n直接输出到指定文件中。该选项应该用在使用回车换行对（\\\\r\\\\n）换行的系统上（例如：DOS，Windows）。该选项确保只有一行被使用。\n\nmysqldump  -uroot -p --host=localhost --all-databases --result-file=/tmp/mysqldump_result_file.txt\n\n--routines, -R\n\n导出存储过程以及自定义函数。\n\nmysqldump  -uroot -p --host=localhost --all-databases --routines\n\n--set-charset\n\n添加'SET NAMES  default_character_set'到输出文件。默认为打开状态，使用--skip-set-charset关闭选项。\n\nmysqldump  -uroot -p --host=localhost --all-databases\n\nmysqldump  -uroot -p --host=localhost --all-databases --skip-set-charset\n\n--single-transaction\n\n该选项在导出数据之前提交一个BEGIN SQL语句，BEGIN 不会阻塞任何应用程序且能保证导出时数据库的一致性状态。它只适用于多版本存储引擎，仅InnoDB。本选项和--lock-tables 选项是互斥的，因为LOCK  TABLES 会使任何挂起的事务隐含提交。要想导出大表的话，应结合使用--quick 选项。\n\nmysqldump  -uroot -p --host=localhost --all-databases --single-transaction\n\n--dump-date\n\n将导出时间添加到输出文件中。默认为打开状态，使用--skip-dump-date关闭选项。\n\nmysqldump  -uroot -p --host=localhost --all-databases\n\nmysqldump  -uroot -p --host=localhost --all-databases --skip-dump-date\n\n--skip-opt\n\n禁用–opt选项.\n\nmysqldump  -uroot -p --host=localhost --all-databases --skip-opt\n\n--socket,-S\n\n指定连接mysql的socket文件位置，默认路径/tmp/mysql.sock\n\nmysqldump  -uroot -p --host=localhost --all-databases --socket=/tmp/mysqld.sock\n\n--tab,-T\n\n为每个表在给定路径创建tab分割的文本文件。注意：仅仅用于mysqldump和mysqld服务器运行在相同机器上。\n\nmysqldump  -uroot -p --host=localhost test test --tab=\"/home/mysql\"\n\n--tables\n\n覆盖--databases (-B)参数，指定需要导出的表名。\n\nmysqldump  -uroot -p --host=localhost --databases test --tables test\n\n--triggers\n\n导出触发器。该选项默认启用，用--skip-triggers禁用它。\n\nmysqldump  -uroot -p --host=localhost --all-databases --triggers\n\n--tz-utc\n\n在导出顶部设置时区TIME_ZONE='+00:00' ，以保证在不同时区导出的TIMESTAMP 数据或者数据被移动其他时区时的正确性。\n\nmysqldump  -uroot -p --host=localhost --all-databases --tz-utc\n\n--user, -u\n\n指定连接的用户名。\n\n--verbose, --v\n\n输出多种平台信息。\n\n--version, -V\n\n输出mysqldump版本信息并退出\n\n--where, -w\n\n只转储给定的WHERE条件选择的记录。请注意如果条件包含命令解释符专用空格或字符，一定要将条件引用起来。\n\nmysqldump  -uroot -p --host=localhost --all-databases --where=” user=’root’”\n\n--xml, -X\n\n导出XML格式.\n\nmysqldump  -uroot -p --host=localhost --all-databases --xml\n\n--plugin_dir\n\n客户端插件的目录，用于兼容不同的插件版本。\n\nmysqldump  -uroot -p --host=localhost --all-databases --plugin_dir=”/usr/local/lib/plugin”\n\n--default_auth\n\n客户端插件默认使用权限。\n\nmysqldump  -uroot -p --host=localhost --all-databases --default-auth=”/usr/local/lib/plugin/<PLUGIN>”\n```\n","source":"_posts/2017-09-19-mysqldump.md","raw":"---\ntitle: Mysql 备份命令 mysqldump 和导入数据\ndate: 2017-09-19 15:39:01\ntags: [mysql]\n---\n\n<!-- toc -->\n<!-- more -->\n## 简单例子\n导出整个数据库\n```bash\n$ mysqldump -u 用户名 -p 数据库名 > 导出的文件名\n```\n\n导出一个表\n```bash\n$ mysqldump -u 用户名 -p 数据库名 表名> 导出的文件名\n```\n\n导出一个数据库结构\n```bash\n$ mysqldump -u 用户名 -p -d 数据库名 表名> 导出的文件名\n```\n\n导出多个数据库\n```bash\n$ mysqldump -u 用户名 -p --databases 数据库名 数据库名 > 导出文件名\n```\n\n导出所有库\n```bash\n$ mysqldump -u 用户名 -p -all-databases  > 导出文件名\n```\n\n## 导入数据\n登陆同时导入\n```bash\n$ mysql -uroot -p <db_name> < <dump_file_name>\n```\n登陆后导入\n```bash\n$ mysql -uroot -p\nmysql > source <dump_file_name>\n```\n\n## mysqldump 参数说明\n```bash\n--all-databases  , -A                   # 导出全部数据库。\n--all-tablespaces  , -Y                 # 导出全部表空间。\n--no-tablespaces  , -y                  # 不导出任何表空间信息。\n--add-drop-database                     # 每个数据库创建之前添加drop数据库语句。\n--add-drop-table                        # 每个数据表创建之前添加drop数据表语句。(默认为打开状态，使用--skip-add-drop-table取消选项)\n--add-locks                             # 在每个表导出之前增加LOCK TABLES并且之后UNLOCK  TABLE。(默认为打开状态，使用--skip-add-locks取消选项)\n--allow-keywords                        # 允许创建是关键词的列名字。这由表名前缀于每个列名做到。\n--apply-slave-statements                # 在'CHANGE MASTER'前添加'STOP SLAVE'，并且在导出的最后添加'START SLAVE'。\n--character-sets-dir                    # 字符集文件的目录\n# mysqldump  -uroot -p --all-databases  --character-sets-dir=/usr/local/mysql/share/mysql/charsets\n--comments                              # 附加注释信息。默认为打开，可以用--skip-comments取消\n--compatible                            # 导出的数据将和其它数据库或旧版本的MySQL 相兼容。\n# 值可以为ansi、mysql323、mysql40、postgresql、oracle、mssql、db2、maxdb、no_key_options、no_tables_options、no_field_options等，\n# 要使用几个值，用逗号将它们隔开。它并不保证能完全兼容，而是尽量兼容。\n--compact                               # 导出更少的输出信息(用于调试)。去掉注释和头尾等结构。可以使用选项：--skip-add-drop-table  --skip-add-locks --skip-comments --skip-disable-keys\n--complete-insert,  -c                  # 使用完整的insert语句(包含列名称)。这么做能提高插入效率，但是可能会受到max_allowed_packet参数的影响而导致插入失败。\n--compress, -C                          # 在客户端和服务器之间启用压缩传递所有信息\n--create-options,  -a                   # 在CREATE TABLE语句中包括所有MySQL特性选项。(默认为打开状态)\n--databases,  -B                        # 导出几个数据库。参数后面所有名字参量都被看作数据库名。\n--debug                                 # 输出debug信息，用于调试。默认值为：d:t:o,/tmp/mysqldump.trace\n# mysqldump  -uroot -p --all-databases --debug\n# mysqldump  -uroot -p --all-databases --debug=” d:t:o,/tmp/debug.trace”\n--debug-check                           # 检查内存和打开文件使用说明并退出。\n--debug-info                            # 输出调试信息并退出\n--default-character-set                 # 设置默认字符集，默认值为utf8\n--delayed-insert                        # 采用延时插入方式（INSERT DELAYED）导出数据\n--delete-master-logs                    # master备份后删除日志. 这个参数将自动激活--master-data。\n--disable-keys                          # 对于每个表，用/*!40000 ALTER TABLE tbl_name DISABLE KEYS */;和/*!40000 ALTER TABLE tbl_name ENABLE KEYS */;语句引用INSERT语句。这样可以更快地导入dump出来的文件，因为它是在插入所有行后创建索引的。该选项只适合MyISAM表，默认为打开状态。\n--dump-slave                            # 该选项将导致主的binlog位置和文件名追加到导出数据的文件中。设置为1时，将会以CHANGE MASTER命令输出到数据文件；设置为2时，在命令前增加说明信息。该选项将会打开--lock-all-tables，除非--single-transaction被指定。该选项会自动关闭--lock-tables选项。默认值为0。\n--events, -E                            # 导出事件。\n--extended-insert,  -e                  # 使用具有多个VALUES列的INSERT语法。这样使导出文件更小，并加速导入时的速度。默认为打开状态，使用--skip-extended-insert取消选项。\n--fields-terminated-by                  # 导出文件中忽略给定字段。与--tab选项一起使用，不能用于--databases和--all-databases选项\n# mysqldump  -uroot -p test test --tab=”/home/mysql” --fields-terminated-by=”#”\n--fields-enclosed-by                    # 输出文件中的各个字段用给定字符包裹。与--tab选项一起使用，不能用于--databases和--all-databases选项\n# mysqldump  -uroot -p test test --tab=”/home/mysql” --fields-enclosed-by=”#”\n\n--fields-optionally-enclosed-by\n\n输出文件中的各个字段用给定字符选择性包裹。与--tab选项一起使用，不能用于--databases和--all-databases选项\n\nmysqldump  -uroot -p test test --tab=”/home/mysql”  --fields-enclosed-by=”#” --fields-optionally-enclosed-by  =”#”\n\n--fields-escaped-by\n\n输出文件中的各个字段忽略给定字符。与--tab选项一起使用，不能用于--databases和--all-databases选项\n\nmysqldump  -uroot -p mysql user --tab=”/home/mysql” --fields-escaped-by=”#”\n\n--flush-logs\n\n开始导出之前刷新日志。\n\n请注意：假如一次导出多个数据库(使用选项--databases或者--all-databases)，将会逐个数据库刷新日志。除使用--lock-all-tables或者--master-data外。在这种情况下，日志将会被刷新一次，相应的所以表同时被锁定。因此，如果打算同时导出和刷新日志应该使用--lock-all-tables 或者--master-data 和--flush-logs。\n\nmysqldump  -uroot -p --all-databases --flush-logs\n\n--flush-privileges                  # 在导出mysql数据库之后，发出一条FLUSH  PRIVILEGES 语句。为了正确恢复，该选项应该用于导出mysql数据库和依赖mysql数据库数据的任何时候。\n--force                 # 在导出过程中忽略出现的SQL错误。\n--help                  # 显示帮助信息并退出。\n--hex-blob                  # 使用十六进制格式导出二进制字符串字段。如果有二进制数据就必须使用该选项。影响到的字段类型有BINARY、VARBINARY、BLOB。\n--host, -h                  # 需要导出的主机信息\n--ignore-table\n\n不导出指定表。指定忽略多个表时，需要重复多次，每次一个表。每个表必须同时指定数据库和表名。例如：--ignore-table=database.table1 --ignore-table=database.table2 ……\n\nmysqldump  -uroot -p --host=localhost --all-databases --ignore-table=mysql.user\n\n--include-master-host-port\n\n在--dump-slave产生的'CHANGE  MASTER TO..'语句中增加'MASTER_HOST=<host>，MASTER_PORT=<port>'\n\nmysqldump  -uroot -p --host=localhost --all-databases --include-master-host-port\n\n--insert-ignore\n\n在插入行时使用INSERT IGNORE语句.\n\nmysqldump  -uroot -p --host=localhost --all-databases --insert-ignore\n\n--lines-terminated-by\n\n输出文件的每行用给定字符串划分。与--tab选项一起使用，不能用于--databases和--all-databases选项。\n\nmysqldump  -uroot -p --host=localhost test test --tab=”/tmp/mysql”  --lines-terminated-by=”##”\n\n--lock-all-tables,  -x\n\n提交请求锁定所有数据库中的所有表，以保证数据的一致性。这是一个全局读锁，并且自动关闭--single-transaction 和--lock-tables 选项。\n\nmysqldump  -uroot -p --host=localhost --all-databases --lock-all-tables\n\n--lock-tables,  -l\n\n开始导出前，锁定所有表。用READ  LOCAL锁定表以允许MyISAM表并行插入。对于支持事务的表例如InnoDB和BDB，--single-transaction是一个更好的选择，因为它根本不需要锁定表。\n\n请注意当导出多个数据库时，--lock-tables分别为每个数据库锁定表。因此，该选项不能保证导出文件中的表在数据库之间的逻辑一致性。不同数据库表的导出状态可以完全不同。\n\nmysqldump  -uroot -p --host=localhost --all-databases --lock-tables\n\n--log-error\n\n附加警告和错误信息到给定文件\n\nmysqldump  -uroot -p --host=localhost --all-databases  --log-error=/tmp/mysqldump_error_log.err\n\n--master-data\n\n该选项将binlog的位置和文件名追加到输出文件中。如果为1，将会输出CHANGE MASTER 命令；如果为2，输出的CHANGE  MASTER命令前添加注释信息。该选项将打开--lock-all-tables 选项，除非--single-transaction也被指定（在这种情况下，全局读锁在开始导出时获得很短的时间；其他内容参考下面的--single-transaction选项）。该选项自动关闭--lock-tables选项。\n\nmysqldump  -uroot -p --host=localhost --all-databases --master-data=1;\n\nmysqldump  -uroot -p --host=localhost --all-databases --master-data=2;\n\n--max_allowed_packet\n\n服务器发送和接受的最大包长度。\n\nmysqldump  -uroot -p --host=localhost --all-databases --max_allowed_packet=10240\n\n--net_buffer_length\n\nTCP/IP和socket连接的缓存大小。\n\nmysqldump  -uroot -p --host=localhost --all-databases --net_buffer_length=1024\n\n--no-autocommit\n\n使用autocommit/commit 语句包裹表。\n\nmysqldump  -uroot -p --host=localhost --all-databases --no-autocommit\n\n--no-create-db,  -n\n\n只导出数据，而不添加CREATE DATABASE 语句。\n\nmysqldump  -uroot -p --host=localhost --all-databases --no-create-db\n\n--no-create-info,  -t\n\n只导出数据，而不添加CREATE TABLE 语句。\n\nmysqldump  -uroot -p --host=localhost --all-databases --no-create-info\n\n--no-data, -d\n\n不导出任何数据，只导出数据库表结构。\n\nmysqldump  -uroot -p --host=localhost --all-databases --no-data\n\n--no-set-names,  -N\n\n等同于--skip-set-charset\n\nmysqldump  -uroot -p --host=localhost --all-databases --no-set-names\n\n--opt\n\n等同于--add-drop-table,  --add-locks, --create-options, --quick, --extended-insert, --lock-tables,  --set-charset, --disable-keys 该选项默认开启,  可以用--skip-opt禁用.\n\nmysqldump  -uroot -p --host=localhost --all-databases --opt\n\n--order-by-primary\n\n如果存在主键，或者第一个唯一键，对每个表的记录进行排序。在导出MyISAM表到InnoDB表时有效，但会使得导出工作花费很长时间。\n\nmysqldump  -uroot -p --host=localhost --all-databases --order-by-primary\n\n--password, -p\n\n连接数据库密码\n\n--pipe(windows系统可用)\n\n使用命名管道连接mysql\n\nmysqldump  -uroot -p --host=localhost --all-databases --pipe\n\n--port, -P\n\n连接数据库端口号\n\n--protocol\n\n使用的连接协议，包括：tcp, socket, pipe, memory.\n\nmysqldump  -uroot -p --host=localhost --all-databases --protocol=tcp\n\n--quick, -q\n\n不缓冲查询，直接导出到标准输出。默认为打开状态，使用--skip-quick取消该选项。\n\nmysqldump  -uroot -p --host=localhost --all-databases\n\nmysqldump  -uroot -p --host=localhost --all-databases --skip-quick\n\n--quote-names,-Q\n\n使用（`）引起表和列名。默认为打开状态，使用--skip-quote-names取消该选项。\n\nmysqldump  -uroot -p --host=localhost --all-databases\n\nmysqldump  -uroot -p --host=localhost --all-databases --skip-quote-names\n\n--replace\n\n使用REPLACE INTO 取代INSERT INTO.\n\nmysqldump  -uroot -p --host=localhost --all-databases --replace\n\n--result-file,  -r\n\n直接输出到指定文件中。该选项应该用在使用回车换行对（\\\\r\\\\n）换行的系统上（例如：DOS，Windows）。该选项确保只有一行被使用。\n\nmysqldump  -uroot -p --host=localhost --all-databases --result-file=/tmp/mysqldump_result_file.txt\n\n--routines, -R\n\n导出存储过程以及自定义函数。\n\nmysqldump  -uroot -p --host=localhost --all-databases --routines\n\n--set-charset\n\n添加'SET NAMES  default_character_set'到输出文件。默认为打开状态，使用--skip-set-charset关闭选项。\n\nmysqldump  -uroot -p --host=localhost --all-databases\n\nmysqldump  -uroot -p --host=localhost --all-databases --skip-set-charset\n\n--single-transaction\n\n该选项在导出数据之前提交一个BEGIN SQL语句，BEGIN 不会阻塞任何应用程序且能保证导出时数据库的一致性状态。它只适用于多版本存储引擎，仅InnoDB。本选项和--lock-tables 选项是互斥的，因为LOCK  TABLES 会使任何挂起的事务隐含提交。要想导出大表的话，应结合使用--quick 选项。\n\nmysqldump  -uroot -p --host=localhost --all-databases --single-transaction\n\n--dump-date\n\n将导出时间添加到输出文件中。默认为打开状态，使用--skip-dump-date关闭选项。\n\nmysqldump  -uroot -p --host=localhost --all-databases\n\nmysqldump  -uroot -p --host=localhost --all-databases --skip-dump-date\n\n--skip-opt\n\n禁用–opt选项.\n\nmysqldump  -uroot -p --host=localhost --all-databases --skip-opt\n\n--socket,-S\n\n指定连接mysql的socket文件位置，默认路径/tmp/mysql.sock\n\nmysqldump  -uroot -p --host=localhost --all-databases --socket=/tmp/mysqld.sock\n\n--tab,-T\n\n为每个表在给定路径创建tab分割的文本文件。注意：仅仅用于mysqldump和mysqld服务器运行在相同机器上。\n\nmysqldump  -uroot -p --host=localhost test test --tab=\"/home/mysql\"\n\n--tables\n\n覆盖--databases (-B)参数，指定需要导出的表名。\n\nmysqldump  -uroot -p --host=localhost --databases test --tables test\n\n--triggers\n\n导出触发器。该选项默认启用，用--skip-triggers禁用它。\n\nmysqldump  -uroot -p --host=localhost --all-databases --triggers\n\n--tz-utc\n\n在导出顶部设置时区TIME_ZONE='+00:00' ，以保证在不同时区导出的TIMESTAMP 数据或者数据被移动其他时区时的正确性。\n\nmysqldump  -uroot -p --host=localhost --all-databases --tz-utc\n\n--user, -u\n\n指定连接的用户名。\n\n--verbose, --v\n\n输出多种平台信息。\n\n--version, -V\n\n输出mysqldump版本信息并退出\n\n--where, -w\n\n只转储给定的WHERE条件选择的记录。请注意如果条件包含命令解释符专用空格或字符，一定要将条件引用起来。\n\nmysqldump  -uroot -p --host=localhost --all-databases --where=” user=’root’”\n\n--xml, -X\n\n导出XML格式.\n\nmysqldump  -uroot -p --host=localhost --all-databases --xml\n\n--plugin_dir\n\n客户端插件的目录，用于兼容不同的插件版本。\n\nmysqldump  -uroot -p --host=localhost --all-databases --plugin_dir=”/usr/local/lib/plugin”\n\n--default_auth\n\n客户端插件默认使用权限。\n\nmysqldump  -uroot -p --host=localhost --all-databases --default-auth=”/usr/local/lib/plugin/<PLUGIN>”\n```\n","slug":"mysqldump","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a3y001t5gqorh9m3ghg"},{"title":"网络请求工具 HTTPie","date":"2017-09-21T20:33:21.000Z","_content":"\n> HTTPie—aitch-tee-tee-pie—is a command line HTTP client with an intuitive UI,\nJSON support, syntax highlighting, wget-like downloads, plugins, and more.\n\n<!-- more -->\n\n<!-- toc -->\n做 web 开发少不了测试网络请求，虽然现在有很多方便的工具（如：postman）都能很好的\n做到模拟请求，但是在没有界面的 Linux 服务器上，还是命令行比较实用，比如：\n[cURL](https://github.com/curl/curl) ，它大而全，是我们第一个想到的工具，但想要\n用 cURL 很好的完成查看网络请求各种数据的任务，需要一些深入了解，在我的文章\n[网络请求工具 cURL](/2017/08/16/linux-2017-08-16-curl/)中有介绍下面我想给大家\n介绍一个更加直观的网络请求测试工具 [HTTPie](https://httpie.org/) 它能更好的支持\nJSON 格式化展示，代码高亮，类 wget 下载等功能\n\n![httpie1](/images/httpie1.png)\n\n上图就是一个最简单的 get 请求，不要担心不明白 `:8002` 是什么意思，下面我们会\n一一介绍\n\n## 安装\n\n### MacOS\n```bash\n$ brew install httpie\n```\n\n### Ubuntu\n```bash\n$ sudo apt update -y\n$ sudo apt install -y httpie\n```\n### CentOS\n```bash\n$ sudo yum update -y\n$ sudo yum install -y epel-release httpie\n```\n### Python\n```bash\n$ pip install httpie\n```\n\n## 使用\n\n### 请求状态\n```bash\n$ http example.org          # 默认 GET 请求\n$ http POST example.org\n$ http PUT example.org\n$ http DELETE example.org\n```\n\n### 本地短链接\n```bash\n$ http :            # GET localhost ，默认80端口\n$ http :8002/test   # GET lcoalhost:8002/test\n```\n\n## 参数传递\n### URL 地址参数\n```bash\n$ http example.org name=='hello world' age==26\nGET /?name=hello+world&age=26\n```\n\n### JSON 数据\n字符串值可以直接使用 `=` 来模拟 JSON 结构传递，缺省请求状态为 POST\n```bash\n$ http POST example.org name=wxnacy\n# ==> {\"name\": \"wxnacy\"}\n```\n\n传递值不是字符串的话也可以用 `:=` 方式传递\n```bash\n$ http example.org name=wxnacy age:=26 flag:=false tags:='[\"http\", \"url\"]'\n# ==> {\"name\": \"wxnacy\", \"age\": 26, \"flag\": false, \"tags\": [\"http\", \"url\"]}\n```\n\n我们还可以使用 `=@` 来传递文本文件，使用 `:=@` 来传递 json 文件\n```bash\n$ http example.org hello=@hello.txt file:=@kwargs.json\n# ==> {\"hello\": \"hello world\", \"file\": {\"name\": \"wxnacy\"}}\n```\n\n还可以将 json 文件直接传值\n```bash\n$ http example.org < file.json\n```\n\n你也可以使用 `--json` 或 `-j` 确保 ***Accept*** 为 ***application/json***\n\n### Forms\n提交 forms 数据和 JSON 请求很相似，只需要使用 `--form, -f` 参数，确保\n`Content-Type: application/x-www-form-urlencoded; charset=utf-8` 只是传值的话，\n使用 `=` 符号\n```bash\n$ http POST -f example.org name='helle world'\n```\n\n需要上传文件时使用 `@` 符号，此时请求头 `Content-Type` 自动变为\n`multipart/form-data`\n```bash\n$ http POST -f example.org name=wxnacy file@file.json\n```\n\n### 头信息\n设置头信息非常简单，需要用 `:` 符号\n```bash\n$ http example.org X-API:1111                 # GET example.org\n```\n如果想给某个头信息设置空置，可以在 `:` 后跟空字符串\n```bash\n$ http httpbin.org/headers Accept: User-Agent:\n```\n另外官方给出如果头信息整个传空值可以使用 `'Header;'` ，但我实验并没有效果\n\n## 下载\n```bash\n$ http example.org > file                    #\n$ http --download example.org/file           # 类 wget 下载\n```\n\n## https\n```bash\n$ alias https='http --default-scheme=https'\n```\n","source":"_posts/2017-09-21-http.md","raw":"---\ntitle: 网络请求工具 HTTPie\ndate: 2017-09-21 20:33:21\ntags: [http, linux]\n---\n\n> HTTPie—aitch-tee-tee-pie—is a command line HTTP client with an intuitive UI,\nJSON support, syntax highlighting, wget-like downloads, plugins, and more.\n\n<!-- more -->\n\n<!-- toc -->\n做 web 开发少不了测试网络请求，虽然现在有很多方便的工具（如：postman）都能很好的\n做到模拟请求，但是在没有界面的 Linux 服务器上，还是命令行比较实用，比如：\n[cURL](https://github.com/curl/curl) ，它大而全，是我们第一个想到的工具，但想要\n用 cURL 很好的完成查看网络请求各种数据的任务，需要一些深入了解，在我的文章\n[网络请求工具 cURL](/2017/08/16/linux-2017-08-16-curl/)中有介绍下面我想给大家\n介绍一个更加直观的网络请求测试工具 [HTTPie](https://httpie.org/) 它能更好的支持\nJSON 格式化展示，代码高亮，类 wget 下载等功能\n\n![httpie1](/images/httpie1.png)\n\n上图就是一个最简单的 get 请求，不要担心不明白 `:8002` 是什么意思，下面我们会\n一一介绍\n\n## 安装\n\n### MacOS\n```bash\n$ brew install httpie\n```\n\n### Ubuntu\n```bash\n$ sudo apt update -y\n$ sudo apt install -y httpie\n```\n### CentOS\n```bash\n$ sudo yum update -y\n$ sudo yum install -y epel-release httpie\n```\n### Python\n```bash\n$ pip install httpie\n```\n\n## 使用\n\n### 请求状态\n```bash\n$ http example.org          # 默认 GET 请求\n$ http POST example.org\n$ http PUT example.org\n$ http DELETE example.org\n```\n\n### 本地短链接\n```bash\n$ http :            # GET localhost ，默认80端口\n$ http :8002/test   # GET lcoalhost:8002/test\n```\n\n## 参数传递\n### URL 地址参数\n```bash\n$ http example.org name=='hello world' age==26\nGET /?name=hello+world&age=26\n```\n\n### JSON 数据\n字符串值可以直接使用 `=` 来模拟 JSON 结构传递，缺省请求状态为 POST\n```bash\n$ http POST example.org name=wxnacy\n# ==> {\"name\": \"wxnacy\"}\n```\n\n传递值不是字符串的话也可以用 `:=` 方式传递\n```bash\n$ http example.org name=wxnacy age:=26 flag:=false tags:='[\"http\", \"url\"]'\n# ==> {\"name\": \"wxnacy\", \"age\": 26, \"flag\": false, \"tags\": [\"http\", \"url\"]}\n```\n\n我们还可以使用 `=@` 来传递文本文件，使用 `:=@` 来传递 json 文件\n```bash\n$ http example.org hello=@hello.txt file:=@kwargs.json\n# ==> {\"hello\": \"hello world\", \"file\": {\"name\": \"wxnacy\"}}\n```\n\n还可以将 json 文件直接传值\n```bash\n$ http example.org < file.json\n```\n\n你也可以使用 `--json` 或 `-j` 确保 ***Accept*** 为 ***application/json***\n\n### Forms\n提交 forms 数据和 JSON 请求很相似，只需要使用 `--form, -f` 参数，确保\n`Content-Type: application/x-www-form-urlencoded; charset=utf-8` 只是传值的话，\n使用 `=` 符号\n```bash\n$ http POST -f example.org name='helle world'\n```\n\n需要上传文件时使用 `@` 符号，此时请求头 `Content-Type` 自动变为\n`multipart/form-data`\n```bash\n$ http POST -f example.org name=wxnacy file@file.json\n```\n\n### 头信息\n设置头信息非常简单，需要用 `:` 符号\n```bash\n$ http example.org X-API:1111                 # GET example.org\n```\n如果想给某个头信息设置空置，可以在 `:` 后跟空字符串\n```bash\n$ http httpbin.org/headers Accept: User-Agent:\n```\n另外官方给出如果头信息整个传空值可以使用 `'Header;'` ，但我实验并没有效果\n\n## 下载\n```bash\n$ http example.org > file                    #\n$ http --download example.org/file           # 类 wget 下载\n```\n\n## https\n```bash\n$ alias https='http --default-scheme=https'\n```\n","slug":"http","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a40001u5gqoogyh065j"},{"title":"Vim 插件 pathogen 插件管理","date":"2017-09-20T15:00:12.000Z","_content":"\n[专辑：Vim 练级手册](/vim)\n\n> pathogen 更好的插件管理方案\n\n<!-- more -->\n改用 vim 做主开发工具有一段时间了，之前一直在用 [Vundle](https://github.com/VundleVim/Vundle.vim)\n管理插件回想起用 Vundle 装第一个插件，当时的痛苦现在还历历在目，对于一个新手来\n说去哪里写 `:PluginInstall` 都折腾了好久 pathogen 可以将插件都集中管理到\n***~/.vim/bundle*** 中，并且各个插件都拥有自己的目录（这点 Vundle 也可以做到），\n他的优点在于只依赖与 git 来管理插件，无需在 vim 做过多的配置\n\n## 安装\n```bash\n$ mkdir .vim && cd .vim\n$ mkdir bundle && mkdir autoload && cd bundle\n$ git clone https://github.com/tpope/vim-pathogen.git\n$ cp vim-pathogen/autoload/pathogen.vim ~/.vim/autoload/\n```\n\n## 配置\n在 ***~/.vimrc*** 文件里, `filetype plugin indent on` 之前的任何地方，加入这句\n：`call pathogen#infect()`\n\n这样 pathogen 就已经安装完成了，接下来我们下载一个插件看下效果\n\n## 第一个插件\n```bash\n$ cd ~/.vim/bundle\n$ git clone http://github.com/scrooloose/nerdtree.git\n```\n执行完两条命令后，bundle 文件夹中就会出现 nerdtree 文件，\n这样就已经安装完成，pathogen 会自动加载 bundle 中的插件\n\n## 更新插件\n如果想要更新某个插件，只需要进入到相应插件目录 `~/.vim/bundle/nerdtree` 中执行\n下拉命令\n```bash\n$ git pull\n```\n如果插件特别多，不想一个一个下拉代码，也可以使用 Git 的 ***submodule*** 模块\n托管到 GitHub 中\n在我的文章 [Git 工具 submodule](/2017/09/19/git-submodule) 中有介绍\n\n## 删除插件\n删除插件也很简单，需要进入 ***~/.vim/bundle*** 执行删除目录命令即可\n```bash\n$ rm -rf nerdtree\n```\n","source":"_posts/2017-09-20-vim-plugin-pathogen.md","raw":"---\ntitle: Vim 插件 pathogen 插件管理\ndate: 2017-09-20 15:00:12\ntags: [vim]\n---\n\n[专辑：Vim 练级手册](/vim)\n\n> pathogen 更好的插件管理方案\n\n<!-- more -->\n改用 vim 做主开发工具有一段时间了，之前一直在用 [Vundle](https://github.com/VundleVim/Vundle.vim)\n管理插件回想起用 Vundle 装第一个插件，当时的痛苦现在还历历在目，对于一个新手来\n说去哪里写 `:PluginInstall` 都折腾了好久 pathogen 可以将插件都集中管理到\n***~/.vim/bundle*** 中，并且各个插件都拥有自己的目录（这点 Vundle 也可以做到），\n他的优点在于只依赖与 git 来管理插件，无需在 vim 做过多的配置\n\n## 安装\n```bash\n$ mkdir .vim && cd .vim\n$ mkdir bundle && mkdir autoload && cd bundle\n$ git clone https://github.com/tpope/vim-pathogen.git\n$ cp vim-pathogen/autoload/pathogen.vim ~/.vim/autoload/\n```\n\n## 配置\n在 ***~/.vimrc*** 文件里, `filetype plugin indent on` 之前的任何地方，加入这句\n：`call pathogen#infect()`\n\n这样 pathogen 就已经安装完成了，接下来我们下载一个插件看下效果\n\n## 第一个插件\n```bash\n$ cd ~/.vim/bundle\n$ git clone http://github.com/scrooloose/nerdtree.git\n```\n执行完两条命令后，bundle 文件夹中就会出现 nerdtree 文件，\n这样就已经安装完成，pathogen 会自动加载 bundle 中的插件\n\n## 更新插件\n如果想要更新某个插件，只需要进入到相应插件目录 `~/.vim/bundle/nerdtree` 中执行\n下拉命令\n```bash\n$ git pull\n```\n如果插件特别多，不想一个一个下拉代码，也可以使用 Git 的 ***submodule*** 模块\n托管到 GitHub 中\n在我的文章 [Git 工具 submodule](/2017/09/19/git-submodule) 中有介绍\n\n## 删除插件\n删除插件也很简单，需要进入 ***~/.vim/bundle*** 执行删除目录命令即可\n```bash\n$ rm -rf nerdtree\n```\n","slug":"vim-plugin-pathogen","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a41001w5gqof042qk9v"},{"title":"Vim 插件 tern_for_vim Javascript 自动补全","date":"2017-09-22T18:14:03.000Z","_content":"\n[专辑：Vim 练级手册](/vim)\n\n在使用 Vim 开发的过程中，发现 仅仅使用 ***YouCompleteMe*** 并不能很好的支持 JavaScript 的自动补全\n后来发现 ***Tern*** 可以跟 YouCompleteMe 很好的配合来完成自动补全\n下面我来介绍 Tern 在 Vim 中的插件 [tern_for_vim](https://github.com/ternjs/tern_for_vim.git)\n<!-- more -->\n\n<!-- toc -->\n\n## 预览\n![tern](/images/tern.gif)\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/marijnh/tern_for_vim\n```\n### Vundle\n在 `~/.vimrc` 中添加\n```bash\nPlugin 'marijnh/tern_for_vim'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n## 配合 YouCompleteMe\n安装完 Tern 后，需要 YouCompleteMe 在安装时传入支持 Tern 的参数\n```bash\n$ ./install.py --tern-complete\n```\nYouCompleteMe 的详细教程请参考我得文章 [Vim 插件 YouCompleteMe](/2017/09/22/vim-plugin-youcompleteme)\n\n## 配置\nTern 是 NodeJs 项目，所以需要进行 `npm install` 操作\n```bash\n$ cd ~/.vim/bundle/tern_for_vim\n$ npm install\n```\n完成后需要在项目的根目录建立 `.tern-project` 文件\n或者在用户根目录 `~/` 下建立 `.tern-project` 文件\n```json\n{\n    \"ecmaVersion\": 6,\n    \"libs\": [\n        \"browser\",\n        \"underscore\",\n        \"jquery\"\n    ],\n    \"plugins\": {\n        \"node\": {}\n    }\n}\n```\n此时你已经可以打开 Vim 体验 JavaScript 的自动补全了\n\n## 配置说明\n```bash\necmaVersion # 选择 ECMAScript 版本\nlibs        # browser 表示原生 js 补全，jquery 代表 jQuery 补全\nloadEagerly # 指定加载解析的 js 文件\ndontLoad    # 排除加载的文件\nplugins     # ternjs 使用的插件，配置的扩展补全的库等\n```\n### libs\n- browser\n- chai\n- ecma5，默认自动导入\n- ecma6\n- jquery\n- underscore\n","source":"_posts/2017-09-22-vim-plugin-tern.md","raw":"---\ntitle: Vim 插件 tern_for_vim Javascript 自动补全\ndate: 2017-09-22 18:14:03\ntags: [vim, javascript]\n---\n\n[专辑：Vim 练级手册](/vim)\n\n在使用 Vim 开发的过程中，发现 仅仅使用 ***YouCompleteMe*** 并不能很好的支持 JavaScript 的自动补全\n后来发现 ***Tern*** 可以跟 YouCompleteMe 很好的配合来完成自动补全\n下面我来介绍 Tern 在 Vim 中的插件 [tern_for_vim](https://github.com/ternjs/tern_for_vim.git)\n<!-- more -->\n\n<!-- toc -->\n\n## 预览\n![tern](/images/tern.gif)\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/marijnh/tern_for_vim\n```\n### Vundle\n在 `~/.vimrc` 中添加\n```bash\nPlugin 'marijnh/tern_for_vim'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n## 配合 YouCompleteMe\n安装完 Tern 后，需要 YouCompleteMe 在安装时传入支持 Tern 的参数\n```bash\n$ ./install.py --tern-complete\n```\nYouCompleteMe 的详细教程请参考我得文章 [Vim 插件 YouCompleteMe](/2017/09/22/vim-plugin-youcompleteme)\n\n## 配置\nTern 是 NodeJs 项目，所以需要进行 `npm install` 操作\n```bash\n$ cd ~/.vim/bundle/tern_for_vim\n$ npm install\n```\n完成后需要在项目的根目录建立 `.tern-project` 文件\n或者在用户根目录 `~/` 下建立 `.tern-project` 文件\n```json\n{\n    \"ecmaVersion\": 6,\n    \"libs\": [\n        \"browser\",\n        \"underscore\",\n        \"jquery\"\n    ],\n    \"plugins\": {\n        \"node\": {}\n    }\n}\n```\n此时你已经可以打开 Vim 体验 JavaScript 的自动补全了\n\n## 配置说明\n```bash\necmaVersion # 选择 ECMAScript 版本\nlibs        # browser 表示原生 js 补全，jquery 代表 jQuery 补全\nloadEagerly # 指定加载解析的 js 文件\ndontLoad    # 排除加载的文件\nplugins     # ternjs 使用的插件，配置的扩展补全的库等\n```\n### libs\n- browser\n- chai\n- ecma5，默认自动导入\n- ecma6\n- jquery\n- underscore\n","slug":"vim-plugin-tern","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a42001y5gqouqptc5xx"},{"title":"Vim 插件 YouCompleteMe 代码自动补全","date":"2017-09-22T18:14:28.000Z","_content":"\n[专辑：Vim 练级手册](/vim)\n\n> Vim 代码补全神器 [YouCompleteMe](https://github.com/Valloric/YouCompleteMe.git)\n\n<!-- more -->\n\n说到 ***YouCompleteMe*** 真是 Vim 开发必不可少的一个插件，功能全，速度快，\n唯一的缺点就是安装起来太复杂，这也算是变相的“能量守恒”吧\n废话不多说进入使用教程\n\n## 预览\n![ycm](/images/ycm.gif)\n\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone --recursive https://github.com/Valloric/YouCompleteMe\n```\n正常插件做到这一步就完成了，但是它还需要手动安装\n```bash\n$ cd ~/.vim/bundle/YouCompleteMe\n$ ./install.sh --clang-completer\n```\n`--clang-completer` 代表支持 c-family 的补全，如果不需要可以去掉\n如果想支持 Javascript 补全，需要加上参数 `--tern-completer` 详情见 [Vim 插件 tern_for_vim](/2017/09/22/vim-plugin-tern)\n\n安装程序默认使用 py2 ，如果你使用 ***pyenv*** 可以使用 `./install.py` 进行安装，需要修改下环境变量\n```bash\n$ echo 'export PYTHON_CONFIGURE_OPTS=\"--enable-framework\"' >> ~/.bash_profile\n$ source ~/.bash_profile\n```\n随后需要重新下载新 pyenv 环境并且换到该环境进行安装\n```bash\n$ pyenv install 3.5.0\n$ pyenv virtualenv 3.5.0 env_ycm\n$ cd ~/.vim/bundle/YouCompleteMe\n$ pyenv local env_ycm\n$ ./install.py \n```\n这样一来就静静的等待安装完成并体验了\n***温馨提示：整个安装过程时间非常长，强烈建议找个网络环境好并且翻墙的环境***\n\n### Vundle\n修改 `~/.vimrc` 文件\n```bash\nPlugin 'Valloric/YouCompleteMe'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n剩下的步骤就是跟上面以上执行 `./install.sh` 或 `./install.py` 了\n\n## 配置\n```bash\n\" 方法跳转 \"\nnnoremap <leader>gl :YcmCompleter GoToDeclaration<CR>\nnnoremap <leader>gf :YcmCompleter GoToDefinition<CR>\nnnoremap <leader>gg :YcmCompleter GoToDefinitionElseDeclaration<CR>\n```\n","source":"_posts/2017-09-22-vim-plugin-youcompleteme.md","raw":"---\ntitle: Vim 插件 YouCompleteMe 代码自动补全\ndate: 2017-09-22 18:14:28\ntags: [vim, python, javascript]\n---\n\n[专辑：Vim 练级手册](/vim)\n\n> Vim 代码补全神器 [YouCompleteMe](https://github.com/Valloric/YouCompleteMe.git)\n\n<!-- more -->\n\n说到 ***YouCompleteMe*** 真是 Vim 开发必不可少的一个插件，功能全，速度快，\n唯一的缺点就是安装起来太复杂，这也算是变相的“能量守恒”吧\n废话不多说进入使用教程\n\n## 预览\n![ycm](/images/ycm.gif)\n\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone --recursive https://github.com/Valloric/YouCompleteMe\n```\n正常插件做到这一步就完成了，但是它还需要手动安装\n```bash\n$ cd ~/.vim/bundle/YouCompleteMe\n$ ./install.sh --clang-completer\n```\n`--clang-completer` 代表支持 c-family 的补全，如果不需要可以去掉\n如果想支持 Javascript 补全，需要加上参数 `--tern-completer` 详情见 [Vim 插件 tern_for_vim](/2017/09/22/vim-plugin-tern)\n\n安装程序默认使用 py2 ，如果你使用 ***pyenv*** 可以使用 `./install.py` 进行安装，需要修改下环境变量\n```bash\n$ echo 'export PYTHON_CONFIGURE_OPTS=\"--enable-framework\"' >> ~/.bash_profile\n$ source ~/.bash_profile\n```\n随后需要重新下载新 pyenv 环境并且换到该环境进行安装\n```bash\n$ pyenv install 3.5.0\n$ pyenv virtualenv 3.5.0 env_ycm\n$ cd ~/.vim/bundle/YouCompleteMe\n$ pyenv local env_ycm\n$ ./install.py \n```\n这样一来就静静的等待安装完成并体验了\n***温馨提示：整个安装过程时间非常长，强烈建议找个网络环境好并且翻墙的环境***\n\n### Vundle\n修改 `~/.vimrc` 文件\n```bash\nPlugin 'Valloric/YouCompleteMe'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n剩下的步骤就是跟上面以上执行 `./install.sh` 或 `./install.py` 了\n\n## 配置\n```bash\n\" 方法跳转 \"\nnnoremap <leader>gl :YcmCompleter GoToDeclaration<CR>\nnnoremap <leader>gf :YcmCompleter GoToDefinition<CR>\nnnoremap <leader>gg :YcmCompleter GoToDefinitionElseDeclaration<CR>\n```\n","slug":"vim-plugin-youcompleteme","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4300205gqo3xu1ox4o"},{"title":"Vim 插件 ctrlp.vim 模糊搜索文件","date":"2017-09-23T20:09:57.000Z","_content":"\n[专辑：Vim 练级手册](/vim)\n\n> Vim 中的 find\n\n<!-- more -->\n\n<!-- toc -->\n我认为是 Vim 中必不可少的插件，作用是可以模糊搜索文件 ***/buf/mru/tag*** 等等\n我用的是改进版的 [ctrlpvim/ctrlp.vim](https://github.com/ctrlpvim/ctrlp.vim) 原版是 [kien/ctrlp.vim](https://github.com/kien/ctrlp.vim)\n\n## 预览\n![ctrlp](/images/ctrlp.gif)\n\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/kien/ctrlp.vim\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'kien/ctrlp.vim'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 配置\n```bash\nlet g:ctrlp_map = '<leader>p'\nlet g:ctrlp_cmd = 'CtrlP'\nmap <leader>f :CtrlPMRU<CR>\nlet g:ctrlp_custom_ignore = {\n    \\ 'dir':  '\\v[\\/]\\.(git|hg|svn|rvm)$',\n    \\ 'file': '\\v\\.(exe|so|dll|zip|tar|tar.gz|pyc)$',\n    \\ }\nlet g:ctrlp_working_path_mode=0\nlet g:ctrlp_match_window_bottom=1\nlet g:ctrlp_max_height=15\nlet g:ctrlp_match_window_reversed=0\nlet g:ctrlp_mruf_max=500\nlet g:ctrlp_follow_symlinks=1\n```\n\n## 使用\n```bash\n<leader>f   # 模糊搜索最近打开的文件(MRU)\n<leader>p   # 模糊搜索当前目录及其子目录下的所有文件\n```\n搜索框出来后，输入关键词，然后可以做如下操作\n```bash\nctrl + j/k  # 进行上下选择\nctrl + x    # 在当前窗口水平分屏打开文件\nctrl + v    # 同上, 垂直分屏\nctrl + t    # 在tab中打开\n```\n在搜索框状态下，还可以进行额外操作\n```bash\nF5          # 刷新可搜索文件\n<c-d>       # 只能搜索全路径文件\n<c-r>       # 可以使用正则搜索文件\n```\n更多操作见 [文档](https://github.com/ctrlpvim/ctrlp.vim#basic-usage)\n\n## ctrlp 的插件 ctrlp-funky\n[ctrlp-funky](https://github.com/tacahiroy/ctrlp-funky) 可以模糊搜索文件内容的方法名\n\n## 预览\n![ctrlpfu](/images/ctrlpfu.gif)\n\n### 安装\nPathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/tacahiroy/ctrlp-funky\n```\nVundle\n```bash\nPlugin 'tacahiroy/ctrlp-funky'\n```\n\n### 配置\n```bash\nnnoremap <Leader>fu :CtrlPFunky<Cr>\n\" narrow the list down with a word under cursor\nnnoremap <Leader>fU :execute 'CtrlPFunky ' . expand('<cword>')<Cr>\nlet g:ctrlp_funky_syntax_highlight = 1\n\nlet g:ctrlp_extensions = ['funky']\n```\n\n### 使用\n```bash\n<leader>fu      # 进入当前文件的函数列表搜索\n<leader>fU      # 搜索当前光标下单词对应的函数\n```\n","source":"_posts/2017-09-23-vim-plugin-ctrlp.md","raw":"---\ntitle: Vim 插件 ctrlp.vim 模糊搜索文件\ndate: 2017-09-23 20:09:57\ntags: [vim]\n---\n\n[专辑：Vim 练级手册](/vim)\n\n> Vim 中的 find\n\n<!-- more -->\n\n<!-- toc -->\n我认为是 Vim 中必不可少的插件，作用是可以模糊搜索文件 ***/buf/mru/tag*** 等等\n我用的是改进版的 [ctrlpvim/ctrlp.vim](https://github.com/ctrlpvim/ctrlp.vim) 原版是 [kien/ctrlp.vim](https://github.com/kien/ctrlp.vim)\n\n## 预览\n![ctrlp](/images/ctrlp.gif)\n\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/kien/ctrlp.vim\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'kien/ctrlp.vim'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 配置\n```bash\nlet g:ctrlp_map = '<leader>p'\nlet g:ctrlp_cmd = 'CtrlP'\nmap <leader>f :CtrlPMRU<CR>\nlet g:ctrlp_custom_ignore = {\n    \\ 'dir':  '\\v[\\/]\\.(git|hg|svn|rvm)$',\n    \\ 'file': '\\v\\.(exe|so|dll|zip|tar|tar.gz|pyc)$',\n    \\ }\nlet g:ctrlp_working_path_mode=0\nlet g:ctrlp_match_window_bottom=1\nlet g:ctrlp_max_height=15\nlet g:ctrlp_match_window_reversed=0\nlet g:ctrlp_mruf_max=500\nlet g:ctrlp_follow_symlinks=1\n```\n\n## 使用\n```bash\n<leader>f   # 模糊搜索最近打开的文件(MRU)\n<leader>p   # 模糊搜索当前目录及其子目录下的所有文件\n```\n搜索框出来后，输入关键词，然后可以做如下操作\n```bash\nctrl + j/k  # 进行上下选择\nctrl + x    # 在当前窗口水平分屏打开文件\nctrl + v    # 同上, 垂直分屏\nctrl + t    # 在tab中打开\n```\n在搜索框状态下，还可以进行额外操作\n```bash\nF5          # 刷新可搜索文件\n<c-d>       # 只能搜索全路径文件\n<c-r>       # 可以使用正则搜索文件\n```\n更多操作见 [文档](https://github.com/ctrlpvim/ctrlp.vim#basic-usage)\n\n## ctrlp 的插件 ctrlp-funky\n[ctrlp-funky](https://github.com/tacahiroy/ctrlp-funky) 可以模糊搜索文件内容的方法名\n\n## 预览\n![ctrlpfu](/images/ctrlpfu.gif)\n\n### 安装\nPathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/tacahiroy/ctrlp-funky\n```\nVundle\n```bash\nPlugin 'tacahiroy/ctrlp-funky'\n```\n\n### 配置\n```bash\nnnoremap <Leader>fu :CtrlPFunky<Cr>\n\" narrow the list down with a word under cursor\nnnoremap <Leader>fU :execute 'CtrlPFunky ' . expand('<cword>')<Cr>\nlet g:ctrlp_funky_syntax_highlight = 1\n\nlet g:ctrlp_extensions = ['funky']\n```\n\n### 使用\n```bash\n<leader>fu      # 进入当前文件的函数列表搜索\n<leader>fU      # 搜索当前光标下单词对应的函数\n```\n","slug":"vim-plugin-ctrlp","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4400225gqofxleljfq"},{"title":"Vim 插件 expand-region 区域选中","date":"2017-09-23T21:41:31.000Z","_content":"\n[专辑：Vim 练级手册](/vim)\n\n[expand-region](https://github.com/terryma/vim-expand-region) 可以快速选中临近区域\n\n<!-- more -->\n\n<!-- toc -->\n\n## 预览\n![er](/images/expand-region.gif)\n\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/terryma/vim-expand-region\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'terryma/vim-expand-region'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 配置\n```bash\nvmap v <Plug>(expand_region_expand)\nvmap V <Plug>(expand_region_shrink)\n```\n我修改了官方快捷键，使用 `v, V` 更符合进入选中模式的习惯，更多配置见 [文档](https://github.com/terryma/vim-expand-region#setting)\n\n## 使用\n```bash\nv   # 增加选中范围\nV   # 减少选中范围\n```\n","source":"_posts/2017-09-23-vim-plugin-expand-region.md","raw":"---\ntitle: Vim 插件 expand-region 区域选中\ndate: 2017-09-23 21:41:31\ntags: [vim]\n---\n\n[专辑：Vim 练级手册](/vim)\n\n[expand-region](https://github.com/terryma/vim-expand-region) 可以快速选中临近区域\n\n<!-- more -->\n\n<!-- toc -->\n\n## 预览\n![er](/images/expand-region.gif)\n\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/terryma/vim-expand-region\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'terryma/vim-expand-region'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 配置\n```bash\nvmap v <Plug>(expand_region_expand)\nvmap V <Plug>(expand_region_shrink)\n```\n我修改了官方快捷键，使用 `v, V` 更符合进入选中模式的习惯，更多配置见 [文档](https://github.com/terryma/vim-expand-region#setting)\n\n## 使用\n```bash\nv   # 增加选中范围\nV   # 减少选中范围\n```\n","slug":"vim-plugin-expand-region","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4500245gqop28wu2d9"},{"title":"Vim 插件 quickrun 快速运行","date":"2017-09-23T21:27:02.000Z","_content":"\n[专辑：Vim 练级手册](/vim)\n\n[quickrun](https://github.com/wklken/k-vim) 可以快速运行 ***.py/.sh*** 等常见程序\n<!-- more -->\n\n<!-- toc -->\n\n## 预览\n![quickrun](/images/quickrun.gif)\n\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/wklken/k-vim\n```\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'wklken/k-vim'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 配置\n```bash\nlet g:quickrun_config = {\n\\   \"_\" : {\n\\       \"outputter\" : \"message\",\n\\   },\n\\}\n\nlet g:quickrun_no_default_key_mappings = 1\nnmap <Leader>r <Plug>(quickrun)\nmap <F10> :QuickRun<CR>\n```\n\n## 使用\n```bash\n<leader>r 或 F10    # 可以运行程序，以 message 显示结果，任意键可返回\n```\n","source":"_posts/2017-09-23-vim-plugin-quickrun.md","raw":"---\ntitle: Vim 插件 quickrun 快速运行\ndate: 2017-09-23 21:27:02\ntags: [vim]\n---\n\n[专辑：Vim 练级手册](/vim)\n\n[quickrun](https://github.com/wklken/k-vim) 可以快速运行 ***.py/.sh*** 等常见程序\n<!-- more -->\n\n<!-- toc -->\n\n## 预览\n![quickrun](/images/quickrun.gif)\n\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/wklken/k-vim\n```\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'wklken/k-vim'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 配置\n```bash\nlet g:quickrun_config = {\n\\   \"_\" : {\n\\       \"outputter\" : \"message\",\n\\   },\n\\}\n\nlet g:quickrun_no_default_key_mappings = 1\nnmap <Leader>r <Plug>(quickrun)\nmap <F10> :QuickRun<CR>\n```\n\n## 使用\n```bash\n<leader>r 或 F10    # 可以运行程序，以 message 显示结果，任意键可返回\n```\n","slug":"vim-plugin-quickrun","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4600265gqoh77ejxtb"},{"title":"窗口管理工具 Tmux","date":"2017-09-24T13:29:21.000Z","_content":"\n> [Tmux](https://github.com/tmux/tmux/wiki) 是一个终端复用器: 可以激活多个终端或\n窗口, 在每个终端都可以单独访问，每一个终端都可以访问，运行和控制各自的程序\n.tmux 类似于screen，可以关闭窗口将程序放在后台运行，需要的时候再重新连接。\n\n<!-- more -->\n\n<!-- toc -->\n\nMac 终端管理神器 iTerm 也可以很好的多标签页面和分割窗口工作，而 Tmux 最大的好处\n是可以离线后可以储存窗口布局和使用状态，在 SSH 环境下尤其有帮助\n\n## 安装\n### Mac\n```bash\n$ brew install tmux\n```\n### Centos\n```bash\n$ yum install tmux\n```\n\n## 使用\n### Session\n```bash\ntmux [new -s session-name]                      # 创建session，并命名，默认创建一个无名会话\ntmux rename-session [-t target-name] new-name   # 修改session名字，-t target-name 不是必传，默认当前链接 session\ntmux (attach, a, at) [-t session-name]          # 打开指定session，默认上次访问会话\ntmux switch -t <session_name>                   # 转换到指定session\ntmux (list-sessions, ls)                        # 列出所有session\ntmux detach                                     # 退出当前session\ntmux kill-session [-t session-name]             # 删除指定会话，默认删除上次访问会话\n```\n\n### windows\n```bash\ntmux new-window                             # 创建一个新的 window\ntmux select-window -t (0-9)                 # 根据索引转到该 window\ntmux rename-window                          # 重命名当前 window\ntmux kill-window [-t window-name]           # 删除窗口\n```\n\n### Panes\n```bash\ntmux split-window        # 将 window 垂直划分为两个 pane\ntmux split-window -h     # 将 window 水平划分为两个 pane\ntmux swap-pane -[UDLR]   # 在指定的方向交换 pane\ntmux select-pane -[UDLR] # 在指定的方向选择下一个 pane\ntmux select-pane -t :.+  # 选择按数字顺序的下一个 pane\n```\n\n### 其他\n```bash\ntmux list-keys\n# 列出所有可以的快捷键和其运行的 tmux 命令\n\ntmux list-commands\n# 列出所有的 tmux 命令及其参数\n\ntmux info\n# 流出所有的 session, window, pane, 运行的进程号，等。\n\ntmux source-file ~/.tmux.conf\n# 重新加载当前的 tmux 配置（基于一个默认的 tmux 配置）\n```\n\n## prefix 快捷键\n### 基础操作\n```bash\n?\t列出所有快捷键；按q返回\nd\t脱离当前会话,可暂时返回Shell界面，输入tmux attach能够重新进入之前会话\ns\t选择并切换会话；在同时开启了多个会话时使用\n$   重命名 session\nD\t选择要脱离的会话；在同时开启了多个会话时使用\n:\t进入命令行模式；此时可输入支持的命令，例如kill-server所有tmux会话\n[\t复制模式，光标移动到复制内容位置，空格键开始，方向键选择复制，回车确认，q/Esc退出\n]\t进入粘贴模式，粘贴之前复制的内容，按q/Esc退出\n~\t列出提示信息缓存；其中包含了之前tmux返回的各种提示信息\nt\t显示当前的时间\nCtrl+z\t挂起当前会话\n```\n\n### 窗口操作\n```bash\nc       # 创建新窗口\n&       # 关闭当前窗口\n[0-9]   # 切换窗口\np       # 切换至上一窗口\nn       # 切换至下一窗口\nl       # 前后窗口间互相切换\nw       # 通过窗口列表切换窗口\n,       # 重命名当前窗口，便于识别\n.       # 修改当前窗口编号，相当于重新排序\nf       # 在所有窗口中查找关键词，便于窗口多了切换\n```\n### 面板操作\n```bash\n\"           # 将当前面板上下分屏\n%           # 将当前面板左右分屏\nx           # 关闭当前分屏\n!           # 将当前面板置于新窗口,即新建一个窗口,其中仅包含当前面板\nCtrl+方向键\t# 以1个单元格为单位移动边缘以调整当前面板大小\nAlt+方向键\t# 以5个单元格为单位移动边缘以调整当前面板大小\n空格键\t    # 可以在默认面板布局中切换，试试就知道了\nq           # 显示面板编号\no           # 选择当前窗口中下一个面板\n方向键\t    # 移动光标选择对应面板\n{           # 向前置换当前面板\n}           # 向后置换当前面板\nAlt+o\t    # 逆时针旋转当前窗口的面板\nCtrl+o\t    # 顺时针旋转当前窗口的面板\nz\t        #tmux 1.8新特性，最大化当前所在面板\n```\n\n## 配置文件\nTmux 可以在 `~/.tmux.conf` 或 `/etc/.tmux.conf` 中配置快捷键等操作\n```bash\n# 改变 prefix 快捷键为 <C-a>\nunbind C-b\nset -g prefix C-a\nbind C-a send-prefix\n\n# 绑定重新加载 ~/.tmux.conf 的快捷键\nbind r source-file ~/.tmux.conf ; display-message \"Config reloaded..\"\n\nset -g default-terminal \"screen-256color\"   # use 256 colors\nset -g display-time 5000                    # status line messages display\nset -g history-limit 100000                 # scrollback buffer n lines\nset -g base-index 1                         # 窗口索引从1开始，默认是0\nset -g pane-base-index 1\nsetw -g mode-keys vi                        # use vi in copy mode\n# set-option -g default-shell $SHELL\n\n# 美化状态栏\nset-option -g status on\nset-option -g status-interval 2\nset-option -g status-justify \"centre\"\nset-option -g status-left-length 60\nset-option -g status-right-length 90\nset-option -g status-left \"#(~/WebstormProjects/wxnacy.github.io/shells/tmux/plugin/tmux-powerline/powerline.sh left)\"\nset-option -g status-right \"#(~/WebstormProjects/wxnacy.github.io/shells/tmux/plugin/tmux-powerline/powerline.sh right)\"\nset-window-option -g window-status-current-format \"#[fg=colour235, bg=colour27]⮀#[fg=colour255, bg=colour27] #I ⮁ #W #[fg=colour27, bg=colour235]⮀\"\n\n\n\n# 分割窗口\nunbind '\"'\nbind - splitw -v    # 垂直分割\nunbind %\nbind | splitw -h    # 水平分割\n\n\n# 选择面板，更符合 Vim 习惯\nbind k selectp -U\nbind j selectp -D\nbind h selectp -L\nbind l selectp -R\n\n# 使用 X 关闭 window\nunbind &\nbind X killw\n```\n\n## 参考文献\n- [Linux下终端利器tmux](http://kumu-linux.github.io/blog/2013/08/06/tmux/)\n- [Tmux (简体中文)](https://wiki.archlinux.org/index.php/Tmux_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)\n- [Tmux - Linux从业者必备利器](http://cenalulu.github.io/linux/tmux/)\n- [使用tmux](https://wiki.freebsdchina.org/software/t/tmux)\n- [Tmux 速成教程：技巧和调整](http://blog.jobbole.com/87584/)\n","source":"_posts/2017-09-24-tmux.md","raw":"---\ntitle: 窗口管理工具 Tmux\ndate: 2017-09-24 13:29:21\ntags: [linux, mac, tmux]\n---\n\n> [Tmux](https://github.com/tmux/tmux/wiki) 是一个终端复用器: 可以激活多个终端或\n窗口, 在每个终端都可以单独访问，每一个终端都可以访问，运行和控制各自的程序\n.tmux 类似于screen，可以关闭窗口将程序放在后台运行，需要的时候再重新连接。\n\n<!-- more -->\n\n<!-- toc -->\n\nMac 终端管理神器 iTerm 也可以很好的多标签页面和分割窗口工作，而 Tmux 最大的好处\n是可以离线后可以储存窗口布局和使用状态，在 SSH 环境下尤其有帮助\n\n## 安装\n### Mac\n```bash\n$ brew install tmux\n```\n### Centos\n```bash\n$ yum install tmux\n```\n\n## 使用\n### Session\n```bash\ntmux [new -s session-name]                      # 创建session，并命名，默认创建一个无名会话\ntmux rename-session [-t target-name] new-name   # 修改session名字，-t target-name 不是必传，默认当前链接 session\ntmux (attach, a, at) [-t session-name]          # 打开指定session，默认上次访问会话\ntmux switch -t <session_name>                   # 转换到指定session\ntmux (list-sessions, ls)                        # 列出所有session\ntmux detach                                     # 退出当前session\ntmux kill-session [-t session-name]             # 删除指定会话，默认删除上次访问会话\n```\n\n### windows\n```bash\ntmux new-window                             # 创建一个新的 window\ntmux select-window -t (0-9)                 # 根据索引转到该 window\ntmux rename-window                          # 重命名当前 window\ntmux kill-window [-t window-name]           # 删除窗口\n```\n\n### Panes\n```bash\ntmux split-window        # 将 window 垂直划分为两个 pane\ntmux split-window -h     # 将 window 水平划分为两个 pane\ntmux swap-pane -[UDLR]   # 在指定的方向交换 pane\ntmux select-pane -[UDLR] # 在指定的方向选择下一个 pane\ntmux select-pane -t :.+  # 选择按数字顺序的下一个 pane\n```\n\n### 其他\n```bash\ntmux list-keys\n# 列出所有可以的快捷键和其运行的 tmux 命令\n\ntmux list-commands\n# 列出所有的 tmux 命令及其参数\n\ntmux info\n# 流出所有的 session, window, pane, 运行的进程号，等。\n\ntmux source-file ~/.tmux.conf\n# 重新加载当前的 tmux 配置（基于一个默认的 tmux 配置）\n```\n\n## prefix 快捷键\n### 基础操作\n```bash\n?\t列出所有快捷键；按q返回\nd\t脱离当前会话,可暂时返回Shell界面，输入tmux attach能够重新进入之前会话\ns\t选择并切换会话；在同时开启了多个会话时使用\n$   重命名 session\nD\t选择要脱离的会话；在同时开启了多个会话时使用\n:\t进入命令行模式；此时可输入支持的命令，例如kill-server所有tmux会话\n[\t复制模式，光标移动到复制内容位置，空格键开始，方向键选择复制，回车确认，q/Esc退出\n]\t进入粘贴模式，粘贴之前复制的内容，按q/Esc退出\n~\t列出提示信息缓存；其中包含了之前tmux返回的各种提示信息\nt\t显示当前的时间\nCtrl+z\t挂起当前会话\n```\n\n### 窗口操作\n```bash\nc       # 创建新窗口\n&       # 关闭当前窗口\n[0-9]   # 切换窗口\np       # 切换至上一窗口\nn       # 切换至下一窗口\nl       # 前后窗口间互相切换\nw       # 通过窗口列表切换窗口\n,       # 重命名当前窗口，便于识别\n.       # 修改当前窗口编号，相当于重新排序\nf       # 在所有窗口中查找关键词，便于窗口多了切换\n```\n### 面板操作\n```bash\n\"           # 将当前面板上下分屏\n%           # 将当前面板左右分屏\nx           # 关闭当前分屏\n!           # 将当前面板置于新窗口,即新建一个窗口,其中仅包含当前面板\nCtrl+方向键\t# 以1个单元格为单位移动边缘以调整当前面板大小\nAlt+方向键\t# 以5个单元格为单位移动边缘以调整当前面板大小\n空格键\t    # 可以在默认面板布局中切换，试试就知道了\nq           # 显示面板编号\no           # 选择当前窗口中下一个面板\n方向键\t    # 移动光标选择对应面板\n{           # 向前置换当前面板\n}           # 向后置换当前面板\nAlt+o\t    # 逆时针旋转当前窗口的面板\nCtrl+o\t    # 顺时针旋转当前窗口的面板\nz\t        #tmux 1.8新特性，最大化当前所在面板\n```\n\n## 配置文件\nTmux 可以在 `~/.tmux.conf` 或 `/etc/.tmux.conf` 中配置快捷键等操作\n```bash\n# 改变 prefix 快捷键为 <C-a>\nunbind C-b\nset -g prefix C-a\nbind C-a send-prefix\n\n# 绑定重新加载 ~/.tmux.conf 的快捷键\nbind r source-file ~/.tmux.conf ; display-message \"Config reloaded..\"\n\nset -g default-terminal \"screen-256color\"   # use 256 colors\nset -g display-time 5000                    # status line messages display\nset -g history-limit 100000                 # scrollback buffer n lines\nset -g base-index 1                         # 窗口索引从1开始，默认是0\nset -g pane-base-index 1\nsetw -g mode-keys vi                        # use vi in copy mode\n# set-option -g default-shell $SHELL\n\n# 美化状态栏\nset-option -g status on\nset-option -g status-interval 2\nset-option -g status-justify \"centre\"\nset-option -g status-left-length 60\nset-option -g status-right-length 90\nset-option -g status-left \"#(~/WebstormProjects/wxnacy.github.io/shells/tmux/plugin/tmux-powerline/powerline.sh left)\"\nset-option -g status-right \"#(~/WebstormProjects/wxnacy.github.io/shells/tmux/plugin/tmux-powerline/powerline.sh right)\"\nset-window-option -g window-status-current-format \"#[fg=colour235, bg=colour27]⮀#[fg=colour255, bg=colour27] #I ⮁ #W #[fg=colour27, bg=colour235]⮀\"\n\n\n\n# 分割窗口\nunbind '\"'\nbind - splitw -v    # 垂直分割\nunbind %\nbind | splitw -h    # 水平分割\n\n\n# 选择面板，更符合 Vim 习惯\nbind k selectp -U\nbind j selectp -D\nbind h selectp -L\nbind l selectp -R\n\n# 使用 X 关闭 window\nunbind &\nbind X killw\n```\n\n## 参考文献\n- [Linux下终端利器tmux](http://kumu-linux.github.io/blog/2013/08/06/tmux/)\n- [Tmux (简体中文)](https://wiki.archlinux.org/index.php/Tmux_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)\n- [Tmux - Linux从业者必备利器](http://cenalulu.github.io/linux/tmux/)\n- [使用tmux](https://wiki.freebsdchina.org/software/t/tmux)\n- [Tmux 速成教程：技巧和调整](http://blog.jobbole.com/87584/)\n","slug":"tmux","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4700285gqoal5opiqx"},{"title":"网络请求断线重连工具 Mosh","date":"2017-09-25T07:45:24.000Z","_content":"\n> Mosh 是一个替代 SSH 的免费软件，它最大的特点是支持网络漫游和间歇性连接。\n\n<!-- more -->\n\n<!-- toc -->\n## 优点\n\n- 持续连接：如果您的网络中断，Mosh将会在新网络可用的时候自动重新连接服务器。\n- 减少网络延时：SSH 需要等待服务器响应后，才显示您的输入内容。而 Mosh 会马上显示\n    您的输入，编辑，删除等内容。\n- 像 SSH，但比 SSH 更好：Mosh 会通过 SSH 登录到服务器，然后运行普通终端应用程序。\n\n## 安装\n### Mac\n```bash\n$ brew install mobile-shell\n```\n### Centos\n```\n$ yum install mosh\n```\n### Ubuntu\n```bash\n$ apt-get install mosh\n```\n***注意：想要使用 Mosh ，客户端和服务器必须同时安装***\n\n## 设置防火墙\n因为 Mosh 使用的是 UDP 端口，所以服务器上需要打开60000-61000 UDP 端口\n打开：`/etc/iptables.firewall.rules`\n```bash\n-A INPUT -p udp --dport 60000:61000 -j ACCEPT\n```\n加入如上这行后，然后重新载入您的防火墙规则：\n```bash\n$ sudo iptables-restore < /etc/iptables.firewall.rules\n```\n\n## 使用\nMosh 可以像 SSH 那样去连接服务器\n```bash\n$ mosh username@host\n```\n如果你设置了 `~/.ssh/config` 文件，则可以直接连接服务器名称\n```bash\n$ mosh wxnacy\n```\n如果SSH监听在非正规端口（比如 23），需要如下连接：\n```bash\n$ mosh username@host --ssh=\"ssh -p 23\"\n```\n","source":"_posts/2017-09-25-mosh.md","raw":"---\ntitle: 网络请求断线重连工具 Mosh\ndate: 2017-09-25 07:45:24\ntags: [linux, ssh, mac]\n---\n\n> Mosh 是一个替代 SSH 的免费软件，它最大的特点是支持网络漫游和间歇性连接。\n\n<!-- more -->\n\n<!-- toc -->\n## 优点\n\n- 持续连接：如果您的网络中断，Mosh将会在新网络可用的时候自动重新连接服务器。\n- 减少网络延时：SSH 需要等待服务器响应后，才显示您的输入内容。而 Mosh 会马上显示\n    您的输入，编辑，删除等内容。\n- 像 SSH，但比 SSH 更好：Mosh 会通过 SSH 登录到服务器，然后运行普通终端应用程序。\n\n## 安装\n### Mac\n```bash\n$ brew install mobile-shell\n```\n### Centos\n```\n$ yum install mosh\n```\n### Ubuntu\n```bash\n$ apt-get install mosh\n```\n***注意：想要使用 Mosh ，客户端和服务器必须同时安装***\n\n## 设置防火墙\n因为 Mosh 使用的是 UDP 端口，所以服务器上需要打开60000-61000 UDP 端口\n打开：`/etc/iptables.firewall.rules`\n```bash\n-A INPUT -p udp --dport 60000:61000 -j ACCEPT\n```\n加入如上这行后，然后重新载入您的防火墙规则：\n```bash\n$ sudo iptables-restore < /etc/iptables.firewall.rules\n```\n\n## 使用\nMosh 可以像 SSH 那样去连接服务器\n```bash\n$ mosh username@host\n```\n如果你设置了 `~/.ssh/config` 文件，则可以直接连接服务器名称\n```bash\n$ mosh wxnacy\n```\n如果SSH监听在非正规端口（比如 23），需要如下连接：\n```bash\n$ mosh username@host --ssh=\"ssh -p 23\"\n```\n","slug":"mosh","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a48002a5gqornlpzp7k"},{"title":"Vim 插件 vim-airline 状态栏增强显示","date":"2017-09-25T14:41:18.000Z","_content":"\n[专辑：Vim 练级手册](/vim)\n\n[vim-airline](https://github.com/bling/vim-airline) 状态栏增强显示\n先来看效果\n![airline](/images/airline.png)\n\n<!-- more -->\n\n<!-- toc -->\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/bling/vim-airline\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'bling/vim-airline'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 配置\n```bash\nif !exists('g:airline_symbols')\nlet g:airline_symbols = {}\nendif\nlet g:airline_left_sep = '▶'\nlet g:airline_left_alt_sep = '❯'\nlet g:airline_right_sep = '◀'\nlet g:airline_right_alt_sep = '❮'\nlet g:airline_symbols.linenr = '¶'\nlet g:airline_symbols.branch = '⎇'\n\n\" 是否打开tabline\nlet g:airline#extensions#tabline#enabled = 1 # 打开后，tabline和tmuxline都可以得到增强\n```\nairline 还可以支持很多插件如 ***virtualenv, tmux*** ，更多见[ 文档 ](https://github.com/bling/vim-airline#features)\n","source":"_posts/2017-09-25-vim-plugin-artline.md","raw":"---\ntitle: Vim 插件 vim-airline 状态栏增强显示\ndate: 2017-09-25 14:41:18\ntags: [vim]\n---\n\n[专辑：Vim 练级手册](/vim)\n\n[vim-airline](https://github.com/bling/vim-airline) 状态栏增强显示\n先来看效果\n![airline](/images/airline.png)\n\n<!-- more -->\n\n<!-- toc -->\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/bling/vim-airline\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'bling/vim-airline'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 配置\n```bash\nif !exists('g:airline_symbols')\nlet g:airline_symbols = {}\nendif\nlet g:airline_left_sep = '▶'\nlet g:airline_left_alt_sep = '❯'\nlet g:airline_right_sep = '◀'\nlet g:airline_right_alt_sep = '❮'\nlet g:airline_symbols.linenr = '¶'\nlet g:airline_symbols.branch = '⎇'\n\n\" 是否打开tabline\nlet g:airline#extensions#tabline#enabled = 1 # 打开后，tabline和tmuxline都可以得到增强\n```\nairline 还可以支持很多插件如 ***virtualenv, tmux*** ，更多见[ 文档 ](https://github.com/bling/vim-airline#features)\n","slug":"vim-plugin-artline","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a49002b5gqow8m0trzp"},{"title":"Vim 插件 closetag 成对标签自动补全","date":"2017-09-25T11:36:18.000Z","_content":"\n[专辑：Vim 练级手册](/vim)\n\n\n在 IDE 开发代码时，***xml, html*** 等成对标签都可以自动补全\n在 Vim 中想要达到这样的效果需要借助插件 [closetag](https://github.com/docunext/closetag.vim)\n\n<!-- more -->\n\n<!-- toc -->\n## 预览\n![closetag](/images/closetag.gif)\n\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/docunext/closetag.vim\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'docunext/closetag.vim'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 配置\n```bash\nlet g:closetag_html_style=1     \" 支持 html 风格\"\n```\n\n## 使用\n被动技能\n","source":"_posts/2017-09-25-vim-plugin-closetag.md","raw":"---\ntitle: Vim 插件 closetag 成对标签自动补全\ndate: 2017-09-25 11:36:18\ntags: [vim]\n---\n\n[专辑：Vim 练级手册](/vim)\n\n\n在 IDE 开发代码时，***xml, html*** 等成对标签都可以自动补全\n在 Vim 中想要达到这样的效果需要借助插件 [closetag](https://github.com/docunext/closetag.vim)\n\n<!-- more -->\n\n<!-- toc -->\n## 预览\n![closetag](/images/closetag.gif)\n\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/docunext/closetag.vim\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'docunext/closetag.vim'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 配置\n```bash\nlet g:closetag_html_style=1     \" 支持 html 风格\"\n```\n\n## 使用\n被动技能\n","slug":"vim-plugin-closetag","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4a002d5gqoo45syhwx"},{"title":"Vim 插件 gundo 代码回滚","date":"2017-09-25T11:04:11.000Z","_content":"\n[专辑：Vim 练级手册](/vim)\n\n成熟健壮的 IDE 都有本地代码回滚的功能，\n[gundo](https://github.com/sjl/gundo.vim) 也可以帮助 Vim 实现查看历史记录和回滚的功能\n\n<!-- more -->\n\n<!-- toc -->\n## 预览\n![gundo](/images/gundo.gif)\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/sjl/gundo.vim\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'sjl/gundo.vim'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 配置\n```bash\nnnoremap <leader>h :GundoToggle<CR>\n```\n\n## 使用\n```bash\n<leader>h   # 打开或关闭 gundo 界面\nj/k         # 上下选择\np           # 查看diff\n回车        # 回滚文件到这个时刻的版本\n```\n找回代码只限于本地编辑，如果 `:q` 退出过，就找不回来了\n","source":"_posts/2017-09-25-vim-plugin-gundo.md","raw":"---\ntitle: Vim 插件 gundo 代码回滚\ndate: 2017-09-25 11:04:11\ntags: [vim]\n---\n\n[专辑：Vim 练级手册](/vim)\n\n成熟健壮的 IDE 都有本地代码回滚的功能，\n[gundo](https://github.com/sjl/gundo.vim) 也可以帮助 Vim 实现查看历史记录和回滚的功能\n\n<!-- more -->\n\n<!-- toc -->\n## 预览\n![gundo](/images/gundo.gif)\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/sjl/gundo.vim\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'sjl/gundo.vim'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 配置\n```bash\nnnoremap <leader>h :GundoToggle<CR>\n```\n\n## 使用\n```bash\n<leader>h   # 打开或关闭 gundo 界面\nj/k         # 上下选择\np           # 查看diff\n回车        # 回滚文件到这个时刻的版本\n```\n找回代码只限于本地编辑，如果 `:q` 退出过，就找不回来了\n","slug":"vim-plugin-gundo","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4b002e5gqox3ikff44"},{"title":"Vim 插件 vim-repeat 重复插件操作","date":"2017-09-25T10:40:59.000Z","_content":"\n[专辑：Vim 练级手册](/vim)\n\n> [vim-repeat](https://github.com/tpope/vim-repeat) 重复一个插件的操作\n\n<!-- more -->\n\n<!-- toc -->\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/tpope/vim-repeat\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'tpope/vim-repeat'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 使用\n使用 `.` 即可重复操作，支持 [vim-surround](/2017/09/25/vim-plugin-surround/)\n更多支持列表见 [文档](https://github.com/tpope/vim-repeat#repeatvim)\n","source":"_posts/2017-09-25-vim-plugin-repeat.md","raw":"---\ntitle: Vim 插件 vim-repeat 重复插件操作\ndate: 2017-09-25 10:40:59\ntags: [vim]\n---\n\n[专辑：Vim 练级手册](/vim)\n\n> [vim-repeat](https://github.com/tpope/vim-repeat) 重复一个插件的操作\n\n<!-- more -->\n\n<!-- toc -->\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/tpope/vim-repeat\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'tpope/vim-repeat'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 使用\n使用 `.` 即可重复操作，支持 [vim-surround](/2017/09/25/vim-plugin-surround/)\n更多支持列表见 [文档](https://github.com/tpope/vim-repeat#repeatvim)\n","slug":"vim-plugin-repeat","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4c002g5gqohtvlofnw"},{"title":"Vim 插件 vim-colors-solarized 主题","date":"2017-09-25T15:54:43.000Z","_content":"\n[专辑：Vim 练级手册](/vim)\n\n[vim-colors-solarized](https://github.com/altercation/vim-colors-solarized) 不用多说现在最流行的 Vim 主题\n\n<!-- more -->\n\n<!-- toc -->\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/altercation/vim-colors-solarized\n```\n因为 Vim 配色是读取的 `~/.vim/colors` 目录下，所以还需要一步复制操作\n```bash\n$ cp ~/.vim/bundle/vim-colors-solarized/colors/solarized.vim ~/.vim/colors/\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'altercation/vim-colors-solarized'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n复制操作跟 Pathogen 相同\n\n## 配置\n```bash\nset background=dark\nset t_Co=256\ncolorscheme solarized\n```\n重新打开 Vim 即可看到效果\n","source":"_posts/2017-09-25-vim-plugin-solarize.md","raw":"---\ntitle: Vim 插件 vim-colors-solarized 主题\ndate: 2017-09-25 15:54:43\ntags: [vim]\n---\n\n[专辑：Vim 练级手册](/vim)\n\n[vim-colors-solarized](https://github.com/altercation/vim-colors-solarized) 不用多说现在最流行的 Vim 主题\n\n<!-- more -->\n\n<!-- toc -->\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/altercation/vim-colors-solarized\n```\n因为 Vim 配色是读取的 `~/.vim/colors` 目录下，所以还需要一步复制操作\n```bash\n$ cp ~/.vim/bundle/vim-colors-solarized/colors/solarized.vim ~/.vim/colors/\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'altercation/vim-colors-solarized'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n复制操作跟 Pathogen 相同\n\n## 配置\n```bash\nset background=dark\nset t_Co=256\ncolorscheme solarized\n```\n重新打开 Vim 即可看到效果\n","slug":"vim-plugin-solarize","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4d002i5gqo5gtgzhit"},{"title":"Vim 插件 nerdcommenter 快速注释","date":"2017-09-25T17:49:06.000Z","_content":"\n[专辑：Vim 练级手册](/vim)\n\n[nerdcommenter](https://github.com/scrooloose/nerdcommenter) 快速注释/解开注释\nVim 必备的插件\n\n<!-- more -->\n\n<!-- toc -->\n![/images/nerdc.gif](/images/nerdc.gif)\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/scrooloose/nerdcommenter\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'scrooloose/nerdcommenter'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 配置\n```bash\nlet g:NERDSpaceDelims=1     \" 注释后面自动加空格\"\n```\n\n## 使用\n```bash\n<leader>cc   加注释\n<leader>cu   解开注释\n\n<leader>c<space>  加上/解开注释, 智能判断\n<leader>cy   先复制, 再注解(p可以进行黏贴)\n```\n更多使用见[文档](https://github.com/scrooloose/nerdcommenter#usage)\n","source":"_posts/2017-09-25-vim-plugin-nerdcommenter.md","raw":"---\ntitle: Vim 插件 nerdcommenter 快速注释\ndate: 2017-09-25 17:49:06\ntags: [vim]\n---\n\n[专辑：Vim 练级手册](/vim)\n\n[nerdcommenter](https://github.com/scrooloose/nerdcommenter) 快速注释/解开注释\nVim 必备的插件\n\n<!-- more -->\n\n<!-- toc -->\n![/images/nerdc.gif](/images/nerdc.gif)\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/scrooloose/nerdcommenter\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'scrooloose/nerdcommenter'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 配置\n```bash\nlet g:NERDSpaceDelims=1     \" 注释后面自动加空格\"\n```\n\n## 使用\n```bash\n<leader>cc   加注释\n<leader>cu   解开注释\n\n<leader>c<space>  加上/解开注释, 智能判断\n<leader>cy   先复制, 再注解(p可以进行黏贴)\n```\n更多使用见[文档](https://github.com/scrooloose/nerdcommenter#usage)\n","slug":"vim-plugin-nerdcommenter","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4e002l5gqoqyzgr8ig"},{"title":"Vim 插件 vim-surround 单词加环绕符号","date":"2017-09-25T10:40:43.000Z","_content":"\n[专辑：Vim 练级手册](/vim)\n\n> [vim-surround](https://github.com/tpope/vim-surround) 可以给单词或句子加上各种标签符号\n\n<!-- more -->\n\n<!-- toc -->\n![/images/surround.gif](/images/surround.gif)\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/tpope/vim-surround\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'tpope/vim-surround'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 使用\n```bash\ncs\"'            # 替换 ==> \"Hello world!\" -> 'Hello world!'\ncst\"            # 替换-标签(t=tag)  ==> <a>abc</a>a>  -> \"abc\"\ncst<html>       # 替换标签 ==> <a>abc</a>a>  -> <html>abc</html>html>\nds\"             # 删除  ==> \"Hello world!\" -> Hello world!\nysiw\"           # 添加(ys=you surround) ==> Hello -> \"Hello\"\ncsw\"            # 添加  ==> Hello -> \"Hello\"\nveeS\"           # 添加-两个词   ==> hello world -> \"hello world\"\nys$\"            # 添加-当前到行尾:\nyss\"            # 添加-整行 ==> Hello world -> \"Hello world\"\nySS\"\nHello world ->\n\"\n    hello world\n\"\n\n# 左符号/右符号 => 带不带空格\ncs([\n(hello) -> [ hello  ]\n\ncs(]\n(hello) -> [hello])\n])\n```\n","source":"_posts/2017-09-25-vim-plugin-surround.md","raw":"---\ntitle: Vim 插件 vim-surround 单词加环绕符号\ndate: 2017-09-25 10:40:43\ntags: [vim]\n---\n\n[专辑：Vim 练级手册](/vim)\n\n> [vim-surround](https://github.com/tpope/vim-surround) 可以给单词或句子加上各种标签符号\n\n<!-- more -->\n\n<!-- toc -->\n![/images/surround.gif](/images/surround.gif)\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/tpope/vim-surround\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'tpope/vim-surround'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 使用\n```bash\ncs\"'            # 替换 ==> \"Hello world!\" -> 'Hello world!'\ncst\"            # 替换-标签(t=tag)  ==> <a>abc</a>a>  -> \"abc\"\ncst<html>       # 替换标签 ==> <a>abc</a>a>  -> <html>abc</html>html>\nds\"             # 删除  ==> \"Hello world!\" -> Hello world!\nysiw\"           # 添加(ys=you surround) ==> Hello -> \"Hello\"\ncsw\"            # 添加  ==> Hello -> \"Hello\"\nveeS\"           # 添加-两个词   ==> hello world -> \"hello world\"\nys$\"            # 添加-当前到行尾:\nyss\"            # 添加-整行 ==> Hello world -> \"Hello world\"\nySS\"\nHello world ->\n\"\n    hello world\n\"\n\n# 左符号/右符号 => 带不带空格\ncs([\n(hello) -> [ hello  ]\n\ncs(]\n(hello) -> [hello])\n])\n```\n","slug":"vim-plugin-surround","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4f002n5gqo3ciggf8i"},{"title":"Tmux 插件 resurect & continuum 会话定时保存","date":"2017-10-04T09:44:13.000Z","_content":"\nTmux 好用，但是在电脑重启后，之前开启过的回话都不会保存，\n而 [tmux-resurect](https://github.com/tmux-plugins/tmux-resurrect) 和 [tmux-continuum](https://github.com/tmux-plugins/tmux-continuum) 可以很好的自动保存 Tmux 使用状态\n<!-- more -->\n\n<!-- toc -->\n\n## Tmux Resurect\n### 安装\nTmux Plugin Manager\n修改 .tmux.conf\n```bash\nset -g @plugin 'tmux-plugins/tmux-resurrect'\n```\n随后使用 `prefix + I` 进行安装\n\n### 使用\n```bash\nprefix <c-s>    # 保存，Tmux 状态栏会显示“Saving。。。” 字样，完毕后即为保存\nprefix <c-r>    # 还原 Tmux 状态\n```\n这样只要养成手动保存的习惯，就可以实时保存 Tmux 的状态，\n但是我们仍然希望可以自动保存，这时候我们需要用到 Tmux Continuum\n\n## Tmux Continuum\n### 安装\nTmux Plugin Manager\n修改 .tmux.conf\n```bash\nset -g @plugin 'tmux-plugins/tmux-continuum'\n```\n随后使用 `prefix + I` 进行安装\n\nTmux Continuum 默认十五分钟备份一次，可以自己修改\n```bash\nset -g @continuum-save-interval '60' # 修改为一小时\n```\n然后使用 `tmux source-file ~/.tmux.conf` 命令重载 Tmux 配置\n\n两个插件都需要 Tmux >= 1.9 才行\n","source":"_posts/2017-10-04-tmux-plugin-resurect-continuum.md","raw":"---\ntitle: Tmux 插件 resurect & continuum 会话定时保存\ndate: 2017-10-04 09:44:13\ntags: [tmux]\n---\n\nTmux 好用，但是在电脑重启后，之前开启过的回话都不会保存，\n而 [tmux-resurect](https://github.com/tmux-plugins/tmux-resurrect) 和 [tmux-continuum](https://github.com/tmux-plugins/tmux-continuum) 可以很好的自动保存 Tmux 使用状态\n<!-- more -->\n\n<!-- toc -->\n\n## Tmux Resurect\n### 安装\nTmux Plugin Manager\n修改 .tmux.conf\n```bash\nset -g @plugin 'tmux-plugins/tmux-resurrect'\n```\n随后使用 `prefix + I` 进行安装\n\n### 使用\n```bash\nprefix <c-s>    # 保存，Tmux 状态栏会显示“Saving。。。” 字样，完毕后即为保存\nprefix <c-r>    # 还原 Tmux 状态\n```\n这样只要养成手动保存的习惯，就可以实时保存 Tmux 的状态，\n但是我们仍然希望可以自动保存，这时候我们需要用到 Tmux Continuum\n\n## Tmux Continuum\n### 安装\nTmux Plugin Manager\n修改 .tmux.conf\n```bash\nset -g @plugin 'tmux-plugins/tmux-continuum'\n```\n随后使用 `prefix + I` 进行安装\n\nTmux Continuum 默认十五分钟备份一次，可以自己修改\n```bash\nset -g @continuum-save-interval '60' # 修改为一小时\n```\n然后使用 `tmux source-file ~/.tmux.conf` 命令重载 Tmux 配置\n\n两个插件都需要 Tmux >= 1.9 才行\n","slug":"tmux-plugin-resurect-continuum","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4h002q5gqo0i3t3kbh"},{"title":"生命不息，学习不止","date":"2017-10-13T14:22:06.000Z","_content":"> 今天你学习了吗\n<!-- more -->\n\n- [Vim](/vim)\n- [Tmux](/tmux)\n- ***Byobu*** Tmux 的再封装\n- [alphabetPy](https://github.com/RayZhao1998/alphabetPy) 命令行字体\n- [GOOGLE搜索从入门到精通v3.0](http://www.being.org.cn/tool/google.htm)\n","source":"_posts/2017-10-13-need-learn.md","raw":"---\ntitle: 生命不息，学习不止\ndate: 2017-10-13 14:22:06\ntags:\n---\n> 今天你学习了吗\n<!-- more -->\n\n- [Vim](/vim)\n- [Tmux](/tmux)\n- ***Byobu*** Tmux 的再封装\n- [alphabetPy](https://github.com/RayZhao1998/alphabetPy) 命令行字体\n- [GOOGLE搜索从入门到精通v3.0](http://www.being.org.cn/tool/google.htm)\n","slug":"need-learn","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4i002s5gqoepqtfoud"},{"title":"Vim 高级功能 vimgrep 全局搜索文件","date":"2017-10-13T10:49:51.000Z","_content":"\n[专辑：Vim 练级手册](/vim)\n\n在 Linux 中搜索文件最长用到的搜索工具是 Grep ，在使用 Vim 开发时第一时间想到是不是也可以在 Grep ，\nGoogle 后发现果然 Vim 内置有 Grep，下面我们一起看下 Grep 怎么使用\n<!-- more -->\n\n<!-- toc -->\n## 预览\n![/images/vimgrep.gif](/images/vimgrep.gif)\n## vimgrep\n在 Vim 命令行模式下输入 `:h vimgrep` 可以看到 vimgrep 的使用文档\n### 命令\n```bash\n:vim[grep][!] /{pattern}/[g][j] {file} ...\n:vim[grep][!] {pattern} {file} ...\n```\n### 含义\n- vim 可作为 vimgrep 的缩写\n- ! 可紧随 vimgrep 之后，表示强制执行该命令\n- 索引的关键字 pattern 放在了两个 “/” 中间，并且支持正则表达式\n- g, j 可选。 如果添加 g，将显示重复行， 如果添加 j，vim 将不会自动跳转到第一个匹配的行（可能是别的文件）\n- file 可以是正则文件名，也可以是多个确定的文件名\n\n### 使用\n```bash\n:vimgrep /user/g **\n```\n使用该命令可以查找当前目录下所有文件中包含 ***user*** 字符串的文件，并跳转到第一个匹配的文件，\n同时所有搜索结果会显示在 ***Quickfix*** 中，使用 `:cw, :copen` 可以打开该列表\n\n更多命令\n```bash\n:cnext, :cn         # 当前页下一个结果\n:cprevious, :cp     # 当前页上一个结果\n:clist, :cl         # 使用 more 打开 Quickfix 窗口\n:copen, :cope, :cw  # 打开 Quickfix 窗口，列出所有结果\n:ccl[ose]           # 关闭 Quickfix 窗口。\n```\n\n## lvimgrep\nlvimgrep 与 vimgrep 搜索命令基本一样，不同点在于搜索结果不是显示在 Quickfix 中\n而是显示在 location-list 中\n\n### quickfix-list vs location-list\nquickfix list 是全局的，相对于窗口而言，不同的窗口共用一个quickfix list，\n可以使用 :cw 或者 :copen 打开；而 loaction list 是局部于某个特定窗口的，\n即不同窗口的 location list 可以不同，使用 :lw 或者 :lopen 命令打开。\n（请使用：help quickfix 和:help location-list命令获取帮助）\n","source":"_posts/2017-10-13-vim-grep.md","raw":"---\ntitle: Vim 高级功能 vimgrep 全局搜索文件\ndate: 2017-10-13 10:49:51\ntags: [vim]\n---\n\n[专辑：Vim 练级手册](/vim)\n\n在 Linux 中搜索文件最长用到的搜索工具是 Grep ，在使用 Vim 开发时第一时间想到是不是也可以在 Grep ，\nGoogle 后发现果然 Vim 内置有 Grep，下面我们一起看下 Grep 怎么使用\n<!-- more -->\n\n<!-- toc -->\n## 预览\n![/images/vimgrep.gif](/images/vimgrep.gif)\n## vimgrep\n在 Vim 命令行模式下输入 `:h vimgrep` 可以看到 vimgrep 的使用文档\n### 命令\n```bash\n:vim[grep][!] /{pattern}/[g][j] {file} ...\n:vim[grep][!] {pattern} {file} ...\n```\n### 含义\n- vim 可作为 vimgrep 的缩写\n- ! 可紧随 vimgrep 之后，表示强制执行该命令\n- 索引的关键字 pattern 放在了两个 “/” 中间，并且支持正则表达式\n- g, j 可选。 如果添加 g，将显示重复行， 如果添加 j，vim 将不会自动跳转到第一个匹配的行（可能是别的文件）\n- file 可以是正则文件名，也可以是多个确定的文件名\n\n### 使用\n```bash\n:vimgrep /user/g **\n```\n使用该命令可以查找当前目录下所有文件中包含 ***user*** 字符串的文件，并跳转到第一个匹配的文件，\n同时所有搜索结果会显示在 ***Quickfix*** 中，使用 `:cw, :copen` 可以打开该列表\n\n更多命令\n```bash\n:cnext, :cn         # 当前页下一个结果\n:cprevious, :cp     # 当前页上一个结果\n:clist, :cl         # 使用 more 打开 Quickfix 窗口\n:copen, :cope, :cw  # 打开 Quickfix 窗口，列出所有结果\n:ccl[ose]           # 关闭 Quickfix 窗口。\n```\n\n## lvimgrep\nlvimgrep 与 vimgrep 搜索命令基本一样，不同点在于搜索结果不是显示在 Quickfix 中\n而是显示在 location-list 中\n\n### quickfix-list vs location-list\nquickfix list 是全局的，相对于窗口而言，不同的窗口共用一个quickfix list，\n可以使用 :cw 或者 :copen 打开；而 loaction list 是局部于某个特定窗口的，\n即不同窗口的 location list 可以不同，使用 :lw 或者 :lopen 命令打开。\n（请使用：help quickfix 和:help location-list命令获取帮助）\n","slug":"vim-grep","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4k002v5gqorv014v77"},{"title":"Vim 插件 vim-trailing-whitespace 去掉行尾空格","date":"2017-09-25T11:17:57.000Z","_content":"\n[专辑：Vim 练级手册](/vim)\n\n[vim-trailing-whitespace](https://github.com/bronson/vim-trailing-whitespace) 会将行尾空格标红，并可以一键去掉行尾的空格，python 开发和强迫症必备\n\n<!-- more -->\n\n<!-- toc -->\n## 预览\n![whitespace](/images/whitespace.gif)\n\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/bronson/vim-trailing-whitespace\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'bronson/vim-trailing-whitespace'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 配置\n```bash\nmap <leader><space> :FixWhitespace<cr>\n```\n\n## 使用\n```bash\n<leader><space>     # 即可去掉全部行为空格\n```\n","source":"_posts/2017-09-25-vim-plugin-whitespace.md","raw":"---\ntitle: Vim 插件 vim-trailing-whitespace 去掉行尾空格\ndate: 2017-09-25 11:17:57\ntags: [vim]\n---\n\n[专辑：Vim 练级手册](/vim)\n\n[vim-trailing-whitespace](https://github.com/bronson/vim-trailing-whitespace) 会将行尾空格标红，并可以一键去掉行尾的空格，python 开发和强迫症必备\n\n<!-- more -->\n\n<!-- toc -->\n## 预览\n![whitespace](/images/whitespace.gif)\n\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/bronson/vim-trailing-whitespace\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'bronson/vim-trailing-whitespace'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 配置\n```bash\nmap <leader><space> :FixWhitespace<cr>\n```\n\n## 使用\n```bash\n<leader><space>     # 即可去掉全部行为空格\n```\n","slug":"vim-plugin-whitespace","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4l002x5gqoicuu27bk"},{"title":"Vim 插件 CtrlSF 全局搜索文件","date":"2017-10-13T14:19:35.000Z","_content":"\n[专辑：Vim 练级手册](/vim)\n\n在 Vim 中搜索文件，使用 Ack 或 EasyGrep 已经足足的够了，\n但是如果我们想把搜索做的更像 IDE ，比如把搜索命中行的上下几行也都显示出来那就更完美了，\n这时候我们需要用到 [CtrlSF](https://github.com/dyng/ctrlsf.vim)\n![/images/ctrlsf.gif](/images/ctrlsf.gif)\n<!-- more -->\n\n<!-- toc -->\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/dyng/ctrlsf.vim.git\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'dyng/ctrlsf.vim'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 配置\n```bash\nnmap <Leader><Leader>c :CtrlSF<space>\n```\n\n## 使用\n使用快捷键 `<Leader><Leader>c` 唤出搜索命令后，输入关键词和文件名，\n如：`:CtrlSF test *.py` 回车即可跳转到第一个匹配行，并列出搜索结果，并点击 `o` 跳转命中文件\n\n## 参考文献\n- [更多使用](https://github.com/dyng/ctrlsf.vim#key-maps)\n","source":"_posts/2017-10-13-vim-plugin-ctrlsf.md","raw":"---\ntitle: Vim 插件 CtrlSF 全局搜索文件\ndate: 2017-10-13 14:19:35\ntags: [vim]\n---\n\n[专辑：Vim 练级手册](/vim)\n\n在 Vim 中搜索文件，使用 Ack 或 EasyGrep 已经足足的够了，\n但是如果我们想把搜索做的更像 IDE ，比如把搜索命中行的上下几行也都显示出来那就更完美了，\n这时候我们需要用到 [CtrlSF](https://github.com/dyng/ctrlsf.vim)\n![/images/ctrlsf.gif](/images/ctrlsf.gif)\n<!-- more -->\n\n<!-- toc -->\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/dyng/ctrlsf.vim.git\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'dyng/ctrlsf.vim'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 配置\n```bash\nnmap <Leader><Leader>c :CtrlSF<space>\n```\n\n## 使用\n使用快捷键 `<Leader><Leader>c` 唤出搜索命令后，输入关键词和文件名，\n如：`:CtrlSF test *.py` 回车即可跳转到第一个匹配行，并列出搜索结果，并点击 `o` 跳转命中文件\n\n## 参考文献\n- [更多使用](https://github.com/dyng/ctrlsf.vim#key-maps)\n","slug":"vim-plugin-ctrlsf","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4m00305gqoejnnrj8e"},{"title":"Vim 插件 EasyGrep 全局搜索文件","date":"2017-10-13T14:19:15.000Z","_content":"\n[专辑：Vim 练级手册](/vim)\n\n关于在 Vim 中使用 Grep 做全局搜索，我在文章[Vim 高级功能 vimgrep 全局搜索文件](/2017/10/13/vim-grep)中有介绍，\n但是命令行和手动打开搜索结果都让人感觉很不方便，[EasyGrep](https://github.com/dkprice/vim-easygrep) 应运而生，\n它基于 vimgrep 进行封装，让搜索变得更简单，EasyGrep 有快捷键和命令行两种使用方式\n\n<!-- more -->\n\n<!-- toc -->\n## 预览\n![/images/easygrep.gif](/images/easygrep.gif)\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/dkprice/vim-easygrep.git\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'dkprice/vim-easygrep'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 使用\n### 快捷键\n```bash\n<Leader>vv  # 搜索光标所在单词，并匹配出所有结果，类似 gstar\n<Leader>vV  # 搜索光标所在单词，全词匹配，类似 star\n<Leader>va  # 类似 vv，但是会把结果添加到之前的搜索列表\n<Leader>vA  # 类似 vV，但是会把结果添加到之前的搜索列表\n<Leader>vr  # 全局搜索光标所在单词，并替换想要的单词\n```\n### 命令行\n```bash\n:Grep [arg]             # 类似 <Leader>vv，使用 ! 类似<Leader>vV\n:GrepAdd [arg]          # 类似 <Leader>va，使用 ! 类似<Leader>vA\n:Replace [target] [replacement] # 类似 <Leader>vr\n:ReplaceUndo            # 撤销替换操作\n```\n\n更多使用[文档](https://github.com/dkprice/vim-easygrep#using-easygrep)\n更多配置[文档](https://github.com/dkprice/vim-easygrep#using-easygrep-with-perl-style-regexp)\n","source":"_posts/2017-10-13-vim-plugin-easygrep.md","raw":"---\ntitle: Vim 插件 EasyGrep 全局搜索文件\ndate: 2017-10-13 14:19:15\ntags: [vim]\n---\n\n[专辑：Vim 练级手册](/vim)\n\n关于在 Vim 中使用 Grep 做全局搜索，我在文章[Vim 高级功能 vimgrep 全局搜索文件](/2017/10/13/vim-grep)中有介绍，\n但是命令行和手动打开搜索结果都让人感觉很不方便，[EasyGrep](https://github.com/dkprice/vim-easygrep) 应运而生，\n它基于 vimgrep 进行封装，让搜索变得更简单，EasyGrep 有快捷键和命令行两种使用方式\n\n<!-- more -->\n\n<!-- toc -->\n## 预览\n![/images/easygrep.gif](/images/easygrep.gif)\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/dkprice/vim-easygrep.git\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'dkprice/vim-easygrep'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 使用\n### 快捷键\n```bash\n<Leader>vv  # 搜索光标所在单词，并匹配出所有结果，类似 gstar\n<Leader>vV  # 搜索光标所在单词，全词匹配，类似 star\n<Leader>va  # 类似 vv，但是会把结果添加到之前的搜索列表\n<Leader>vA  # 类似 vV，但是会把结果添加到之前的搜索列表\n<Leader>vr  # 全局搜索光标所在单词，并替换想要的单词\n```\n### 命令行\n```bash\n:Grep [arg]             # 类似 <Leader>vv，使用 ! 类似<Leader>vV\n:GrepAdd [arg]          # 类似 <Leader>va，使用 ! 类似<Leader>vA\n:Replace [target] [replacement] # 类似 <Leader>vr\n:ReplaceUndo            # 撤销替换操作\n```\n\n更多使用[文档](https://github.com/dkprice/vim-easygrep#using-easygrep)\n更多配置[文档](https://github.com/dkprice/vim-easygrep#using-easygrep-with-perl-style-regexp)\n","slug":"vim-plugin-easygrep","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4n00325gqoy34b9peg"},{"title":"Vim 插件 Ack 全局搜索文件","date":"2017-10-13T14:19:26.000Z","_content":"\n[专辑：Vim 练级手册](/vim)\n\n简单项目使用 vimgrep 或 EasyGrep 已经足够完成搜索任务，但是在一些大型项目中 grep 的搜索速度就跟不上了，这时候可以使用 [Ack](https://github.com/mileszs/ack.vim) 替代它完成搜索任务\n<!-- more -->\n\n<!-- toc -->\n## 预览\n![ack](/images/ack.gif)\n## 安装\n首先需要在机器上安装 Ack 工具\nMac\n```bash\n$ brew install ack\n```\n完成后安装 Vim 插件\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/mileszs/ack.vim.git\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'mileszs/ack.vim'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n## 使用\n命令\n```bash\n:Ack [options] {pattern} [{directories}]\n```\n还可以像 `:grep`, `:grepadd`, `:lgrep`, `:lgrepadd` 一样使用 `:Ack`, `:AckAdd`, `:LAck`, `:LAckAdd`\n\n## 配置\n可以在有 `ag` 时使用 ag 进行搜索\n```bash\nif executable('ag')\n    let g:ackprg = 'ag --nogroup --nocolor --column'\nendif\n```\n快捷键\n```bash\nnmap <Leader><Leader>a :Ack<space>-i<space>     # -i 忽略大小写\n```\n\n## 参考文献\n- [更多使用](https://github.com/mileszs/ack.vim#keyboard-shortcuts)\n- [何不 Ack？Grep, Ack, Ag的搜索效率对比](https://linux.cn/article-5077-1.html)\n","source":"_posts/2017-10-13-vim-plugin-ack.md","raw":"---\ntitle: Vim 插件 Ack 全局搜索文件\ndate: 2017-10-13 14:19:26\ntags: [vim]\n---\n\n[专辑：Vim 练级手册](/vim)\n\n简单项目使用 vimgrep 或 EasyGrep 已经足够完成搜索任务，但是在一些大型项目中 grep 的搜索速度就跟不上了，这时候可以使用 [Ack](https://github.com/mileszs/ack.vim) 替代它完成搜索任务\n<!-- more -->\n\n<!-- toc -->\n## 预览\n![ack](/images/ack.gif)\n## 安装\n首先需要在机器上安装 Ack 工具\nMac\n```bash\n$ brew install ack\n```\n完成后安装 Vim 插件\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/mileszs/ack.vim.git\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'mileszs/ack.vim'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n## 使用\n命令\n```bash\n:Ack [options] {pattern} [{directories}]\n```\n还可以像 `:grep`, `:grepadd`, `:lgrep`, `:lgrepadd` 一样使用 `:Ack`, `:AckAdd`, `:LAck`, `:LAckAdd`\n\n## 配置\n可以在有 `ag` 时使用 ag 进行搜索\n```bash\nif executable('ag')\n    let g:ackprg = 'ag --nogroup --nocolor --column'\nendif\n```\n快捷键\n```bash\nnmap <Leader><Leader>a :Ack<space>-i<space>     # -i 忽略大小写\n```\n\n## 参考文献\n- [更多使用](https://github.com/mileszs/ack.vim#keyboard-shortcuts)\n- [何不 Ack？Grep, Ack, Ag的搜索效率对比](https://linux.cn/article-5077-1.html)\n","slug":"vim-plugin-ack","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4o00355gqorpjd4j02"},{"title":"k8s-minikube","date":"2017-10-31T11:32:57.000Z","_content":"\n## 安装\n### macOS\n```bash\nbrew cask install minikube\n```\n### Linux\n```bash\ncurl -Lo minikube https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64 \\\n    && chmod +x minikube \\\n    && sudo mv minikube /usr/local/bin/\n```\n\n## xhyve 驱动\n```bash\nbrew install docker-machine-driver-xhyve\nsudo chown root:wheel $(brew --prefix)/opt/docker-machine-driver-xhyve/bin/docker-machine-driver-xhyve\nsudo chmod u+s $(brew --prefix)/opt/docker-machine-driver-xhyve/bin/docker-machine-driver-xhyve\n```\n\n## kubectl\n```bash\nbrew install kubectl\n```\n\n\n\n","source":"_posts/2017-10-31-k8s-minikube.md","raw":"---\ntitle: k8s-minikube\ndate: 2017-10-31 11:32:57\ntags:\n---\n\n## 安装\n### macOS\n```bash\nbrew cask install minikube\n```\n### Linux\n```bash\ncurl -Lo minikube https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64 \\\n    && chmod +x minikube \\\n    && sudo mv minikube /usr/local/bin/\n```\n\n## xhyve 驱动\n```bash\nbrew install docker-machine-driver-xhyve\nsudo chown root:wheel $(brew --prefix)/opt/docker-machine-driver-xhyve/bin/docker-machine-driver-xhyve\nsudo chmod u+s $(brew --prefix)/opt/docker-machine-driver-xhyve/bin/docker-machine-driver-xhyve\n```\n\n## kubectl\n```bash\nbrew install kubectl\n```\n\n\n\n","slug":"k8s-minikube","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4p00375gqomalh9sd5"},{"title":"Mac 环境下安装 pyenv 和 virtualenv","date":"2017-11-21T22:18:28.000Z","_content":"\n[pyenv](https://github.com/pyenv/pyenv) 是管理 Python 版本的重要工具，在开发环境中是必备的软件。\n\n<!-- more --><!-- toc -->\n\n\n## 使用 brew\n\n在 Mac 上使用 brew 可以很方便的安装 pyenv\n\n### 安装\n```bash\n$ brew install pyenv\n```\n接下来需要修改环境变量\n`vim ~/.bash_profile`\n```bash\nexport PYENV_ROOT=\"${HOME}/.pyenv\"\nif [ -d \"${PYENV_ROOT}\" ]; then\n  export PATH=\"${PYENV_ROOT}/bin:${PATH}\"\n  eval \"$(pyenv init -)\"\nfi\n\nCFLAGS=\"-I$(brew --prefix openssl)/include\" \\\nLDFLAGS=\"-L$(brew --prefix openssl)/lib\" \\\n```\n使配置生效 `source ~/.bash_profile`\n然后还需要一些依赖\n```bash\n$ xcode-select --install\n$ brew install readline xz zlib\n```\n这样就可以正常使用 pyenv 了\n\n### 升级\n```bash\n$ brew upgrade pyenv\n```\n\n### 卸载\n```bash\n$ brew uninstall pyenv\n```\n然后删除之前填在 `~/.bash_profile` 文件里添加的内容\n\n## 直接安装\n但是如果你电脑上没有安装 `brew`，那再去安装它就麻烦多了，如果着急用，我们可以直接安装。\n\n**下载源代码**\n\n```bash\n$ git clone https://github.com/pyenv/pyenv.git ~/.pyenv\n```\n\n**配置环境变量**\n\n```bash\n$ echo 'export PYENV_ROOT=\"$HOME/.pyenv\"' >> ~/.bash_profile\n$ echo 'export PATH=\"$PYENV_ROOT/bin:$PATH\"' >> ~/.bash_profile\n$ echo -e 'if command -v pyenv 1>/dev/null 2>&1; then\\n  eval \"$(pyenv init -)\"\\nfi' >> ~/.bash_profile\n$ source ~/.bash_profile\n```\n\n看，就是这么简单，此时运行 `pyenv`，机器已经可以识别。\n\n### 升级\n\n```bash\n$ cd ~/.pyenv\n$ git pull\n```\n\n### 卸载\n\n```bash\n$ rm -rf ~/.pyenv\n```\n\n随后删除 `~/.bash_profile` 中添加的内容即可\n\n\n","source":"_posts/2017-11-21-pyenv-mac.md","raw":"---\ntitle: Mac 环境下安装 pyenv 和 virtualenv\ndate: 2017-11-21 22:18:28\ntags: [mac, python]\n---\n\n[pyenv](https://github.com/pyenv/pyenv) 是管理 Python 版本的重要工具，在开发环境中是必备的软件。\n\n<!-- more --><!-- toc -->\n\n\n## 使用 brew\n\n在 Mac 上使用 brew 可以很方便的安装 pyenv\n\n### 安装\n```bash\n$ brew install pyenv\n```\n接下来需要修改环境变量\n`vim ~/.bash_profile`\n```bash\nexport PYENV_ROOT=\"${HOME}/.pyenv\"\nif [ -d \"${PYENV_ROOT}\" ]; then\n  export PATH=\"${PYENV_ROOT}/bin:${PATH}\"\n  eval \"$(pyenv init -)\"\nfi\n\nCFLAGS=\"-I$(brew --prefix openssl)/include\" \\\nLDFLAGS=\"-L$(brew --prefix openssl)/lib\" \\\n```\n使配置生效 `source ~/.bash_profile`\n然后还需要一些依赖\n```bash\n$ xcode-select --install\n$ brew install readline xz zlib\n```\n这样就可以正常使用 pyenv 了\n\n### 升级\n```bash\n$ brew upgrade pyenv\n```\n\n### 卸载\n```bash\n$ brew uninstall pyenv\n```\n然后删除之前填在 `~/.bash_profile` 文件里添加的内容\n\n## 直接安装\n但是如果你电脑上没有安装 `brew`，那再去安装它就麻烦多了，如果着急用，我们可以直接安装。\n\n**下载源代码**\n\n```bash\n$ git clone https://github.com/pyenv/pyenv.git ~/.pyenv\n```\n\n**配置环境变量**\n\n```bash\n$ echo 'export PYENV_ROOT=\"$HOME/.pyenv\"' >> ~/.bash_profile\n$ echo 'export PATH=\"$PYENV_ROOT/bin:$PATH\"' >> ~/.bash_profile\n$ echo -e 'if command -v pyenv 1>/dev/null 2>&1; then\\n  eval \"$(pyenv init -)\"\\nfi' >> ~/.bash_profile\n$ source ~/.bash_profile\n```\n\n看，就是这么简单，此时运行 `pyenv`，机器已经可以识别。\n\n### 升级\n\n```bash\n$ cd ~/.pyenv\n$ git pull\n```\n\n### 卸载\n\n```bash\n$ rm -rf ~/.pyenv\n```\n\n随后删除 `~/.bash_profile` 中添加的内容即可\n\n\n","slug":"pyenv-mac","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4q003a5gqopnwrpone"},{"title":"Linux 报错 no acceptable C compiler found in $PATH","date":"2017-11-22T10:35:21.000Z","_content":"\n最近在使用 Linux 系统上安装 pyenv 时，报了 no acceptable C compiler found in\n$PATH 的错误，字面意思是环境变量中没有可用的 c 编译器，查过资料后使用各自平台的\n安装器安装即可\n\n<!-- more -->\n\n### Centos\n```bash\n$ yum -y install gcc\n```\n\n### Ubuntu\n```bash\n$ apt-get -y install gcc\n```\n\n","source":"_posts/2017-11-22-no-c-compiler.md","raw":"---\ntitle: Linux 报错 no acceptable C compiler found in $PATH\ndate: 2017-11-22 10:35:21\ntags: [linux]\n---\n\n最近在使用 Linux 系统上安装 pyenv 时，报了 no acceptable C compiler found in\n$PATH 的错误，字面意思是环境变量中没有可用的 c 编译器，查过资料后使用各自平台的\n安装器安装即可\n\n<!-- more -->\n\n### Centos\n```bash\n$ yum -y install gcc\n```\n\n### Ubuntu\n```bash\n$ apt-get -y install gcc\n```\n\n","slug":"no-c-compiler","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4r003c5gqovirz9x75"},{"title":"兴趣不是很重要","date":"2017-11-22T09:09:38.000Z","_content":"\n兴趣并不是真的重要\n有了兴趣才能把一件事做好，只是你的一种错觉\n你这样认为只是因为你还没有开始做，你没有遇到挫折\n<!-- more -->\n用兴趣去做好一件事，只适用于意志力极为坚定的少数人\n他们会在遇到困难和挫折时，不屈不挠的执着前进\n不过这样的话，其实对于他们来说，不管有没有兴趣\n只要是认准的事情，他们都会全力以赴\n\n所以我们和成功人士差在哪，还是兴趣吗？很显然不是，是勇气和毅力\n在遇到困难时，不畏惧，勇敢迈过去。\n在时间消磨掉最初的激情时，有强大的精神，强大的意志力坚持下去\n\n一件事情做的久了，一定会有收获，有了收获我们才会产生兴趣\n\n所以并不是因为有了兴趣才能做好，是因为做好了才有了兴趣\n\n","source":"_posts/2017-11-22-interest-not-important.md","raw":"---\ntitle: 兴趣不是很重要\ndate: 2017-11-22 09:09:38\ntags: [杂谈]\n---\n\n兴趣并不是真的重要\n有了兴趣才能把一件事做好，只是你的一种错觉\n你这样认为只是因为你还没有开始做，你没有遇到挫折\n<!-- more -->\n用兴趣去做好一件事，只适用于意志力极为坚定的少数人\n他们会在遇到困难和挫折时，不屈不挠的执着前进\n不过这样的话，其实对于他们来说，不管有没有兴趣\n只要是认准的事情，他们都会全力以赴\n\n所以我们和成功人士差在哪，还是兴趣吗？很显然不是，是勇气和毅力\n在遇到困难时，不畏惧，勇敢迈过去。\n在时间消磨掉最初的激情时，有强大的精神，强大的意志力坚持下去\n\n一件事情做的久了，一定会有收获，有了收获我们才会产生兴趣\n\n所以并不是因为有了兴趣才能做好，是因为做好了才有了兴趣\n\n","slug":"interest-not-important","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4t003f5gqok0nypivj"},{"title":"Ubuntu 软件包管理工具 Apt","date":"2017-11-23T15:45:38.000Z","_content":"\n> [Apt](https://zh.wikipedia.org/wiki/%E9%AB%98%E7%BA%A7%E5%8C%85%E8%A3%85%E5%B7%A5%E5%85%B7) 是Debian及其派生发行版的软件包管理器，APT可以自动下载，配置，安装二进制或者源代码格式的软件包，因此简化了 Unix 系统上管理软件的过程，现在可以安装 RPM 软件包，同类型的还有 CentOS 中常用的 Yum\n\n<!-- more -->\n\n<!-- toc -->\n\n## 安装删除\n```bash\n$ apt [-y] install git  # 下载软件包，-y 对一切问题都回答 yes\n$ apt remove git        # 删除软件包（保留配置文件）\n$ apt purge git         # 删除软件包（删除配置文件）\n```\n\n## 搜索\n```bash\n$ apt search git\n```\n搜索与目标最匹配的软件包\n\n## 更新本地源\n有时候在安装软件的时候会报错 [Unable to locate package](/2017/11/23/unable-to-locate-package/)\n这时候需要更新本地软件列表的命令\n\n```bash\n$ apt update\n```\n在修改 `/etc/apt/sources.list` 后也需要执行\n\n## 修改源\n修改软件网络源通过修改 `/etc/apt/sources.list` 文件完成，格式为\n```bash\ndeb [地址] [发行商名称] [main/contrib/non-free]\n```\n\n## 升级\n```bash\n$ apt upgrade\n```\n通过该命令系统会自动将所有已经安装在系统内的包升级为最新版本。如果一个包改变了\n依存关系，而需要安装一个新的包时，它将不会被升级，而是标识成 hold 样。如果某个\n包被设置 hold 标号，就不会被升级。\n```bash\n$ apt full-upgrade\n```\n和 `upgrade` 类似，但会安装和移除包来满足依存关系，因此具有一定的危险性。\n\n## 清除缓存\n软件在卸载后如果还保留着 .deb 文件，在 `/var/cache/apt/archives` 目录中，会很\n占用系统空间，我们可以使用这个命令删除\n\n```bash\n$ apt autoclean\n```\n这个命令会把当前使用中的软件的 .deb 文件也删除掉，通常这些文件也是不需要的\n```bash\n$ apt clean\n```\n\napt 是 2014 年才发布的第一个稳定版，早期都使用 `apt-get` 命令，简单来说两者的\n区别就是\n```bash\napt = apt-get + apt-cache + apt-config\n```\n更多区别详见 [Linux中apt与apt-get命令的区别与解释](https://www.sysgeek.cn/apt-vs-apt-get/)\n\n","source":"_posts/2017-11-23-apt.md","raw":"---\ntitle: Ubuntu 软件包管理工具 Apt\ndate: 2017-11-23 15:45:38\ntags: [linux]\n---\n\n> [Apt](https://zh.wikipedia.org/wiki/%E9%AB%98%E7%BA%A7%E5%8C%85%E8%A3%85%E5%B7%A5%E5%85%B7) 是Debian及其派生发行版的软件包管理器，APT可以自动下载，配置，安装二进制或者源代码格式的软件包，因此简化了 Unix 系统上管理软件的过程，现在可以安装 RPM 软件包，同类型的还有 CentOS 中常用的 Yum\n\n<!-- more -->\n\n<!-- toc -->\n\n## 安装删除\n```bash\n$ apt [-y] install git  # 下载软件包，-y 对一切问题都回答 yes\n$ apt remove git        # 删除软件包（保留配置文件）\n$ apt purge git         # 删除软件包（删除配置文件）\n```\n\n## 搜索\n```bash\n$ apt search git\n```\n搜索与目标最匹配的软件包\n\n## 更新本地源\n有时候在安装软件的时候会报错 [Unable to locate package](/2017/11/23/unable-to-locate-package/)\n这时候需要更新本地软件列表的命令\n\n```bash\n$ apt update\n```\n在修改 `/etc/apt/sources.list` 后也需要执行\n\n## 修改源\n修改软件网络源通过修改 `/etc/apt/sources.list` 文件完成，格式为\n```bash\ndeb [地址] [发行商名称] [main/contrib/non-free]\n```\n\n## 升级\n```bash\n$ apt upgrade\n```\n通过该命令系统会自动将所有已经安装在系统内的包升级为最新版本。如果一个包改变了\n依存关系，而需要安装一个新的包时，它将不会被升级，而是标识成 hold 样。如果某个\n包被设置 hold 标号，就不会被升级。\n```bash\n$ apt full-upgrade\n```\n和 `upgrade` 类似，但会安装和移除包来满足依存关系，因此具有一定的危险性。\n\n## 清除缓存\n软件在卸载后如果还保留着 .deb 文件，在 `/var/cache/apt/archives` 目录中，会很\n占用系统空间，我们可以使用这个命令删除\n\n```bash\n$ apt autoclean\n```\n这个命令会把当前使用中的软件的 .deb 文件也删除掉，通常这些文件也是不需要的\n```bash\n$ apt clean\n```\n\napt 是 2014 年才发布的第一个稳定版，早期都使用 `apt-get` 命令，简单来说两者的\n区别就是\n```bash\napt = apt-get + apt-cache + apt-config\n```\n更多区别详见 [Linux中apt与apt-get命令的区别与解释](https://www.sysgeek.cn/apt-vs-apt-get/)\n\n","slug":"apt","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4t003h5gqopq0ekvcg"},{"title":"如何判断 Unix 系统 OS 版本","date":"2017-11-24T10:24:37.000Z","_content":"\n在编写自动化脚本时，经常会需要对系统版本进行区分，以便做自适应，这样就需要精确的获取当前操作系统的系统名，甚至发行版本，接下来我们来一步步探讨如果区分 Mac， Linux 及 Linux 中各个系统版本，本教程对 Windows 系统是废的，或者说 Windows 是废的\n\n<!-- more -->\n\n<!-- toc -->\n\n## Uname\n首先先来区分 Mac 和 Linux 系统，我们来使用 [Uname](https://en.wikipedia.org/wiki/Uname) 命令它可以判断系统名称，版本，内核等信息\n\n### Linux\n在 Linux 中使用规则为\n```bash\n$ uname [-amnprsvio]    # 默认使用 -s\n```\n具体参数定义\n```bash\n-a, --all               # 输出所有信息。其中若 -p 和 -i 的探测没有结果则被省略\n-s, --kernel-name       # 输出内核名称(Linux)\n-n, --nodename          # 输出网络节点上的主机名\n-r, --kernel-release    # 输出内核版本\n-v, --kernel-version    # 输出内核发行时间\n-m, --machine           # 输出主机的硬件架构名称(和64位,32位有关)\n-p, --processor         # 输出处理器类型或“unknown”\n-i, --hardware-platform # 输出硬件平台或“unknown”\n-o, --operating-system  # 输出操作系统名称(GNU/Linux)\n    --help              # 显示此帮助信息并离开\n    --version           # 显示版本信息并离开\n```\n\n### Mac\n在 Mac 中使用规则基本和 Linux 一样，唯一区别在于没有 `-i, -o` 两个参数\n```bash\n$ uname [-amnprsv]    # 默认使用 -s\n```\n\n知道这些我们区分这两个系统已经足够，及使用 `uname -s` 命令即可\n\n## /etc/os-release\n\n在区分 Mac／Linux 之后我们要来谈谈怎样更好的区分 Linux 各个发行版本，毕竟现在发行版本还是很多的，每个版本的组件使用又不尽相同，我们拿最常用到的 CentOS 和 Ubuntu 最新的版本来举例说明\n\n在 Linux 系统中有一个 os-release 文件，位置在 `/etc/os-release` 从名字我们就明白它是记录 OS 的发行版本的，它在两个系统中的内容分别如下\n\n### CentOS\n```bash\nNAME=\"CentOS Linux\"\nVERSION=\"7 (Core)\"\nID=\"centos\"\nID_LIKE=\"rhel fedora\"\nVERSION_ID=\"7\"\nPRETTY_NAME=\"CentOS Linux 7 (Core)\"\nANSI_COLOR=\"0;31\"\nCPE_NAME=\"cpe:/o:centos:centos:7\"\nHOME_URL=\"https://www.centos.org/\"\nBUG_REPORT_URL=\"https://bugs.centos.org/\"\n\nCENTOS_MANTISBT_PROJECT=\"CentOS-7\"\nCENTOS_MANTISBT_PROJECT_VERSION=\"7\"\nREDHAT_SUPPORT_PRODUCT=\"centos\"\nREDHAT_SUPPORT_PRODUCT_VERSION=\"7\"\n```\n\n### Ubuntu\n```bash\nNAME=\"Ubuntu\"\nVERSION=\"16.04.2 LTS (Xenial Xerus)\"\nID=ubuntu\nID_LIKE=debian\nPRETTY_NAME=\"Ubuntu 16.04.2 LTS\"\nVERSION_ID=\"16.04\"\nHOME_URL=\"http://www.ubuntu.com/\"\nSUPPORT_URL=\"http://help.ubuntu.com/\"\nBUG_REPORT_URL=\"http://bugs.launchpad.net/ubuntu/\"\nVERSION_CODENAME=xenial\nUBUNTU_CODENAME=xenial\n```\n\n这些信息中，我们暂时只用 ID 属性，在 Linux 中我们可以使用 `source` 命令来将文件中的 `k-v` 数据倒入到上下文中\n```bash\n$ source /etc/os-release\n$ echo $ID      # --> ubuntu\n```\n\n## 编写脚本\n\n知道了上边这些我们来写一个简单脚本，以达到判断系统并使用相应的安装工具安装 Git\n\n```bash\nOS=`uname -s`\nif [ ${OS} == \"Darwin\"  ];then\n    sudo brew install git\nelif [ ${OS} == \"Linux\"  ];then\n    source /etc/os-release\n    case $ID in\n        debian|ubuntu|devuan)\n            sudo apt-get install git\n            ;;\n        centos|fedora|rhel)\n            yumdnf=\"yum\"\n            if test \"$(echo \"$VERSION_ID >= 22\" | bc)\" -ne 0;\n            then\n                yumdnf=\"dnf\"\n            fi\n            sudo $yumdnf install -y git\n            ;;\n        *)\n            exit 1\n            ;;\n    esac\nelse\n    echo \"Other OS: ${OS}\"\nfi\n```\n\n## /etc/issue\n\n`/etc/issue` 也放了发行版本信息，但是少得可怜。\n\n```bash\n$ cat /etc/issue\nUbuntu 14.04.5 LTS \\n \\l\n```\n\n## 其他版本\n这个脚本基本可以满足简单的判断系统和版本的需求，但是在写这篇文章的时候，我发现 CentOS 6 及以前的版本是没有 `/etc/os-release` 文件的，只有 `/etc/centos-release` 也没有 `k-v` 信息，只有简单的 `CentOS release 6.8 (Final)` 信息，如何更好的区分这个版本，是我们下一步需要探讨的。\n","source":"_posts/2017-11-24-get-os-name.md","raw":"---\ntitle: 如何判断 Unix 系统 OS 版本\ndate: 2017-11-24 10:24:37\ntags: [linux, mac]\n---\n\n在编写自动化脚本时，经常会需要对系统版本进行区分，以便做自适应，这样就需要精确的获取当前操作系统的系统名，甚至发行版本，接下来我们来一步步探讨如果区分 Mac， Linux 及 Linux 中各个系统版本，本教程对 Windows 系统是废的，或者说 Windows 是废的\n\n<!-- more -->\n\n<!-- toc -->\n\n## Uname\n首先先来区分 Mac 和 Linux 系统，我们来使用 [Uname](https://en.wikipedia.org/wiki/Uname) 命令它可以判断系统名称，版本，内核等信息\n\n### Linux\n在 Linux 中使用规则为\n```bash\n$ uname [-amnprsvio]    # 默认使用 -s\n```\n具体参数定义\n```bash\n-a, --all               # 输出所有信息。其中若 -p 和 -i 的探测没有结果则被省略\n-s, --kernel-name       # 输出内核名称(Linux)\n-n, --nodename          # 输出网络节点上的主机名\n-r, --kernel-release    # 输出内核版本\n-v, --kernel-version    # 输出内核发行时间\n-m, --machine           # 输出主机的硬件架构名称(和64位,32位有关)\n-p, --processor         # 输出处理器类型或“unknown”\n-i, --hardware-platform # 输出硬件平台或“unknown”\n-o, --operating-system  # 输出操作系统名称(GNU/Linux)\n    --help              # 显示此帮助信息并离开\n    --version           # 显示版本信息并离开\n```\n\n### Mac\n在 Mac 中使用规则基本和 Linux 一样，唯一区别在于没有 `-i, -o` 两个参数\n```bash\n$ uname [-amnprsv]    # 默认使用 -s\n```\n\n知道这些我们区分这两个系统已经足够，及使用 `uname -s` 命令即可\n\n## /etc/os-release\n\n在区分 Mac／Linux 之后我们要来谈谈怎样更好的区分 Linux 各个发行版本，毕竟现在发行版本还是很多的，每个版本的组件使用又不尽相同，我们拿最常用到的 CentOS 和 Ubuntu 最新的版本来举例说明\n\n在 Linux 系统中有一个 os-release 文件，位置在 `/etc/os-release` 从名字我们就明白它是记录 OS 的发行版本的，它在两个系统中的内容分别如下\n\n### CentOS\n```bash\nNAME=\"CentOS Linux\"\nVERSION=\"7 (Core)\"\nID=\"centos\"\nID_LIKE=\"rhel fedora\"\nVERSION_ID=\"7\"\nPRETTY_NAME=\"CentOS Linux 7 (Core)\"\nANSI_COLOR=\"0;31\"\nCPE_NAME=\"cpe:/o:centos:centos:7\"\nHOME_URL=\"https://www.centos.org/\"\nBUG_REPORT_URL=\"https://bugs.centos.org/\"\n\nCENTOS_MANTISBT_PROJECT=\"CentOS-7\"\nCENTOS_MANTISBT_PROJECT_VERSION=\"7\"\nREDHAT_SUPPORT_PRODUCT=\"centos\"\nREDHAT_SUPPORT_PRODUCT_VERSION=\"7\"\n```\n\n### Ubuntu\n```bash\nNAME=\"Ubuntu\"\nVERSION=\"16.04.2 LTS (Xenial Xerus)\"\nID=ubuntu\nID_LIKE=debian\nPRETTY_NAME=\"Ubuntu 16.04.2 LTS\"\nVERSION_ID=\"16.04\"\nHOME_URL=\"http://www.ubuntu.com/\"\nSUPPORT_URL=\"http://help.ubuntu.com/\"\nBUG_REPORT_URL=\"http://bugs.launchpad.net/ubuntu/\"\nVERSION_CODENAME=xenial\nUBUNTU_CODENAME=xenial\n```\n\n这些信息中，我们暂时只用 ID 属性，在 Linux 中我们可以使用 `source` 命令来将文件中的 `k-v` 数据倒入到上下文中\n```bash\n$ source /etc/os-release\n$ echo $ID      # --> ubuntu\n```\n\n## 编写脚本\n\n知道了上边这些我们来写一个简单脚本，以达到判断系统并使用相应的安装工具安装 Git\n\n```bash\nOS=`uname -s`\nif [ ${OS} == \"Darwin\"  ];then\n    sudo brew install git\nelif [ ${OS} == \"Linux\"  ];then\n    source /etc/os-release\n    case $ID in\n        debian|ubuntu|devuan)\n            sudo apt-get install git\n            ;;\n        centos|fedora|rhel)\n            yumdnf=\"yum\"\n            if test \"$(echo \"$VERSION_ID >= 22\" | bc)\" -ne 0;\n            then\n                yumdnf=\"dnf\"\n            fi\n            sudo $yumdnf install -y git\n            ;;\n        *)\n            exit 1\n            ;;\n    esac\nelse\n    echo \"Other OS: ${OS}\"\nfi\n```\n\n## /etc/issue\n\n`/etc/issue` 也放了发行版本信息，但是少得可怜。\n\n```bash\n$ cat /etc/issue\nUbuntu 14.04.5 LTS \\n \\l\n```\n\n## 其他版本\n这个脚本基本可以满足简单的判断系统和版本的需求，但是在写这篇文章的时候，我发现 CentOS 6 及以前的版本是没有 `/etc/os-release` 文件的，只有 `/etc/centos-release` 也没有 `k-v` 信息，只有简单的 `CentOS release 6.8 (Final)` 信息，如何更好的区分这个版本，是我们下一步需要探讨的。\n","slug":"get-os-name","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4v003k5gqoptexlveb"},{"title":"Ubuntu 报错 Unable to locate package","date":"2017-11-23T11:13:57.000Z","_content":"\n在给 Ubuntu 安装 Git 时，报了 `Unable to locate package git` 的错误，经 Google\n后发现 apt-get 本地的包列表长时间没有更新已经过时了，只需要更新后在安装即可\n<!-- more -->\n\n```bash\n$ apt-get update\n$ apt-get install git\n```\n","source":"_posts/2017-11-23-unable-to-locate-package.md","raw":"---\ntitle: Ubuntu 报错 Unable to locate package\ndate: 2017-11-23 11:13:57\ntags: [linux]\n---\n\n在给 Ubuntu 安装 Git 时，报了 `Unable to locate package git` 的错误，经 Google\n后发现 apt-get 本地的包列表长时间没有更新已经过时了，只需要更新后在安装即可\n<!-- more -->\n\n```bash\n$ apt-get update\n$ apt-get install git\n```\n","slug":"unable-to-locate-package","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4w003m5gqo658kd1jp"},{"title":"Python 列表 List","date":"2017-11-24T16:43:56.000Z","_content":"\n> 序列是 Python 中最基本的数据结构。序列中每个元素都有自己的索引（数字），从 0 开始。Python 有 6 个序列的内置类型，最常见的是列表和元组。\n\n<!-- more -->\n\n<!-- toc -->\n\n## 基础\n### 生成\n列表的生成很简单，使用赋值的方式即可，列表可以包含数字，字符串等基本类型或数组字典这样的结构，甚至是这些的混合数据\n```python\nl1 = [1, 2, 3, 4]\nl2 = ['a', 'b', 'c']\nl3 = [l1, l1]\nl4 = [{\"k\": \"v\"}, {\"k\": \"v\"}]\nl5 = [1, 'a', l1, l4]\n```\n\n### 取值\n取值包括单个值和一个连续的范围，我们可以使用索引来完成\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nl = [1, 2, 3, 4]\n\nprint(\"l[0] = \", l[0])          # ==> l[0] = 1\nprint(\"l[0:2] = \",  l[0:2])     # ==> l[0:2] = [1, 2]\nprint(\"l[1:-1] = \", l[1:-1])    # ==> l[1:-1] = [2, 3]\n```\n前两个我们都好理解，最后一个 -1 可能会有点费解，其实可以这样来想，1 是从左边数第二个元素，-1 就是从右边数第二个元素，了解了这点，我们就可以很方便的截取前后的数据\n\n### 更新\n想要修改列表某一个索引的数据，只需要直接对该索引位置赋值即可\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nl = [1, 2, 3]\nl[2] = 6\n\nprint(l)        # ==> [1, 2, 6]\n```\n\n列表通过 `append()` 方法添加单个列表项\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nl = [1, 2, 3]\nl.append(4)\n\nprint(l)        # ==> [1, 2, 3, 4]\n```\n### 删除\n有很多种方式删除列表元素\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nl = [1, 2, 3]\ndel l[2]\nprint(l)        # ==> [1, 2]\n\nl = [1, 2, 3]\nl.pop(2)        # ==> 3\nprint(l)        # ==> [1, 2]\n\nl = [1, 2, 3]\nl.remove(2)\nprint(l)        # ==> [1, 3]\n```\n`del` 和 `pop` 通过索引删除元素，`pop` 方法默认删除最后一个对象，会返回被删除的数据，`remove` 方法查找匹配到的第一个对象并删除\n\n## 二维数组\nPython 中二维数组的本质相当于嵌套数组，就像这样\n```python\nl = [[1, 2, 3], [4, 5]]\n```\n而想要改变二维数组的值，只需要嵌套索引赋值即可\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nl = [[1, 2, 3], [4, 5]]\nl[0][1] = 10            # 修改\nprint(l)                # [[1, 10, 3], [4, 5]]\ndel l[0][1]             # 删除\nprint(l)                # [[1, 3], [4, 5]]\n```\n\n## 拼接/合并\n列表的拼接有两种操作符与函数\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nl = [1, 2, 3]\na = [3, 4]\n\nn = l + a\nprint(n)        # ==> [1, 2, 3, 3, 4]\n\nm = l.extend(a)\nprint(m)        # ==> [1, 2, 3, 3, 4]\n```\n\n### 去重合并\n通过上边的例子，我们可以做一点延伸，如何合并去重\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nl = [1, 2, 3]\na = [3, 4]\n\n[l.append(x) for x in a if x not in l]\n\nprint(l)        # ==> [1, 2, 3, 4]\n```\n通过使用列表解析，可以完成去重合并的目的，这也是比较高效的做法\n\n## 排序\nPython 提供了列表的排序方法 `sort()` ，默认有小到大排列\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nl = [3, 5, 1]\nl.sort()\nprint(l)        # ==> [1, 3, 5]\n```\n另外，还有个倒序排序的方法 `reverse()` ，他不是由大到小，而只是倒序，比如\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nl = [3, 5, 1]\nl.reverse()\nprint(l)        # ==> [1, 5, 3]\n```\n但是由此你可能会想到，可以通过顺序执行这两个方法达到由大到小排序的效果，但是我们有更好的办法，`sort()` 方法是可以传参数的，有一个参数 `reverse` ，它默认为 **False** ，传入 **True** 即可达到由大到小排序\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nl = [3, 5, 1]\nl.sort(reverse=True)\nprint(l)        # ==> [5, 3, 1]\n```\n\n### 乱序\n```python\nimport random\nrandom.shuffle(publics)\n```\n\n### 复杂对象排序\n`sort()` 方法在默认情况下只能对基本类型数据做排序，数字或字符串，但实际开发中列表中的数据通常是更复杂的结果，比如字典，假设我们有这样一组数据，并做排序处理\n```python\nex_list = [dict(age=44), dict(age=43), dict(age=24), dict(age=74)]\n```\n```bash\nunorderable types: dict() < dict()\n```\n它懵逼了，不会处理了。因为这时候需要我们告诉他应该对字典的某一个字段进行排序\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nex_list = [dict(age=44), dict(age=43), dict(age=24), dict(age=74)]\nex_list.sort(key=lambda x: x['age'])\nprint(ex_list)  # ==> [{'age': 24}, {'age': 43}, {'age': 44}, {'age': 74}]\n```\n`key` 需要传入一个方法名，告诉它应该怎么处理的对象并排序，如果 `lambda` 方法满足不了你的需求，可以额外编写方法，知道了这个原理，我们还可以做一些别的事\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nl = ['BB', 'aa', 'cc']\nl.sort()\nprint(l)    # ==> ['BB', 'aa', 'cc']\nl.sort(key=str.lower)\nprint(l)    # ==> ['aa', 'BB', 'cc']\n```\n通过传入 `str.lower` 方法，我们告诉它需要先将字符转为小写，在进行排序，有些时候我们会需要到这种用法\n\n## 函数\n```bash\nlen(list)      # 返回列表的长度\nmax(list)      # 返回列表的最大值\nmin(list)      # 返回列表的最小值\nlist(list)     # 将元组、字典等数据结构转变为列表\n```\n\n## 方法\n```bash\nlist.append(obj)           # 在列表末尾添加新对象\nlist.count(obj)            # 计算列表中某个对象出现的次数\nlist.extend(seq)           # 在列表末尾追加另一个列表数据\nlist.index(obj)            # 找出列表中某个对象的索引位置\nlist.insert(index, obj)    # 在列表指定索引位置插入对象\nlist.pop(index=-1)         # 删除列表指定索引位置对象，默认删除最后一个\nlist.remove(obj)           # 删除列表中指定对象的第一个匹配项\nlist.sort([func])          # 对列表进行排序\nlist.reverse()             # 对列表进行反向排序\n```\n\n## 错误集锦\n### sequence item 0: expected str instance, int found\n```python\nprint(','.join([1, 2, 3]))\n```\n在使用字符串的 `join` 方法将列表对象拼接为一个字符串时，我们期望出现的结果是 `'1,2,3'` 会出现这个错误，出错的原因是因为传入的参数列表中不能含有 int 类型对象，这时我们需要对列表做些转换，将列表中的对象都转为字符串，使用列表解析可以很高效的完成这项任务\n```python\nprint(','.join([str(o) for o in [1, 2, 3]]))    # ==> '1,2,3'\n```\n","source":"_posts/2017-11-24-python-list.md","raw":"---\ntitle: Python 列表 List\ndate: 2017-11-24 16:43:56\ntags: [python]\n---\n\n> 序列是 Python 中最基本的数据结构。序列中每个元素都有自己的索引（数字），从 0 开始。Python 有 6 个序列的内置类型，最常见的是列表和元组。\n\n<!-- more -->\n\n<!-- toc -->\n\n## 基础\n### 生成\n列表的生成很简单，使用赋值的方式即可，列表可以包含数字，字符串等基本类型或数组字典这样的结构，甚至是这些的混合数据\n```python\nl1 = [1, 2, 3, 4]\nl2 = ['a', 'b', 'c']\nl3 = [l1, l1]\nl4 = [{\"k\": \"v\"}, {\"k\": \"v\"}]\nl5 = [1, 'a', l1, l4]\n```\n\n### 取值\n取值包括单个值和一个连续的范围，我们可以使用索引来完成\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nl = [1, 2, 3, 4]\n\nprint(\"l[0] = \", l[0])          # ==> l[0] = 1\nprint(\"l[0:2] = \",  l[0:2])     # ==> l[0:2] = [1, 2]\nprint(\"l[1:-1] = \", l[1:-1])    # ==> l[1:-1] = [2, 3]\n```\n前两个我们都好理解，最后一个 -1 可能会有点费解，其实可以这样来想，1 是从左边数第二个元素，-1 就是从右边数第二个元素，了解了这点，我们就可以很方便的截取前后的数据\n\n### 更新\n想要修改列表某一个索引的数据，只需要直接对该索引位置赋值即可\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nl = [1, 2, 3]\nl[2] = 6\n\nprint(l)        # ==> [1, 2, 6]\n```\n\n列表通过 `append()` 方法添加单个列表项\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nl = [1, 2, 3]\nl.append(4)\n\nprint(l)        # ==> [1, 2, 3, 4]\n```\n### 删除\n有很多种方式删除列表元素\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nl = [1, 2, 3]\ndel l[2]\nprint(l)        # ==> [1, 2]\n\nl = [1, 2, 3]\nl.pop(2)        # ==> 3\nprint(l)        # ==> [1, 2]\n\nl = [1, 2, 3]\nl.remove(2)\nprint(l)        # ==> [1, 3]\n```\n`del` 和 `pop` 通过索引删除元素，`pop` 方法默认删除最后一个对象，会返回被删除的数据，`remove` 方法查找匹配到的第一个对象并删除\n\n## 二维数组\nPython 中二维数组的本质相当于嵌套数组，就像这样\n```python\nl = [[1, 2, 3], [4, 5]]\n```\n而想要改变二维数组的值，只需要嵌套索引赋值即可\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nl = [[1, 2, 3], [4, 5]]\nl[0][1] = 10            # 修改\nprint(l)                # [[1, 10, 3], [4, 5]]\ndel l[0][1]             # 删除\nprint(l)                # [[1, 3], [4, 5]]\n```\n\n## 拼接/合并\n列表的拼接有两种操作符与函数\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nl = [1, 2, 3]\na = [3, 4]\n\nn = l + a\nprint(n)        # ==> [1, 2, 3, 3, 4]\n\nm = l.extend(a)\nprint(m)        # ==> [1, 2, 3, 3, 4]\n```\n\n### 去重合并\n通过上边的例子，我们可以做一点延伸，如何合并去重\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nl = [1, 2, 3]\na = [3, 4]\n\n[l.append(x) for x in a if x not in l]\n\nprint(l)        # ==> [1, 2, 3, 4]\n```\n通过使用列表解析，可以完成去重合并的目的，这也是比较高效的做法\n\n## 排序\nPython 提供了列表的排序方法 `sort()` ，默认有小到大排列\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nl = [3, 5, 1]\nl.sort()\nprint(l)        # ==> [1, 3, 5]\n```\n另外，还有个倒序排序的方法 `reverse()` ，他不是由大到小，而只是倒序，比如\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nl = [3, 5, 1]\nl.reverse()\nprint(l)        # ==> [1, 5, 3]\n```\n但是由此你可能会想到，可以通过顺序执行这两个方法达到由大到小排序的效果，但是我们有更好的办法，`sort()` 方法是可以传参数的，有一个参数 `reverse` ，它默认为 **False** ，传入 **True** 即可达到由大到小排序\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nl = [3, 5, 1]\nl.sort(reverse=True)\nprint(l)        # ==> [5, 3, 1]\n```\n\n### 乱序\n```python\nimport random\nrandom.shuffle(publics)\n```\n\n### 复杂对象排序\n`sort()` 方法在默认情况下只能对基本类型数据做排序，数字或字符串，但实际开发中列表中的数据通常是更复杂的结果，比如字典，假设我们有这样一组数据，并做排序处理\n```python\nex_list = [dict(age=44), dict(age=43), dict(age=24), dict(age=74)]\n```\n```bash\nunorderable types: dict() < dict()\n```\n它懵逼了，不会处理了。因为这时候需要我们告诉他应该对字典的某一个字段进行排序\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nex_list = [dict(age=44), dict(age=43), dict(age=24), dict(age=74)]\nex_list.sort(key=lambda x: x['age'])\nprint(ex_list)  # ==> [{'age': 24}, {'age': 43}, {'age': 44}, {'age': 74}]\n```\n`key` 需要传入一个方法名，告诉它应该怎么处理的对象并排序，如果 `lambda` 方法满足不了你的需求，可以额外编写方法，知道了这个原理，我们还可以做一些别的事\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nl = ['BB', 'aa', 'cc']\nl.sort()\nprint(l)    # ==> ['BB', 'aa', 'cc']\nl.sort(key=str.lower)\nprint(l)    # ==> ['aa', 'BB', 'cc']\n```\n通过传入 `str.lower` 方法，我们告诉它需要先将字符转为小写，在进行排序，有些时候我们会需要到这种用法\n\n## 函数\n```bash\nlen(list)      # 返回列表的长度\nmax(list)      # 返回列表的最大值\nmin(list)      # 返回列表的最小值\nlist(list)     # 将元组、字典等数据结构转变为列表\n```\n\n## 方法\n```bash\nlist.append(obj)           # 在列表末尾添加新对象\nlist.count(obj)            # 计算列表中某个对象出现的次数\nlist.extend(seq)           # 在列表末尾追加另一个列表数据\nlist.index(obj)            # 找出列表中某个对象的索引位置\nlist.insert(index, obj)    # 在列表指定索引位置插入对象\nlist.pop(index=-1)         # 删除列表指定索引位置对象，默认删除最后一个\nlist.remove(obj)           # 删除列表中指定对象的第一个匹配项\nlist.sort([func])          # 对列表进行排序\nlist.reverse()             # 对列表进行反向排序\n```\n\n## 错误集锦\n### sequence item 0: expected str instance, int found\n```python\nprint(','.join([1, 2, 3]))\n```\n在使用字符串的 `join` 方法将列表对象拼接为一个字符串时，我们期望出现的结果是 `'1,2,3'` 会出现这个错误，出错的原因是因为传入的参数列表中不能含有 int 类型对象，这时我们需要对列表做些转换，将列表中的对象都转为字符串，使用列表解析可以很高效的完成这项任务\n```python\nprint(','.join([str(o) for o in [1, 2, 3]]))    # ==> '1,2,3'\n```\n","slug":"python-list","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4x003o5gqogqmkiv85"},{"title":"《把时间当作朋友》读后感","date":"2017-11-27T18:15:17.000Z","_content":"\n> 相信我，你并不孤独\n\n<!-- more -->\n\n受我领导的影响，花了两周左右读完了这本书。因为本书开头就讲了记录的重要性，所以在读的过程中，写了很多感想，这也是我读的最认真的一本书了。\n\n“相信我，你并不孤独”，这是全书出现最多的一句话，是作者从自己父亲那里听到的，这句话对作者影响很大。略带诗意的一句话，也让我感触很深，作者在书举例过的各种情况，有好的习惯，坏的习惯，甚至一些我自以为独特的小技巧都已经有了近百年的历史，比如在公众演讲前，反复练习，反复设想在过程会出现的情况，并分别进行准备\n\n作者虽然以“时间”为标题，但是通篇强调的是另一个词--“心智”，如何开启自己的心智，如何提高并正确的进行运用自己的心智，是作者想要表达的中心思想。\n\n开启心智第一个表现就是明白“时间”是不能被管理的，能管理的只有我们的大脑。想想我们是不是还在给某一项任务制定繁琐的时间规划表？停掉吧，马上开始这项任务才是最重要的，马爸爸说的“晚上想想千条路，早上起来走原路”不止是在说想要创业的年轻人，还有想要学英语的我，最好的学习时间是十年前，其次就是现在，我已经坚持半个月了，坚持，加油。\n\n书中还提到了另一点是我比较感兴趣的，兴趣到底是不是做成一件事的关键，答案是否定的。因为往往我们开始表现出对某件事情感兴趣的时候，通常是还没有深入了解它，或者是对现在做的事感觉力不从心，或者遇到困难的一种托词。生活中我们最常见听到别人这样说，我学不好英语，不是因为我不努力，而是我对它不感兴趣，我感兴趣的是写作。没错这个“别人”其实就是你，或者是我。在读关于探讨兴趣的这部分时，我还额外写了些感想[《兴趣不是很重要》](/2017/11/22/interest-not-important/)，关于这部分我学到的是，并不是有了兴趣才能做好一件事，而是因为做好了这件事我们才产生了兴趣。\n\n我刚才提到了很多次英语，是的，我最近，或者说一直在为英语而犯愁。这些年来，英语是我自己唯一承认的短板，然而问题是“它”真的是很难，什么？你在说我找借口，其实英语一点都不难吗？我指的“它”是所有需要付出很多时间和耐心，持之以恒才能完成的事情，“它”真的很难，不是么？人类生来就是看重短期利益的动物，如果你在一个孩子面前放一块糖，然后告诉他，如果一个小时以后再吃的话，就再给他十块，那么他会怎么做呢，十有八九是呆个几分钟就吃掉，毕竟能等上几分钟就已经可以安慰自己了，我已经尽力了，是么？\n\n当然也有这样的孩子，他们忍受了眼前的诱惑，通过分散注意力等他们想得到的办法熬过了一个小时，他们用自己的努力和坚持换来了更巨大的成果。这些人可能是马云，俞敏洪等等，而我们大部分人只是那大部分没能坚持住的平庸者。我不想做平庸者，就像倔强的小螃蟹总是会想方设法的从 39 块的框子爬向 69 块的框子一样，我想要时刻提醒自己，时刻反思自己，每天应该做什么，现在应该做什么，这不，我刚玩了五分钟的王者荣耀就赶紧停下来写文章了。“吾日三省吾身”，不管这句话说的到底是每天反省三件事，还是每天反省三次，总之我们要反省自己，反省自己的所作所为，今天的放纵很可能就会造成明天彻底的自暴自弃。\n\n学点东西吧，在你感觉迷茫的时候，在你思考人生到底有什么意义的时候，赶紧学点东西吧。我大约去年的这个时候学习了 Python，开始我是抗拒的，老子 Java 用的好好地，学什么啊，然后这次大规模学习也使以前只会用“锤子找的钉子”来看待问题的我，开始学会了多个角度思考问题，我开始思考什么时候应该用 Python 解决问题，什么时候应该用 NodeJS 解决问题。今年 8 月份我又学习了使用 Vim 作为编辑器来编写代码，这是我想了好几年的装逼利器，就是因为这个东西入门过分的难，导致很多人望而却步，无法坚持，包括曾经的我。在我强迫自己使用一个月并能灵活使用，甚至现在已经可以自己编写 Vim 插件后，我发现我又进入了一个新的世界，我又对开发有了新的理解。学点东西，不只是为了消磨时间，或者充实自己，人生的意义是什么呢？学点东西吧，你会明白的。\n\n相信我，你并不孤独。不管你身处何处，不管你富贵贫贱，你都不孤独，有人再跟你做一样的梦，有人再跟你望一样的天空。让时间做我们的见证者，时间是最伟大的作者，它必将给出最完美的答案。\n\n\n\n\n\n","source":"_posts/2017-11-27-make-time-firends.md","raw":"---\ntitle: 《把时间当作朋友》读后感\ndate: 2017-11-27 18:15:17\ntags: [杂谈]\n---\n\n> 相信我，你并不孤独\n\n<!-- more -->\n\n受我领导的影响，花了两周左右读完了这本书。因为本书开头就讲了记录的重要性，所以在读的过程中，写了很多感想，这也是我读的最认真的一本书了。\n\n“相信我，你并不孤独”，这是全书出现最多的一句话，是作者从自己父亲那里听到的，这句话对作者影响很大。略带诗意的一句话，也让我感触很深，作者在书举例过的各种情况，有好的习惯，坏的习惯，甚至一些我自以为独特的小技巧都已经有了近百年的历史，比如在公众演讲前，反复练习，反复设想在过程会出现的情况，并分别进行准备\n\n作者虽然以“时间”为标题，但是通篇强调的是另一个词--“心智”，如何开启自己的心智，如何提高并正确的进行运用自己的心智，是作者想要表达的中心思想。\n\n开启心智第一个表现就是明白“时间”是不能被管理的，能管理的只有我们的大脑。想想我们是不是还在给某一项任务制定繁琐的时间规划表？停掉吧，马上开始这项任务才是最重要的，马爸爸说的“晚上想想千条路，早上起来走原路”不止是在说想要创业的年轻人，还有想要学英语的我，最好的学习时间是十年前，其次就是现在，我已经坚持半个月了，坚持，加油。\n\n书中还提到了另一点是我比较感兴趣的，兴趣到底是不是做成一件事的关键，答案是否定的。因为往往我们开始表现出对某件事情感兴趣的时候，通常是还没有深入了解它，或者是对现在做的事感觉力不从心，或者遇到困难的一种托词。生活中我们最常见听到别人这样说，我学不好英语，不是因为我不努力，而是我对它不感兴趣，我感兴趣的是写作。没错这个“别人”其实就是你，或者是我。在读关于探讨兴趣的这部分时，我还额外写了些感想[《兴趣不是很重要》](/2017/11/22/interest-not-important/)，关于这部分我学到的是，并不是有了兴趣才能做好一件事，而是因为做好了这件事我们才产生了兴趣。\n\n我刚才提到了很多次英语，是的，我最近，或者说一直在为英语而犯愁。这些年来，英语是我自己唯一承认的短板，然而问题是“它”真的是很难，什么？你在说我找借口，其实英语一点都不难吗？我指的“它”是所有需要付出很多时间和耐心，持之以恒才能完成的事情，“它”真的很难，不是么？人类生来就是看重短期利益的动物，如果你在一个孩子面前放一块糖，然后告诉他，如果一个小时以后再吃的话，就再给他十块，那么他会怎么做呢，十有八九是呆个几分钟就吃掉，毕竟能等上几分钟就已经可以安慰自己了，我已经尽力了，是么？\n\n当然也有这样的孩子，他们忍受了眼前的诱惑，通过分散注意力等他们想得到的办法熬过了一个小时，他们用自己的努力和坚持换来了更巨大的成果。这些人可能是马云，俞敏洪等等，而我们大部分人只是那大部分没能坚持住的平庸者。我不想做平庸者，就像倔强的小螃蟹总是会想方设法的从 39 块的框子爬向 69 块的框子一样，我想要时刻提醒自己，时刻反思自己，每天应该做什么，现在应该做什么，这不，我刚玩了五分钟的王者荣耀就赶紧停下来写文章了。“吾日三省吾身”，不管这句话说的到底是每天反省三件事，还是每天反省三次，总之我们要反省自己，反省自己的所作所为，今天的放纵很可能就会造成明天彻底的自暴自弃。\n\n学点东西吧，在你感觉迷茫的时候，在你思考人生到底有什么意义的时候，赶紧学点东西吧。我大约去年的这个时候学习了 Python，开始我是抗拒的，老子 Java 用的好好地，学什么啊，然后这次大规模学习也使以前只会用“锤子找的钉子”来看待问题的我，开始学会了多个角度思考问题，我开始思考什么时候应该用 Python 解决问题，什么时候应该用 NodeJS 解决问题。今年 8 月份我又学习了使用 Vim 作为编辑器来编写代码，这是我想了好几年的装逼利器，就是因为这个东西入门过分的难，导致很多人望而却步，无法坚持，包括曾经的我。在我强迫自己使用一个月并能灵活使用，甚至现在已经可以自己编写 Vim 插件后，我发现我又进入了一个新的世界，我又对开发有了新的理解。学点东西，不只是为了消磨时间，或者充实自己，人生的意义是什么呢？学点东西吧，你会明白的。\n\n相信我，你并不孤独。不管你身处何处，不管你富贵贫贱，你都不孤独，有人再跟你做一样的梦，有人再跟你望一样的天空。让时间做我们的见证者，时间是最伟大的作者，它必将给出最完美的答案。\n\n\n\n\n\n","slug":"make-time-firends","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4y003r5gqofozl817j"},{"title":"Vim 高级应用 Abbreviations 快速输入","date":"2017-11-29T11:35:08.000Z","_content":"\n> 懒是第一生产力\n\n<!-- more -->\n在开发时候我们更希望把时间花在思考怎样优化代码性能，而不是浪费在做重复无意义的事情上，我们先来看一个场景\n\n![abbrev](/images/abbreviations.gif)\n\n试想一下，如果手动输入上边这些代码，我需要多长时间呢，而且可能是需要重复很多的工作。说到这里我又要吐槽 Java 了，想想输出 `Hello World` Python 需要做什么呢\n```python\nprint('Hello World')\n```\n是的，只需要一行就可以了，当然这是脚本语言和编译语言的大差异。\n\n## Hello World\n程序员学什么最开始都是 `Hello World` ，这不是必要的，但是我们切入一点的习惯，如何使用 Abbreviations 快速输入 `Hello World` ，是的，及时这么短的语句我也不想每次手动输入，***懒是第一生产力***，实现很简单编辑 `~/.vimrc` 文件\n```vim\niabbrev hw Hello World\n```\n然后在输入 `hw` ，然后输入空格即可完成输入，是的就是这么简单，不过一定要记得，退出 `~/.vimrc` 重新进入 Vim 使配置生效\n\n## 更复杂的使用\n在截图中的 `Hello World` 就是通过这种方式快速输入的，接下来我们来探讨怎样重现预览中的效果，首先来看 `class` 的生成\n```vim\niabbrev class public class{}<esc>i<cr><esc>k$Fsli\n```\n先什么都不要管，直接复制到 `~/.vimrc` 中，自己输入 `class` 试验一下看看效果，第一次看的话你可能会感觉懵逼，不过不要着急，我们一步步来解释，`publich class{}` 应该不用解释，就是简单输入 ，`<esc>` 代表输入键盘的 esc 键，这时光标会在大括号中间，接下来 `i` 进入插入模式，`<cr>` 输入回车，再次输入 esc 退出插入模式后， `k` 光标上移一行，`$` 光标来到行尾，`F` 反向查找第一个 s 字母，`l` 右移动一格，并再次进入插入模式，看，全部是都是 Vim 的基本操作，我们只是不想每次都手动输入而已。\n\n接下来 `main` 方法和 `print` 方法\n```vim\niabbrev main public static void main(String args[]){}<esc>i<cr>\niabbrev print System.out.println()<esc>i\"\"<esc>i\n```\n这个更简单一些我就不解释了，这样通过几个关键词我们就可以输入平常很久才能完成的任务，你可以试试更复杂的输入 `classm` 将 class 和 main 方法同时输出，那样更方便，就当是个练习，因为想要熟练的唯一方法就是不断的练习\n\n## Keyword Characters\n在 `hw` 后输入空格就可以出现`Hello World` ，这已经很方便了，但你一定会问是不是可以用其他字符替换，答案是肯定的，运行命令\n```bash\n:set iskeyword?\n```\n```bash\niskeyword=@,48-57,_,192-255\n```\n结果会让人很费解，但是其实 `keyword characters` 就是代表以下含义\n\n- 下划线字符 `(_).`\n- 所有字母字符，包括大小写。\n- ASCII值在48到57之间的字符（数字0-9）。\n- ASCII值在192到255之间的字符（一些特殊ASCII字符）。\n\n这样在 `hw` 之后输入 `@` 也可以达到目的，但是有一点，`@` 也会出现在行尾，就像空格一样，如果这样的话，我建议还是使用空格比较好，因为很多时候空格本来就是要出现在单词后边的，这一段的完整描述可以通过 `:help isfname` 命令查看。\n\n最后为你代码添加 abbreviations 配置吧\n","source":"_posts/2017-11-29-vim-abbreviations.md","raw":"---\ntitle: Vim 高级应用 Abbreviations 快速输入\ndate: 2017-11-29 11:35:08\ntags: [vim]\n---\n\n> 懒是第一生产力\n\n<!-- more -->\n在开发时候我们更希望把时间花在思考怎样优化代码性能，而不是浪费在做重复无意义的事情上，我们先来看一个场景\n\n![abbrev](/images/abbreviations.gif)\n\n试想一下，如果手动输入上边这些代码，我需要多长时间呢，而且可能是需要重复很多的工作。说到这里我又要吐槽 Java 了，想想输出 `Hello World` Python 需要做什么呢\n```python\nprint('Hello World')\n```\n是的，只需要一行就可以了，当然这是脚本语言和编译语言的大差异。\n\n## Hello World\n程序员学什么最开始都是 `Hello World` ，这不是必要的，但是我们切入一点的习惯，如何使用 Abbreviations 快速输入 `Hello World` ，是的，及时这么短的语句我也不想每次手动输入，***懒是第一生产力***，实现很简单编辑 `~/.vimrc` 文件\n```vim\niabbrev hw Hello World\n```\n然后在输入 `hw` ，然后输入空格即可完成输入，是的就是这么简单，不过一定要记得，退出 `~/.vimrc` 重新进入 Vim 使配置生效\n\n## 更复杂的使用\n在截图中的 `Hello World` 就是通过这种方式快速输入的，接下来我们来探讨怎样重现预览中的效果，首先来看 `class` 的生成\n```vim\niabbrev class public class{}<esc>i<cr><esc>k$Fsli\n```\n先什么都不要管，直接复制到 `~/.vimrc` 中，自己输入 `class` 试验一下看看效果，第一次看的话你可能会感觉懵逼，不过不要着急，我们一步步来解释，`publich class{}` 应该不用解释，就是简单输入 ，`<esc>` 代表输入键盘的 esc 键，这时光标会在大括号中间，接下来 `i` 进入插入模式，`<cr>` 输入回车，再次输入 esc 退出插入模式后， `k` 光标上移一行，`$` 光标来到行尾，`F` 反向查找第一个 s 字母，`l` 右移动一格，并再次进入插入模式，看，全部是都是 Vim 的基本操作，我们只是不想每次都手动输入而已。\n\n接下来 `main` 方法和 `print` 方法\n```vim\niabbrev main public static void main(String args[]){}<esc>i<cr>\niabbrev print System.out.println()<esc>i\"\"<esc>i\n```\n这个更简单一些我就不解释了，这样通过几个关键词我们就可以输入平常很久才能完成的任务，你可以试试更复杂的输入 `classm` 将 class 和 main 方法同时输出，那样更方便，就当是个练习，因为想要熟练的唯一方法就是不断的练习\n\n## Keyword Characters\n在 `hw` 后输入空格就可以出现`Hello World` ，这已经很方便了，但你一定会问是不是可以用其他字符替换，答案是肯定的，运行命令\n```bash\n:set iskeyword?\n```\n```bash\niskeyword=@,48-57,_,192-255\n```\n结果会让人很费解，但是其实 `keyword characters` 就是代表以下含义\n\n- 下划线字符 `(_).`\n- 所有字母字符，包括大小写。\n- ASCII值在48到57之间的字符（数字0-9）。\n- ASCII值在192到255之间的字符（一些特殊ASCII字符）。\n\n这样在 `hw` 之后输入 `@` 也可以达到目的，但是有一点，`@` 也会出现在行尾，就像空格一样，如果这样的话，我建议还是使用空格比较好，因为很多时候空格本来就是要出现在单词后边的，这一段的完整描述可以通过 `:help isfname` 命令查看。\n\n最后为你代码添加 abbreviations 配置吧\n","slug":"vim-abbreviations","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a4z003t5gqoz17d6hgx"},{"title":"Vim 高级功能 Mapping 映射","date":"2017-12-01T14:24:46.000Z","_content":"\nVim 的 `dd, hjkl` 等基础按键操作已经可以很好的完成基本编辑工作，然而它还是会不太方便，尤其是熟悉了成熟 IDE 很多人性化设计的人们，曾经的我也是。所幸 Vim 提供了 Mapping 映射可以更好的进行文本操作，甚至比 IDE 更好方便。\n\n<!-- more --><!-- toc -->\n![mapping](/images/mapping.gif)\n\n从截图中我做了这么几个事情\n- 先输入一个字符串 `wxnacy` 但是忘记包双引号，然后利用映射快速完成双引号环绕\n- 然后快速跳到行首输入 `String name = ` ，再快速跳到行尾输入输入 `;`\n- 输入输出语句，并在不跳到行尾的情况下，在行尾插入 `;`\n- 最后输入一行 `=` 并快速移动到上一行\n\n## 简单映射\n我们先放一放，从最简单的开始\n```vim\nmap - dd\n```\n你可以在命令行中输入这句，然后在文本的某一行中按下 `-` ，如果你已经按下了，相信你已经明白他的含义，`-` 映射了 `dd` 的功能，当然 `dd` 的功能并没有消失，这样的意义是什么呢，可以输入少，但做的多，我在其他文章中提到过，***懒是第一生产力***\n\nVim 提供了映射的功能，除了少输入字符外，它可以让我们免受一些“别扭”的按键所折磨，在预览中我们提到了，快速跳到行首行尾来编辑，其实 Vim 的基础操作就有提及，`I, A` 分别可以完成，然后这样的按键让从其他编辑器跳槽过来的人颇为头疼，因为现在几乎所有的编辑器都可以通过 `ctrl + a, ctrl + e` 来实现这个功能，就算我强迫自己适应了它的设定，在与其他编辑器切换使用时，这样的区别也会让我很恼火，所以我想改了它\n```vim\nnmap <c-a> I\nnmap <c-e> A\nimap <c-a> <esc>I\nimap <c-e> <esc>A\n```\n按照这样修改你的配置文件，你就可以像其他编辑器一样使用快速跳转行首行尾了，在这里有两个新东西 `<c-a>` `nmap, imap` ，我们来看一下。\n- `<c-a>` 就是 `ctrl + a` 的组合键，第一个 c 就代表 ctrl\n- Vim 在映射上提供了四个关键词 `nmap, imap, vmap, cmap` 分别代表了四种使用模式，\n`map` 默认为 `nmap`\n\n## 可怕的递归\n\n```vim\nnmap dd jddk\n```\n试着用一下这个映射，结果发现它只是想按了 `G` 一样，跳到了最后一行，并没有按照预想的一样，先下移一行，删除，再上移一行，问题出在了哪里？\n\n我们在这里遇到了递归映射，在执行 `j` 以后遇到 `dd` Vim 以为我们又想映射，所以又从 `j` 开始执行，如此往复，陷入了递归陷阱。当然你会说，尽量避免这种情况就是了，这样好像可以解决眼前的问题，但是却解决不了以后的问题，随着自定义映射越来越多，这样的情况出现几率会越来越高，因为一共也就这么多按键，总有用完的时候，另外你以后肯定记不住那么的映射都用在哪了。所以我们应该用**更好**的方式来解决问题。\n\n```vim\nnnoremap dd jddk\n```\n再次试用这个映射，现在我们会发现，当按下 `dd` 的时候已经可以删除下一行了，Vim 提供了**非递归映射**，同时提供了 `inoremap, vnoremap, cnoremap` 一共四种模式\n\n不要问什么时候用这种模式，答案很显然，是永远，forver。毕竟我们不能永远惦记着哪些映射可能会触发递归，因为我们的时间和精力应该用在更有意义的事情上。\n\n相关文档 `:help unmap`\n\n## Leader\n在解决完递归的问题，我们再来看一种情况，在上个问题中我们使用 `dd` 来做删除下一行的操作，那删除当前行怎么办，对，我之前提过可以用 `-` 来映射。但我们不能用这样映射下去，我们需要**更好**的解决方法。\n```vim\nnnoremap ;d jddk\n```\n通过这样的配置，我们并没有多输入字符，但是也达到了同样的效果，并且这样的组合几乎不会在其他地方用到，在 Vim 中我们称 `;` 这样的“前缀”为 `leader`\n```vim\nlet mapleader = ';'\n```\n做这样的配置可以设置自己的 `leader` 键，并用 `<leader>` 来使用它，这样做的好处是如果你有一天想改变这个键位，只需要修改一个地方即可，不必在到处查找，并且如果哪天你把自己的配置放到网上供他人使用，别人只需修改成自己喜欢的键位，就可以马上使用。\n\n更多的资料可以阅读 `:help mapleader` `:help maplocalleader`\n\n## 更复杂的映射\n\n现在我们来做一些更复杂的事情，分析一下效果预览中一些操作\n```vim\nnnoremap <Leader>\" viw<esc>bi\"<esc>ea\"<esc>\n```\n这是给单词做环绕括号时的操作，你可以先复制到你的配置中试一下效果，它做了什么呢？首先 `viw` 可以选中当前光标所在单词，这是 Vim 自带的映射，我们记住即可。然后输入 `<esc>` 退出选中模式，`b` 跳到单词开头，`i` 进入插入模式，输入 `\"` ，再次退出插入模式，`e` 跳到单词末尾，`a` 在末尾进入插入模式，输入 `\"` ，最后退出插入模式\n\n如果你把 Vim 当做主编辑器来使用，这样的映射操作会经常发生，所以你需要不断的练习\n```vim\n\" 在行尾输入分号\nnnoremap <Leader>, mzA;<esc>`z\n\" 在正常模式和插入模式快速跳到行首行尾\nnnoremap <C-a> I\nnnoremap <C-e> A\ninoremap <C-a> <esc>I\ninoremap <C-e> <esc>A\n```\n剩下两个操作我不在进行解释，你可以自己尝试搞明白原理，你可能会发现我没有提及为什么输入 `print` 后会快速变成 `System.out.println(\"\")`，但是如果你看下 [Vim 高级应用 Abbreviations 快速输入](/2017/11/29/vim-abbreviations/) 就会明白\n\n师傅领进门，修行靠个人。即使知道的再多，不去做也是不行，因为不做就等于不知道，知行合一嘛。不要担心不适应，相信我，你并不孤独，每个人在这个阶段都是这样的。有个方法可以强迫帮你一下，在改过映射后，将原来的按键映射为 `<nop>` ，这样按键就会失效，当你按完没有反应时，自然会去使用新按键，久而久之就改过来了，好了，快去练习吧\n","source":"_posts/2017-12-01-vim-mappings.md","raw":"---\ntitle: Vim 高级功能 Mapping 映射\ndate: 2017-12-01 14:24:46\ntags: [vim]\n---\n\nVim 的 `dd, hjkl` 等基础按键操作已经可以很好的完成基本编辑工作，然而它还是会不太方便，尤其是熟悉了成熟 IDE 很多人性化设计的人们，曾经的我也是。所幸 Vim 提供了 Mapping 映射可以更好的进行文本操作，甚至比 IDE 更好方便。\n\n<!-- more --><!-- toc -->\n![mapping](/images/mapping.gif)\n\n从截图中我做了这么几个事情\n- 先输入一个字符串 `wxnacy` 但是忘记包双引号，然后利用映射快速完成双引号环绕\n- 然后快速跳到行首输入 `String name = ` ，再快速跳到行尾输入输入 `;`\n- 输入输出语句，并在不跳到行尾的情况下，在行尾插入 `;`\n- 最后输入一行 `=` 并快速移动到上一行\n\n## 简单映射\n我们先放一放，从最简单的开始\n```vim\nmap - dd\n```\n你可以在命令行中输入这句，然后在文本的某一行中按下 `-` ，如果你已经按下了，相信你已经明白他的含义，`-` 映射了 `dd` 的功能，当然 `dd` 的功能并没有消失，这样的意义是什么呢，可以输入少，但做的多，我在其他文章中提到过，***懒是第一生产力***\n\nVim 提供了映射的功能，除了少输入字符外，它可以让我们免受一些“别扭”的按键所折磨，在预览中我们提到了，快速跳到行首行尾来编辑，其实 Vim 的基础操作就有提及，`I, A` 分别可以完成，然后这样的按键让从其他编辑器跳槽过来的人颇为头疼，因为现在几乎所有的编辑器都可以通过 `ctrl + a, ctrl + e` 来实现这个功能，就算我强迫自己适应了它的设定，在与其他编辑器切换使用时，这样的区别也会让我很恼火，所以我想改了它\n```vim\nnmap <c-a> I\nnmap <c-e> A\nimap <c-a> <esc>I\nimap <c-e> <esc>A\n```\n按照这样修改你的配置文件，你就可以像其他编辑器一样使用快速跳转行首行尾了，在这里有两个新东西 `<c-a>` `nmap, imap` ，我们来看一下。\n- `<c-a>` 就是 `ctrl + a` 的组合键，第一个 c 就代表 ctrl\n- Vim 在映射上提供了四个关键词 `nmap, imap, vmap, cmap` 分别代表了四种使用模式，\n`map` 默认为 `nmap`\n\n## 可怕的递归\n\n```vim\nnmap dd jddk\n```\n试着用一下这个映射，结果发现它只是想按了 `G` 一样，跳到了最后一行，并没有按照预想的一样，先下移一行，删除，再上移一行，问题出在了哪里？\n\n我们在这里遇到了递归映射，在执行 `j` 以后遇到 `dd` Vim 以为我们又想映射，所以又从 `j` 开始执行，如此往复，陷入了递归陷阱。当然你会说，尽量避免这种情况就是了，这样好像可以解决眼前的问题，但是却解决不了以后的问题，随着自定义映射越来越多，这样的情况出现几率会越来越高，因为一共也就这么多按键，总有用完的时候，另外你以后肯定记不住那么的映射都用在哪了。所以我们应该用**更好**的方式来解决问题。\n\n```vim\nnnoremap dd jddk\n```\n再次试用这个映射，现在我们会发现，当按下 `dd` 的时候已经可以删除下一行了，Vim 提供了**非递归映射**，同时提供了 `inoremap, vnoremap, cnoremap` 一共四种模式\n\n不要问什么时候用这种模式，答案很显然，是永远，forver。毕竟我们不能永远惦记着哪些映射可能会触发递归，因为我们的时间和精力应该用在更有意义的事情上。\n\n相关文档 `:help unmap`\n\n## Leader\n在解决完递归的问题，我们再来看一种情况，在上个问题中我们使用 `dd` 来做删除下一行的操作，那删除当前行怎么办，对，我之前提过可以用 `-` 来映射。但我们不能用这样映射下去，我们需要**更好**的解决方法。\n```vim\nnnoremap ;d jddk\n```\n通过这样的配置，我们并没有多输入字符，但是也达到了同样的效果，并且这样的组合几乎不会在其他地方用到，在 Vim 中我们称 `;` 这样的“前缀”为 `leader`\n```vim\nlet mapleader = ';'\n```\n做这样的配置可以设置自己的 `leader` 键，并用 `<leader>` 来使用它，这样做的好处是如果你有一天想改变这个键位，只需要修改一个地方即可，不必在到处查找，并且如果哪天你把自己的配置放到网上供他人使用，别人只需修改成自己喜欢的键位，就可以马上使用。\n\n更多的资料可以阅读 `:help mapleader` `:help maplocalleader`\n\n## 更复杂的映射\n\n现在我们来做一些更复杂的事情，分析一下效果预览中一些操作\n```vim\nnnoremap <Leader>\" viw<esc>bi\"<esc>ea\"<esc>\n```\n这是给单词做环绕括号时的操作，你可以先复制到你的配置中试一下效果，它做了什么呢？首先 `viw` 可以选中当前光标所在单词，这是 Vim 自带的映射，我们记住即可。然后输入 `<esc>` 退出选中模式，`b` 跳到单词开头，`i` 进入插入模式，输入 `\"` ，再次退出插入模式，`e` 跳到单词末尾，`a` 在末尾进入插入模式，输入 `\"` ，最后退出插入模式\n\n如果你把 Vim 当做主编辑器来使用，这样的映射操作会经常发生，所以你需要不断的练习\n```vim\n\" 在行尾输入分号\nnnoremap <Leader>, mzA;<esc>`z\n\" 在正常模式和插入模式快速跳到行首行尾\nnnoremap <C-a> I\nnnoremap <C-e> A\ninoremap <C-a> <esc>I\ninoremap <C-e> <esc>A\n```\n剩下两个操作我不在进行解释，你可以自己尝试搞明白原理，你可能会发现我没有提及为什么输入 `print` 后会快速变成 `System.out.println(\"\")`，但是如果你看下 [Vim 高级应用 Abbreviations 快速输入](/2017/11/29/vim-abbreviations/) 就会明白\n\n师傅领进门，修行靠个人。即使知道的再多，不去做也是不行，因为不做就等于不知道，知行合一嘛。不要担心不适应，相信我，你并不孤独，每个人在这个阶段都是这样的。有个方法可以强迫帮你一下，在改过映射后，将原来的按键映射为 `<nop>` ，这样按键就会失效，当你按完没有反应时，自然会去使用新按键，久而久之就改过来了，好了，快去练习吧\n","slug":"vim-mappings","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a50003w5gqonh1p0y16"},{"title":"如何获取 IP 、经纬度、时区一系列信息","date":"2017-11-30T17:43:09.000Z","_content":"\n在开发电视端产品时发现，并不能像手机端一样通过 GPS 等手段获取用户的经纬度，产品上添加的天气预报非常依赖这项数据，经 Google 发现，通过 IP 可以使用一些开发接口获取到这些信息，通过一系列接口调用可以形成一个闭环，现在记录下来。\n\n<!-- more -->\n## IP\n获取 IP 的手段很多，最方便的是从后台获取接口请求的 IP 地址，也有开发 API 可以实现，比如 [ip-api](http://ip-api.com/) ，它提供了免费 API 可以使用\n```bash\n$ curl http://ip-api.com/json\n```\n```json\n{\n    \"as\": \"AS22552 eSited Solutions\",\n    \"city\": \"Orlando\",\n    \"country\": \"United States\",\n    \"countryCode\": \"US\",\n    \"isp\": \"eSited Solutions\",\n    \"lat\": 28.5106,\n    \"lon\": -81.1976,\n    \"org\": \"eSited Solutions\",\n    \"query\": \"104.222.246.242\",\n    \"region\": \"FL\",\n    \"regionName\": \"Florida\",\n    \"status\": \"success\",\n    \"timezone\": \"America/New_York\",\n    \"zip\": \"32825\"\n\n}\n```\n结果除了 IP 还有经纬度和时区，如果只需要这些信息，那已经足够了。但是会发现时区显示的是名字，在库里经常会保存小时偏移量 `8, -8` 等，所以还需要其他手段来获取。\n\n## 时区\ntimezone [时刻表](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)\n### Google API\nGoogle API 提供了通过经纬度来获取时区的接口 [Time Zone API](https://developers.google.com/maps/documentation/timezone/intro?hl=zh-cn)\n```bash\n$ https://maps.googleapis.com/maps/api/timezone/json?location=39.6034810,-119.6822510&timestamp=1331161200&key=YOUR_API_KEY\n```\n```json\n{\n    \"dstOffset\" : 0,\n    \"rawOffset\" : -28800,\n    \"status\" : \"OK\",\n    \"timeZoneId\" : \"America/Los_Angeles\",\n    \"timeZoneName\" : \"Pacific Standard Time\"\n\n}\n```\n返回的接口 `rawOffset` 字段就是时区的小时偏移量，单位秒\n\n### timezonedb\n如果你不想调用很多接口，还可以使用专门提供时区数据的服务 [timezonedb](https://timezonedb.com) 在[这里](https://timezonedb.com/download)可以直接下载 timezone 的数据库 SQL 文件或 CSV 文件，不过他们也提供 API\n```bash\n$ curl http://api.timezonedb.com/v2/get-time-zone?key=your_key&format=json&by=zone&zone=America/Chicago\n```\n```json\n{\n    \"status\": \"OK\",\n    \"message\": \"\",\n    \"countryCode\": \"US\",\n    \"countryName\": \"United States\",\n    \"zoneName\": \"America/Chicago\",\n    \"abbreviation\": \"CST\",\n    \"gmtOffset\": -21600,\n    \"dst\": \"0\",\n    \"dstStart\": 1509865200,\n    \"dstEnd\": 1520755199,\n    \"nextAbbreviation\": \"CDT\",\n    \"timestamp\": 1512013032,\n    \"formatted\": \"2017-11-30 03:37:12\"\n\n}\n```\n结果中 `gmtOffset` 即为小时偏移量\n","source":"_posts/2017-11-30-get-ip-location-timezone.md","raw":"---\ntitle: 如何获取 IP 、经纬度、时区一系列信息\ndate: 2017-11-30 17:43:09\ntags: [开发]\n---\n\n在开发电视端产品时发现，并不能像手机端一样通过 GPS 等手段获取用户的经纬度，产品上添加的天气预报非常依赖这项数据，经 Google 发现，通过 IP 可以使用一些开发接口获取到这些信息，通过一系列接口调用可以形成一个闭环，现在记录下来。\n\n<!-- more -->\n## IP\n获取 IP 的手段很多，最方便的是从后台获取接口请求的 IP 地址，也有开发 API 可以实现，比如 [ip-api](http://ip-api.com/) ，它提供了免费 API 可以使用\n```bash\n$ curl http://ip-api.com/json\n```\n```json\n{\n    \"as\": \"AS22552 eSited Solutions\",\n    \"city\": \"Orlando\",\n    \"country\": \"United States\",\n    \"countryCode\": \"US\",\n    \"isp\": \"eSited Solutions\",\n    \"lat\": 28.5106,\n    \"lon\": -81.1976,\n    \"org\": \"eSited Solutions\",\n    \"query\": \"104.222.246.242\",\n    \"region\": \"FL\",\n    \"regionName\": \"Florida\",\n    \"status\": \"success\",\n    \"timezone\": \"America/New_York\",\n    \"zip\": \"32825\"\n\n}\n```\n结果除了 IP 还有经纬度和时区，如果只需要这些信息，那已经足够了。但是会发现时区显示的是名字，在库里经常会保存小时偏移量 `8, -8` 等，所以还需要其他手段来获取。\n\n## 时区\ntimezone [时刻表](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)\n### Google API\nGoogle API 提供了通过经纬度来获取时区的接口 [Time Zone API](https://developers.google.com/maps/documentation/timezone/intro?hl=zh-cn)\n```bash\n$ https://maps.googleapis.com/maps/api/timezone/json?location=39.6034810,-119.6822510&timestamp=1331161200&key=YOUR_API_KEY\n```\n```json\n{\n    \"dstOffset\" : 0,\n    \"rawOffset\" : -28800,\n    \"status\" : \"OK\",\n    \"timeZoneId\" : \"America/Los_Angeles\",\n    \"timeZoneName\" : \"Pacific Standard Time\"\n\n}\n```\n返回的接口 `rawOffset` 字段就是时区的小时偏移量，单位秒\n\n### timezonedb\n如果你不想调用很多接口，还可以使用专门提供时区数据的服务 [timezonedb](https://timezonedb.com) 在[这里](https://timezonedb.com/download)可以直接下载 timezone 的数据库 SQL 文件或 CSV 文件，不过他们也提供 API\n```bash\n$ curl http://api.timezonedb.com/v2/get-time-zone?key=your_key&format=json&by=zone&zone=America/Chicago\n```\n```json\n{\n    \"status\": \"OK\",\n    \"message\": \"\",\n    \"countryCode\": \"US\",\n    \"countryName\": \"United States\",\n    \"zoneName\": \"America/Chicago\",\n    \"abbreviation\": \"CST\",\n    \"gmtOffset\": -21600,\n    \"dst\": \"0\",\n    \"dstStart\": 1509865200,\n    \"dstEnd\": 1520755199,\n    \"nextAbbreviation\": \"CDT\",\n    \"timestamp\": 1512013032,\n    \"formatted\": \"2017-11-30 03:37:12\"\n\n}\n```\n结果中 `gmtOffset` 即为小时偏移量\n","slug":"get-ip-location-timezone","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a51003y5gqobmuet4lc"},{"title":"Python 时间戳的坑","date":"2017-12-05T17:23:36.000Z","_content":"在使用 `datetime` 的 `timestamp()` 方法获取时间戳时遇到一点问题\n<!-- more -->\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom datetime import datetime\nprint(datetime.now().timestamp()        # ==> 1512393482.510263\nprint(datetime.utcnow().timestamp())    # ==> 1512364682.510288\n```\n理论上两个输出应该都返回当前时间戳，但是 `utcnow()` 方法的时间戳并不正确，网上查找资料没一个能说明白的，后来查看[官方文档](https://docs.python.org/dev/library/datetime.html#datetime.datetime.timestamp)发现这么一句话\n> There is no method to obtain the POSIX timestamp directly from a naive datetime instance representing UTC time. If your application uses this convention and your system timezone is not set to UTC, you can obtain the POSIX timestamp by supplying tzinfo=timezone.utc:\n\n我们不能通过 UTC 得到的 `datetime` 实例直接获取时间戳，如果系统的时区不是 UTC 则需要 `timezone.utc` 来帮忙转换。我晕，我们不提供，但是给你指条路。好吧，先试试\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom datetime import datetime\nfrom datetime import timezone\n\ndt = datetime.utcnow()\nprint(dt.replace(tzinfo=timezone.utc).timestamp())  # ==> 1512454062.906826\nprint(datetime.now().timestamp())                   # ==> 1512454062.906826\n```\n\nOK，这次可以了，但是呢，难道每次获取一次时间戳都这样麻烦或者修改系统时区吗？当然不是，我们还可以通过 `time` 模块来轻松搞定\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport time\n\nprint(time.time())      # ==> 1512454270.614852\n```\n\n## 时间戳转为地区时间\n如果想要将时间戳转为某个地区的时间，比如北京时间，需要引入 `pytz` 模块，首先下载 `pip install pytz`\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport time\nfrom datetime import datetime\nimport pytz\n\ntz = pytz.timezone('Asia/Shanghai') #东八区\nt = datetime.fromtimestamp(int(time.time()),\n    pytz.timezone('Asia/Shanghai')).strftime('%Y-%m-%d %H:%M:%S %Z%z')\nprint(t)    # ==> 2017-12-05 18:39:45 CST+0800\n```\n\n","source":"_posts/2017-12-05-python-timestamp-keng.md","raw":"---\ntitle: Python 时间戳的坑\ndate: 2017-12-05 17:23:36\ntags: [python]\n---\n在使用 `datetime` 的 `timestamp()` 方法获取时间戳时遇到一点问题\n<!-- more -->\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom datetime import datetime\nprint(datetime.now().timestamp()        # ==> 1512393482.510263\nprint(datetime.utcnow().timestamp())    # ==> 1512364682.510288\n```\n理论上两个输出应该都返回当前时间戳，但是 `utcnow()` 方法的时间戳并不正确，网上查找资料没一个能说明白的，后来查看[官方文档](https://docs.python.org/dev/library/datetime.html#datetime.datetime.timestamp)发现这么一句话\n> There is no method to obtain the POSIX timestamp directly from a naive datetime instance representing UTC time. If your application uses this convention and your system timezone is not set to UTC, you can obtain the POSIX timestamp by supplying tzinfo=timezone.utc:\n\n我们不能通过 UTC 得到的 `datetime` 实例直接获取时间戳，如果系统的时区不是 UTC 则需要 `timezone.utc` 来帮忙转换。我晕，我们不提供，但是给你指条路。好吧，先试试\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom datetime import datetime\nfrom datetime import timezone\n\ndt = datetime.utcnow()\nprint(dt.replace(tzinfo=timezone.utc).timestamp())  # ==> 1512454062.906826\nprint(datetime.now().timestamp())                   # ==> 1512454062.906826\n```\n\nOK，这次可以了，但是呢，难道每次获取一次时间戳都这样麻烦或者修改系统时区吗？当然不是，我们还可以通过 `time` 模块来轻松搞定\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport time\n\nprint(time.time())      # ==> 1512454270.614852\n```\n\n## 时间戳转为地区时间\n如果想要将时间戳转为某个地区的时间，比如北京时间，需要引入 `pytz` 模块，首先下载 `pip install pytz`\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport time\nfrom datetime import datetime\nimport pytz\n\ntz = pytz.timezone('Asia/Shanghai') #东八区\nt = datetime.fromtimestamp(int(time.time()),\n    pytz.timezone('Asia/Shanghai')).strftime('%Y-%m-%d %H:%M:%S %Z%z')\nprint(t)    # ==> 2017-12-05 18:39:45 CST+0800\n```\n\n","slug":"python-timestamp-keng","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5200415gqor2esqqbt"},{"title":"如何获取指定位数随机数","date":"2017-12-06T18:00:59.000Z","_content":"\n点击按钮获取一个 16 位的包含 `[0-9][a-z][A-Z][!@#$%^&*]` 的密码\n<button onClick=\"getRandom(16)\">获取</button>: <span id=\"out\"></span>\n<!-- more -->\n在实际开发中经常会用到随机数，这里介绍各种语言的实现方法\n## Python\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nSTR = [\n    '0', '1', '2', '3', '4', '5',\n    '6', '7', '8', '9', 'a', 'b',\n    'c', 'd', 'e', 'f', 'g', 'h',\n    'i', 'j', 'k', 'l', 'm', 'n',\n    'o', 'p', 'q', 'r', 's', 't',\n    'u', 'v', 'w', 'x', 'y', 'z'\n]\ndef get_random_str(str_len):\n    \"\"\"\n    获取随机字符串\n    :param str_len: 需要获取的长度\n    :return:\n    \"\"\"\n    def _create():\n        return str(STR[int(random.uniform(0, len(STR)))])\n    res = [_create() for x in range(0, str_len)]\n    return ''.join(res)\n```\n\n## Java\n```java\nimport java.util.Random;\n\nprivate final static char[] digits = {\n    '0', '1', '2', '3', '4', '5',\n    '6', '7', '8', '9', 'a', 'b',\n    'c', 'd', 'e', 'f', 'g', 'h',\n    'i', 'j', 'k', 'l', 'm', 'n',\n    'o', 'p', 'q', 'r', 's', 't',\n    'u', 'v', 'w', 'x', 'y', 'z'\n\n};\npublic static String getRandom(int len){\n    char[] result = new char[len];\n    Random r = new Random();\n    for(int i = 0; i < len; i++){\n        result[i] = digits[Math.abs(r.nextInt(digits.length))];\n    }\n    return new String(result);\n}\n```\n\n## Javascript\n```javascript\nvar digits = [\n    '0', '1', '2', '3', '4', '5',\n    '6', '7', '8', '9', 'a', 'b',\n    'c', 'd', 'e', 'f', 'g', 'h',\n    'i', 'j', 'k', 'l', 'm', 'n',\n    'o', 'p', 'q', 'r', 's', 't',\n    'u', 'v', 'w', 'x', 'y', 'z'\n\n];\nfunction getRandom(len){\n    var array = new Array(len);\n    for(var i = 0; i < len; i++){\n        array[i] = digits[parseInt(Math.random() * digits.length)];\n    }\n    return array.join('');\n}\n```\n","source":"_posts/2017-12-06-get-random.md","raw":"---\ntitle: 如何获取指定位数随机数\ndate: 2017-12-06 18:00:59\ntags: [算法, 工具, python, java, javascript]\n---\n\n点击按钮获取一个 16 位的包含 `[0-9][a-z][A-Z][!@#$%^&*]` 的密码\n<button onClick=\"getRandom(16)\">获取</button>: <span id=\"out\"></span>\n<!-- more -->\n在实际开发中经常会用到随机数，这里介绍各种语言的实现方法\n## Python\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nSTR = [\n    '0', '1', '2', '3', '4', '5',\n    '6', '7', '8', '9', 'a', 'b',\n    'c', 'd', 'e', 'f', 'g', 'h',\n    'i', 'j', 'k', 'l', 'm', 'n',\n    'o', 'p', 'q', 'r', 's', 't',\n    'u', 'v', 'w', 'x', 'y', 'z'\n]\ndef get_random_str(str_len):\n    \"\"\"\n    获取随机字符串\n    :param str_len: 需要获取的长度\n    :return:\n    \"\"\"\n    def _create():\n        return str(STR[int(random.uniform(0, len(STR)))])\n    res = [_create() for x in range(0, str_len)]\n    return ''.join(res)\n```\n\n## Java\n```java\nimport java.util.Random;\n\nprivate final static char[] digits = {\n    '0', '1', '2', '3', '4', '5',\n    '6', '7', '8', '9', 'a', 'b',\n    'c', 'd', 'e', 'f', 'g', 'h',\n    'i', 'j', 'k', 'l', 'm', 'n',\n    'o', 'p', 'q', 'r', 's', 't',\n    'u', 'v', 'w', 'x', 'y', 'z'\n\n};\npublic static String getRandom(int len){\n    char[] result = new char[len];\n    Random r = new Random();\n    for(int i = 0; i < len; i++){\n        result[i] = digits[Math.abs(r.nextInt(digits.length))];\n    }\n    return new String(result);\n}\n```\n\n## Javascript\n```javascript\nvar digits = [\n    '0', '1', '2', '3', '4', '5',\n    '6', '7', '8', '9', 'a', 'b',\n    'c', 'd', 'e', 'f', 'g', 'h',\n    'i', 'j', 'k', 'l', 'm', 'n',\n    'o', 'p', 'q', 'r', 's', 't',\n    'u', 'v', 'w', 'x', 'y', 'z'\n\n];\nfunction getRandom(len){\n    var array = new Array(len);\n    for(var i = 0; i < len; i++){\n        array[i] = digits[parseInt(Math.random() * digits.length)];\n    }\n    return array.join('');\n}\n```\n","slug":"get-random","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5300435gqoi4cb9j2l"},{"title":"计算两个经纬度之间的直线距离","date":"2017-12-05T17:45:16.000Z","_content":"\n在针对经纬度之间距离的运算维基百科推荐使用 [Haversine](https://en.wikipedia.org/wiki/Haversine_formula) 算法\n\n<!-- more -->\n<!-- toc -->\n\n## Python\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom math import radians, cos, sin, asin, sqrt\n\ndef distance_between_points(lat1, lon1, lat2, lon2):\n    \"\"\"\n    Calculate the great circle distance between two points\n    on the earth (specified in decimal degrees)\n    \"\"\"\n    # 将十进制度数转化为弧度\n    lon1, lat1, lon2, lat2 = map(\n            radians, [float(lon1), float(lat1), float(lon2), float(lat2)])\n    # haversine 公式\n    dlon = lon2 - lon1\n    dlat = lat2 - lat1\n    a = sin(dlat / 2) ** 2 + cos(lat1) * cos(lat2) * sin(dlon / 2) ** 2\n    c = 2 * asin(sqrt(a))\n    r = 6371  # 地球平均半径，单位为公里\n    return c * r * 1000     # 结果单位米\n\nif __name__ == '__main__':\n    location = (39.7836455948, 116.5627747582, 39.7833570280, 116.5636974381)\n    print(distance_between_points(*location))   # ==> 85.12205329599756\n    ```\n\n## Javascript\n\n```javascript\nrad = function(x) {return x*Math.PI/180;}\n\ndistHaversine = function(p1, p2) {\n    var R = 6371; // earth's mean radius in km\n    var dLat  = rad(p2.lat() - p1.lat());\n    var dLong = rad(p2.lng() - p1.lng());\n\n    var a = Math.sin(dLat/2) * Math.sin(dLat/2) +\n        Math.cos(rad(p1.lat())) * Math.cos(rad(p2.lat())) *\n        Math.sin(dLong/2) * Math.sin(dLong/2);\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n    var d = R * c;\n\n    return d.toFixed(3);\n\n}\n```\n\n## Excel\n\n```bash\n# C2, D2 = lat1, lng1\n# F2, G2 = lat2, lng2\n=6371004*SQRT(POWER(COS(C2*PI()/180)*(G2*PI()/180-D2*PI()/180),2)+POWER((F2*PI()/180-C2*PI()/180),2))\n```\n\n## 参考\n\n- [Calculate distance, bearing and more between Latitude/Longitude points](http://www.movable-type.co.uk/scripts/latlong.html)\n","source":"_posts/2017-12-05-distance-between-points.md","raw":"---\ntitle: 计算两个经纬度之间的直线距离\ndate: 2017-12-05 17:45:16\ntags: [算法, python, javascript]\n---\n\n在针对经纬度之间距离的运算维基百科推荐使用 [Haversine](https://en.wikipedia.org/wiki/Haversine_formula) 算法\n\n<!-- more -->\n<!-- toc -->\n\n## Python\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom math import radians, cos, sin, asin, sqrt\n\ndef distance_between_points(lat1, lon1, lat2, lon2):\n    \"\"\"\n    Calculate the great circle distance between two points\n    on the earth (specified in decimal degrees)\n    \"\"\"\n    # 将十进制度数转化为弧度\n    lon1, lat1, lon2, lat2 = map(\n            radians, [float(lon1), float(lat1), float(lon2), float(lat2)])\n    # haversine 公式\n    dlon = lon2 - lon1\n    dlat = lat2 - lat1\n    a = sin(dlat / 2) ** 2 + cos(lat1) * cos(lat2) * sin(dlon / 2) ** 2\n    c = 2 * asin(sqrt(a))\n    r = 6371  # 地球平均半径，单位为公里\n    return c * r * 1000     # 结果单位米\n\nif __name__ == '__main__':\n    location = (39.7836455948, 116.5627747582, 39.7833570280, 116.5636974381)\n    print(distance_between_points(*location))   # ==> 85.12205329599756\n    ```\n\n## Javascript\n\n```javascript\nrad = function(x) {return x*Math.PI/180;}\n\ndistHaversine = function(p1, p2) {\n    var R = 6371; // earth's mean radius in km\n    var dLat  = rad(p2.lat() - p1.lat());\n    var dLong = rad(p2.lng() - p1.lng());\n\n    var a = Math.sin(dLat/2) * Math.sin(dLat/2) +\n        Math.cos(rad(p1.lat())) * Math.cos(rad(p2.lat())) *\n        Math.sin(dLong/2) * Math.sin(dLong/2);\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n    var d = R * c;\n\n    return d.toFixed(3);\n\n}\n```\n\n## Excel\n\n```bash\n# C2, D2 = lat1, lng1\n# F2, G2 = lat2, lng2\n=6371004*SQRT(POWER(COS(C2*PI()/180)*(G2*PI()/180-D2*PI()/180),2)+POWER((F2*PI()/180-C2*PI()/180),2))\n```\n\n## 参考\n\n- [Calculate distance, bearing and more between Latitude/Longitude points](http://www.movable-type.co.uk/scripts/latlong.html)\n","slug":"distance-between-points","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5500465gqom892e3hr"},{"title":"Vim 高级功能 Operator-Pending 映射","date":"2017-12-02T10:25:32.000Z","_content":"\n在文章 [Vim 高级功能 Mapping 映射](/2017/12/01/vim-mappings/) 中我介绍了映射功能，今天这篇来介绍更高级的 Operator-Pending 映射\n\n<!-- more --><!-- toc -->\n![/images/operator.gif](/images/operator.gif)\n\n## 基础操作\n我们还是先来看效果，在图中我们做了两件事\n- 快速替换输入括号中的文本\n- 快速选中一个段落\n这两个操作都用到了 Operator-Pending 映射，这个映射的本质是一个 Operator（操作）命令，再输入一个 Movement （移动）命令，这个操作命令会从当前位置开始，到移动命令结束为止。\n\n常用的 Operator（操作）命令有 `d, c, y`，常用的组合有\n```vim\ndw      \" 删除  到下个单词开始\nde      \" 删除  到当前单词结束\ndiw     \" 删除  当前单词\ndip     \" 高亮  当前段落内容\nci(     \" 修改  括号内的内容（光标要在括号内）\nyt,     \" 复制  到逗号\n```\n以上提到的 Operator 命令和 Movement 命令可以任意组合，实现想要的效果。\n\n## Movement\nVim 灵活性决定它是不会限制我们做自己想做的事情，同样的我们可以任意修改自己想要的 Movement 命令，先来看一个简单例子\n```vim\nonoremap , t,\n```\n另外我们准备这样一段文本\n```vim\nHello, World\n```\n将光标放到这行开头，输入 `d,`，会发现他删除到逗号之前的内容，因为我们替换了上边提到的官方移动操作\n\n## 自定义 Movement\n在了解到基本规则后，我们开始自定义 Movement 命令，开始之前我们还需要一点小思路， Movement 是跟在 `d, c, y` 之后出现，他们都有一个共同点，需要操作一个可视区的部分，所以不管移动的开始和结束在哪都需要先进入可视模式\n\n```markdown\n---\ntitle: Vim 高级功能 Operator-Pending 映射\ndate: 2017-12-02 10:25:32\ntags: [vim]\n---\n```\n\n这个是 hexo 文章的文件头，每次新建文章后我都需要手动找到标题的位置，并将默认标题替换成我想要的，我想要通过修改 Movement 一步修改\n```vim\nonoremap ih :<c-u>normal! ggjf:llvg_<cr>\n```\n先将这个它复制到你的配置文件中，然后按下 `cih` 试试效果，如果你已经试过，我们来谈谈它是怎样做到的，开头的 `:<c-u>normal!` 先不多说，你只需要知道它可以让后边的命令可以在 normal 模式进行，然后剩下的命令我们做了这样几件事\n- `ggjf` 跳到第一行，再下移一行，查找 `:`\n- `llv` 右移两格，进入可视模式\n- `g_` 将可视区域移动到当前行最后一个非空白字符，`$` 会包含回车符，所以不用它\n- `<cr>` 因为这个条命令其实是在 command 模式中进行的，所以需要回车返回结果\n\n了解了这些，你已经可以写一些简单的映射来丰富自己的 `~/.vimrc`，至于刚才我们没有提到的部分，我会在以后更新出来。\n","source":"_posts/2017-12-02-operator-pending.md","raw":"---\ntitle: Vim 高级功能 Operator-Pending 映射\ndate: 2017-12-02 10:25:32\ntags: [vim]\n---\n\n在文章 [Vim 高级功能 Mapping 映射](/2017/12/01/vim-mappings/) 中我介绍了映射功能，今天这篇来介绍更高级的 Operator-Pending 映射\n\n<!-- more --><!-- toc -->\n![/images/operator.gif](/images/operator.gif)\n\n## 基础操作\n我们还是先来看效果，在图中我们做了两件事\n- 快速替换输入括号中的文本\n- 快速选中一个段落\n这两个操作都用到了 Operator-Pending 映射，这个映射的本质是一个 Operator（操作）命令，再输入一个 Movement （移动）命令，这个操作命令会从当前位置开始，到移动命令结束为止。\n\n常用的 Operator（操作）命令有 `d, c, y`，常用的组合有\n```vim\ndw      \" 删除  到下个单词开始\nde      \" 删除  到当前单词结束\ndiw     \" 删除  当前单词\ndip     \" 高亮  当前段落内容\nci(     \" 修改  括号内的内容（光标要在括号内）\nyt,     \" 复制  到逗号\n```\n以上提到的 Operator 命令和 Movement 命令可以任意组合，实现想要的效果。\n\n## Movement\nVim 灵活性决定它是不会限制我们做自己想做的事情，同样的我们可以任意修改自己想要的 Movement 命令，先来看一个简单例子\n```vim\nonoremap , t,\n```\n另外我们准备这样一段文本\n```vim\nHello, World\n```\n将光标放到这行开头，输入 `d,`，会发现他删除到逗号之前的内容，因为我们替换了上边提到的官方移动操作\n\n## 自定义 Movement\n在了解到基本规则后，我们开始自定义 Movement 命令，开始之前我们还需要一点小思路， Movement 是跟在 `d, c, y` 之后出现，他们都有一个共同点，需要操作一个可视区的部分，所以不管移动的开始和结束在哪都需要先进入可视模式\n\n```markdown\n---\ntitle: Vim 高级功能 Operator-Pending 映射\ndate: 2017-12-02 10:25:32\ntags: [vim]\n---\n```\n\n这个是 hexo 文章的文件头，每次新建文章后我都需要手动找到标题的位置，并将默认标题替换成我想要的，我想要通过修改 Movement 一步修改\n```vim\nonoremap ih :<c-u>normal! ggjf:llvg_<cr>\n```\n先将这个它复制到你的配置文件中，然后按下 `cih` 试试效果，如果你已经试过，我们来谈谈它是怎样做到的，开头的 `:<c-u>normal!` 先不多说，你只需要知道它可以让后边的命令可以在 normal 模式进行，然后剩下的命令我们做了这样几件事\n- `ggjf` 跳到第一行，再下移一行，查找 `:`\n- `llv` 右移两格，进入可视模式\n- `g_` 将可视区域移动到当前行最后一个非空白字符，`$` 会包含回车符，所以不用它\n- `<cr>` 因为这个条命令其实是在 command 模式中进行的，所以需要回车返回结果\n\n了解了这些，你已经可以写一些简单的映射来丰富自己的 `~/.vimrc`，至于刚才我们没有提到的部分，我会在以后更新出来。\n","slug":"operator-pending","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5600485gqokg05nwcp"},{"title":"Java 编译命令","date":"2017-12-07T14:36:29.000Z","_content":"\n在刚学 Java 那会儿老师一再告诫要先用 Text 文本编辑程序，并能手动编译运行才行，因为只有这样才能搞清楚它的编译原理。然而实际开发中因为各种 IDE 开发工具的介入，Java 的编译不再成为我们关注的重点，在接触 Python 的一年后，我发现我“不会” Java 了，除了在 IDEA 上点击个按钮跑程序外，我不会手动编译一个多包引用的程序了。这让我很惶恐，借着想要抛弃 IDE ，拥抱 Vim 的机会，我来总结下 Java 编译命令。\n\n<!-- more --><!-- toc -->\n## Hello World\n先从最简单的 `Hello World` 开始，创建 `Main.java` 文件内容如下\n```java\npublic class Main {\n    public static void main(String[] args) {\n        System.out.println(\"Hello World!\");\n    }\n}\n```\n通过 `javac` 进行编译\n```bash\n$ javac Main.java\n$ java Main\n```\n```bash\nHello World!\n```\n所有学 Java 的人都是从这开始的，我不多说。如果我们的程序都是这样的单文件就好了，但是 Java 有包的概念，一个一个程序封装在包里等待其他程序调用，就像下边的文件结构一样。\n## 指定 classpath\n```bash\nproject--|--src--|--Main.java\n                 |--common--|--Utils.java\n```\n`Utils.java` 内容如下\n```java\npackage common;\n\npublic class Utils {\n    public static String getName(){\n        return \"wxnacy\";\n    }\n}\n```\n此时 `Main.java` 文件内容如下\n```java\nimport common.Utils;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        System.out.println(\"Hello World!\");\n        String name = Utils.getName();\n        System.out.println(name);\n    }\n}\n```\n这次我们进入 `project` 目录并执行 `javac src/Main.java`\n```bash\nsrc/Main.java:1: 错误: 程序包common不存在\nimport common.Utils;\n             ^\nsrc/Main.java:7: 错误: 找不到符号\nString name = Utils.getName();\n                    ^\n符号:   变量 Utils\n位置: 类 Main\n2 个错误\n```\n报错了，找不到包，因为我们还没有编译它所需要的 `Utils.java` 程序，这时我们引入一个新的参数 `-classpath, -cp` ，我们需要先编译 `Utils.java` 并通过该参数指定 class 文件所在位置\n```bash\njavac src/common/Utils.java     # 编译 Utils.java\n# 在 src/common 目录下生成 Utils.class\njavac -cp src src/Main.java     # 指定 classpath 为 src 并编译 Main.java \njava -cp src Main               # 指定 classpath 并运行\n```\n```bash\nHello World!\nwxnacy\n```\n这次我们得到了想要结果，但是运行会发现，这样的生成的 class 文件到处都是，这不是我们想要的，我们希望它能把所有的 class 生成到一个文件中，由此需要在引入一个参数 `-d` 用来指定生成目录\n## 指定生成目录\n```bash\nmkdir target\njavac -cp target -d target src/common/Utils.java\njavac -cp target -d target src/Main.java\njava -cp target Main\n```\n我们创建 `target` 目录，并指定该目录，这样生成的 class 文件都会在 target 中看到，源码与编译结果分离就是我们想要的。现在想想还差什么吗，把它放到实际开发中会怎么样呢？我扫了眼以前的项目，最少的也有几十个 java 文件，我们怎么能把那么多的文件的引用先后顺序都罗列出来呢？还好 javac 帮我解决了这个问题\n```bash\njavac -cp target -d target src/Main.java src/common/Utils.java\n```\n```bash\njavac -cp target -d target @source.txt\n# source.txt\n# src/Main.java\n# src/common/Utils.java\n```\n`javac` 可以接受多个文件，这时我们不用在关心他们的调用顺序，程序会自动根据需要来编译，它也可以接受一个 `source.txt` 文件跟在 `@` 后，内容是源码文件路径的列表。\n\n现在我们来回顾一下，多包，源码分离，自动处理编译顺序，似乎都解决了。好了，我知道你要说还是不方便，那么多个源码文件，我不能每次编译都罗列一遍或者手动添加到 `source.txt` 中吧，确实，我不止一次说过，**懒是第一生产力**，我们还要处理的更方便一些，这次我们需要写一些 bash 脚本来帮忙了\n## 编写编译脚本\n```bash\n$ touch run.sh\n$ chmod +x run.sh\n$ vim run.sh\n```\n```bash\n#!/usr/bin/env bash\n\nSOURCE_PATH=src\nVIM_PROJECT_HOME=.vim\nTARGET=target\nCLASS_PATH=${TARGET}/classes\nSOURCE_TXT=${VIM_PROJECT_HOME}/source.txt\n\nlist_file(){\n    # 遍历源码目录并输出到 ${SOURCE_TXT} 中\n    for file in `ls $1`\n    do\n        if test -f $file\n        then\n            echo $file >> ${SOURCE_TXT}\n        else\n            list_file $1/$file\n        fi\n    done\n}\ncompile(){\n    # 编译\n    if [ ! -d \"${VIM_PROJECT_HOME}\"  ]; then\n        mkdir ${VIM_PROJECT_HOME}\n    fi\n    if [ ! -d \"${TARGET}\"  ]; then\n        mkdir ${TARGET}\n    fi\n    rm -rf ${CLASS_PATH}\n    if [ ! -d \"${CLASS_PATH}\"  ]; then\n        mkdir ${CLASS_PATH}\n    fi\n    rm -rf ${SOURCE_TXT}\n    touch ${SOURCE_TXT}\n    list_file ${SOURCE_PATH}\n    cat ${SOURCE_TXT}\n    javac -cp ${CLASS_PATH} -d ${CLASS_PATH} @${SOURCE_TXT}\n}\ncompile\njava -cp ${CLASS_PATH} Main\n```\n```bash\nHello World!\nwxnacy\n```\n在项目根目录下进行这些操作，如果你看到最后的输出，说明你成功了。这个脚本的编写不在我们本次探讨的范围，你只需要知道 `list_file()` 方法就是在做我们刚才说的自动列出源码文件地址列表，整个脚本做到到了编译项目，并运行 `Main.java` 的目的。如果你还对这个脚本的编写感兴趣，请关注我其他的文章。\n","source":"_posts/2017-12-07-java-compile.md","raw":"---\ntitle: Java 编译命令\ndate: 2017-12-07 14:36:29\ntags: [java]\n---\n\n在刚学 Java 那会儿老师一再告诫要先用 Text 文本编辑程序，并能手动编译运行才行，因为只有这样才能搞清楚它的编译原理。然而实际开发中因为各种 IDE 开发工具的介入，Java 的编译不再成为我们关注的重点，在接触 Python 的一年后，我发现我“不会” Java 了，除了在 IDEA 上点击个按钮跑程序外，我不会手动编译一个多包引用的程序了。这让我很惶恐，借着想要抛弃 IDE ，拥抱 Vim 的机会，我来总结下 Java 编译命令。\n\n<!-- more --><!-- toc -->\n## Hello World\n先从最简单的 `Hello World` 开始，创建 `Main.java` 文件内容如下\n```java\npublic class Main {\n    public static void main(String[] args) {\n        System.out.println(\"Hello World!\");\n    }\n}\n```\n通过 `javac` 进行编译\n```bash\n$ javac Main.java\n$ java Main\n```\n```bash\nHello World!\n```\n所有学 Java 的人都是从这开始的，我不多说。如果我们的程序都是这样的单文件就好了，但是 Java 有包的概念，一个一个程序封装在包里等待其他程序调用，就像下边的文件结构一样。\n## 指定 classpath\n```bash\nproject--|--src--|--Main.java\n                 |--common--|--Utils.java\n```\n`Utils.java` 内容如下\n```java\npackage common;\n\npublic class Utils {\n    public static String getName(){\n        return \"wxnacy\";\n    }\n}\n```\n此时 `Main.java` 文件内容如下\n```java\nimport common.Utils;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        System.out.println(\"Hello World!\");\n        String name = Utils.getName();\n        System.out.println(name);\n    }\n}\n```\n这次我们进入 `project` 目录并执行 `javac src/Main.java`\n```bash\nsrc/Main.java:1: 错误: 程序包common不存在\nimport common.Utils;\n             ^\nsrc/Main.java:7: 错误: 找不到符号\nString name = Utils.getName();\n                    ^\n符号:   变量 Utils\n位置: 类 Main\n2 个错误\n```\n报错了，找不到包，因为我们还没有编译它所需要的 `Utils.java` 程序，这时我们引入一个新的参数 `-classpath, -cp` ，我们需要先编译 `Utils.java` 并通过该参数指定 class 文件所在位置\n```bash\njavac src/common/Utils.java     # 编译 Utils.java\n# 在 src/common 目录下生成 Utils.class\njavac -cp src src/Main.java     # 指定 classpath 为 src 并编译 Main.java \njava -cp src Main               # 指定 classpath 并运行\n```\n```bash\nHello World!\nwxnacy\n```\n这次我们得到了想要结果，但是运行会发现，这样的生成的 class 文件到处都是，这不是我们想要的，我们希望它能把所有的 class 生成到一个文件中，由此需要在引入一个参数 `-d` 用来指定生成目录\n## 指定生成目录\n```bash\nmkdir target\njavac -cp target -d target src/common/Utils.java\njavac -cp target -d target src/Main.java\njava -cp target Main\n```\n我们创建 `target` 目录，并指定该目录，这样生成的 class 文件都会在 target 中看到，源码与编译结果分离就是我们想要的。现在想想还差什么吗，把它放到实际开发中会怎么样呢？我扫了眼以前的项目，最少的也有几十个 java 文件，我们怎么能把那么多的文件的引用先后顺序都罗列出来呢？还好 javac 帮我解决了这个问题\n```bash\njavac -cp target -d target src/Main.java src/common/Utils.java\n```\n```bash\njavac -cp target -d target @source.txt\n# source.txt\n# src/Main.java\n# src/common/Utils.java\n```\n`javac` 可以接受多个文件，这时我们不用在关心他们的调用顺序，程序会自动根据需要来编译，它也可以接受一个 `source.txt` 文件跟在 `@` 后，内容是源码文件路径的列表。\n\n现在我们来回顾一下，多包，源码分离，自动处理编译顺序，似乎都解决了。好了，我知道你要说还是不方便，那么多个源码文件，我不能每次编译都罗列一遍或者手动添加到 `source.txt` 中吧，确实，我不止一次说过，**懒是第一生产力**，我们还要处理的更方便一些，这次我们需要写一些 bash 脚本来帮忙了\n## 编写编译脚本\n```bash\n$ touch run.sh\n$ chmod +x run.sh\n$ vim run.sh\n```\n```bash\n#!/usr/bin/env bash\n\nSOURCE_PATH=src\nVIM_PROJECT_HOME=.vim\nTARGET=target\nCLASS_PATH=${TARGET}/classes\nSOURCE_TXT=${VIM_PROJECT_HOME}/source.txt\n\nlist_file(){\n    # 遍历源码目录并输出到 ${SOURCE_TXT} 中\n    for file in `ls $1`\n    do\n        if test -f $file\n        then\n            echo $file >> ${SOURCE_TXT}\n        else\n            list_file $1/$file\n        fi\n    done\n}\ncompile(){\n    # 编译\n    if [ ! -d \"${VIM_PROJECT_HOME}\"  ]; then\n        mkdir ${VIM_PROJECT_HOME}\n    fi\n    if [ ! -d \"${TARGET}\"  ]; then\n        mkdir ${TARGET}\n    fi\n    rm -rf ${CLASS_PATH}\n    if [ ! -d \"${CLASS_PATH}\"  ]; then\n        mkdir ${CLASS_PATH}\n    fi\n    rm -rf ${SOURCE_TXT}\n    touch ${SOURCE_TXT}\n    list_file ${SOURCE_PATH}\n    cat ${SOURCE_TXT}\n    javac -cp ${CLASS_PATH} -d ${CLASS_PATH} @${SOURCE_TXT}\n}\ncompile\njava -cp ${CLASS_PATH} Main\n```\n```bash\nHello World!\nwxnacy\n```\n在项目根目录下进行这些操作，如果你看到最后的输出，说明你成功了。这个脚本的编写不在我们本次探讨的范围，你只需要知道 `list_file()` 方法就是在做我们刚才说的自动列出源码文件地址列表，整个脚本做到到了编译项目，并运行 `Main.java` 的目的。如果你还对这个脚本的编写感兴趣，请关注我其他的文章。\n","slug":"java-compile","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a57004b5gqoaswich9f"},{"title":"如何解析地址参数","date":"2017-12-08T13:48:12.000Z","_content":"\n在 React 之前 html 页面想要获取当前地址参数，只能通过静态解析的方式在获取，列举几种语言的获取方式\n\n<!-- more --><!-- toc -->\n## Javascript\n```javascript\nfunction getValue(key) {\n    var name = key + \"=\";\n    var str = window.location.search;\n    var beginIndex = str.indexOf(\"?\" + name);\n    if (beginIndex == -1) {\n        beginIndex = str.indexOf(\"&\" + name);\n    }\n    if (beginIndex != -1) {\n        var pos_start = beginIndex + name.length + 1;\n        var pos_end = str.indexOf(\"&\", pos_start);\n        if (pos_end == -1) {\n            return decodeURIComponent(str.substring(pos_start));\n        } else {\n            return decodeURIComponent(str.substring(pos_start, pos_end));\n        }\n    }\n}\n```\n\n## Python\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef get_value(url, k):\n    \"\"\"获取地址中参数值\"\"\"\n    nk = '{}='.format(k)\n    if nk not in url:\n        return None\n\n    b = url.find(nk) + len(nk)  # 获取开始位置\n    e = url.find('&', b) if url.find('&', b) != -1 else len(url)    # 结束位置\n    v = url[b:e]\n    return v\n```\n\n## Java\n```java\npublic static String getValue(String url, String key){\n    String k = key + \"=\";\n    int begin = url.indexOf(k);\n    if(begin == -1){\n        return null;\n    }\n    begin = begin + k.length();\n    int end = url.indexOf(\"&\", begin);\n    if(end == -1){\n        return url.substring(begin);\n    }else {\n        return url.substring(begin, end);\n    }\n}\n```\n","source":"_posts/2017-12-08-parse-url-params.md","raw":"---\ntitle: 如何解析地址参数\ndate: 2017-12-08 13:48:12\ntags: [算法, javascript, java, python]\n---\n\n在 React 之前 html 页面想要获取当前地址参数，只能通过静态解析的方式在获取，列举几种语言的获取方式\n\n<!-- more --><!-- toc -->\n## Javascript\n```javascript\nfunction getValue(key) {\n    var name = key + \"=\";\n    var str = window.location.search;\n    var beginIndex = str.indexOf(\"?\" + name);\n    if (beginIndex == -1) {\n        beginIndex = str.indexOf(\"&\" + name);\n    }\n    if (beginIndex != -1) {\n        var pos_start = beginIndex + name.length + 1;\n        var pos_end = str.indexOf(\"&\", pos_start);\n        if (pos_end == -1) {\n            return decodeURIComponent(str.substring(pos_start));\n        } else {\n            return decodeURIComponent(str.substring(pos_start, pos_end));\n        }\n    }\n}\n```\n\n## Python\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef get_value(url, k):\n    \"\"\"获取地址中参数值\"\"\"\n    nk = '{}='.format(k)\n    if nk not in url:\n        return None\n\n    b = url.find(nk) + len(nk)  # 获取开始位置\n    e = url.find('&', b) if url.find('&', b) != -1 else len(url)    # 结束位置\n    v = url[b:e]\n    return v\n```\n\n## Java\n```java\npublic static String getValue(String url, String key){\n    String k = key + \"=\";\n    int begin = url.indexOf(k);\n    if(begin == -1){\n        return null;\n    }\n    begin = begin + k.length();\n    int end = url.indexOf(\"&\", begin);\n    if(end == -1){\n        return url.substring(begin);\n    }else {\n        return url.substring(begin, end);\n    }\n}\n```\n","slug":"parse-url-params","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a58004d5gqo195saov6"},{"title":"Python 处理 Linux 命令","date":"2017-12-09T10:36:35.000Z","_content":"\n在 Python 开发中经常会需要处理一些 Linux 命令，下面介绍几种常见的处理此类命令模块，以下命令均在 `ipython` 中进行\n\n<!-- more --><!-- toc -->\n## os 模块\n```python\nIn [5]: import os\nIn [5]: os.system('echo \"Hello World\"')\nHello World\nOut[5]: 0\n```\n使用 `system()` 方法可以执行命令，但是方法返回的结果是 0，在大多数情况下，这不是我们想要的\n```python\nIn [6]: os.popen('echo \"Hello World\"')\nOut[6]: <open file 'echo \"Hello World\"', mode 'r' at 0x10faa5c00>\n```\n`popen()` 方法可以返回结果，但是返回的是一个 file 类型，通过对返回值在使用 `read()` 或 `readlines()` 返回即可拿到结果\n```python\nIn [7]: os.popen('echo \"Hello World\"').read()\nOut[7]: 'Hello World\\n'\n```\n\n## commands\nos 模块可以勉强达到我们想要的效果，但是用起来会很别扭，我们还可以使用 commands 模块提供的 `getstatusoutput(), getoutput()` 两个方法来完成任务\n```python\nIn [1]: import commands\n\nIn [2]: commands.getstatusoutput('ls')\nOut[2]:\n(0,\n 'README.md\\nTest.java\\nUser-Admin\\nUser-Api\\nUser-Base\\npom.xml\\nsrc\\ntarget\\nuser-center.iml')\n```\n`getstatusoutput()` 方法会返回一个元组 `(status, output)` 分别为执行状态和结果，这个结果是用字符串的形式将结果呈现出来，而 `getoutput()` 方法只返回结果\n\n```python\nIn [3]: commands.getoutput('ls')\nOut[3]: 'README.md\\nTest.java\\nUser-Admin\\nUser-Api\\nUser-Base\\npom.xml\\nsrc\\ntarget\\nuser-center.iml'\n```\n\n## subprocess\n在官方文档中 subprocess 模块是被用来替换上边提到的方法的，它可以开启子线程工作，比他们更加灵活。它有非常丰富的使用方法，这里简单介绍输出方法 `check_output()`\n```python\nIn [13]: import subprocess\n\nIn [14]: subprocess.check_output('ls')\nOut[14]: 'README.md\\nTest.java\\nUser-Admin\\nUser-Api\\nUser-Base\\npom.xml\\nsrc\\ntarget\\nuser-center.iml\\n'\n```\n简单的命令没有太大区别，但是执行一些复杂的方法会有所不同\n```python\nIn [15]: subprocess.check_output('echo \"hello world\"')\nOSError: [Errno 2] No such file or directory\n```\n在进行复杂命令时，该方法需要接收一个数组\n```python\nIn [16]: subprocess.check_output(['echo', 'hello world'])\nOut[16]: 'hello world\\n'\n```\n更多使用方法见[文档](https://docs.python.org/2/library/subprocess.html)\n","source":"_posts/2017-12-09-python-linux-cmd.md","raw":"---\ntitle: Python 处理 Linux 命令\ndate: 2017-12-09 10:36:35\ntags: [python, linux]\n---\n\n在 Python 开发中经常会需要处理一些 Linux 命令，下面介绍几种常见的处理此类命令模块，以下命令均在 `ipython` 中进行\n\n<!-- more --><!-- toc -->\n## os 模块\n```python\nIn [5]: import os\nIn [5]: os.system('echo \"Hello World\"')\nHello World\nOut[5]: 0\n```\n使用 `system()` 方法可以执行命令，但是方法返回的结果是 0，在大多数情况下，这不是我们想要的\n```python\nIn [6]: os.popen('echo \"Hello World\"')\nOut[6]: <open file 'echo \"Hello World\"', mode 'r' at 0x10faa5c00>\n```\n`popen()` 方法可以返回结果，但是返回的是一个 file 类型，通过对返回值在使用 `read()` 或 `readlines()` 返回即可拿到结果\n```python\nIn [7]: os.popen('echo \"Hello World\"').read()\nOut[7]: 'Hello World\\n'\n```\n\n## commands\nos 模块可以勉强达到我们想要的效果，但是用起来会很别扭，我们还可以使用 commands 模块提供的 `getstatusoutput(), getoutput()` 两个方法来完成任务\n```python\nIn [1]: import commands\n\nIn [2]: commands.getstatusoutput('ls')\nOut[2]:\n(0,\n 'README.md\\nTest.java\\nUser-Admin\\nUser-Api\\nUser-Base\\npom.xml\\nsrc\\ntarget\\nuser-center.iml')\n```\n`getstatusoutput()` 方法会返回一个元组 `(status, output)` 分别为执行状态和结果，这个结果是用字符串的形式将结果呈现出来，而 `getoutput()` 方法只返回结果\n\n```python\nIn [3]: commands.getoutput('ls')\nOut[3]: 'README.md\\nTest.java\\nUser-Admin\\nUser-Api\\nUser-Base\\npom.xml\\nsrc\\ntarget\\nuser-center.iml'\n```\n\n## subprocess\n在官方文档中 subprocess 模块是被用来替换上边提到的方法的，它可以开启子线程工作，比他们更加灵活。它有非常丰富的使用方法，这里简单介绍输出方法 `check_output()`\n```python\nIn [13]: import subprocess\n\nIn [14]: subprocess.check_output('ls')\nOut[14]: 'README.md\\nTest.java\\nUser-Admin\\nUser-Api\\nUser-Base\\npom.xml\\nsrc\\ntarget\\nuser-center.iml\\n'\n```\n简单的命令没有太大区别，但是执行一些复杂的方法会有所不同\n```python\nIn [15]: subprocess.check_output('echo \"hello world\"')\nOSError: [Errno 2] No such file or directory\n```\n在进行复杂命令时，该方法需要接收一个数组\n```python\nIn [16]: subprocess.check_output(['echo', 'hello world'])\nOut[16]: 'hello world\\n'\n```\n更多使用方法见[文档](https://docs.python.org/2/library/subprocess.html)\n","slug":"python-linux-cmd","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a59004g5gqoldq9p70r"},{"title":"Python 时间","date":"2017-12-10T17:17:46.000Z","_content":"\n在使用 Python 处理时间戳与系统时间转换时，遇到一些问题，解决后除了对问题的总结，也想把 Python 处理时间的各种情况都总结一下，慢慢更新补全，以便以后查阅\n\n<!-- more --><!-- toc -->\n## 获取时间戳\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport time\nfrom datetime import datetime\nfrom datetime import timezone\n\nprint(time.time())                                  # ==> 1 1512894925.029236\nprint(datetime.now().timestamp())                   # ==> 2 1512894925.029236\ndt = datetime.utcnow()\nprint(dt.replace(tzinfo=timezone.utc).timestamp())  # ==> 3 1512894925.029236\n```\n三种方法得到的结果都是一样的，之所以列举第三种这个麻烦的方法，是因为我之前存在一个误区，认为 `datetime.utcnow().timestamp()` 得到的结果就是 Unix 时间戳，详细请见我的文章 [Python 时间戳的坑](/2017/12/05/python-timestamp-keng/)\n\n## 时间戳转系统时间\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport time\nfrom datetime import datetime\n\nts = 1512894925\nprint(time.strftime(\"%Y-%m-%d %H:%M:%S\", time.localtime(ts)))\nprint(datetime.fromtimestamp(ts).strftime(\"%Y-%m-%d %H:%M:%S\"))\n```\n\n## 系统时间转时间戳\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport time\nfrom datetime import datetime\n\nt = '2017-12-10 16:37:17'\nprint(int(time.mktime(time.strptime(t, '%Y-%m-%d %H:%M:%S'))))\nprint(datetime.strptime(t, '%Y-%m-%d %H:%M:%S').timestamp())\n```\n## 时间格式化符号\n- %y 两位数的年份表示（00-99）\n- %Y 四位数的年份表示（000-9999）\n- %m 月份（01-12）\n- %d 月内中的一天（0-31）\n- %H 24小时制小时数（0-23）\n- %I 12小时制小时数（01-12）\n- %M 分钟数（00=59）\n- %S 秒（00-59）\n- %f 毫秒（000-999)\n- %a 本地简化星期名称\n- %A 本地完整星期名称\n- %b 本地简化的月份名称\n- %B 本地完整的月份名称\n- %c 本地相应的日期表示和时间表示\n- %j 年内的一天（001-366）\n- %p 本地A.M.或P.M.的等价符\n- %U 一年中的星期数（00-53）星期天为星期的开始\n- %w 星期（0-6），星期天为星期的开始\n- %W 一年中的星期数（00-53）星期一为星期的开始\n- %x 本地相应的日期表示\n- %X 本地相应的时间表示\n- %Z 当前时区的名称\n- %% %号本身\n\n## 使用技巧\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom datetime import date\n\nday = date(2018, 03, 25).timetuple()\n# 获取指定日期为当前星期的第几天\nprint(day.tm_wday + 1)  # 7\n# 获取指定日期为当年的第几天\nprint(day.tm_yday)      # 84\n```\n\n**date/time 转为 datetime**\n\n```python\n>>> from datetime import datetime\n>>> from datetime import date\n>>> datetime.combine(date.today(), datetime.min.time())\ndatetime.datetime(2018, 4, 28, 0, 0)\n```\n\n## 参考资料\n- [Python 日期和时间](http://www.runoob.com/python/python-date-time.html)\n","source":"_posts/2017-12-10-python-datetime.md","raw":"---\ntitle: Python 时间\ndate: 2017-12-10 17:17:46\ntags: [python]\n---\n\n在使用 Python 处理时间戳与系统时间转换时，遇到一些问题，解决后除了对问题的总结，也想把 Python 处理时间的各种情况都总结一下，慢慢更新补全，以便以后查阅\n\n<!-- more --><!-- toc -->\n## 获取时间戳\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport time\nfrom datetime import datetime\nfrom datetime import timezone\n\nprint(time.time())                                  # ==> 1 1512894925.029236\nprint(datetime.now().timestamp())                   # ==> 2 1512894925.029236\ndt = datetime.utcnow()\nprint(dt.replace(tzinfo=timezone.utc).timestamp())  # ==> 3 1512894925.029236\n```\n三种方法得到的结果都是一样的，之所以列举第三种这个麻烦的方法，是因为我之前存在一个误区，认为 `datetime.utcnow().timestamp()` 得到的结果就是 Unix 时间戳，详细请见我的文章 [Python 时间戳的坑](/2017/12/05/python-timestamp-keng/)\n\n## 时间戳转系统时间\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport time\nfrom datetime import datetime\n\nts = 1512894925\nprint(time.strftime(\"%Y-%m-%d %H:%M:%S\", time.localtime(ts)))\nprint(datetime.fromtimestamp(ts).strftime(\"%Y-%m-%d %H:%M:%S\"))\n```\n\n## 系统时间转时间戳\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport time\nfrom datetime import datetime\n\nt = '2017-12-10 16:37:17'\nprint(int(time.mktime(time.strptime(t, '%Y-%m-%d %H:%M:%S'))))\nprint(datetime.strptime(t, '%Y-%m-%d %H:%M:%S').timestamp())\n```\n## 时间格式化符号\n- %y 两位数的年份表示（00-99）\n- %Y 四位数的年份表示（000-9999）\n- %m 月份（01-12）\n- %d 月内中的一天（0-31）\n- %H 24小时制小时数（0-23）\n- %I 12小时制小时数（01-12）\n- %M 分钟数（00=59）\n- %S 秒（00-59）\n- %f 毫秒（000-999)\n- %a 本地简化星期名称\n- %A 本地完整星期名称\n- %b 本地简化的月份名称\n- %B 本地完整的月份名称\n- %c 本地相应的日期表示和时间表示\n- %j 年内的一天（001-366）\n- %p 本地A.M.或P.M.的等价符\n- %U 一年中的星期数（00-53）星期天为星期的开始\n- %w 星期（0-6），星期天为星期的开始\n- %W 一年中的星期数（00-53）星期一为星期的开始\n- %x 本地相应的日期表示\n- %X 本地相应的时间表示\n- %Z 当前时区的名称\n- %% %号本身\n\n## 使用技巧\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom datetime import date\n\nday = date(2018, 03, 25).timetuple()\n# 获取指定日期为当前星期的第几天\nprint(day.tm_wday + 1)  # 7\n# 获取指定日期为当年的第几天\nprint(day.tm_yday)      # 84\n```\n\n**date/time 转为 datetime**\n\n```python\n>>> from datetime import datetime\n>>> from datetime import date\n>>> datetime.combine(date.today(), datetime.min.time())\ndatetime.datetime(2018, 4, 28, 0, 0)\n```\n\n## 参考资料\n- [Python 日期和时间](http://www.runoob.com/python/python-date-time.html)\n","slug":"python-datetime","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5a004i5gqo2gca9sy6"},{"title":"获取时间戳及世界时间转换","date":"2017-12-09T19:30:07.000Z","_content":"<link rel='stylesheet' type='text/css' href='/css/ts.css'></link>\n现在的 Unix 时间戳: <span id=\"ts\"></span> <button onClick=\"doBegin()\" style=\"width: 50;\">开始</button> <button onClick=\"doEnd()\" style=\"width: 50;\">停止</button>\n现在的北京时间: <span id=\"bj\"></span>\n现在的 UTC 时间: <span id=\"utc\"></span>\n时间戳 <input id='yts' style=\"width: 110px;\" value=\"1512823433\"> 秒 <button onClick=\"doTsTrans()\" style=\"width: 110;\">转为北京时间</button> <span id='tbj' ></span>\n北京时间(YYYY/MM/dd HH:mm:ss) <input id='ybj' style=\"width: 185px;\" value=\"2017-12-09 21:23:52\"> 秒 <button onClick=\"doBjToTs1()\" style=\"width: 110;\">转为时间戳</button> <span id='tts' ></span>\n北京时间 <input id='y' style=\"width: 50px;\" value=\"2017\"> 年 <input id='M' class='m' value=\"12\"> 月 <input id='d' class='m' value=\"9\"> 日 <input id='h' class='m' value=\"21\"> 时 <input id='m' class='m' value=\"23\"> 分 <input id='s' class='m' value=\"52\"> 秒 <button onClick=\"doBjToTs2()\" style=\"width: 110;\">转为时间戳</button> <span id='tts2' ></span>\n\n<script async type=\"text/javascript\" src=\"/js/ts.min.js\"></script>\n<!-- more -->\n最近在做时间相关的功能，涉及到换算各个时区，干脆写了一个时间戳和北京时间转换的一个小工具，如上。顺便总结下几种语言在时间方面的操作\n\n<!-- toc -->\n## 获取时间戳\n### Javascript\n```javascript\nvar timestamp = Date.parse(new Date());     // ==> 1512825782000\nvar timestamp = (new Date()).valueOf();     // ==> 1512825782232\nvar timestamp=new Date().getTime();         // ==> 1512825782232\n```\n三个方法都可以获取时间戳，不同的地方在于第一种方法精确到秒，毫秒为用 0 补全，剩下两种方法结果是一致的\n\n### Java\n```java\nimport java.util.Date;\nimport java.util.Calendar;\n\n\nSystem.currentTimeMillis()              // 1 ==> 1512896121862\nnew Date().getTime()                    // 2 ==> 1512896121862\nCalendar.getInstance().getTimeInMillis()// 3 ==> 1512896121862\n```\n三个方法返回的结果是一致的，都精确到毫秒数。效率方面方法 1 最快，因为是直接获取机器的时间。方法 3 最慢，因为需要处理时区的问题。\n\n## 时间戳转系统时间\n### Javascript\n```javascript\nnew Date(timestamp * 1000);\n```\n这样获取到的时间是当前系统时区的时间，想要获取 UTC 时间需要手动算下偏移量\n```javascript\nvar offset = new Date().getTimezoneOffset()     // ==> -480 分钟\n```\n这个方法返回当前时区和 UTC 时间的偏移量，`-480分钟` 代表当前时区减去 480 分钟，即为 UTC 时间\n```javascript\nnew Date((ts + offset * 60) * 1000)             // ==> UTC 时间\n```\nJavascript 没有时间格式化方法，需要自己扩展，这个方法是从网上找的，相对其他方法是比较好的，推荐使用。\n```javascript\nDate.prototype.format=function(fmt) {\n    var o = {\n        \"M+\" : this.getMonth()+1, //月份\n        \"d+\" : this.getDate(), //日\n        \"h+\" : this.getHours()%12 == 0 ? 12 : this.getHours()%12, //小时\n        \"H+\" : this.getHours(), //小时\n        \"m+\" : this.getMinutes(), //分\n        \"s+\" : this.getSeconds(), //秒\n        \"q+\" : Math.floor((this.getMonth()+3)/3), //季度\n        \"S\" : this.getMilliseconds() //毫秒\n        };\n    var week = {\n        \"0\" : \"/u65e5\",\n        \"1\" : \"/u4e00\",\n        \"2\" : \"/u4e8c\",\n        \"3\" : \"/u4e09\",\n        \"4\" : \"/u56db\",\n        \"5\" : \"/u4e94\",\n        \"6\" : \"/u516d\"\n        };\n    if(/(y+)/.test(fmt)){\n            fmt=fmt.replace(RegExp.$1, (this.getFullYear()+\"\").substr(4 - RegExp.$1.length));\n        }\n    if(/(E+)/.test(fmt)){\n            fmt=fmt.replace(RegExp.$1, ((RegExp.$1.length>1) ? (RegExp.$1.length>2 ? \"/u661f/u671f\" : \"/u5468\") : \"\")+week[this.getDay()+\"\"]);\n        }\n    for(var k in o){\n            if(new RegExp(\"(\"+ k +\")\").test(fmt)){\n                        fmt = fmt.replace(RegExp.$1, (RegExp.$1.length==1) ? (o[k]) : ((\"00\"+ o[k]).substr((\"\"+ o[k]).length)));\n                    }\n        }\n    return fmt;\n};\n```\n\n## 系统时间转时间戳\n### Javascript\n```java\nMath.round(new Date('2017-12-10 10:21:12').getTime()/1000)\nMath.round(new Date('2017/12/10 10:21:12').getTime()/1000)\n```\n## 其他语言\n- [Python](/2017/12/10/python-datetime/)\n\n## 参考\n- [Unix时间戳转换工具](http://tool.chinaz.com/Tools/unixtime.aspx)\n- [世界时区查询](https://time.artjoey.com/cn/)\n- [世界协调时间](http://zh.thetimenow.com/utc/coordinated_universal_time)\n","source":"_posts/2017-12-09-timestamp.md","raw":"---\ntitle: 获取时间戳及世界时间转换\ndate: 2017-12-09 19:30:07\ntags: [算法, 工具, javascript]\n---\n<link rel='stylesheet' type='text/css' href='/css/ts.css'></link>\n现在的 Unix 时间戳: <span id=\"ts\"></span> <button onClick=\"doBegin()\" style=\"width: 50;\">开始</button> <button onClick=\"doEnd()\" style=\"width: 50;\">停止</button>\n现在的北京时间: <span id=\"bj\"></span>\n现在的 UTC 时间: <span id=\"utc\"></span>\n时间戳 <input id='yts' style=\"width: 110px;\" value=\"1512823433\"> 秒 <button onClick=\"doTsTrans()\" style=\"width: 110;\">转为北京时间</button> <span id='tbj' ></span>\n北京时间(YYYY/MM/dd HH:mm:ss) <input id='ybj' style=\"width: 185px;\" value=\"2017-12-09 21:23:52\"> 秒 <button onClick=\"doBjToTs1()\" style=\"width: 110;\">转为时间戳</button> <span id='tts' ></span>\n北京时间 <input id='y' style=\"width: 50px;\" value=\"2017\"> 年 <input id='M' class='m' value=\"12\"> 月 <input id='d' class='m' value=\"9\"> 日 <input id='h' class='m' value=\"21\"> 时 <input id='m' class='m' value=\"23\"> 分 <input id='s' class='m' value=\"52\"> 秒 <button onClick=\"doBjToTs2()\" style=\"width: 110;\">转为时间戳</button> <span id='tts2' ></span>\n\n<script async type=\"text/javascript\" src=\"/js/ts.min.js\"></script>\n<!-- more -->\n最近在做时间相关的功能，涉及到换算各个时区，干脆写了一个时间戳和北京时间转换的一个小工具，如上。顺便总结下几种语言在时间方面的操作\n\n<!-- toc -->\n## 获取时间戳\n### Javascript\n```javascript\nvar timestamp = Date.parse(new Date());     // ==> 1512825782000\nvar timestamp = (new Date()).valueOf();     // ==> 1512825782232\nvar timestamp=new Date().getTime();         // ==> 1512825782232\n```\n三个方法都可以获取时间戳，不同的地方在于第一种方法精确到秒，毫秒为用 0 补全，剩下两种方法结果是一致的\n\n### Java\n```java\nimport java.util.Date;\nimport java.util.Calendar;\n\n\nSystem.currentTimeMillis()              // 1 ==> 1512896121862\nnew Date().getTime()                    // 2 ==> 1512896121862\nCalendar.getInstance().getTimeInMillis()// 3 ==> 1512896121862\n```\n三个方法返回的结果是一致的，都精确到毫秒数。效率方面方法 1 最快，因为是直接获取机器的时间。方法 3 最慢，因为需要处理时区的问题。\n\n## 时间戳转系统时间\n### Javascript\n```javascript\nnew Date(timestamp * 1000);\n```\n这样获取到的时间是当前系统时区的时间，想要获取 UTC 时间需要手动算下偏移量\n```javascript\nvar offset = new Date().getTimezoneOffset()     // ==> -480 分钟\n```\n这个方法返回当前时区和 UTC 时间的偏移量，`-480分钟` 代表当前时区减去 480 分钟，即为 UTC 时间\n```javascript\nnew Date((ts + offset * 60) * 1000)             // ==> UTC 时间\n```\nJavascript 没有时间格式化方法，需要自己扩展，这个方法是从网上找的，相对其他方法是比较好的，推荐使用。\n```javascript\nDate.prototype.format=function(fmt) {\n    var o = {\n        \"M+\" : this.getMonth()+1, //月份\n        \"d+\" : this.getDate(), //日\n        \"h+\" : this.getHours()%12 == 0 ? 12 : this.getHours()%12, //小时\n        \"H+\" : this.getHours(), //小时\n        \"m+\" : this.getMinutes(), //分\n        \"s+\" : this.getSeconds(), //秒\n        \"q+\" : Math.floor((this.getMonth()+3)/3), //季度\n        \"S\" : this.getMilliseconds() //毫秒\n        };\n    var week = {\n        \"0\" : \"/u65e5\",\n        \"1\" : \"/u4e00\",\n        \"2\" : \"/u4e8c\",\n        \"3\" : \"/u4e09\",\n        \"4\" : \"/u56db\",\n        \"5\" : \"/u4e94\",\n        \"6\" : \"/u516d\"\n        };\n    if(/(y+)/.test(fmt)){\n            fmt=fmt.replace(RegExp.$1, (this.getFullYear()+\"\").substr(4 - RegExp.$1.length));\n        }\n    if(/(E+)/.test(fmt)){\n            fmt=fmt.replace(RegExp.$1, ((RegExp.$1.length>1) ? (RegExp.$1.length>2 ? \"/u661f/u671f\" : \"/u5468\") : \"\")+week[this.getDay()+\"\"]);\n        }\n    for(var k in o){\n            if(new RegExp(\"(\"+ k +\")\").test(fmt)){\n                        fmt = fmt.replace(RegExp.$1, (RegExp.$1.length==1) ? (o[k]) : ((\"00\"+ o[k]).substr((\"\"+ o[k]).length)));\n                    }\n        }\n    return fmt;\n};\n```\n\n## 系统时间转时间戳\n### Javascript\n```java\nMath.round(new Date('2017-12-10 10:21:12').getTime()/1000)\nMath.round(new Date('2017/12/10 10:21:12').getTime()/1000)\n```\n## 其他语言\n- [Python](/2017/12/10/python-datetime/)\n\n## 参考\n- [Unix时间戳转换工具](http://tool.chinaz.com/Tools/unixtime.aspx)\n- [世界时区查询](https://time.artjoey.com/cn/)\n- [世界协调时间](http://zh.thetimenow.com/utc/coordinated_universal_time)\n","slug":"timestamp","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5b004l5gqoenpn0sd8"},{"title":"Twitter Snowflask 64位自增id算法几个语言实现方法","date":"2017-12-11T18:33:16.000Z","_content":"> [Twitter-Snowflake](https://github.com/twitter/snowflake) 算法产生的背景相当简单，为了满足Twitter每秒上万条消息的请求，每条消息都必须分配一条唯一的id，这些id还需要一些大致的顺序（方便客户端排序），并且在分布式系统中不同机器产生的id必须不同。\n\n<!-- more -->\n\nSnowflask 算法在工作中经常会用，平常做开发涉及到需要生成自增 id，也会第一个想到这个算法，具体的算法详解 [Twitter-Snowflake，64位自增ID算法详解 ](http://www.lanindex.com/twitter-snowflake%EF%BC%8C64%E4%BD%8D%E8%87%AA%E5%A2%9Eid%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3/) 这篇文章做了详细介绍，我不在多做口舌，只是着重总结几种语言的实现方式，以便以后自己查阅。\n\n## Python\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport sys\nimport time\nimport random\nimport threading\n\n\nclass Snowflake(object):\n    region_id_bits = 2\n    worker_id_bits = 10\n    sequence_bits = 11\n\n    MAX_REGION_ID = -1 ^ (-1 << region_id_bits)\n    MAX_WORKER_ID = -1 ^ (-1 << worker_id_bits)\n    SEQUENCE_MASK = -1 ^ (-1 << sequence_bits)\n\n    WORKER_ID_SHIFT = sequence_bits\n    REGION_ID_SHIFT = sequence_bits + worker_id_bits\n    TIMESTAMP_LEFT_SHIFT = (sequence_bits + worker_id_bits + region_id_bits)\n\n    def __init__(self, worker_id, region_id=0):\n        self.twepoch = 1495977602000\n        self.last_timestamp = -1\n        self.sequence = 0\n\n        # assert 0 <= worker_id <= Snowflake.MAX_WORKER_ID\n        # assert 0 <= region_id <= Snowflake.MAX_REGION_ID\n\n        self.worker_id = worker_id\n        self.region_id = region_id\n\n        self.lock = threading.Lock()\n\n    def generate(self, bus_id=None):\n        return self.next_id(\n            True if bus_id is not None else False,\n            bus_id if bus_id is not None else 0\n        )\n\n    def next_id(self, is_padding, bus_id):\n        with self.lock:\n            timestamp = self.get_time()\n            padding_num = self.region_id\n\n            if is_padding:\n                padding_num = bus_id\n\n            if timestamp < self.last_timestamp:\n                try:\n                    raise ValueError(\n                        'Clock moved backwards. Refusing to'\n                        'generate id for {0} milliseconds.'.format(\n                            self.last_timestamp - timestamp\n                        )\n                    )\n                except ValueError:\n                    print(sys.exc_info[2])\n\n            if timestamp == self.last_timestamp:\n                self.sequence = (\n                                    self.sequence + 1) & Snowflake.SEQUENCE_MASK\n                if self.sequence == 0:\n                    timestamp = self.tail_next_millis(self.last_timestamp)\n            else:\n                self.sequence = random.randint(0, 9)\n\n            self.last_timestamp = timestamp\n\n            res_id = (\n                (\n                    timestamp - self.twepoch) << Snowflake.TIMESTAMP_LEFT_SHIFT |\n                (padding_num << Snowflake.REGION_ID_SHIFT) |\n                (self.worker_id << Snowflake.WORKER_ID_SHIFT) |\n                self.sequence\n            )\n\n            return res_id\n\n    def tail_next_millis(self, last_timestamp):\n        timestamp = self.get_time()\n        while timestamp <= last_timestamp:\n            timestamp = self.get_time()\n        return timestamp\n\n    def get_time(self):\n        return int(time.time() * 1000)\n\n\n\nif __name__ == '__main__':\n    print(Snowflake(0).generate())\n```\n## Java\n```java\npackage common;\n\n/**\n * timestamp + bizId + workId + sequence\n * */\npublic class UKeyWorker{\n\n    private final static long twepoch = 1404878190828L;\n\n    //机器标识位数（每种业务支持多少worker-thread）\n    private final static long workerIdBits = 5L;\n    //业务标识位数（预留）\n    private final static long bizIdBits = 6L;\n\n    //机器标识最大值\n    private final static long maxWorkerId = -1L ^ -1L << UKeyWorker.workerIdBits;\n    //业务标识最大值\n    private final static long maxBizId = -1L ^ -1L << UKeyWorker.bizIdBits;\n\n    //毫秒内自增位数\n    private final static long sequenceBits = 12L;\n\n    // 机器标识偏左移\n    private final static long workerIdShift = UKeyWorker.sequenceBits;\n    // 业务标识偏左移\n    private final static long bizIdShift = UKeyWorker.sequenceBits\n            + UKeyWorker.workerIdBits;\n    // 时间毫秒偏左移\n    private final static long timestampShift = UKeyWorker.sequenceBits\n            + UKeyWorker.workerIdBits + UKeyWorker.bizIdBits;\n\n    //序列号Mask\n    private final static long sequenceMask = -1L ^ -1L << UKeyWorker.sequenceBits;\n    //机器标识Mask\n    private final static long workerIdMask = UKeyWorker.maxWorkerId << UKeyWorker.workerIdShift;\n    //业务标识Mask\n    private final static long bizIdMask = UKeyWorker.maxBizId << UKeyWorker.bizIdShift;\n    //时间戳Mask\n    private final static long timestampMask = Long.MAX_VALUE\n            ^ (UKeyWorker.sequenceMask | UKeyWorker.workerIdMask | UKeyWorker.bizIdMask);\n\n    //最后的时间戳\n    private long lastTimestamp = -1L;\n\n    private final long workerId;\n    private final long bizId;\n\n    private long sequence = 0L;\n\n    public UKeyWorker(final long workerId, final long bizId) {\n        super();\n        if (workerId > UKeyWorker.maxWorkerId || workerId < 0) {\n            throw new IllegalArgumentException(String.format(\n                    \"worker Id can't be greater than %d or less than 0\",\n                    UKeyWorker.maxWorkerId));\n        }\n        this.workerId = workerId;\n\n        if (bizId > UKeyWorker.maxBizId || workerId < 0) {\n            throw new IllegalArgumentException(String.format(\n                    \"biz Id can't be greater than %d or less than 0\",\n                    UKeyWorker.maxBizId));\n        }\n        this.bizId = bizId;\n\n    }\n\n    public long getId() {\n        long id = nextId();\n        return id;\n    }\n\n    public synchronized long nextId() {\n        long timestamp = this.timeGen();\n\n        // 时间发生错误\n        if (timestamp < this.lastTimestamp) {\n            throw new RuntimeException(\n                    String\n                            .format(\n                                    \"Clock moved backwards.  Refusing to generate id for %d milliseconds\",\n                                    this.lastTimestamp - timestamp));\n        }\n\n        //毫秒内\n        if (this.lastTimestamp == timestamp) {\n            this.sequence = (this.sequence + 1) & UKeyWorker.sequenceMask;\n            if (this.sequence == 0) {\n                timestamp = this.tilNextMillis(this.lastTimestamp);\n            }\n        } else {\n            this.sequence = 0;\n        }\n\n        this.lastTimestamp = timestamp;\n\n        //计算\n        long nextId = ((timestamp - UKeyWorker.twepoch << UKeyWorker.timestampShift)) |\n            (this.bizId << UKeyWorker.bizIdShift) |\n            (this.workerId << UKeyWorker.workerIdShift) |\n            (this.sequence);\n\n        return nextId;\n    }\n\n    private long tilNextMillis(final long lastTimestamp) {\n        long timestamp = this.timeGen();\n        while (timestamp <= lastTimestamp) {\n            timestamp = this.timeGen();\n        }\n        return timestamp;\n    }\n\n    private long timeGen() {\n        return System.currentTimeMillis();\n    }\n\n    public static long getSequence(final long id){\n        return (id & UKeyWorker.sequenceMask);\n    }\n\n    public static long getWorkerId(final long id){\n        return (id & UKeyWorker.workerIdMask) >> UKeyWorker.workerIdShift;\n    }\n\n    public static long getBizId(final long id){\n        return (id & UKeyWorker.bizIdMask) >> UKeyWorker.bizIdShift ;\n    }\n\n    public static long getTimestamp(final long id) {\n        return (id & UKeyWorker.timestampMask) >> UKeyWorker.timestampShift;\n    }\n\n    public static void main(String[] args) {\n        UKeyWorker sf = new UKeyWorker(31L, 63L);\n        System.out.println(sf.getId());\n    }\n\n}\n```\n","source":"_posts/2017-12-11-twitter-snowflake.md","raw":"---\ntitle: Twitter Snowflask 64位自增id算法几个语言实现方法\ndate: 2017-12-11 18:33:16\ntags: [算法, python]\n---\n> [Twitter-Snowflake](https://github.com/twitter/snowflake) 算法产生的背景相当简单，为了满足Twitter每秒上万条消息的请求，每条消息都必须分配一条唯一的id，这些id还需要一些大致的顺序（方便客户端排序），并且在分布式系统中不同机器产生的id必须不同。\n\n<!-- more -->\n\nSnowflask 算法在工作中经常会用，平常做开发涉及到需要生成自增 id，也会第一个想到这个算法，具体的算法详解 [Twitter-Snowflake，64位自增ID算法详解 ](http://www.lanindex.com/twitter-snowflake%EF%BC%8C64%E4%BD%8D%E8%87%AA%E5%A2%9Eid%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3/) 这篇文章做了详细介绍，我不在多做口舌，只是着重总结几种语言的实现方式，以便以后自己查阅。\n\n## Python\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport sys\nimport time\nimport random\nimport threading\n\n\nclass Snowflake(object):\n    region_id_bits = 2\n    worker_id_bits = 10\n    sequence_bits = 11\n\n    MAX_REGION_ID = -1 ^ (-1 << region_id_bits)\n    MAX_WORKER_ID = -1 ^ (-1 << worker_id_bits)\n    SEQUENCE_MASK = -1 ^ (-1 << sequence_bits)\n\n    WORKER_ID_SHIFT = sequence_bits\n    REGION_ID_SHIFT = sequence_bits + worker_id_bits\n    TIMESTAMP_LEFT_SHIFT = (sequence_bits + worker_id_bits + region_id_bits)\n\n    def __init__(self, worker_id, region_id=0):\n        self.twepoch = 1495977602000\n        self.last_timestamp = -1\n        self.sequence = 0\n\n        # assert 0 <= worker_id <= Snowflake.MAX_WORKER_ID\n        # assert 0 <= region_id <= Snowflake.MAX_REGION_ID\n\n        self.worker_id = worker_id\n        self.region_id = region_id\n\n        self.lock = threading.Lock()\n\n    def generate(self, bus_id=None):\n        return self.next_id(\n            True if bus_id is not None else False,\n            bus_id if bus_id is not None else 0\n        )\n\n    def next_id(self, is_padding, bus_id):\n        with self.lock:\n            timestamp = self.get_time()\n            padding_num = self.region_id\n\n            if is_padding:\n                padding_num = bus_id\n\n            if timestamp < self.last_timestamp:\n                try:\n                    raise ValueError(\n                        'Clock moved backwards. Refusing to'\n                        'generate id for {0} milliseconds.'.format(\n                            self.last_timestamp - timestamp\n                        )\n                    )\n                except ValueError:\n                    print(sys.exc_info[2])\n\n            if timestamp == self.last_timestamp:\n                self.sequence = (\n                                    self.sequence + 1) & Snowflake.SEQUENCE_MASK\n                if self.sequence == 0:\n                    timestamp = self.tail_next_millis(self.last_timestamp)\n            else:\n                self.sequence = random.randint(0, 9)\n\n            self.last_timestamp = timestamp\n\n            res_id = (\n                (\n                    timestamp - self.twepoch) << Snowflake.TIMESTAMP_LEFT_SHIFT |\n                (padding_num << Snowflake.REGION_ID_SHIFT) |\n                (self.worker_id << Snowflake.WORKER_ID_SHIFT) |\n                self.sequence\n            )\n\n            return res_id\n\n    def tail_next_millis(self, last_timestamp):\n        timestamp = self.get_time()\n        while timestamp <= last_timestamp:\n            timestamp = self.get_time()\n        return timestamp\n\n    def get_time(self):\n        return int(time.time() * 1000)\n\n\n\nif __name__ == '__main__':\n    print(Snowflake(0).generate())\n```\n## Java\n```java\npackage common;\n\n/**\n * timestamp + bizId + workId + sequence\n * */\npublic class UKeyWorker{\n\n    private final static long twepoch = 1404878190828L;\n\n    //机器标识位数（每种业务支持多少worker-thread）\n    private final static long workerIdBits = 5L;\n    //业务标识位数（预留）\n    private final static long bizIdBits = 6L;\n\n    //机器标识最大值\n    private final static long maxWorkerId = -1L ^ -1L << UKeyWorker.workerIdBits;\n    //业务标识最大值\n    private final static long maxBizId = -1L ^ -1L << UKeyWorker.bizIdBits;\n\n    //毫秒内自增位数\n    private final static long sequenceBits = 12L;\n\n    // 机器标识偏左移\n    private final static long workerIdShift = UKeyWorker.sequenceBits;\n    // 业务标识偏左移\n    private final static long bizIdShift = UKeyWorker.sequenceBits\n            + UKeyWorker.workerIdBits;\n    // 时间毫秒偏左移\n    private final static long timestampShift = UKeyWorker.sequenceBits\n            + UKeyWorker.workerIdBits + UKeyWorker.bizIdBits;\n\n    //序列号Mask\n    private final static long sequenceMask = -1L ^ -1L << UKeyWorker.sequenceBits;\n    //机器标识Mask\n    private final static long workerIdMask = UKeyWorker.maxWorkerId << UKeyWorker.workerIdShift;\n    //业务标识Mask\n    private final static long bizIdMask = UKeyWorker.maxBizId << UKeyWorker.bizIdShift;\n    //时间戳Mask\n    private final static long timestampMask = Long.MAX_VALUE\n            ^ (UKeyWorker.sequenceMask | UKeyWorker.workerIdMask | UKeyWorker.bizIdMask);\n\n    //最后的时间戳\n    private long lastTimestamp = -1L;\n\n    private final long workerId;\n    private final long bizId;\n\n    private long sequence = 0L;\n\n    public UKeyWorker(final long workerId, final long bizId) {\n        super();\n        if (workerId > UKeyWorker.maxWorkerId || workerId < 0) {\n            throw new IllegalArgumentException(String.format(\n                    \"worker Id can't be greater than %d or less than 0\",\n                    UKeyWorker.maxWorkerId));\n        }\n        this.workerId = workerId;\n\n        if (bizId > UKeyWorker.maxBizId || workerId < 0) {\n            throw new IllegalArgumentException(String.format(\n                    \"biz Id can't be greater than %d or less than 0\",\n                    UKeyWorker.maxBizId));\n        }\n        this.bizId = bizId;\n\n    }\n\n    public long getId() {\n        long id = nextId();\n        return id;\n    }\n\n    public synchronized long nextId() {\n        long timestamp = this.timeGen();\n\n        // 时间发生错误\n        if (timestamp < this.lastTimestamp) {\n            throw new RuntimeException(\n                    String\n                            .format(\n                                    \"Clock moved backwards.  Refusing to generate id for %d milliseconds\",\n                                    this.lastTimestamp - timestamp));\n        }\n\n        //毫秒内\n        if (this.lastTimestamp == timestamp) {\n            this.sequence = (this.sequence + 1) & UKeyWorker.sequenceMask;\n            if (this.sequence == 0) {\n                timestamp = this.tilNextMillis(this.lastTimestamp);\n            }\n        } else {\n            this.sequence = 0;\n        }\n\n        this.lastTimestamp = timestamp;\n\n        //计算\n        long nextId = ((timestamp - UKeyWorker.twepoch << UKeyWorker.timestampShift)) |\n            (this.bizId << UKeyWorker.bizIdShift) |\n            (this.workerId << UKeyWorker.workerIdShift) |\n            (this.sequence);\n\n        return nextId;\n    }\n\n    private long tilNextMillis(final long lastTimestamp) {\n        long timestamp = this.timeGen();\n        while (timestamp <= lastTimestamp) {\n            timestamp = this.timeGen();\n        }\n        return timestamp;\n    }\n\n    private long timeGen() {\n        return System.currentTimeMillis();\n    }\n\n    public static long getSequence(final long id){\n        return (id & UKeyWorker.sequenceMask);\n    }\n\n    public static long getWorkerId(final long id){\n        return (id & UKeyWorker.workerIdMask) >> UKeyWorker.workerIdShift;\n    }\n\n    public static long getBizId(final long id){\n        return (id & UKeyWorker.bizIdMask) >> UKeyWorker.bizIdShift ;\n    }\n\n    public static long getTimestamp(final long id) {\n        return (id & UKeyWorker.timestampMask) >> UKeyWorker.timestampShift;\n    }\n\n    public static void main(String[] args) {\n        UKeyWorker sf = new UKeyWorker(31L, 63L);\n        System.out.println(sf.getId());\n    }\n\n}\n```\n","slug":"twitter-snowflake","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5c004n5gqos65eaeba"},{"title":"Hexo 如何引入自定义 js 文件","date":"2017-12-12T18:08:29.000Z","_content":"\n在写 [获取时间戳及世界时间转换](/2017/12/09/timestamp/) 和 [如何获取指定位数随机数](/2017/12/06/get-random/) 两篇文章的时候，因为文中出现一些工具性质的东西，需要 js 代码的运算，但是又不能都写到 markdown 文件中，所以需要在 Hexo 中引入静态 js 文件。\n<!-- more -->\n\n在查阅文档后发现 Hexo 中静态文件放在皮肤文件夹中，即\n```bash\nyour_project/themes/<theme_name>/source\n```\n在这个文件夹中会有 `js, css, img` 等文件夹，没有的话可以自己创建，将自定义的 js 放到其中，在 markdown 文章中直接引用即可\n```javascript\n<script type=\"text/javascript\" src=\"/js/test.js\"></script>\n```\n\n","source":"_posts/2017-12-12-hexo-cust-js.md","raw":"---\ntitle: Hexo 如何引入自定义 js 文件\ndate: 2017-12-12 18:08:29\ntags: [hexo]\n---\n\n在写 [获取时间戳及世界时间转换](/2017/12/09/timestamp/) 和 [如何获取指定位数随机数](/2017/12/06/get-random/) 两篇文章的时候，因为文中出现一些工具性质的东西，需要 js 代码的运算，但是又不能都写到 markdown 文件中，所以需要在 Hexo 中引入静态 js 文件。\n<!-- more -->\n\n在查阅文档后发现 Hexo 中静态文件放在皮肤文件夹中，即\n```bash\nyour_project/themes/<theme_name>/source\n```\n在这个文件夹中会有 `js, css, img` 等文件夹，没有的话可以自己创建，将自定义的 js 放到其中，在 markdown 文章中直接引用即可\n```javascript\n<script type=\"text/javascript\" src=\"/js/test.js\"></script>\n```\n\n","slug":"hexo-cust-js","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5e004q5gqo0wjjvy0t"},{"title":"Python 操作 Mysql","date":"2017-12-13T18:47:16.000Z","_content":"\n在 Python 中有很多可以操作 Mysql 的模块，在这里简单介绍下 `pymysql` 模块\n<!-- more -->\n\n## pymysql\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport pymysql\nfrom urllib.parse import urlparse\n\nurl = 'mysql+pymysql://root:password@localhost:3306/db?charset=utf8mb4'\nURL_CONFIG = urlparse(url)\n\nclass BaseDB(object):\n    @classmethod\n    def create_conn(cls):\n        '''创建mysql链接'''\n        return pymysql.connect(\n            host=URL_CONFIG.hostname,\n            port=URL_CONFIG.port,\n            user=URL_CONFIG.username,\n            password=URL_CONFIG.password,\n            db=URL_CONFIG.path[1:],\n            charset='utf8mb4',\n            cursorclass=pymysql.cursors.DictCursor\n        )\n\n    @classmethod\n    def query(cls, sql, params):\n        \"\"\"\n        查询操作\n        :param sql:\n        :param params:\n        :return:\n        \"\"\"\n        conn = cls.create_conn()\n        try:\n            cursor = conn.cursor()      # 获取操作游标\n\n            cursor.execute(sql, params) # 执行 sql 语句\n            conn.commit()               # 提交\n            result = cursor.fetchall()  # 查询语句获取所以数据\n            cursor.close()              # 关闭游标\n            return result\n        except BaseException as e:\n            return []\n        finally:\n            conn.close()                # 关闭连接\n\n    @classmethod\n    def execute(cls, sql, params):\n        \"\"\"\n        更新操作\n        :param sql:\n        :param params:\n        :return:\n        \"\"\"\n        conn = cls.create_conn()\n        try:\n            cursor = conn.cursor()\n\n            result = cursor.execute(sql, params)\n            conn.commit()\n            cursor.close()\n            return result\n        except BaseException as e:\n            return False\n        finally:\n            conn.close()\n\n\nif __name__ == \"__main__\":\n    db = BaseDB()\n    # 需要传递的参数使用 %s 替换\n    sql = \"insert into test_user(id, name) values (%s, %s);\"\n    # 参数放在数组中\n    db.execute(sql, [1, 'wxnacy'])\n    sql = \"select * from test_user;\"\n    res = db.query(sql, [])\n    print(res)      # ==> [{\"id\":1, \"name\": \"wxnacy\"}]\n```\n","source":"_posts/2017-12-13-python-mysql.md","raw":"---\ntitle: Python 操作 Mysql\ndate: 2017-12-13 18:47:16\ntags: [python, mysql]\n---\n\n在 Python 中有很多可以操作 Mysql 的模块，在这里简单介绍下 `pymysql` 模块\n<!-- more -->\n\n## pymysql\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport pymysql\nfrom urllib.parse import urlparse\n\nurl = 'mysql+pymysql://root:password@localhost:3306/db?charset=utf8mb4'\nURL_CONFIG = urlparse(url)\n\nclass BaseDB(object):\n    @classmethod\n    def create_conn(cls):\n        '''创建mysql链接'''\n        return pymysql.connect(\n            host=URL_CONFIG.hostname,\n            port=URL_CONFIG.port,\n            user=URL_CONFIG.username,\n            password=URL_CONFIG.password,\n            db=URL_CONFIG.path[1:],\n            charset='utf8mb4',\n            cursorclass=pymysql.cursors.DictCursor\n        )\n\n    @classmethod\n    def query(cls, sql, params):\n        \"\"\"\n        查询操作\n        :param sql:\n        :param params:\n        :return:\n        \"\"\"\n        conn = cls.create_conn()\n        try:\n            cursor = conn.cursor()      # 获取操作游标\n\n            cursor.execute(sql, params) # 执行 sql 语句\n            conn.commit()               # 提交\n            result = cursor.fetchall()  # 查询语句获取所以数据\n            cursor.close()              # 关闭游标\n            return result\n        except BaseException as e:\n            return []\n        finally:\n            conn.close()                # 关闭连接\n\n    @classmethod\n    def execute(cls, sql, params):\n        \"\"\"\n        更新操作\n        :param sql:\n        :param params:\n        :return:\n        \"\"\"\n        conn = cls.create_conn()\n        try:\n            cursor = conn.cursor()\n\n            result = cursor.execute(sql, params)\n            conn.commit()\n            cursor.close()\n            return result\n        except BaseException as e:\n            return False\n        finally:\n            conn.close()\n\n\nif __name__ == \"__main__\":\n    db = BaseDB()\n    # 需要传递的参数使用 %s 替换\n    sql = \"insert into test_user(id, name) values (%s, %s);\"\n    # 参数放在数组中\n    db.execute(sql, [1, 'wxnacy'])\n    sql = \"select * from test_user;\"\n    res = db.query(sql, [])\n    print(res)      # ==> [{\"id\":1, \"name\": \"wxnacy\"}]\n```\n","slug":"python-mysql","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5f004s5gqobdt14icd"},{"title":"UglifyJS2 压缩 Javascript 代码","date":"2017-12-14T17:06:19.000Z","_content":"\n在现在的 web 开发中，代码压缩是个很重要的环节，及时现在带宽都整体提升，M 级别的文件和 K 级别的文件加载效果肯定是不一样的。尤其是每个人的开发习惯各不相同，变量名、回车、空格都影响了文件的大小，理论上我们应该为我们的 javascript 代码都加上混淆加密来优化网页加载速度\n\n<!-- more --><!-- toc -->\n今天介绍下 Node 项目 [UglifyJS2](https://github.com/mishoo/UglifyJS2) 来做 JS 压缩\n\nUglifyJS2 是 UglifyJS 的改进版，作者在此基础上做了很多优化改进。\n\n## 下载\n全局命令行使用\n```bash\n$ npm install -g uglify-js\n```\n项目中使用\n```bash\n$ yarn add uglify-js\n```\n\n## 命令行使用\n命令格式\n```bash\n$ uglifyjs [input files] [options]\n```\n准备文件 `example.js`\n```javascript\nfunction add(first, second) {\n    return first + second;\n}\nconsole.log(add(1 + 2, 3 + 4))\n```\n输出压缩结果\n```bash\n$ uglifyjs example.js\n```\n```bash\nfunction add(first,second){return first+second}console.log(add(1+2,3+4));\n```\n添加混淆\n```bash\n$ uglifyjs example.js -m\n```\n```bash\nfunction add(d,n){return d+n}console.log(add(1+2,3+4));\n```\n对表达式进行计算并去掉无用方法名\n```bash\n$ uglifyjs example.js -m -c --toplevel\n```\n```bash\nconsole.log(function(n,o){return n+o}(3,7));\n```\n输出到文件\n```bash\n$ uglifyjs example.js -m -c --toplevel -o example.min.js\n# example.min.js    ==> console.log(function(n,o){return n+o}(3,7));\n```\n通过上边这些简单操作，我们就已经可以把代码压缩很多，想想我们文件中几百行的代码吧。更多的参数请看[文档](https://github.com/mishoo/UglifyJS2#command-line-options)\n\n## 项目中使用\n我们可以在 Node 项目中使用该工具压缩，可以使用 `minify(code, options)` 这个方法，\n`code` 可以是字符串、JSON等格式，`options` 需要的参数\n```javascript\nvar UglifyJS = require(\"uglify-js\");\n\nvar code = \"function add(first, second) { return first + second;  }\";\nvar result = UglifyJS.minify(code);\nconsole.log(result.error); // runtime error, or `undefined` if( no error\nconsole.log(result.code);  // minified output: function add(n,d){return n+d}){}\n```\n使用 JSON 格式的话 key 为文件名，value 为代码\n```javascript\nvar code = {\n    \"file1.js\": \"function add(first, second) { return first + second;  }\",\n    \"file2.js\": \"console.log(add(1 + 2, 3 + 4));\"\n};\nvar result = UglifyJS.minify(code);\nconsole.log(result.code);\n// function add(d,n){return d+n}console.log(add(3,7));\n```\n使用参数\n```javascript\nvar code = {\n    \"file1.js\": \"function add(first, second) { return first + second;  }\",\n    \"file2.js\": \"console.log(add(1 + 2, 3 + 4));\"\n};\nvar options = { toplevel: true  };\nvar result = UglifyJS.minify(code, options);\nconsole.log(result.code);\n// console.log(3+7);\n```\n读取文件\n```javascript\nvar fs = require('fs');\n\nvar code = fs.readFileSync(\"./example.js\", \"utf8\");\nvar res = UglifyJS.minify(code);\nconsole.log(res.code);\n// function add(d,n){return d+n}console.log(add(3,7));\n```\n更多参数见[文档](https://github.com/mishoo/UglifyJS2#minify-options)\n\n了解了上边这些，你已经可以在项目用起来了，再多做些练习吧，让压缩更得心应手。\n","source":"_posts/2017-12-14-uglifyjs.md","raw":"---\ntitle: UglifyJS2 压缩 Javascript 代码\ndate: 2017-12-14 17:06:19\ntags: [javascript]\n---\n\n在现在的 web 开发中，代码压缩是个很重要的环节，及时现在带宽都整体提升，M 级别的文件和 K 级别的文件加载效果肯定是不一样的。尤其是每个人的开发习惯各不相同，变量名、回车、空格都影响了文件的大小，理论上我们应该为我们的 javascript 代码都加上混淆加密来优化网页加载速度\n\n<!-- more --><!-- toc -->\n今天介绍下 Node 项目 [UglifyJS2](https://github.com/mishoo/UglifyJS2) 来做 JS 压缩\n\nUglifyJS2 是 UglifyJS 的改进版，作者在此基础上做了很多优化改进。\n\n## 下载\n全局命令行使用\n```bash\n$ npm install -g uglify-js\n```\n项目中使用\n```bash\n$ yarn add uglify-js\n```\n\n## 命令行使用\n命令格式\n```bash\n$ uglifyjs [input files] [options]\n```\n准备文件 `example.js`\n```javascript\nfunction add(first, second) {\n    return first + second;\n}\nconsole.log(add(1 + 2, 3 + 4))\n```\n输出压缩结果\n```bash\n$ uglifyjs example.js\n```\n```bash\nfunction add(first,second){return first+second}console.log(add(1+2,3+4));\n```\n添加混淆\n```bash\n$ uglifyjs example.js -m\n```\n```bash\nfunction add(d,n){return d+n}console.log(add(1+2,3+4));\n```\n对表达式进行计算并去掉无用方法名\n```bash\n$ uglifyjs example.js -m -c --toplevel\n```\n```bash\nconsole.log(function(n,o){return n+o}(3,7));\n```\n输出到文件\n```bash\n$ uglifyjs example.js -m -c --toplevel -o example.min.js\n# example.min.js    ==> console.log(function(n,o){return n+o}(3,7));\n```\n通过上边这些简单操作，我们就已经可以把代码压缩很多，想想我们文件中几百行的代码吧。更多的参数请看[文档](https://github.com/mishoo/UglifyJS2#command-line-options)\n\n## 项目中使用\n我们可以在 Node 项目中使用该工具压缩，可以使用 `minify(code, options)` 这个方法，\n`code` 可以是字符串、JSON等格式，`options` 需要的参数\n```javascript\nvar UglifyJS = require(\"uglify-js\");\n\nvar code = \"function add(first, second) { return first + second;  }\";\nvar result = UglifyJS.minify(code);\nconsole.log(result.error); // runtime error, or `undefined` if( no error\nconsole.log(result.code);  // minified output: function add(n,d){return n+d}){}\n```\n使用 JSON 格式的话 key 为文件名，value 为代码\n```javascript\nvar code = {\n    \"file1.js\": \"function add(first, second) { return first + second;  }\",\n    \"file2.js\": \"console.log(add(1 + 2, 3 + 4));\"\n};\nvar result = UglifyJS.minify(code);\nconsole.log(result.code);\n// function add(d,n){return d+n}console.log(add(3,7));\n```\n使用参数\n```javascript\nvar code = {\n    \"file1.js\": \"function add(first, second) { return first + second;  }\",\n    \"file2.js\": \"console.log(add(1 + 2, 3 + 4));\"\n};\nvar options = { toplevel: true  };\nvar result = UglifyJS.minify(code, options);\nconsole.log(result.code);\n// console.log(3+7);\n```\n读取文件\n```javascript\nvar fs = require('fs');\n\nvar code = fs.readFileSync(\"./example.js\", \"utf8\");\nvar res = UglifyJS.minify(code);\nconsole.log(res.code);\n// function add(d,n){return d+n}console.log(add(3,7));\n```\n更多参数见[文档](https://github.com/mishoo/UglifyJS2#minify-options)\n\n了解了上边这些，你已经可以在项目用起来了，再多做些练习吧，让压缩更得心应手。\n","slug":"uglifyjs","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5g004v5gqorb3hqgam"},{"title":"Node 如何发送邮件","date":"2017-12-16T22:30:07.000Z","_content":"\n在 Node 中发送邮件是很简单的，[Nodemailer](https://nodemailer.com/about/) 包提供了很完善的接口来实现该功能。\n\n<!-- more --><!-- toc -->\n## 下载\nnpm\n```bash\n$ npm install --save nodemailer\n```\nyarn\n```bash\n$ yarn add nodemailer\n```\n## 使用\n使用起来很简单先看下官方的例子\n```javascript\n'use strict';\nconst nodemailer = require('nodemailer');\n\nnodemailer.createTestAccount((err, account) => {\n    let transporter = nodemailer.createTransport({\n        host: 'smtp.mxhichina.com', // smtp 地址，我使用的阿里企业邮箱\n        port: 25,                   // smtp 端口\n        secure: false,              // 如果不是 465 的端口，就是用 false\n        auth: {\n            user: 'your_name',      // 邮箱名\n            pass: 'your_password'   // 邮箱密码\n        }\n    });\n\n    // setup email data with unicode symbols\n    let mailOptions = {\n        from: 'info@wxnacy.com',    // 发送人邮箱\n        to: 'wxnacy@gmail.com',     // 接收人邮箱，多个使用数组或用逗号隔开\n        subject: 'Hello ✔',         // 主题\n        text: 'Hello world?',       // 邮件正文\n    };\n\n    // send mail with defined transport object\n    transporter.sendMail(mailOptions, (error, info) => {\n        if (error) {\n            return console.log(error);\n        }\n        console.log('Message sent: %s', info.messageId);\n    });\n});\n```\n如果你有过类似邮件服务的开发经验，看到上面这些参数大概就能改成自己的进行工作了\n，再简单使用的基础上，该模块还提供了很多高级功能。\n\n## 高级功能\n抄送/密送，跟 `to` 参数规则一样\n```java\nlet mailOptions = {\n    ...\n    cc: ['aaa@aa.com', 'bbb@bb.com'],   // 抄送\n    bcc: 'xxx@xx.com, bbb@bb.com'       // 密送\n}\n```\n发送 html 文本\n```java\nlet mailOptions = {\n    ...\n    html: \"<div>Hello World</div>\"\n}\n```\n使用 `attachments` 参数发送附件，`first.txt` 为直接以文本作为附件，`json.js` 以\n本地文档作为附件\n```javascript\nlet message = {\n    attachments: [\n        {\n            filename: 'first.txt',\n            content: 'hello world!'\n        },\n        {\n            filename: 'json.js',\n            path: './json.js'\n        }\n    ]\n}\n```\n基于 `html` 和 `attachements` 两个参数可以达到在文本中显示图片的功能，在以图片\n地址为附件的基础上，增加一个 `cid` ，并在 html 文本中使用如下引用，既可显示图片\n```javascript\nlet message = {\n    ...\n    html: 'Embedded image: <img src=\"cid:unique@nodemailer.com\"/>',\n    attachments: [{\n        filename: 'image.png',\n        path: '/path/to/file',\n        cid: 'unique@nodemailer.com' //same cid\n    }]\n}\n```\n\n如果还想了解更多功能，请看[文档](https://nodemailer.com/message/)\n\n","source":"_posts/2017-12-16-node-send-email.md","raw":"---\ntitle: Node 如何发送邮件\ndate: 2017-12-16 22:30:07\ntags: [node]\n---\n\n在 Node 中发送邮件是很简单的，[Nodemailer](https://nodemailer.com/about/) 包提供了很完善的接口来实现该功能。\n\n<!-- more --><!-- toc -->\n## 下载\nnpm\n```bash\n$ npm install --save nodemailer\n```\nyarn\n```bash\n$ yarn add nodemailer\n```\n## 使用\n使用起来很简单先看下官方的例子\n```javascript\n'use strict';\nconst nodemailer = require('nodemailer');\n\nnodemailer.createTestAccount((err, account) => {\n    let transporter = nodemailer.createTransport({\n        host: 'smtp.mxhichina.com', // smtp 地址，我使用的阿里企业邮箱\n        port: 25,                   // smtp 端口\n        secure: false,              // 如果不是 465 的端口，就是用 false\n        auth: {\n            user: 'your_name',      // 邮箱名\n            pass: 'your_password'   // 邮箱密码\n        }\n    });\n\n    // setup email data with unicode symbols\n    let mailOptions = {\n        from: 'info@wxnacy.com',    // 发送人邮箱\n        to: 'wxnacy@gmail.com',     // 接收人邮箱，多个使用数组或用逗号隔开\n        subject: 'Hello ✔',         // 主题\n        text: 'Hello world?',       // 邮件正文\n    };\n\n    // send mail with defined transport object\n    transporter.sendMail(mailOptions, (error, info) => {\n        if (error) {\n            return console.log(error);\n        }\n        console.log('Message sent: %s', info.messageId);\n    });\n});\n```\n如果你有过类似邮件服务的开发经验，看到上面这些参数大概就能改成自己的进行工作了\n，再简单使用的基础上，该模块还提供了很多高级功能。\n\n## 高级功能\n抄送/密送，跟 `to` 参数规则一样\n```java\nlet mailOptions = {\n    ...\n    cc: ['aaa@aa.com', 'bbb@bb.com'],   // 抄送\n    bcc: 'xxx@xx.com, bbb@bb.com'       // 密送\n}\n```\n发送 html 文本\n```java\nlet mailOptions = {\n    ...\n    html: \"<div>Hello World</div>\"\n}\n```\n使用 `attachments` 参数发送附件，`first.txt` 为直接以文本作为附件，`json.js` 以\n本地文档作为附件\n```javascript\nlet message = {\n    attachments: [\n        {\n            filename: 'first.txt',\n            content: 'hello world!'\n        },\n        {\n            filename: 'json.js',\n            path: './json.js'\n        }\n    ]\n}\n```\n基于 `html` 和 `attachements` 两个参数可以达到在文本中显示图片的功能，在以图片\n地址为附件的基础上，增加一个 `cid` ，并在 html 文本中使用如下引用，既可显示图片\n```javascript\nlet message = {\n    ...\n    html: 'Embedded image: <img src=\"cid:unique@nodemailer.com\"/>',\n    attachments: [{\n        filename: 'image.png',\n        path: '/path/to/file',\n        cid: 'unique@nodemailer.com' //same cid\n    }]\n}\n```\n\n如果还想了解更多功能，请看[文档](https://nodemailer.com/message/)\n\n","slug":"node-send-email","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5h004x5gqotfyhtgqw"},{"title":"Javascript 网络请求 Fetch Api","date":"2017-12-17T18:26:14.000Z","_content":"\n> Fetch API提供了一个获取资源的接口(包括跨网络)。任何使用过 XMLHttpRequest 的人都会熟悉它，但是新的API提供了更强大和更灵活的功能集。\n\n<!-- more --><!-- toc -->\n现在的 web 开发中已经很少使用 `jQuery` 库，自然也就用不到它的 `ajax()` 方法。现在最流行的 web api 请求方式便是 `fetch` ，它比传统的 ajax 请求方式更加一体化，现在主流浏览器都已经开始支持（什么？IE呢？你说什么？我听...不...到），即使有不支持的情况，也可以使用第三方的 polyfill 库 [https://github.com/github/fetch](https://github.com/github/fetch)\n## 开始\n开发中需求最多的就是请求接口，获取 JSON 数据，以 [ip-api](http://ip-api.com) 开放 api 作为例子，发出 GET 请求，并获取当前请求 ip\n```javascript\nfetch('http://ip-api.com/json')\n    .then(function(response){\n        return response.json();\n    }).then(function(data){\n        console.log(data.query);    // 223.72.61.32\n    }).catch(function(e) {\n        console.log(e);\n    });\n```\nfetch 返回一个 Promise ，这种写法比传统的 ajax 写法更加舒服，如果当前开放环境支持 ES6 ，还可以使用[箭头函数](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions)，会看起来更加舒服\n```javascript\nfetch('http://ip-api.com/json')\n    .then(res ==> res.json())\n    .then(data ==> console.log(data.query))\n    .catch(e ==> console.log(e));\n```\n如果你想把写法更加的 `try/catch` 可以使用 `async/await` 来做优化\n```java\ntry {\n    let response = await fetch(url);\n    let data = await response.json();\n    console.log(data);\n} catch(e) {\n    console.log(e);\n}\n```\n不过这是 ES7 的新特性，现在普及为时过早，感兴趣的话可以看它的完整[规范](https://github.com/tc39/ecmascript-asyncawait)，你也可以看阮一峰的 [async 函数的含义和用法](http://www.ruanyifeng.com/blog/2015/05/async.html)\n\n## 更多用法\n获取HTML\n```javascript\nfetch('/users.html')\n    .then(function(response) {\n        return response.text()\n    }).then(function(body) {\n        document.body.innerHTML = body\n    });\n```\nResponse 的头信息在 `headers` 中，使用 get 方法获取，以及状态信息\n```javascript\nfetch('/users.json').then(function(response) {\n    console.log(response.headers.get('Content-Type'))\n    console.log(response.headers.get('Date'))\n    console.log(response.status)\n    console.log(response.statusText)\n});\n```\nForm 表单提交\n```javascript\nvar form = document.querySelector('form')\n\nfetch('/users', {\n    method: 'POST',\n    body: new FormData(form)\n})\n```\nJSON 数据提交\n```java\nfetch('/users', {\n    method: 'POST',\n    headers: {\n        'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n        name: 'Hubot',\n        login: 'hubot',\n    })\n});\n```\n更多使用见[文档](https://github.com/github/fetch#caveats)\n在 Node 中使用 fetch [node-fetch](https://github.com/bitinn/node-fetch)\n## 封装\nFetch 用法很简洁，但每次都写几次 `then, catch` 也会很烦，我们可以对他进行简单封装，让每次使用不那么麻烦。这里只是提供一种思路，因为每个项目设计到的情况都有少许不同\n```javascript\nfunction fetchGet(url) {\n    return fetchRequest(url, 'GET')\n}\nfunction fetchPost(url, params) {\n    return fetchRequest(url, 'POST', params)\n}\nfunction fetchRequest(url, method, params) {\n    var headers = {\n        \"authorization\": \"XXXXXXXXX\"\n    }\n    if( method.toLowerCase() == 'post' ){\n        headers['Content-Type']= 'application/json'\n    }\n    return new Promise(function(resolve, reject) {\n        fetch(url, {\n            method: method,\n            headers: headers,\n            body: JSON.stringify(params)\n        }).then(res => {\n            return res.json()\n        }).then(data => {\n            resolve(data)\n        }).catch(e => {\n            console.log(e);\n            // 需要统一的处理错误方式，避免每次都catch\n        })\n    })\n}\n\n// 使用\nfetchGet('http://ip-api.com/json')\n.then(data => {\n    console.log(data);\n})\n```\nfetch 方法返回的是 Promise ，我们的封装方法也要返回 Promise，我只返回 JSON 数据，catch 的数据集中处理。\n\n## timeout\nfetch 本身不带 timeout ，需要自己封装，详情见 [Javascript 给 Fetch 加上 Timeout](/2018/02/14/fetch-timeout/)\n\n## 参考文献\n- [Fetch API](https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API#Fetch_%E6%8E%A5%E5%8F%A3)\n- [Using Fetch](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch)\n- [传统 Ajax 已死，Fetch 永生](https://github.com/camsong/blog/issues/2)\n- [Body执行者：Response](https://www.w3cschool.cn/fetch_api/fetch_api-phz72lrr.html)\n","source":"_posts/2017-12-17-fetch.md","raw":"---\ntitle: Javascript 网络请求 Fetch Api\ndate: 2017-12-17 18:26:14\ntags: [javascript]\n---\n\n> Fetch API提供了一个获取资源的接口(包括跨网络)。任何使用过 XMLHttpRequest 的人都会熟悉它，但是新的API提供了更强大和更灵活的功能集。\n\n<!-- more --><!-- toc -->\n现在的 web 开发中已经很少使用 `jQuery` 库，自然也就用不到它的 `ajax()` 方法。现在最流行的 web api 请求方式便是 `fetch` ，它比传统的 ajax 请求方式更加一体化，现在主流浏览器都已经开始支持（什么？IE呢？你说什么？我听...不...到），即使有不支持的情况，也可以使用第三方的 polyfill 库 [https://github.com/github/fetch](https://github.com/github/fetch)\n## 开始\n开发中需求最多的就是请求接口，获取 JSON 数据，以 [ip-api](http://ip-api.com) 开放 api 作为例子，发出 GET 请求，并获取当前请求 ip\n```javascript\nfetch('http://ip-api.com/json')\n    .then(function(response){\n        return response.json();\n    }).then(function(data){\n        console.log(data.query);    // 223.72.61.32\n    }).catch(function(e) {\n        console.log(e);\n    });\n```\nfetch 返回一个 Promise ，这种写法比传统的 ajax 写法更加舒服，如果当前开放环境支持 ES6 ，还可以使用[箭头函数](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions)，会看起来更加舒服\n```javascript\nfetch('http://ip-api.com/json')\n    .then(res ==> res.json())\n    .then(data ==> console.log(data.query))\n    .catch(e ==> console.log(e));\n```\n如果你想把写法更加的 `try/catch` 可以使用 `async/await` 来做优化\n```java\ntry {\n    let response = await fetch(url);\n    let data = await response.json();\n    console.log(data);\n} catch(e) {\n    console.log(e);\n}\n```\n不过这是 ES7 的新特性，现在普及为时过早，感兴趣的话可以看它的完整[规范](https://github.com/tc39/ecmascript-asyncawait)，你也可以看阮一峰的 [async 函数的含义和用法](http://www.ruanyifeng.com/blog/2015/05/async.html)\n\n## 更多用法\n获取HTML\n```javascript\nfetch('/users.html')\n    .then(function(response) {\n        return response.text()\n    }).then(function(body) {\n        document.body.innerHTML = body\n    });\n```\nResponse 的头信息在 `headers` 中，使用 get 方法获取，以及状态信息\n```javascript\nfetch('/users.json').then(function(response) {\n    console.log(response.headers.get('Content-Type'))\n    console.log(response.headers.get('Date'))\n    console.log(response.status)\n    console.log(response.statusText)\n});\n```\nForm 表单提交\n```javascript\nvar form = document.querySelector('form')\n\nfetch('/users', {\n    method: 'POST',\n    body: new FormData(form)\n})\n```\nJSON 数据提交\n```java\nfetch('/users', {\n    method: 'POST',\n    headers: {\n        'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n        name: 'Hubot',\n        login: 'hubot',\n    })\n});\n```\n更多使用见[文档](https://github.com/github/fetch#caveats)\n在 Node 中使用 fetch [node-fetch](https://github.com/bitinn/node-fetch)\n## 封装\nFetch 用法很简洁，但每次都写几次 `then, catch` 也会很烦，我们可以对他进行简单封装，让每次使用不那么麻烦。这里只是提供一种思路，因为每个项目设计到的情况都有少许不同\n```javascript\nfunction fetchGet(url) {\n    return fetchRequest(url, 'GET')\n}\nfunction fetchPost(url, params) {\n    return fetchRequest(url, 'POST', params)\n}\nfunction fetchRequest(url, method, params) {\n    var headers = {\n        \"authorization\": \"XXXXXXXXX\"\n    }\n    if( method.toLowerCase() == 'post' ){\n        headers['Content-Type']= 'application/json'\n    }\n    return new Promise(function(resolve, reject) {\n        fetch(url, {\n            method: method,\n            headers: headers,\n            body: JSON.stringify(params)\n        }).then(res => {\n            return res.json()\n        }).then(data => {\n            resolve(data)\n        }).catch(e => {\n            console.log(e);\n            // 需要统一的处理错误方式，避免每次都catch\n        })\n    })\n}\n\n// 使用\nfetchGet('http://ip-api.com/json')\n.then(data => {\n    console.log(data);\n})\n```\nfetch 方法返回的是 Promise ，我们的封装方法也要返回 Promise，我只返回 JSON 数据，catch 的数据集中处理。\n\n## timeout\nfetch 本身不带 timeout ，需要自己封装，详情见 [Javascript 给 Fetch 加上 Timeout](/2018/02/14/fetch-timeout/)\n\n## 参考文献\n- [Fetch API](https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API#Fetch_%E6%8E%A5%E5%8F%A3)\n- [Using Fetch](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch)\n- [传统 Ajax 已死，Fetch 永生](https://github.com/camsong/blog/issues/2)\n- [Body执行者：Response](https://www.w3cschool.cn/fetch_api/fetch_api-phz72lrr.html)\n","slug":"fetch","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5j00505gqozt34si9g"},{"title":"NVM (Node Version Manager) Node 版本管理器","date":"2017-12-15T18:58:15.000Z","_content":"\n每个语言应该有自己的版本管理器，Python 有 pyenv ，Ruby 有 rbenv，Node 也有 [nvm](https://github.com/creationix/nvm)\n\n<!-- more --><!-- toc -->\n\n## 安装\ncurl\n```bash\n$ curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh | bash\n```\nwget\n```bash\n$ wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh | bash\n```\n修改 `~/.bash_profile` 配置环境变量\n\n```bash\nexport NVM_DIR=\"$HOME/.nvm\"\n[ -s \"$NVM_DIR/nvm.sh\"  ] && . \"$NVM_DIR/nvm.sh\" # This loads nvm\n[ -s \"$NVM_DIR/bash_completion\"  ] && \\. \"$NVM_DIR/bash_completion\"  # This loads nvm bash_completion\n\n```\n\n检查安装结构\n```bash\n$ command -v nvm\n```\n如果安装成功，该命令会输出 `nvm`，还有其他的安装方式，见[文档 ](https://github.com/creationix/nvm#git-install)\n\n## 命令\n下载 node 最新版本\n```bash\n$ nvm install node\n```\nnode 会被下载到 `~/.nvm/versions` 目录下，使用 `which` 命令可以查看某个版本所在位置\n```bash\n$ nvm which 9.3.0\n# /Users/wxnacy/.nvm/versions/node/v9.3.0/bin/node\n```\n当然我们还可以下载指定版本\n```bash\n$ nvm install 8.4.0\n```\n同时指定使用该版本\n```bash\n$ nvm use 8.4.0\n# Now using node v8.4.0 (npm v5.3.0)\n```\n想要使用最新版本\n```bash\n$ nvm use node\n# Now using node v9.3.0 (npm v5.5.1)\n```\n`use` 命令只能在当前终端有效，下次打开终端又会回到最初的版本，想要默认使用某个\n版本，需要使用 `alias` 命令\n```bash\n$ nvm alias default 8.4.0\n```\n默认使用最新版本\n```bash\n$ nvm alias default node\n```\n版本管理最应该做的事情，就是可以让不同的项目运行在不同的版本下\n```bash\n$ nvm run 8.4.0 index.js\n```\n在试了这么久后，我想知道机器都装了哪些版本\n```bash\n$ nvm ls\n#         v8.0.0\n#->       v8.4.0\n#         v9.3.0\n#         system\n```\n想要删掉不用版本也很简单\n```bash\n$ nvm uninstall 8.0.0\n```\n如果你连 nvm 也不想要了，那就直接把刚才哪些配置去掉，并把 `~/.nvm` 目录删除即可\n\n简单的用法就是这些，如果想要更深入了解它的用法，请看[文档 ](https://github.com/creationix/nvm#usage)\n\n- [Node.js v10.5.0 文档](http://nodejs.cn/api/)\n\n","source":"_posts/2017-12-15-nvm.md","raw":"---\ntitle: NVM (Node Version Manager) Node 版本管理器\ndate: 2017-12-15 18:58:15\ntags: [node]\n---\n\n每个语言应该有自己的版本管理器，Python 有 pyenv ，Ruby 有 rbenv，Node 也有 [nvm](https://github.com/creationix/nvm)\n\n<!-- more --><!-- toc -->\n\n## 安装\ncurl\n```bash\n$ curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh | bash\n```\nwget\n```bash\n$ wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh | bash\n```\n修改 `~/.bash_profile` 配置环境变量\n\n```bash\nexport NVM_DIR=\"$HOME/.nvm\"\n[ -s \"$NVM_DIR/nvm.sh\"  ] && . \"$NVM_DIR/nvm.sh\" # This loads nvm\n[ -s \"$NVM_DIR/bash_completion\"  ] && \\. \"$NVM_DIR/bash_completion\"  # This loads nvm bash_completion\n\n```\n\n检查安装结构\n```bash\n$ command -v nvm\n```\n如果安装成功，该命令会输出 `nvm`，还有其他的安装方式，见[文档 ](https://github.com/creationix/nvm#git-install)\n\n## 命令\n下载 node 最新版本\n```bash\n$ nvm install node\n```\nnode 会被下载到 `~/.nvm/versions` 目录下，使用 `which` 命令可以查看某个版本所在位置\n```bash\n$ nvm which 9.3.0\n# /Users/wxnacy/.nvm/versions/node/v9.3.0/bin/node\n```\n当然我们还可以下载指定版本\n```bash\n$ nvm install 8.4.0\n```\n同时指定使用该版本\n```bash\n$ nvm use 8.4.0\n# Now using node v8.4.0 (npm v5.3.0)\n```\n想要使用最新版本\n```bash\n$ nvm use node\n# Now using node v9.3.0 (npm v5.5.1)\n```\n`use` 命令只能在当前终端有效，下次打开终端又会回到最初的版本，想要默认使用某个\n版本，需要使用 `alias` 命令\n```bash\n$ nvm alias default 8.4.0\n```\n默认使用最新版本\n```bash\n$ nvm alias default node\n```\n版本管理最应该做的事情，就是可以让不同的项目运行在不同的版本下\n```bash\n$ nvm run 8.4.0 index.js\n```\n在试了这么久后，我想知道机器都装了哪些版本\n```bash\n$ nvm ls\n#         v8.0.0\n#->       v8.4.0\n#         v9.3.0\n#         system\n```\n想要删掉不用版本也很简单\n```bash\n$ nvm uninstall 8.0.0\n```\n如果你连 nvm 也不想要了，那就直接把刚才哪些配置去掉，并把 `~/.nvm` 目录删除即可\n\n简单的用法就是这些，如果想要更深入了解它的用法，请看[文档 ](https://github.com/creationix/nvm#usage)\n\n- [Node.js v10.5.0 文档](http://nodejs.cn/api/)\n\n","slug":"nvm","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5k00525gqoalw7rnde"},{"title":"Python SMTP发送邮件","date":"2017-12-18T21:02:36.000Z","_content":"\n> SMTP（Simple Mail Transfer Protocol）即简单邮件传输协议,它是一组用于由源地址到目的地址传送邮件的规则，由它来控制信件的中转方式。\n\n<!-- more --><!-- toc -->\nPython 中的 smtplib 模块，对 smtp 进行了简单的封装，提供了一套发送邮件的 api\n\n## 构造 SMTP\n```python\nimport smtplib\nsmtp = smtplib.SMTP()\nsmtp.connect(host, port)\nsmtp.login(user, password)\n```\n- host SMTP 服务器主机，ip 或域名\n- port SMTP 端口号，一般为 25\n- user 发送人邮箱名\n- password 发送人密码\n\n## 消息体\n```python\nfrom email.mime.text import MIMEText\nfrom email.header import Header\n\nmessage = MIMEText(msg, mime_type, 'utf-8')\nmessage['From'] = Header('发件人', 'utf-8')\nmessage['To'] = Header('收件人', 'utf-8')\nmessage['Subject'] = Header('主题', 'utf-8')\n```\n- msg 邮件正文，普通文本或 html 代码\n- mime_type 消息类型，html 或 text\n`From` 和 `To` 不是必填字段，但是不填的话，发送人和接受人的位置就会显示空。\n\n## 发送\n```python\nsmtp.sendmail(sender, receivers, msg)\n```\n- sender 发送人邮件\n- receivers 接受人邮件，数组\n- msg 消息体\n\n## Hello World\n完成的邮件发送代码如下\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport smtplib\nfrom email.mime.text import MIMEText\nfrom email.header import Header\n\nsmtp = smtplib.SMTP()\nsmtp.connect(host, port)\nsmtp.login(user, password)\n\nmessage = MIMEText('Hello World', 'text', 'utf-8')\nmessage['From'] = Header('wxnacy', 'utf-8')\nmessage['To'] = Header('朋友', 'utf-8')\nmessage['Subject'] = Header('Hello World', 'utf-8')\n\nsmtp.sendmail('wxnacy@gmail.com', ['bbb@bb.com'], message.as_string())\n```\n\n## 抄送／密送\n在 smtplib 中发送邮件没有普通和抄送之分，都是放在 `receivers` 中，只是在头信息中区分开\n```python\ncc = ['bb@bbb.com', 'cc@ccc.com']\nmessage['Cc'] = Header(','.join(cc), 'utf-8')   # 抄送\nmessage['Bcc'] = Header(','.join(cc), 'utf-8')  # 密送\n```\n\n## 附件\n发送附件的时候需要引入新模块 `MIMEMultipart`\n```python\nfrom email.mime.multipart import MIMEMultipart\n\nmessage = MIMEMultipart()\nmessage['From'] = Header(\"发送人\", 'utf-8')\nmessage['To'] =  Header(\"接受人\", 'utf-8')\nmessage['Subject'] = Header('附件测试', 'utf-8')\n\nmessage.attach(MIMEText('这是一段正文', 'plain', 'utf-8'))\n\natt1 = MIMEText(open('./test.txt', 'rb').read(), 'base64', 'utf-8')\natt1[\"Content-Type\"] = 'application/octet-stream'\natt1[\"Content-Disposition\"] = 'attachment; filename=\"test.txt\"'\nmessage.attach(att1)\n\nsmtp.sendmail('wxnacy@gmail.com', ['bb@bbb.com'], message.as_string())\n```\n\n## HTML 文本中显示图片\n使用 `MIMEImage` 模块可以接收图片格式数据，配合 `MIMEMultipart` 以附件的形式发送，并显示在文本中\n```python\nfrom email.mime.text import MIMEText\nfrom email.mime.image import MIMEImage\nfrom email.mime.multipart import MIMEMultipart\n\nmsgRoot = MIMEMultipart('related')\nmsgRoot['From'] = Header(\"菜鸟教程\", 'utf-8')\nmsgRoot['To'] =  Header(\"测试\", 'utf-8')\nsubject = 'Python SMTP 邮件测试'\nmsgRoot['Subject'] = Header(subject, 'utf-8')\n\nmsgAlternative = MIMEMultipart('alternative')\nmsgRoot.attach(msgAlternative)\n\n\nmail_msg = \"\"\"\n           <p>Hello World</p>\n           <p><img src=\"cid:image1\"></img></p>\n           \"\"\"\nmsgAlternative.attach(MIMEText(mail_msg, 'html', 'utf-8'))\n\n# 指定图片为当前目录\nfp = open('./test.png', 'rb')\nmsgImage = MIMEImage(fp.read())\nfp.close()\n\n# 定义图片 ID，在 HTML 文本中引用\nmsgImage.add_header('Content-ID', '<image1>')\nmsgRoot.attach(msgImage)\nself.client.sendmail(self.sender, receivers, msgRoot.as_string())\n```\n图片以附件发送，并指定 `cid` ，在文本中引用该 id 即可\n\n## 参考\n- [email](https://docs.python.org/3.4/library/email-examples.html)\n- [Python3 SMTP发送邮件](http://www.runoob.com/python3/python3-smtp.html)\n","source":"_posts/2017-12-18-python-email.md","raw":"---\ntitle: Python SMTP发送邮件\ndate: 2017-12-18 21:02:36\ntags: [python]\n---\n\n> SMTP（Simple Mail Transfer Protocol）即简单邮件传输协议,它是一组用于由源地址到目的地址传送邮件的规则，由它来控制信件的中转方式。\n\n<!-- more --><!-- toc -->\nPython 中的 smtplib 模块，对 smtp 进行了简单的封装，提供了一套发送邮件的 api\n\n## 构造 SMTP\n```python\nimport smtplib\nsmtp = smtplib.SMTP()\nsmtp.connect(host, port)\nsmtp.login(user, password)\n```\n- host SMTP 服务器主机，ip 或域名\n- port SMTP 端口号，一般为 25\n- user 发送人邮箱名\n- password 发送人密码\n\n## 消息体\n```python\nfrom email.mime.text import MIMEText\nfrom email.header import Header\n\nmessage = MIMEText(msg, mime_type, 'utf-8')\nmessage['From'] = Header('发件人', 'utf-8')\nmessage['To'] = Header('收件人', 'utf-8')\nmessage['Subject'] = Header('主题', 'utf-8')\n```\n- msg 邮件正文，普通文本或 html 代码\n- mime_type 消息类型，html 或 text\n`From` 和 `To` 不是必填字段，但是不填的话，发送人和接受人的位置就会显示空。\n\n## 发送\n```python\nsmtp.sendmail(sender, receivers, msg)\n```\n- sender 发送人邮件\n- receivers 接受人邮件，数组\n- msg 消息体\n\n## Hello World\n完成的邮件发送代码如下\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport smtplib\nfrom email.mime.text import MIMEText\nfrom email.header import Header\n\nsmtp = smtplib.SMTP()\nsmtp.connect(host, port)\nsmtp.login(user, password)\n\nmessage = MIMEText('Hello World', 'text', 'utf-8')\nmessage['From'] = Header('wxnacy', 'utf-8')\nmessage['To'] = Header('朋友', 'utf-8')\nmessage['Subject'] = Header('Hello World', 'utf-8')\n\nsmtp.sendmail('wxnacy@gmail.com', ['bbb@bb.com'], message.as_string())\n```\n\n## 抄送／密送\n在 smtplib 中发送邮件没有普通和抄送之分，都是放在 `receivers` 中，只是在头信息中区分开\n```python\ncc = ['bb@bbb.com', 'cc@ccc.com']\nmessage['Cc'] = Header(','.join(cc), 'utf-8')   # 抄送\nmessage['Bcc'] = Header(','.join(cc), 'utf-8')  # 密送\n```\n\n## 附件\n发送附件的时候需要引入新模块 `MIMEMultipart`\n```python\nfrom email.mime.multipart import MIMEMultipart\n\nmessage = MIMEMultipart()\nmessage['From'] = Header(\"发送人\", 'utf-8')\nmessage['To'] =  Header(\"接受人\", 'utf-8')\nmessage['Subject'] = Header('附件测试', 'utf-8')\n\nmessage.attach(MIMEText('这是一段正文', 'plain', 'utf-8'))\n\natt1 = MIMEText(open('./test.txt', 'rb').read(), 'base64', 'utf-8')\natt1[\"Content-Type\"] = 'application/octet-stream'\natt1[\"Content-Disposition\"] = 'attachment; filename=\"test.txt\"'\nmessage.attach(att1)\n\nsmtp.sendmail('wxnacy@gmail.com', ['bb@bbb.com'], message.as_string())\n```\n\n## HTML 文本中显示图片\n使用 `MIMEImage` 模块可以接收图片格式数据，配合 `MIMEMultipart` 以附件的形式发送，并显示在文本中\n```python\nfrom email.mime.text import MIMEText\nfrom email.mime.image import MIMEImage\nfrom email.mime.multipart import MIMEMultipart\n\nmsgRoot = MIMEMultipart('related')\nmsgRoot['From'] = Header(\"菜鸟教程\", 'utf-8')\nmsgRoot['To'] =  Header(\"测试\", 'utf-8')\nsubject = 'Python SMTP 邮件测试'\nmsgRoot['Subject'] = Header(subject, 'utf-8')\n\nmsgAlternative = MIMEMultipart('alternative')\nmsgRoot.attach(msgAlternative)\n\n\nmail_msg = \"\"\"\n           <p>Hello World</p>\n           <p><img src=\"cid:image1\"></img></p>\n           \"\"\"\nmsgAlternative.attach(MIMEText(mail_msg, 'html', 'utf-8'))\n\n# 指定图片为当前目录\nfp = open('./test.png', 'rb')\nmsgImage = MIMEImage(fp.read())\nfp.close()\n\n# 定义图片 ID，在 HTML 文本中引用\nmsgImage.add_header('Content-ID', '<image1>')\nmsgRoot.attach(msgImage)\nself.client.sendmail(self.sender, receivers, msgRoot.as_string())\n```\n图片以附件发送，并指定 `cid` ，在文本中引用该 id 即可\n\n## 参考\n- [email](https://docs.python.org/3.4/library/email-examples.html)\n- [Python3 SMTP发送邮件](http://www.runoob.com/python3/python3-smtp.html)\n","slug":"python-email","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5l00555gqox2szufrj"},{"title":"MD5，SHA，HMAC  在线加密计算","date":"2017-12-19T15:03:03.000Z","_content":"\n签名和加解密平常偶尔会用到，又不想每次都去 google 找，干脆自己写了一个在线工具。\n<!-- more -->\n\n{% raw %}\n文本： <textarea id=\"msg\" style=\"width: 50%\">message</textarea>\n<br/>\nKEY: <input id=\"key\" value=\"message_key\" style=\"width: 30%\"/>\n<button id=\"encrtpt\" onClick=\"encrypt()\">加密</button>\n\n<!-- <button id=\"encrypt\" onClick=\"create_crypto('default')\">签名</button> <button id=\"encryptHmac\" onClick=\"create_crypto('hmac')\">HMAC 签名</button> <button id=\"encryptAES\" onClick=\"create_crypto('aes_encrypt')\">AES 加密</button> <button id=\"decryptAES\" onClick=\"create_crypto('aes_decrypt')\">AES 解密</button> <button id=\"encryptDES\" onClick=\"create_crypto('des_encrypt')\">DES 加密</button> <button id=\"decryptDES\" onClick=\"create_crypto('des_decrypt')\">DES 解密</button> <button id=\"encryptTDES\" onClick=\"create_crypto('tdes_encrypt')\">TripleDES 加密</button> <button id=\"decryptTDES\" onClick=\"create_crypto('tdes_decrypt')\">TripleDES 解密</button> <button id=\"encryptRabbit\" onClick=\"create_crypto('rabbit_encrypt')\">Rabbit 加密</button> <button id=\"decryptRabbit\" onClick=\"create_crypto('rabbit_decrypt')\">Rabbit 解密</button> -->\n\n\n<div id=\"hash\" style=\"display: none\">\n<br/>\nMD5 <span id=\"md5\" ></span><br/>\nSHA1 <span id=\"sha1\" ></span><br/>\nSHA256 <span id=\"sha256\" ></span><br/>\nSHA512 <span id=\"sha512\" ></span><br/>\n\nHmacMD5 <span id=\"hmacmd5\" ></span><br/>\nHmacSHA1 <span id=\"hmacsha1\" ></span><br/>\nHmacSHA256 <span id=\"hmacsha256\" ></span><br/>\nHmacSHA512 <span id=\"hmacsha512\" ></span><br/>\n\n</div>\n<div id=\"crypto\" style=\"display: none\">\n结果\n<span id=\"result\" ></span>\n</div>\n\n<script src=\"/js/jquery.min.js\"></script>\n<script src=\"/js/crypto-js.min.js\"></script>\n<script>\nfunction encrypt(){\n    let msg = document.getElementById(\"msg\").value;\n    let key = document.getElementById(\"key\").value;\n    console.log(msg, key);\n    $(\"#hash\").show()\n\n    $(\"#md5\").text(CryptoJS.MD5(msg))\n    $(\"#sha1\").text(CryptoJS.SHA1(msg))\n    $(\"#sha256\").text(CryptoJS.SHA256(msg))\n    $(\"#sha512\").text(CryptoJS.SHA512(msg))\n\n    $(\"#hmacmd5\").text(CryptoJS.HmacMD5(msg, key))\n    $(\"#hmacsha1\").text(CryptoJS.HmacSHA1(msg, key))\n    $(\"#hmacsha256\").text(CryptoJS.HmacSHA256(msg, key))\n    $(\"#hmacsha512\").text(CryptoJS.HmacSHA512(msg, key))\n\n};\n</script>\n\n{% endraw %}\n- **签名** 现在支持的签名为 MD5，SHA1，SHA256，SHA512，以及 Hmac 加密签名\n<!-- - **加密／解密** 现在支持 AES 算法的加解密 -->\n\n## 参考\n- [https://1024tools.com/hmac](https://1024tools.com/hmac)\n- [http://www.yuangongju.com/encrypt](http://www.yuangongju.com/encrypt)\n","source":"_posts/2017-12-19-tool-crypto.md","raw":"---\ntitle: MD5，SHA，HMAC  在线加密计算\ndate: 2017-12-19 15:03:03\ntags: [算法]\n---\n\n签名和加解密平常偶尔会用到，又不想每次都去 google 找，干脆自己写了一个在线工具。\n<!-- more -->\n\n{% raw %}\n文本： <textarea id=\"msg\" style=\"width: 50%\">message</textarea>\n<br/>\nKEY: <input id=\"key\" value=\"message_key\" style=\"width: 30%\"/>\n<button id=\"encrtpt\" onClick=\"encrypt()\">加密</button>\n\n<!-- <button id=\"encrypt\" onClick=\"create_crypto('default')\">签名</button> <button id=\"encryptHmac\" onClick=\"create_crypto('hmac')\">HMAC 签名</button> <button id=\"encryptAES\" onClick=\"create_crypto('aes_encrypt')\">AES 加密</button> <button id=\"decryptAES\" onClick=\"create_crypto('aes_decrypt')\">AES 解密</button> <button id=\"encryptDES\" onClick=\"create_crypto('des_encrypt')\">DES 加密</button> <button id=\"decryptDES\" onClick=\"create_crypto('des_decrypt')\">DES 解密</button> <button id=\"encryptTDES\" onClick=\"create_crypto('tdes_encrypt')\">TripleDES 加密</button> <button id=\"decryptTDES\" onClick=\"create_crypto('tdes_decrypt')\">TripleDES 解密</button> <button id=\"encryptRabbit\" onClick=\"create_crypto('rabbit_encrypt')\">Rabbit 加密</button> <button id=\"decryptRabbit\" onClick=\"create_crypto('rabbit_decrypt')\">Rabbit 解密</button> -->\n\n\n<div id=\"hash\" style=\"display: none\">\n<br/>\nMD5 <span id=\"md5\" ></span><br/>\nSHA1 <span id=\"sha1\" ></span><br/>\nSHA256 <span id=\"sha256\" ></span><br/>\nSHA512 <span id=\"sha512\" ></span><br/>\n\nHmacMD5 <span id=\"hmacmd5\" ></span><br/>\nHmacSHA1 <span id=\"hmacsha1\" ></span><br/>\nHmacSHA256 <span id=\"hmacsha256\" ></span><br/>\nHmacSHA512 <span id=\"hmacsha512\" ></span><br/>\n\n</div>\n<div id=\"crypto\" style=\"display: none\">\n结果\n<span id=\"result\" ></span>\n</div>\n\n<script src=\"/js/jquery.min.js\"></script>\n<script src=\"/js/crypto-js.min.js\"></script>\n<script>\nfunction encrypt(){\n    let msg = document.getElementById(\"msg\").value;\n    let key = document.getElementById(\"key\").value;\n    console.log(msg, key);\n    $(\"#hash\").show()\n\n    $(\"#md5\").text(CryptoJS.MD5(msg))\n    $(\"#sha1\").text(CryptoJS.SHA1(msg))\n    $(\"#sha256\").text(CryptoJS.SHA256(msg))\n    $(\"#sha512\").text(CryptoJS.SHA512(msg))\n\n    $(\"#hmacmd5\").text(CryptoJS.HmacMD5(msg, key))\n    $(\"#hmacsha1\").text(CryptoJS.HmacSHA1(msg, key))\n    $(\"#hmacsha256\").text(CryptoJS.HmacSHA256(msg, key))\n    $(\"#hmacsha512\").text(CryptoJS.HmacSHA512(msg, key))\n\n};\n</script>\n\n{% endraw %}\n- **签名** 现在支持的签名为 MD5，SHA1，SHA256，SHA512，以及 Hmac 加密签名\n<!-- - **加密／解密** 现在支持 AES 算法的加解密 -->\n\n## 参考\n- [https://1024tools.com/hmac](https://1024tools.com/hmac)\n- [http://www.yuangongju.com/encrypt](http://www.yuangongju.com/encrypt)\n","slug":"tool-crypto","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5m00575gqojepml5wj"},{"title":"Node 使用 crypto-js 进行散列和加解密算法","date":"2017-12-20T21:50:57.000Z","_content":"\n昨天写一个[在线加密工具](/2017/12/19/tool-crypto/)，今天介绍下使用 Node 如何使用 [crypto-js](https://github.com/brix/crypto-js) 包实现散列运算及加密。\n\n<!-- more --><!-- toc -->\n- **散列** MD5 SHA1 HmacMD5 HmacSHA1\n- **对称加密** AES DES TripleDES\n首先我想强调一下 MD5 等散列运算，属于一种**不可逆**的加密。为什么我要提到这一点，因为以前真的有一个同事跟我争论，说 MD5 可以解密，并信誓旦旦的找到在线工具给我演示，现在想起来我都哭笑不得。\n\n> 将数据（如一段文字）运算变为另一固定长度值，是散列算法的基础原理\n\n通过这段描述，我们需要注意两个点，**一段文字**和**固定长度**，运算的结果是固定长度，但是作为数据源的一段文字却没有限制长度，理论上这段文字可以无限大。那么问题来了，以 MD5 为例，他可以任意长度的数据加密到 32 位长度，如果他竟然可以解密的话，那他岂不是成了最牛逼的压缩工具了，还要那些压缩工具干啥。\n\n之所以有些工具可以将它解密，是因为散列算法生成的结果是不变的，我们大可以将常用的数据算出 MD5 值并一一对应储存起来，这样一些常用的 MD5 就可以反推出原数据。这也是数据库单纯使用 MD5 等散列算法加密储存密码带来的隐患性。\n\n好，扯的有点远，先回来看看 crypto-js 怎么使用。\n\n## 下载\nnpm\n```bash\n$ npm install --save crypto-js\n```\nyarn\n```bash\n$ yarn add crypto-js\n```\n\n## 散列\nMD5 等散列算法，因为计算结果的唯一性，常被用来作为检验文件是否被修改，如果某人\n给你网传了一份数据，并把他计算得到的 MD5 告诉你，你拿到数据后也计算下 MD5 值，\n如果一致，则数据在传递的过程中没有被修改过（等等，如果这个 MD5 值也在传递过程修\n改了呢？闭嘴，就你话多），我们看下如何计算\n```java\nvar CryptoJS = require(\"crypto-js\");\n\nvar hash = CryptoJS.MD5('message');\nconsole.log(hash.toString());   // 78e731027d8fd50ed642340b7c9a63b3\nvar hash = CryptoJS.SHA1('message');\nconsole.log(hash.toString());   // 6f9b9af3cd6e8b8a73c2cdced37fe9f59226e27d\n```\n\n### Hmac\n> 1996年后被证实存在弱点，可以被加以破解，对于需要高度安全性的数据，专家一般建议改用其他算法，如SHA-2。2004年，证实MD5算法无法防止碰撞（collision），因此不适用于安全性认证，如SSL公开密钥认证或是数字签名等用途。\n\n想想也是，任意长度的本文都可以压缩到 32 位来表达，肯定会有可能产生重复，并且上边提到过，所有人运算得到的结果都是一样的，那这样数据的安全性就有了隐患，即使现在有个 `SHA1, SHA256, SHA512` 等等的 Plus 算法，但原理终归是一样的。同样一个密码，我如何跟其他人计算的不一样呢？稍微思考一下，你可能会得到这样的结果，我可以在原数据后面跟一个只有我和朋友才知道的数据（secret key），带着他一起计算，这样别人得到的结果肯定就不一样了。\n对，这就是 Hmac 算法的原理\n```javascript\nvar CryptoJS = require(\"crypto-js\");\n\nvar hash = CryptoJS.HmacMD5('message', 'secret-key');\nconsole.log(hash.toString());   // 48ef0b47f0dde34665d4a3f548c2c591\nvar hash = CryptoJS.SHA1('message', 'secret-key');\nconsole.log(hash.toString());   // 48de2656eac2c9c21b04faeec4f1be9672ef53c1\n```\n就这样，同样的文本因为有了 `secret-key` 的加入，计算的 MD5 ／SHA1 就不再相同，你可以为自己的项目准备不同的 `secret-key` ，并最好定期更换。\n\n## 对称加密\n对称加密顾名思义，加解密双方使用相同的 key，就可以对数据进行加解密操作，注意，这里是可以解密，那就意味着，加密的结果长度取决于愿数据的长度，数据越大，结果越大。\n```java\nvar result = CryptoJS.AES.encrypt('message', 'secret-key').toString()\nconsole.log(result);    // U2FsdGVkX1+deb0glX+i9JpO9WiqJAXRVNnTD+3aeK8=\nvar msg = CryptoJS.AES.decrypt(result, 'secret-key').toString(CryptoJS.enc.Utf8);\nconsole.log(msg);       // message\n```\n并且每次计算的加密结果都是不一样的，这样也就减少了碰撞几率，加强了数据安全性。\n还有更多算法见[文档](https://github.com/brix/crypto-js#list-of-modules)\n\n## 更多思考\n有对称加密，就有不对称加密，这种情况加解密双方使用的 key 就是不一样的了，这样就\n避免了前面提到的，这个 key 在传递的过程中被窃取的情况，目前这也是最安全的加密方\n式，但是不在本次文章的探讨范围内，以后有机会我们再聊。\n\n## 参考\n- [MD5](https://zh.wikipedia.org/wiki/MD5)\n- [crypto-js](https://code.google.com/archive/p/crypto-js/)\n","source":"_posts/2017-12-20-cryptojs.md","raw":"---\ntitle: Node 使用 crypto-js 进行散列和加解密算法\ndate: 2017-12-20 21:50:57\ntags: [node]\n---\n\n昨天写一个[在线加密工具](/2017/12/19/tool-crypto/)，今天介绍下使用 Node 如何使用 [crypto-js](https://github.com/brix/crypto-js) 包实现散列运算及加密。\n\n<!-- more --><!-- toc -->\n- **散列** MD5 SHA1 HmacMD5 HmacSHA1\n- **对称加密** AES DES TripleDES\n首先我想强调一下 MD5 等散列运算，属于一种**不可逆**的加密。为什么我要提到这一点，因为以前真的有一个同事跟我争论，说 MD5 可以解密，并信誓旦旦的找到在线工具给我演示，现在想起来我都哭笑不得。\n\n> 将数据（如一段文字）运算变为另一固定长度值，是散列算法的基础原理\n\n通过这段描述，我们需要注意两个点，**一段文字**和**固定长度**，运算的结果是固定长度，但是作为数据源的一段文字却没有限制长度，理论上这段文字可以无限大。那么问题来了，以 MD5 为例，他可以任意长度的数据加密到 32 位长度，如果他竟然可以解密的话，那他岂不是成了最牛逼的压缩工具了，还要那些压缩工具干啥。\n\n之所以有些工具可以将它解密，是因为散列算法生成的结果是不变的，我们大可以将常用的数据算出 MD5 值并一一对应储存起来，这样一些常用的 MD5 就可以反推出原数据。这也是数据库单纯使用 MD5 等散列算法加密储存密码带来的隐患性。\n\n好，扯的有点远，先回来看看 crypto-js 怎么使用。\n\n## 下载\nnpm\n```bash\n$ npm install --save crypto-js\n```\nyarn\n```bash\n$ yarn add crypto-js\n```\n\n## 散列\nMD5 等散列算法，因为计算结果的唯一性，常被用来作为检验文件是否被修改，如果某人\n给你网传了一份数据，并把他计算得到的 MD5 告诉你，你拿到数据后也计算下 MD5 值，\n如果一致，则数据在传递的过程中没有被修改过（等等，如果这个 MD5 值也在传递过程修\n改了呢？闭嘴，就你话多），我们看下如何计算\n```java\nvar CryptoJS = require(\"crypto-js\");\n\nvar hash = CryptoJS.MD5('message');\nconsole.log(hash.toString());   // 78e731027d8fd50ed642340b7c9a63b3\nvar hash = CryptoJS.SHA1('message');\nconsole.log(hash.toString());   // 6f9b9af3cd6e8b8a73c2cdced37fe9f59226e27d\n```\n\n### Hmac\n> 1996年后被证实存在弱点，可以被加以破解，对于需要高度安全性的数据，专家一般建议改用其他算法，如SHA-2。2004年，证实MD5算法无法防止碰撞（collision），因此不适用于安全性认证，如SSL公开密钥认证或是数字签名等用途。\n\n想想也是，任意长度的本文都可以压缩到 32 位来表达，肯定会有可能产生重复，并且上边提到过，所有人运算得到的结果都是一样的，那这样数据的安全性就有了隐患，即使现在有个 `SHA1, SHA256, SHA512` 等等的 Plus 算法，但原理终归是一样的。同样一个密码，我如何跟其他人计算的不一样呢？稍微思考一下，你可能会得到这样的结果，我可以在原数据后面跟一个只有我和朋友才知道的数据（secret key），带着他一起计算，这样别人得到的结果肯定就不一样了。\n对，这就是 Hmac 算法的原理\n```javascript\nvar CryptoJS = require(\"crypto-js\");\n\nvar hash = CryptoJS.HmacMD5('message', 'secret-key');\nconsole.log(hash.toString());   // 48ef0b47f0dde34665d4a3f548c2c591\nvar hash = CryptoJS.SHA1('message', 'secret-key');\nconsole.log(hash.toString());   // 48de2656eac2c9c21b04faeec4f1be9672ef53c1\n```\n就这样，同样的文本因为有了 `secret-key` 的加入，计算的 MD5 ／SHA1 就不再相同，你可以为自己的项目准备不同的 `secret-key` ，并最好定期更换。\n\n## 对称加密\n对称加密顾名思义，加解密双方使用相同的 key，就可以对数据进行加解密操作，注意，这里是可以解密，那就意味着，加密的结果长度取决于愿数据的长度，数据越大，结果越大。\n```java\nvar result = CryptoJS.AES.encrypt('message', 'secret-key').toString()\nconsole.log(result);    // U2FsdGVkX1+deb0glX+i9JpO9WiqJAXRVNnTD+3aeK8=\nvar msg = CryptoJS.AES.decrypt(result, 'secret-key').toString(CryptoJS.enc.Utf8);\nconsole.log(msg);       // message\n```\n并且每次计算的加密结果都是不一样的，这样也就减少了碰撞几率，加强了数据安全性。\n还有更多算法见[文档](https://github.com/brix/crypto-js#list-of-modules)\n\n## 更多思考\n有对称加密，就有不对称加密，这种情况加解密双方使用的 key 就是不一样的了，这样就\n避免了前面提到的，这个 key 在传递的过程中被窃取的情况，目前这也是最安全的加密方\n式，但是不在本次文章的探讨范围内，以后有机会我们再聊。\n\n## 参考\n- [MD5](https://zh.wikipedia.org/wiki/MD5)\n- [crypto-js](https://code.google.com/archive/p/crypto-js/)\n","slug":"cryptojs","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5n005a5gqoyp94us9x"},{"title":"Linux 多窗口工具 Screen","date":"2017-12-21T09:25:09.000Z","_content":"\n在写这篇文章的时候，我意识到我可能在总结一些过时的东西。\n\n<!-- more --><!-- toc -->\n> GNU Screen是一款由GNU计划开发的用于命令行终端切换的自由软件。用户可以通过该软件同时连接多个本地或远程的命令行会话，并在其间自由切换。\n\nScreen 可以多开窗口并灵活切换，然而这一点它不如 [Tmux](/2017/09/24/tmux/) 灵活和可扩展。因为每个窗口之间进程互不影响，它也可以起到在后台运行程序的作用，然后这一点它又不如 [nohup](/2017/08/15/linux-2017-08-15-nohup/) 来的方便。比上不足比下有余，然而及时是过时，但是没有被淘汰，那就有总结的必要，也正因为此，我们只来谈谈最常用的部分。\n\n## 下载\nCentOS\n```bash\n$ yum install screen\n```\nUbuntu\n```bash\n$ apt install screen\n```\nMacOS\n```bash\n$ brew install screen\n```\n\n## 创建窗口\n输入命令 `screen` 既可以创建新窗口\n```bash\n$ screen\n$ screen -ls\n```\n```bash\nThere is a screen on:\n    67784.ttys036.wxnacydeMacBook-Pro    (Attached)\n1 Socket in /tmp/uscreens/S-wxnacy.\n```\n进入窗口后，界面就像重新打开一次终端，初次外并无区别，随后执行 `screen -ls` 列出当前存在的窗口，会发现 `<pid>.<session-name> <status>` 样式的列表，`Attached` 代表该窗口处于连接状态。\n\n## 断开\n输入如下命令或键入 `C-a d (ctrl-a d)` 即可断开当前窗口\n```bash\n$ screen -d\n```\n```bash\n[detached from 67784.ttys036.wxnacydeMacBook-Pro]\n```\n出现如上字样，即从窗口断开，此时键入 `screen -ls` 会发现窗口状态变为 `Detached`\n\n## 重连\n```bash\n$ screen -r 67784\n$ screen -r ttys036.wxnacydeMacBook-Pro\n```\n使用 `-r` 命令即可重连窗口，后面可以跟 `pid` 或 `screen-name`，第二种方式好像名字太长了，下面我们介绍创建指定名字的窗口\n## 创建指定名字窗口\n```bash\n$ screen -S wxnacy\n```\n使用 `-S` 参数既可创建指定名称的窗口，此时查看屏幕列表会发现如下列表\n```bash\nThere is a screen on:\n    67784.ttys036.wxnacydeMacBook-Pro    (Detached)\n    76023.wxnacy    (Attached)\n1 Socket in /tmp/uscreens/S-wxnacy.\n```\n由此可见我们应该更多的使用这种方式创建窗口\n\n## 强制断开\n如果在服务器与其他人共享一个账号，其他人也可以链接你创建的 screen 如果他忘记退出，或者你是非正常退出的终端，下次链接就会失败\n```bash\nThere is a screen on:\n    17814.wxnacy    (Attached)\nThere is no screen to be resumed matching 17814.\n```\n显示该正在连接，不能在连接，这时候如果不考虑其他情况，可以强行将屏幕断开链接\n```bash\n$ screen -d wxnacy\n```\n这样其他人会自动断开连接。\n\n## 相同名字带来的麻烦\n`-S` 很方便，用不好也很麻烦，因为如果我忘了之前生成功一个 wxnacy 名字的屏幕，再次执行该命令，会再次生成一个相同名字的屏幕，但是 pid 会不同\n```bash\nThere is a screen on:\n    67784.wxnacy    (Attached)\n    76023.wxnacy    (Attached)\n1 Socket in /tmp/uscreens/S-wxnacy.\n```\n下次重连使用 `screen -r wxnacy` 就会报错\n```bash\nThere are several suitable screens on:\n    67784.wxnacy    (Attached)\n    76023.wxnacy    (Attached)\nType \"screen [-d] -r [pid.]tty.host\" to resume one of them.\n```\n程序提示使用 `67784.wxnacy` 的方式进入或断开连接，我们先断开，在连接，成功了。\n\n但这样太麻烦了，还是换成不同的名字比较好，需要删除一个屏幕，这时候分两种情况，连接状态和断开状态。\n\n首先如何判断现在是否处于屏幕连接中，前面提到，外观上两者区别不大，此时可以使用组合键 `C-a w` ，如果处于连接状态，左下角会显示，所有窗口列表。\n\n连接中\n```bash\n$ exit [screen -X quit]\n```\n```bash\n[screen is terminating]\n```\n非常简单，使用 `exit` 就可以删除当前屏幕，第二种可以，但是何必多输入这么命令呢\n\n断开连接\n```bash\n$ screen -r [-S] 67784.wxnacy -X quit\n```\n说白了，就是先连接，在执行 `-X quit` 删除，是的，连接命令后可以直接跟上想要在屏幕中执行的命令，但是 `exit` 在这时候无效。\n\n了解了这些东西就可以使用它工作了，如果你有更高的需求可以参看这篇[文章](http://man.linuxde.net/screen)\n","source":"_posts/2017-12-21-screen.md","raw":"---\ntitle: Linux 多窗口工具 Screen\ndate: 2017-12-21 09:25:09\ntags: [linux]\n---\n\n在写这篇文章的时候，我意识到我可能在总结一些过时的东西。\n\n<!-- more --><!-- toc -->\n> GNU Screen是一款由GNU计划开发的用于命令行终端切换的自由软件。用户可以通过该软件同时连接多个本地或远程的命令行会话，并在其间自由切换。\n\nScreen 可以多开窗口并灵活切换，然而这一点它不如 [Tmux](/2017/09/24/tmux/) 灵活和可扩展。因为每个窗口之间进程互不影响，它也可以起到在后台运行程序的作用，然后这一点它又不如 [nohup](/2017/08/15/linux-2017-08-15-nohup/) 来的方便。比上不足比下有余，然而及时是过时，但是没有被淘汰，那就有总结的必要，也正因为此，我们只来谈谈最常用的部分。\n\n## 下载\nCentOS\n```bash\n$ yum install screen\n```\nUbuntu\n```bash\n$ apt install screen\n```\nMacOS\n```bash\n$ brew install screen\n```\n\n## 创建窗口\n输入命令 `screen` 既可以创建新窗口\n```bash\n$ screen\n$ screen -ls\n```\n```bash\nThere is a screen on:\n    67784.ttys036.wxnacydeMacBook-Pro    (Attached)\n1 Socket in /tmp/uscreens/S-wxnacy.\n```\n进入窗口后，界面就像重新打开一次终端，初次外并无区别，随后执行 `screen -ls` 列出当前存在的窗口，会发现 `<pid>.<session-name> <status>` 样式的列表，`Attached` 代表该窗口处于连接状态。\n\n## 断开\n输入如下命令或键入 `C-a d (ctrl-a d)` 即可断开当前窗口\n```bash\n$ screen -d\n```\n```bash\n[detached from 67784.ttys036.wxnacydeMacBook-Pro]\n```\n出现如上字样，即从窗口断开，此时键入 `screen -ls` 会发现窗口状态变为 `Detached`\n\n## 重连\n```bash\n$ screen -r 67784\n$ screen -r ttys036.wxnacydeMacBook-Pro\n```\n使用 `-r` 命令即可重连窗口，后面可以跟 `pid` 或 `screen-name`，第二种方式好像名字太长了，下面我们介绍创建指定名字的窗口\n## 创建指定名字窗口\n```bash\n$ screen -S wxnacy\n```\n使用 `-S` 参数既可创建指定名称的窗口，此时查看屏幕列表会发现如下列表\n```bash\nThere is a screen on:\n    67784.ttys036.wxnacydeMacBook-Pro    (Detached)\n    76023.wxnacy    (Attached)\n1 Socket in /tmp/uscreens/S-wxnacy.\n```\n由此可见我们应该更多的使用这种方式创建窗口\n\n## 强制断开\n如果在服务器与其他人共享一个账号，其他人也可以链接你创建的 screen 如果他忘记退出，或者你是非正常退出的终端，下次链接就会失败\n```bash\nThere is a screen on:\n    17814.wxnacy    (Attached)\nThere is no screen to be resumed matching 17814.\n```\n显示该正在连接，不能在连接，这时候如果不考虑其他情况，可以强行将屏幕断开链接\n```bash\n$ screen -d wxnacy\n```\n这样其他人会自动断开连接。\n\n## 相同名字带来的麻烦\n`-S` 很方便，用不好也很麻烦，因为如果我忘了之前生成功一个 wxnacy 名字的屏幕，再次执行该命令，会再次生成一个相同名字的屏幕，但是 pid 会不同\n```bash\nThere is a screen on:\n    67784.wxnacy    (Attached)\n    76023.wxnacy    (Attached)\n1 Socket in /tmp/uscreens/S-wxnacy.\n```\n下次重连使用 `screen -r wxnacy` 就会报错\n```bash\nThere are several suitable screens on:\n    67784.wxnacy    (Attached)\n    76023.wxnacy    (Attached)\nType \"screen [-d] -r [pid.]tty.host\" to resume one of them.\n```\n程序提示使用 `67784.wxnacy` 的方式进入或断开连接，我们先断开，在连接，成功了。\n\n但这样太麻烦了，还是换成不同的名字比较好，需要删除一个屏幕，这时候分两种情况，连接状态和断开状态。\n\n首先如何判断现在是否处于屏幕连接中，前面提到，外观上两者区别不大，此时可以使用组合键 `C-a w` ，如果处于连接状态，左下角会显示，所有窗口列表。\n\n连接中\n```bash\n$ exit [screen -X quit]\n```\n```bash\n[screen is terminating]\n```\n非常简单，使用 `exit` 就可以删除当前屏幕，第二种可以，但是何必多输入这么命令呢\n\n断开连接\n```bash\n$ screen -r [-S] 67784.wxnacy -X quit\n```\n说白了，就是先连接，在执行 `-X quit` 删除，是的，连接命令后可以直接跟上想要在屏幕中执行的命令，但是 `exit` 在这时候无效。\n\n了解了这些东西就可以使用它工作了，如果你有更高的需求可以参看这篇[文章](http://man.linuxde.net/screen)\n","slug":"screen","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5p005c5gqovkfnmqs5"},{"title":"《新参者》：好东西是不会消亡的","date":"2017-12-26T09:09:02.000Z","_content":"\n> 好东西是不会消亡的\n\n<!-- more -->\n“新参者” 顾名思义，新来的人，小说中有两个新参者，一个在希望中而死，一个用情办案而活。\n\n在看到第二个小故事的时候，我就做好了准备，这又是一部由几个看似独立却又互相关联的故事组成的。我看的东野圭吾第一本小说《解忧杂货店》也是类似的结构，然而你每次看他的小说都有让人感觉耳目一新的感觉。\n\n一提到东野圭吾，大家的印象都是本格推理，但是现在他的作品更多的是在探讨犯罪的动机，以及破案过程中透露出来的人情味，深入了解总让人唏嘘不已，尤其是这部作品，加贺用“情”破案，也是颠覆了我对推理小说的认知。\n\n开篇六个小故事，看似毫不相干，却都被一幢命案连接着。六个家庭六个温情的小故事，每个都可以单独拿出来写个完整的故事，更有意思的是，总是身穿T恤短袖衬衫的加贺，在办案的过程中还不忘替这些人处理看似琐碎却又温情的家务事。\n\n等到真正讲命案本身的时候，我们已经对案件了解的非常清楚了，开始我还感觉这样写有点故弄玄虚，但是在看他们讨论剧情时，简单几句话就贯穿了前边提到的那些人和事，我才觉得唯有这样写，这里才能看的这么痛快。\n\n在第四个小故事中，加贺和钟表店小学徒聊天时，听到他说机器表行业正在萎缩，加贺坚定的回复到，“没关系，好东西是不会消亡的”，看到这时感觉很熟悉，总感觉在哪听过。过了两天，又看了一次《肖申克的救赎》，才发现这句话出自这里，剧中主人公安迪在给老瑞德的信中是这样写的，\"记住，瑞德，希望是个好东西，也许是世间最好的东西，好东西从不会逝去\"。小说中峰子就是在幸福的希望死去的，或许这是唯一让人感到欣慰的地方。\n\n结尾处仙贝店阳光的黄发小女孩，呼应了开头的故事。这个总是穿着T恤短袖衬衫的警员，阳光了整个人形町，温暖了这个冬天。\n","source":"_posts/2017-12-26-xincanzhe.md","raw":"---\ntitle: 《新参者》：好东西是不会消亡的\ndate: 2017-12-26 09:09:02\ntags: [杂文]\n---\n\n> 好东西是不会消亡的\n\n<!-- more -->\n“新参者” 顾名思义，新来的人，小说中有两个新参者，一个在希望中而死，一个用情办案而活。\n\n在看到第二个小故事的时候，我就做好了准备，这又是一部由几个看似独立却又互相关联的故事组成的。我看的东野圭吾第一本小说《解忧杂货店》也是类似的结构，然而你每次看他的小说都有让人感觉耳目一新的感觉。\n\n一提到东野圭吾，大家的印象都是本格推理，但是现在他的作品更多的是在探讨犯罪的动机，以及破案过程中透露出来的人情味，深入了解总让人唏嘘不已，尤其是这部作品，加贺用“情”破案，也是颠覆了我对推理小说的认知。\n\n开篇六个小故事，看似毫不相干，却都被一幢命案连接着。六个家庭六个温情的小故事，每个都可以单独拿出来写个完整的故事，更有意思的是，总是身穿T恤短袖衬衫的加贺，在办案的过程中还不忘替这些人处理看似琐碎却又温情的家务事。\n\n等到真正讲命案本身的时候，我们已经对案件了解的非常清楚了，开始我还感觉这样写有点故弄玄虚，但是在看他们讨论剧情时，简单几句话就贯穿了前边提到的那些人和事，我才觉得唯有这样写，这里才能看的这么痛快。\n\n在第四个小故事中，加贺和钟表店小学徒聊天时，听到他说机器表行业正在萎缩，加贺坚定的回复到，“没关系，好东西是不会消亡的”，看到这时感觉很熟悉，总感觉在哪听过。过了两天，又看了一次《肖申克的救赎》，才发现这句话出自这里，剧中主人公安迪在给老瑞德的信中是这样写的，\"记住，瑞德，希望是个好东西，也许是世间最好的东西，好东西从不会逝去\"。小说中峰子就是在幸福的希望死去的，或许这是唯一让人感到欣慰的地方。\n\n结尾处仙贝店阳光的黄发小女孩，呼应了开头的故事。这个总是穿着T恤短袖衬衫的警员，阳光了整个人形町，温暖了这个冬天。\n","slug":"xincanzhe","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5q005f5gqomlv2gsf5"},{"title":"推荐几款获取当前 ip 的免费 api 接口","date":"2017-12-22T10:15:48.000Z","_content":"\n平常工作中经常需要查询当前 ip 地址，开发中也需要通过 ip 获取一些位置信息，在这里记录几款可以使用的免费 api 接口。\n\n<!-- more --><!-- toc -->\n\n## ip-api\nip-api 是我最早找过的服务，[官网](http://ip-api.com/)可以查询当前访问的 ip 位置等信息。\n\n![/images/ip-api.png](/images/ip-api_1231.png)\n\n接口文档为 http://ip-api.com/docs/api:json\n\n访问非常简单\n\n```bash\n$ curl http://ip-api.com/json\n```\n```json\n{\n    \"as\": \"AS22552 eSited Solutions\",\n    \"city\": \"Orlando\",\n    \"country\": \"United States\",\n    \"countryCode\": \"US\",\n    \"isp\": \"eSited Solutions\",\n    \"lat\": 28.5106,\n    \"lon\": -81.1976,\n    \"org\": \"eSited Solutions\",\n    \"query\": \"104.222.246.242\",\n    \"region\": \"FL\",\n    \"regionName\": \"Florida\",\n    \"status\": \"success\",\n    \"timezone\": \"America/New_York\",\n    \"zip\": \"32825\"\n\n}\n```\n\n除了 ip 信息，还有当前位置的很多信息，虽然只能获取服务器的精准经纬度，但是在很多情况下已经很有用了。这个接口唯一的不足是不支持 https，所幸有支持的。\n\n## ipapi\n\n[ipapi](https://ipapi.co/) 跟上边基本一样，官网要漂亮点\n\n![/images/ipapi.png](/images/ipapico.png)\n\n[api](https://ipapi.co/api/?shell#introduction) 文档也有更好的支持，关键是支持 https\n\n```bash\n$ curl 'https://ipapi.co/json/'\n```\n```json\n{\n    \"ip\": \"104.222.246.242\",\n    \"city\": \"Orlando\",\n    \"region\": \"Florida\",\n    \"region_code\": \"FL\",\n    \"country\": \"US\",\n    \"country_name\": \"United States\",\n    \"postal\": \"32825\",\n    \"latitude\": 28.5106,\n    \"longitude\": -81.1976,\n    \"timezone\": \"America/New_York\",\n    \"asn\": \"AS22552\",\n    \"org\": \"eSited Solutions\"\n\n}\n```\n\n拿到的结果基本一致，看你的需求选择哪个吧，这两个都不需要 `secret-key` 即可使用，但也有限制，应该是根据 ip 来做的。\n\n## ipstack\n\n严格意义上，该方案不是免费的，但它有一定的免费额度，每月 1 万条，一般个人使用应该也足够了，优点是获取的信息更全，微软、三星等大厂都有使用。\n\n![ipstack1](/images/ipstack_1258.png)\n\napi 的使用需要先选择一种付费方案注册账号，根据返回的信息不同，可以选择的方案还是挺多的。\n\n![ipstack2](/images/ipstack1_1237.png)\n\napi 的调用也很简单\n\n```bash\nhttp://api.ipstack.com/104.222.246.242?access_key={access_key}\n```\n```bash\n{\n    \"city\": null,\n    \"continent_code\": \"NA\",\n    \"continent_name\": \"North America\",\n    \"country_code\": \"US\",\n    \"country_name\": \"United States\",\n    \"ip\": \"104.222.246.242\",\n    \"latitude\": 37.751,\n    \"location\": {\n        \"calling_code\": \"1\",\n        \"capital\": \"Washington D.C.\",\n        \"country_flag\": \"http://assets.ipstack.com/flags/us.svg\",\n        \"country_flag_emoji\": \"🇺🇸\",\n        \"country_flag_emoji_unicode\": \"U+1F1FA U+1F1F8\",\n        \"geoname_id\": null,\n        \"is_eu\": false,\n        \"languages\": [\n            {\n                \"code\": \"en\",\n                \"name\": \"English\",\n                \"native\": \"English\"\n            }\n        ]\n    },\n    \"longitude\": -97.822,\n    \"region_code\": null,\n    \"region_name\": null,\n    \"type\": \"ipv4\",\n    \"zip\": null\n}\n```\n## 其他\n\n另外还有一些其他推荐，但使用起来都没有这两个方便\n- [whatismyip](https://www.whatismyip.com/)\n- [ip 地址](https://zh-hans.ipshu.com/ipv4/124.95.0.91)\n","source":"_posts/2017-12-22-ip-api.md","raw":"---\ntitle: 推荐几款获取当前 ip 的免费 api 接口\ndate: 2017-12-22 10:15:48\ntags: [工具]\n---\n\n平常工作中经常需要查询当前 ip 地址，开发中也需要通过 ip 获取一些位置信息，在这里记录几款可以使用的免费 api 接口。\n\n<!-- more --><!-- toc -->\n\n## ip-api\nip-api 是我最早找过的服务，[官网](http://ip-api.com/)可以查询当前访问的 ip 位置等信息。\n\n![/images/ip-api.png](/images/ip-api_1231.png)\n\n接口文档为 http://ip-api.com/docs/api:json\n\n访问非常简单\n\n```bash\n$ curl http://ip-api.com/json\n```\n```json\n{\n    \"as\": \"AS22552 eSited Solutions\",\n    \"city\": \"Orlando\",\n    \"country\": \"United States\",\n    \"countryCode\": \"US\",\n    \"isp\": \"eSited Solutions\",\n    \"lat\": 28.5106,\n    \"lon\": -81.1976,\n    \"org\": \"eSited Solutions\",\n    \"query\": \"104.222.246.242\",\n    \"region\": \"FL\",\n    \"regionName\": \"Florida\",\n    \"status\": \"success\",\n    \"timezone\": \"America/New_York\",\n    \"zip\": \"32825\"\n\n}\n```\n\n除了 ip 信息，还有当前位置的很多信息，虽然只能获取服务器的精准经纬度，但是在很多情况下已经很有用了。这个接口唯一的不足是不支持 https，所幸有支持的。\n\n## ipapi\n\n[ipapi](https://ipapi.co/) 跟上边基本一样，官网要漂亮点\n\n![/images/ipapi.png](/images/ipapico.png)\n\n[api](https://ipapi.co/api/?shell#introduction) 文档也有更好的支持，关键是支持 https\n\n```bash\n$ curl 'https://ipapi.co/json/'\n```\n```json\n{\n    \"ip\": \"104.222.246.242\",\n    \"city\": \"Orlando\",\n    \"region\": \"Florida\",\n    \"region_code\": \"FL\",\n    \"country\": \"US\",\n    \"country_name\": \"United States\",\n    \"postal\": \"32825\",\n    \"latitude\": 28.5106,\n    \"longitude\": -81.1976,\n    \"timezone\": \"America/New_York\",\n    \"asn\": \"AS22552\",\n    \"org\": \"eSited Solutions\"\n\n}\n```\n\n拿到的结果基本一致，看你的需求选择哪个吧，这两个都不需要 `secret-key` 即可使用，但也有限制，应该是根据 ip 来做的。\n\n## ipstack\n\n严格意义上，该方案不是免费的，但它有一定的免费额度，每月 1 万条，一般个人使用应该也足够了，优点是获取的信息更全，微软、三星等大厂都有使用。\n\n![ipstack1](/images/ipstack_1258.png)\n\napi 的使用需要先选择一种付费方案注册账号，根据返回的信息不同，可以选择的方案还是挺多的。\n\n![ipstack2](/images/ipstack1_1237.png)\n\napi 的调用也很简单\n\n```bash\nhttp://api.ipstack.com/104.222.246.242?access_key={access_key}\n```\n```bash\n{\n    \"city\": null,\n    \"continent_code\": \"NA\",\n    \"continent_name\": \"North America\",\n    \"country_code\": \"US\",\n    \"country_name\": \"United States\",\n    \"ip\": \"104.222.246.242\",\n    \"latitude\": 37.751,\n    \"location\": {\n        \"calling_code\": \"1\",\n        \"capital\": \"Washington D.C.\",\n        \"country_flag\": \"http://assets.ipstack.com/flags/us.svg\",\n        \"country_flag_emoji\": \"🇺🇸\",\n        \"country_flag_emoji_unicode\": \"U+1F1FA U+1F1F8\",\n        \"geoname_id\": null,\n        \"is_eu\": false,\n        \"languages\": [\n            {\n                \"code\": \"en\",\n                \"name\": \"English\",\n                \"native\": \"English\"\n            }\n        ]\n    },\n    \"longitude\": -97.822,\n    \"region_code\": null,\n    \"region_name\": null,\n    \"type\": \"ipv4\",\n    \"zip\": null\n}\n```\n## 其他\n\n另外还有一些其他推荐，但使用起来都没有这两个方便\n- [whatismyip](https://www.whatismyip.com/)\n- [ip 地址](https://zh-hans.ipshu.com/ipv4/124.95.0.91)\n","slug":"ip-api","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5r005h5gqorvffripk"},{"title":"Mysql 实现 Rank 排名查询","date":"2017-12-24T10:12:26.000Z","_content":"\n\nMysql 中没有像 Oracle 中那样的 Rank 函数来实现查询的排名排序，但是我们可以用一\n些基础查询语句来实现同样的效果。\n\n<!-- more -->\n先创建一个表来作为例子\n```mysql\ndrop table if exists `post`;\ncreate table `post`(\n  id int(11) not null AUTO_INCREMENT,\n  url VARCHAR(512) not null default '' COMMENT '地址',\n  pv int(11) not null default 0 COMMENT '访问量',\n  primary key(`id`)\n) engine=InnoDB default charset=utf8mb4 COMMENT '博客';\nINSERT INTO `post` (`url`, `pv`) VALUES\n('/p/1', 22),\n('/p/2', 21),\n('/p/3', 50),\n('/p/4', 5),\n('/p/5', 15),\n('/p/6', 23),\n('/p/7', 45),\n('/p/8', 35),\n('/p/9', 20);\n```\n我们想要对 pv 字段进行倒序排名\n```mysql\nselect @rank := @rank +1 as rank, url, pv from `post` p, (select @rank := 0) r order by pv desc;\n```\n如果你按照我上边的语句执行，你会得到如下的结果\n```bash\n1    /p/3    50\n2    /p/7    45\n3    /p/8    35\n4    /p/6    23\n5    /p/1    22\n6    /p/2    21\n7    /p/9    20\n8    /p/5    15\n9    /p/4    5\n```\n有结果来看，我们已经得到了想要的结果，下面我们来看看怎么实现的。\n\n首先简单说下 Mysql 中的变量，需要以 `@` 开头，及 `@rank`，想要给变量赋值分两种。\nSET 语句\n```mysql\nset @name = 'wxnacy';\nselect @name;\n```\nSELECT 语句\n```mysql\nselect @name := 'wxnacy';\n```\n两者的区别在于 set 命令需要两条命令查询，select 命令中使用 `:=` 赋值\n而 `@rank := @rank + 1` 就是在查询语句中达到自增的目的，也就变相的实现了 `rank` 函数。\n","source":"_posts/2017-12-24-mysql-select-rank.md","raw":"---\ntitle: Mysql 实现 Rank 排名查询\ntags:\n  - mysql\ndate: 2017-12-24 10:12:26\n---\n\n\nMysql 中没有像 Oracle 中那样的 Rank 函数来实现查询的排名排序，但是我们可以用一\n些基础查询语句来实现同样的效果。\n\n<!-- more -->\n先创建一个表来作为例子\n```mysql\ndrop table if exists `post`;\ncreate table `post`(\n  id int(11) not null AUTO_INCREMENT,\n  url VARCHAR(512) not null default '' COMMENT '地址',\n  pv int(11) not null default 0 COMMENT '访问量',\n  primary key(`id`)\n) engine=InnoDB default charset=utf8mb4 COMMENT '博客';\nINSERT INTO `post` (`url`, `pv`) VALUES\n('/p/1', 22),\n('/p/2', 21),\n('/p/3', 50),\n('/p/4', 5),\n('/p/5', 15),\n('/p/6', 23),\n('/p/7', 45),\n('/p/8', 35),\n('/p/9', 20);\n```\n我们想要对 pv 字段进行倒序排名\n```mysql\nselect @rank := @rank +1 as rank, url, pv from `post` p, (select @rank := 0) r order by pv desc;\n```\n如果你按照我上边的语句执行，你会得到如下的结果\n```bash\n1    /p/3    50\n2    /p/7    45\n3    /p/8    35\n4    /p/6    23\n5    /p/1    22\n6    /p/2    21\n7    /p/9    20\n8    /p/5    15\n9    /p/4    5\n```\n有结果来看，我们已经得到了想要的结果，下面我们来看看怎么实现的。\n\n首先简单说下 Mysql 中的变量，需要以 `@` 开头，及 `@rank`，想要给变量赋值分两种。\nSET 语句\n```mysql\nset @name = 'wxnacy';\nselect @name;\n```\nSELECT 语句\n```mysql\nselect @name := 'wxnacy';\n```\n两者的区别在于 set 命令需要两条命令查询，select 命令中使用 `:=` 赋值\n而 `@rank := @rank + 1` 就是在查询语句中达到自增的目的，也就变相的实现了 `rank` 函数。\n","slug":"mysql-select-rank","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5s005k5gqos382eja3"},{"title":"关于美国税收","date":"2017-12-23T16:40:45.000Z","_content":"\n\n活得越久，你就会越觉得活在中国是幸福的，大部分人不知道还有购物税这个东西，至少他们没有意识到有这个东西存在。所以我们不用像美国人一样购物时，要快速心算一遍算上税这个商品要多少钱，是的，他们商品的标价并不是最后价钱，需要再算上税，原来所见即所得也是很幸福的。\n\n<!-- more --><!-- toc -->\n那美国的税是怎么算的\n\n> 美国各地的消费税由两个部分组成：州消费税 (State Sales Tax) + 地方消费税 (Local Sales Tax) = 综合消费税 (Combined Sales Tax)。州消费税由州政府制定为固定，而地方消费税则由各县市政府制定，也就是说，同一州的两个城市可能会有不同的消费税。\n\n美国各地的税率可以参考该网站 [Sales Tax Rates](http://www.sale-tax.com/)\n## 邮编\n那如果你要做一个美国电商平台，该怎么计算用户应该付多少税呢（是的，这依然一篇技术博客），因为税收跟地址有非常大的关系，那可以作为最好的比对依据就是**[邮编 ](https://www.youbianku.com/%E7%BE%8E%E5%9B%BD)**\n\n在这方面有专业的[官方网站](https://www.unitedstateszipcodes.org/)可用\n![/images/zip-code.png](/images/zip-code.png)\n他们提供了专业的[数据库](https://www.unitedstateszipcodes.org/zip-code-database/)文件，有收费也有免费，你可以根据自己需求使用。\n\n## 获取税率\n[Taxjar](https://www.taxjar.com) 是一款根据邮编查询税率的第三方服务，亚马逊、PayPal、Stripe 等国外购物或支付平台都有接入，我们可以通过[开发者平台 ](https://developers.taxjar.com/api/reference/)接入，需要注册拿到 `api-key`，这步不在赘述。\n本文以 Python 为例演示\n下载\n```bash\n$ sudo pip install taxjar\n```\n初始化\n```python\nimport taxjar\nclient = taxjar.Client(api_key='48ceecccc8af930bd02597aec0f84a78')\n```\n通过邮编和城市位置获取税率\n```python\n# United States (ZIP+4)\nrates = client.rates_for_location('90404-3370')\n\n# United States (ZIP w/ Optional Params)\nrates = client.rates_for_location('90404', {\n    'city': 'SANTA MONICA',\n    'country': 'US'\n})\n\n# International Examples (Requires City and Country)\nrates = client.rates_for_location('V5K0A1', {\n    'city': 'VANCOUVER',\n    'country': 'CA'\n})\n\nrates = client.rates_for_location('00150', {\n    'city': 'HELSINKI',\n    'country': 'FI'\n})\n```\n结果样例\n```python\n<TaxJarRate {\n    'city': 'SANTA MONICA',\n    'zip': '90404',\n    'combined_district_rate': 0.025,\n    'state_rate': 0.0625,\n    'city_rate': 0,\n    'county': 'LOS ANGELES',\n    'state': 'CA',\n    'combined_rate': 0.0975,\n    'county_rate': 0.01,\n    'freight_taxable': False\n}>\n```\n结果中包含州和地方的税率，东西很多，该取哪个值呢。\n> Combined Rate: Overall Sale Tax rate which includes the State, County, City and District portions. This is the rate that should be used to determine how much Sales Tax to collect for an order\n\n根据文档的描述，我们取综合税率 `combined_rate` 即可，拿到这个结果就可以进行工作了，如果需要 Python 的更多用法，见[文档 ](https://github.com/taxjar/taxjar-python)\n## 参考\n- [Sales Tax Rates](http://www.sale-tax.com/)\n- [美國哪州消費購物最划算？美國免稅州及各州消費稅率查詢一覽表（2017最新）](https://www.guruin.com/articles/1363)\n","source":"_posts/2017-12-23-us-tax.md","raw":"---\ntitle: 关于美国税收\ntags:\n  - 工具\ndate: 2017-12-23 16:40:45\n---\n\n\n活得越久，你就会越觉得活在中国是幸福的，大部分人不知道还有购物税这个东西，至少他们没有意识到有这个东西存在。所以我们不用像美国人一样购物时，要快速心算一遍算上税这个商品要多少钱，是的，他们商品的标价并不是最后价钱，需要再算上税，原来所见即所得也是很幸福的。\n\n<!-- more --><!-- toc -->\n那美国的税是怎么算的\n\n> 美国各地的消费税由两个部分组成：州消费税 (State Sales Tax) + 地方消费税 (Local Sales Tax) = 综合消费税 (Combined Sales Tax)。州消费税由州政府制定为固定，而地方消费税则由各县市政府制定，也就是说，同一州的两个城市可能会有不同的消费税。\n\n美国各地的税率可以参考该网站 [Sales Tax Rates](http://www.sale-tax.com/)\n## 邮编\n那如果你要做一个美国电商平台，该怎么计算用户应该付多少税呢（是的，这依然一篇技术博客），因为税收跟地址有非常大的关系，那可以作为最好的比对依据就是**[邮编 ](https://www.youbianku.com/%E7%BE%8E%E5%9B%BD)**\n\n在这方面有专业的[官方网站](https://www.unitedstateszipcodes.org/)可用\n![/images/zip-code.png](/images/zip-code.png)\n他们提供了专业的[数据库](https://www.unitedstateszipcodes.org/zip-code-database/)文件，有收费也有免费，你可以根据自己需求使用。\n\n## 获取税率\n[Taxjar](https://www.taxjar.com) 是一款根据邮编查询税率的第三方服务，亚马逊、PayPal、Stripe 等国外购物或支付平台都有接入，我们可以通过[开发者平台 ](https://developers.taxjar.com/api/reference/)接入，需要注册拿到 `api-key`，这步不在赘述。\n本文以 Python 为例演示\n下载\n```bash\n$ sudo pip install taxjar\n```\n初始化\n```python\nimport taxjar\nclient = taxjar.Client(api_key='48ceecccc8af930bd02597aec0f84a78')\n```\n通过邮编和城市位置获取税率\n```python\n# United States (ZIP+4)\nrates = client.rates_for_location('90404-3370')\n\n# United States (ZIP w/ Optional Params)\nrates = client.rates_for_location('90404', {\n    'city': 'SANTA MONICA',\n    'country': 'US'\n})\n\n# International Examples (Requires City and Country)\nrates = client.rates_for_location('V5K0A1', {\n    'city': 'VANCOUVER',\n    'country': 'CA'\n})\n\nrates = client.rates_for_location('00150', {\n    'city': 'HELSINKI',\n    'country': 'FI'\n})\n```\n结果样例\n```python\n<TaxJarRate {\n    'city': 'SANTA MONICA',\n    'zip': '90404',\n    'combined_district_rate': 0.025,\n    'state_rate': 0.0625,\n    'city_rate': 0,\n    'county': 'LOS ANGELES',\n    'state': 'CA',\n    'combined_rate': 0.0975,\n    'county_rate': 0.01,\n    'freight_taxable': False\n}>\n```\n结果中包含州和地方的税率，东西很多，该取哪个值呢。\n> Combined Rate: Overall Sale Tax rate which includes the State, County, City and District portions. This is the rate that should be used to determine how much Sales Tax to collect for an order\n\n根据文档的描述，我们取综合税率 `combined_rate` 即可，拿到这个结果就可以进行工作了，如果需要 Python 的更多用法，见[文档 ](https://github.com/taxjar/taxjar-python)\n## 参考\n- [Sales Tax Rates](http://www.sale-tax.com/)\n- [美國哪州消費購物最划算？美國免稅州及各州消費稅率查詢一覽表（2017最新）](https://www.guruin.com/articles/1363)\n","slug":"us-tax","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5u005m5gqo9m3jm8ht"},{"title":"MessagePack 实现序列化","date":"2017-12-25T20:50:35.000Z","_content":"\n> MessagePack是一种高效的二进制序列化格式。它允许您像JSON一样在多个语言之间交换数据。但是，它更快并且更小。小整数被编码为一个字节,和典型的短字符串只需要除了字符串本身的一个额外字节。\n\n<!-- more --><!-- toc -->\n在使用 Python 做 Redis 开发时，发现 Python 自带的序列化都不太好用，对于复杂的数据结构的处理都不到位，经过领导推荐，开始使用 [MessagePack](https://msgpack.org/) 进行序列化编程。它是一个跨语言工具，支持十几种语言，在传输数据上号称比 JSON 更小更快。\n\n本文以 Python 为例简单介绍\n## 下载\n```bash\n$ pip install msgpack-python\n```\n## Hello World\nMessagePack 的序列化方法很简单 `packb()` ，反序列 `unpackb()`\n```python\nIn [1]: import msgpack\n\nIn [2]: msgpack.packb('Hello World')                    # 序列化\nOut[2]: b'\\xabHello World'\n\nIn [3]: msgpack.unpackb(msgpack.packb('Hello World'))   # 反序列\nOut[3]: b'Hello World'\n```\n反序列后输出结果依然是字节数组类型，这不是我们想要的，想要得到字符串类型，我们需要用到 `encoding` 参数\n```python\nIn [4]: msgpack.unpackb(msgpack.packb('Hello World'), encoding='utf-8')\nOut[4]: 'Hello World'\n```\n\n## JSON\n```python\nIn [10]: msgpack.unpackb(msgpack.packb({\"name\": \"wxnacy\"}), encoding='utf-8')\nOut[10]: {'name': 'wxnacy'}\n```\n简单的 JSON 数据直接使用即可，但是如果 JSON 中的数据类型比较特殊，比如 `datetime` 就会有点麻烦\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport msgpack\nfrom datetime import datetime\n\nuseful_dict = {\n    \"id\": 1,\n    \"created\": datetime.now(),\n}\npacked_dict = msgpack.packb(useful_dict)\n```\n```bash\nTypeError: can't serialize datetime.datetime(2017, 12, 25, 21, 26, 48, 277551)\n```\n如上，直接进行序列化会报错，此时需要教给它怎么处理这种类型\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport msgpack\nfrom datetime import datetime\n\nuseful_dict = {\n    \"id\": 1,\n    \"created\": datetime.now(),\n}\ndef decode_datetime(obj):\n    if '__datetime__' in obj:\n        obj = datetime.strptime(obj[\"as_str\"], \"%Y%m%dT%H:%M:%S.%f\")\n    return obj\n\ndef encode_datetime(obj):\n    if isinstance(obj, datetime):\n        return {'__datetime__': True, 'as_str': obj.strftime(\"%Y%m%dT%H:%M:%S.%f\")}\n    return obj\n\npacked_dict = msgpack.packb(useful_dict, default=encode_datetime)\nthis_dict_again = msgpack.unpackb(packed_dict, object_hook=decode_datetime,\n        encoding='utf-8')\n```\n通过 `default` 和 `object_hook` 分别制定序列和反序列的解析方法，通过上边这个例子，我们照葫芦画瓢把其他它不能识别的类都解析出来。\n\n","source":"_posts/2017-12-25-msgpack.md","raw":"---\ntitle: MessagePack 实现序列化\ndate: 2017-12-25 20:50:35\ntags: [工具]\n---\n\n> MessagePack是一种高效的二进制序列化格式。它允许您像JSON一样在多个语言之间交换数据。但是，它更快并且更小。小整数被编码为一个字节,和典型的短字符串只需要除了字符串本身的一个额外字节。\n\n<!-- more --><!-- toc -->\n在使用 Python 做 Redis 开发时，发现 Python 自带的序列化都不太好用，对于复杂的数据结构的处理都不到位，经过领导推荐，开始使用 [MessagePack](https://msgpack.org/) 进行序列化编程。它是一个跨语言工具，支持十几种语言，在传输数据上号称比 JSON 更小更快。\n\n本文以 Python 为例简单介绍\n## 下载\n```bash\n$ pip install msgpack-python\n```\n## Hello World\nMessagePack 的序列化方法很简单 `packb()` ，反序列 `unpackb()`\n```python\nIn [1]: import msgpack\n\nIn [2]: msgpack.packb('Hello World')                    # 序列化\nOut[2]: b'\\xabHello World'\n\nIn [3]: msgpack.unpackb(msgpack.packb('Hello World'))   # 反序列\nOut[3]: b'Hello World'\n```\n反序列后输出结果依然是字节数组类型，这不是我们想要的，想要得到字符串类型，我们需要用到 `encoding` 参数\n```python\nIn [4]: msgpack.unpackb(msgpack.packb('Hello World'), encoding='utf-8')\nOut[4]: 'Hello World'\n```\n\n## JSON\n```python\nIn [10]: msgpack.unpackb(msgpack.packb({\"name\": \"wxnacy\"}), encoding='utf-8')\nOut[10]: {'name': 'wxnacy'}\n```\n简单的 JSON 数据直接使用即可，但是如果 JSON 中的数据类型比较特殊，比如 `datetime` 就会有点麻烦\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport msgpack\nfrom datetime import datetime\n\nuseful_dict = {\n    \"id\": 1,\n    \"created\": datetime.now(),\n}\npacked_dict = msgpack.packb(useful_dict)\n```\n```bash\nTypeError: can't serialize datetime.datetime(2017, 12, 25, 21, 26, 48, 277551)\n```\n如上，直接进行序列化会报错，此时需要教给它怎么处理这种类型\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport msgpack\nfrom datetime import datetime\n\nuseful_dict = {\n    \"id\": 1,\n    \"created\": datetime.now(),\n}\ndef decode_datetime(obj):\n    if '__datetime__' in obj:\n        obj = datetime.strptime(obj[\"as_str\"], \"%Y%m%dT%H:%M:%S.%f\")\n    return obj\n\ndef encode_datetime(obj):\n    if isinstance(obj, datetime):\n        return {'__datetime__': True, 'as_str': obj.strftime(\"%Y%m%dT%H:%M:%S.%f\")}\n    return obj\n\npacked_dict = msgpack.packb(useful_dict, default=encode_datetime)\nthis_dict_again = msgpack.unpackb(packed_dict, object_hook=decode_datetime,\n        encoding='utf-8')\n```\n通过 `default` 和 `object_hook` 分别制定序列和反序列的解析方法，通过上边这个例子，我们照葫芦画瓢把其他它不能识别的类都解析出来。\n\n","slug":"msgpack","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5v005p5gqoelg5dtei"},{"title":"Node ORM 框架 Sequelize","date":"2017-12-28T16:40:44.000Z","_content":"\n\n我感觉使用任何一门语言作为后台开发都应该了解他的 [ORM（Object Relational Mapping）](https://zh.wikipedia.org/wiki/%E5%AF%B9%E8%B1%A1%E5%85%B3%E7%B3%BB%E6%98%A0%E5%B0%84) 框架，这是对开发效率的负责，省掉写 Sql 的时间，把它留给更有意义的地方。\n\n<!-- more --><!-- toc -->\n本篇以 Mysql 数据库为例，带大家了解 Node 中最多人用的 ORM 框架 [Sequelize](http://docs.sequelizejs.com/)\n## 下载\nnpm\n```bash\n$ npm install sequelize --save\n$ npm install mysql2 --save\n```\nyarn\n```bash\n$ yarn add sequelize\n$ yarn add mysql2\n```\n\n## 创建连接\n使用配置\n```javascript\nconst Sequelize = require('sequelize');\nconst sequelize = new Sequelize('database', 'username', 'password', {\n    host: 'localhost',\n    dialect: 'mysql',\n    pool: {\n        max: 5,\n        min: 0,\n        acquire: 30000,\n        idle: 10000\n    },\n});\n```\n使用连接URI\n```javascript\nconst sequelize = new Sequelize('postgres://user:pass@example.com:5432/dbname');\n```\nSequelize 更多用法见 [API](http://docs.sequelizejs.com/class/lib/sequelize.js~Sequelize.html)\n\n## 创建 Model\n首先使用执行下面的语句创建一个测试表 `test`\n```mysql\nCREATE TABLE `test` (\n    `id` int(11) NOT NULL AUTO_INCREMENT,\n    `name` varchar(32) NOT NULL DEFAULT '',\n    `create_ts` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8mb4 COMMENT='test';\n```\n接下来创建 Model\n```javascript\nconst Test = sequelize.define('test', {\n    id: {\n        type: Sequelize.INTEGER,\n        primaryKey: true,\n        autoIncrement: true,\n    },\n    name: {\n        type: Sequelize.STRING\n    },\n    create_ts: {\n        type: Sequelize.DATE\n    }\n},{\n    timestamps: false,\n    freezeTableName: true,\n});\n```\n更多 [dataTypes](http://docs.sequelizejs.com/manual/tutorial/models-definition.html#data-types) 以字段检查 [validations](http://docs.sequelizejs.com/manual/tutorial/models-definition.html#validations)\n`define` 方法的前两个参数比较好理解，第一个是表名，第二个定义了表中字段的映射关系，第三个比较有意思，待会儿我们在聊它的作用。\n\n## 使用 Model\n首先来创建一条数据，需要用到 `build(), save()` 两个方法\n```java\nTest.build({name: \"wxnacy\"}).save()\n    .then(() => {sequelize.close()})\n    .catch(() => {sequelize.close()})\n```\n`save()` 方法回来一个 Premise ，并且必须在结束时加上 `sequelize.close()` 方法关闭连接，目前我还没找到自动关闭的地方，如果你知道，一定要告诉我。\n查询\n```java\nTest.findOne({where: {name: 'wxnacy'}}).then(test => {\n    console.log(test.id, test.name)     // 1 wxnacy\n    sequelize.close()\n}).catch(e => {\n    sequelize.close()\n})\n```\n这种查询方式很简洁，写起来很爽，跟 `Rails` 很像，这时我们可以来说说前边创建 Model 时提到的 `timestamps, freezeTableName` 两个参数的作用，你去掉这两个参数在执行一次，它会报错，日志中给出的 Sql 语句是这样的\n```mysql\nSELECT `id`, `name`, `create_ts`, `createdAt`, `updatedAt` FROM `tests` AS `test` WHERE `test`.`name` = 'wxnacy' LIMIT 1;\n```\n两个奇怪的点，凭空多出了 `createAt, updateAt` 两个字段，原表名默认来 `tests`，Sequelize 很“贴心”，直接将表名加了个复数，也把我们表中最常用的两个字段也默认加了进去，BUT，表名我就不想加复数，我的创建时间修改时间也不打算叫这个名字，所以这里需要一些额外的控制\n- **freezeTableName** 是否将表名默认使用 `define()` 的第一个参数，默认 false\n- **tableName** 自定义表名\n- **timestamps** 控制是否添加（createAt，updateAt）两个字段，默认 true\n- **createdAt** 如果 `timestamps` 等于 true，可以设置这个参数，false 为不添加，或者可以为它设置别名，比如 `create_ts`\n- **updatedAt** 同上\n- **deletedAt** 同上\n我知道你想说什么，如果每个 Model 都这样设置那是要累死的，所以他必须要有一个可以设置全局的地方，比如\n```javascript\nconst sequelize = new Sequelize(db, user, pw, {\n    define: {\n        timestamps: false,\n        freezeTableName: true,\n    }\n})\n```\n更多的 define 配置请见[文档](http://docs.sequelizejs.com/manual/tutorial/models-definition.html#configuration)\n好了，我们来写一个完整的例子吧\n```java\nconst Sequelize = require('sequelize');\nconst sequelize = new Sequelize('database', 'username', 'password', {\n    host: 'localhost',\n    dialect: 'mysql',\n    pool: {\n        max: 5,\n        min: 0,\n        acquire: 30000,\n        idle: 10000\n    },\n});\nconst Test = sequelize.define('test', {\n    id: {\n        type: Sequelize.INTEGER,\n        primaryKey: true,\n        autoIncrement: true,\n    },\n    name: {\n        type: Sequelize.STRING,\n        allowNull: true,\n        defaultValue: ''\n    },\n    create_ts: {\n        type: Sequelize.DATE\n    }\n});\nTest.build({name: \"wxnacy\"}).save()\n    .then(() => {\n        return Test.findById(1)\n    }).then(item => {\n        console.log(item.id, item.name);    // 1 wxnacy\n        sequelize.close()\n    }).catch(e => {\n        console.log(e);\n        sequelize.close()\n    })\n```\n### 常用的方法\n```java\nTest.create({name: \"wxnacy\"})\nTest.build({name: \"wxnacy\"}).save()\nTest.findById(1).then(test => {console.log(test.toJSON());})\nTest.findOne({name: \"wxnacy\"})\nTest.findAll({where: {id: [1, 2, 3]}})\nTest.findAll({\n    where: {\n        id: [1, 2, 3],\n        name: \"wxnacy\",\n        name: {\n            [Op.like]: 'wxn'\n        },\n    },\n    order: [\n        ['id'],\n        ['create_ts', 'DESC']\n    ],\n    limit: 10\n})\nTest.all()\nTest.findById(1).then(item => {\n    item.name = 'winn'\n    item.save()\n})\nTest.findOrCreate({where: {name: \"wxnacy\"}, defaults: {}})\n    .spread((blog, created) => {\n        console.log(blog.get({plain: true}));\n        console.log(created);\n    })\n\n```\nModel 更多使用方法见[文档](http://docs.sequelizejs.com/manual/tutorial/models-usage.html)\n","source":"_posts/2017-12-28-node-sequelize.md","raw":"---\ntitle: Node ORM 框架 Sequelize\ntags:\n  - node\ndate: 2017-12-28 16:40:44\n---\n\n\n我感觉使用任何一门语言作为后台开发都应该了解他的 [ORM（Object Relational Mapping）](https://zh.wikipedia.org/wiki/%E5%AF%B9%E8%B1%A1%E5%85%B3%E7%B3%BB%E6%98%A0%E5%B0%84) 框架，这是对开发效率的负责，省掉写 Sql 的时间，把它留给更有意义的地方。\n\n<!-- more --><!-- toc -->\n本篇以 Mysql 数据库为例，带大家了解 Node 中最多人用的 ORM 框架 [Sequelize](http://docs.sequelizejs.com/)\n## 下载\nnpm\n```bash\n$ npm install sequelize --save\n$ npm install mysql2 --save\n```\nyarn\n```bash\n$ yarn add sequelize\n$ yarn add mysql2\n```\n\n## 创建连接\n使用配置\n```javascript\nconst Sequelize = require('sequelize');\nconst sequelize = new Sequelize('database', 'username', 'password', {\n    host: 'localhost',\n    dialect: 'mysql',\n    pool: {\n        max: 5,\n        min: 0,\n        acquire: 30000,\n        idle: 10000\n    },\n});\n```\n使用连接URI\n```javascript\nconst sequelize = new Sequelize('postgres://user:pass@example.com:5432/dbname');\n```\nSequelize 更多用法见 [API](http://docs.sequelizejs.com/class/lib/sequelize.js~Sequelize.html)\n\n## 创建 Model\n首先使用执行下面的语句创建一个测试表 `test`\n```mysql\nCREATE TABLE `test` (\n    `id` int(11) NOT NULL AUTO_INCREMENT,\n    `name` varchar(32) NOT NULL DEFAULT '',\n    `create_ts` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8mb4 COMMENT='test';\n```\n接下来创建 Model\n```javascript\nconst Test = sequelize.define('test', {\n    id: {\n        type: Sequelize.INTEGER,\n        primaryKey: true,\n        autoIncrement: true,\n    },\n    name: {\n        type: Sequelize.STRING\n    },\n    create_ts: {\n        type: Sequelize.DATE\n    }\n},{\n    timestamps: false,\n    freezeTableName: true,\n});\n```\n更多 [dataTypes](http://docs.sequelizejs.com/manual/tutorial/models-definition.html#data-types) 以字段检查 [validations](http://docs.sequelizejs.com/manual/tutorial/models-definition.html#validations)\n`define` 方法的前两个参数比较好理解，第一个是表名，第二个定义了表中字段的映射关系，第三个比较有意思，待会儿我们在聊它的作用。\n\n## 使用 Model\n首先来创建一条数据，需要用到 `build(), save()` 两个方法\n```java\nTest.build({name: \"wxnacy\"}).save()\n    .then(() => {sequelize.close()})\n    .catch(() => {sequelize.close()})\n```\n`save()` 方法回来一个 Premise ，并且必须在结束时加上 `sequelize.close()` 方法关闭连接，目前我还没找到自动关闭的地方，如果你知道，一定要告诉我。\n查询\n```java\nTest.findOne({where: {name: 'wxnacy'}}).then(test => {\n    console.log(test.id, test.name)     // 1 wxnacy\n    sequelize.close()\n}).catch(e => {\n    sequelize.close()\n})\n```\n这种查询方式很简洁，写起来很爽，跟 `Rails` 很像，这时我们可以来说说前边创建 Model 时提到的 `timestamps, freezeTableName` 两个参数的作用，你去掉这两个参数在执行一次，它会报错，日志中给出的 Sql 语句是这样的\n```mysql\nSELECT `id`, `name`, `create_ts`, `createdAt`, `updatedAt` FROM `tests` AS `test` WHERE `test`.`name` = 'wxnacy' LIMIT 1;\n```\n两个奇怪的点，凭空多出了 `createAt, updateAt` 两个字段，原表名默认来 `tests`，Sequelize 很“贴心”，直接将表名加了个复数，也把我们表中最常用的两个字段也默认加了进去，BUT，表名我就不想加复数，我的创建时间修改时间也不打算叫这个名字，所以这里需要一些额外的控制\n- **freezeTableName** 是否将表名默认使用 `define()` 的第一个参数，默认 false\n- **tableName** 自定义表名\n- **timestamps** 控制是否添加（createAt，updateAt）两个字段，默认 true\n- **createdAt** 如果 `timestamps` 等于 true，可以设置这个参数，false 为不添加，或者可以为它设置别名，比如 `create_ts`\n- **updatedAt** 同上\n- **deletedAt** 同上\n我知道你想说什么，如果每个 Model 都这样设置那是要累死的，所以他必须要有一个可以设置全局的地方，比如\n```javascript\nconst sequelize = new Sequelize(db, user, pw, {\n    define: {\n        timestamps: false,\n        freezeTableName: true,\n    }\n})\n```\n更多的 define 配置请见[文档](http://docs.sequelizejs.com/manual/tutorial/models-definition.html#configuration)\n好了，我们来写一个完整的例子吧\n```java\nconst Sequelize = require('sequelize');\nconst sequelize = new Sequelize('database', 'username', 'password', {\n    host: 'localhost',\n    dialect: 'mysql',\n    pool: {\n        max: 5,\n        min: 0,\n        acquire: 30000,\n        idle: 10000\n    },\n});\nconst Test = sequelize.define('test', {\n    id: {\n        type: Sequelize.INTEGER,\n        primaryKey: true,\n        autoIncrement: true,\n    },\n    name: {\n        type: Sequelize.STRING,\n        allowNull: true,\n        defaultValue: ''\n    },\n    create_ts: {\n        type: Sequelize.DATE\n    }\n});\nTest.build({name: \"wxnacy\"}).save()\n    .then(() => {\n        return Test.findById(1)\n    }).then(item => {\n        console.log(item.id, item.name);    // 1 wxnacy\n        sequelize.close()\n    }).catch(e => {\n        console.log(e);\n        sequelize.close()\n    })\n```\n### 常用的方法\n```java\nTest.create({name: \"wxnacy\"})\nTest.build({name: \"wxnacy\"}).save()\nTest.findById(1).then(test => {console.log(test.toJSON());})\nTest.findOne({name: \"wxnacy\"})\nTest.findAll({where: {id: [1, 2, 3]}})\nTest.findAll({\n    where: {\n        id: [1, 2, 3],\n        name: \"wxnacy\",\n        name: {\n            [Op.like]: 'wxn'\n        },\n    },\n    order: [\n        ['id'],\n        ['create_ts', 'DESC']\n    ],\n    limit: 10\n})\nTest.all()\nTest.findById(1).then(item => {\n    item.name = 'winn'\n    item.save()\n})\nTest.findOrCreate({where: {name: \"wxnacy\"}, defaults: {}})\n    .spread((blog, created) => {\n        console.log(blog.get({plain: true}));\n        console.log(created);\n    })\n\n```\nModel 更多使用方法见[文档](http://docs.sequelizejs.com/manual/tutorial/models-usage.html)\n","slug":"node-sequelize","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5w005r5gqoalbr545x"},{"title":"Python 装饰器 decorator","date":"2017-12-27T09:12:51.000Z","_content":"\n\n为什么会用到装饰器？\n\n<!-- more --><!-- toc -->\n## Why\n首先谈一个场景，在项目迭代开发过程中，有些函数已经过时，需要删除，但是为了项目的平稳过度又不能立马物理删除，但是需要在别人用到这个函数时，给他一个提醒“这个函数已经过期了，继续使用将不再安全”，当别人看到这个提醒就会意识到以后不再使用，久而久之当所有人都不用时，我们就可以真的删掉这个函数。\n\n如果是在 Java 中那太简单了，使用注解 `@Deprecated` 即可搞定\n```java\n@Deprecated\nprivate String getName() {\n    return 'Hello World'\n}\n```\nPython 中也有类似 `注解` 的功能 `装饰器`。\n\n## What\n装饰器是什么？\n简单点概况，装饰器允许将**方法或类当做函数传入**，最后**返回一个方法或函数**，并在**不改变原来方法结构**的基础上，完成**额外**的任务。\n如果你是 Python 初学者可能对把 `方法当参数传入` 感到困惑，它其实就像这样。\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\ndef func1():\n    print('this is func1')\n\ndef func2(func):\n    print('{} is deprecated'.format(func))\n    func()\n    return func\n\nif __name__ == \"__main__\":\n     res = func2(func1)\n     print(res)\n```\n```python\n<function func1 at 0x1014f8f28> is deprecated\nthis is func1\n<function func1 at 0x1014f8f28>\n```\n`func1` 传入 `func2` 中，`func2` 会打印 `func1` 已经过期，并执行它，最后返回它。这样好像已经把 `deprecated` 的功能实现了，但这种用法太别扭了，就好像把装饰器倒过来用了。这只是解释下原理，下面我们来看装饰器该怎么写。\n## How\nPython 中是没有一个现成的 `@deprecated` 装饰器来让我们用的，需要我们自己来实现一个。\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfrom functools import wraps\n\ndef deprecated(func):\n    @wraps(func)\n    def warpped(*args, **kwargs):\n        \"\"\"warpped doc\"\"\"\n        print('args {}'.format(args))\n        print('kwargs {}'.format(kwargs))\n        print('this {} method is deprecated'.format(func))\n        return func(*args, **kwargs)\n    return warpped\n\n@deprecated\ndef get_name(*args, **kwargs):\n    \"\"\"get_name doc\"\"\"\n    return 'Hello World'\n\nif __name__ == \"__main__\":\n     get_name('wxnacy', 'blog')\n     get_name(name='wxnacy')\n```\n```python\nargs ('wxnacy', 'blog')\nkwargs {}\nthis <function get_name at 0x10e2ae158> method is deprecated\nargs ()\nkwargs {'name': 'wxnacy'}\nthis <function get_name at 0x10e2ae158> method is deprecated\n```\n你大可以先将上面这段代码执行一下，应该会得到后边的结果。如果成功了，那它已经可以工作了，如果你还想要了解装饰器应该怎么写，请往下看。\n在方法 `get_name()` 上面跟上 `@deprecated` ，是装饰器的使用方法，没什么可说的。\n再看 `deprecated()` 方法，我们可以分为下面几个部分\n- **deprecated(func)** 装饰器方法名，将一个方法作为参数\n- **@wraps(func)** 内置装饰器，一会儿我再深讲，现在你要知道我们应该带着它\n- `warpped(*args, **kwargs)` 内部处理方法，参数为 `func` 所带的参数\n- `return func(*args, **kwargs)` 将 `func` 和参数原封不动返回\n- `return warpped` 返回内置方法的结果\n通过这样的分解，装饰器的构造就已经一目了然了\n\n## wraps\n如果你试下把 `@wraps` 去掉，再次运行，它仍然可以工作。你要问了，有它没它都一样，还那么麻烦带着它干啥，网上很多文章也都没有带着它，但是真的没关系吗？先看个例子。\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\ndef deprecated(func):\n    def warpped(*args, **kwargs):\n        \"\"\"warpped doc\"\"\"\n        print('this {} method is deprecated'.format(func))\n        return func(*args, **kwargs)\n    return warpped\n\n@deprecated\ndef get_name(*args, **kwargs):\n    \"\"\"get_name doc\"\"\"\n    return 'Hello World'\n\nif __name__ == \"__main__\":\n     print(get_name.__name__)   # ==> warpped\n     print(get_name.__doc__)    # ==> warpped doc\n```\n很明显是有问题的，这次我们没有带上 `@wraps` ，然后打印方法的 `__name__, __doc__` ，不管得到的是什么，反正不是我们想要的结果。\n> Without the use of this decorator factory, the name of the example function would have been 'wrapper', and the docstring of the original example() would have been lost.\n\n装饰器已经将所调函数包装为另一个函数了，`@wraps` 装饰器就是为了消除这样的副作用。\n\n## 带参数的装饰器\n刚才我们使用的装饰器没有额外传递参数，`func` 是默认传递过去的，肯定会有情况需要我们手动传入参数。设想一种情况，我们有一个方法，原来应该从 Mysql 中读取数据，但因为数据量比较大，我们希望每次先从缓存 Redis 中读取数据，如果没有在走 Mysql，我们来模拟一下这种情况。\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom functools import wraps\n\nREDIS_DATA = {\"name\": \"redis-wxnacy\"}\nMYSQL_DATA = {\"name\": \"mysql-wxnacy\"}\n\ndef from_cache(key):\n    def warpper(func):\n        @wraps(func)\n        def warpped(*args, **kwargs):\n            res = REDIS_DATA.get(key)\n            if res:\n                return res\n            return func(*args, **kwargs)\n        return warpped\n    return warpper\n\n@from_cache('name')\ndef get_data():\n    res = MYSQL_DATA.get('name')\n    return res\n\ndef get_data1():\n    res = MYSQL_DATA.get('name')\n    return res\n\nif __name__ == \"__main__\":\n     print(get_data())      # ==> redis-wxnacy\n     print(get_data1())     # ==> mysql-wxnacy\n```\n同样的方法，区别在于有没有使用装饰器 `@from_cache()` ，分别得到了各自源的数据。\n\n`from_cache()` 方法就是一个可以传递额外参数的装饰器，咋一看很吓人，那么多层，但其实它只是在简单装饰器外边又包了一层，供参数传入，并在 `warpped` 发放中判断应该直接返回数据，还是返回当前传入的方法。\n\n掌握这两种方法，在开发中可以节省很多时间，希望你能多联系，熟能生巧\n## 更多模块\n### functools.update_wrapper\n功能和 `wraps` 类似\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom functools import update_wrapper\n\ndef deprecated(func):\n    def warpped(*args, **kwargs):\n        \"\"\"warpped doc\"\"\"\n        print('this {} method is deprecated'.format(func))\n        return func(*args, **kwargs)\n    return update_wrapper(warpped, func)\n```\n\n## 参考资料\n- [wraps](https://docs.python.org/2/library/functools.html#functools.wraps)\n","source":"_posts/2017-12-27-python-decorator.md","raw":"---\ntitle: Python 装饰器 decorator\ntags:\n  - python\ndate: 2017-12-27 09:12:51\n---\n\n\n为什么会用到装饰器？\n\n<!-- more --><!-- toc -->\n## Why\n首先谈一个场景，在项目迭代开发过程中，有些函数已经过时，需要删除，但是为了项目的平稳过度又不能立马物理删除，但是需要在别人用到这个函数时，给他一个提醒“这个函数已经过期了，继续使用将不再安全”，当别人看到这个提醒就会意识到以后不再使用，久而久之当所有人都不用时，我们就可以真的删掉这个函数。\n\n如果是在 Java 中那太简单了，使用注解 `@Deprecated` 即可搞定\n```java\n@Deprecated\nprivate String getName() {\n    return 'Hello World'\n}\n```\nPython 中也有类似 `注解` 的功能 `装饰器`。\n\n## What\n装饰器是什么？\n简单点概况，装饰器允许将**方法或类当做函数传入**，最后**返回一个方法或函数**，并在**不改变原来方法结构**的基础上，完成**额外**的任务。\n如果你是 Python 初学者可能对把 `方法当参数传入` 感到困惑，它其实就像这样。\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\ndef func1():\n    print('this is func1')\n\ndef func2(func):\n    print('{} is deprecated'.format(func))\n    func()\n    return func\n\nif __name__ == \"__main__\":\n     res = func2(func1)\n     print(res)\n```\n```python\n<function func1 at 0x1014f8f28> is deprecated\nthis is func1\n<function func1 at 0x1014f8f28>\n```\n`func1` 传入 `func2` 中，`func2` 会打印 `func1` 已经过期，并执行它，最后返回它。这样好像已经把 `deprecated` 的功能实现了，但这种用法太别扭了，就好像把装饰器倒过来用了。这只是解释下原理，下面我们来看装饰器该怎么写。\n## How\nPython 中是没有一个现成的 `@deprecated` 装饰器来让我们用的，需要我们自己来实现一个。\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfrom functools import wraps\n\ndef deprecated(func):\n    @wraps(func)\n    def warpped(*args, **kwargs):\n        \"\"\"warpped doc\"\"\"\n        print('args {}'.format(args))\n        print('kwargs {}'.format(kwargs))\n        print('this {} method is deprecated'.format(func))\n        return func(*args, **kwargs)\n    return warpped\n\n@deprecated\ndef get_name(*args, **kwargs):\n    \"\"\"get_name doc\"\"\"\n    return 'Hello World'\n\nif __name__ == \"__main__\":\n     get_name('wxnacy', 'blog')\n     get_name(name='wxnacy')\n```\n```python\nargs ('wxnacy', 'blog')\nkwargs {}\nthis <function get_name at 0x10e2ae158> method is deprecated\nargs ()\nkwargs {'name': 'wxnacy'}\nthis <function get_name at 0x10e2ae158> method is deprecated\n```\n你大可以先将上面这段代码执行一下，应该会得到后边的结果。如果成功了，那它已经可以工作了，如果你还想要了解装饰器应该怎么写，请往下看。\n在方法 `get_name()` 上面跟上 `@deprecated` ，是装饰器的使用方法，没什么可说的。\n再看 `deprecated()` 方法，我们可以分为下面几个部分\n- **deprecated(func)** 装饰器方法名，将一个方法作为参数\n- **@wraps(func)** 内置装饰器，一会儿我再深讲，现在你要知道我们应该带着它\n- `warpped(*args, **kwargs)` 内部处理方法，参数为 `func` 所带的参数\n- `return func(*args, **kwargs)` 将 `func` 和参数原封不动返回\n- `return warpped` 返回内置方法的结果\n通过这样的分解，装饰器的构造就已经一目了然了\n\n## wraps\n如果你试下把 `@wraps` 去掉，再次运行，它仍然可以工作。你要问了，有它没它都一样，还那么麻烦带着它干啥，网上很多文章也都没有带着它，但是真的没关系吗？先看个例子。\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\ndef deprecated(func):\n    def warpped(*args, **kwargs):\n        \"\"\"warpped doc\"\"\"\n        print('this {} method is deprecated'.format(func))\n        return func(*args, **kwargs)\n    return warpped\n\n@deprecated\ndef get_name(*args, **kwargs):\n    \"\"\"get_name doc\"\"\"\n    return 'Hello World'\n\nif __name__ == \"__main__\":\n     print(get_name.__name__)   # ==> warpped\n     print(get_name.__doc__)    # ==> warpped doc\n```\n很明显是有问题的，这次我们没有带上 `@wraps` ，然后打印方法的 `__name__, __doc__` ，不管得到的是什么，反正不是我们想要的结果。\n> Without the use of this decorator factory, the name of the example function would have been 'wrapper', and the docstring of the original example() would have been lost.\n\n装饰器已经将所调函数包装为另一个函数了，`@wraps` 装饰器就是为了消除这样的副作用。\n\n## 带参数的装饰器\n刚才我们使用的装饰器没有额外传递参数，`func` 是默认传递过去的，肯定会有情况需要我们手动传入参数。设想一种情况，我们有一个方法，原来应该从 Mysql 中读取数据，但因为数据量比较大，我们希望每次先从缓存 Redis 中读取数据，如果没有在走 Mysql，我们来模拟一下这种情况。\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom functools import wraps\n\nREDIS_DATA = {\"name\": \"redis-wxnacy\"}\nMYSQL_DATA = {\"name\": \"mysql-wxnacy\"}\n\ndef from_cache(key):\n    def warpper(func):\n        @wraps(func)\n        def warpped(*args, **kwargs):\n            res = REDIS_DATA.get(key)\n            if res:\n                return res\n            return func(*args, **kwargs)\n        return warpped\n    return warpper\n\n@from_cache('name')\ndef get_data():\n    res = MYSQL_DATA.get('name')\n    return res\n\ndef get_data1():\n    res = MYSQL_DATA.get('name')\n    return res\n\nif __name__ == \"__main__\":\n     print(get_data())      # ==> redis-wxnacy\n     print(get_data1())     # ==> mysql-wxnacy\n```\n同样的方法，区别在于有没有使用装饰器 `@from_cache()` ，分别得到了各自源的数据。\n\n`from_cache()` 方法就是一个可以传递额外参数的装饰器，咋一看很吓人，那么多层，但其实它只是在简单装饰器外边又包了一层，供参数传入，并在 `warpped` 发放中判断应该直接返回数据，还是返回当前传入的方法。\n\n掌握这两种方法，在开发中可以节省很多时间，希望你能多联系，熟能生巧\n## 更多模块\n### functools.update_wrapper\n功能和 `wraps` 类似\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom functools import update_wrapper\n\ndef deprecated(func):\n    def warpped(*args, **kwargs):\n        \"\"\"warpped doc\"\"\"\n        print('this {} method is deprecated'.format(func))\n        return func(*args, **kwargs)\n    return update_wrapper(warpped, func)\n```\n\n## 参考资料\n- [wraps](https://docs.python.org/2/library/functools.html#functools.wraps)\n","slug":"python-decorator","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5x005t5gqouaw6twu7"},{"title":"2018 年，对自己的要求","date":"2018-01-01T15:48:37.000Z","_content":"\n元旦快乐！昨天总结了 2017 年，今天就来展望一下 2018 年，这不是年度计划，只是在现实的基础上定一些小目标。\n\n<!-- more --><!-- toc -->\n## 每天任务\n下面这些周期性的任务都现在正在进行的，接下来只是继续坚持而已。\n- 复习／背单词一共至少 100 个（未完成，明年的计划需要针对调整）\n- 每周读书至少 5 小时（完成，部分周的读书时长不够，但都会在次周补上）\n- 每天写一篇博客（未完成，女儿出生后就时不时会有断裂，不过都会补上）\n- 每天记录微博（未完成，后期放弃使用微博）\n\n## 总量目标\n- 全年读书至少 30 本（完成，一共读了 50 本）\n- 争取写一个自己的 Hexo 主题（未完成）\n- 对 Python 更加精进（完成）\n- 在 Vim 做到开发 Java 可以称心如意（未完成，同样是明年的目标）\n\n暂时就这么多，我尽量不做假大空的计划，这些是我真心希望并有把握能够完成的，加油 2018\n\n","source":"_posts/2018-01-01-2018-begin.md","raw":"---\ntitle: 2018 年，对自己的要求\ndate: 2018-01-01 15:48:37\ntags: [杂谈]\n---\n\n元旦快乐！昨天总结了 2017 年，今天就来展望一下 2018 年，这不是年度计划，只是在现实的基础上定一些小目标。\n\n<!-- more --><!-- toc -->\n## 每天任务\n下面这些周期性的任务都现在正在进行的，接下来只是继续坚持而已。\n- 复习／背单词一共至少 100 个（未完成，明年的计划需要针对调整）\n- 每周读书至少 5 小时（完成，部分周的读书时长不够，但都会在次周补上）\n- 每天写一篇博客（未完成，女儿出生后就时不时会有断裂，不过都会补上）\n- 每天记录微博（未完成，后期放弃使用微博）\n\n## 总量目标\n- 全年读书至少 30 本（完成，一共读了 50 本）\n- 争取写一个自己的 Hexo 主题（未完成）\n- 对 Python 更加精进（完成）\n- 在 Vim 做到开发 Java 可以称心如意（未完成，同样是明年的目标）\n\n暂时就这么多，我尽量不做假大空的计划，这些是我真心希望并有把握能够完成的，加油 2018\n\n","slug":"2018-begin","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5y005w5gqozwlsrshq"},{"title":"Linux 分析磁盘空间","date":"2017-12-29T17:00:34.000Z","_content":"\n昨天在服务器上部署 API 时，总是失败，查看日志发现磁盘空间不足，想要查看磁盘空间各种手忙脚乱，不知如何下手，懂得简单几个命令也不能称心如意的解决问题。所以痛定思痛总结了下需要用到的几种，以便以后查阅。\n\n<!-- more --><!-- toc -->\n## df\n```bash\n$ df\n```\n```bash\nFilesystem     1K-blocks    Used Available Use% Mounted on\nudev              489868       0    489868   0% /dev\ntmpfs             101612    2804     98808   3% /run\n/dev/vda1       41151808 2200772  36837608   6% /\n```\n从左到右分别标示为：文件磁盘，1K空间块数，已使用，可用，已用比例，挂载点。加上 `-h` 参数可以换算为方便的阅读方式\n```bash\n$ df -h\n```\n```bash\nFilesystem      Size  Used Avail Use% Mounted on\nudev            479M     0  479M   0% /dev\ntmpfs           100M  2.8M   97M   3% /run\n/dev/vda1        40G  2.1G   36G   6% /\n```\n### 更多参数\n```bash\n-a                      # 全部文件系统列表\n-h                      # 方便阅读方式显示\n-H                      # 等于“-h”，但是计算式，1K=1000，而不是1K=1024\n-i                      # 显示inode信息\n-k                      # 区块为1024字节\n-l                      # 只显示本地文件系统\n-m                      # 区块为1048576字节\n--no-sync               # 忽略 sync 命令\n-P                      # 输出格式为POSIX\n--sync                  # 在取得磁盘信息前，先执行sync命令\n-T                      # 文件系统类型\n--block-size=<区块大小> # 指定区块大小\n-t<文件系统类型>        # 只显示选定文件系统的磁盘信息\n-x<文件系统类型>        # 不显示选定文件系统的磁盘信息\n--help                  # 显示帮助信息\n--version               # 显示版本信息\n```\n## du\n我们已经知道当前机器的使用空间了，如果超过了 80％ 的时候，就有必要查看下是哪些文件在占用空间了，通常会是些日志文件。\n进入登陆用户根目录 `~` 执行 `du` 命令，你会得到类似这个结果\n```bash\n...\n584  ./.oh-my-zsh/themes\n8    ./.oh-my-zsh/templates\n4    ./.oh-my-zsh/log\n8    ./.oh-my-zsh/custom/plugins/example\n12   ./.oh-my-zsh/custom/plugins\n20   ./.oh-my-zsh/custom\n5328 ./.oh-my-zsh\n6144 .\n```\n`du` 会遍历当前目录和所有子目录，并把文件夹大小返回，单位 K，最后一行为当前目录总大小。\n同样的使用 `-h` 参数可以方便阅读\n```bash\n...\n584K ./.oh-my-zsh/themes\n8.0K ./.oh-my-zsh/templates\n4.0K ./.oh-my-zsh/log\n8.0K ./.oh-my-zsh/custom/plugins/example\n12K  ./.oh-my-zsh/custom/plugins\n20K  ./.oh-my-zsh/custom\n5.3M ./.oh-my-zsh\n6.0M .\n```\n但是真正使用的话你会感觉到自己机器上的文件夹太多了，因为他会所有的文件夹都遍历出来，使用 `-d , --max-depth` 来限制遍历的目录层数，后面跟上层级数字。\n```bash\n$ du -d 1\n```\n```bash\n8    ./.pip\n8    ./.ssh\n652  ./.cache\n5328 ./.oh-my-zsh\n6144 .\n```\n看，这样就简洁多了，需要注意一点，在 **CentOS 6** 版本以前，是没有缩写 `-d` 的，只能输入参数全名。\n我也可以分析指定目录\n```bash\n$ du .oh-my-zsh .pip\n```\n结合上边这些参数我们已经可以来做分析了，我通常这样做\n```bash\n$ du -hd 1 ~\n$ du -hd 1 ~/.oh-my-zsh\n...\n```\n我从用户根目录开始查看第一级目录的文件夹大小，并一直将目录层级细化，最后找到最大的文件夹，进入后通过 `ll -h` 查看哪个文件最大，`-h` 已经不需要我告诉有什么作用了。\n### 更多参数\n```bash\n-a或-all                # 显示目录中个别文件的大小。\n-b或-bytes              # 显示目录或文件大小时，以byte为单位。\n-c或--total             # 除了显示个别目录或文件的大小外，同时也显示所有目录或文件的总和。\n-D或--dereference-args  # 显示指定符号连接的源文件大小。\n-h或--human-readable    # 以K，M，G为单位，提高信息的可读性。\n-H或--si                # 与-h参数相同，但是K，M，G是以1000为换算单位。\n-k或--kilobytes         # 以1024 bytes为单位。\n-l或--count-links       # 重复计算硬件连接的文件。\n-L<符号连接>或--dereference<符号连接>   # 显示选项中所指定符号连接的源文件大小。\n-m或--megabytes         # 以1MB为单位。\n-s或--summarize         # 仅显示总计。\n-S或--separate-dirs     # 显示个别目录的大小时，并不含其子目录的大小。\n-x或--one-file-xystem   # 以一开始处理时的文件系统为准，若遇上其它不同的文件系统目录则略过。\n-X<文件>或--exclude-from=<文件>         # 在<文件>指定目录或文件。\n--exclude=<目录或文件>  # 略过指定的目录或文件。\n--max-depth=<目录层数>  # 超过指定层数的目录后，予以忽略。\n--help                  # 显示帮助。\n--version               # 显示版本信息。\n```\n\n### 排序\n\n当前目录下如果文件太多，挨个查看大小势必非常麻烦，我们可以对它进行排序，借助 `sort` 命令\n\n```bash\n$ du -d 1 -h | sort -nr\n\n148K\t./layer-v3.1.1\n116K\t./cnblogs-article-information\n 71M\t./AdminLTE-2.4.2\n 64K\t./vegobot\n 59M\t./ace\n```\n\n但是排序有些问题，因为它只按照文件数字显示大小，不考虑单位，所以不使用单位即可\n\n```bash\n$ du -d 1 | sort -nr\n$ du -d 1 | sort -nr | head     # 显示最大的前十\n$ du -d 1 | sort -nr | tail     # 显示最小的前十\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/2017-12-29-linux-device-space.md","raw":"---\ntitle: Linux 分析磁盘空间\ntags:\n  - linux\ndate: 2017-12-29 17:00:34\n---\n\n昨天在服务器上部署 API 时，总是失败，查看日志发现磁盘空间不足，想要查看磁盘空间各种手忙脚乱，不知如何下手，懂得简单几个命令也不能称心如意的解决问题。所以痛定思痛总结了下需要用到的几种，以便以后查阅。\n\n<!-- more --><!-- toc -->\n## df\n```bash\n$ df\n```\n```bash\nFilesystem     1K-blocks    Used Available Use% Mounted on\nudev              489868       0    489868   0% /dev\ntmpfs             101612    2804     98808   3% /run\n/dev/vda1       41151808 2200772  36837608   6% /\n```\n从左到右分别标示为：文件磁盘，1K空间块数，已使用，可用，已用比例，挂载点。加上 `-h` 参数可以换算为方便的阅读方式\n```bash\n$ df -h\n```\n```bash\nFilesystem      Size  Used Avail Use% Mounted on\nudev            479M     0  479M   0% /dev\ntmpfs           100M  2.8M   97M   3% /run\n/dev/vda1        40G  2.1G   36G   6% /\n```\n### 更多参数\n```bash\n-a                      # 全部文件系统列表\n-h                      # 方便阅读方式显示\n-H                      # 等于“-h”，但是计算式，1K=1000，而不是1K=1024\n-i                      # 显示inode信息\n-k                      # 区块为1024字节\n-l                      # 只显示本地文件系统\n-m                      # 区块为1048576字节\n--no-sync               # 忽略 sync 命令\n-P                      # 输出格式为POSIX\n--sync                  # 在取得磁盘信息前，先执行sync命令\n-T                      # 文件系统类型\n--block-size=<区块大小> # 指定区块大小\n-t<文件系统类型>        # 只显示选定文件系统的磁盘信息\n-x<文件系统类型>        # 不显示选定文件系统的磁盘信息\n--help                  # 显示帮助信息\n--version               # 显示版本信息\n```\n## du\n我们已经知道当前机器的使用空间了，如果超过了 80％ 的时候，就有必要查看下是哪些文件在占用空间了，通常会是些日志文件。\n进入登陆用户根目录 `~` 执行 `du` 命令，你会得到类似这个结果\n```bash\n...\n584  ./.oh-my-zsh/themes\n8    ./.oh-my-zsh/templates\n4    ./.oh-my-zsh/log\n8    ./.oh-my-zsh/custom/plugins/example\n12   ./.oh-my-zsh/custom/plugins\n20   ./.oh-my-zsh/custom\n5328 ./.oh-my-zsh\n6144 .\n```\n`du` 会遍历当前目录和所有子目录，并把文件夹大小返回，单位 K，最后一行为当前目录总大小。\n同样的使用 `-h` 参数可以方便阅读\n```bash\n...\n584K ./.oh-my-zsh/themes\n8.0K ./.oh-my-zsh/templates\n4.0K ./.oh-my-zsh/log\n8.0K ./.oh-my-zsh/custom/plugins/example\n12K  ./.oh-my-zsh/custom/plugins\n20K  ./.oh-my-zsh/custom\n5.3M ./.oh-my-zsh\n6.0M .\n```\n但是真正使用的话你会感觉到自己机器上的文件夹太多了，因为他会所有的文件夹都遍历出来，使用 `-d , --max-depth` 来限制遍历的目录层数，后面跟上层级数字。\n```bash\n$ du -d 1\n```\n```bash\n8    ./.pip\n8    ./.ssh\n652  ./.cache\n5328 ./.oh-my-zsh\n6144 .\n```\n看，这样就简洁多了，需要注意一点，在 **CentOS 6** 版本以前，是没有缩写 `-d` 的，只能输入参数全名。\n我也可以分析指定目录\n```bash\n$ du .oh-my-zsh .pip\n```\n结合上边这些参数我们已经可以来做分析了，我通常这样做\n```bash\n$ du -hd 1 ~\n$ du -hd 1 ~/.oh-my-zsh\n...\n```\n我从用户根目录开始查看第一级目录的文件夹大小，并一直将目录层级细化，最后找到最大的文件夹，进入后通过 `ll -h` 查看哪个文件最大，`-h` 已经不需要我告诉有什么作用了。\n### 更多参数\n```bash\n-a或-all                # 显示目录中个别文件的大小。\n-b或-bytes              # 显示目录或文件大小时，以byte为单位。\n-c或--total             # 除了显示个别目录或文件的大小外，同时也显示所有目录或文件的总和。\n-D或--dereference-args  # 显示指定符号连接的源文件大小。\n-h或--human-readable    # 以K，M，G为单位，提高信息的可读性。\n-H或--si                # 与-h参数相同，但是K，M，G是以1000为换算单位。\n-k或--kilobytes         # 以1024 bytes为单位。\n-l或--count-links       # 重复计算硬件连接的文件。\n-L<符号连接>或--dereference<符号连接>   # 显示选项中所指定符号连接的源文件大小。\n-m或--megabytes         # 以1MB为单位。\n-s或--summarize         # 仅显示总计。\n-S或--separate-dirs     # 显示个别目录的大小时，并不含其子目录的大小。\n-x或--one-file-xystem   # 以一开始处理时的文件系统为准，若遇上其它不同的文件系统目录则略过。\n-X<文件>或--exclude-from=<文件>         # 在<文件>指定目录或文件。\n--exclude=<目录或文件>  # 略过指定的目录或文件。\n--max-depth=<目录层数>  # 超过指定层数的目录后，予以忽略。\n--help                  # 显示帮助。\n--version               # 显示版本信息。\n```\n\n### 排序\n\n当前目录下如果文件太多，挨个查看大小势必非常麻烦，我们可以对它进行排序，借助 `sort` 命令\n\n```bash\n$ du -d 1 -h | sort -nr\n\n148K\t./layer-v3.1.1\n116K\t./cnblogs-article-information\n 71M\t./AdminLTE-2.4.2\n 64K\t./vegobot\n 59M\t./ace\n```\n\n但是排序有些问题，因为它只按照文件数字显示大小，不考虑单位，所以不使用单位即可\n\n```bash\n$ du -d 1 | sort -nr\n$ du -d 1 | sort -nr | head     # 显示最大的前十\n$ du -d 1 | sort -nr | tail     # 显示最小的前十\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"linux-device-space","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a5z005y5gqox7qas073"},{"title":"2017 年，我做了什么","date":"2017-12-31T15:20:10.000Z","_content":"\n\n作为是 2017 年的最后一天，今天我不讲技术，来回顾下这一年，我做了些什么。\n\n<!-- more --><!-- toc -->\n## 学习\n对我而言，如果 2017 年可以用一个词来总结的话，那就是**学习**。\n### Python\n今年有两次集中的学习，第一次是 Python。我本身是从事 Java 开发的，那时候我就是觉得所有的开发都是不一样的，我就是做 Java 的，然后什么问题想到的都是用 Java 来解决。大概去年这个时候，我开始接触用 Node 做后台开发，慢慢有点不一样的感觉，直到后来因为工作的关系开始接触 Python。\n\n在几种语言的切换中，我体会到原来开发语言都是一样的，不一样的地方在于我们遇到的问题，应该用什么语言解决更好。如果一个公司频繁变换业务方向，使用 Java 开发后台简直要累死的。从此我不再是拿着一把“锤子”到处找“钉子”，而是首先分析用什么语言来解决问题更好。\n\n大概从 4 月 28 号开始，我利用《Python 学习手册》这本书作为标准进行系统的学习。在这之前其实已经用 Python 开发了一段时间公司的项目，然而只是流于肤浅的**会用**，给我的工作造成了一些问题，因为我并没有深入的了解这门语言的基础特性，导致了很多性能的问题，甚至出现了应该提早预料并解决的 BUG。这样才有了这样的学习计划，直到 7 月 26 日，89 天的时间，889 页，我坚持了下来。\n\n这也是我第一次把一个本如此厚的技术书从头到尾的学习下来，以前都是跳着看书，看自己不会的，然而我一直都明白，不管做什么事情，**基础最重要**，我告诉自己，如果这次没坚持下来，那我的 Python 将像 Java 那样，没那么扎实。效果也是很明显的，不需要等到学完，在过程中我就已经明显的觉得开发，已经慢慢变得游刃有余，这都不仅仅限于 Python，以小见大嘛，语言都是相通的。\n\n### Vim\n第二次大规模的学习是 Vim，这个编程世界的神器，如果一个人可以使用 Vim 灵活编程，一部分人会对他顶礼膜拜，一部分人则不屑一顾，认为其在装逼。\n\n今年科技界有个很有意思的新闻 Stack Overflow 骄傲的宣布，[我们已经帮助一百万人成功的退出了 Vim](https://stackoverflow.blog/2017/05/23/stack-overflow-helping-one-million-developers-exit-vim/)。What Fuck。这到底是个什么样的东西？可以产生这样的梗。\n\n首先我们必须要承认它很难，难倒了肯定不止一百万人不知道怎么退出 Vim 编辑器。所以就会造成两种极端，要么就有人只用 Vim，什么都是 Vim，用 Vim 编程，用 Vim 写博客，一心想着用 Vim 做一些（就像现在的我），要么就有人死也不碰 Vim，老子的 Idea／Pycharm／WebStorm 用着爽着呢（比如以前的我）。\n\n大概从 8 月 23 日开始，以前的我做了一个决定，学习并使用 Vim。造成我有这个想法的原因有很多，其实这不是我第一次有这样的想法，在这之前我已经有了数次的**由入门到放弃**的经历，但 Vim 一直是我心之所向的一块儿圣地，哎！真是太难了，太难了，这道题我不会做啊！\n\n可能是前一段成功学习的经历，还在心中暗自喜悦，让我信心爆棚，又刚好处在系统学习的真空期，我又一次的拾起了 Vim，也是从如何保存文件退出开始，也是这次的重新开始，才成就了现在的我。哈哈，谈成就有点太夸张了，这只是让我增加自信的一种说法。\n\n现在回想起来，开始使用 Vim 的时候是真的痛苦，因为我在大概熟悉了他的按键，又使用了几个插件后就投入到工作中使用了。熟悉 jetbrains 开发工具的人都知道，使用它的 Idea／Pycharm 开发是多么的方便，而使用 Vim，那简直了，一个文件几千行代码，我找某块代码要费劲死，那会儿还正好是要赶工期的时候。我为什么要这样做呢，因为我知道，如果不这样逼着自己真正的去用，我这辈子都不可能体会到 Vim 的精髓了。**过程是痛苦的，结果是美好的**。现在我已经把所有的编辑工作都转移到 Vim 上了，包括这篇博客，以及整个网站的开发，现在再看 Pycharm 呢，当看到别人使用鼠标键盘配合着完成某件事情时，我心里想的是，慢死了，我几个键位就可以搞定了，哈哈，不要打我。我开始编写插件更好的帮助我工作，也在慢慢总结 Vim 的使用和开发，并取名为 [Vim 练级手册](/vim) ，毕竟这块的系统学习资料网上还很少，能够与别人分享一些我的知识也算是一种反馈社会，当然在 Vim 的道路上，我仍然只是一个初学者，如果你感兴趣，可以来这里跟我一起学习。\n\n### 其他\n除此之外，还有很多零碎的学习，比如 Linux／Tmux／Node，东西很多很杂，还都没有太成系统的东西，就不一一细说，但可以知道的是，今年只是开始，以后的人生，学习仍将我的主旋律。\n\n## 孩子\n这是个大问题，在年初的时候关于什么时候要孩子等问题，一直我跟老婆所纠结的。到后来调养身子，成功怀孕，建档等乱七八糟的事情太多太多了，说好几天都说不完。现在我还不敢说太多，因为对于我俩来说第一个大关都还没结束，这根弦一直在绷着，等到了合适的时机，我会慢慢总结这段人生经历，这将会一段一直牢记在我心里的经历。现在我只想说，希望我的老婆可以快快乐乐的度过这段时间，我未来的孩子可以平平安安的降临到这个世界。\n\n## 读书\n我不是从今年才开始读书的，大概是 2015 年 2 月 14 日开始，我真正开始了读书计划，这个计划没有特别的要求，就只有坚持读。有时候读的快，有时候读的慢，但是一直都在读。开始的时候我是坚持买实体书的，但是作为一个北漂，经历了几次搬家后，是在受不了了，一大箱子书是单个行李里最重的。从去年 7 月份我开始使用微信读书，虽然没有实体书的质感，但是这也是在读书前提下对现实做出的妥协，今天也整理了下今年读过的书，一共 24 本，相对去年是少了些的，但还是那句话，贵在坚持，少总比没有好。\n- 《新参者》\n- 《拉普拉斯的魔女》\n- 《东方快车谋杀案》\n- 《把时间当作朋友》\n- 《后宫如懿转》\n- 《长夜难明》\n- 《恶意》\n- 《守夜者》\n- 《故事会（2016年10月上）》\n- 《囚徒健身1》\n- 《我不过低配的人生》\n- 《我喜欢这个功利的世界》\n- 《Python 学习手册》\n- 《湖畔》\n- 《开讲啦系列》\n- 《无罪之证》\n- 《放学后》\n- 《故事会（2016年10月下）》\n- 《殉罪者》\n- 《故事会（2016年11月上）》\n- 《圣女的救济》\n- 《原罪之承诺》\n- 《秘密》\n- 《高智商犯罪2》\n\n## 博客\n最后来说说博客，我从 2017-08-04 开始写博客。作为一个程序员，博客网站当然要自己搭建，开始用 Python ＋ markdown 来构建的，慢慢觉得不是很方便。从 2017-09-17 开始换成 Hexo 来搭建（[博客迁移到 hexo](/2017/09/17/blog-to-hexo/)），从此把心思更多放在“写”上。\n\n开始比较随性，有时候一天写几篇，有时候好几篇不写，慢慢的发现已经好几天都没写过，并且也没有写的欲望。我发现我好像又有点半途而废的症状了，这让我很惶恐，从 11 月 21 日开始我强迫自己，每天至少要写一篇博客，心情好了可以多写，心情坏了就少写，但每天必须要有一篇。这并不是为了写而写，而是需要写的东西实在太多了，我只是“懒”而已，有时候需要逼迫自己一下，现在已经慢慢成了习惯，但还没到自然的程度，有时候还要逼迫自己一下。\n\n不算今天正好有 130 篇，明年我还要继续努力，争取早日把写博客变成像吃饭一样自然。\n","source":"_posts/2017-12-31-2017-end.md","raw":"---\ntitle: 2017 年，我做了什么\ntags:\n  - 杂谈\ndate: 2017-12-31 15:20:10\n---\n\n\n作为是 2017 年的最后一天，今天我不讲技术，来回顾下这一年，我做了些什么。\n\n<!-- more --><!-- toc -->\n## 学习\n对我而言，如果 2017 年可以用一个词来总结的话，那就是**学习**。\n### Python\n今年有两次集中的学习，第一次是 Python。我本身是从事 Java 开发的，那时候我就是觉得所有的开发都是不一样的，我就是做 Java 的，然后什么问题想到的都是用 Java 来解决。大概去年这个时候，我开始接触用 Node 做后台开发，慢慢有点不一样的感觉，直到后来因为工作的关系开始接触 Python。\n\n在几种语言的切换中，我体会到原来开发语言都是一样的，不一样的地方在于我们遇到的问题，应该用什么语言解决更好。如果一个公司频繁变换业务方向，使用 Java 开发后台简直要累死的。从此我不再是拿着一把“锤子”到处找“钉子”，而是首先分析用什么语言来解决问题更好。\n\n大概从 4 月 28 号开始，我利用《Python 学习手册》这本书作为标准进行系统的学习。在这之前其实已经用 Python 开发了一段时间公司的项目，然而只是流于肤浅的**会用**，给我的工作造成了一些问题，因为我并没有深入的了解这门语言的基础特性，导致了很多性能的问题，甚至出现了应该提早预料并解决的 BUG。这样才有了这样的学习计划，直到 7 月 26 日，89 天的时间，889 页，我坚持了下来。\n\n这也是我第一次把一个本如此厚的技术书从头到尾的学习下来，以前都是跳着看书，看自己不会的，然而我一直都明白，不管做什么事情，**基础最重要**，我告诉自己，如果这次没坚持下来，那我的 Python 将像 Java 那样，没那么扎实。效果也是很明显的，不需要等到学完，在过程中我就已经明显的觉得开发，已经慢慢变得游刃有余，这都不仅仅限于 Python，以小见大嘛，语言都是相通的。\n\n### Vim\n第二次大规模的学习是 Vim，这个编程世界的神器，如果一个人可以使用 Vim 灵活编程，一部分人会对他顶礼膜拜，一部分人则不屑一顾，认为其在装逼。\n\n今年科技界有个很有意思的新闻 Stack Overflow 骄傲的宣布，[我们已经帮助一百万人成功的退出了 Vim](https://stackoverflow.blog/2017/05/23/stack-overflow-helping-one-million-developers-exit-vim/)。What Fuck。这到底是个什么样的东西？可以产生这样的梗。\n\n首先我们必须要承认它很难，难倒了肯定不止一百万人不知道怎么退出 Vim 编辑器。所以就会造成两种极端，要么就有人只用 Vim，什么都是 Vim，用 Vim 编程，用 Vim 写博客，一心想着用 Vim 做一些（就像现在的我），要么就有人死也不碰 Vim，老子的 Idea／Pycharm／WebStorm 用着爽着呢（比如以前的我）。\n\n大概从 8 月 23 日开始，以前的我做了一个决定，学习并使用 Vim。造成我有这个想法的原因有很多，其实这不是我第一次有这样的想法，在这之前我已经有了数次的**由入门到放弃**的经历，但 Vim 一直是我心之所向的一块儿圣地，哎！真是太难了，太难了，这道题我不会做啊！\n\n可能是前一段成功学习的经历，还在心中暗自喜悦，让我信心爆棚，又刚好处在系统学习的真空期，我又一次的拾起了 Vim，也是从如何保存文件退出开始，也是这次的重新开始，才成就了现在的我。哈哈，谈成就有点太夸张了，这只是让我增加自信的一种说法。\n\n现在回想起来，开始使用 Vim 的时候是真的痛苦，因为我在大概熟悉了他的按键，又使用了几个插件后就投入到工作中使用了。熟悉 jetbrains 开发工具的人都知道，使用它的 Idea／Pycharm 开发是多么的方便，而使用 Vim，那简直了，一个文件几千行代码，我找某块代码要费劲死，那会儿还正好是要赶工期的时候。我为什么要这样做呢，因为我知道，如果不这样逼着自己真正的去用，我这辈子都不可能体会到 Vim 的精髓了。**过程是痛苦的，结果是美好的**。现在我已经把所有的编辑工作都转移到 Vim 上了，包括这篇博客，以及整个网站的开发，现在再看 Pycharm 呢，当看到别人使用鼠标键盘配合着完成某件事情时，我心里想的是，慢死了，我几个键位就可以搞定了，哈哈，不要打我。我开始编写插件更好的帮助我工作，也在慢慢总结 Vim 的使用和开发，并取名为 [Vim 练级手册](/vim) ，毕竟这块的系统学习资料网上还很少，能够与别人分享一些我的知识也算是一种反馈社会，当然在 Vim 的道路上，我仍然只是一个初学者，如果你感兴趣，可以来这里跟我一起学习。\n\n### 其他\n除此之外，还有很多零碎的学习，比如 Linux／Tmux／Node，东西很多很杂，还都没有太成系统的东西，就不一一细说，但可以知道的是，今年只是开始，以后的人生，学习仍将我的主旋律。\n\n## 孩子\n这是个大问题，在年初的时候关于什么时候要孩子等问题，一直我跟老婆所纠结的。到后来调养身子，成功怀孕，建档等乱七八糟的事情太多太多了，说好几天都说不完。现在我还不敢说太多，因为对于我俩来说第一个大关都还没结束，这根弦一直在绷着，等到了合适的时机，我会慢慢总结这段人生经历，这将会一段一直牢记在我心里的经历。现在我只想说，希望我的老婆可以快快乐乐的度过这段时间，我未来的孩子可以平平安安的降临到这个世界。\n\n## 读书\n我不是从今年才开始读书的，大概是 2015 年 2 月 14 日开始，我真正开始了读书计划，这个计划没有特别的要求，就只有坚持读。有时候读的快，有时候读的慢，但是一直都在读。开始的时候我是坚持买实体书的，但是作为一个北漂，经历了几次搬家后，是在受不了了，一大箱子书是单个行李里最重的。从去年 7 月份我开始使用微信读书，虽然没有实体书的质感，但是这也是在读书前提下对现实做出的妥协，今天也整理了下今年读过的书，一共 24 本，相对去年是少了些的，但还是那句话，贵在坚持，少总比没有好。\n- 《新参者》\n- 《拉普拉斯的魔女》\n- 《东方快车谋杀案》\n- 《把时间当作朋友》\n- 《后宫如懿转》\n- 《长夜难明》\n- 《恶意》\n- 《守夜者》\n- 《故事会（2016年10月上）》\n- 《囚徒健身1》\n- 《我不过低配的人生》\n- 《我喜欢这个功利的世界》\n- 《Python 学习手册》\n- 《湖畔》\n- 《开讲啦系列》\n- 《无罪之证》\n- 《放学后》\n- 《故事会（2016年10月下）》\n- 《殉罪者》\n- 《故事会（2016年11月上）》\n- 《圣女的救济》\n- 《原罪之承诺》\n- 《秘密》\n- 《高智商犯罪2》\n\n## 博客\n最后来说说博客，我从 2017-08-04 开始写博客。作为一个程序员，博客网站当然要自己搭建，开始用 Python ＋ markdown 来构建的，慢慢觉得不是很方便。从 2017-09-17 开始换成 Hexo 来搭建（[博客迁移到 hexo](/2017/09/17/blog-to-hexo/)），从此把心思更多放在“写”上。\n\n开始比较随性，有时候一天写几篇，有时候好几篇不写，慢慢的发现已经好几天都没写过，并且也没有写的欲望。我发现我好像又有点半途而废的症状了，这让我很惶恐，从 11 月 21 日开始我强迫自己，每天至少要写一篇博客，心情好了可以多写，心情坏了就少写，但每天必须要有一篇。这并不是为了写而写，而是需要写的东西实在太多了，我只是“懒”而已，有时候需要逼迫自己一下，现在已经慢慢成了习惯，但还没到自然的程度，有时候还要逼迫自己一下。\n\n不算今天正好有 130 篇，明年我还要继续努力，争取早日把写博客变成像吃饭一样自然。\n","slug":"2017-end","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6000615gqo5ykrxqir"},{"title":"Vim 如何编写插件：Hello World","date":"2017-12-30T16:28:41.000Z","_content":"\n从 8 月开始使用 Vim 已经 4 个多月了，从开始的笨拙查找按键，到后来健“指”如飞，再到开始编写插件，现在我已经离不开 Vim 了，我只需要几个按键就可以完成别人鼠标键盘配合半天才能完成的操作。\n\n<!-- more --><!-- toc -->\n两个月前，因为工作的原因我编写了插件 [vim-mysql](https://github.com/wxnacy/vim-mysql) ，我可以执行文本中某一行或者选中的一段完整语句。为什么要造“轮子”呢？即使现在的数据库软件再强大，它也是为大多人设计的，为了方便我就是需要一些独特的功能，所以可以编写一个自己用的工具很重要。\n今天开始我们来探讨下，如何在 Vim 中编写插件\n## Hello World\n又是 Hello World ，没错，学什么开始都是 Hello World 。首先明确目标，今天要达到的目标是，用 Vim 打开任意文件后，通过简短指令输出 `Hello World`\n首先在任意位置建立文件，如 `~/helloworld.vim`\n```vim\nfunction! HelloWorld()\n    echo 'Hello World'\nendfunction\n```\n在 `~/.vimrc` 中做链接，指定 Vim 再启动时运行该文件\n```vim\nsource ~/helloworld.vim\n```\n执行 `:source ~/.vimrc` 使配置生效，或者干脆退出文件，再重新进入即可，随后执行 `call HelloWorld()` 并回车，既可以看到屏幕下方输出 `Hello World`，就是这么简单。\n## 优化\n任务是完成了，但是还可以在处理的更好一点，比如我改变一下插件的位置\n```bash\n~/.vim/plugin/helloworld.vim\n```\n同时我去掉这句 `source ~/helloworld.vim` ，你在此重复上边的执行操作，同样可以生效，因为他可以自动查找该文件夹的脚本自动导入。\n再比如，我可以在插件里加上如下配置\n```vim\nfunction! HelloWorld()\n    echo 'Hello World'\nendfunction\ncommand! -nargs=0 HW call HelloWorld()\nnnoremap <leader>hw :call HelloWorld()\n```\n让代码生效后，我只需要执行 `:HW` 或者 `<leader>hw` 即可完成命令的调用。`-nargs=0` 表示命令行后边不跟参数，`<leader>` 键我在 [Vim 高级功能 Mapping 映射](/2017/12/01/vim-mappings/#leader) 文章中有详细讲解。\n## 传参\n在 VimScript 中传参是很别扭的\n```vim\n:HW name age\n```\n```vim\nfunction! HelloWorld(cmd, args)\n    echo a:cmd      \" ==> grep\n    echo a:args     \" ==> name age\n    echo a:args[0]  \" ==> name\nendfunction\ncommand! -nargs=* HW call HelloWorld('grep', <q-args>)\n```\n```vim\nfunction! HelloWorld(...)\n    echo a:000  \" ==> name age\n    echo a:0    \" ==> name\n    echo a:1    \" ==> age\nendfunction\ncommand! -nargs=* HW call HelloWorld(<q-args>)\n```\n这是固定参数加可变参数，已经完成可变参数的两种用法，`a:` 是参数前边必须加的。\n\n`-nargs` 后可以跟的参数为 `0, 1, +, *, ?` 这些符号都可以当作正则表达式来理解，具体含义你可以查看文档 `:h command-nargs`\n\n## 注意\n有这么几点需要注意\n- `HelloWorld` 函数名首字母必须大写\n- `HW` command 执行的命令，首字母必须大写\n- `helloworld.vim` 插件名比如用 `.vim` 后缀\n还有就是在命令中频繁出现的 `!`，因为每次启动 Vim 都会执行插件里的代码，它的作用就是避免重复执行。现在不加它没有什么影响，但是如果你的插件越来越多，你会慢慢感觉到卡，那时候你都不知道哪里出的问题，所以我建议从一开始就养成好习惯。\n","source":"_posts/2017-12-30-vim-plugin-write-helloworld.md","raw":"---\ntitle: Vim 如何编写插件：Hello World\ndate: 2017-12-30 16:28:41\ntags: [vim]\n---\n\n从 8 月开始使用 Vim 已经 4 个多月了，从开始的笨拙查找按键，到后来健“指”如飞，再到开始编写插件，现在我已经离不开 Vim 了，我只需要几个按键就可以完成别人鼠标键盘配合半天才能完成的操作。\n\n<!-- more --><!-- toc -->\n两个月前，因为工作的原因我编写了插件 [vim-mysql](https://github.com/wxnacy/vim-mysql) ，我可以执行文本中某一行或者选中的一段完整语句。为什么要造“轮子”呢？即使现在的数据库软件再强大，它也是为大多人设计的，为了方便我就是需要一些独特的功能，所以可以编写一个自己用的工具很重要。\n今天开始我们来探讨下，如何在 Vim 中编写插件\n## Hello World\n又是 Hello World ，没错，学什么开始都是 Hello World 。首先明确目标，今天要达到的目标是，用 Vim 打开任意文件后，通过简短指令输出 `Hello World`\n首先在任意位置建立文件，如 `~/helloworld.vim`\n```vim\nfunction! HelloWorld()\n    echo 'Hello World'\nendfunction\n```\n在 `~/.vimrc` 中做链接，指定 Vim 再启动时运行该文件\n```vim\nsource ~/helloworld.vim\n```\n执行 `:source ~/.vimrc` 使配置生效，或者干脆退出文件，再重新进入即可，随后执行 `call HelloWorld()` 并回车，既可以看到屏幕下方输出 `Hello World`，就是这么简单。\n## 优化\n任务是完成了，但是还可以在处理的更好一点，比如我改变一下插件的位置\n```bash\n~/.vim/plugin/helloworld.vim\n```\n同时我去掉这句 `source ~/helloworld.vim` ，你在此重复上边的执行操作，同样可以生效，因为他可以自动查找该文件夹的脚本自动导入。\n再比如，我可以在插件里加上如下配置\n```vim\nfunction! HelloWorld()\n    echo 'Hello World'\nendfunction\ncommand! -nargs=0 HW call HelloWorld()\nnnoremap <leader>hw :call HelloWorld()\n```\n让代码生效后，我只需要执行 `:HW` 或者 `<leader>hw` 即可完成命令的调用。`-nargs=0` 表示命令行后边不跟参数，`<leader>` 键我在 [Vim 高级功能 Mapping 映射](/2017/12/01/vim-mappings/#leader) 文章中有详细讲解。\n## 传参\n在 VimScript 中传参是很别扭的\n```vim\n:HW name age\n```\n```vim\nfunction! HelloWorld(cmd, args)\n    echo a:cmd      \" ==> grep\n    echo a:args     \" ==> name age\n    echo a:args[0]  \" ==> name\nendfunction\ncommand! -nargs=* HW call HelloWorld('grep', <q-args>)\n```\n```vim\nfunction! HelloWorld(...)\n    echo a:000  \" ==> name age\n    echo a:0    \" ==> name\n    echo a:1    \" ==> age\nendfunction\ncommand! -nargs=* HW call HelloWorld(<q-args>)\n```\n这是固定参数加可变参数，已经完成可变参数的两种用法，`a:` 是参数前边必须加的。\n\n`-nargs` 后可以跟的参数为 `0, 1, +, *, ?` 这些符号都可以当作正则表达式来理解，具体含义你可以查看文档 `:h command-nargs`\n\n## 注意\n有这么几点需要注意\n- `HelloWorld` 函数名首字母必须大写\n- `HW` command 执行的命令，首字母必须大写\n- `helloworld.vim` 插件名比如用 `.vim` 后缀\n还有就是在命令中频繁出现的 `!`，因为每次启动 Vim 都会执行插件里的代码，它的作用就是避免重复执行。现在不加它没有什么影响，但是如果你的插件越来越多，你会慢慢感觉到卡，那时候你都不知道哪里出的问题，所以我建议从一开始就养成好习惯。\n","slug":"vim-plugin-write-helloworld","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6100635gqors94xvk3"},{"title":"Vim 如何编写插件：使用 Python 编写插件","date":"2018-01-02T15:59:21.000Z","_content":"\n前两天我讨论了怎么使用 Vim 编写最简单的插件 Hello World，今天聊聊怎么使用 Python 辅助插件开发，这在辅助开发插件时很有用。\n\n<!-- more --><!-- toc -->\nVimScript 语言非常小众，在处理一些数据时也不如我们常见的语言，如：Python／Ruby 等方便\n```bash\n$ vim --version\n```\n```bash\nVIM - Vi IMproved 8.0 (2016 Sep 12, compiled Feb 12 2017 23:20:31)\nMacOS X (unix) version\nIncluded patches: 1-329\nCompiled by Homebrew\nHuge version without GUI.  Features included (+) or not (-):\n+acl             +file_in_path    +mouse_sgr       +tag_old_static\n+arabic          +find_in_path    -mouse_sysmouse  -tag_any_white\n+autocmd         +float           +mouse_urxvt     -tcl\n-balloon_eval    +folding         +mouse_xterm     +termguicolors\n-browse          -footer          +multi_byte      +terminfo\n++builtin_terms  +fork()          +multi_lang      +termresponse\n+byte_offset     -gettext         -mzscheme        +textobjects\n+channel         -hangul_input    +netbeans_intg   +timers\n+cindent         +iconv           +num64           +title\n-clientserver    +insert_expand   +packages        -toolbar\n+clipboard       +job             +path_extra      +user_commands\n+cmdline_compl   +jumplist        +perl            +vertsplit\n+cmdline_hist    +keymap          +persistent_undo +virtualedit\n+cmdline_info    +lambda          +postscript      +visual\n+comments        +langmap         +printer         +visualextra\n+conceal         +libcall         +profile         +viminfo\n+cryptv          +linebreak       +python          +vreplace\n+cscope          +lispindent      -python3         +wildignore\n+cursorbind      +listcmds        +quickfix        +wildmenu\n+cursorshape     +localmap        +reltime         +windows\n+dialog_con      -lua             +rightleft       +writebackup\n+diff            +menu            +ruby            -X11\n+digraphs        +mksession       +scrollbind      -xfontset\n-dnd             +modify_fname    +signs           -xim\n-ebcdic          +mouse           +smartindent     -xpm\n+emacs_tags      -mouseshape      +startuptime     -xsmp\n+eval            +mouse_dec       +statusline      -xterm_clipboard\n+ex_extra        -mouse_gpm       -sun_workshop    -xterm_save\n+extra_search    -mouse_jsbterm   +syntax\n+farsi           +mouse_netterm   +tag_binary\n```\n执行查看版本命令可以看到它支持的语言列表，Python 就在其中。\n\n之所以选择 Python 语言，除了现在我主用 Python 开发外，主要是因为它的入门比大多书语言都比较简单，并且功能强大。GitHub 上很多开源插件都是 Python 辅助开发的，另外现在大火的人工智能，Python 也是首选的开发语言。\n\n## Hello World\n如果你还没有看前篇 [Vim 如何编写插件：Hello World](/2017/12/30/vim-plugin-write-helloworld/) ，建议先看下，不然可能不知道再说什么。\n```vim\npython << EOF\ndef helloworld():\n    print(\"Hello World\")\nEOF\n\ncommand! -nargs=0 Hw exec('py helloworld()')\n```\n我们同样是从 Hello World 来说\n\n首先我们可以看到 Python 的函数是包在 `python << EOF ... EOF` 中的，这是一个标准写法，告诉 Vim 这是一个 Python 方法，`EOF` 不是固定的，换成任意字符都可，前后统一即可\n\n在执行时，使用 `exec` 函数执行 Python 命令 `py helloworld()`\n\n它跟 VimScript 写插件就在这两点不同，剩下的就可以像 Python 一样愉快的开发了。\n\n如果你的 Vim 版本是小于 8 ，可能支持的语言列表这样的 `... -python, +python3` ，这是告诉你支持 Python3 ，不支持 Python，不用奇怪，在 Python 中 3 和以前的版本的变化很大，很多时候可以当两种语言处理。这时我们需要做如下改变。\n```vim\npython3 << EOF\ndef helloworld():\n    print(\"Hello World\")\nEOF\n\ncommand! -nargs=0 Hw exec('py3 helloworld()')\n```\n## 传参\n看过上一章的传参，这里就很好理解了\n```vim\n:Hw name age\n```\n```vim\npython << EOF\ndef helloworld(*args):\n    print(args)     \" ==> (name, age, )\nEOF\n\ncommand! -nargs=* Hw exec('py helloworld(<q-args>)')\n```\n通过对比发现，不管各方面，使用一个趁手的第三方语言来开发都要更方便一点。\n## vim 模块\n在 Vim 中 Python 有个特殊模块 vim\n```vim\npython << EOF\nimport vim\ndef helloworld():\n    print(vim.current.buffer)   \" 当前缓冲区\n    vim.command(vim-cmd)        \" 执行 vim 命令\nEOF\ncommand! -nargs=0 Hw exec('py helloworld()')\n```\n这个模块可以很方便的在 Python 中处理 Vim 的信息和指令，更多用法见文档 `:h python-vim`\n","source":"_posts/2018-01-02-vim-plugin-py-write.md","raw":"---\ntitle: Vim 如何编写插件：使用 Python 编写插件\ndate: 2018-01-02 15:59:21\ntags: [vim]\n---\n\n前两天我讨论了怎么使用 Vim 编写最简单的插件 Hello World，今天聊聊怎么使用 Python 辅助插件开发，这在辅助开发插件时很有用。\n\n<!-- more --><!-- toc -->\nVimScript 语言非常小众，在处理一些数据时也不如我们常见的语言，如：Python／Ruby 等方便\n```bash\n$ vim --version\n```\n```bash\nVIM - Vi IMproved 8.0 (2016 Sep 12, compiled Feb 12 2017 23:20:31)\nMacOS X (unix) version\nIncluded patches: 1-329\nCompiled by Homebrew\nHuge version without GUI.  Features included (+) or not (-):\n+acl             +file_in_path    +mouse_sgr       +tag_old_static\n+arabic          +find_in_path    -mouse_sysmouse  -tag_any_white\n+autocmd         +float           +mouse_urxvt     -tcl\n-balloon_eval    +folding         +mouse_xterm     +termguicolors\n-browse          -footer          +multi_byte      +terminfo\n++builtin_terms  +fork()          +multi_lang      +termresponse\n+byte_offset     -gettext         -mzscheme        +textobjects\n+channel         -hangul_input    +netbeans_intg   +timers\n+cindent         +iconv           +num64           +title\n-clientserver    +insert_expand   +packages        -toolbar\n+clipboard       +job             +path_extra      +user_commands\n+cmdline_compl   +jumplist        +perl            +vertsplit\n+cmdline_hist    +keymap          +persistent_undo +virtualedit\n+cmdline_info    +lambda          +postscript      +visual\n+comments        +langmap         +printer         +visualextra\n+conceal         +libcall         +profile         +viminfo\n+cryptv          +linebreak       +python          +vreplace\n+cscope          +lispindent      -python3         +wildignore\n+cursorbind      +listcmds        +quickfix        +wildmenu\n+cursorshape     +localmap        +reltime         +windows\n+dialog_con      -lua             +rightleft       +writebackup\n+diff            +menu            +ruby            -X11\n+digraphs        +mksession       +scrollbind      -xfontset\n-dnd             +modify_fname    +signs           -xim\n-ebcdic          +mouse           +smartindent     -xpm\n+emacs_tags      -mouseshape      +startuptime     -xsmp\n+eval            +mouse_dec       +statusline      -xterm_clipboard\n+ex_extra        -mouse_gpm       -sun_workshop    -xterm_save\n+extra_search    -mouse_jsbterm   +syntax\n+farsi           +mouse_netterm   +tag_binary\n```\n执行查看版本命令可以看到它支持的语言列表，Python 就在其中。\n\n之所以选择 Python 语言，除了现在我主用 Python 开发外，主要是因为它的入门比大多书语言都比较简单，并且功能强大。GitHub 上很多开源插件都是 Python 辅助开发的，另外现在大火的人工智能，Python 也是首选的开发语言。\n\n## Hello World\n如果你还没有看前篇 [Vim 如何编写插件：Hello World](/2017/12/30/vim-plugin-write-helloworld/) ，建议先看下，不然可能不知道再说什么。\n```vim\npython << EOF\ndef helloworld():\n    print(\"Hello World\")\nEOF\n\ncommand! -nargs=0 Hw exec('py helloworld()')\n```\n我们同样是从 Hello World 来说\n\n首先我们可以看到 Python 的函数是包在 `python << EOF ... EOF` 中的，这是一个标准写法，告诉 Vim 这是一个 Python 方法，`EOF` 不是固定的，换成任意字符都可，前后统一即可\n\n在执行时，使用 `exec` 函数执行 Python 命令 `py helloworld()`\n\n它跟 VimScript 写插件就在这两点不同，剩下的就可以像 Python 一样愉快的开发了。\n\n如果你的 Vim 版本是小于 8 ，可能支持的语言列表这样的 `... -python, +python3` ，这是告诉你支持 Python3 ，不支持 Python，不用奇怪，在 Python 中 3 和以前的版本的变化很大，很多时候可以当两种语言处理。这时我们需要做如下改变。\n```vim\npython3 << EOF\ndef helloworld():\n    print(\"Hello World\")\nEOF\n\ncommand! -nargs=0 Hw exec('py3 helloworld()')\n```\n## 传参\n看过上一章的传参，这里就很好理解了\n```vim\n:Hw name age\n```\n```vim\npython << EOF\ndef helloworld(*args):\n    print(args)     \" ==> (name, age, )\nEOF\n\ncommand! -nargs=* Hw exec('py helloworld(<q-args>)')\n```\n通过对比发现，不管各方面，使用一个趁手的第三方语言来开发都要更方便一点。\n## vim 模块\n在 Vim 中 Python 有个特殊模块 vim\n```vim\npython << EOF\nimport vim\ndef helloworld():\n    print(vim.current.buffer)   \" 当前缓冲区\n    vim.command(vim-cmd)        \" 执行 vim 命令\nEOF\ncommand! -nargs=0 Hw exec('py helloworld()')\n```\n这个模块可以很方便的在 Python 中处理 Vim 的信息和指令，更多用法见文档 `:h python-vim`\n","slug":"vim-plugin-py-write","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6200665gqoh7b7np7t"},{"title":"Python 格式化函数 format","date":"2018-01-03T17:21:24.000Z","_content":"\n自 2.6 以后 Python 增加一个新函数 `str.format()` 来增加字符串格式化的功能\n\n<!-- more --><!-- toc -->\n本篇不再对比它跟 `%` 的用法，本着用新不用旧原则，我们只看新函数的一些用法。\n## 基础\n```python\n>>> '{} {}'.format('hello', 'world')        # hello world\n>>> '{0} {1}'.format('hello', 'world')      # hello world\n>>> '{1} {0}'.format('hello', 'world')      # world hello\n```\n## 参数\n```python\n>>> '{name} {age}'.format(name='wxnacy', age=0)     # wxnacy 0\n# dict\n>>> kwargs = dict(name='wxnacy', age=0)\n>>> '{name} {age}'.format(**kwargs)                 # wxnacy 0\n>>> '{p[name]} {p[age]}'.format(p=kwargs)           # wxnacy 0\n# list\n>>> args = [1, 2]\n>>> '{0} {1}'.format(*args)                         # 1 2\n>>> '{0[0]} {0[1]}'.format(args)                    # 1 2\n>>> '{p[0]} {p[1]}'.format(p=args)                  # 1 2\n```\n## 数字\n```python\n# 保留小数点2位\n>>> '{:.2f}'.format(3.1415926)              # 3.14\n# 取整\n>>> '{:.0f}'.format(3.1415926)              # 3\n# 保留数字符号\n>>> '{:+.2f}'.format(3.1415926)             # +3.14\n>>> '{:+.2f}'.format(-3.1415926)            # -3.14\n# 对齐\n>>> '{:5d}'.format(3)                       #     3\n>>> '{:<5d}'.format(3)                      # 3\n>>> '{:^5d}'.format(3)                      #   3\n# 对齐并补位\n>>> '{:0>5d}'.format(3)                     # 00003\n>>> '{:0<5d}'.format(3)                     # 30000\n>>> '{:0^5d}'.format(3)                     # 00300\n# 以逗号分隔的数字格式\n>>> '{:,}'.format(1000000)                  # 1,000,000\n# 百分比格式\n>>> '{:.2%}'.format(0.25)                   # 25.00%\n# 指数\n>>> '{:.2e}'.format(1000000000)             # 1.00e+09\n# 进制\n>>> '{:b}'.format(11)                       # 1011\n>>> '{:d}'.format(11)                       # 11\n>>> '{:o}'.format(11)                       # 13\n>>> '{:x}'.format(11)                       # b\n>>> '{:#x}'.format(11)                      # 0xb\n>>> '{:#X}'.format(11)                      # 0xB\n```\n## 字符串\n```python\n# 截取\n>>> '{:.3}'.format('wxnacy')                # wxn\n# 截取并对齐\n>>> '{:6.3}'.format('wxnacy')               # wxn\n>>> '{:>6.3}'.format('wxnacy')              #    wxn\n>>> '{:^6.3}'.format('wxnacy')              #  wxn\n# 截取并对齐并占位\n>>> '{:0<6.3}'.format('wxnacy')             # wxn000\n>>> '{:0>6.3}'.format('wxnacy')             # 000wxn\n>>> '{:0^6.3}'.format('wxnacy')             # 0wxn00\n```\n## 时间\n```python\n>>> from datetime import datetime\n>>> dt = datetime.now()\n>>> '{:%Y-%m-%d %H:%M:%S.%s}'.format(dt)\n>>> '2018-01-03 18:41:52.1514976112'\n>>> '{:{dfmt} {tfmt}}'.format(dt, dfmt='%Y-%m-%d', tfmt='%H:%M:%S.%s')\n>>> '2018-01-03 18:41:52.1514976112'\n```\n## 对象\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nclass User():\n    def __init__(self):\n        self.name = 'wxnacy'\n\n    def __str__(self):\n        return self.name\n\n    def __repr__(self):\n        return 'räpr'\n\n    def __format__(self, fmt):\n        if fmt == 'fmt':\n            return \"I'm format user\"\n        return 'user'\n\nif __name__ == \"__main__\":\n    u = User()\n    print('{:fmt}'.format(u))   # I'm format user\n    print('{!s}'.format(u))     # wxnacy\n    print('{!r}'.format(u))     # räpr\n    print('{!a}'.format(u))     # r\\xe4pr\n```\n## 转义\n```python\n>>> '{} position is {{0}}'.format('a')      # a position is {0}\n# {{ 来显示左大括号\n# }} 来显示右大括号\n```\n## 参考\n- [PyFormat](https://pyformat.info/)\n- [Python Strings: Replace, Join, Split, Reverse, Uppercase & Lowercase](https://www.guru99.com/learning-python-strings-replace-join-split-reverse.html)\n\n官方文档并没有明确给出要删除老方法 `%`，也没有说过新的方法速度会比较快，但是它已经有很多功能是 `%` 不支持的了，并且在以后官方也会慢慢只维护新函数，而这种格式化方式也比较适合函数式应用，所以建议都采用这种方式。\n","source":"_posts/2018-01-03-python-format.md","raw":"---\ntitle: Python 格式化函数 format\ndate: 2018-01-03 17:21:24\ntags: [python]\n---\n\n自 2.6 以后 Python 增加一个新函数 `str.format()` 来增加字符串格式化的功能\n\n<!-- more --><!-- toc -->\n本篇不再对比它跟 `%` 的用法，本着用新不用旧原则，我们只看新函数的一些用法。\n## 基础\n```python\n>>> '{} {}'.format('hello', 'world')        # hello world\n>>> '{0} {1}'.format('hello', 'world')      # hello world\n>>> '{1} {0}'.format('hello', 'world')      # world hello\n```\n## 参数\n```python\n>>> '{name} {age}'.format(name='wxnacy', age=0)     # wxnacy 0\n# dict\n>>> kwargs = dict(name='wxnacy', age=0)\n>>> '{name} {age}'.format(**kwargs)                 # wxnacy 0\n>>> '{p[name]} {p[age]}'.format(p=kwargs)           # wxnacy 0\n# list\n>>> args = [1, 2]\n>>> '{0} {1}'.format(*args)                         # 1 2\n>>> '{0[0]} {0[1]}'.format(args)                    # 1 2\n>>> '{p[0]} {p[1]}'.format(p=args)                  # 1 2\n```\n## 数字\n```python\n# 保留小数点2位\n>>> '{:.2f}'.format(3.1415926)              # 3.14\n# 取整\n>>> '{:.0f}'.format(3.1415926)              # 3\n# 保留数字符号\n>>> '{:+.2f}'.format(3.1415926)             # +3.14\n>>> '{:+.2f}'.format(-3.1415926)            # -3.14\n# 对齐\n>>> '{:5d}'.format(3)                       #     3\n>>> '{:<5d}'.format(3)                      # 3\n>>> '{:^5d}'.format(3)                      #   3\n# 对齐并补位\n>>> '{:0>5d}'.format(3)                     # 00003\n>>> '{:0<5d}'.format(3)                     # 30000\n>>> '{:0^5d}'.format(3)                     # 00300\n# 以逗号分隔的数字格式\n>>> '{:,}'.format(1000000)                  # 1,000,000\n# 百分比格式\n>>> '{:.2%}'.format(0.25)                   # 25.00%\n# 指数\n>>> '{:.2e}'.format(1000000000)             # 1.00e+09\n# 进制\n>>> '{:b}'.format(11)                       # 1011\n>>> '{:d}'.format(11)                       # 11\n>>> '{:o}'.format(11)                       # 13\n>>> '{:x}'.format(11)                       # b\n>>> '{:#x}'.format(11)                      # 0xb\n>>> '{:#X}'.format(11)                      # 0xB\n```\n## 字符串\n```python\n# 截取\n>>> '{:.3}'.format('wxnacy')                # wxn\n# 截取并对齐\n>>> '{:6.3}'.format('wxnacy')               # wxn\n>>> '{:>6.3}'.format('wxnacy')              #    wxn\n>>> '{:^6.3}'.format('wxnacy')              #  wxn\n# 截取并对齐并占位\n>>> '{:0<6.3}'.format('wxnacy')             # wxn000\n>>> '{:0>6.3}'.format('wxnacy')             # 000wxn\n>>> '{:0^6.3}'.format('wxnacy')             # 0wxn00\n```\n## 时间\n```python\n>>> from datetime import datetime\n>>> dt = datetime.now()\n>>> '{:%Y-%m-%d %H:%M:%S.%s}'.format(dt)\n>>> '2018-01-03 18:41:52.1514976112'\n>>> '{:{dfmt} {tfmt}}'.format(dt, dfmt='%Y-%m-%d', tfmt='%H:%M:%S.%s')\n>>> '2018-01-03 18:41:52.1514976112'\n```\n## 对象\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nclass User():\n    def __init__(self):\n        self.name = 'wxnacy'\n\n    def __str__(self):\n        return self.name\n\n    def __repr__(self):\n        return 'räpr'\n\n    def __format__(self, fmt):\n        if fmt == 'fmt':\n            return \"I'm format user\"\n        return 'user'\n\nif __name__ == \"__main__\":\n    u = User()\n    print('{:fmt}'.format(u))   # I'm format user\n    print('{!s}'.format(u))     # wxnacy\n    print('{!r}'.format(u))     # räpr\n    print('{!a}'.format(u))     # r\\xe4pr\n```\n## 转义\n```python\n>>> '{} position is {{0}}'.format('a')      # a position is {0}\n# {{ 来显示左大括号\n# }} 来显示右大括号\n```\n## 参考\n- [PyFormat](https://pyformat.info/)\n- [Python Strings: Replace, Join, Split, Reverse, Uppercase & Lowercase](https://www.guru99.com/learning-python-strings-replace-join-split-reverse.html)\n\n官方文档并没有明确给出要删除老方法 `%`，也没有说过新的方法速度会比较快，但是它已经有很多功能是 `%` 不支持的了，并且在以后官方也会慢慢只维护新函数，而这种格式化方式也比较适合函数式应用，所以建议都采用这种方式。\n","slug":"python-format","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6300685gqoat8gjypl"},{"title":"利用 Google 搜索你的网站","date":"2018-01-04T17:47:51.000Z","_content":"\nGoogle 大法好啊\n<!-- more -->\n个人建站动不动就自己写搜索引擎的时代已经一去不复返了，现在各种搜索服务应接不暇，收费的免费的，一抓一大把，而如果巧用 Google 的搜索功能，你连 API 都不用接入，就可以做搜索。\n\n把 `site:https://wxnacy.com python` 复制到 Google 搜索框，或者直接点击下面的连接\n\nhttps://www.google.co.jp/search?q=site:https://wxnacy.com+python&gws_rd=cr&dcr=0&ei=nf1NWqbiFISx0ATokYaQBA\n\n你会发现在 Google 中搜索出来的内容，全都是我博客中关于 Python 的内容，这是咋回事？\n\n其实很多人并不会用 Google，除了翻墙的限制，也是因为平常的简单搜索足以了，它有一个非常棒的特性 `site`\n```bash\nsite:<website> <key worlds>\n```\n按照这样的格式进行搜索，你就可以只搜索某一个网站的内容了。\n```javascript\n<input id='search' onkeydown=\"search()\"/>\n<script>\nfunction search() {\n    var e = window.event\n    if( e.key == 'Enter' ){\n        var value = document.getElementById('search').value\n        value = 'site:https://wxnacy.com ' + value\n        value = encodeURIComponent(value)   // urlencode 编码\n        var url = 'https://www.google.com/search?q=' + value\n        window.open(url,'_blank');      // 打开新标签\n    }\n}\n</script>\n```\n利用这段代码，你就可以轻松的给你的网站添加 Google 搜索了，唯一的缺点就是需要翻墙，但是我不担心这点，反正能搜索到我网站的也都是从 Google 搜索过来的，它不想某度花钱才能被搜到。\n\n利用这一点，你也可以搜索还没有添加搜索功能的博客网站了。\n\nGoogle 还有很多其他的高级搜索，有时间我在整理一下。\n","source":"_posts/2018-01-04-use-google-search-website.md","raw":"---\ntitle: 利用 Google 搜索你的网站\ndate: 2018-01-04 17:47:51\ntags: [工具, javascript]\n---\n\nGoogle 大法好啊\n<!-- more -->\n个人建站动不动就自己写搜索引擎的时代已经一去不复返了，现在各种搜索服务应接不暇，收费的免费的，一抓一大把，而如果巧用 Google 的搜索功能，你连 API 都不用接入，就可以做搜索。\n\n把 `site:https://wxnacy.com python` 复制到 Google 搜索框，或者直接点击下面的连接\n\nhttps://www.google.co.jp/search?q=site:https://wxnacy.com+python&gws_rd=cr&dcr=0&ei=nf1NWqbiFISx0ATokYaQBA\n\n你会发现在 Google 中搜索出来的内容，全都是我博客中关于 Python 的内容，这是咋回事？\n\n其实很多人并不会用 Google，除了翻墙的限制，也是因为平常的简单搜索足以了，它有一个非常棒的特性 `site`\n```bash\nsite:<website> <key worlds>\n```\n按照这样的格式进行搜索，你就可以只搜索某一个网站的内容了。\n```javascript\n<input id='search' onkeydown=\"search()\"/>\n<script>\nfunction search() {\n    var e = window.event\n    if( e.key == 'Enter' ){\n        var value = document.getElementById('search').value\n        value = 'site:https://wxnacy.com ' + value\n        value = encodeURIComponent(value)   // urlencode 编码\n        var url = 'https://www.google.com/search?q=' + value\n        window.open(url,'_blank');      // 打开新标签\n    }\n}\n</script>\n```\n利用这段代码，你就可以轻松的给你的网站添加 Google 搜索了，唯一的缺点就是需要翻墙，但是我不担心这点，反正能搜索到我网站的也都是从 Google 搜索过来的，它不想某度花钱才能被搜到。\n\n利用这一点，你也可以搜索还没有添加搜索功能的博客网站了。\n\nGoogle 还有很多其他的高级搜索，有时间我在整理一下。\n","slug":"use-google-search-website","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a64006a5gqochcl152c"},{"title":"Bit, Bytes, Kb, Mb, TB, Gb, Tb 等互相转换","date":"2018-01-06T08:22:46.000Z","_content":"\n\n将对应单位框中输入数字即可完成转换\n<!-- more -->\n<input id='bit' onkeyup=\"doConvertSize()\"/> Bit\n<input id='bytes' onkeyup=\"doConvertSize()\"/> Bytes\n<input id='kb' onkeyup=\"doConvertSize()\"/> Kb\n<input id='mb' onkeyup=\"doConvertSize()\"/> Mb\n<input id='gb' onkeyup=\"doConvertSize()\"/> Gb\n<input id='tb' onkeyup=\"doConvertSize()\"/> Tb\n","source":"_posts/2018-01-06-convert-size.md","raw":"---\ntitle: 'Bit, Bytes, Kb, Mb, TB, Gb, Tb 等互相转换'\ntags:\n  - 工具\ndate: 2018-01-06 08:22:46\n---\n\n\n将对应单位框中输入数字即可完成转换\n<!-- more -->\n<input id='bit' onkeyup=\"doConvertSize()\"/> Bit\n<input id='bytes' onkeyup=\"doConvertSize()\"/> Bytes\n<input id='kb' onkeyup=\"doConvertSize()\"/> Kb\n<input id='mb' onkeyup=\"doConvertSize()\"/> Mb\n<input id='gb' onkeyup=\"doConvertSize()\"/> Gb\n<input id='tb' onkeyup=\"doConvertSize()\"/> Tb\n","slug":"convert-size","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a65006c5gqo71lb8xmi"},{"title":"UrlEncode/UrlDecode 编解码","date":"2018-01-05T15:07:08.000Z","_content":"\n昨天做 Google 搜索时需要对 url 参数进行 URLEncode 编码，发现还没有这个功能，按照惯例，赶紧写一个。\n<!-- more -->\n<textarea id=\"plain\" style=\"width: 100%; height: 200px\"></textarea>\n<button onClick=\"doUrlencode('encode')\">编码</button>\n<button onClick=\"doUrlencode('decode')\">解码</button>\n\njs 代码很简单\n```javascript\n// 编码\nvar secret = encodeURIComponent('https://wxnacy.com/')\n// https%3A%2F%2Fwxnacy.com%2F\nvar plain = decodeURIComponent('https%3A%2F%2Fwxnacy.com%2F')\n// https://wxnacy.com/\n```\n","source":"_posts/2018-01-05-urlencode.md","raw":"---\ntitle: UrlEncode/UrlDecode 编解码\ndate: 2018-01-05 15:07:08\ntags: [工具, javascript]\n---\n\n昨天做 Google 搜索时需要对 url 参数进行 URLEncode 编码，发现还没有这个功能，按照惯例，赶紧写一个。\n<!-- more -->\n<textarea id=\"plain\" style=\"width: 100%; height: 200px\"></textarea>\n<button onClick=\"doUrlencode('encode')\">编码</button>\n<button onClick=\"doUrlencode('decode')\">解码</button>\n\njs 代码很简单\n```javascript\n// 编码\nvar secret = encodeURIComponent('https://wxnacy.com/')\n// https%3A%2F%2Fwxnacy.com%2F\nvar plain = decodeURIComponent('https%3A%2F%2Fwxnacy.com%2F')\n// https://wxnacy.com/\n```\n","slug":"urlencode","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a66006e5gqoo18bh2qo"},{"title":"《沉睡的人鱼之家》：只有母亲能够为儿女陷入疯狂","date":"2018-01-07T11:44:01.000Z","_content":"\n\n> 只有母亲能够为儿女陷入疯狂\n\n<!-- more -->\n东野圭吾总能带给人惊喜，呵呵，我感觉每看完一部他的作品都会这样说。\n\n一场意外让薰子的女儿变成了“植物人”，确切的说是[脑死](https://zh.wikipedia.org/wiki/%E8%84%91%E6%AD%BB)，近年以来，脑死已经成为判断死亡的一个重要标志。但薰子坚持认为女儿还活着，因为她可以感受到一次女儿的神经反应。就这样在众人的怜悯中她开始了作为母亲的坚持，绝望的守护，从希望到绝望。自己眼中如睡去般可爱的女儿，却成了别人眼中的怪物，她用自己的坚守考验了所有人的人性和道德的底线。\n\n咋看这个故事是个绝望的母亲守护女儿的感人故事，书中的旁人和读者都应该持有同情和敬畏的心来看待。但坦白讲中间 80% 的剧情给我的感觉都是很渗人的，每次薰子因为别人称赞女儿而心满意足，因为别人害怕女儿而愤怒，我都会真切的觉得，**这个女人疯了**。\n\n东野圭吾经常这样调戏读者，他不想让读者站在上帝视角来审视主角，而是像里面的所有其他人一样感受薰子的变化，我要让你确切的感受到这个母亲疯了，她可以为了女儿的活不顾所有人的看法，也可以为了女儿的死不顾及世人的眼光。你觉得她疯了吗？是因为你没有作为一个母亲。\n\n如果你们认为我的女儿已经死了，那么为什么觉得我拿刀刺向我的女儿会让她受伤，如果你们因为我刺向女儿而让她的心脏停止跳动，就判定我有罪，那就是承认我女儿还活着。这是薰子第一次正面对峙那些不理解的她的人，及时是在场的警察也回答不了她的问题，谁也回答不了。\n\n薰子并不是一开始就这样坚定的，比如这次过后，她明白了\n> 我没有理由去说服这些人，那些人也不会来说服我。我觉得这个世界的意见不需要统一，有时候甚至不要统一反而比较好\n\n这次的觉悟让她的守护不再痛苦，我想剩下这段日子的安宁，也正是她女儿瑞惠可以安心离去的原因。\n\n东野圭吾的作品总也会有前后呼应的，故事最开始出现的被瑞惠吸引的小男孩，最后因为她的心脏而得以延续生命，这是我见过的最美的前后呼应。他是幸运的，在前文还有一个孩子就没有他的幸运，那时候薰子因为不想判定瑞惠为脑死而没有捐献器官，可能间接导致了另一个孩子死去，这是薰子第一次转变，她此时是迷茫的，因为她开始怀疑自己的做法是不是正确的。直到老师新章房子告诉她\n> 我猜想别人对你用这种方式照顾瑞穗可能有很多看法，但最重要的是坦诚面对自己的心境，我认为一个人的生活方式不符合逻辑也没有关系\n\n今年我的孩子也将出生，及时一直坚信自己仍然只是个孩子的我，今年也将迎来自己的孩子。我还在慢慢做着角色的切换，我不知道我以后成为一个怎样的父亲，但现在我清晰的明白一点，他可以健康的出生成长，会是我唯一的心愿。\n\n","source":"_posts/2018-01-07-chenshuiderenyuzhijia.md","raw":"---\ntitle: 《沉睡的人鱼之家》：只有母亲能够为儿女陷入疯狂\ntags:\n  - 杂谈\ndate: 2018-01-07 11:44:01\n---\n\n\n> 只有母亲能够为儿女陷入疯狂\n\n<!-- more -->\n东野圭吾总能带给人惊喜，呵呵，我感觉每看完一部他的作品都会这样说。\n\n一场意外让薰子的女儿变成了“植物人”，确切的说是[脑死](https://zh.wikipedia.org/wiki/%E8%84%91%E6%AD%BB)，近年以来，脑死已经成为判断死亡的一个重要标志。但薰子坚持认为女儿还活着，因为她可以感受到一次女儿的神经反应。就这样在众人的怜悯中她开始了作为母亲的坚持，绝望的守护，从希望到绝望。自己眼中如睡去般可爱的女儿，却成了别人眼中的怪物，她用自己的坚守考验了所有人的人性和道德的底线。\n\n咋看这个故事是个绝望的母亲守护女儿的感人故事，书中的旁人和读者都应该持有同情和敬畏的心来看待。但坦白讲中间 80% 的剧情给我的感觉都是很渗人的，每次薰子因为别人称赞女儿而心满意足，因为别人害怕女儿而愤怒，我都会真切的觉得，**这个女人疯了**。\n\n东野圭吾经常这样调戏读者，他不想让读者站在上帝视角来审视主角，而是像里面的所有其他人一样感受薰子的变化，我要让你确切的感受到这个母亲疯了，她可以为了女儿的活不顾所有人的看法，也可以为了女儿的死不顾及世人的眼光。你觉得她疯了吗？是因为你没有作为一个母亲。\n\n如果你们认为我的女儿已经死了，那么为什么觉得我拿刀刺向我的女儿会让她受伤，如果你们因为我刺向女儿而让她的心脏停止跳动，就判定我有罪，那就是承认我女儿还活着。这是薰子第一次正面对峙那些不理解的她的人，及时是在场的警察也回答不了她的问题，谁也回答不了。\n\n薰子并不是一开始就这样坚定的，比如这次过后，她明白了\n> 我没有理由去说服这些人，那些人也不会来说服我。我觉得这个世界的意见不需要统一，有时候甚至不要统一反而比较好\n\n这次的觉悟让她的守护不再痛苦，我想剩下这段日子的安宁，也正是她女儿瑞惠可以安心离去的原因。\n\n东野圭吾的作品总也会有前后呼应的，故事最开始出现的被瑞惠吸引的小男孩，最后因为她的心脏而得以延续生命，这是我见过的最美的前后呼应。他是幸运的，在前文还有一个孩子就没有他的幸运，那时候薰子因为不想判定瑞惠为脑死而没有捐献器官，可能间接导致了另一个孩子死去，这是薰子第一次转变，她此时是迷茫的，因为她开始怀疑自己的做法是不是正确的。直到老师新章房子告诉她\n> 我猜想别人对你用这种方式照顾瑞穗可能有很多看法，但最重要的是坦诚面对自己的心境，我认为一个人的生活方式不符合逻辑也没有关系\n\n今年我的孩子也将出生，及时一直坚信自己仍然只是个孩子的我，今年也将迎来自己的孩子。我还在慢慢做着角色的切换，我不知道我以后成为一个怎样的父亲，但现在我清晰的明白一点，他可以健康的出生成长，会是我唯一的心愿。\n\n","slug":"chenshuiderenyuzhijia","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a67006g5gqoube7sxmc"},{"title":"使用 Maven 构建 SpringMVC ：Hello World","date":"2018-01-08T09:41:30.000Z","_content":"\n\n本文简单介绍如何使用 Maven 框架搭建并配置 StringMVC，完成输入 Hello World 的功能。\n\n<!-- more --><!-- toc -->\n看本文前最好了解 Maven 和 Spring 基本知识\n## Maven 创建 Web 项目\n```bash\nmvn archetype:generate -DgroupId=com.wxnacy.spring -DartifactId=SpringMVC-HelloWorld -DarchetypeArtifactId=maven-archetype-webapp -DinteractiveMode=false\n```\n首先使用上述命令创建一个空的 Web 项目，结构如下\n![1](/images/springhw1.png)\n## 创建 Controller 和 View\n首先修改 `pom.xml` 文件，添加 SpringMVC 的依赖以及 Tomcat7 的插件\n```xml\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\n  <modelVersion>4.0.0</modelVersion>\n  <groupId>com.wxnacy.spring</groupId>\n  <artifactId>SpringMVC-HelloWorld</artifactId>\n  <packaging>war</packaging>\n  <version>1.0-SNAPSHOT</version>\n  <name>SpringMVC-HelloWorld Maven Webapp</name>\n  <url>http://maven.apache.org</url>\n  <properties>\n    <spring.version>4.0.1.RELEASE</spring.version>\n  </properties>\n\n  <dependencies>\n    <!-- Spring dependencies -->\n    <dependency>\n      <groupId>org.springframework</groupId>\n      <artifactId>spring-core</artifactId>\n      <version>${spring.version}</version>\n    </dependency>\n\n    <dependency>\n      <groupId>org.springframework</groupId>\n      <artifactId>spring-web</artifactId>\n      <version>${spring.version}</version>\n    </dependency>\n\n    <dependency>\n      <groupId>org.springframework</groupId>\n      <artifactId>spring-webmvc</artifactId>\n      <version>${spring.version}</version>\n    </dependency>\n\n    <dependency>\n      <groupId>junit</groupId>\n      <artifactId>junit</artifactId>\n      <version>3.8.1</version>\n      <scope>test</scope>\n    </dependency>\n  </dependencies>\n  <build>\n    <finalName>SpringMVC-HelloWorld</finalName>\n    <plugins>\n      <plugin>\n        <groupId>org.apache.tomcat.maven</groupId>\n        <artifactId>tomcat7-maven-plugin</artifactId>\n        <version>2.2</version>\n        <configuration>\n          <port>8080</port>\n          <path>/</path>\n          <uriEncoding>UTF-8</uriEncoding>\n          <!--<finalName>mgr</finalName>-->\n          <server>tomcat7</server>\n        </configuration>\n      </plugin>\n\n    </plugins>\n  </build>\n</project>\n```\n接下来创建 Controller\n```bash\n$ mkdir -p src/main/java/com/wxnacy/spring/controller\n$ touch src/main/java/com/wxnacy/spring/controller/HelloWorldController.java\n```\nHelloWorldController.java\n```java\npackage com.wxnacy.spring.controller;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.servlet.ModelAndView;\n\n\n@Controller\npublic class HelloWorldController {\n\n    @RequestMapping(\"/hello\")\n    public ModelAndView helloWorld(\n            @RequestParam(value = \"name\", required = false, defaultValue = \"World\") String name\n            ) {\n        ModelAndView mv = new ModelAndView(\"index\");\n        mv.addObject(\"name\", name);\n        return mv;\n    }\n}\n```\n使用注解 `@Controller` 来定义该类为控制器，`@RequestMapping` 映射访问地址 `/hello` 到 `helloWorld` 方法中，该方法接收一个参数，并返回 Model。\n\n最后创建 View\n```bash\n$ mkdir src/main/webapp/WEB-INF/views\n$ touch src/main/webapp/WEB-INF/views/index.jsp\n```\nindex.jsp\n```html\n<html>\n    <body>\n        <h2>Hello ${name}!</h2>\n    </body>\n</html>\n```\n## 配置 SpringMVC\n原料齐全了，接下来需要将他们关联起来，首先在 xml 文件中配置项目启动时扫描的 Controller 和 View 的目录\n```bash\n$ touch src/main/resources/dispatcher.xml\n```\ndispatcher.xml\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n    http://www.springframework.org/schema/context\n    http://www.springframework.org/schema/context/spring-context-3.2.xsd\">\n\n\n    <context:component-scan base-package=\"com.wxnacy.spring.controller\"/>\n\n    <bean\n            class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\">\n        <property name=\"prefix\">\n            <value>/WEB-INF/views/</value>\n        </property>\n        <property name=\"suffix\">\n            <value>.jsp</value>\n        </property>\n    </bean>\n</beans>\n```\n然后在 web.xml 中设置 Servlet，用 `/` 地址映射刚才的配置文件。\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<web-app xmlns=\"http://java.sun.com/xml/ns/javaee\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee\n                      http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd\"\n         version=\"3.0\">\n  <servlet>\n    <servlet-name>dispatcher</servlet-name>\n    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>\n    <init-param>\n      <param-name>contextConfigLocation</param-name>\n      <param-value>classpath:dispatcher.xml</param-value>\n    </init-param>\n    <load-on-startup>1</load-on-startup>\n  </servlet>\n  <servlet-mapping>\n    <servlet-name>dispatcher</servlet-name>\n    <url-pattern>/</url-pattern>\n  </servlet-mapping>\n\n  <display-name>Archetype Created Web Application</display-name>\n</web-app>\n```\n此时项目目录结构为\n![2](/images/springhw2.png)\n启动项目\n```bash\n$ mvn tomcat7:run\n```\n此时访问地址 `http://localhost:8080/hello` 出现如下效果即为成功\n![3](/images/springhw3.png)\n![4](/images/springhw4.png)\n\n本文章的代码已经同步更新到 GitHub 中，可以下载测试使用：https://github.com/wxnacy/SpringMVC-HelloWorld\n","source":"_posts/2018-01-08-maven-spring-hello-world.md","raw":"---\ntitle: 使用 Maven 构建 SpringMVC ：Hello World\ntags:\n  - java\n  - maven\n  - spring\ndate: 2018-01-08 09:41:30\n---\n\n\n本文简单介绍如何使用 Maven 框架搭建并配置 StringMVC，完成输入 Hello World 的功能。\n\n<!-- more --><!-- toc -->\n看本文前最好了解 Maven 和 Spring 基本知识\n## Maven 创建 Web 项目\n```bash\nmvn archetype:generate -DgroupId=com.wxnacy.spring -DartifactId=SpringMVC-HelloWorld -DarchetypeArtifactId=maven-archetype-webapp -DinteractiveMode=false\n```\n首先使用上述命令创建一个空的 Web 项目，结构如下\n![1](/images/springhw1.png)\n## 创建 Controller 和 View\n首先修改 `pom.xml` 文件，添加 SpringMVC 的依赖以及 Tomcat7 的插件\n```xml\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\n  <modelVersion>4.0.0</modelVersion>\n  <groupId>com.wxnacy.spring</groupId>\n  <artifactId>SpringMVC-HelloWorld</artifactId>\n  <packaging>war</packaging>\n  <version>1.0-SNAPSHOT</version>\n  <name>SpringMVC-HelloWorld Maven Webapp</name>\n  <url>http://maven.apache.org</url>\n  <properties>\n    <spring.version>4.0.1.RELEASE</spring.version>\n  </properties>\n\n  <dependencies>\n    <!-- Spring dependencies -->\n    <dependency>\n      <groupId>org.springframework</groupId>\n      <artifactId>spring-core</artifactId>\n      <version>${spring.version}</version>\n    </dependency>\n\n    <dependency>\n      <groupId>org.springframework</groupId>\n      <artifactId>spring-web</artifactId>\n      <version>${spring.version}</version>\n    </dependency>\n\n    <dependency>\n      <groupId>org.springframework</groupId>\n      <artifactId>spring-webmvc</artifactId>\n      <version>${spring.version}</version>\n    </dependency>\n\n    <dependency>\n      <groupId>junit</groupId>\n      <artifactId>junit</artifactId>\n      <version>3.8.1</version>\n      <scope>test</scope>\n    </dependency>\n  </dependencies>\n  <build>\n    <finalName>SpringMVC-HelloWorld</finalName>\n    <plugins>\n      <plugin>\n        <groupId>org.apache.tomcat.maven</groupId>\n        <artifactId>tomcat7-maven-plugin</artifactId>\n        <version>2.2</version>\n        <configuration>\n          <port>8080</port>\n          <path>/</path>\n          <uriEncoding>UTF-8</uriEncoding>\n          <!--<finalName>mgr</finalName>-->\n          <server>tomcat7</server>\n        </configuration>\n      </plugin>\n\n    </plugins>\n  </build>\n</project>\n```\n接下来创建 Controller\n```bash\n$ mkdir -p src/main/java/com/wxnacy/spring/controller\n$ touch src/main/java/com/wxnacy/spring/controller/HelloWorldController.java\n```\nHelloWorldController.java\n```java\npackage com.wxnacy.spring.controller;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.servlet.ModelAndView;\n\n\n@Controller\npublic class HelloWorldController {\n\n    @RequestMapping(\"/hello\")\n    public ModelAndView helloWorld(\n            @RequestParam(value = \"name\", required = false, defaultValue = \"World\") String name\n            ) {\n        ModelAndView mv = new ModelAndView(\"index\");\n        mv.addObject(\"name\", name);\n        return mv;\n    }\n}\n```\n使用注解 `@Controller` 来定义该类为控制器，`@RequestMapping` 映射访问地址 `/hello` 到 `helloWorld` 方法中，该方法接收一个参数，并返回 Model。\n\n最后创建 View\n```bash\n$ mkdir src/main/webapp/WEB-INF/views\n$ touch src/main/webapp/WEB-INF/views/index.jsp\n```\nindex.jsp\n```html\n<html>\n    <body>\n        <h2>Hello ${name}!</h2>\n    </body>\n</html>\n```\n## 配置 SpringMVC\n原料齐全了，接下来需要将他们关联起来，首先在 xml 文件中配置项目启动时扫描的 Controller 和 View 的目录\n```bash\n$ touch src/main/resources/dispatcher.xml\n```\ndispatcher.xml\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n    http://www.springframework.org/schema/context\n    http://www.springframework.org/schema/context/spring-context-3.2.xsd\">\n\n\n    <context:component-scan base-package=\"com.wxnacy.spring.controller\"/>\n\n    <bean\n            class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\">\n        <property name=\"prefix\">\n            <value>/WEB-INF/views/</value>\n        </property>\n        <property name=\"suffix\">\n            <value>.jsp</value>\n        </property>\n    </bean>\n</beans>\n```\n然后在 web.xml 中设置 Servlet，用 `/` 地址映射刚才的配置文件。\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<web-app xmlns=\"http://java.sun.com/xml/ns/javaee\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee\n                      http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd\"\n         version=\"3.0\">\n  <servlet>\n    <servlet-name>dispatcher</servlet-name>\n    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>\n    <init-param>\n      <param-name>contextConfigLocation</param-name>\n      <param-value>classpath:dispatcher.xml</param-value>\n    </init-param>\n    <load-on-startup>1</load-on-startup>\n  </servlet>\n  <servlet-mapping>\n    <servlet-name>dispatcher</servlet-name>\n    <url-pattern>/</url-pattern>\n  </servlet-mapping>\n\n  <display-name>Archetype Created Web Application</display-name>\n</web-app>\n```\n此时项目目录结构为\n![2](/images/springhw2.png)\n启动项目\n```bash\n$ mvn tomcat7:run\n```\n此时访问地址 `http://localhost:8080/hello` 出现如下效果即为成功\n![3](/images/springhw3.png)\n![4](/images/springhw4.png)\n\n本文章的代码已经同步更新到 GitHub 中，可以下载测试使用：https://github.com/wxnacy/SpringMVC-HelloWorld\n","slug":"maven-spring-hello-world","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a68006i5gqor0ynefsk"},{"title":"Git 解决 refusing to merge unrelated histories 错误","date":"2018-01-09T09:03:54.000Z","_content":"\n\n在昨天写 Maven 构建项目文章的时候，因为要把 demo 放到 GitHub 上，结果在 `pull` 代码的时候报错\n<!-- more -->\n```bash\nfatal: refusing to merge unrelated histories\n```\n这个问题以前也碰到过，但因为懒，我通过一些讨巧的办法避开了这个问题，今天实在受不了了，赶紧 Google 了下，发现还是**正面面对问题**更简单。\n\n> \"git merge\" used to allow merging two branches that have no common base by default, which led to a brand new history of an existing project created and then get pulled by an unsuspecting maintainer, which allowed an unnecessary parallel history merged into the existing project.  The command has been taught not to allow this by default, with an escape hatch \"--allow-unrelated-histories\" option to be used in a rare event that merges histories of two projects that started their lives independently.\n\n在 Git 2.9.0 以后两个仓库的代码合并需要添加一个参数 `--allow-unrelated-histories`\n```bash\n$ git pull origin master --allow-unrelated-histories\n```\n完美解决\n\n## 参考\n- [Git 2.9 Release Notes](https://github.com/git/git/blob/master/Documentation/RelNotes/2.9.0.txt#L58-L68)\n- [Git refusing to merge unrelated histories](https://stackoverflow.com/questions/37937984/git-refusing-to-merge-unrelated-histories)\n","source":"_posts/2018-01-09-fix-refusing-to-merge-unrelated-histories.md","raw":"---\ntitle: Git 解决 refusing to merge unrelated histories 错误\ntags:\n  - git\ndate: 2018-01-09 09:03:54\n---\n\n\n在昨天写 Maven 构建项目文章的时候，因为要把 demo 放到 GitHub 上，结果在 `pull` 代码的时候报错\n<!-- more -->\n```bash\nfatal: refusing to merge unrelated histories\n```\n这个问题以前也碰到过，但因为懒，我通过一些讨巧的办法避开了这个问题，今天实在受不了了，赶紧 Google 了下，发现还是**正面面对问题**更简单。\n\n> \"git merge\" used to allow merging two branches that have no common base by default, which led to a brand new history of an existing project created and then get pulled by an unsuspecting maintainer, which allowed an unnecessary parallel history merged into the existing project.  The command has been taught not to allow this by default, with an escape hatch \"--allow-unrelated-histories\" option to be used in a rare event that merges histories of two projects that started their lives independently.\n\n在 Git 2.9.0 以后两个仓库的代码合并需要添加一个参数 `--allow-unrelated-histories`\n```bash\n$ git pull origin master --allow-unrelated-histories\n```\n完美解决\n\n## 参考\n- [Git 2.9 Release Notes](https://github.com/git/git/blob/master/Documentation/RelNotes/2.9.0.txt#L58-L68)\n- [Git refusing to merge unrelated histories](https://stackoverflow.com/questions/37937984/git-refusing-to-merge-unrelated-histories)\n","slug":"fix-refusing-to-merge-unrelated-histories","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a69006k5gqollqw9pmf"},{"title":"使用 Maven 构建 SpringMVC ：返回 JSON 格式数据","date":"2018-01-10T13:44:19.000Z","_content":"\n\n前两天使用 Maven 构建了 SpringMVC 最简单的功能，访问地址跳转到页面并显示 Hello World ，今天来介绍如何返回 JSON 格式数据。\n\n<!-- more --><!-- toc -->\n如果你还没有看过 [使用 Maven 构建 SpringMVC ：Hello World](/2018/01/08/maven-spring-hello-world/) 这篇文章，最好先看一下，因为今天不再赘述项目结构的内容。\n## Controller\n首先是 Controller，新建类 `JsonController.java`\n```java\npackage com.wxnacy.spring.controller;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.ResponseBody;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Controller\npublic class JsonController {\n\n\t@RequestMapping(value=\"/api\")\n    @ResponseBody\n\tpublic Map api() {\n\t\tMap map=new HashMap();\n\t\tmap.put(\"status\", \"200\");\n\t\treturn map;\n\t}\n}\n```\n这里用到注解 `@ResponseBody` ，它可以将对象作为 HTTP 响应正文返回，并调用适合 HttpMessageConverter 的 Adapter 转换对象，写入输出流。我们就以 Map 对象作为输出对象。\n\n## 配置\nservlet.xml\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n    http://www.springframework.org/schema/context\n    http://www.springframework.org/schema/context/spring-context-3.2.xsd\n    http://www.springframework.org/schema/mvc\n    http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd \">\n\n    <mvc:annotation-driven/>\n    <context:component-scan base-package=\"com.wxnacy.spring.controller\"/>\n</beans>\n```\nHttpMessageConverter 接口需要在配置中开启 `<mvc:annotation-driven/>`，并且需要在文件的 beans 定义中需要声明 mvc 的 `xmlns:mvc` 和 `xsi:schemaLocation` 不然就会报错。\n\n## Jackson 解析\nSpring 默认是由 [Jackson](https://github.com/FasterXML/jackson-databind) 来解析 JSON 的，所以需要在 pom.xml 中引入对应包。\n```xml\n<properties>\n    ...\n    <!-- Use the latest version whenever possible. -->\n    <jackson.version>2.9.0</jackson.version>\n    ...\n</properties>\n<dependencies>\n    ...\n    <dependency>\n        <groupId>com.fasterxml.jackson.core</groupId>\n        <artifactId>jackson-databind</artifactId>\n        <version>${jackson.version}</version>\n    </dependency>\n    ...\n</dependencies>\n```\n然后启动项目，访问 `/api` 会得到 JSON 响应\n![1](/images/springjson.png)\n\n## Fastjson 解析\n[Fastjson](https://github.com/alibaba/fastjson) 是号称解析速度最快的 JSON 转换工具，由 alibaba 团队开发完成的，给国人长脸啊。\n使用也很简单，先引入包\nMaven\n```xml\n<dependency>\n    <groupId>com.alibaba</groupId>\n    <artifactId>fastjson</artifactId>\n    <version>1.2.44</version>\n</dependency>\n```\nservlet.xml 增加一些配置\n```xml\n<mvc:annotation-driven>\n    <mvc:message-converters register-defaults=\"true\">\n        <bean class=\"com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter\">\n            <property name=\"supportedMediaTypes\" value=\"application/json;charset=UTF-8\"/>\n            <property name=\"features\">\n                <array>\n                    <!-- [>QuoteFieldNames———-输出key时是否使用双引号,默认为true<] -->\n                    <!-- [>WriteMapNullValue——–是否输出值为null的字段,默认为false<] -->\n                    <!-- [>WriteNullNumberAsZero—-数值字段如果为null,输出为0,而非null<] -->\n                    <!-- [>WriteNullListAsEmpty—–List字段如果为null,输出为[],而非null<] -->\n                    <!-- [>WriteNullStringAsEmpty—字符类型字段如果为null,输出为”“,而非null<] -->\n                    <!-- [>WriteNullBooleanAsFalse–Boolean字段如果为null,输出为false,而非null<] -->\n                    <!-- [>DisableCircularReferenceDetect 关闭循环引用<] -->\n                    <value>WriteNullNumberAsZero</value>\n                    <value>WriteNullListAsEmpty</value>\n                    <value>WriteNullStringAsEmpty</value>\n                    <value>WriteNullBooleanAsFalse</value>\n                    <value>DisableCircularReferenceDetect</value>\n                </array>\n            </property>\n        </bean>\n    </mvc:message-converters>\n</mvc:annotation-driven>\n```\n就这么简单，再次启动项目，即可看到效果。\n\ndemo 地址：https://github.com/wxnacy/study/tree/master/java/SpringMVC-ReturnJson\n","source":"_posts/2018-01-10-maven-springmvc-return-json.md","raw":"---\ntitle: 使用 Maven 构建 SpringMVC ：返回 JSON 格式数据\ntags:\n  - java\n  - maven\n  - spring\ndate: 2018-01-10 13:44:19\n---\n\n\n前两天使用 Maven 构建了 SpringMVC 最简单的功能，访问地址跳转到页面并显示 Hello World ，今天来介绍如何返回 JSON 格式数据。\n\n<!-- more --><!-- toc -->\n如果你还没有看过 [使用 Maven 构建 SpringMVC ：Hello World](/2018/01/08/maven-spring-hello-world/) 这篇文章，最好先看一下，因为今天不再赘述项目结构的内容。\n## Controller\n首先是 Controller，新建类 `JsonController.java`\n```java\npackage com.wxnacy.spring.controller;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.ResponseBody;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Controller\npublic class JsonController {\n\n\t@RequestMapping(value=\"/api\")\n    @ResponseBody\n\tpublic Map api() {\n\t\tMap map=new HashMap();\n\t\tmap.put(\"status\", \"200\");\n\t\treturn map;\n\t}\n}\n```\n这里用到注解 `@ResponseBody` ，它可以将对象作为 HTTP 响应正文返回，并调用适合 HttpMessageConverter 的 Adapter 转换对象，写入输出流。我们就以 Map 对象作为输出对象。\n\n## 配置\nservlet.xml\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n    http://www.springframework.org/schema/context\n    http://www.springframework.org/schema/context/spring-context-3.2.xsd\n    http://www.springframework.org/schema/mvc\n    http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd \">\n\n    <mvc:annotation-driven/>\n    <context:component-scan base-package=\"com.wxnacy.spring.controller\"/>\n</beans>\n```\nHttpMessageConverter 接口需要在配置中开启 `<mvc:annotation-driven/>`，并且需要在文件的 beans 定义中需要声明 mvc 的 `xmlns:mvc` 和 `xsi:schemaLocation` 不然就会报错。\n\n## Jackson 解析\nSpring 默认是由 [Jackson](https://github.com/FasterXML/jackson-databind) 来解析 JSON 的，所以需要在 pom.xml 中引入对应包。\n```xml\n<properties>\n    ...\n    <!-- Use the latest version whenever possible. -->\n    <jackson.version>2.9.0</jackson.version>\n    ...\n</properties>\n<dependencies>\n    ...\n    <dependency>\n        <groupId>com.fasterxml.jackson.core</groupId>\n        <artifactId>jackson-databind</artifactId>\n        <version>${jackson.version}</version>\n    </dependency>\n    ...\n</dependencies>\n```\n然后启动项目，访问 `/api` 会得到 JSON 响应\n![1](/images/springjson.png)\n\n## Fastjson 解析\n[Fastjson](https://github.com/alibaba/fastjson) 是号称解析速度最快的 JSON 转换工具，由 alibaba 团队开发完成的，给国人长脸啊。\n使用也很简单，先引入包\nMaven\n```xml\n<dependency>\n    <groupId>com.alibaba</groupId>\n    <artifactId>fastjson</artifactId>\n    <version>1.2.44</version>\n</dependency>\n```\nservlet.xml 增加一些配置\n```xml\n<mvc:annotation-driven>\n    <mvc:message-converters register-defaults=\"true\">\n        <bean class=\"com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter\">\n            <property name=\"supportedMediaTypes\" value=\"application/json;charset=UTF-8\"/>\n            <property name=\"features\">\n                <array>\n                    <!-- [>QuoteFieldNames———-输出key时是否使用双引号,默认为true<] -->\n                    <!-- [>WriteMapNullValue——–是否输出值为null的字段,默认为false<] -->\n                    <!-- [>WriteNullNumberAsZero—-数值字段如果为null,输出为0,而非null<] -->\n                    <!-- [>WriteNullListAsEmpty—–List字段如果为null,输出为[],而非null<] -->\n                    <!-- [>WriteNullStringAsEmpty—字符类型字段如果为null,输出为”“,而非null<] -->\n                    <!-- [>WriteNullBooleanAsFalse–Boolean字段如果为null,输出为false,而非null<] -->\n                    <!-- [>DisableCircularReferenceDetect 关闭循环引用<] -->\n                    <value>WriteNullNumberAsZero</value>\n                    <value>WriteNullListAsEmpty</value>\n                    <value>WriteNullStringAsEmpty</value>\n                    <value>WriteNullBooleanAsFalse</value>\n                    <value>DisableCircularReferenceDetect</value>\n                </array>\n            </property>\n        </bean>\n    </mvc:message-converters>\n</mvc:annotation-driven>\n```\n就这么简单，再次启动项目，即可看到效果。\n\ndemo 地址：https://github.com/wxnacy/study/tree/master/java/SpringMVC-ReturnJson\n","slug":"maven-springmvc-return-json","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6b006n5gqo2t0boxxd"},{"title":"Jinja2 模板继承","date":"2018-01-11T11:01:42.000Z","_content":"\n\n在 Jinja2 中非常有用的一个功能就是模板继承，它可以像任何面向对象语言一样，实现模板的多态。\n\n<!-- more --><!-- toc -->\n## 父模板\n定义 `base.html` 如下\n```html\n<!doctype html>\n<html>\n\t<head>\n\t\t{% block head %}\n\t\t<title>{% block title %}{% endblock %} | wxnacy 博客</title>\n\t\t{% endblock %}\n\t</head>\n\t<body>\n\t\t<div id=\"content\">{% block content %}{% endblock %}</div>\n\t\t<div id=\"footer\">\n\t\t\t{% block footer %}\n\t\t\t    Copyright 2018 by <a href=\"https://wxnacy.com\">wxnacy.com</a>.\n\t\t\t{% endblock %}\n\t\t</div>\n\t</body>\n</html>\n```\n在模板中 `{{ block }}{{ endblock }}` 定义了需要多块，它们可以在子模块中进行填充，或直接继承\n\n## 子模块\n```html\n{% extends \"base.html\" %}\n{% block title %}Jinja2 模板继承{% endblock %}\n{% block head %}\n    {{ super() }}\n    <style type=\"text/css\">\n        .important { color: #336699; }\n    </style>\n{% endblock %}\n{% block content %}\n    <h1>Jinja2 模板继承</h1>\n    <p class=\"important\">\n        在 Jinja2 中非常有用的一个功能就是模板继承，它可以像任何面向对象语言一样，实现模板的多态。\n    </p>\n{% endblock %}\n```\n在子模板中使用 `super()` 标签，可以对 `block head` 进行继承并实现多态。\n\n## 效果\n渲染后页面源码为\n```html\n<!doctype html>\n<html>\n\t<head>\n\t\t<title>Jinja2 模板继承 | wxnacy 博客</title>\n        <style type=\"text/css\">\n            .important { color: #336699; }\n        </style>\n\t</head>\n\t<body>\n\t\t<div id=\"content\">\n        <h1>Jinja2 模板继承</h1>\n        <p class=\"important\">\n            在 Jinja2 中非常有用的一个功能就是模板继承，它可以像任何面向对象语言一样，实现模板的多态。\n        </p>\n        </div>\n\t\t<div id=\"footer\">\n            Copyright 2018 by <a href=\"https://wxnacy.com\">wxnacy.com</a>.\n\t\t</div>\n\t</body>\n</html>\n```\n","source":"_posts/2018-01-11-jinja-templateinheritance.md","raw":"---\ntitle: Jinja2 模板继承\ntags:\n  - python\n  - jinja2\ndate: 2018-01-11 11:01:42\n---\n\n\n在 Jinja2 中非常有用的一个功能就是模板继承，它可以像任何面向对象语言一样，实现模板的多态。\n\n<!-- more --><!-- toc -->\n## 父模板\n定义 `base.html` 如下\n```html\n<!doctype html>\n<html>\n\t<head>\n\t\t{% block head %}\n\t\t<title>{% block title %}{% endblock %} | wxnacy 博客</title>\n\t\t{% endblock %}\n\t</head>\n\t<body>\n\t\t<div id=\"content\">{% block content %}{% endblock %}</div>\n\t\t<div id=\"footer\">\n\t\t\t{% block footer %}\n\t\t\t    Copyright 2018 by <a href=\"https://wxnacy.com\">wxnacy.com</a>.\n\t\t\t{% endblock %}\n\t\t</div>\n\t</body>\n</html>\n```\n在模板中 `{{ block }}{{ endblock }}` 定义了需要多块，它们可以在子模块中进行填充，或直接继承\n\n## 子模块\n```html\n{% extends \"base.html\" %}\n{% block title %}Jinja2 模板继承{% endblock %}\n{% block head %}\n    {{ super() }}\n    <style type=\"text/css\">\n        .important { color: #336699; }\n    </style>\n{% endblock %}\n{% block content %}\n    <h1>Jinja2 模板继承</h1>\n    <p class=\"important\">\n        在 Jinja2 中非常有用的一个功能就是模板继承，它可以像任何面向对象语言一样，实现模板的多态。\n    </p>\n{% endblock %}\n```\n在子模板中使用 `super()` 标签，可以对 `block head` 进行继承并实现多态。\n\n## 效果\n渲染后页面源码为\n```html\n<!doctype html>\n<html>\n\t<head>\n\t\t<title>Jinja2 模板继承 | wxnacy 博客</title>\n        <style type=\"text/css\">\n            .important { color: #336699; }\n        </style>\n\t</head>\n\t<body>\n\t\t<div id=\"content\">\n        <h1>Jinja2 模板继承</h1>\n        <p class=\"important\">\n            在 Jinja2 中非常有用的一个功能就是模板继承，它可以像任何面向对象语言一样，实现模板的多态。\n        </p>\n        </div>\n\t\t<div id=\"footer\">\n            Copyright 2018 by <a href=\"https://wxnacy.com\">wxnacy.com</a>.\n\t\t</div>\n\t</body>\n</html>\n```\n","slug":"jinja-templateinheritance","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6c006p5gqo7vmcsrsd"},{"title":"Python isinstance 函数判断对象类型","date":"2018-01-13T10:18:11.000Z","_content":"\n在 Python 中推荐使用 `isinstance()` 函数来判断两个对象类型是否相同\n\n<!-- more --><!-- toc -->\n## 用法\n```python\nisinstance(object, classinfo)\n# object    要比较的对象\n# classinfo 直接或间接类名，基本类型或者元组\n    # 基本类型为 int，float，bool，complex，str，list，dict，set，tuple\n```\n如果类型相同则返回 True，否则返回 False\n```python\nIn [29]: b = True\n\nIn [30]: isinstance(b, bool)\nOut[30]: True\n\nIn [31]: isinstance(b, int)\nOut[31]: True\n\nIn [32]: isinstance(b, str)\nOut[32]: False\n\nIn [32]: isinstance(b, (bool, int, str))    # b 属于元组中的某个类型\nOut[32]: True\n```\n这里有个比较有意思的事情，`b` 应该是 `bool` 类型，但是使用 `int` 类型对比返回的也是 True，原因在于 Python 中 `bool` 是 `int` 一个子类，`True` 和 `False` 就是代表的 1 和 0 。\n\n## 对比 type()\nPython 中另一个判断类型的函数 `type()`\n```python\nIn [29]: b = True\n\nIn [36]: type(b)\nOut[36]: bool\n```\n`type()` 函数传入一个对象，返回他的对象类型，它只能返回当前类型，不会考虑到继承关系。\n\n由此可见 Python 中 `isinstance()` 函数比 `type()` 函数更合适判断两个对象类型是否相同。\n\n","source":"_posts/2018-01-13-python-isinstance.md","raw":"---\ntitle: Python isinstance 函数判断对象类型\ndate: 2018-01-13 10:18:11\ntags: [python]\n---\n\n在 Python 中推荐使用 `isinstance()` 函数来判断两个对象类型是否相同\n\n<!-- more --><!-- toc -->\n## 用法\n```python\nisinstance(object, classinfo)\n# object    要比较的对象\n# classinfo 直接或间接类名，基本类型或者元组\n    # 基本类型为 int，float，bool，complex，str，list，dict，set，tuple\n```\n如果类型相同则返回 True，否则返回 False\n```python\nIn [29]: b = True\n\nIn [30]: isinstance(b, bool)\nOut[30]: True\n\nIn [31]: isinstance(b, int)\nOut[31]: True\n\nIn [32]: isinstance(b, str)\nOut[32]: False\n\nIn [32]: isinstance(b, (bool, int, str))    # b 属于元组中的某个类型\nOut[32]: True\n```\n这里有个比较有意思的事情，`b` 应该是 `bool` 类型，但是使用 `int` 类型对比返回的也是 True，原因在于 Python 中 `bool` 是 `int` 一个子类，`True` 和 `False` 就是代表的 1 和 0 。\n\n## 对比 type()\nPython 中另一个判断类型的函数 `type()`\n```python\nIn [29]: b = True\n\nIn [36]: type(b)\nOut[36]: bool\n```\n`type()` 函数传入一个对象，返回他的对象类型，它只能返回当前类型，不会考虑到继承关系。\n\n由此可见 Python 中 `isinstance()` 函数比 `type()` 函数更合适判断两个对象类型是否相同。\n\n","slug":"python-isinstance","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6d006r5gqo2ze7a77g"},{"title":"Hexo 特殊符号的转义问题","date":"2018-01-12T10:19:49.000Z","_content":"\n在用 Hexo 发布博客的时候经常因为语法遇到各种问题\n<!-- more -->\n昨天在做 `Jinja2 模板继承` 的文章时，就碰见了问题。\n```bash\nTemplate render error: (unknown path) [Line 12, Column 23]\n  Error: Unable to call `super`, which is undefined or falsey\n  ...\n```\n```bash\nTemplate render error: (unknown path) [Line 13, Column 52]\n  expected variable end\n  ...\n```\n```bash\nTemplate render error: (unknown path) [Line 11, Column 22]\n  unexpected token: %}\n  ...\n```\n出现这种问题，我有个很笨的方法就是一点点排除文章中某段文字，因为我知道是某些字符跟hexo 的语法出现了冲突（强烈的不推荐你跟我学），在排查的过程中错误的信息也在不断变化，直到最后一个明明白白的是指明了 `%}` 符号的问题。\n\nHexo 的语法中也有 **&#123;&#123;&#125;&#125;** 相关的语法，如果你出现了跟它冲突的代码，不是在**代码块**中的，就会被 Hexo 进行编译，这时候你需要使用转义字符来代替\n\n常见的转义如下\n```java\n! &#33; — 惊叹号 Exclamation mark\n” &#34; &quot; 双引号 Quotation mark\n# &#35; — 数字标志 Number sign\n$ &#36; — 美元标志 Dollar sign\n% &#37; — 百分号 Percent sign\n& &#38; &amp; Ampersand\n‘ &#39; — 单引号 Apostrophe\n( &#40; — 小括号左边部分 Left parenthesis\n) &#41; — 小括号右边部分 Right parenthesis\n* &#42; — 星号 Asterisk\n+ &#43; — 加号 Plus sign\n< &#60; &lt; 小于号 Less than\n= &#61; — 等于符号 Equals sign\n- &#45; &minus; — 减号\n> &#62; &gt; 大于号 Greater than\n? &#63; — 问号 Question mark\n@ &#64; — Commercial at\n[ &#91; --- 中括号左边部分 Left square bracket\n\\ &#92; --- 反斜杠 Reverse solidus (backslash)\n] &#93; — 中括号右边部分 Right square bracket\n{ &#123; — 大括号左边部分 Left curly brace\n| &#124; — 竖线Vertical bar\n} &#125; — 大括号右边部分 Right curly brace\n```\n\n","source":"_posts/2018-01-12-hexo-specific-symbol.md","raw":"---\ntitle: Hexo 特殊符号的转义问题\ndate: 2018-01-12 10:19:49\ntags: [hexo]\n---\n\n在用 Hexo 发布博客的时候经常因为语法遇到各种问题\n<!-- more -->\n昨天在做 `Jinja2 模板继承` 的文章时，就碰见了问题。\n```bash\nTemplate render error: (unknown path) [Line 12, Column 23]\n  Error: Unable to call `super`, which is undefined or falsey\n  ...\n```\n```bash\nTemplate render error: (unknown path) [Line 13, Column 52]\n  expected variable end\n  ...\n```\n```bash\nTemplate render error: (unknown path) [Line 11, Column 22]\n  unexpected token: %}\n  ...\n```\n出现这种问题，我有个很笨的方法就是一点点排除文章中某段文字，因为我知道是某些字符跟hexo 的语法出现了冲突（强烈的不推荐你跟我学），在排查的过程中错误的信息也在不断变化，直到最后一个明明白白的是指明了 `%}` 符号的问题。\n\nHexo 的语法中也有 **&#123;&#123;&#125;&#125;** 相关的语法，如果你出现了跟它冲突的代码，不是在**代码块**中的，就会被 Hexo 进行编译，这时候你需要使用转义字符来代替\n\n常见的转义如下\n```java\n! &#33; — 惊叹号 Exclamation mark\n” &#34; &quot; 双引号 Quotation mark\n# &#35; — 数字标志 Number sign\n$ &#36; — 美元标志 Dollar sign\n% &#37; — 百分号 Percent sign\n& &#38; &amp; Ampersand\n‘ &#39; — 单引号 Apostrophe\n( &#40; — 小括号左边部分 Left parenthesis\n) &#41; — 小括号右边部分 Right parenthesis\n* &#42; — 星号 Asterisk\n+ &#43; — 加号 Plus sign\n< &#60; &lt; 小于号 Less than\n= &#61; — 等于符号 Equals sign\n- &#45; &minus; — 减号\n> &#62; &gt; 大于号 Greater than\n? &#63; — 问号 Question mark\n@ &#64; — Commercial at\n[ &#91; --- 中括号左边部分 Left square bracket\n\\ &#92; --- 反斜杠 Reverse solidus (backslash)\n] &#93; — 中括号右边部分 Right square bracket\n{ &#123; — 大括号左边部分 Left curly brace\n| &#124; — 竖线Vertical bar\n} &#125; — 大括号右边部分 Right curly brace\n```\n\n","slug":"hexo-specific-symbol","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6e006u5gqoyhbjntuz"},{"title":"Javascript input 输入限制","date":"2018-01-14T10:55:45.000Z","_content":"\n\n平常开发后台需要限制 input 域输入内容，如只允许数字，这里简单介绍几种常见限制。\n\n<!-- more --><!-- toc -->\n## 纯数字\n```java\n<input onkeyup=\"value=this.value.replace(/\\D+/g,'')\" >\n```\n输入内容试试：<input onkeyup=\"value=this.value.replace(/\\D+/g,'')\" >\n```java\nfunction onlyNum() {\n    if(!(event.keyCode==46)&&!(event.keyCode==8)&&!(event.keyCode==37)&&!(event.keyCode==39))\n    if(!((event.keyCode>=48&&event.keyCode<=57)||(event.keyCode>=96&&event.keyCode<=105)))\n    event.returnValue=false;\n}\n<input onkeyup=\"onlyNum();\" style=\"ime-mode:Disabled\">\n```\n输入内容试试：<input onkeydown=\"onlyNum();\" style=\"ime-mode:Disabled\">\n## 允许数字和小数点\n```java\n<input onKeypress=\"return (/[\\d.]/.test(String.fromCharCode(event.keyCode)))\" >\n```\n输入内容试试：<input onKeypress=\"return (/[\\d.]/.test(String.fromCharCode(event.keyCode)))\" >\n## 只允许汉字\n```java\n<input  onkeyup=\"value=value.replace(/[^\\u4E00-\\u9FA5]/g,'')\">\n```\n输入内容试试：<input  onkeyup=\"value=value.replace(/[^\\u4E00-\\u9FA5]/g,'')\">\n## 只允许字母、数字和@&=\n```java\n<input  onkeyup=\"value=value.replace(/[^\\w=@&]|_/ig,'')\">\n```\n<input  onkeyup=\"value=value.replace(/[^\\w=@&]|_/ig,'')\">\n","source":"_posts/2018-01-14-input-astrict.md","raw":"---\ntitle: Javascript input 输入限制\ntags:\n  - javascript\ndate: 2018-01-14 10:55:45\n---\n\n\n平常开发后台需要限制 input 域输入内容，如只允许数字，这里简单介绍几种常见限制。\n\n<!-- more --><!-- toc -->\n## 纯数字\n```java\n<input onkeyup=\"value=this.value.replace(/\\D+/g,'')\" >\n```\n输入内容试试：<input onkeyup=\"value=this.value.replace(/\\D+/g,'')\" >\n```java\nfunction onlyNum() {\n    if(!(event.keyCode==46)&&!(event.keyCode==8)&&!(event.keyCode==37)&&!(event.keyCode==39))\n    if(!((event.keyCode>=48&&event.keyCode<=57)||(event.keyCode>=96&&event.keyCode<=105)))\n    event.returnValue=false;\n}\n<input onkeyup=\"onlyNum();\" style=\"ime-mode:Disabled\">\n```\n输入内容试试：<input onkeydown=\"onlyNum();\" style=\"ime-mode:Disabled\">\n## 允许数字和小数点\n```java\n<input onKeypress=\"return (/[\\d.]/.test(String.fromCharCode(event.keyCode)))\" >\n```\n输入内容试试：<input onKeypress=\"return (/[\\d.]/.test(String.fromCharCode(event.keyCode)))\" >\n## 只允许汉字\n```java\n<input  onkeyup=\"value=value.replace(/[^\\u4E00-\\u9FA5]/g,'')\">\n```\n输入内容试试：<input  onkeyup=\"value=value.replace(/[^\\u4E00-\\u9FA5]/g,'')\">\n## 只允许字母、数字和@&=\n```java\n<input  onkeyup=\"value=value.replace(/[^\\w=@&]|_/ig,'')\">\n```\n<input  onkeyup=\"value=value.replace(/[^\\w=@&]|_/ig,'')\">\n","slug":"input-astrict","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6f006w5gqo0fs0oj2d"},{"title":"Linux Crontab 定时任务","date":"2018-01-15T10:07:33.000Z","_content":"\nLinux 中使用 crontab 来定时执行命令或指定脚本。\n\n<!-- more -->\n<!-- toc -->\n\n## Hello World\n\n先什么都不要说，跟我一起 Hello World\n首先修改 `~/.bash_profile`\n\n```bash\nexport EDITOR=vim\n```\n\n然后执行 `source ~/.bash_profile` 使配置生效\n随后新建一个定时任务\n\n```bash\n$ crontab -e\n```\n\n将下面的文字复制进去\n\n```bash\n* * * * * /bin/echo Hello World `date`\\n >> ~/output\n```\n\n<!-- 然后执行 `:wq` 退出，会得到如下提示 -->\n\n```bash\ncrontab: installing new crontab\n```\n\n这代表你已经创建一个定时任务，它的作用是，每分钟在 `~/output` 文件中添加一行带有时间标记的字符串 `Hello World`，如下\n\n```bash\nHello World Sun Jan 14 20:14:01 CST 2018n\nHello World Sun Jan 14 20:15:01 CST 2018n\nHello World Sun Jan 14 20:16:01 CST 2018n\nHello World Sun Jan 14 20:17:01 CST 2018n\nHello World Sun Jan 14 20:18:01 CST 2018n\n```\n\n你使用 `tail -f ~/output` 命令就可以每隔一分钟看到一行输出。\n\n## 使用说明\n不管你有没有成功的实现刚才的效果，现在来跟我一起看看刚才就做了些什么吧\n- **crontab -e** crontab 执行定时任务，需要配置任务列表，这条命令就是在编辑任务\n- **export DEITOR=vim** 是为了指定编辑任务时，使用的编辑器，现在绝大多数 Linux 都是用 Vim\n编辑生成的任务文件在目录 `/var/spoot/cron` 中（这是 CentOS 系统，如果是 Ubuntu 则是在 `/var/spoot/cron/crontabs` 目录中）有一个用户名命名的文件，比如 `root` ，剩下的操作刚才已经有所介绍，还有一些常用命令\n### 查看任务列表\n```bash\n$ crontab -l\n```\n```bash\n* * * * * /bin/echo Hello World `date`\\n >> ~/output\n```\n### 删除任务\n```bash\n$ crontab -r\n```\n这样刚才生成的文件就会被删除掉\n### 第二种方法\n如果你不像文件生成在这个目录中，也可以做如下操作\n```bash\n$ vim ~/roottab         # 手动生成一个配置文件\n\n* * * * * /bin/echo Hello World `date`\\n >> ~/output\n\n$ crontab ~/roottab     # 启动定时任务，并制定该文件\n```\n### 配置文件格式\n下面来详细说说 crontab 文件格式\n```bash\n* * * * * /bin/echo Hello World `date`\\n >> ~/output\n|-|-|-|-|-|- 分钟 0 ~ 59\n  |-|-|-|-|- 小时 0 ~ 23\n    |-|-|-|- 日   1 ~ 31\n      |-|-|- 月   1 ~ 12\n        |-|- 周   0 ~ 7\n          |- 需要执行的命令\n```\n### 更多使用实例\n```bash\n# 每分钟执行一次\n* * * * * /bin/echo Hello World `date`\\n >> ~/output\n# 每小时执行一次\n* */1 * * * /bin/echo Hello World `date`\\n >> ~/output\n# 每小时的第3和第15分钟执行\n3,15 * * * * /bin/echo Hello World `date`\\n >> ~/output\n# 每隔两天的上午8点到11点的第3和第15分钟执行\n3,15 8-11 */2 * * /bin/echo Hello World `date`\\n >> ~/output\n# 每周一上午8点到11点的第3和第15分钟执行\n3,15 8-11 * * 1 /bin/echo Hello World `date`\\n >> ~/output\n```\n\n## 按秒数间隔来执行\n\n有点需要单说一下，crontab 最小单位是按照分钟来执行的，默认是不支持按照秒数来执行的，不过我们可以想一些变通的方法，利用**延时**。\n\n```bash\n* * * * * sleep 15; /bin/echo Hello World `date`\\n >> ~/output\n```\n\n上面的语句代表了每分钟执行任务的时候，先睡眠 15 秒在执行。\n\n```bash\n* * * * * /bin/echo Hello World `date`\\n >> ~/output\n* * * * * sleep 15; /bin/echo Hello World `date`\\n >> ~/output\n```\n\n这样写的话就代表了，每分钟执行一次，每分钟推后 15 秒在执行一次，在多写几个，我们就可以得到一个每隔 15 秒执行一次的定时任务了，比如\n\n```bash\n* * * * * /bin/echo Hello World `date`\\n >> ~/output\n* * * * * sleep 15; /bin/echo Hello World `date`\\n >> ~/output\n* * * * * sleep 30; /bin/echo Hello World `date`\\n >> ~/output\n* * * * * sleep 45; /bin/echo Hello World `date`\\n >> ~/output\n```\n\n唯一的缺点就是第一次执行这个定时任务的时候，前 1 分钟是轮空的。\n\n## 服务状态\nUbuntu\n```bash\n# 启动、重启，停止、重载、运行状态\n$ service cron start|restart|stop|reload|status\n```\nCentOS < 7\n```bash\n# 启动、重启，停止、重载、运行状态\n$ service crond start|restart|stop|reload|status\n\n$ chkconfig sshd on     # 开机自启sshd\n$ chkconfig sshd off    # 开机关闭自启sshd\n$ chkconfig --list sshd # 查看每个运行级别类型中服务的当前状态\n```\nCentOS >= 7\n```bash\n$ systemctl enable crond.service     # 开机自启crond\n$ systemctl disable crond.service    # 开机关闭自启crond\n$ systemctl start crond.service      # 启动crond\n$ systemctl restart crond.service    # 重启\n$ systemctl stop crond.service       # 停止\n$ systemctl reload crond.service     # 重新加载\n$ systemctl status crond.service     # 查看启动状态\n```\n## 参考\n- [crontab 定时任务](http://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/crontab.html#)\n","source":"_posts/2018-01-15-linux-crontab.md","raw":"---\ntitle: Linux Crontab 定时任务\ntags:\n  - linux\ndate: 2018-01-15 10:07:33\n---\n\nLinux 中使用 crontab 来定时执行命令或指定脚本。\n\n<!-- more -->\n<!-- toc -->\n\n## Hello World\n\n先什么都不要说，跟我一起 Hello World\n首先修改 `~/.bash_profile`\n\n```bash\nexport EDITOR=vim\n```\n\n然后执行 `source ~/.bash_profile` 使配置生效\n随后新建一个定时任务\n\n```bash\n$ crontab -e\n```\n\n将下面的文字复制进去\n\n```bash\n* * * * * /bin/echo Hello World `date`\\n >> ~/output\n```\n\n<!-- 然后执行 `:wq` 退出，会得到如下提示 -->\n\n```bash\ncrontab: installing new crontab\n```\n\n这代表你已经创建一个定时任务，它的作用是，每分钟在 `~/output` 文件中添加一行带有时间标记的字符串 `Hello World`，如下\n\n```bash\nHello World Sun Jan 14 20:14:01 CST 2018n\nHello World Sun Jan 14 20:15:01 CST 2018n\nHello World Sun Jan 14 20:16:01 CST 2018n\nHello World Sun Jan 14 20:17:01 CST 2018n\nHello World Sun Jan 14 20:18:01 CST 2018n\n```\n\n你使用 `tail -f ~/output` 命令就可以每隔一分钟看到一行输出。\n\n## 使用说明\n不管你有没有成功的实现刚才的效果，现在来跟我一起看看刚才就做了些什么吧\n- **crontab -e** crontab 执行定时任务，需要配置任务列表，这条命令就是在编辑任务\n- **export DEITOR=vim** 是为了指定编辑任务时，使用的编辑器，现在绝大多数 Linux 都是用 Vim\n编辑生成的任务文件在目录 `/var/spoot/cron` 中（这是 CentOS 系统，如果是 Ubuntu 则是在 `/var/spoot/cron/crontabs` 目录中）有一个用户名命名的文件，比如 `root` ，剩下的操作刚才已经有所介绍，还有一些常用命令\n### 查看任务列表\n```bash\n$ crontab -l\n```\n```bash\n* * * * * /bin/echo Hello World `date`\\n >> ~/output\n```\n### 删除任务\n```bash\n$ crontab -r\n```\n这样刚才生成的文件就会被删除掉\n### 第二种方法\n如果你不像文件生成在这个目录中，也可以做如下操作\n```bash\n$ vim ~/roottab         # 手动生成一个配置文件\n\n* * * * * /bin/echo Hello World `date`\\n >> ~/output\n\n$ crontab ~/roottab     # 启动定时任务，并制定该文件\n```\n### 配置文件格式\n下面来详细说说 crontab 文件格式\n```bash\n* * * * * /bin/echo Hello World `date`\\n >> ~/output\n|-|-|-|-|-|- 分钟 0 ~ 59\n  |-|-|-|-|- 小时 0 ~ 23\n    |-|-|-|- 日   1 ~ 31\n      |-|-|- 月   1 ~ 12\n        |-|- 周   0 ~ 7\n          |- 需要执行的命令\n```\n### 更多使用实例\n```bash\n# 每分钟执行一次\n* * * * * /bin/echo Hello World `date`\\n >> ~/output\n# 每小时执行一次\n* */1 * * * /bin/echo Hello World `date`\\n >> ~/output\n# 每小时的第3和第15分钟执行\n3,15 * * * * /bin/echo Hello World `date`\\n >> ~/output\n# 每隔两天的上午8点到11点的第3和第15分钟执行\n3,15 8-11 */2 * * /bin/echo Hello World `date`\\n >> ~/output\n# 每周一上午8点到11点的第3和第15分钟执行\n3,15 8-11 * * 1 /bin/echo Hello World `date`\\n >> ~/output\n```\n\n## 按秒数间隔来执行\n\n有点需要单说一下，crontab 最小单位是按照分钟来执行的，默认是不支持按照秒数来执行的，不过我们可以想一些变通的方法，利用**延时**。\n\n```bash\n* * * * * sleep 15; /bin/echo Hello World `date`\\n >> ~/output\n```\n\n上面的语句代表了每分钟执行任务的时候，先睡眠 15 秒在执行。\n\n```bash\n* * * * * /bin/echo Hello World `date`\\n >> ~/output\n* * * * * sleep 15; /bin/echo Hello World `date`\\n >> ~/output\n```\n\n这样写的话就代表了，每分钟执行一次，每分钟推后 15 秒在执行一次，在多写几个，我们就可以得到一个每隔 15 秒执行一次的定时任务了，比如\n\n```bash\n* * * * * /bin/echo Hello World `date`\\n >> ~/output\n* * * * * sleep 15; /bin/echo Hello World `date`\\n >> ~/output\n* * * * * sleep 30; /bin/echo Hello World `date`\\n >> ~/output\n* * * * * sleep 45; /bin/echo Hello World `date`\\n >> ~/output\n```\n\n唯一的缺点就是第一次执行这个定时任务的时候，前 1 分钟是轮空的。\n\n## 服务状态\nUbuntu\n```bash\n# 启动、重启，停止、重载、运行状态\n$ service cron start|restart|stop|reload|status\n```\nCentOS < 7\n```bash\n# 启动、重启，停止、重载、运行状态\n$ service crond start|restart|stop|reload|status\n\n$ chkconfig sshd on     # 开机自启sshd\n$ chkconfig sshd off    # 开机关闭自启sshd\n$ chkconfig --list sshd # 查看每个运行级别类型中服务的当前状态\n```\nCentOS >= 7\n```bash\n$ systemctl enable crond.service     # 开机自启crond\n$ systemctl disable crond.service    # 开机关闭自启crond\n$ systemctl start crond.service      # 启动crond\n$ systemctl restart crond.service    # 重启\n$ systemctl stop crond.service       # 停止\n$ systemctl reload crond.service     # 重新加载\n$ systemctl status crond.service     # 查看启动状态\n```\n## 参考\n- [crontab 定时任务](http://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/crontab.html#)\n","slug":"linux-crontab","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6h006z5gqo0t4gljxk"},{"title":"北京社保：参保人员缴费信息定制","date":"2018-01-17T20:51:18.000Z","_content":"\n在北京生活了也 5 年多了，这两年办理各种证件比较多，基本上都需要打印一份最近半年的参保缴费信息，今天在这里给大家简单介绍下怎么通过北京社保网上平台来定制打印。\n<!-- more -->\n首先进入北京社保的服务网址：http://www.bjrbj.gov.cn/\n![/images/bjsb1.png](/images/bjsb1.png)\n通过**城镇职工用户登录**入口进入，如果没有账号需要注册，你要确保人事再给你上社保的时候手机号填对了。\n\n进入系统后，点击 **个人权益记录** ==> **参保人员缴费信息定制业务**，如下图\n![/images/bjsb2.png](/images/bjsb2.png)\n进入后，选择一个大于6个月的起止时间（最后时间只能选到两个月前），点击提交请求。就会生成一条新的流水号，当天不能查询，第二天再次登录，即可查询，可以下载一个pdf的文件。\n","source":"_posts/2018-01-17-bjsb-canbaodingzhi.md","raw":"---\ntitle: 北京社保：参保人员缴费信息定制\ndate: 2018-01-17 20:51:18\ntags: [北京, 生活]\n---\n\n在北京生活了也 5 年多了，这两年办理各种证件比较多，基本上都需要打印一份最近半年的参保缴费信息，今天在这里给大家简单介绍下怎么通过北京社保网上平台来定制打印。\n<!-- more -->\n首先进入北京社保的服务网址：http://www.bjrbj.gov.cn/\n![/images/bjsb1.png](/images/bjsb1.png)\n通过**城镇职工用户登录**入口进入，如果没有账号需要注册，你要确保人事再给你上社保的时候手机号填对了。\n\n进入系统后，点击 **个人权益记录** ==> **参保人员缴费信息定制业务**，如下图\n![/images/bjsb2.png](/images/bjsb2.png)\n进入后，选择一个大于6个月的起止时间（最后时间只能选到两个月前），点击提交请求。就会生成一条新的流水号，当天不能查询，第二天再次登录，即可查询，可以下载一个pdf的文件。\n","slug":"bjsb-canbaodingzhi","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6i00715gqodpgzj2t9"},{"title":"Python f-strings 3.6 版本新增加的字符串格式化功能","date":"2018-01-16T13:50:15.000Z","_content":"\n\n差不多半个月前我介绍了 Python 最新的字符串格式化函数 [format()](/2018/01/03/python-format/)，今天来介绍下 3.6 版本增加的新功能 [formatted string literals](https://docs.python.org/3.6/reference/lexical_analysis.html#f-strings) ，简称 `f-strings`\n\n<!-- more --><!-- toc -->\n## 使用\n这是一个让人兴奋的格式化字符串的方式，为什么这么说，先来看看效果\n```python\n>>> name = 'wxnacy'\n>>> f'my name is {name}'\n'my name is wxnacy'\n>>> f'my name is {name} and length is {len(name)}'\n'my name is wxnacy and length is 6'\n```\n之所以叫 `f-strings` ，就是要用 f 作为字符串的开头，就像 `b'', u''` 那样，然后用 `{}` 中使用变量，甚至可以使用函数方法，就可以完成格式化，如果你也接触 Node 开发，就知道现在在 Javascript 中字符串的格式化通常是这样的\n```javascript\n> name = 'wxnacy'\n'wxnacy'\n> `my name is ${name} and length is ${name.length}`\n'my name is wxnacy and length is 6'\n```\n## 与 format() 对比\n`f-strings` 与 `format()` 格式化的语法完全一致，**只是更加简洁**\n```python\n>>> f'{datetime.now():%Y-%m-%d %H:%M:%S.%s}'\n'2018-01-16 11:37:18.1516073838'\n>>> '{:%Y-%m-%d %H:%M:%S.%s}'.format(datetime.now())\n'2018-01-16 11:44:34.1516074274'\n```\n从上面的例子可以看到，除了以 `f` 开头外，唯一的区别就在 `datetime.now()` 放在 `:` 的前面。这样关于数字、日期、对象等格式化的使用，只要看我这篇文章 [Python 格式化函数 format](/2018/01/03/python-format/) 即可。\n\n可以想象如果你的项目版本全面提到 3.6 以后，`f-strings` 格式化方法一定是首选，因为它不但简洁，并且**快**，它的速度比 `format()` 快了一倍。\n\n## 参考\n- [Formatted string literals](https://docs.python.org/3.6/reference/lexical_analysis.html#f-strings)\n- [The new f-strings in Python 3.6](https://cito.github.io/blog/f-strings/)\n- [PEP 498 -- Literal String Interpolation](https://www.python.org/dev/peps/pep-0498/)\n","source":"_posts/2018-01-16-python-f-strings.md","raw":"---\ntitle: Python f-strings 3.6 版本新增加的字符串格式化功能\ntags:\n  - python\ndate: 2018-01-16 13:50:15\n---\n\n\n差不多半个月前我介绍了 Python 最新的字符串格式化函数 [format()](/2018/01/03/python-format/)，今天来介绍下 3.6 版本增加的新功能 [formatted string literals](https://docs.python.org/3.6/reference/lexical_analysis.html#f-strings) ，简称 `f-strings`\n\n<!-- more --><!-- toc -->\n## 使用\n这是一个让人兴奋的格式化字符串的方式，为什么这么说，先来看看效果\n```python\n>>> name = 'wxnacy'\n>>> f'my name is {name}'\n'my name is wxnacy'\n>>> f'my name is {name} and length is {len(name)}'\n'my name is wxnacy and length is 6'\n```\n之所以叫 `f-strings` ，就是要用 f 作为字符串的开头，就像 `b'', u''` 那样，然后用 `{}` 中使用变量，甚至可以使用函数方法，就可以完成格式化，如果你也接触 Node 开发，就知道现在在 Javascript 中字符串的格式化通常是这样的\n```javascript\n> name = 'wxnacy'\n'wxnacy'\n> `my name is ${name} and length is ${name.length}`\n'my name is wxnacy and length is 6'\n```\n## 与 format() 对比\n`f-strings` 与 `format()` 格式化的语法完全一致，**只是更加简洁**\n```python\n>>> f'{datetime.now():%Y-%m-%d %H:%M:%S.%s}'\n'2018-01-16 11:37:18.1516073838'\n>>> '{:%Y-%m-%d %H:%M:%S.%s}'.format(datetime.now())\n'2018-01-16 11:44:34.1516074274'\n```\n从上面的例子可以看到，除了以 `f` 开头外，唯一的区别就在 `datetime.now()` 放在 `:` 的前面。这样关于数字、日期、对象等格式化的使用，只要看我这篇文章 [Python 格式化函数 format](/2018/01/03/python-format/) 即可。\n\n可以想象如果你的项目版本全面提到 3.6 以后，`f-strings` 格式化方法一定是首选，因为它不但简洁，并且**快**，它的速度比 `format()` 快了一倍。\n\n## 参考\n- [Formatted string literals](https://docs.python.org/3.6/reference/lexical_analysis.html#f-strings)\n- [The new f-strings in Python 3.6](https://cito.github.io/blog/f-strings/)\n- [PEP 498 -- Literal String Interpolation](https://www.python.org/dev/peps/pep-0498/)\n","slug":"python-f-strings","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6j00735gqorkng3uqn"},{"title":"放学别走，哦，不，《等你下课》","date":"2018-01-18T16:50:26.000Z","_content":"\n号外，号外，周杰伦出新歌啦！！！\n<!-- more -->\n> 1月18日生日的周杰伦日前许下的生日愿望是希望能出一首单曲，当时他还开玩笑说：“如果做不到的话…那就算了!”令人莞尔!事实上工作如此忙碌的他能否如愿催生新曲，确实令歌迷半信半疑，而天王果然是一诺千金，说到做到!将在明天，也就是1月18日他生日的这天，推出最新单曲《等你下课》，周杰伦说：“这首歌是送给自己，也是送给歌迷的生日礼物。”同时今年也是周杰伦迈入演艺工作的第18年，这首充满文青风疗愈感的《等你下课》，有着周杰伦初出道时创作情歌的况味，回归纯稚情歌的旋律动人心弦。\n\n终于在 18 日这天迎来了新歌。今天，我哥生日，周杰伦生日。两位生日快乐\n\nhttps://music.163.com/#/song?id=531051217\n\n本来想弄个播放器外链，但因为版权原因无法生成，先给个链接凑合下。\n\n今天每天心情写技术博客了，放学别走，循环听歌去。\n","source":"_posts/2018-01-18-jay-new-song-fangxuebiezou.md","raw":"---\ntitle: 放学别走，哦，不，《等你下课》\ndate: 2018-01-18 16:50:26\ntags: [杂谈]\n---\n\n号外，号外，周杰伦出新歌啦！！！\n<!-- more -->\n> 1月18日生日的周杰伦日前许下的生日愿望是希望能出一首单曲，当时他还开玩笑说：“如果做不到的话…那就算了!”令人莞尔!事实上工作如此忙碌的他能否如愿催生新曲，确实令歌迷半信半疑，而天王果然是一诺千金，说到做到!将在明天，也就是1月18日他生日的这天，推出最新单曲《等你下课》，周杰伦说：“这首歌是送给自己，也是送给歌迷的生日礼物。”同时今年也是周杰伦迈入演艺工作的第18年，这首充满文青风疗愈感的《等你下课》，有着周杰伦初出道时创作情歌的况味，回归纯稚情歌的旋律动人心弦。\n\n终于在 18 日这天迎来了新歌。今天，我哥生日，周杰伦生日。两位生日快乐\n\nhttps://music.163.com/#/song?id=531051217\n\n本来想弄个播放器外链，但因为版权原因无法生成，先给个链接凑合下。\n\n今天每天心情写技术博客了，放学别走，循环听歌去。\n","slug":"jay-new-song-fangxuebiezou","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6k00765gqox94d8qg4"},{"title":"Python random 随机数模块","date":"2018-01-19T14:27:48.000Z","_content":"\n\nrandom 模块负责生成各种随机数，下面是几种常用的函数。\n\n<!-- more --><!-- toc -->\n## uniform\nuniform() 方法将随机生成下一个实数，它在 [x, y) 范围内。\n```python\nimport random   # uniform 是 random 模块中的函数\n\n# random.uniform(x, y)\n# x 随机数的最小值，包含该值。\n# y 随机数的最大值，不包含该值。\n\nres = random.uniform(0, 5)\nprint(res)      # 2.5156399226615003\n```\n\n## random\nrandom() 方法返回随机生成的一个实数，它在[0,1)范围内。\n```python\n>>> import random\n>>> random.random()\n0.1740686850927936\n>>> random.random()\n0.21103578046838467\n```\n\n## randint\nrandint() 方法返回随机整数，它在 [x, y] 范围内。\n```python\n>>> random.randint(0, 9)\n4\n>>> random.randint(0, 9)\n0\n```\n## randrange\nrandrange() 方法返回指定递增基数集合中的一个随机数，基数缺省值为1。\n```python\nimport random\n\nrandom.randrange ([start,] stop [,step])\n# start -- 指定范围内的开始值，包含在范围内。\n# stop  -- 指定范围内的结束值，不包含在范围内。\n# step  -- 指定递增基数。\n```\n```python\n>>> random.randrange(1, 100, 2)     # 从 1-100 中选取一个奇数\n81\n>>> random.randrange(100)           # 从 0-99 选取一个随机数\n84\n```\n## choice\nchoice() 方法返回一个数组、元组或字符串的随机项。\n```python\n>>> random.choice([1, 2, 3, 5, 9])\n9\n>>> random.choice('wxnacy')\n'a'\n>>> random.choice((1, 2, 3))\n1\n```\n## shuffle\nshuffle() 方法将序列的所有元素随机排序。\n```python\n>>> a = [1, 2, 3, 4, 5]\n>>> random.shuffle(a)\n>>> a\n[4, 2, 1, 3, 5]\n```\n## simple\nsimple() 从指定序列中随机获取指定长度的片断，并返回（不改变元序列）\n```python\n>>> a = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n>>> random.sample(a, 5)\n[5, 4, 3, 7, 10]\n>>> a\n[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n```\n","source":"_posts/2018-01-19-python-random.md","raw":"---\ntitle: Python random 随机数模块\ntags:\n  - python\ndate: 2018-01-19 14:27:48\n---\n\n\nrandom 模块负责生成各种随机数，下面是几种常用的函数。\n\n<!-- more --><!-- toc -->\n## uniform\nuniform() 方法将随机生成下一个实数，它在 [x, y) 范围内。\n```python\nimport random   # uniform 是 random 模块中的函数\n\n# random.uniform(x, y)\n# x 随机数的最小值，包含该值。\n# y 随机数的最大值，不包含该值。\n\nres = random.uniform(0, 5)\nprint(res)      # 2.5156399226615003\n```\n\n## random\nrandom() 方法返回随机生成的一个实数，它在[0,1)范围内。\n```python\n>>> import random\n>>> random.random()\n0.1740686850927936\n>>> random.random()\n0.21103578046838467\n```\n\n## randint\nrandint() 方法返回随机整数，它在 [x, y] 范围内。\n```python\n>>> random.randint(0, 9)\n4\n>>> random.randint(0, 9)\n0\n```\n## randrange\nrandrange() 方法返回指定递增基数集合中的一个随机数，基数缺省值为1。\n```python\nimport random\n\nrandom.randrange ([start,] stop [,step])\n# start -- 指定范围内的开始值，包含在范围内。\n# stop  -- 指定范围内的结束值，不包含在范围内。\n# step  -- 指定递增基数。\n```\n```python\n>>> random.randrange(1, 100, 2)     # 从 1-100 中选取一个奇数\n81\n>>> random.randrange(100)           # 从 0-99 选取一个随机数\n84\n```\n## choice\nchoice() 方法返回一个数组、元组或字符串的随机项。\n```python\n>>> random.choice([1, 2, 3, 5, 9])\n9\n>>> random.choice('wxnacy')\n'a'\n>>> random.choice((1, 2, 3))\n1\n```\n## shuffle\nshuffle() 方法将序列的所有元素随机排序。\n```python\n>>> a = [1, 2, 3, 4, 5]\n>>> random.shuffle(a)\n>>> a\n[4, 2, 1, 3, 5]\n```\n## simple\nsimple() 从指定序列中随机获取指定长度的片断，并返回（不改变元序列）\n```python\n>>> a = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n>>> random.sample(a, 5)\n[5, 4, 3, 7, 10]\n>>> a\n[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n```\n","slug":"python-random","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6l00785gqogjpdebau"},{"title":"使用 Maven 构建 StringBoot：Hello World","date":"2018-01-20T20:18:36.000Z","_content":"\n\n其实在用了 Python、Ruby 等语言后，再也回不去 Java 的一个很大原因，就是它的配置太多了，在用最受欢迎的 Spring 来做一个简单的 Hello World 输出，也要成吨的配置，这让脱了裤子的我们顿时没了兴致，但是 StringBoot 解决了这个问题。\n\n<!-- more --><!-- toc -->\nSpring Boot 是一个轻量级框架，可以完成基于 Spring 的应用程序的大部分配置工作。其实说白了，它封装好了我们默认需要一些配置，我们只需要继承它就可以了。\n\n本章将简单介绍如何使用 StringBoot 运行一个最简单的 Web 项目，来输出 Hello World ，Demo 地址：https://github.com/wxnacy/study/tree/master/java/SpringBoot-HelloWorld\n\n## 工作环境\n- JDK >= 8\n- Maven 最新版本（我默认你已经学习了 Maven 的基础知识）\n- Git\n- 任意开发工具，比如 Vim\n\n## 创建项目\n```bash\nmvn archetype:generate -DgroupId=com.wxnacy.spring -DartifactId=SpringBoot-HelloWorld -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false\n```\n使用 `maven-archetype-quickstart` 模板快速创建一个简单的 jar 项目即可，\n\n## 配置 pom.xml\n```xml\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\n    <modelVersion>4.0.0</modelVersion>\n    <groupId>com.wxnacy.spring</groupId>\n    <artifactId>SpringBoot-HelloWorld</artifactId>\n    <packaging>jar</packaging>\n    <version>1.0-SNAPSHOT</version>\n    <name>SpringBoot-HelloWorld</name>\n    <url>http://maven.apache.org</url>\n\n    <parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>1.5.9.RELEASE</version>\n    </parent>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-web</artifactId>\n        </dependency>\n    </dependencies>\n    <properties>\n        <java.version>1.8</java.version>\n    </properties>\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-maven-plugin</artifactId>\n            </plugin>\n        </plugins>\n    </build>\n</project>\n```\n它做了这么几件事\n- 继承 `spring-boot-starter-parent` 包完成配置\n- 指定 `spring-boot-starter-web` 包明确该项目为 web 项目\n- 使用 `spring-boot-maven-plugin` 来最终构建项目\n\n## Controller\n编辑 `src/main/java/com/wxnacy/spring/HelloController.java` 类\n```java\npackage com.wxnacy.spring;\n\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class HelloController {\n\n\t@RequestMapping(\"/\")\n\tpublic String index() {\n\t\treturn \"Hello World\";\n\t}\n\n}\n```\n`@RestController` 注解相当于集合了 `@Controller` 和 `@ResponseBody` 两个注解的功能，代表该类已经做好了使用 SpringMVC 框架来构建 web 请求的准备。\n\n`@RequestMapping` 注解将地址 `/` 映射到 `index()` 方法上。\n\n## 创建 Application\n`src/main/java/com/wxnacy/spring/HelloController.java`\n```java\npackage com.wxnacy.spring;\n\nimport java.util.Arrays;\n\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.annotation.Bean;\n\n@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n\n    @Bean\n    public CommandLineRunner commandLineRunner(ApplicationContext ctx) {\n        return args -> {\n\n            System.out.println(\"Let's inspect the beans provided by Spring Boot:\");\n\n            String[] beanNames = ctx.getBeanDefinitionNames();\n            Arrays.sort(beanNames);\n            for (String beanName : beanNames) {\n                System.out.println(\"beanName\"+ beanName);\n            }\n\n        };\n    }\n}\n```\n`@SpringBootApplication` 将融合以下几种注解的功能\n- `@Configuration` 标记类作为 Application 上下文 bean 的源\n- `@EnableAutoConfiguration` 告诉Spring Boot开始添加基于classpath设置、其他bean和各种属性的设置。\n- `@ComponentScan` 告诉 Spring 在当前包中查找其他组件、配置和服务，允许它找到控制器。\n\n最后使用 `main()` 方法来启动一个 Application，全部配置就完成了。你可能注意到，这个项目没有一个 XML 配置，这就是 SpringBoot 要做的，完全用 Java 的注解来进行配置，它已经用足够好的默认值来配置一个 web 项目，比如以前必备的 `DispatcherServlet`\n\n还有一个使用 `@Bean` 注解的 `commandLineRunner()` 方法，它并不是必备的，但是可以将项目启动所需要的 bean 都打印出来。\n\n## 运行\n```bash\n$ mvn clean package && java -jar target/SpringBoot-HelloWorld-1.0-SNAPSHOT.jar\n```\n或\n```bash\n$ mvn spring-boot:run\n```\n```bash\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n    '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::        (v1.5.9.RELEASE)\n\n2018-01-20 20:12:10.121  INFO 87328 --- [           main] com.wxnacy.spring.Application            : Starting Application on bogon with PID 87328 (/Users/wxnacy/PycharmProjects/study/java/SpringBoot-HelloWorld/target/classes started by wxnacy in /Users/wxnacy/PycharmProjects/study/java/SpringBoot-HelloWorld)\n2018-01-20 20:12:10.124  INFO 87328 --- [           main] com.wxnacy.spring.Application            : No active profile set, falling back to default profiles: default\n2018-01-20 20:12:10.169  INFO 87328 --- [           main] ationConfigEmbeddedWebApplicationContext : Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@790736dd: startup date [Sat Jan 20 20:12:10 CST 2018]; root of context hierarchy\n2018-01-20 20:12:11.072  INFO 87328 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat initialized with port(s): 8080 (http)\n2018-01-20 20:12:11.084  INFO 87328 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2018-01-20 20:12:11.086  INFO 87328 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/8.5.23\n2018-01-20 20:12:11.157  INFO 87328 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2018-01-20 20:12:11.157  INFO 87328 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 991 ms\n2018-01-20 20:12:11.258  INFO 87328 --- [ost-startStop-1] o.s.b.w.servlet.ServletRegistrationBean  : Mapping servlet: 'dispatcherServlet' to [/]\n2018-01-20 20:12:11.261  INFO 87328 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'characterEncodingFilter' to: [/*]\n2018-01-20 20:12:11.261  INFO 87328 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'hiddenHttpMethodFilter' to: [/*]\n2018-01-20 20:12:11.261  INFO 87328 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'httpPutFormContentFilter' to: [/*]\n2018-01-20 20:12:11.261  INFO 87328 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'requestContextFilter' to: [/*]\n2018-01-20 20:12:11.470  INFO 87328 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@790736dd: startup date [Sat Jan 20 20:12:10 CST 2018]; root of context hierarchy\n2018-01-20 20:12:11.520  INFO 87328 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped \"{[/]}\" onto public java.lang.String com.wxnacy.spring.HelloController.index()\n2018-01-20 20:12:11.523  INFO 87328 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped \"{[/error]}\" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)\n2018-01-20 20:12:11.523  INFO 87328 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped \"{[/error],produces=[text/html]}\" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)\n2018-01-20 20:12:11.548  INFO 87328 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]\n2018-01-20 20:12:11.548  INFO 87328 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]\n2018-01-20 20:12:11.572  INFO 87328 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]\n2018-01-20 20:12:11.676  INFO 87328 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Registering beans for JMX exposure on startup\n2018-01-20 20:12:11.718  INFO 87328 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat started on port(s): 8080 (http)\nLet's inspect the beans provided by Spring Boot:\napplication\nbasicErrorController\nbeanNameHandlerMapping\nbeanNameViewResolver\ncharacterEncodingFilter\ncommandLineRunner\nconventionErrorViewResolver\ndefaultServletHandlerMapping\ndefaultValidator\ndefaultViewResolver\ndispatcherServlet\ndispatcherServletRegistration\nduplicateServerPropertiesDetector\nembeddedServletContainerCustomizerBeanPostProcessor\nerror\nerrorAttributes\nerrorPageCustomizer\nerrorPageRegistrarBeanPostProcessor\nfaviconHandlerMapping\nfaviconRequestHandler\nhandlerExceptionResolver\nhelloController\nhiddenHttpMethodFilter\nhttpPutFormContentFilter\nhttpRequestHandlerAdapter\njacksonObjectMapper\njacksonObjectMapperBuilder\njsonComponentModule\nlocaleCharsetMappingsCustomizer\nmappingJackson2HttpMessageConverter\nmbeanExporter\nmbeanServer\nmessageConverters\nmethodValidationPostProcessor\nmultipartConfigElement\nmultipartResolver\nmvcContentNegotiationManager\nmvcConversionService\nmvcHandlerMappingIntrospector\nmvcPathMatcher\nmvcResourceUrlProvider\nmvcUriComponentsContributor\nmvcUrlPathHelper\nmvcValidator\nmvcViewResolver\nobjectNamingStrategy\norg.springframework.boot.autoconfigure.AutoConfigurationPackages\norg.springframework.boot.autoconfigure.condition.BeanTypeRegistry\norg.springframework.boot.autoconfigure.context.ConfigurationPropertiesAutoConfiguration\norg.springframework.boot.autoconfigure.context.PropertyPlaceholderAutoConfiguration\norg.springframework.boot.autoconfigure.info.ProjectInfoAutoConfiguration\norg.springframework.boot.autoconfigure.internalCachingMetadataReaderFactory\norg.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration\norg.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration\norg.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration\norg.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperConfiguration\norg.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration\norg.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration\norg.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration\norg.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration$DispatcherServletConfiguration\norg.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration$DispatcherServletRegistrationConfiguration\norg.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration\norg.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration$EmbeddedTomcat\norg.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration\norg.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$DefaultErrorViewResolverConfiguration\norg.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration\norg.springframework.boot.autoconfigure.web.HttpEncodingAutoConfiguration\norg.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration\norg.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration$StringHttpMessageConverterConfiguration\norg.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration\norg.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration$MappingJackson2HttpMessageConverterConfiguration\norg.springframework.boot.autoconfigure.web.MultipartAutoConfiguration\norg.springframework.boot.autoconfigure.web.ServerPropertiesAutoConfiguration\norg.springframework.boot.autoconfigure.web.WebClientAutoConfiguration\norg.springframework.boot.autoconfigure.web.WebClientAutoConfiguration$RestTemplateConfiguration\norg.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration\norg.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$EnableWebMvcConfiguration\norg.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter\norg.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter$FaviconConfiguration\norg.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration\norg.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration$TomcatWebSocketConfiguration\norg.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor\norg.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor.store\norg.springframework.context.annotation.internalAutowiredAnnotationProcessor\norg.springframework.context.annotation.internalCommonAnnotationProcessor\norg.springframework.context.annotation.internalConfigurationAnnotationProcessor\norg.springframework.context.annotation.internalRequiredAnnotationProcessor\norg.springframework.context.event.internalEventListenerFactory\norg.springframework.context.event.internalEventListenerProcessor\npreserveErrorControllerTargetClassPostProcessor\npropertySourcesPlaceholderConfigurer\nrequestContextFilter\nrequestMappingHandlerAdapter\nrequestMappingHandlerMapping\nresourceHandlerMapping\nrestTemplateBuilder\nserverProperties\nsimpleControllerHandlerAdapter\nspring.http.encoding-org.springframework.boot.autoconfigure.web.HttpEncodingProperties\nspring.http.multipart-org.springframework.boot.autoconfigure.web.MultipartProperties\nspring.info-org.springframework.boot.autoconfigure.info.ProjectInfoProperties\nspring.jackson-org.springframework.boot.autoconfigure.jackson.JacksonProperties\nspring.mvc-org.springframework.boot.autoconfigure.web.WebMvcProperties\nspring.resources-org.springframework.boot.autoconfigure.web.ResourceProperties\nstandardJacksonObjectMapperBuilderCustomizer\nstringHttpMessageConverter\ntomcatEmbeddedServletContainerFactory\nviewControllerHandlerMapping\nviewResolver\nwebsocketContainerCustomizer\nwelcomePageHandlerMapping\n2018-01-20 20:12:11.727  INFO 87328 --- [           main] com.wxnacy.spring.Application            : Started Application in 1.964 seconds (JVM running for 4.126)\n```\n当看到这样的信息就代表启动成功了，从`Let's inspect the beans provided by Spring Boot` 开始输出的信息，就是所有加载到的类\n\n查看结果\n```bash\n$ curl http://localhost:8080\n```\n```bash\nHello World\n```\n## 参考\n- [Building an Application with Spring Boot](https://spring.io/guides/gs/spring-boot/)\n- [Spring Boot 基础](https://www.ibm.com/developerworks/cn/java/j-spring-boot-basics-perry/index.html)\n","source":"_posts/2018-01-20-maven-spring-boot-hello-world.md","raw":"---\ntitle: 使用 Maven 构建 StringBoot：Hello World\ntags:\n  - maven\n  - springboot\ndate: 2018-01-20 20:18:36\n---\n\n\n其实在用了 Python、Ruby 等语言后，再也回不去 Java 的一个很大原因，就是它的配置太多了，在用最受欢迎的 Spring 来做一个简单的 Hello World 输出，也要成吨的配置，这让脱了裤子的我们顿时没了兴致，但是 StringBoot 解决了这个问题。\n\n<!-- more --><!-- toc -->\nSpring Boot 是一个轻量级框架，可以完成基于 Spring 的应用程序的大部分配置工作。其实说白了，它封装好了我们默认需要一些配置，我们只需要继承它就可以了。\n\n本章将简单介绍如何使用 StringBoot 运行一个最简单的 Web 项目，来输出 Hello World ，Demo 地址：https://github.com/wxnacy/study/tree/master/java/SpringBoot-HelloWorld\n\n## 工作环境\n- JDK >= 8\n- Maven 最新版本（我默认你已经学习了 Maven 的基础知识）\n- Git\n- 任意开发工具，比如 Vim\n\n## 创建项目\n```bash\nmvn archetype:generate -DgroupId=com.wxnacy.spring -DartifactId=SpringBoot-HelloWorld -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false\n```\n使用 `maven-archetype-quickstart` 模板快速创建一个简单的 jar 项目即可，\n\n## 配置 pom.xml\n```xml\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\n    <modelVersion>4.0.0</modelVersion>\n    <groupId>com.wxnacy.spring</groupId>\n    <artifactId>SpringBoot-HelloWorld</artifactId>\n    <packaging>jar</packaging>\n    <version>1.0-SNAPSHOT</version>\n    <name>SpringBoot-HelloWorld</name>\n    <url>http://maven.apache.org</url>\n\n    <parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>1.5.9.RELEASE</version>\n    </parent>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-web</artifactId>\n        </dependency>\n    </dependencies>\n    <properties>\n        <java.version>1.8</java.version>\n    </properties>\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-maven-plugin</artifactId>\n            </plugin>\n        </plugins>\n    </build>\n</project>\n```\n它做了这么几件事\n- 继承 `spring-boot-starter-parent` 包完成配置\n- 指定 `spring-boot-starter-web` 包明确该项目为 web 项目\n- 使用 `spring-boot-maven-plugin` 来最终构建项目\n\n## Controller\n编辑 `src/main/java/com/wxnacy/spring/HelloController.java` 类\n```java\npackage com.wxnacy.spring;\n\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class HelloController {\n\n\t@RequestMapping(\"/\")\n\tpublic String index() {\n\t\treturn \"Hello World\";\n\t}\n\n}\n```\n`@RestController` 注解相当于集合了 `@Controller` 和 `@ResponseBody` 两个注解的功能，代表该类已经做好了使用 SpringMVC 框架来构建 web 请求的准备。\n\n`@RequestMapping` 注解将地址 `/` 映射到 `index()` 方法上。\n\n## 创建 Application\n`src/main/java/com/wxnacy/spring/HelloController.java`\n```java\npackage com.wxnacy.spring;\n\nimport java.util.Arrays;\n\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.annotation.Bean;\n\n@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n\n    @Bean\n    public CommandLineRunner commandLineRunner(ApplicationContext ctx) {\n        return args -> {\n\n            System.out.println(\"Let's inspect the beans provided by Spring Boot:\");\n\n            String[] beanNames = ctx.getBeanDefinitionNames();\n            Arrays.sort(beanNames);\n            for (String beanName : beanNames) {\n                System.out.println(\"beanName\"+ beanName);\n            }\n\n        };\n    }\n}\n```\n`@SpringBootApplication` 将融合以下几种注解的功能\n- `@Configuration` 标记类作为 Application 上下文 bean 的源\n- `@EnableAutoConfiguration` 告诉Spring Boot开始添加基于classpath设置、其他bean和各种属性的设置。\n- `@ComponentScan` 告诉 Spring 在当前包中查找其他组件、配置和服务，允许它找到控制器。\n\n最后使用 `main()` 方法来启动一个 Application，全部配置就完成了。你可能注意到，这个项目没有一个 XML 配置，这就是 SpringBoot 要做的，完全用 Java 的注解来进行配置，它已经用足够好的默认值来配置一个 web 项目，比如以前必备的 `DispatcherServlet`\n\n还有一个使用 `@Bean` 注解的 `commandLineRunner()` 方法，它并不是必备的，但是可以将项目启动所需要的 bean 都打印出来。\n\n## 运行\n```bash\n$ mvn clean package && java -jar target/SpringBoot-HelloWorld-1.0-SNAPSHOT.jar\n```\n或\n```bash\n$ mvn spring-boot:run\n```\n```bash\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n    '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::        (v1.5.9.RELEASE)\n\n2018-01-20 20:12:10.121  INFO 87328 --- [           main] com.wxnacy.spring.Application            : Starting Application on bogon with PID 87328 (/Users/wxnacy/PycharmProjects/study/java/SpringBoot-HelloWorld/target/classes started by wxnacy in /Users/wxnacy/PycharmProjects/study/java/SpringBoot-HelloWorld)\n2018-01-20 20:12:10.124  INFO 87328 --- [           main] com.wxnacy.spring.Application            : No active profile set, falling back to default profiles: default\n2018-01-20 20:12:10.169  INFO 87328 --- [           main] ationConfigEmbeddedWebApplicationContext : Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@790736dd: startup date [Sat Jan 20 20:12:10 CST 2018]; root of context hierarchy\n2018-01-20 20:12:11.072  INFO 87328 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat initialized with port(s): 8080 (http)\n2018-01-20 20:12:11.084  INFO 87328 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2018-01-20 20:12:11.086  INFO 87328 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/8.5.23\n2018-01-20 20:12:11.157  INFO 87328 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2018-01-20 20:12:11.157  INFO 87328 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 991 ms\n2018-01-20 20:12:11.258  INFO 87328 --- [ost-startStop-1] o.s.b.w.servlet.ServletRegistrationBean  : Mapping servlet: 'dispatcherServlet' to [/]\n2018-01-20 20:12:11.261  INFO 87328 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'characterEncodingFilter' to: [/*]\n2018-01-20 20:12:11.261  INFO 87328 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'hiddenHttpMethodFilter' to: [/*]\n2018-01-20 20:12:11.261  INFO 87328 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'httpPutFormContentFilter' to: [/*]\n2018-01-20 20:12:11.261  INFO 87328 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'requestContextFilter' to: [/*]\n2018-01-20 20:12:11.470  INFO 87328 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@790736dd: startup date [Sat Jan 20 20:12:10 CST 2018]; root of context hierarchy\n2018-01-20 20:12:11.520  INFO 87328 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped \"{[/]}\" onto public java.lang.String com.wxnacy.spring.HelloController.index()\n2018-01-20 20:12:11.523  INFO 87328 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped \"{[/error]}\" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)\n2018-01-20 20:12:11.523  INFO 87328 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped \"{[/error],produces=[text/html]}\" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)\n2018-01-20 20:12:11.548  INFO 87328 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]\n2018-01-20 20:12:11.548  INFO 87328 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]\n2018-01-20 20:12:11.572  INFO 87328 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]\n2018-01-20 20:12:11.676  INFO 87328 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Registering beans for JMX exposure on startup\n2018-01-20 20:12:11.718  INFO 87328 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat started on port(s): 8080 (http)\nLet's inspect the beans provided by Spring Boot:\napplication\nbasicErrorController\nbeanNameHandlerMapping\nbeanNameViewResolver\ncharacterEncodingFilter\ncommandLineRunner\nconventionErrorViewResolver\ndefaultServletHandlerMapping\ndefaultValidator\ndefaultViewResolver\ndispatcherServlet\ndispatcherServletRegistration\nduplicateServerPropertiesDetector\nembeddedServletContainerCustomizerBeanPostProcessor\nerror\nerrorAttributes\nerrorPageCustomizer\nerrorPageRegistrarBeanPostProcessor\nfaviconHandlerMapping\nfaviconRequestHandler\nhandlerExceptionResolver\nhelloController\nhiddenHttpMethodFilter\nhttpPutFormContentFilter\nhttpRequestHandlerAdapter\njacksonObjectMapper\njacksonObjectMapperBuilder\njsonComponentModule\nlocaleCharsetMappingsCustomizer\nmappingJackson2HttpMessageConverter\nmbeanExporter\nmbeanServer\nmessageConverters\nmethodValidationPostProcessor\nmultipartConfigElement\nmultipartResolver\nmvcContentNegotiationManager\nmvcConversionService\nmvcHandlerMappingIntrospector\nmvcPathMatcher\nmvcResourceUrlProvider\nmvcUriComponentsContributor\nmvcUrlPathHelper\nmvcValidator\nmvcViewResolver\nobjectNamingStrategy\norg.springframework.boot.autoconfigure.AutoConfigurationPackages\norg.springframework.boot.autoconfigure.condition.BeanTypeRegistry\norg.springframework.boot.autoconfigure.context.ConfigurationPropertiesAutoConfiguration\norg.springframework.boot.autoconfigure.context.PropertyPlaceholderAutoConfiguration\norg.springframework.boot.autoconfigure.info.ProjectInfoAutoConfiguration\norg.springframework.boot.autoconfigure.internalCachingMetadataReaderFactory\norg.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration\norg.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration\norg.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration\norg.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperConfiguration\norg.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration\norg.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration\norg.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration\norg.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration$DispatcherServletConfiguration\norg.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration$DispatcherServletRegistrationConfiguration\norg.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration\norg.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration$EmbeddedTomcat\norg.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration\norg.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$DefaultErrorViewResolverConfiguration\norg.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration\norg.springframework.boot.autoconfigure.web.HttpEncodingAutoConfiguration\norg.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration\norg.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration$StringHttpMessageConverterConfiguration\norg.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration\norg.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration$MappingJackson2HttpMessageConverterConfiguration\norg.springframework.boot.autoconfigure.web.MultipartAutoConfiguration\norg.springframework.boot.autoconfigure.web.ServerPropertiesAutoConfiguration\norg.springframework.boot.autoconfigure.web.WebClientAutoConfiguration\norg.springframework.boot.autoconfigure.web.WebClientAutoConfiguration$RestTemplateConfiguration\norg.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration\norg.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$EnableWebMvcConfiguration\norg.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter\norg.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter$FaviconConfiguration\norg.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration\norg.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration$TomcatWebSocketConfiguration\norg.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor\norg.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor.store\norg.springframework.context.annotation.internalAutowiredAnnotationProcessor\norg.springframework.context.annotation.internalCommonAnnotationProcessor\norg.springframework.context.annotation.internalConfigurationAnnotationProcessor\norg.springframework.context.annotation.internalRequiredAnnotationProcessor\norg.springframework.context.event.internalEventListenerFactory\norg.springframework.context.event.internalEventListenerProcessor\npreserveErrorControllerTargetClassPostProcessor\npropertySourcesPlaceholderConfigurer\nrequestContextFilter\nrequestMappingHandlerAdapter\nrequestMappingHandlerMapping\nresourceHandlerMapping\nrestTemplateBuilder\nserverProperties\nsimpleControllerHandlerAdapter\nspring.http.encoding-org.springframework.boot.autoconfigure.web.HttpEncodingProperties\nspring.http.multipart-org.springframework.boot.autoconfigure.web.MultipartProperties\nspring.info-org.springframework.boot.autoconfigure.info.ProjectInfoProperties\nspring.jackson-org.springframework.boot.autoconfigure.jackson.JacksonProperties\nspring.mvc-org.springframework.boot.autoconfigure.web.WebMvcProperties\nspring.resources-org.springframework.boot.autoconfigure.web.ResourceProperties\nstandardJacksonObjectMapperBuilderCustomizer\nstringHttpMessageConverter\ntomcatEmbeddedServletContainerFactory\nviewControllerHandlerMapping\nviewResolver\nwebsocketContainerCustomizer\nwelcomePageHandlerMapping\n2018-01-20 20:12:11.727  INFO 87328 --- [           main] com.wxnacy.spring.Application            : Started Application in 1.964 seconds (JVM running for 4.126)\n```\n当看到这样的信息就代表启动成功了，从`Let's inspect the beans provided by Spring Boot` 开始输出的信息，就是所有加载到的类\n\n查看结果\n```bash\n$ curl http://localhost:8080\n```\n```bash\nHello World\n```\n## 参考\n- [Building an Application with Spring Boot](https://spring.io/guides/gs/spring-boot/)\n- [Spring Boot 基础](https://www.ibm.com/developerworks/cn/java/j-spring-boot-basics-perry/index.html)\n","slug":"maven-spring-boot-hello-world","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6m007a5gqohzgj7c46"},{"title":"使用 Maven 构建 SpringBoot：JPA 和 RESTful","date":"2018-01-21T16:50:24.000Z","_content":"\n\n昨天介绍了如何使用 StringBoot，今天讲讲怎么使用 [JPA](https://en.wikipedia.org/wiki/Java_Persistence_API) 操作数据库，并完成简单的 RESTful 风格接口。\n\n<!-- more --><!-- toc -->\n本章代码的 DEMO 地址：https://github.com/wxnacy/study/tree/master/java/SpringBoot-JPA\n\nJPA 说白了就是我们常说的 ORM ，为了避免写繁琐的 SQL 语句，这些框架进行了不断的封装，就是为了让我们更加方便的开发，把精力更多的集中在业务逻辑上。\n\n看本文前如果你还不了解 StringBoot，建议你先看下这篇文章[使用 Maven 构建 StringBoot：Hello World](/2018/01/20/maven-spring-boot-hello-world/)，因为我将不再讲项目结构。\n\n## 创建数据库\n新建一个 `study` 库，并新建 `user` 表\n```mysql\nDROP TABLE IF EXISTS `user`;\nCREATE TABLE `user` (\n    `id` int(11) NOT NULL AUTO_INCREMENT,\n    `name` varchar(32) NOT NULL DEFAULT '' COMMENT '用户名',\n    PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=163 DEFAULT CHARSET=utf8mb4 COMMENT='用户表';\n```\n\n## 配置 pom.xml\n```bash\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-data-jpa</artifactId>\n</dependency>\n<dependency>\n    <groupId>mysql</groupId>\n    <artifactId>mysql-connector-java</artifactId>\n</dependency>\n```\n添加 JPA 和 Mysql 的依赖包\n\n## 配置数据源\n创建配置文件 `src/main/resources/application.properties`\n```bash\nspring.datasource.url=jdbc:mysql://localhost:3306/study\nspring.datasource.username=root\nspring.datasource.password=wxnacy\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\n```\n创建 application.properties 文件，项目启动时会自动读取该文件中的数据，不需要配置路径，框架已经封装好了。\n\n## 创建数据映射类\n创建 `src/main/java/com/wxnacy/spring/User.java`\n```java\npackage com.wxnacy.spring;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\n@Entity\npublic class User{\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Integer id;\n    private String name;\n\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public User() {\n    }\n\n    public User(Integer id, String name) {\n        this.id = id;\n        this.name = name;\n    }\n    public User(String name) {\n        this.name = name;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n}\n```\n使用 `@Entity` 注解让 Spring 明白，这是个映射类，并直接映射到 user 表。`@Id` 告诉框架哪个是主键 id。`@GeneratedValue(strategy = GenerationType.AUTO)` 声明主键 id 的生成规则，`GenerationType.AUTO` 是把生成规则交给数据库引擎来操作，在本 Demo 中就是自增规则，这个值是缺省值，也可以直接用 `@GeneratedValue()` 来进行注解。`GenerationType` 的其他值，见[文档](https://docs.oracle.com/javaee/6/api/javax/persistence/GenerationType.html)\n\n## 创建数据访问接口\n创建 `src/main/com/wxnacy/spring/UserReopsitory.java`\n```java\npackage com.wxnacy.spring;\n\nimport java.util.List;\nimport org.springframework.data.jpa.repository.JpaRepository;\n\npublic interface UserRepository extends JpaRepository<User, Integer> {\n    List<User> findByName(String name);\n    User findById(Integer id);\n}\n```\n这个类是关键，通过集成 `JapRepository` 接口，集成封装好的方法 `save(), findAll(), delete()` 等方法，也可以自定义方法。\n\n它有一个非常令人兴奋的功能，就是可以根据名称来智能生成方法，比如 `findByName`，如果你使用驼峰命名法，将名称跟在后面，就可以根据字段 `name` 来查询数据，这给我们无限的可用性。\n\n更多用法，见[文档](https://docs.spring.io/spring-data/data-jpa/docs/current/api/)\n\n## 创建控制器\n`src/main/com/wxnacy/spring/UserController.java`\n```java\npackage com.wxnacy.spring;\n\nimport java.util.List;\nimport java.util.Map;\n\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class UserController {\n\n    @Autowired\n    private UserRepository userRepository;\n\n\t@PostMapping(\"/user\")\n    public User create(\n        @RequestBody Map<String, String> body\n            ) {\n        User user = new User(body.get(\"name\"));\n        User item = userRepository.save(user);\n        return item;\n\t}\n\n\t@GetMapping(\"/user\")\n    public List<User> users(\n        @RequestParam(required=false, defaultValue=\"wxnacy\") String name\n            ) {\n        List<User> res = userRepository.findByName(name);\n        return res;\n\t}\n\n\t@GetMapping(\"/user/{id}\")\n    public User user(\n        @PathVariable Integer id\n            ) {\n        User user = userRepository.findById(id);\n        return user;\n\t}\n\n}\n```\n使用 RESTful 风格，分别创建三个接口，创建用户，根据名称查询用户列表，以及查询单个用户。\n\n## 运行\n```bash\n$ mvn spring-boot:run\n```\n创建用户\n```bash\n$ curl -X POST localhost:8080/user -H \"Content-Type:application/json\" -d '{\"name\":\"wxnacy\"}'\n```\n```bash\n{\"id\":1,\"name\":\"wxnacy\"}\n```\n成功后重复创建几次\n\n查询单个用户\n```bash\n$ curl localhost:8080/user/1\n```\n```bash\n{\"id\":167,\"name\":\"wxnacy\"}\n```\n\n根据用户名查询用户列表\n```bash\n$ curl localhost:8080/user\n```\n```bash\n[{\"id\":1,\"name\":\"wxnacy\"},{\"id\":2,\"name\":\"wxnacy\"}]\n```\n\n\n## 参考\n- [Accessing data with MySQL](https://spring.io/guides/gs/accessing-data-mysql/)\n- [Spring Boot中使用Spring-data-jpa让数据访问更简单、更优雅](http://blog.didispace.com/springbootdata2/)\n- [Annotation Type RequestParam](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/bind/annotation/RequestParam.html)\n","source":"_posts/2018-01-21-maven-springboot-jpa-restful.md","raw":"---\ntitle: 使用 Maven 构建 SpringBoot：JPA 和 RESTful\ntags:\n  - maven\n  - springboot\ndate: 2018-01-21 16:50:24\n---\n\n\n昨天介绍了如何使用 StringBoot，今天讲讲怎么使用 [JPA](https://en.wikipedia.org/wiki/Java_Persistence_API) 操作数据库，并完成简单的 RESTful 风格接口。\n\n<!-- more --><!-- toc -->\n本章代码的 DEMO 地址：https://github.com/wxnacy/study/tree/master/java/SpringBoot-JPA\n\nJPA 说白了就是我们常说的 ORM ，为了避免写繁琐的 SQL 语句，这些框架进行了不断的封装，就是为了让我们更加方便的开发，把精力更多的集中在业务逻辑上。\n\n看本文前如果你还不了解 StringBoot，建议你先看下这篇文章[使用 Maven 构建 StringBoot：Hello World](/2018/01/20/maven-spring-boot-hello-world/)，因为我将不再讲项目结构。\n\n## 创建数据库\n新建一个 `study` 库，并新建 `user` 表\n```mysql\nDROP TABLE IF EXISTS `user`;\nCREATE TABLE `user` (\n    `id` int(11) NOT NULL AUTO_INCREMENT,\n    `name` varchar(32) NOT NULL DEFAULT '' COMMENT '用户名',\n    PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=163 DEFAULT CHARSET=utf8mb4 COMMENT='用户表';\n```\n\n## 配置 pom.xml\n```bash\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-data-jpa</artifactId>\n</dependency>\n<dependency>\n    <groupId>mysql</groupId>\n    <artifactId>mysql-connector-java</artifactId>\n</dependency>\n```\n添加 JPA 和 Mysql 的依赖包\n\n## 配置数据源\n创建配置文件 `src/main/resources/application.properties`\n```bash\nspring.datasource.url=jdbc:mysql://localhost:3306/study\nspring.datasource.username=root\nspring.datasource.password=wxnacy\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\n```\n创建 application.properties 文件，项目启动时会自动读取该文件中的数据，不需要配置路径，框架已经封装好了。\n\n## 创建数据映射类\n创建 `src/main/java/com/wxnacy/spring/User.java`\n```java\npackage com.wxnacy.spring;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\n@Entity\npublic class User{\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Integer id;\n    private String name;\n\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public User() {\n    }\n\n    public User(Integer id, String name) {\n        this.id = id;\n        this.name = name;\n    }\n    public User(String name) {\n        this.name = name;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n}\n```\n使用 `@Entity` 注解让 Spring 明白，这是个映射类，并直接映射到 user 表。`@Id` 告诉框架哪个是主键 id。`@GeneratedValue(strategy = GenerationType.AUTO)` 声明主键 id 的生成规则，`GenerationType.AUTO` 是把生成规则交给数据库引擎来操作，在本 Demo 中就是自增规则，这个值是缺省值，也可以直接用 `@GeneratedValue()` 来进行注解。`GenerationType` 的其他值，见[文档](https://docs.oracle.com/javaee/6/api/javax/persistence/GenerationType.html)\n\n## 创建数据访问接口\n创建 `src/main/com/wxnacy/spring/UserReopsitory.java`\n```java\npackage com.wxnacy.spring;\n\nimport java.util.List;\nimport org.springframework.data.jpa.repository.JpaRepository;\n\npublic interface UserRepository extends JpaRepository<User, Integer> {\n    List<User> findByName(String name);\n    User findById(Integer id);\n}\n```\n这个类是关键，通过集成 `JapRepository` 接口，集成封装好的方法 `save(), findAll(), delete()` 等方法，也可以自定义方法。\n\n它有一个非常令人兴奋的功能，就是可以根据名称来智能生成方法，比如 `findByName`，如果你使用驼峰命名法，将名称跟在后面，就可以根据字段 `name` 来查询数据，这给我们无限的可用性。\n\n更多用法，见[文档](https://docs.spring.io/spring-data/data-jpa/docs/current/api/)\n\n## 创建控制器\n`src/main/com/wxnacy/spring/UserController.java`\n```java\npackage com.wxnacy.spring;\n\nimport java.util.List;\nimport java.util.Map;\n\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class UserController {\n\n    @Autowired\n    private UserRepository userRepository;\n\n\t@PostMapping(\"/user\")\n    public User create(\n        @RequestBody Map<String, String> body\n            ) {\n        User user = new User(body.get(\"name\"));\n        User item = userRepository.save(user);\n        return item;\n\t}\n\n\t@GetMapping(\"/user\")\n    public List<User> users(\n        @RequestParam(required=false, defaultValue=\"wxnacy\") String name\n            ) {\n        List<User> res = userRepository.findByName(name);\n        return res;\n\t}\n\n\t@GetMapping(\"/user/{id}\")\n    public User user(\n        @PathVariable Integer id\n            ) {\n        User user = userRepository.findById(id);\n        return user;\n\t}\n\n}\n```\n使用 RESTful 风格，分别创建三个接口，创建用户，根据名称查询用户列表，以及查询单个用户。\n\n## 运行\n```bash\n$ mvn spring-boot:run\n```\n创建用户\n```bash\n$ curl -X POST localhost:8080/user -H \"Content-Type:application/json\" -d '{\"name\":\"wxnacy\"}'\n```\n```bash\n{\"id\":1,\"name\":\"wxnacy\"}\n```\n成功后重复创建几次\n\n查询单个用户\n```bash\n$ curl localhost:8080/user/1\n```\n```bash\n{\"id\":167,\"name\":\"wxnacy\"}\n```\n\n根据用户名查询用户列表\n```bash\n$ curl localhost:8080/user\n```\n```bash\n[{\"id\":1,\"name\":\"wxnacy\"},{\"id\":2,\"name\":\"wxnacy\"}]\n```\n\n\n## 参考\n- [Accessing data with MySQL](https://spring.io/guides/gs/accessing-data-mysql/)\n- [Spring Boot中使用Spring-data-jpa让数据访问更简单、更优雅](http://blog.didispace.com/springbootdata2/)\n- [Annotation Type RequestParam](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/bind/annotation/RequestParam.html)\n","slug":"maven-springboot-jpa-restful","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6n007d5gqo9s24g7mt"},{"title":"Python timedelta 时间差","date":"2018-01-22T14:15:17.000Z","_content":"\n\ntimedelta 本身代表一个时间差，可以在 date 或 datetime 类型间做时间差运算。\n\n<!-- more --><!-- toc -->\n## 时间差运算\n```python\nIn [21]: from datetime import datetime\n\nIn [22]: from datetime import timedelta\n\nIn [23]: a = datetime.now()\n\nIn [24]: b = datetime.utcnow()\n\nIn [25]: a - b\nOut[25]: datetime.timedelta(0, 28788, 822751)\n```\ntimedelta 不能单独使用，需要引入 datetime 模块，在上面这个例子上 a 是当前北京时间（东八区），b 是 UTC 时间，两者做减法，返回一个 `timedelta(0, 28788, 822751)` 对象，三个值分别代表的是 `days`、`seconds`、`microseconds`。三个值换算后加起来会约等于 8 小时\n\ntimedelta 只会保存 `days`、`seconds`、`microseconds` 三个值，其他类型换算如下：\n- 1 millisecond（毫秒） 转换成 1000 microseconds（微秒）\n- 1 minute 转换成 60 seconds\n- 1 hour 转换成 3600 seconds\n- 1 week 转换成 7 days\n\n三个参数的取值范围分别为：\n- 0 <= microseconds < 1000000\n- 0 <= seconds < 3600 * 24 (the number of seconds in one day)\n- -999999999 <= days <= 999999999\n\n在 2.7 版本以后 timedelta 增加了 `total_seconds()` 方法\n```python\nIn [35]: timedelta(days=1, hours=2, seconds=3.5)\nOut[35]: datetime.timedelta(1, 7203, 500000)\n\nIn [36]: timedelta(days=1, hours=2, seconds=3.5).total_seconds()\nOut[36]: 93603.5\n```\n```python\ntotal_seconds() = seconds + days * 24 * 60 * 60 + microseconds / 1000 / 100\n```\n\n## 自定义时间差\n用法\n```python\ntimedelta([days[, seconds[, microseconds[, milliseconds[, minutes[, hours[, weeks]]]]]]])\n```\n所有参数可选，且默认都是0，参数的值可以是整数，浮点数，正数或负数。\n示例\n```python\nIn [27]: from datetime import datetime\n\nIn [28]: from datetime import timedelta\n\nIn [29]: a = datetime.now()\n\nIn [32]: a\nOut[32]: datetime.datetime(2018, 1, 22, 13, 58, 46, 45448)\n\nIn [30]: a + timedelta(2)\nOut[30]: datetime.datetime(2018, 1, 24, 13, 58, 46, 45448)\n\nIn [31]: a + timedelta(days=2, hours=3)\nOut[31]: datetime.datetime(2018, 1, 24, 16, 58, 46, 45448)\n```\n\n## 参考\n- [timedelta](https://docs.python.org/2/library/datetime.html#datetime.timedelta)\n","source":"_posts/2018-01-22-python-datetime-timedelta.md","raw":"---\ntitle: Python timedelta 时间差\ntags:\n  - python\ndate: 2018-01-22 14:15:17\n---\n\n\ntimedelta 本身代表一个时间差，可以在 date 或 datetime 类型间做时间差运算。\n\n<!-- more --><!-- toc -->\n## 时间差运算\n```python\nIn [21]: from datetime import datetime\n\nIn [22]: from datetime import timedelta\n\nIn [23]: a = datetime.now()\n\nIn [24]: b = datetime.utcnow()\n\nIn [25]: a - b\nOut[25]: datetime.timedelta(0, 28788, 822751)\n```\ntimedelta 不能单独使用，需要引入 datetime 模块，在上面这个例子上 a 是当前北京时间（东八区），b 是 UTC 时间，两者做减法，返回一个 `timedelta(0, 28788, 822751)` 对象，三个值分别代表的是 `days`、`seconds`、`microseconds`。三个值换算后加起来会约等于 8 小时\n\ntimedelta 只会保存 `days`、`seconds`、`microseconds` 三个值，其他类型换算如下：\n- 1 millisecond（毫秒） 转换成 1000 microseconds（微秒）\n- 1 minute 转换成 60 seconds\n- 1 hour 转换成 3600 seconds\n- 1 week 转换成 7 days\n\n三个参数的取值范围分别为：\n- 0 <= microseconds < 1000000\n- 0 <= seconds < 3600 * 24 (the number of seconds in one day)\n- -999999999 <= days <= 999999999\n\n在 2.7 版本以后 timedelta 增加了 `total_seconds()` 方法\n```python\nIn [35]: timedelta(days=1, hours=2, seconds=3.5)\nOut[35]: datetime.timedelta(1, 7203, 500000)\n\nIn [36]: timedelta(days=1, hours=2, seconds=3.5).total_seconds()\nOut[36]: 93603.5\n```\n```python\ntotal_seconds() = seconds + days * 24 * 60 * 60 + microseconds / 1000 / 100\n```\n\n## 自定义时间差\n用法\n```python\ntimedelta([days[, seconds[, microseconds[, milliseconds[, minutes[, hours[, weeks]]]]]]])\n```\n所有参数可选，且默认都是0，参数的值可以是整数，浮点数，正数或负数。\n示例\n```python\nIn [27]: from datetime import datetime\n\nIn [28]: from datetime import timedelta\n\nIn [29]: a = datetime.now()\n\nIn [32]: a\nOut[32]: datetime.datetime(2018, 1, 22, 13, 58, 46, 45448)\n\nIn [30]: a + timedelta(2)\nOut[30]: datetime.datetime(2018, 1, 24, 13, 58, 46, 45448)\n\nIn [31]: a + timedelta(days=2, hours=3)\nOut[31]: datetime.datetime(2018, 1, 24, 16, 58, 46, 45448)\n```\n\n## 参考\n- [timedelta](https://docs.python.org/2/library/datetime.html#datetime.timedelta)\n","slug":"python-datetime-timedelta","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6o007f5gqotbnxbff5"},{"title":"Python APScheduler 定时任务","date":"2018-01-23T18:30:32.000Z","_content":"\n\nAPScheduler 是 Python 一个定时任务框架，可以指定日期、固定时间间隔等任务。\n\n<!-- more --><!-- toc -->\n## 下载\n```bash\n$ pip install apscheduler\n```\n## Hello World\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom apscheduler.schedulers.blocking import BlockingScheduler\nfrom datetime import datetime\n\nsched = BlockingScheduler()\n\ndef my_job():\n    print(f'{datetime.now():%H:%M:%S} Hello World ')\n\nsched.add_job(my_job, 'interval', seconds=5)\nsched.start()\n```\n```bash\n17:17:05 Hello World\n17:17:10 Hello World\n17:17:15 Hello World\n17:17:20 Hello World\n17:17:25 Hello World\n17:17:30 Hello World\n```\nAPScheduler 使用起来非常简单，上面的代码完成了每个五秒输出一次信息的功能，它通过如下几个步骤是实现\n- `BlockingScheduler` 调度器中的一种，该种表示在进程中只运行调度程序时使用。\n- `sched.add_job()` 添加作业，并指定调度方式为 `interval`，时间间隔为 5 秒\n- `sched.start()` 开始任务\n\n除了上述添加作业的方法，还可以使用装饰器\n```python\n@sched.scheduled_job('interval', seconds=5)\ndef my_job():\n    print(f'{datetime.now():%H:%M:%S} Hello World ')\n```\n如果同一个方法被添加到多个任务重，则需要指定任务 id\n```python\n@sched.scheduled_job('interval', id='my_job', seconds=5)\n@sched.scheduled_job('interval', id='my_job1', seconds=3)\ndef my_job():\n    print(f'{datetime.now():%H:%M:%S} Hello World ')\n```\n\n## 调度器\n除了刚才用到的调度器，总共有如下几种\n- `BlockingScheduler` 进程中只运行调度程序时使用。\n- `BackgroundScheduler` 当没有使用任何框架时使用，并希望调度程序在应用程序的后台运行。\n- `AsyncIOScheduler` 当应用程序使用 `asyncio` 模块时使用\n- `GeventScheduler` 当应用程序使用 `gevent` 时使用\n- `TornadoScheduler` 当创建 `Tornado` 应用时使用\n- `TwistedScheduler` 当创建 `Twisted` 应用时使用\n- `QtScheduler` 当创建 `Qt` 应用时使用\n比较常用的是前两个\n\n## 调用方式\n`add_job()` 中 `trigger` 参数为调用方式，有 `interval, day, cron` 三种值\n### cron\n指定时间调度，参数如下\n- year (int|str) – 4-digit year\n- month (int|str) – month (1-12)\n- day (int|str) – day of the (1-31)\n- week (int|str) – ISO week (1-53)\n- day_of_week (int|str) – number or name of weekday (0-6 or mon,tue,wed,thu,fri,sat,sun)\n- hour (int|str) – hour (0-23)\n- minute (int|str) – minute (0-59)\n- second (int|str) – second (0-59)\n- start_date (datetime|str) – earliest possible date/time to trigger on (inclusive)\n- end_date (datetime|str) – latest possible date/time to trigger on (inclusive)\n- timezone (datetime.tzinfo|str) – time zone to use forthe date/time calculations (defaults to scheduler timezone)\n- jitter (int|None) – advance or delay the job execution by jitter seconds at most.\n\n当参数指定字符串时有许多种用法，比如：\n```python\n# 当前任务会在 6、7、8、11、12 月的第三个周五的 0、1、2、3 点执行\nsched.add_job(job_function, 'cron', month='6-8,11-12', day='3rd fri', hour='0-3')\n```\n\n更多的用法见[文档](http://apscheduler.readthedocs.io/en/latest/modules/triggers/cron.html#expression-types)\n\n### interval\n时间间隔调用，参数如下\n- weeks (int) – number of weeks to wait\n- days (int) – number of days to wait\n- hours (int) – number of hours to wait\n- minutes (int) – number of minutes to wait\n- seconds (int) – number of seconds to wait\n- start_date (datetime|str) – starting point for(int i = 0; i < the interval calculation\n- end_date (datetime|str) – latest possible date/time to trigger on\n- timezone (datetime.tzinfo|str) – time zone to use for the date/time calculations\n- jitter (int|None) – advance or delay the job execution by jitter seconds at most.\n\n假如你要做一个活动，定时任务需要指定一个时间区间，就不需要手动去开启或停止了，只需要像下边这样设置 `start_date, end_date` 即可\n```python\nsched.add_job(job_function, 'interval', hours=2, start_date='2018-01-10 09:30:00', end_date='2018-06-15 11:00:00')\n```\n更多的用法见[文档](http://apscheduler.readthedocs.io/en/latest/modules/triggers/interval.html#examples)\n\n### date\n指定时间，但只会执行一次\n- run_date (datetime|str) – the date/time to run the job at\n- timezone (datetime.tzinfo|str) – time zone for run_date if it doesn’t have one already\n\n例子\n```python\n@sched.scheduled_job('date', id='my_job', run_date='2018-01-23 18:25:30')\n```\n更多的用法见[文档](http://apscheduler.readthedocs.io/en/latest/modules/triggers/date.html)\n\n## 参考\n- [Advanced Python Scheduler](http://apscheduler.readthedocs.io/en/latest/index.html)\n- [Python任务调度模块 – APScheduler](http://debugo.com/apscheduler/)\n","source":"_posts/2018-01-23-python-apscheduler.md","raw":"---\ntitle: Python APScheduler 定时任务\ntags:\n  - python\ndate: 2018-01-23 18:30:32\n---\n\n\nAPScheduler 是 Python 一个定时任务框架，可以指定日期、固定时间间隔等任务。\n\n<!-- more --><!-- toc -->\n## 下载\n```bash\n$ pip install apscheduler\n```\n## Hello World\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom apscheduler.schedulers.blocking import BlockingScheduler\nfrom datetime import datetime\n\nsched = BlockingScheduler()\n\ndef my_job():\n    print(f'{datetime.now():%H:%M:%S} Hello World ')\n\nsched.add_job(my_job, 'interval', seconds=5)\nsched.start()\n```\n```bash\n17:17:05 Hello World\n17:17:10 Hello World\n17:17:15 Hello World\n17:17:20 Hello World\n17:17:25 Hello World\n17:17:30 Hello World\n```\nAPScheduler 使用起来非常简单，上面的代码完成了每个五秒输出一次信息的功能，它通过如下几个步骤是实现\n- `BlockingScheduler` 调度器中的一种，该种表示在进程中只运行调度程序时使用。\n- `sched.add_job()` 添加作业，并指定调度方式为 `interval`，时间间隔为 5 秒\n- `sched.start()` 开始任务\n\n除了上述添加作业的方法，还可以使用装饰器\n```python\n@sched.scheduled_job('interval', seconds=5)\ndef my_job():\n    print(f'{datetime.now():%H:%M:%S} Hello World ')\n```\n如果同一个方法被添加到多个任务重，则需要指定任务 id\n```python\n@sched.scheduled_job('interval', id='my_job', seconds=5)\n@sched.scheduled_job('interval', id='my_job1', seconds=3)\ndef my_job():\n    print(f'{datetime.now():%H:%M:%S} Hello World ')\n```\n\n## 调度器\n除了刚才用到的调度器，总共有如下几种\n- `BlockingScheduler` 进程中只运行调度程序时使用。\n- `BackgroundScheduler` 当没有使用任何框架时使用，并希望调度程序在应用程序的后台运行。\n- `AsyncIOScheduler` 当应用程序使用 `asyncio` 模块时使用\n- `GeventScheduler` 当应用程序使用 `gevent` 时使用\n- `TornadoScheduler` 当创建 `Tornado` 应用时使用\n- `TwistedScheduler` 当创建 `Twisted` 应用时使用\n- `QtScheduler` 当创建 `Qt` 应用时使用\n比较常用的是前两个\n\n## 调用方式\n`add_job()` 中 `trigger` 参数为调用方式，有 `interval, day, cron` 三种值\n### cron\n指定时间调度，参数如下\n- year (int|str) – 4-digit year\n- month (int|str) – month (1-12)\n- day (int|str) – day of the (1-31)\n- week (int|str) – ISO week (1-53)\n- day_of_week (int|str) – number or name of weekday (0-6 or mon,tue,wed,thu,fri,sat,sun)\n- hour (int|str) – hour (0-23)\n- minute (int|str) – minute (0-59)\n- second (int|str) – second (0-59)\n- start_date (datetime|str) – earliest possible date/time to trigger on (inclusive)\n- end_date (datetime|str) – latest possible date/time to trigger on (inclusive)\n- timezone (datetime.tzinfo|str) – time zone to use forthe date/time calculations (defaults to scheduler timezone)\n- jitter (int|None) – advance or delay the job execution by jitter seconds at most.\n\n当参数指定字符串时有许多种用法，比如：\n```python\n# 当前任务会在 6、7、8、11、12 月的第三个周五的 0、1、2、3 点执行\nsched.add_job(job_function, 'cron', month='6-8,11-12', day='3rd fri', hour='0-3')\n```\n\n更多的用法见[文档](http://apscheduler.readthedocs.io/en/latest/modules/triggers/cron.html#expression-types)\n\n### interval\n时间间隔调用，参数如下\n- weeks (int) – number of weeks to wait\n- days (int) – number of days to wait\n- hours (int) – number of hours to wait\n- minutes (int) – number of minutes to wait\n- seconds (int) – number of seconds to wait\n- start_date (datetime|str) – starting point for(int i = 0; i < the interval calculation\n- end_date (datetime|str) – latest possible date/time to trigger on\n- timezone (datetime.tzinfo|str) – time zone to use for the date/time calculations\n- jitter (int|None) – advance or delay the job execution by jitter seconds at most.\n\n假如你要做一个活动，定时任务需要指定一个时间区间，就不需要手动去开启或停止了，只需要像下边这样设置 `start_date, end_date` 即可\n```python\nsched.add_job(job_function, 'interval', hours=2, start_date='2018-01-10 09:30:00', end_date='2018-06-15 11:00:00')\n```\n更多的用法见[文档](http://apscheduler.readthedocs.io/en/latest/modules/triggers/interval.html#examples)\n\n### date\n指定时间，但只会执行一次\n- run_date (datetime|str) – the date/time to run the job at\n- timezone (datetime.tzinfo|str) – time zone for run_date if it doesn’t have one already\n\n例子\n```python\n@sched.scheduled_job('date', id='my_job', run_date='2018-01-23 18:25:30')\n```\n更多的用法见[文档](http://apscheduler.readthedocs.io/en/latest/modules/triggers/date.html)\n\n## 参考\n- [Advanced Python Scheduler](http://apscheduler.readthedocs.io/en/latest/index.html)\n- [Python任务调度模块 – APScheduler](http://debugo.com/apscheduler/)\n","slug":"python-apscheduler","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6q007i5gqoeq1xlq34"},{"title":"Python SQLAlchemy 数据库 ORM 框架","date":"2018-01-24T21:06:15.000Z","_content":"\n[SQLAlchemy](https://www.sqlalchemy.org/) 是 Python 操作数据库的 ORM 框架。可以很方便的执行常用数据库操作，以及复杂的 SQL 语句。\n\n<!-- more --><!-- toc -->\n## 下载\n```bash\n$ pip install SQLAlchemy\n```\n查看版本\n```python\n>>> import sqlalchemy\n>>> sqlalchemy.__version__\n1.2.0\n```\n## 使用\n### 创建表\n首先我们来看一个通过映射创建表的实例\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom sqlalchemy import create_engine\nfrom sqlalchemy import Column, Integer, String\nfrom sqlalchemy.ext.declarative import declarative_base\n\nSQLALCHEMY_DATABASE_URI = 'mysql+pymysql://root:wxnacy@127.0.0.1:3306/study?charset=utf8mb4'\nengine = create_engine(SQLALCHEMY_DATABASE_URI, echo=True)\nBase = declarative_base()\n\nclass Book(Base):\n    __tablename__ = 'book'\n    id = Column(Integer, primary_key=True)\n    name = Column(String(132))\n\n    def __str__(self):\n        return f\"Book[id:{self.id}, name:{self.name}]\"\n\nBase.metadata.create_all(engine)\n```\n如果你复制上面的代码来执行，应该能得到下面的结果\n```bash\n2018-01-24 16:44:04,066 INFO sqlalchemy.engine.base.Engine\nCREATE TABLE book (\n        id INTEGER NOT NULL AUTO_INCREMENT,\n                name VARCHAR(132),\n                        PRIMARY KEY (id)\n\n        )\n2018-01-24 16:44:04,066 INFO sqlalchemy.engine.base.Engine {}\n2018-01-24 16:44:04,099 INFO sqlalchemy.engine.base.Engine COMMIT\n```\n从日志看很明显执行了创建表的语句，我们具体来看看它都做了些什么\n\n首先需要创建引擎，通过 `create_engine` 方法完成，`echo` 参数控制了是否输出相关日志，默认 `False`\n```python\nfrom sqlalchemy import create_engine\n\nSQLALCHEMY_DATABASE_URI = 'mysql+pymysql://root:wxnacy@127.0.0.1:3306/study?charset=utf8mb4'\nengine = create_engine(SQLALCHEMY_DATABASE_URI, echo=True)\n```\n接下来需要创建一个映射用的基类 `Base`，所有需要映射表的类都要继承这个类，才能完成相关库的操作，比如 `Book`，在 `Book` 中设置参数 `__tablename__` 代表映射的表名，各个字段需要通过 `Column` 方法来赋值，并设置相应的字段类型\n```python\nfrom sqlalchemy import Column, Integer, String\nfrom sqlalchemy.ext.declarative import declarative_base\n\nBase = declarative_base()\n\nclass Book(Base):\n    __tablename__ = 'book'\n    id = Column(Integer, primary_key=True)\n    name = Column(String(132))\n\n    def __str__(self):\n        return f\"Book[id:{self.id}, name:{self.name}]\"\n```\n最后通过基类对所给引擎的子类进行映射创建\n```python\nBase.metadata.create_all(engine)\n```\n### 操作数据\n下面我们正式操作数据，下面是个增删改查的例子\n```python\nfrom sqlalchemy.orm import sessionmaker\nSession = sessionmaker(bind=engine)\nsession = Session()\n\nbook = Book(name=\"new book\")\nsession.add(book)\nsession.commit()\nprint(book)         # > Book[id:1, name:new book]   查询数据\n\nbook = session.query(Book).filter_by(id=1).first()\nprint(book)         # > Book[id:1, name:new book]   通过id查询\n\nbook.name = \"wxnacy\"\nsession.add(book)\nsession.commit()\n\nprint(book)         # > Book[id:1, name:wxnacy]   修改数据\nsession.delete(book)\nsession.commit()    # 删除\n```\nSQLAlchemy 在操作数据库时需要用到 `Session`，通过 `sessionmaker` 方法获取，操作过程中最关键的一步就是 `commit`，不然是不会同步到库中的\n### 更多查询操作\n`filter_by(), filter()` 两个方法提供了很完成的查询操作，可以满足平常大多数查询操作，后者的功能更强大一些\n```python\n# 获取满足条件的第一条数据\nfilter_by(name='wxnacy').first()\nfilter(Book.name=='wxnacy').first()     # filter 的用法稍有不同\n\n# 获取满足条件的所有数据\nfilter_by(name='wxnacy').all()\n\n# 获取满足条件的所有数据的数量\nfilter_by(name='wxnacy').count()\n\n# 后续实例省去 all(), first(), count() 等\n\n# and 操作\n# 我们在 Book 中增加一个 price 价格字段\n# where id = 1 and name = 'wxnacy'\nfilter_by(name='wxnacy', price=12)\nfilter_by(name='wxnacy').filter_by(price=12)\n# only filter\nfrom sqlalchemy import and_\nfilter(and_(Book.name='wxnacy', Book.price=12))\n\n# in (only filter)\n# where id in (1, 2)\nfilter(Book.id.in_([1, 2]))\n\n# like (only filter)\n# where name like '%wxn%'\nfilter(Book.name.like('%wxn%'))\n\n# not equals (only filter)\n# where id != 1\nfilter(Book.id != 1)\n\n# not in (only filter)\n# where id not in (1, 2)\nfilter(~Book.id.in_([1, 2]))\n\n# or (only filter)\n# where id = 1 or name = 'wxnacy'\nfrom sqlalchemy import or_\nfilter(or_(Book.id == 1, Book.name == 'wxnacy'))\n\n# order\n# order by id\nfilter_by().order_by(Book.id)\n# order by id desc\nfrom sqlalchemy import desc\nfilter_by().order_by(desc(Book.id))\nfilter_by().order_by(Book.id.desc())\nfilter_by().order_by('id desc')\n\n# limit\n# limit 4\nfilter_by().limit(4)\n```\n### order by\n排序有三种方式，默认为正序排列\n```python\n# select * from book order by id\nsession.query(Book).order_by(Book.id).all()\n\n# select * from book order by id desc\nfrom sqlalchemy import desc\nsession.query(Book).order_by(desc(Book.id)).all()\nsession.query(Book).order_by(Book.id.desc()).all()\nsession.query(Book).order_by('id desc').all()\n\n```\n### group by\n```python\n# select name, count(name) as c from book group by name\nfrom sqlalchemy import func\nsession.query(Book.name, func.count(Book.name).label('c')).group_by(Book.name).all()\n```\n### 批量插入\n```python\n# insert into book (name) values ('wxnacy');\n# insert into book (name) values ('wxnacy');\n# 1\nsession.add(Book(name=\"wxnacy\"))\nsession.add(Book(name=\"wxnacy\"))\nsession.commit()\n\n# 2\nsession.add_all([Book(name=\"wxnacy\"), Book(name=\"wxnacy\")])\nsession.commit()\n\n# insert into book (name) values ('wxnacy'), ('wxnacy');\n# 3\nitems = [dict(name=\"wxnacy\"), dict(name=\"wxnacy\")]\nsession.execute(Book.__table__.insert(), items)\nsession.commit()\n```\n从结果上三种方法都可以实现批量插入的效果，但是从他们生成的 SQL 语句看，前两个种就是重复执行了单条 `insert` 语句，第三种则是将批量添加的数据整合到一条语句中，从效率上讲肯定是推荐第三种方式\n\n### 使用 SQL 语句\nORM 虽然操作方便，但是很多复杂的情况都是不能应对的，或者说我们懒得去学习那么复杂的操作，直接用 SQL 多方便啊，对吧。SQLAlchemy 也是可以直接使用 SQL 的，并且会很方便，先看一个例子吧\n\n```python\nfrom sqlalchemy import text\n\nsql = \"insert into book (name) values (:name)\"\nengine.execute(text(sql), **dict(name='use_sql'))\n\nsql = \"select * from book where name = :name\"\nres = engine.execute(text(sql), **dict(name='use_sql')).fetchall()\nprint(res)      # >  [(2, 'new book')]\n```\n想要执行完整 SQL 时，需要直接使用 `engine` 对象，SQL 语句需要注意的是参数的部分， `:name` 样式来做参数占位，使用 `text()` 方法将 SQL 封装，`execute` 剩下的可变参数将 SQL 需要的参数传入，插入语句直接执行，查询语句加上 `fetchall()` 方法即可。\n\n方便是方便，然后从上面的结果来看，在查询语句时，数据并没有字段名，在读取数据值的时候非常麻烦，以前我会使用诸如下面两种方式转成可读的状态\n```python\nres = session.execute(text(\"select * from book where id = 2\"))\n\nRecord = namedtuple('Record', res.keys())\nrecords = {Record(*r) for r in res.fetchall()}\nres = [r for r in records]\nprint(res)  # > [Record(id=2, name='new book')]\n```\n```python\nres = session.execute(text(\"select * from book where id = 2\"))\n\ndef _fmt_i(k, v):\n    return k ,v\n\ndef _fmt(o):\n    r = list(map(_fmt_i, res.keys(), o))\n    return {k: v for k, v in r}\nres = [_fmt(o) for o in res.fetchall()]\nprint(res)  # > [{'id': 2, 'name': 'new book'}]\n```\n这两种方式都可以解决问题，但是我心里总觉得别扭，直到看到下面的用法\n\n```python\nfrom sqlalchemy import text\n# where id = 2 and name = 'new book'\nbook = session.query(Book).filter(text(\"id = :id and name = :name\")).params(id=2, name=\"new book\").first()\nprint(book) # > Book[id:2, name=new book]\n```\n利用的 `session` 的 `filter()` 方法，直接传入 `text()` 包装过的 SQL，再通过 `params()` 方法传入参数，得到的结果直接用映射类 `Book` 来接受，这样的“半土半洋”的查询方式才是真正的王道。\n\n在 FLask 框架中使用 SQLAlchemy 可以使用 `Flask_SQLAlchemy` 依赖，详情见 [Flask SQLAlchemy 框架的使用](/2018/01/25/flask-sqlalchemy/)\n\n\n## 参考\n- [SQLAlchemy 1.2 Documentation](http://docs.sqlalchemy.org/en/latest/intro.html#documentation-overview)\n","source":"_posts/2018-01-24-python-sqlalchemy.md","raw":"---\ntitle: Python SQLAlchemy 数据库 ORM 框架\ntags:\n  - python\ndate: 2018-01-24 21:06:15\n---\n\n[SQLAlchemy](https://www.sqlalchemy.org/) 是 Python 操作数据库的 ORM 框架。可以很方便的执行常用数据库操作，以及复杂的 SQL 语句。\n\n<!-- more --><!-- toc -->\n## 下载\n```bash\n$ pip install SQLAlchemy\n```\n查看版本\n```python\n>>> import sqlalchemy\n>>> sqlalchemy.__version__\n1.2.0\n```\n## 使用\n### 创建表\n首先我们来看一个通过映射创建表的实例\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom sqlalchemy import create_engine\nfrom sqlalchemy import Column, Integer, String\nfrom sqlalchemy.ext.declarative import declarative_base\n\nSQLALCHEMY_DATABASE_URI = 'mysql+pymysql://root:wxnacy@127.0.0.1:3306/study?charset=utf8mb4'\nengine = create_engine(SQLALCHEMY_DATABASE_URI, echo=True)\nBase = declarative_base()\n\nclass Book(Base):\n    __tablename__ = 'book'\n    id = Column(Integer, primary_key=True)\n    name = Column(String(132))\n\n    def __str__(self):\n        return f\"Book[id:{self.id}, name:{self.name}]\"\n\nBase.metadata.create_all(engine)\n```\n如果你复制上面的代码来执行，应该能得到下面的结果\n```bash\n2018-01-24 16:44:04,066 INFO sqlalchemy.engine.base.Engine\nCREATE TABLE book (\n        id INTEGER NOT NULL AUTO_INCREMENT,\n                name VARCHAR(132),\n                        PRIMARY KEY (id)\n\n        )\n2018-01-24 16:44:04,066 INFO sqlalchemy.engine.base.Engine {}\n2018-01-24 16:44:04,099 INFO sqlalchemy.engine.base.Engine COMMIT\n```\n从日志看很明显执行了创建表的语句，我们具体来看看它都做了些什么\n\n首先需要创建引擎，通过 `create_engine` 方法完成，`echo` 参数控制了是否输出相关日志，默认 `False`\n```python\nfrom sqlalchemy import create_engine\n\nSQLALCHEMY_DATABASE_URI = 'mysql+pymysql://root:wxnacy@127.0.0.1:3306/study?charset=utf8mb4'\nengine = create_engine(SQLALCHEMY_DATABASE_URI, echo=True)\n```\n接下来需要创建一个映射用的基类 `Base`，所有需要映射表的类都要继承这个类，才能完成相关库的操作，比如 `Book`，在 `Book` 中设置参数 `__tablename__` 代表映射的表名，各个字段需要通过 `Column` 方法来赋值，并设置相应的字段类型\n```python\nfrom sqlalchemy import Column, Integer, String\nfrom sqlalchemy.ext.declarative import declarative_base\n\nBase = declarative_base()\n\nclass Book(Base):\n    __tablename__ = 'book'\n    id = Column(Integer, primary_key=True)\n    name = Column(String(132))\n\n    def __str__(self):\n        return f\"Book[id:{self.id}, name:{self.name}]\"\n```\n最后通过基类对所给引擎的子类进行映射创建\n```python\nBase.metadata.create_all(engine)\n```\n### 操作数据\n下面我们正式操作数据，下面是个增删改查的例子\n```python\nfrom sqlalchemy.orm import sessionmaker\nSession = sessionmaker(bind=engine)\nsession = Session()\n\nbook = Book(name=\"new book\")\nsession.add(book)\nsession.commit()\nprint(book)         # > Book[id:1, name:new book]   查询数据\n\nbook = session.query(Book).filter_by(id=1).first()\nprint(book)         # > Book[id:1, name:new book]   通过id查询\n\nbook.name = \"wxnacy\"\nsession.add(book)\nsession.commit()\n\nprint(book)         # > Book[id:1, name:wxnacy]   修改数据\nsession.delete(book)\nsession.commit()    # 删除\n```\nSQLAlchemy 在操作数据库时需要用到 `Session`，通过 `sessionmaker` 方法获取，操作过程中最关键的一步就是 `commit`，不然是不会同步到库中的\n### 更多查询操作\n`filter_by(), filter()` 两个方法提供了很完成的查询操作，可以满足平常大多数查询操作，后者的功能更强大一些\n```python\n# 获取满足条件的第一条数据\nfilter_by(name='wxnacy').first()\nfilter(Book.name=='wxnacy').first()     # filter 的用法稍有不同\n\n# 获取满足条件的所有数据\nfilter_by(name='wxnacy').all()\n\n# 获取满足条件的所有数据的数量\nfilter_by(name='wxnacy').count()\n\n# 后续实例省去 all(), first(), count() 等\n\n# and 操作\n# 我们在 Book 中增加一个 price 价格字段\n# where id = 1 and name = 'wxnacy'\nfilter_by(name='wxnacy', price=12)\nfilter_by(name='wxnacy').filter_by(price=12)\n# only filter\nfrom sqlalchemy import and_\nfilter(and_(Book.name='wxnacy', Book.price=12))\n\n# in (only filter)\n# where id in (1, 2)\nfilter(Book.id.in_([1, 2]))\n\n# like (only filter)\n# where name like '%wxn%'\nfilter(Book.name.like('%wxn%'))\n\n# not equals (only filter)\n# where id != 1\nfilter(Book.id != 1)\n\n# not in (only filter)\n# where id not in (1, 2)\nfilter(~Book.id.in_([1, 2]))\n\n# or (only filter)\n# where id = 1 or name = 'wxnacy'\nfrom sqlalchemy import or_\nfilter(or_(Book.id == 1, Book.name == 'wxnacy'))\n\n# order\n# order by id\nfilter_by().order_by(Book.id)\n# order by id desc\nfrom sqlalchemy import desc\nfilter_by().order_by(desc(Book.id))\nfilter_by().order_by(Book.id.desc())\nfilter_by().order_by('id desc')\n\n# limit\n# limit 4\nfilter_by().limit(4)\n```\n### order by\n排序有三种方式，默认为正序排列\n```python\n# select * from book order by id\nsession.query(Book).order_by(Book.id).all()\n\n# select * from book order by id desc\nfrom sqlalchemy import desc\nsession.query(Book).order_by(desc(Book.id)).all()\nsession.query(Book).order_by(Book.id.desc()).all()\nsession.query(Book).order_by('id desc').all()\n\n```\n### group by\n```python\n# select name, count(name) as c from book group by name\nfrom sqlalchemy import func\nsession.query(Book.name, func.count(Book.name).label('c')).group_by(Book.name).all()\n```\n### 批量插入\n```python\n# insert into book (name) values ('wxnacy');\n# insert into book (name) values ('wxnacy');\n# 1\nsession.add(Book(name=\"wxnacy\"))\nsession.add(Book(name=\"wxnacy\"))\nsession.commit()\n\n# 2\nsession.add_all([Book(name=\"wxnacy\"), Book(name=\"wxnacy\")])\nsession.commit()\n\n# insert into book (name) values ('wxnacy'), ('wxnacy');\n# 3\nitems = [dict(name=\"wxnacy\"), dict(name=\"wxnacy\")]\nsession.execute(Book.__table__.insert(), items)\nsession.commit()\n```\n从结果上三种方法都可以实现批量插入的效果，但是从他们生成的 SQL 语句看，前两个种就是重复执行了单条 `insert` 语句，第三种则是将批量添加的数据整合到一条语句中，从效率上讲肯定是推荐第三种方式\n\n### 使用 SQL 语句\nORM 虽然操作方便，但是很多复杂的情况都是不能应对的，或者说我们懒得去学习那么复杂的操作，直接用 SQL 多方便啊，对吧。SQLAlchemy 也是可以直接使用 SQL 的，并且会很方便，先看一个例子吧\n\n```python\nfrom sqlalchemy import text\n\nsql = \"insert into book (name) values (:name)\"\nengine.execute(text(sql), **dict(name='use_sql'))\n\nsql = \"select * from book where name = :name\"\nres = engine.execute(text(sql), **dict(name='use_sql')).fetchall()\nprint(res)      # >  [(2, 'new book')]\n```\n想要执行完整 SQL 时，需要直接使用 `engine` 对象，SQL 语句需要注意的是参数的部分， `:name` 样式来做参数占位，使用 `text()` 方法将 SQL 封装，`execute` 剩下的可变参数将 SQL 需要的参数传入，插入语句直接执行，查询语句加上 `fetchall()` 方法即可。\n\n方便是方便，然后从上面的结果来看，在查询语句时，数据并没有字段名，在读取数据值的时候非常麻烦，以前我会使用诸如下面两种方式转成可读的状态\n```python\nres = session.execute(text(\"select * from book where id = 2\"))\n\nRecord = namedtuple('Record', res.keys())\nrecords = {Record(*r) for r in res.fetchall()}\nres = [r for r in records]\nprint(res)  # > [Record(id=2, name='new book')]\n```\n```python\nres = session.execute(text(\"select * from book where id = 2\"))\n\ndef _fmt_i(k, v):\n    return k ,v\n\ndef _fmt(o):\n    r = list(map(_fmt_i, res.keys(), o))\n    return {k: v for k, v in r}\nres = [_fmt(o) for o in res.fetchall()]\nprint(res)  # > [{'id': 2, 'name': 'new book'}]\n```\n这两种方式都可以解决问题，但是我心里总觉得别扭，直到看到下面的用法\n\n```python\nfrom sqlalchemy import text\n# where id = 2 and name = 'new book'\nbook = session.query(Book).filter(text(\"id = :id and name = :name\")).params(id=2, name=\"new book\").first()\nprint(book) # > Book[id:2, name=new book]\n```\n利用的 `session` 的 `filter()` 方法，直接传入 `text()` 包装过的 SQL，再通过 `params()` 方法传入参数，得到的结果直接用映射类 `Book` 来接受，这样的“半土半洋”的查询方式才是真正的王道。\n\n在 FLask 框架中使用 SQLAlchemy 可以使用 `Flask_SQLAlchemy` 依赖，详情见 [Flask SQLAlchemy 框架的使用](/2018/01/25/flask-sqlalchemy/)\n\n\n## 参考\n- [SQLAlchemy 1.2 Documentation](http://docs.sqlalchemy.org/en/latest/intro.html#documentation-overview)\n","slug":"python-sqlalchemy","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6q007k5gqofkkldszk"},{"title":"Flask Restless 20 行代码搞定服务器 CURD 接口","date":"2018-01-26T21:45:56.000Z","_content":"\n\n在使用 Flask 开发 web 接口时，设计到简单 RESTful 风格接口，使用 Restless 插件会非常方便，只需要几行代码就可以搞定一个服务器接口\n\n<!-- more --><!-- toc -->\n\n## 下载\n```bash\n$ pip install Flask-Restless\n```\n\n## 快速开始\n编辑 `run.py`\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfrom flask import Flask\nfrom flask_sqlalchemy import SQLAlchemy\nfrom flask_restless import APIManager\n\napp = Flask(__name__)\nSQLALCHEMY_DATABASE_URI = 'mysql+pymysql://root:wxnacy@127.0.0.1:3306/study?charset=utf8mb4'\napp.config['SQLALCHEMY_DATABASE_URI'] = SQLALCHEMY_DATABASE_URI\n\ndb = SQLAlchemy(app)\nmanager = APIManager(app, flask_sqlalchemy_db=db)\n\n\nclass Book(db.Model):\n    __tablename__ = 'book'\n    id = db.Column(db.BIGINT, primary_key=True)\n    name = db.Column(db.String, default=\"\", doc='名称')\n\n\nmanager.create_api(Book, methods=['GET', 'POST', 'PUT', 'DELETE'])\n\napp.run()\n```\n启动\n```bash\n$ python run.py\n```\n### POST\n创建\n```bash\n$ curl -X POST localhost:5000/api/book -H \"Content-Type:application/json\" -d '{\"name\":\"wxnacy\"}'\n```\n```bash\n{\n    \"id\": 96,\n    \"name\": \"wxnacy\"\n}\n```\n### GET\n查看列表\n```bash\ncurl localhost:5000/api/book\n```\n```json\n{\n    \"num_results\": 95,\n        \"objects\": [\n        {\n            \"id\": 2,\n            \"name\": \"2-book\"\n\n        },\n        ...\n        {\n            \"id\": 11,\n            \"name\": \"wxnacy\"\n\n        }\n\n        ],\n        \"page\": 1,\n        \"total_pages\": 10\n}\n```\n查看单个\n```bash\n$ curl localhost:5000/api/book/96\n```\n```json\n{\n    \"id\": 96,\n    \"name\": \"wxnacy\"\n}\n```\n### PUT\n```bash\n$ curl -X PUT localhost:5000/api/book/96 -H \"Content-Type:application/json\" -d '{\"name\":\"new_name\"}'\n```\n```json\n{\n    \"id\": 96,\n    \"name\": \"new_name\"\n}\n```\n### DELETE\n```bash\n$ curl -X DELETE localhost:5000/api/book/96\n```\n看，几行代码就搞定了增删改查四大功能，如果你只是搭个自己的小服务，这就已经足够了，再也不用吭哧吭哧写代码了，关于 Methods 的更多解释见[文档 ](https://flask-restless.readthedocs.io/en/stable/customizing.html#http-methods)\n\n## 修改地址前缀\n```python\nmanager.create_api(Book, url_prefix='/api/v2', methods=['GET'])\n```\n在 `create_api` 的时候作如上改动，就可以修改接口前缀\n```bash\n$ curl localhost:5000/api/v2/book\n```\n\n## 搜索请求\nRestless 非常强大的功能是，他可以在不改动代码的情况下做基于数据的条件查询\n```bash\ncurl \\\n    -G \\\n    -H \"Content-type: application/json\" \\\n    -d \"q={\\\"filters\\\":[{\\\"name\\\":\\\"name\\\",\\\"op\\\":\\\"like\\\",\\\"val\\\":\\\"%new%\\\"}]}\" \\\n    http://127.0.0.1:5000/api/book\n```\n```json\n{\n    \"num_results\": 2,\n    \"objects\": [\n    {\n        \"id\": 6,\n        \"name\": \"new book\"\n    },\n    {\n        \"id\": 7,\n        \"name\": \"new book\"\n    }],\n    \"page\": 1,\n    \"total_pages\": 1\n}\n```\n什么代码都没动，就完成 `like` 的查询的操作，妈妈再也不用担心我写 API 了\n### 请求格式\n```json\n{\"name\": <fieldname>, \"op\": <operatorname>, \"val\": <argument>}\n```\n或\n```\n{\"name\": <fieldname>, \"op\": <operatorname>, \"field\": <fieldname>}\n```\n`fieldname` 是字段名，`operatorname` 是查询条件，`argument` 是条件值，通过不同的 `op` 值来完成相应操作，更多的 Operators 值\n- ==, 371032668@qq.com, equals, equals_to\n- !=, neq, does_not_equal, not_equal_to\n- `>, gt, <, lt`\n- `>=, ge, gte, geq, <=, le, lte, leq`\n- in, not_in\n- is_null, is_not_null\n- like\n- has\n- any\n更多用法见[文档](https://flask-restless.readthedocs.io/en/stable/searchformat.html#query-format)\n\n## 方法求值\nRestless 另一个比较牛逼的功能，是可以使用数据库的函数，比如\n```bash\n$ curl localhost:5000/api/eval/book?q={\"functions\": [{\"name\": \"count\", \"field\": \"id\"}]}\n# urlencode 编码后请求\n$ curl localhost:5000/api/eval/book?q=%7B%22functions%22%3A%20%5B%7B%22name%22%3A%20%22count%22%2C%20%22field%22%3A%20%22id%22%7D%5D%7D\n```\n```json\n{\"count__id\": 94}\n```\n就这样，我们得到了数据总和，不过这个功能默认是不打开的，需要设置 `allow_functions` 手动打开\n```python\nmanager.create_api(Book, allow_functions=True, methods=['GET', 'POST', 'PUT', 'DELETE'])\n```\n更多介绍见[文档](https://flask-restless.readthedocs.io/en/stable/requestformat.html#function-evaluation)\n\n## JSONP\nRestless 默认支持 JSONP，使用正常访问方式即可\n```bash\n$ curl localhost:5000/api/book/10?callback=foo\n```\n```bash\nfoo({\"data\": {\"id\": 10, \"name\": \"wxnacy\"}, \"meta\": {\"Content-Type\": \"application/javascript\", \"status\": 200}})\n```\n\n\n## 参考\n- [Flask-Restless](https://flask-restless.readthedocs.io/en/stable/)\n- [Request preprocessors and postprocessors](https://flask-restless.readthedocs.io/en/stable/customizing.html#request-preprocessors-and-postprocessors)\n- [Request preprocessors and postprocessors](https://flask-restless.readthedocs.io/en/latest/processors.html)\n","source":"_posts/2018-01-26-flask-restless.md","raw":"---\ntitle: Flask Restless 20 行代码搞定服务器 CURD 接口\ntags:\n  - python\ndate: 2018-01-26 21:45:56\n---\n\n\n在使用 Flask 开发 web 接口时，设计到简单 RESTful 风格接口，使用 Restless 插件会非常方便，只需要几行代码就可以搞定一个服务器接口\n\n<!-- more --><!-- toc -->\n\n## 下载\n```bash\n$ pip install Flask-Restless\n```\n\n## 快速开始\n编辑 `run.py`\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfrom flask import Flask\nfrom flask_sqlalchemy import SQLAlchemy\nfrom flask_restless import APIManager\n\napp = Flask(__name__)\nSQLALCHEMY_DATABASE_URI = 'mysql+pymysql://root:wxnacy@127.0.0.1:3306/study?charset=utf8mb4'\napp.config['SQLALCHEMY_DATABASE_URI'] = SQLALCHEMY_DATABASE_URI\n\ndb = SQLAlchemy(app)\nmanager = APIManager(app, flask_sqlalchemy_db=db)\n\n\nclass Book(db.Model):\n    __tablename__ = 'book'\n    id = db.Column(db.BIGINT, primary_key=True)\n    name = db.Column(db.String, default=\"\", doc='名称')\n\n\nmanager.create_api(Book, methods=['GET', 'POST', 'PUT', 'DELETE'])\n\napp.run()\n```\n启动\n```bash\n$ python run.py\n```\n### POST\n创建\n```bash\n$ curl -X POST localhost:5000/api/book -H \"Content-Type:application/json\" -d '{\"name\":\"wxnacy\"}'\n```\n```bash\n{\n    \"id\": 96,\n    \"name\": \"wxnacy\"\n}\n```\n### GET\n查看列表\n```bash\ncurl localhost:5000/api/book\n```\n```json\n{\n    \"num_results\": 95,\n        \"objects\": [\n        {\n            \"id\": 2,\n            \"name\": \"2-book\"\n\n        },\n        ...\n        {\n            \"id\": 11,\n            \"name\": \"wxnacy\"\n\n        }\n\n        ],\n        \"page\": 1,\n        \"total_pages\": 10\n}\n```\n查看单个\n```bash\n$ curl localhost:5000/api/book/96\n```\n```json\n{\n    \"id\": 96,\n    \"name\": \"wxnacy\"\n}\n```\n### PUT\n```bash\n$ curl -X PUT localhost:5000/api/book/96 -H \"Content-Type:application/json\" -d '{\"name\":\"new_name\"}'\n```\n```json\n{\n    \"id\": 96,\n    \"name\": \"new_name\"\n}\n```\n### DELETE\n```bash\n$ curl -X DELETE localhost:5000/api/book/96\n```\n看，几行代码就搞定了增删改查四大功能，如果你只是搭个自己的小服务，这就已经足够了，再也不用吭哧吭哧写代码了，关于 Methods 的更多解释见[文档 ](https://flask-restless.readthedocs.io/en/stable/customizing.html#http-methods)\n\n## 修改地址前缀\n```python\nmanager.create_api(Book, url_prefix='/api/v2', methods=['GET'])\n```\n在 `create_api` 的时候作如上改动，就可以修改接口前缀\n```bash\n$ curl localhost:5000/api/v2/book\n```\n\n## 搜索请求\nRestless 非常强大的功能是，他可以在不改动代码的情况下做基于数据的条件查询\n```bash\ncurl \\\n    -G \\\n    -H \"Content-type: application/json\" \\\n    -d \"q={\\\"filters\\\":[{\\\"name\\\":\\\"name\\\",\\\"op\\\":\\\"like\\\",\\\"val\\\":\\\"%new%\\\"}]}\" \\\n    http://127.0.0.1:5000/api/book\n```\n```json\n{\n    \"num_results\": 2,\n    \"objects\": [\n    {\n        \"id\": 6,\n        \"name\": \"new book\"\n    },\n    {\n        \"id\": 7,\n        \"name\": \"new book\"\n    }],\n    \"page\": 1,\n    \"total_pages\": 1\n}\n```\n什么代码都没动，就完成 `like` 的查询的操作，妈妈再也不用担心我写 API 了\n### 请求格式\n```json\n{\"name\": <fieldname>, \"op\": <operatorname>, \"val\": <argument>}\n```\n或\n```\n{\"name\": <fieldname>, \"op\": <operatorname>, \"field\": <fieldname>}\n```\n`fieldname` 是字段名，`operatorname` 是查询条件，`argument` 是条件值，通过不同的 `op` 值来完成相应操作，更多的 Operators 值\n- ==, 371032668@qq.com, equals, equals_to\n- !=, neq, does_not_equal, not_equal_to\n- `>, gt, <, lt`\n- `>=, ge, gte, geq, <=, le, lte, leq`\n- in, not_in\n- is_null, is_not_null\n- like\n- has\n- any\n更多用法见[文档](https://flask-restless.readthedocs.io/en/stable/searchformat.html#query-format)\n\n## 方法求值\nRestless 另一个比较牛逼的功能，是可以使用数据库的函数，比如\n```bash\n$ curl localhost:5000/api/eval/book?q={\"functions\": [{\"name\": \"count\", \"field\": \"id\"}]}\n# urlencode 编码后请求\n$ curl localhost:5000/api/eval/book?q=%7B%22functions%22%3A%20%5B%7B%22name%22%3A%20%22count%22%2C%20%22field%22%3A%20%22id%22%7D%5D%7D\n```\n```json\n{\"count__id\": 94}\n```\n就这样，我们得到了数据总和，不过这个功能默认是不打开的，需要设置 `allow_functions` 手动打开\n```python\nmanager.create_api(Book, allow_functions=True, methods=['GET', 'POST', 'PUT', 'DELETE'])\n```\n更多介绍见[文档](https://flask-restless.readthedocs.io/en/stable/requestformat.html#function-evaluation)\n\n## JSONP\nRestless 默认支持 JSONP，使用正常访问方式即可\n```bash\n$ curl localhost:5000/api/book/10?callback=foo\n```\n```bash\nfoo({\"data\": {\"id\": 10, \"name\": \"wxnacy\"}, \"meta\": {\"Content-Type\": \"application/javascript\", \"status\": 200}})\n```\n\n\n## 参考\n- [Flask-Restless](https://flask-restless.readthedocs.io/en/stable/)\n- [Request preprocessors and postprocessors](https://flask-restless.readthedocs.io/en/stable/customizing.html#request-preprocessors-and-postprocessors)\n- [Request preprocessors and postprocessors](https://flask-restless.readthedocs.io/en/latest/processors.html)\n","slug":"flask-restless","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6s007n5gqozhg4e6bm"},{"title":"JSON Format 工具","date":"2018-01-27T16:02:39.000Z","_content":"\nJSON 格式化工具\n<!-- more -->\n\n{% raw %}\n<textarea id=\"plain\" style=\"width: 100%; height: 400px\">\n{\"name\": \"wxnacy\", \"arr\": [\"a\", \"b\", 'c']}\n</textarea>\n<span id=\"err\" style=\"color: red\"></span><br/>\n<button onClick=\"format()\">格式化</button>\n<script>\nfunction format() {\n    var plain = document.getElementById('plain').value\n    try{\n        plain = plain.replace(/'/g, \"\\\"\")\n        var data = JSON.parse(plain)\n        var output = JSON.stringify(data, null, 4);\n        document.getElementById('plain').value = output;\n    } catch(e) {\n        document.getElementById('err').innerHTML = e.message;\n    }\n}\n</script>\n{% endraw %}\n","source":"_posts/2018-01-27-json-formatter.md","raw":"---\ntitle: JSON Format 工具\ndate: 2018-01-27 16:02:39\ntags: [工具]\n---\n\nJSON 格式化工具\n<!-- more -->\n\n{% raw %}\n<textarea id=\"plain\" style=\"width: 100%; height: 400px\">\n{\"name\": \"wxnacy\", \"arr\": [\"a\", \"b\", 'c']}\n</textarea>\n<span id=\"err\" style=\"color: red\"></span><br/>\n<button onClick=\"format()\">格式化</button>\n<script>\nfunction format() {\n    var plain = document.getElementById('plain').value\n    try{\n        plain = plain.replace(/'/g, \"\\\"\")\n        var data = JSON.parse(plain)\n        var output = JSON.stringify(data, null, 4);\n        document.getElementById('plain').value = output;\n    } catch(e) {\n        document.getElementById('err').innerHTML = e.message;\n    }\n}\n</script>\n{% endraw %}\n","slug":"json-formatter","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6u007p5gqo5qmc7z9l"},{"title":"二维码生成器","date":"2018-01-28T19:41:00.000Z","_content":"\n本章使用 [QRCode.js](https://github.com/davidshimjs/qrcodejs) 来作为生成二维码的工具\n<!-- more -->\n## 二维码生成器\n\n{% raw %}\n<textarea id=\"plain\" style=\"width: 300px\">\nhttps://wxnacy.com\n</textarea><br/>\n<button onClick=\"markQRCode()\">生成</button>\n<button onClick=\"download()\">下载</button>\n<div id=\"qrcode\"></div>\n<script  type=\"text/javascript\" src=\"/js/qrcode.min.js\"></script>\n\n<script type=\"text/javascript\">\nvar qrcode = new QRCode(document.getElementById(\"qrcode\"), {\n        text: \"https://wxnacy.com\",\n        width: 256,\n        height: 256,\n        colorDark : \"#000000\",\n        colorLight : \"#ffffff\",\n        correctLevel : QRCode.CorrectLevel.H\n    });\nfunction markQRCode() {\n    var plain = document.getElementById(\"plain\").value\n    qrcode.makeCode(plain);\n}\nfunction download() {\n    var can =  document.getElementById(\"qrcode\").getElementsByTagName('img')[0];\n    console.log(can, can.src)\n    var url = can.src.replace(/^data:image\\/[^;]+/, 'data:image/octet-stream');\nwindow.open(url);\n    window.navigator.msSaveBlob(can.msToBlob(),'image.jpg');\n}\n\n</script>\n{% endraw %}\n## QRCode.js\n基本使用\n```javascript\n<div id=\"qrcode\"></div>\n<script  type=\"text/javascript\" src=\"qrcode.min.js\"></script>\n<script type=\"text/javascript\">\nnew QRCode(document.getElementById(\"qrcode\"), \"https://wxnacy.com\");\n</script>\n```\n或者\n```java\n<script type=\"text/javascript\">\n    var qrcode = new QRCode(document.getElementById(\"qrcode\"), {\n        text: \"https://wxnacy.com\",\n        width: 128,\n        height: 128,\n        colorDark : \"#000000\",\n        colorLight : \"#ffffff\",\n        correctLevel : QRCode.CorrectLevel.H\n    });\n</script>\n```\n[试一试](/run.html?id=68719480053)\n其他方法\n```java\nqrcode.clear(); // clear the code.\nqrcode.makeCode(\"http://naver.com\"); // make another code.\n```\n","source":"_posts/2018-01-28-qrcode-marker.md","raw":"---\ntitle: 二维码生成器\ntags:\n  - 工具\ndate: 2018-01-28 19:41:00\n---\n\n本章使用 [QRCode.js](https://github.com/davidshimjs/qrcodejs) 来作为生成二维码的工具\n<!-- more -->\n## 二维码生成器\n\n{% raw %}\n<textarea id=\"plain\" style=\"width: 300px\">\nhttps://wxnacy.com\n</textarea><br/>\n<button onClick=\"markQRCode()\">生成</button>\n<button onClick=\"download()\">下载</button>\n<div id=\"qrcode\"></div>\n<script  type=\"text/javascript\" src=\"/js/qrcode.min.js\"></script>\n\n<script type=\"text/javascript\">\nvar qrcode = new QRCode(document.getElementById(\"qrcode\"), {\n        text: \"https://wxnacy.com\",\n        width: 256,\n        height: 256,\n        colorDark : \"#000000\",\n        colorLight : \"#ffffff\",\n        correctLevel : QRCode.CorrectLevel.H\n    });\nfunction markQRCode() {\n    var plain = document.getElementById(\"plain\").value\n    qrcode.makeCode(plain);\n}\nfunction download() {\n    var can =  document.getElementById(\"qrcode\").getElementsByTagName('img')[0];\n    console.log(can, can.src)\n    var url = can.src.replace(/^data:image\\/[^;]+/, 'data:image/octet-stream');\nwindow.open(url);\n    window.navigator.msSaveBlob(can.msToBlob(),'image.jpg');\n}\n\n</script>\n{% endraw %}\n## QRCode.js\n基本使用\n```javascript\n<div id=\"qrcode\"></div>\n<script  type=\"text/javascript\" src=\"qrcode.min.js\"></script>\n<script type=\"text/javascript\">\nnew QRCode(document.getElementById(\"qrcode\"), \"https://wxnacy.com\");\n</script>\n```\n或者\n```java\n<script type=\"text/javascript\">\n    var qrcode = new QRCode(document.getElementById(\"qrcode\"), {\n        text: \"https://wxnacy.com\",\n        width: 128,\n        height: 128,\n        colorDark : \"#000000\",\n        colorLight : \"#ffffff\",\n        correctLevel : QRCode.CorrectLevel.H\n    });\n</script>\n```\n[试一试](/run.html?id=68719480053)\n其他方法\n```java\nqrcode.clear(); // clear the code.\nqrcode.makeCode(\"http://naver.com\"); // make another code.\n```\n","slug":"qrcode-marker","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6v007r5gqotiws3cn0"},{"title":"Javascript 如何从下载 src 为 data 数据的 img","date":"2018-01-29T08:44:52.000Z","_content":"\n\n在做[二维码生成器](/2018/01/28/qrcode-marker/)的时候，设计到下载图片的功能\n<!-- more -->\n在线生成图片的结果是这样的\n```html\n<img src=\"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgM....\"/>\n```\n经过搜索，发现 stackoverflow 上的的一篇问答 https://stackoverflow.com/questions/10473932/browser-html-force-download-of-image-from-src-dataimage-jpegbase64 是可行的方法，记录如下\n\n```javascript\nvar url = img.src.replace(/^data:image\\/[^;]+/, 'data:application/octet-stream');\nwindow.open(url);\n```\n或者\n```javascript\nvar img = document.images[0];\nimg.onclick = function() {\n\t// atob to base64_decode the data-URI\n\tvar image_data = atob(img.src.split(',')[1]);\n\t// Use typed arrays to convert the binary data to a Blob\n\tvar arraybuffer = new ArrayBuffer(image_data.length);\n\tvar view = new Uint8Array(arraybuffer);\n\tfor (var i=0; i<image_data.length; i++) {\n\t\tview[i] = image_data.charCodeAt(i) & 0xff;\n\t}\n\ttry {\n\t\t// This is the recommended method:\n\t\tvar blob = new Blob([arraybuffer], {type: 'application/octet-stream'});\n\t} catch (e) {\n\t\t// The BlobBuilder API has been deprecated in favour of Blob, but older\n\t\t// browsers don't know about the Blob constructor\n\t\t// IE10 also supports BlobBuilder, but since the `Blob` constructor\n\t\t//  also works, there's no need to add `MSBlobBuilder`.\n\t\tvar bb = new (window.WebKitBlobBuilder || window.MozBlobBuilder);\n\t\tbb.append(arraybuffer);\n\t\tvar blob = bb.getBlob('application/octet-stream'); // <-- Here's the Blob\n\t}\n\n\t// Use the URL object to create a temporary URL\n\tvar url = (window.webkitURL || window.URL).createObjectURL(blob);\n\tlocation.href = url; // <-- Download!\n};\n```\n","source":"_posts/2018-01-29-download-from-img-src-data.md","raw":"---\ntitle: Javascript 如何从下载 src 为 data 数据的 img\ntags:\n  - javascript\ndate: 2018-01-29 08:44:52\n---\n\n\n在做[二维码生成器](/2018/01/28/qrcode-marker/)的时候，设计到下载图片的功能\n<!-- more -->\n在线生成图片的结果是这样的\n```html\n<img src=\"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgM....\"/>\n```\n经过搜索，发现 stackoverflow 上的的一篇问答 https://stackoverflow.com/questions/10473932/browser-html-force-download-of-image-from-src-dataimage-jpegbase64 是可行的方法，记录如下\n\n```javascript\nvar url = img.src.replace(/^data:image\\/[^;]+/, 'data:application/octet-stream');\nwindow.open(url);\n```\n或者\n```javascript\nvar img = document.images[0];\nimg.onclick = function() {\n\t// atob to base64_decode the data-URI\n\tvar image_data = atob(img.src.split(',')[1]);\n\t// Use typed arrays to convert the binary data to a Blob\n\tvar arraybuffer = new ArrayBuffer(image_data.length);\n\tvar view = new Uint8Array(arraybuffer);\n\tfor (var i=0; i<image_data.length; i++) {\n\t\tview[i] = image_data.charCodeAt(i) & 0xff;\n\t}\n\ttry {\n\t\t// This is the recommended method:\n\t\tvar blob = new Blob([arraybuffer], {type: 'application/octet-stream'});\n\t} catch (e) {\n\t\t// The BlobBuilder API has been deprecated in favour of Blob, but older\n\t\t// browsers don't know about the Blob constructor\n\t\t// IE10 also supports BlobBuilder, but since the `Blob` constructor\n\t\t//  also works, there's no need to add `MSBlobBuilder`.\n\t\tvar bb = new (window.WebKitBlobBuilder || window.MozBlobBuilder);\n\t\tbb.append(arraybuffer);\n\t\tvar blob = bb.getBlob('application/octet-stream'); // <-- Here's the Blob\n\t}\n\n\t// Use the URL object to create a temporary URL\n\tvar url = (window.webkitURL || window.URL).createObjectURL(blob);\n\tlocation.href = url; // <-- Download!\n};\n```\n","slug":"download-from-img-src-data","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6w007t5gqo2wxnfp1i"},{"title":"iframe 直接加载 html 代码的几种方法","date":"2018-01-30T09:53:46.000Z","_content":"\n\niframe 除了加载普通 html 地址外，还有很多方式可以加载一段 html 代码\n\n<!-- more --><!-- toc -->\n比如我想加载一段代码\n```html\n<html><body>foo</body></html>\n```\n## data url\n第一种可以使用 data url 格式，将 html 做 urlencode 编码处理后，作如下操作\n```java\n<iframe src=\"data:text/html;charset=utf-8,%3Chtml%3E%3Cbody%3Efoo%3C/body%3E%3C/html%3E\" />\n```\n\n## 使用 js\n另一种方式是利用 javascript 动态加载\n```java\n<iframe id=\"foo\" />\n<script>\nvar iframe = document.getElementById('foo'),\niframedoc = iframe.contentDocument || iframe.contentWindow.document;\niframedoc.body.innerHTML = 'Hello world';\n</script>\n```\n## js 脚本\n这个方法在大部分浏览器中都可以使用\n```javascript\n<iframe src=\"javascript: '<html><body>Hello, <b>world</b>.</body></html>'\"></iframe>\n```\n## srcdoc\n在 html5 中有一个新属性 srcdoc，它可以直接载入 html 代码\n```java\n<iframe srcdoc=\"<html><body>Hello, <b>world</b>.</body></html>\"></iframe>\n```\n\n## 参考\n- [Html code as IFRAME source rather than a URL](https://stackoverflow.com/questions/6102636/html-code-as-iframe-source-rather-than-a-url)\n- [srcdoc polyfill](https://github.com/jugglinmike/srcdoc-polyfill)\n","source":"_posts/2018-01-30-iframe-load-html-code.md","raw":"---\ntitle: iframe 直接加载 html 代码的几种方法\ntags:\n  - javascript\ndate: 2018-01-30 09:53:46\n---\n\n\niframe 除了加载普通 html 地址外，还有很多方式可以加载一段 html 代码\n\n<!-- more --><!-- toc -->\n比如我想加载一段代码\n```html\n<html><body>foo</body></html>\n```\n## data url\n第一种可以使用 data url 格式，将 html 做 urlencode 编码处理后，作如下操作\n```java\n<iframe src=\"data:text/html;charset=utf-8,%3Chtml%3E%3Cbody%3Efoo%3C/body%3E%3C/html%3E\" />\n```\n\n## 使用 js\n另一种方式是利用 javascript 动态加载\n```java\n<iframe id=\"foo\" />\n<script>\nvar iframe = document.getElementById('foo'),\niframedoc = iframe.contentDocument || iframe.contentWindow.document;\niframedoc.body.innerHTML = 'Hello world';\n</script>\n```\n## js 脚本\n这个方法在大部分浏览器中都可以使用\n```javascript\n<iframe src=\"javascript: '<html><body>Hello, <b>world</b>.</body></html>'\"></iframe>\n```\n## srcdoc\n在 html5 中有一个新属性 srcdoc，它可以直接载入 html 代码\n```java\n<iframe srcdoc=\"<html><body>Hello, <b>world</b>.</body></html>\"></iframe>\n```\n\n## 参考\n- [Html code as IFRAME source rather than a URL](https://stackoverflow.com/questions/6102636/html-code-as-iframe-source-rather-than-a-url)\n- [srcdoc polyfill](https://github.com/jugglinmike/srcdoc-polyfill)\n","slug":"iframe-load-html-code","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6x007v5gqo9geoov7i"},{"title":"Javascript 将 console.log 日志打印到 html 页面中","date":"2018-01-31T14:23:39.000Z","_content":"\n\n如何将 `console.log()` 打印的日志输出到 html 页面中\n<!-- more -->\n```javascript\n(function () {\n\tvar old = console.log;\n\tvar logger = document.getElementById('log');\n\tconsole.log = function (message) {\n\t\tif (typeof message == 'object') {\n\t\t\tlogger.innerHTML += (JSON && JSON.stringify ? JSON.stringify(message) : message) + '<br />';\n\t\t} else {\n\t\t\tlogger.innerHTML += message + '<br />';\n\t\t}\n\t}\n})();\n```\n\n## 参考\n- [Javascript: console.log to html](https://stackoverflow.com/questions/20256760/javascript-console-log-to-html)\n","source":"_posts/2018-01-31-console-log-to-html.md","raw":"---\ntitle: Javascript 将 console.log 日志打印到 html 页面中\ntags:\n  - javascript\ndate: 2018-01-31 14:23:39\n---\n\n\n如何将 `console.log()` 打印的日志输出到 html 页面中\n<!-- more -->\n```javascript\n(function () {\n\tvar old = console.log;\n\tvar logger = document.getElementById('log');\n\tconsole.log = function (message) {\n\t\tif (typeof message == 'object') {\n\t\t\tlogger.innerHTML += (JSON && JSON.stringify ? JSON.stringify(message) : message) + '<br />';\n\t\t} else {\n\t\t\tlogger.innerHTML += message + '<br />';\n\t\t}\n\t}\n})();\n```\n\n## 参考\n- [Javascript: console.log to html](https://stackoverflow.com/questions/20256760/javascript-console-log-to-html)\n","slug":"console-log-to-html","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a6y007x5gqo35xtjgnk"},{"title":"Mac 在 Terminal 终端中打开指定 Finder","date":"2018-02-03T14:44:51.000Z","_content":"\n\nMac 因为是类 Unix 系统，不像 Windows 那样方便打开文件夹，尤其是 `/` 目录下的一\n些文件夹，在 Finder 非常难找\n<!-- more -->\n所幸在 Shells 中有 `open` 命令可以直接打开 Finder，打开 Terminal 输入\n```bash\n$ open .    # 打开当前目录\n```\n```bash\n$ open ~    # 打开用户目录\n```\n```bash\n$ open ~/Documents    # 打开指定文件夹\n```\n```bash\n$ open ~/Documents/test.jpg    # 打开指定文件\n```\n","source":"_posts/2018-02-03-mac-open-finder-in-terminal.md","raw":"---\ntitle: Mac 在 Terminal 终端中打开指定 Finder\ntags:\n  - mac\ndate: 2018-02-03 14:44:51\n---\n\n\nMac 因为是类 Unix 系统，不像 Windows 那样方便打开文件夹，尤其是 `/` 目录下的一\n些文件夹，在 Finder 非常难找\n<!-- more -->\n所幸在 Shells 中有 `open` 命令可以直接打开 Finder，打开 Terminal 输入\n```bash\n$ open .    # 打开当前目录\n```\n```bash\n$ open ~    # 打开用户目录\n```\n```bash\n$ open ~/Documents    # 打开指定文件夹\n```\n```bash\n$ open ~/Documents/test.jpg    # 打开指定文件\n```\n","slug":"mac-open-finder-in-terminal","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a73007z5gqoeab38h1f"},{"title":"React-Ace 解决 onChange 中 setState 问题","date":"2018-02-04T21:32:01.000Z","_content":"\n\nReact-Ace 解决 onChange 中 setState 的问题\n<!-- more -->\n\n我在正常使用 ace 的功能时碰见一个大问题就是在 `onChange` 的时候，`setState` 会出现问题。\n```java\n- onChange={this.onChange.bind(this)}\n+ onChange={(newValue) => this.onChange(newValue)}\n```\n通常方法的调用使用第一种，但是在这里需要换成第二种方式\n\n这时候可以成功的保存数据到 `state` 中，但是 ace 的输入功能会出现问题，变的无法正常输入，说白了是组件没有在改变 `state` 后及时更新，此时需要对 `shouldComponentUpdate`组件做出如下操作\n```javascript\nshouldComponentUpdate(nextProps, nextState) {\n    if (this.state.aceValue !== nextState.aceValue) {\n        return false\n    } else {\n        return true;\n    }\n}\n```\n也就是判断 `this.state.aceValue` 有变动后修改组件状态\n\n或者简单点，直接让组件继承 `PureComponent`，它自动完成了 `shouldComponentUpdate` 的浅比较\n\n完整调用如下\n```javascript\nonChange(newValue) {\n    this.setState({aceValue: newValue})\n}\nshouldComponentUpdate(nextProps, nextState) {\n    if (this.state.aceValue !== nextState.aceValue) {\n        return false\n    } else {\n        return true;\n    }\n}\n...\n<AceEditor\nonChange={(newValue) => this.onChange(newValue, mode)}\nvalue={this.state.aceValue}/>\n...\n```\n\n\n- [setState in onChange will block the editor](https://github.com/securingsincity/react-ace/issues/181)\n- [谈一谈创建React Component的几种方式](https://segmentfault.com/a/1190000008402834)\n","source":"_posts/2018-02-04-react-ace-onchange-setstate.md","raw":"---\ntitle: React-Ace 解决 onChange 中 setState 问题\ntags:\n  - react\ndate: 2018-02-04 21:32:01\n---\n\n\nReact-Ace 解决 onChange 中 setState 的问题\n<!-- more -->\n\n我在正常使用 ace 的功能时碰见一个大问题就是在 `onChange` 的时候，`setState` 会出现问题。\n```java\n- onChange={this.onChange.bind(this)}\n+ onChange={(newValue) => this.onChange(newValue)}\n```\n通常方法的调用使用第一种，但是在这里需要换成第二种方式\n\n这时候可以成功的保存数据到 `state` 中，但是 ace 的输入功能会出现问题，变的无法正常输入，说白了是组件没有在改变 `state` 后及时更新，此时需要对 `shouldComponentUpdate`组件做出如下操作\n```javascript\nshouldComponentUpdate(nextProps, nextState) {\n    if (this.state.aceValue !== nextState.aceValue) {\n        return false\n    } else {\n        return true;\n    }\n}\n```\n也就是判断 `this.state.aceValue` 有变动后修改组件状态\n\n或者简单点，直接让组件继承 `PureComponent`，它自动完成了 `shouldComponentUpdate` 的浅比较\n\n完整调用如下\n```javascript\nonChange(newValue) {\n    this.setState({aceValue: newValue})\n}\nshouldComponentUpdate(nextProps, nextState) {\n    if (this.state.aceValue !== nextState.aceValue) {\n        return false\n    } else {\n        return true;\n    }\n}\n...\n<AceEditor\nonChange={(newValue) => this.onChange(newValue, mode)}\nvalue={this.state.aceValue}/>\n...\n```\n\n\n- [setState in onChange will block the editor](https://github.com/securingsincity/react-ace/issues/181)\n- [谈一谈创建React Component的几种方式](https://segmentfault.com/a/1190000008402834)\n","slug":"react-ace-onchange-setstate","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7400815gqo0nesxhzo"},{"title":"Node 生产环境部署神器 PM2","date":"2018-02-06T18:21:27.000Z","_content":"\n\n今天偶然发现一个部署 Node 生产环境的神器，pm2.5，哦，不，是[PM2](http://pm2.keymetrics.io/)\n\n<!-- more --><!-- toc -->\npm2 是一个带有负载均衡功能的 Node 应用的进程管理器\n它有如下特点：\n- 后台运行\n- 内建负载均衡\n- 无间断重载\n- 具有启动脚本\n- 停止不稳定的进程\n- 强大的控制台检测\n- 远程控制和实时的接口API\n\n## 下载\n```bash\n$ npm install pm2 -g\n```\n## 创建应用\n```bash\n$ pm2 start index.js    # 快速启动应用\n```\n![/images/pm2-list.png](/images/pm2-list.png)\n当看到类似的信息，并且 `status=online` 时，代表应用启动成功\n更多命令如下\n```bash\n$ pm2 start | restart | stop index.js       # 启动、重启、停止\n$ pm2 start app.py                          # 使用 python 命令启动脚本\n$ pm2 start index.js -n index               # 启动并指定进程名\n$ pm2 start index.js --watch                # “热启动” 应用\n# --ignore-watch 可以排除再热启动时需要检测的文件，也可以是正则\n$ pm2 start index.js -i max                 # 启动并根据 CPU 开启相应进程数\n# 也可以用 -i 2 手动设置\n$ pm2 delete <app_name|id|'all'|json_conf>  # 删除应用\n```\n\n## 配置文件\npm2 的启动参数有很多，每次输入这些参数也是很烦人的，我们可以将这些参数放到配置文件中，然后直接启动配置文件即可，创建文件 `pm2_config.json`\n```json\n{\n    \"apps\" : [{\n        \"name\"        : \"tmdapi\",\n        \"script\"      : \"./run_api.py\",\n        \"interpreter\" : \"/Users/wxnacy/.pyenv/shims/python\",\n        \"watch\"       : true,\n        \"ignore_watch\" : ['winn', 'tests', 'db'],\n    }]\n}\n```\n```bash\n$ pm2 start pm2_config.json\n```\n文件格式支持很多种，如 `yml, js, json5`，更多配置见[文档](http://pm2.keymetrics.io/docs/usage/application-declaration/#attributes-available)\n\n## 目录文件\npm2 启动一次后就会生成如下目录，相关日志、pid、配置等都在其中\n- $HOME/.pm2 will contain all PM2 related files\n- $HOME/.pm2/logs will contain all applications logs\n- $HOME/.pm2/pids will contain all applications pids\n- $HOME/.pm2/pm2.log PM2 logs\n- $HOME/.pm2/pm2.pid PM2 pid\n- $HOME/.pm2/rpc.sock Socket file for remote commands\n- $HOME/.pm2/pub.sock Socket file for publishable events\n- $HOME/.pm2/conf.js PM2 Configuration\n\n## 应用列表\n```bash\n$ pm2 list\n```\n执行该命令，会显示上图一样的信息，也就是应用列表 `pm2 (ls | l)` 都可以\n```bash\n$ pm2 logs jlist            # 使用 json 格式在一行中展示\n$ pm2 logs prettylist       # 将 json 数据格式化后展示出来\n$ pm2 list --sort=id        # 根据id排序\n```\n## 查看日志\n```bash\n$ pm2 logs              # 查看所有进程日志\n```\n![/images/pm2-logs.png](/images/pm2-logs.png)\n更多命令\n```bash\n$ pm2 logs [app-name | id]      # 查看指定应用日志\n$ pm2 logs /api/                # 使用正则来匹配日志\n$ pm2 logs --format             # 格式化输出\n$ pm2 logs --json               # json 格式输出日志\n$ pm2 logs --lines 1000         # 返回 1000 行日志\n$ pm2 flush                     # 清空所有日志\n$ pm2 reloadLogs                # 重新加载所有日志\n```\n## 监控\n```bash\n$ pm2 monit             # 检测当前进程 CPU、内存、日志\n```\n![/images/pm2-monit.png](/images/pm2-monit.png)\n当输入上述命令时，会出现类似上图的界面，在这里我们可以清楚的看到当前进行列表、日志、活跃度、进程详情等信息，使用 `左右` 来控制面板的焦点，使用 `上下键` 来滚动屏幕查看信息\n\n### keymetrics\n如果配合 [keymetrics](http://docs.keymetrics.io/) 来使用，监控将变的更加强大\n输入注册命令\n```bash\n$ pm2 register\n```\n根据命令行提示一步步完善注册信息，然后运行\n```bash\n$ pm2 monitor [app-name]\n```\n或\n```bash\n$ pm2 web\n```\n会在返回的进程列表中看到一个地址\n![/images/pm2-monitor.png](/images/pm2-monitor.png)\n\n进入该地址，并使用刚注册的信息登陆，就可以看到一个更加强大的检测系统\n![/images/pm2-key.png](/images/pm2-key.png)\n\n\n\n## 自启动\n```bash\n$ pm2 startup                               # 开机自启动\n$ pm2 unstartup                             # 关闭自启\n# 或者指定自己的机型\n```\n或者指定自己的系统\n```bash\n$ pm2 startup [ubuntu | ubuntu14 | ubuntu12 | centos | centos6 | arch | oracle | amazon | macos | darwin | freebsd | systemd | systemv | upstart | launchd | rcd | openrc]\n```\n\n## 备份和恢复\n假如出现机器出现崩溃，那 pm2 进程信息很可能丢失，但是我们可以利用备份来避免这种情况\n```bash\n$ pm2 (save | dump)\n```\n保存完以后我们利用 `kill` 来模拟 pm2 丢失的情况\n```bash\n$ pm2 kill\n```\n接下来使用恢复命令\n```bash\n$ pm2 resurrect\n```\n这样我们又可以愉快的开发了\n\n## 其他常用命令\n更多的进程命令如下\n```bash\n$ pm2 (show | describe) (app-name| id)      # 显示进程详情\n$ pm2 reload all                            # 重新加载索引进程\n$ pm2 scale [app-name] 10                   # 扩展应用进程数\n# 但是如果应用涉及到端口号，则不应该使用这种方式，否则会引起端口冲突\n```\n\npm2 还有很多强大的功能是我没有提到的，你需要经常使用 `pm2 -h /pm2 start -h` 等命令查看帮助文档，来更好的完成工作，或者干脆扒一遍文档\n\n- [github](https://github.com/Unitech/pm2)\n- [usage](http://pm2.keymetrics.io/docs/usage/quick-start/#usage)\n","source":"_posts/2018-02-06-pm2.md","raw":"---\ntitle: Node 生产环境部署神器 PM2\ntags:\n  - node\ndate: 2018-02-06 18:21:27\n---\n\n\n今天偶然发现一个部署 Node 生产环境的神器，pm2.5，哦，不，是[PM2](http://pm2.keymetrics.io/)\n\n<!-- more --><!-- toc -->\npm2 是一个带有负载均衡功能的 Node 应用的进程管理器\n它有如下特点：\n- 后台运行\n- 内建负载均衡\n- 无间断重载\n- 具有启动脚本\n- 停止不稳定的进程\n- 强大的控制台检测\n- 远程控制和实时的接口API\n\n## 下载\n```bash\n$ npm install pm2 -g\n```\n## 创建应用\n```bash\n$ pm2 start index.js    # 快速启动应用\n```\n![/images/pm2-list.png](/images/pm2-list.png)\n当看到类似的信息，并且 `status=online` 时，代表应用启动成功\n更多命令如下\n```bash\n$ pm2 start | restart | stop index.js       # 启动、重启、停止\n$ pm2 start app.py                          # 使用 python 命令启动脚本\n$ pm2 start index.js -n index               # 启动并指定进程名\n$ pm2 start index.js --watch                # “热启动” 应用\n# --ignore-watch 可以排除再热启动时需要检测的文件，也可以是正则\n$ pm2 start index.js -i max                 # 启动并根据 CPU 开启相应进程数\n# 也可以用 -i 2 手动设置\n$ pm2 delete <app_name|id|'all'|json_conf>  # 删除应用\n```\n\n## 配置文件\npm2 的启动参数有很多，每次输入这些参数也是很烦人的，我们可以将这些参数放到配置文件中，然后直接启动配置文件即可，创建文件 `pm2_config.json`\n```json\n{\n    \"apps\" : [{\n        \"name\"        : \"tmdapi\",\n        \"script\"      : \"./run_api.py\",\n        \"interpreter\" : \"/Users/wxnacy/.pyenv/shims/python\",\n        \"watch\"       : true,\n        \"ignore_watch\" : ['winn', 'tests', 'db'],\n    }]\n}\n```\n```bash\n$ pm2 start pm2_config.json\n```\n文件格式支持很多种，如 `yml, js, json5`，更多配置见[文档](http://pm2.keymetrics.io/docs/usage/application-declaration/#attributes-available)\n\n## 目录文件\npm2 启动一次后就会生成如下目录，相关日志、pid、配置等都在其中\n- $HOME/.pm2 will contain all PM2 related files\n- $HOME/.pm2/logs will contain all applications logs\n- $HOME/.pm2/pids will contain all applications pids\n- $HOME/.pm2/pm2.log PM2 logs\n- $HOME/.pm2/pm2.pid PM2 pid\n- $HOME/.pm2/rpc.sock Socket file for remote commands\n- $HOME/.pm2/pub.sock Socket file for publishable events\n- $HOME/.pm2/conf.js PM2 Configuration\n\n## 应用列表\n```bash\n$ pm2 list\n```\n执行该命令，会显示上图一样的信息，也就是应用列表 `pm2 (ls | l)` 都可以\n```bash\n$ pm2 logs jlist            # 使用 json 格式在一行中展示\n$ pm2 logs prettylist       # 将 json 数据格式化后展示出来\n$ pm2 list --sort=id        # 根据id排序\n```\n## 查看日志\n```bash\n$ pm2 logs              # 查看所有进程日志\n```\n![/images/pm2-logs.png](/images/pm2-logs.png)\n更多命令\n```bash\n$ pm2 logs [app-name | id]      # 查看指定应用日志\n$ pm2 logs /api/                # 使用正则来匹配日志\n$ pm2 logs --format             # 格式化输出\n$ pm2 logs --json               # json 格式输出日志\n$ pm2 logs --lines 1000         # 返回 1000 行日志\n$ pm2 flush                     # 清空所有日志\n$ pm2 reloadLogs                # 重新加载所有日志\n```\n## 监控\n```bash\n$ pm2 monit             # 检测当前进程 CPU、内存、日志\n```\n![/images/pm2-monit.png](/images/pm2-monit.png)\n当输入上述命令时，会出现类似上图的界面，在这里我们可以清楚的看到当前进行列表、日志、活跃度、进程详情等信息，使用 `左右` 来控制面板的焦点，使用 `上下键` 来滚动屏幕查看信息\n\n### keymetrics\n如果配合 [keymetrics](http://docs.keymetrics.io/) 来使用，监控将变的更加强大\n输入注册命令\n```bash\n$ pm2 register\n```\n根据命令行提示一步步完善注册信息，然后运行\n```bash\n$ pm2 monitor [app-name]\n```\n或\n```bash\n$ pm2 web\n```\n会在返回的进程列表中看到一个地址\n![/images/pm2-monitor.png](/images/pm2-monitor.png)\n\n进入该地址，并使用刚注册的信息登陆，就可以看到一个更加强大的检测系统\n![/images/pm2-key.png](/images/pm2-key.png)\n\n\n\n## 自启动\n```bash\n$ pm2 startup                               # 开机自启动\n$ pm2 unstartup                             # 关闭自启\n# 或者指定自己的机型\n```\n或者指定自己的系统\n```bash\n$ pm2 startup [ubuntu | ubuntu14 | ubuntu12 | centos | centos6 | arch | oracle | amazon | macos | darwin | freebsd | systemd | systemv | upstart | launchd | rcd | openrc]\n```\n\n## 备份和恢复\n假如出现机器出现崩溃，那 pm2 进程信息很可能丢失，但是我们可以利用备份来避免这种情况\n```bash\n$ pm2 (save | dump)\n```\n保存完以后我们利用 `kill` 来模拟 pm2 丢失的情况\n```bash\n$ pm2 kill\n```\n接下来使用恢复命令\n```bash\n$ pm2 resurrect\n```\n这样我们又可以愉快的开发了\n\n## 其他常用命令\n更多的进程命令如下\n```bash\n$ pm2 (show | describe) (app-name| id)      # 显示进程详情\n$ pm2 reload all                            # 重新加载索引进程\n$ pm2 scale [app-name] 10                   # 扩展应用进程数\n# 但是如果应用涉及到端口号，则不应该使用这种方式，否则会引起端口冲突\n```\n\npm2 还有很多强大的功能是我没有提到的，你需要经常使用 `pm2 -h /pm2 start -h` 等命令查看帮助文档，来更好的完成工作，或者干脆扒一遍文档\n\n- [github](https://github.com/Unitech/pm2)\n- [usage](http://pm2.keymetrics.io/docs/usage/quick-start/#usage)\n","slug":"pm2","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7500835gqondypqgkb"},{"title":"React 发布到 Nginx 中","date":"2018-02-07T22:02:46.000Z","_content":"\n\n在开发 React 时使用 [create-react-app](https://github.com/facebook/create-react-app) 是非常方便的，它封装的打包功能，让发布 React 应用非常的方便\n<!-- more -->\n首先在项目根目录下使用 `yarn build` 命令打包，生成的静态文件会在 `myproject/build` 中\n\nNginx 中作如下配置即可\n```bash\nserver {\n    server_name wxnacy.com;\n    root /myproject/build;\n\n    location / {\n        try_files $uri /index.html;\n        add_header   Cache-Control public;\n        expires      1d;\n    }\n}\n```\n","source":"_posts/2018-02-07-react-deply-nginx.md","raw":"---\ntitle: React 发布到 Nginx 中\ntags:\n  - react\ndate: 2018-02-07 22:02:46\n---\n\n\n在开发 React 时使用 [create-react-app](https://github.com/facebook/create-react-app) 是非常方便的，它封装的打包功能，让发布 React 应用非常的方便\n<!-- more -->\n首先在项目根目录下使用 `yarn build` 命令打包，生成的静态文件会在 `myproject/build` 中\n\nNginx 中作如下配置即可\n```bash\nserver {\n    server_name wxnacy.com;\n    root /myproject/build;\n\n    location / {\n        try_files $uri /index.html;\n        add_header   Cache-Control public;\n        expires      1d;\n    }\n}\n```\n","slug":"react-deply-nginx","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7600865gqop9l72klk"},{"title":"Node 使用 puppeteer 抓取动态页面","date":"2018-02-05T18:45:55.000Z","_content":"\n\n现在越来越多的网页采用前端渲染页面，这给抓取工作带来了很大的麻烦，通过往常的方法只会拿到一堆 js 方法或者 api 接口，我们当然不想每个网站都去这么费劲的探索他们的 api。\n\n<!-- more --><!-- toc -->\n那还有什么好方法嘛，呼叫万能的 Google 爸爸，[puppeteer](https://github.com/GoogleChrome/puppeteer) 可以模拟 chrome 打开网页，并可以进行截图、转为 pdf 文件，当然抓取数据也不在话下，因为截图的前提就是它模拟了前端渲染的效果，就像真的打开了网站一样。\n\n这篇文章主要介绍如何通过 puppeteer 进行简单抓取\n\n## 下载\n```bash\n$ yarn add puppeteer\n```\n## 使用\n首先看一个简单例子，我们依然在不问为什么的前提下，运行一下代码\n```javascript\nconst puppeteer = require('puppeteer');\n\n(async () => {\n\tconst browser = await puppeteer.launch();\n\tconst page = await browser.newPage();\n\tawait page.goto('https://www.instagram.com/nike/');\n\n\t// Get the \"viewport\" of the page, as reported by the page.\n\tconst dimensions = await page.evaluate(() => {\n\t\treturn {\n\t\t\twidth: document.documentElement.clientWidth,\n\t\t\theight: document.documentElement.clientHeight,\n            title: document.title\n\t\t};\n\t});\n\n\tconsole.log('Dimensions:', dimensions);\n\n\tawait browser.close();\n})();\n```\n运行后，你会发现它打印出了 `document` 的宽、高、标题单个属性，现在我们来分析下这段代码都做了些什么。\n- `puppeteer.launch()` 模拟启动一个浏览器\n- `browser.newPage()` 打开一个新页面\n- `page.goto('https://www.instagram.com/nike/')` 打开某个网址\n- `page.evaluate()` 生成一个沙盒环境来分析 dom，注意在沙盒内 `console.log()` 是**不生效的**\n- `browser.close()` 最后关闭浏览器\n\n## 分析 selector\n在抓取页面时，可以直接借助谷歌浏览器的开发者工具复制 selector\n![/images/ins.png](/images/ins.png)\n\n我们想要获取该页面的头像信息，通过开发者工具复制出来的 selector 如下\n```css\n#react-root > section > main > article > header > div > div > div > img\n```\n这时我们直接使用它既可\n```javascript\nlet avatarSelector = '#react-root > section > main > article > header > div > div > div > img'\nlet avatarDom = document.querySelector(avatarSelector)\navatar = avatarDom.src\n```\n这样我们可以非常方便的分析某个 dom 元素，当然这样的粘贴复制不是万能的，很多时候我们还需要通过分析页面样式来找到更优的解析方式。\n\n完整的使用方式如下\n```javascript\n\nconst puppeteer = require('puppeteer');\n\n(async () => {\n\tconst browser = await puppeteer.launch({headless: false});\n\tconst page = await browser.newPage();\n    await page.setJavaScriptEnabled(true);\n\tawait page.goto('https://www.instagram.com/nike/');\n\n\t// Get the \"viewport\" of the page, as reported by the page.\n\tconst dimensions = await page.evaluate(() => {\n        // avatar\n        let avatarSelector = '#react-root > section > main > article > header > div > div > div > img'\n        let avatarDom = document.querySelector(avatarSelector)\n        let avatar = ''\n        if( avatarDom ){\n            avatar = avatarDom.src\n        }\n\n        // name\n        let nameSelector = '#react-root > section > main > article > header > section > div._ienqf > h1'\n        let nameDom = document.querySelector(nameSelector)\n        let name = ''\n        if( nameDom ){\n            name = nameDom.innerText;\n        }\n\n\n\t\treturn {\n            avatar: avatar,\n            name: name,\n\t\t};\n\t});\n\n\tconsole.log('Dimensions:', dimensions);\n\n\tawait browser.close();\n})();\n```\n- [Getting Started with Headless Chrome](https://developers.google.com/web/updates/2017/04/headless-chrome)\n","source":"_posts/2018-02-05-puppeteer-crawler.md","raw":"---\ntitle: Node 使用 puppeteer 抓取动态页面\ntags:\n  - node\ndate: 2018-02-05 18:45:55\n---\n\n\n现在越来越多的网页采用前端渲染页面，这给抓取工作带来了很大的麻烦，通过往常的方法只会拿到一堆 js 方法或者 api 接口，我们当然不想每个网站都去这么费劲的探索他们的 api。\n\n<!-- more --><!-- toc -->\n那还有什么好方法嘛，呼叫万能的 Google 爸爸，[puppeteer](https://github.com/GoogleChrome/puppeteer) 可以模拟 chrome 打开网页，并可以进行截图、转为 pdf 文件，当然抓取数据也不在话下，因为截图的前提就是它模拟了前端渲染的效果，就像真的打开了网站一样。\n\n这篇文章主要介绍如何通过 puppeteer 进行简单抓取\n\n## 下载\n```bash\n$ yarn add puppeteer\n```\n## 使用\n首先看一个简单例子，我们依然在不问为什么的前提下，运行一下代码\n```javascript\nconst puppeteer = require('puppeteer');\n\n(async () => {\n\tconst browser = await puppeteer.launch();\n\tconst page = await browser.newPage();\n\tawait page.goto('https://www.instagram.com/nike/');\n\n\t// Get the \"viewport\" of the page, as reported by the page.\n\tconst dimensions = await page.evaluate(() => {\n\t\treturn {\n\t\t\twidth: document.documentElement.clientWidth,\n\t\t\theight: document.documentElement.clientHeight,\n            title: document.title\n\t\t};\n\t});\n\n\tconsole.log('Dimensions:', dimensions);\n\n\tawait browser.close();\n})();\n```\n运行后，你会发现它打印出了 `document` 的宽、高、标题单个属性，现在我们来分析下这段代码都做了些什么。\n- `puppeteer.launch()` 模拟启动一个浏览器\n- `browser.newPage()` 打开一个新页面\n- `page.goto('https://www.instagram.com/nike/')` 打开某个网址\n- `page.evaluate()` 生成一个沙盒环境来分析 dom，注意在沙盒内 `console.log()` 是**不生效的**\n- `browser.close()` 最后关闭浏览器\n\n## 分析 selector\n在抓取页面时，可以直接借助谷歌浏览器的开发者工具复制 selector\n![/images/ins.png](/images/ins.png)\n\n我们想要获取该页面的头像信息，通过开发者工具复制出来的 selector 如下\n```css\n#react-root > section > main > article > header > div > div > div > img\n```\n这时我们直接使用它既可\n```javascript\nlet avatarSelector = '#react-root > section > main > article > header > div > div > div > img'\nlet avatarDom = document.querySelector(avatarSelector)\navatar = avatarDom.src\n```\n这样我们可以非常方便的分析某个 dom 元素，当然这样的粘贴复制不是万能的，很多时候我们还需要通过分析页面样式来找到更优的解析方式。\n\n完整的使用方式如下\n```javascript\n\nconst puppeteer = require('puppeteer');\n\n(async () => {\n\tconst browser = await puppeteer.launch({headless: false});\n\tconst page = await browser.newPage();\n    await page.setJavaScriptEnabled(true);\n\tawait page.goto('https://www.instagram.com/nike/');\n\n\t// Get the \"viewport\" of the page, as reported by the page.\n\tconst dimensions = await page.evaluate(() => {\n        // avatar\n        let avatarSelector = '#react-root > section > main > article > header > div > div > div > img'\n        let avatarDom = document.querySelector(avatarSelector)\n        let avatar = ''\n        if( avatarDom ){\n            avatar = avatarDom.src\n        }\n\n        // name\n        let nameSelector = '#react-root > section > main > article > header > section > div._ienqf > h1'\n        let nameDom = document.querySelector(nameSelector)\n        let name = ''\n        if( nameDom ){\n            name = nameDom.innerText;\n        }\n\n\n\t\treturn {\n            avatar: avatar,\n            name: name,\n\t\t};\n\t});\n\n\tconsole.log('Dimensions:', dimensions);\n\n\tawait browser.close();\n})();\n```\n- [Getting Started with Headless Chrome](https://developers.google.com/web/updates/2017/04/headless-chrome)\n","slug":"puppeteer-crawler","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7700885gqo0l63sdve"},{"title":"微信网页授权登录获取用户信息乱码","date":"2018-02-01T09:54:25.000Z","_content":"\n\n微信网页授权登录获取用户信息乱码\n<!-- more -->\n讨厌的微信，经常遇到乱码问题，这次是在网页授权获取用户信息的时候\n```bash\nhttps://api.weixin.qq.com/cgi-bin/user/info?access_token=ACCESS_TOKEN&openid=OPENID&lang=zh_CN\n```\n通过这个接口拿到的用户名等中文信息全都是如下格式的东西\n```bash\næ³\\x9bæ³\\x9bä¹\\x8bè¾\\x88\n```\n玛德，一查他们竟然是用 `ISO-8859-1` 格式来编码的，没办法手动转换下\n\nPython 方式如下\n```python\nres = name.encode('ISO-8859-1').decode('UTF-8')\n```\n","source":"_posts/2018-02-01-wx-getuser-messy-code.md","raw":"---\ntitle: 微信网页授权登录获取用户信息乱码\ntags:\n  - python\n  - 微信\ndate: 2018-02-01 09:54:25\n---\n\n\n微信网页授权登录获取用户信息乱码\n<!-- more -->\n讨厌的微信，经常遇到乱码问题，这次是在网页授权获取用户信息的时候\n```bash\nhttps://api.weixin.qq.com/cgi-bin/user/info?access_token=ACCESS_TOKEN&openid=OPENID&lang=zh_CN\n```\n通过这个接口拿到的用户名等中文信息全都是如下格式的东西\n```bash\næ³\\x9bæ³\\x9bä¹\\x8bè¾\\x88\n```\n玛德，一查他们竟然是用 `ISO-8859-1` 格式来编码的，没办法手动转换下\n\nPython 方式如下\n```python\nres = name.encode('ISO-8859-1').decode('UTF-8')\n```\n","slug":"wx-getuser-messy-code","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a77008a5gqorpr2sj2o"},{"title":"React 解决 import/first 报错","date":"2018-02-08T15:59:27.000Z","_content":"\n\n基础错误，默写 20 遍\n<!-- more -->\n不管什么开发，最重要的都是基础知识啊，最近用 React 总是抱一个错误\n```bash\nImport in body of module; reorder to top  import/first\n```\n怎么也搞不清是怎么回事，今天静下心来一点点排查时，发现竟然是 `import` 没有完全写到文件最前面的关系，比如：\n```javascript\nimport { Tabs } from 'antd';\n\nconst TabPane = Tabs.TabPane;\nimport 'brace/mode/css';\n```\n这是一个基础知识的问题，也是一个编码习惯的问题，常记于心。\n","source":"_posts/2018-02-08-react-import-first.md","raw":"---\ntitle: React 解决 import/first 报错\ntags:\n  - react\ndate: 2018-02-08 15:59:27\n---\n\n\n基础错误，默写 20 遍\n<!-- more -->\n不管什么开发，最重要的都是基础知识啊，最近用 React 总是抱一个错误\n```bash\nImport in body of module; reorder to top  import/first\n```\n怎么也搞不清是怎么回事，今天静下心来一点点排查时，发现竟然是 `import` 没有完全写到文件最前面的关系，比如：\n```javascript\nimport { Tabs } from 'antd';\n\nconst TabPane = Tabs.TabPane;\nimport 'brace/mode/css';\n```\n这是一个基础知识的问题，也是一个编码习惯的问题，常记于心。\n","slug":"react-import-first","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a79008d5gqohbvxb5i8"},{"title":"Shell 常用语法","date":"2018-02-09T15:16:50.000Z","_content":"\n\n记录一些常用的 Shell 语法\n\n<!-- more --><!-- toc -->\n\n## 参数\n文件接收参数\n```bash\n$ echo 'echo $1 $2' > test.sh\n$ chmod +x test.sh\n$ ./test.sh name age\n\nname age\n```\n函数接受参数\n```bash\nmain() {\n    echo $1 $2      # --> name age\n}\nmain name age\n```\n\n## 判断\n判断字符串相等\n```bash\nif [ $sysOS == \"Darwin\"  ];then\n# do something\nfi\n```\n判断字符串为空或不存在\n```bash\nENV=$1\n\nif [ ! ${ENV} ]\nthen\n    ENV=local\nfi\n```\n判断是否有某个文件\n```bash\nif [ -f ~/.bash_profile  ]; then\n    # do something\nfi\n```\n判断是否有某个目录\n```bash\nif [ -d ~/.oh-my-zsh   ]; then\n    # do something\nelse\n    # else do something\nfi\n```\n## case\n```bash\ncase $ID in\n    debian|ubuntu|devuan)\n        # do something\n        ;;\n    centos|fedora|rhel)\n        # do something\n        ;;\n    *)\n        exit 1\n        ;;\nesac\n```\n\n## 其他\n当前环境生效环境变量\n```bash\nexport NODE_PATH=`pwd`/nodejs\n```\n执行某个文件\n```bash\nsource ~/.bash_profile\n```\n","source":"_posts/2018-02-09-linux-common-use.md","raw":"---\ntitle: Shell 常用语法\ntags:\n  - shell\ndate: 2018-02-09 15:16:50\n---\n\n\n记录一些常用的 Shell 语法\n\n<!-- more --><!-- toc -->\n\n## 参数\n文件接收参数\n```bash\n$ echo 'echo $1 $2' > test.sh\n$ chmod +x test.sh\n$ ./test.sh name age\n\nname age\n```\n函数接受参数\n```bash\nmain() {\n    echo $1 $2      # --> name age\n}\nmain name age\n```\n\n## 判断\n判断字符串相等\n```bash\nif [ $sysOS == \"Darwin\"  ];then\n# do something\nfi\n```\n判断字符串为空或不存在\n```bash\nENV=$1\n\nif [ ! ${ENV} ]\nthen\n    ENV=local\nfi\n```\n判断是否有某个文件\n```bash\nif [ -f ~/.bash_profile  ]; then\n    # do something\nfi\n```\n判断是否有某个目录\n```bash\nif [ -d ~/.oh-my-zsh   ]; then\n    # do something\nelse\n    # else do something\nfi\n```\n## case\n```bash\ncase $ID in\n    debian|ubuntu|devuan)\n        # do something\n        ;;\n    centos|fedora|rhel)\n        # do something\n        ;;\n    *)\n        exit 1\n        ;;\nesac\n```\n\n## 其他\n当前环境生效环境变量\n```bash\nexport NODE_PATH=`pwd`/nodejs\n```\n执行某个文件\n```bash\nsource ~/.bash_profile\n```\n","slug":"linux-common-use","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7a008f5gqolqb7jcx2"},{"title":"办理北京工作居住证的一些细节","date":"2018-02-11T15:05:22.000Z","_content":"\n前几天工作居住证成功办理下来了，查看信息的时候，除了欣喜，更多的是感慨，想要拿到北京“绿本”真是太不容易了，历经半年，其中更多的时间是在提交-等待-退回-修改-提交中循环前进，所以今天来记录下办理过程中碰到的坑和一些细节，可能提到某些点可以让你少走弯路。\n\n<!-- more --><!-- toc -->\n\n## 最近改革\n现在再称呼它为北京“绿本”已经过时了，2018 年 01 月 16 日，北京正式用《北京市工作居住证确认单》代替《工作居住证》，需要使用时，从网站下载并打印即可，以后更改信息也全部通过网站操作，当然以前的小本本继续有效，这样的改动无疑是更加方便的，这也是政府工作又一次向互联网的靠近。\n\n## 靠自己\n靠自己，其实什么事都要靠自己才能真正办成。办证这个事情其实很大程度需要 HR 的帮助，但是你还需要自己多仔细才行，在准备了很长时间资料提交上去后，第一次被驳回的原因是在当前合同时间不到半年，虽然因为种种原因，实际时间远远不止，但是人家就只看合同的起始时间，为此耽搁了很长时间。\n\n## 各种证件\n如果你要办证，一定要仔细看官网资料[工作居住证申请](http://219.232.200.42/yjrc/help/person/person.htm)，这里面是最你办证的那个时间点最准，最全的，我们情况不同，可能需要的资料就会不一样，我以自己为例\n- 1 寸白底照片\n- 居住证，如果没有你需要租房合同，房东身份证房本等资料的复印件等等。\n- 劳动合同\n- [最近半年社保证明](/2018/01/17/bjsb-canbaodingzhi/)\n- 本科毕业证书及学历证明\n- 学士学位证书及学位证明\n- 最近半年缴税证明\n- 登陆[系统](http://219.232.200.39/uamsso/)填写资料\n\n### 学历证明\n光有毕业证书不行，还需要有网上证明，你需要去[学信网](http://www.chsi.com.cn/)进行申请打印\n![/images/gzjzz2.png](/images/gzjzz2.png)\n\n其实在毕业时，我们都是注册过账号的，只要用那时候注册的手机号登陆即可，反正我是没换过手机号，你可能得想想用的哪个。\n![/images/gzjzz1.png](/images/gzjzz1.png)\n\n接下来通过点击“在线验证报告”一栏的“教育部学籍在线验证报告”，并申请正文版，既可以看到生成的在线报告，有效期一个月，点击查看并打印即可\n![/images/gzjzz3.png](/images/gzjzz3.png)\n\n### 学位证明\n同样的，除了学位证书，还需要在线证明，这次要去[中国学位与研究生教育网站](http://www.chinadegrees.com.cn/)\n![/images/gzjzz5.png](/images/gzjzz5.png)\n\n这个需要实名注册下先，登陆以后就十分方便了，点击“我的学位信息”即可，不然没有打印按钮，这个需要先将网站另存为 pdf 文件，在打印效果是最好的\n![/images/gzjzz4.png](/images/gzjzz4.png)\n\n关于两个证明，还有点需要说明，***你要准备的小纸条并写上两个网站的登录名和密码***，办理工作居住证真的很严格，人家是需要登陆进去自己查的。\n\n### 缴税证明\n社保证明可以自己从网上打印，缴税证明就必须要去税务局的机子上去打印了，流程很简单，带上身份证去了2分钟搞定，难得是找地址，北京这么大，去错了地方，可是半天时间就浪费了，你可以从[办税地图](http://shiju.tax861.gov.cn/bjds/zwgk/bmfw/lxfs/index.asp)上找到你附近最近的可以打印税单的局子。\n\n我们开始不知道这个地图的，那个时候还是 7 月份（我说过，经历了半年），折腾了个很远的地方还找错了。当然，如果你们的 HR 帮你做了这件事，当我没说。\n\n### 系统填写资料\n这无疑是最让人崩溃的阶段，在资料准备好，需要到[系统](http://219.232.200.39/uamsso/)上去填写自己的完整信息并提交，等办理完成，也会在这里面展示出来，系统的账号密码是 HR 给的。\n\n这里我没有截图，因为我是在不想登陆虚拟机的 Windows 系统了，没错，政府最喜欢的就是 Windows 系统，Mac 电脑登陆进去是不能显示的，Win8 都不行，我用的 xp ，因为懒的再去找其他版本的系统了。\n\n具体的各种信息都根据提示填写即可，需要注意的有两点，***完整和正确***，完整还好理解，都填，填满就是了呗。“正确”呢，就是很严谨的，我被驳回的一次错误，就是因为上家公司的离职时间和下家的入职时间完全一样，人家说了，至少需要错开一天，恩，也对，但是平常还真不注意这个，这次你不注意不行，驳回一次就得等一周。\n\n## 后记\n这样总结起来好像也没有太多东西，人呢，总是好了伤疤忘了疼的。其实还有很多细节都已经被拿到证的喜悦给冲刷掉了，记下这些让我痛苦多点的事情，至少算是一次总结，好了，去摇号了，万一摇上了呢。\n","source":"_posts/2018-02-11-beijing-xiaolvka.md","raw":"---\ntitle: 办理北京工作居住证的一些细节\ndate: 2018-02-11 15:05:22\ntags: [生活, 北京]\n---\n\n前几天工作居住证成功办理下来了，查看信息的时候，除了欣喜，更多的是感慨，想要拿到北京“绿本”真是太不容易了，历经半年，其中更多的时间是在提交-等待-退回-修改-提交中循环前进，所以今天来记录下办理过程中碰到的坑和一些细节，可能提到某些点可以让你少走弯路。\n\n<!-- more --><!-- toc -->\n\n## 最近改革\n现在再称呼它为北京“绿本”已经过时了，2018 年 01 月 16 日，北京正式用《北京市工作居住证确认单》代替《工作居住证》，需要使用时，从网站下载并打印即可，以后更改信息也全部通过网站操作，当然以前的小本本继续有效，这样的改动无疑是更加方便的，这也是政府工作又一次向互联网的靠近。\n\n## 靠自己\n靠自己，其实什么事都要靠自己才能真正办成。办证这个事情其实很大程度需要 HR 的帮助，但是你还需要自己多仔细才行，在准备了很长时间资料提交上去后，第一次被驳回的原因是在当前合同时间不到半年，虽然因为种种原因，实际时间远远不止，但是人家就只看合同的起始时间，为此耽搁了很长时间。\n\n## 各种证件\n如果你要办证，一定要仔细看官网资料[工作居住证申请](http://219.232.200.42/yjrc/help/person/person.htm)，这里面是最你办证的那个时间点最准，最全的，我们情况不同，可能需要的资料就会不一样，我以自己为例\n- 1 寸白底照片\n- 居住证，如果没有你需要租房合同，房东身份证房本等资料的复印件等等。\n- 劳动合同\n- [最近半年社保证明](/2018/01/17/bjsb-canbaodingzhi/)\n- 本科毕业证书及学历证明\n- 学士学位证书及学位证明\n- 最近半年缴税证明\n- 登陆[系统](http://219.232.200.39/uamsso/)填写资料\n\n### 学历证明\n光有毕业证书不行，还需要有网上证明，你需要去[学信网](http://www.chsi.com.cn/)进行申请打印\n![/images/gzjzz2.png](/images/gzjzz2.png)\n\n其实在毕业时，我们都是注册过账号的，只要用那时候注册的手机号登陆即可，反正我是没换过手机号，你可能得想想用的哪个。\n![/images/gzjzz1.png](/images/gzjzz1.png)\n\n接下来通过点击“在线验证报告”一栏的“教育部学籍在线验证报告”，并申请正文版，既可以看到生成的在线报告，有效期一个月，点击查看并打印即可\n![/images/gzjzz3.png](/images/gzjzz3.png)\n\n### 学位证明\n同样的，除了学位证书，还需要在线证明，这次要去[中国学位与研究生教育网站](http://www.chinadegrees.com.cn/)\n![/images/gzjzz5.png](/images/gzjzz5.png)\n\n这个需要实名注册下先，登陆以后就十分方便了，点击“我的学位信息”即可，不然没有打印按钮，这个需要先将网站另存为 pdf 文件，在打印效果是最好的\n![/images/gzjzz4.png](/images/gzjzz4.png)\n\n关于两个证明，还有点需要说明，***你要准备的小纸条并写上两个网站的登录名和密码***，办理工作居住证真的很严格，人家是需要登陆进去自己查的。\n\n### 缴税证明\n社保证明可以自己从网上打印，缴税证明就必须要去税务局的机子上去打印了，流程很简单，带上身份证去了2分钟搞定，难得是找地址，北京这么大，去错了地方，可是半天时间就浪费了，你可以从[办税地图](http://shiju.tax861.gov.cn/bjds/zwgk/bmfw/lxfs/index.asp)上找到你附近最近的可以打印税单的局子。\n\n我们开始不知道这个地图的，那个时候还是 7 月份（我说过，经历了半年），折腾了个很远的地方还找错了。当然，如果你们的 HR 帮你做了这件事，当我没说。\n\n### 系统填写资料\n这无疑是最让人崩溃的阶段，在资料准备好，需要到[系统](http://219.232.200.39/uamsso/)上去填写自己的完整信息并提交，等办理完成，也会在这里面展示出来，系统的账号密码是 HR 给的。\n\n这里我没有截图，因为我是在不想登陆虚拟机的 Windows 系统了，没错，政府最喜欢的就是 Windows 系统，Mac 电脑登陆进去是不能显示的，Win8 都不行，我用的 xp ，因为懒的再去找其他版本的系统了。\n\n具体的各种信息都根据提示填写即可，需要注意的有两点，***完整和正确***，完整还好理解，都填，填满就是了呗。“正确”呢，就是很严谨的，我被驳回的一次错误，就是因为上家公司的离职时间和下家的入职时间完全一样，人家说了，至少需要错开一天，恩，也对，但是平常还真不注意这个，这次你不注意不行，驳回一次就得等一周。\n\n## 后记\n这样总结起来好像也没有太多东西，人呢，总是好了伤疤忘了疼的。其实还有很多细节都已经被拿到证的喜悦给冲刷掉了，记下这些让我痛苦多点的事情，至少算是一次总结，好了，去摇号了，万一摇上了呢。\n","slug":"beijing-xiaolvka","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7b008h5gqoc0dhsxi7"},{"title":"React 启动自定义 Port 端口号","date":"2018-02-10T11:39:28.000Z","_content":"\n\nReact 启动时自定义端口号\n<!-- more -->\n修改 `package.json` 中 `start` 一行\n## Linux or MacOS\n```bash\n\"start\": \"PORT=4003 react-scripts start\",\n```\n或者\n```bash\n\"start\": \"export PORT=3006 react-scripts start\"\n```\n\n## Windows\n```bash\n\"start\": \"set PORT=3006 && react-scripts start\"\n```\n\n- [How to specify a port to run a create-react-app based project?](https://stackoverflow.com/questions/40714583/how-to-specify-a-port-to-run-a-create-react-app-based-project)\n\n","source":"_posts/2018-02-10-react-set-port.md","raw":"---\ntitle: React 启动自定义 Port 端口号\ntags:\n  - react\ndate: 2018-02-10 11:39:28\n---\n\n\nReact 启动时自定义端口号\n<!-- more -->\n修改 `package.json` 中 `start` 一行\n## Linux or MacOS\n```bash\n\"start\": \"PORT=4003 react-scripts start\",\n```\n或者\n```bash\n\"start\": \"export PORT=3006 react-scripts start\"\n```\n\n## Windows\n```bash\n\"start\": \"set PORT=3006 && react-scripts start\"\n```\n\n- [How to specify a port to run a create-react-app based project?](https://stackoverflow.com/questions/40714583/how-to-specify-a-port-to-run-a-create-react-app-based-project)\n\n","slug":"react-set-port","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7c008k5gqoagynpeu7"},{"title":"Headless Chrome","date":"2018-02-12T17:05:43.000Z","_content":"\n\n> Headless Chrome is shipping in Chrome 59. It's a way to run the Chrome browser in a headless environment. Essentially, running Chrome without chrome! It brings all modern web platform features provided by Chromium and the Blink rendering engine to the command line.\n\n<!-- more --><!-- toc -->\nHeadless Chrome 是在无头环境中运行 Chrome 的一种方式，即在没有 chrome 的情况下运行 Chrome。恩？没有 chrome 还怎么运行，这里有点绕，没有 chrome 是指不用真的打开一个浏览器，而是在命令行中运行命令，并模拟 Chrome 加载网页。这种方式在开发中很是方便。\n\n## 版本要求\nChrome 59 版本以上才支持这个功能，如果你不知道当前客户端的版本，打开一个浏览器并打开 `chrome://version` 即可，如果版本过低，先升级下吧。\n\n## 运行命令\n在电脑中安装的 Chrome 客户端是并没有在环境变量中的，修改 `~/.bash_profile`\n```bash\nalias chrome=\"/Applications/Google\\ Chrome.app/Contents/MacOS/Google\\ Chrome\"\nalias chrome-canary=\"/Applications/Google\\ Chrome\\ Canary.app/Contents/MacOS/Google\\ Chrome\\ Canary\"\nalias chromium=\"/Applications/Chromium.app/Contents/MacOS/Chromium\"\n```\n随后执行 `source ~/.bash_profile` 使变量生效，并在终端中输入 `chrome` 可以打开一个浏览器，这样环境变量就生效了。\n\n## 使用 headless\n### 打印 Dom\n参数 `--dump-dom` 可以将 `document.body.innerHTML` 打印到标准输出中\n```bash\nchrome --headless --disable-gpu --dump-dom https://wxnacy.com\n```\n- `--headless` 即为使用 headless 模式打开 chrome\n- `--disable-gpu` 如果在 Windows 中需要使用该参数\n\n### 输出 PDF\n将网页输出到名为 `output.pdf` 的文件中\n```bash\nchrome --headless --disable-gpu --print-to-pdf https://wxnacy.com\n```\n\n### 截图\n将网页截图并命名为 `screenshot.png` 保存到当前目录中\n```bash\nchrome --headless --disable-gpu --screenshot https://wxnacy.com\n```\n设定打开多大的模拟浏览器在加载页面\n```bash\nchrome --headless --disable-gpu --screenshot --window-size=1280,1696 https://wxnacy.com\n```\n\n### REPL 模式 (read-eval-print loop)\n该模式会进入一个 Javascript 环境，并可以通过输入 Javascript 指令来分析 Dom 元素\n```bash\nwxnacy@bogon ~/Documents> chrome --headless --disable-gpu --repl https://wxnacy.com\nlocation.hre[0212/160208.469737:INFO:headless_shell.cc(398)] Type a Javascript expression to evaluate or \"quit\" to exit.\n>>> document.title\n{\"result\":{\"type\":\"string\",\"value\":\"wxnacy 博客\"}}\n```\n\n- [Getting Started with Headless Chrome](https://developers.google.com/web/updates/2017/04/headless-chrome)\n\n\n","source":"_posts/2018-02-12-headless-chrome.md","raw":"---\ntitle: Headless Chrome\ntags:\n  - 工具\ndate: 2018-02-12 17:05:43\n---\n\n\n> Headless Chrome is shipping in Chrome 59. It's a way to run the Chrome browser in a headless environment. Essentially, running Chrome without chrome! It brings all modern web platform features provided by Chromium and the Blink rendering engine to the command line.\n\n<!-- more --><!-- toc -->\nHeadless Chrome 是在无头环境中运行 Chrome 的一种方式，即在没有 chrome 的情况下运行 Chrome。恩？没有 chrome 还怎么运行，这里有点绕，没有 chrome 是指不用真的打开一个浏览器，而是在命令行中运行命令，并模拟 Chrome 加载网页。这种方式在开发中很是方便。\n\n## 版本要求\nChrome 59 版本以上才支持这个功能，如果你不知道当前客户端的版本，打开一个浏览器并打开 `chrome://version` 即可，如果版本过低，先升级下吧。\n\n## 运行命令\n在电脑中安装的 Chrome 客户端是并没有在环境变量中的，修改 `~/.bash_profile`\n```bash\nalias chrome=\"/Applications/Google\\ Chrome.app/Contents/MacOS/Google\\ Chrome\"\nalias chrome-canary=\"/Applications/Google\\ Chrome\\ Canary.app/Contents/MacOS/Google\\ Chrome\\ Canary\"\nalias chromium=\"/Applications/Chromium.app/Contents/MacOS/Chromium\"\n```\n随后执行 `source ~/.bash_profile` 使变量生效，并在终端中输入 `chrome` 可以打开一个浏览器，这样环境变量就生效了。\n\n## 使用 headless\n### 打印 Dom\n参数 `--dump-dom` 可以将 `document.body.innerHTML` 打印到标准输出中\n```bash\nchrome --headless --disable-gpu --dump-dom https://wxnacy.com\n```\n- `--headless` 即为使用 headless 模式打开 chrome\n- `--disable-gpu` 如果在 Windows 中需要使用该参数\n\n### 输出 PDF\n将网页输出到名为 `output.pdf` 的文件中\n```bash\nchrome --headless --disable-gpu --print-to-pdf https://wxnacy.com\n```\n\n### 截图\n将网页截图并命名为 `screenshot.png` 保存到当前目录中\n```bash\nchrome --headless --disable-gpu --screenshot https://wxnacy.com\n```\n设定打开多大的模拟浏览器在加载页面\n```bash\nchrome --headless --disable-gpu --screenshot --window-size=1280,1696 https://wxnacy.com\n```\n\n### REPL 模式 (read-eval-print loop)\n该模式会进入一个 Javascript 环境，并可以通过输入 Javascript 指令来分析 Dom 元素\n```bash\nwxnacy@bogon ~/Documents> chrome --headless --disable-gpu --repl https://wxnacy.com\nlocation.hre[0212/160208.469737:INFO:headless_shell.cc(398)] Type a Javascript expression to evaluate or \"quit\" to exit.\n>>> document.title\n{\"result\":{\"type\":\"string\",\"value\":\"wxnacy 博客\"}}\n```\n\n- [Getting Started with Headless Chrome](https://developers.google.com/web/updates/2017/04/headless-chrome)\n\n\n","slug":"headless-chrome","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7d008m5gqo3x9gl9rq"},{"title":"Flask SQLAlchemy 框架的使用","date":"2018-01-25T18:13:01.000Z","_content":"\n昨天介绍了 SQLAlchemy 的使用，今天介绍下在 Flask 框架中如何使用它。\n\n<!-- more --><!-- toc -->\n本章代码 Demo 地址：https://github.com/wxnacy/study/tree/master/python/flask_sqlalchemy_demo\n\n## 下载\n```bash\n$ pip install Flask\n$ pip install Flask_SQLAlchemy\n```\n`Flask_SQLAlchemy` 将 SQLAlchemy 整合到 Flask 框架中，使用起来非常方便。\n\n## 创建 db\nSQLAlchemy 需要的 `Base, engine, session` 都被整合到了一起，用 `SQLAlchemy` 类实现，该类实例需要传入 `Flask` 对象，并利用 `app.config['SQLALCHEMY_DATABASE_URI']` 来赋值 `database` 的 URI，\n```python\n\nfrom flask import Flask\nfrom flask_sqlalchemy import SQLAlchemy\n\napp = Flask(__name__)\nSQLALCHEMY_DATABASE_URI = 'mysql+pymysql://root:wxnacy@127.0.0.1:3306/study?charset=utf8mb4'\napp.config['SQLALCHEMY_DATABASE_URI'] = SQLALCHEMY_DATABASE_URI\n\ndb = SQLAlchemy(app)\n```\n通过 db 可以获取基类 `db.Model`，Session `db.session`，引擎 `db.engine`\n\n## 映射类\n在构造映射类的时候，需要继承的基类由 `db.Model` 来实现\n```python\nclass Book(db.Model):\n    __tablename__ = 'book'\n    id = db.Column(db.INT, primary_key=True)\n    name = db.Column(db.String, default=\"\")\n\n    def format(self):\n        return dict(id=self.id, name=self.name)\n```\n## 创建 api\n我们创建两个 RESTful 风格的接口，创建和查询\n```python\n@app.route('/book', methods=['POST'])\ndef create_book():\n    args = request.json\n    book = Book(**args)\n    db.session.add(book)\n    db.session.commit()\n    return jsonify(book.format())\n\n@app.route('/book/<int:id>', methods=['GET'])\ndef get_book(id):\n    book = Book.query.filter_by(id=id).first()\n    return jsonify(book.format())\n```\n在创建部分，与直接使用 SQLAlchemy 没有什么不同，但是在查询方面，除了可以使用 `session.query(Book)` 的方式查询，还可以使用 `Book.query` 的方式查询，这样书写会更方便。\n\n## 运行\n最后加上 `app.run()` 来启动 web 服务，运行\n```bash\n$ python run.py\n```\n启动项目\n\n创建\n```bash\n$ curl -X POST localhost:5000/book -H \"Content-Type:application/json\" -d '{\"name\":\"wxnacy\"}'\n```\n```bash\n{\n    \"id\": 94,\n    \"name\": \"wxnacy\"\n}\n```\n获取\n```bash\n$ curl localhost:5000/book/94\n```\n```bash\n{\n    \"id\": 94,\n    \"name\": \"wxnacy\"\n}\n```\n\n## 参考\n- [Flask SQLAlchemy](http://flask-sqlalchemy.pocoo.org/2.3/)\n","source":"_posts/2018-01-25-flask-sqlalchemy.md","raw":"---\ntitle: Flask SQLAlchemy 框架的使用\ndate: 2018-01-25 18:13:01\ntags: [python, flask]\n---\n\n昨天介绍了 SQLAlchemy 的使用，今天介绍下在 Flask 框架中如何使用它。\n\n<!-- more --><!-- toc -->\n本章代码 Demo 地址：https://github.com/wxnacy/study/tree/master/python/flask_sqlalchemy_demo\n\n## 下载\n```bash\n$ pip install Flask\n$ pip install Flask_SQLAlchemy\n```\n`Flask_SQLAlchemy` 将 SQLAlchemy 整合到 Flask 框架中，使用起来非常方便。\n\n## 创建 db\nSQLAlchemy 需要的 `Base, engine, session` 都被整合到了一起，用 `SQLAlchemy` 类实现，该类实例需要传入 `Flask` 对象，并利用 `app.config['SQLALCHEMY_DATABASE_URI']` 来赋值 `database` 的 URI，\n```python\n\nfrom flask import Flask\nfrom flask_sqlalchemy import SQLAlchemy\n\napp = Flask(__name__)\nSQLALCHEMY_DATABASE_URI = 'mysql+pymysql://root:wxnacy@127.0.0.1:3306/study?charset=utf8mb4'\napp.config['SQLALCHEMY_DATABASE_URI'] = SQLALCHEMY_DATABASE_URI\n\ndb = SQLAlchemy(app)\n```\n通过 db 可以获取基类 `db.Model`，Session `db.session`，引擎 `db.engine`\n\n## 映射类\n在构造映射类的时候，需要继承的基类由 `db.Model` 来实现\n```python\nclass Book(db.Model):\n    __tablename__ = 'book'\n    id = db.Column(db.INT, primary_key=True)\n    name = db.Column(db.String, default=\"\")\n\n    def format(self):\n        return dict(id=self.id, name=self.name)\n```\n## 创建 api\n我们创建两个 RESTful 风格的接口，创建和查询\n```python\n@app.route('/book', methods=['POST'])\ndef create_book():\n    args = request.json\n    book = Book(**args)\n    db.session.add(book)\n    db.session.commit()\n    return jsonify(book.format())\n\n@app.route('/book/<int:id>', methods=['GET'])\ndef get_book(id):\n    book = Book.query.filter_by(id=id).first()\n    return jsonify(book.format())\n```\n在创建部分，与直接使用 SQLAlchemy 没有什么不同，但是在查询方面，除了可以使用 `session.query(Book)` 的方式查询，还可以使用 `Book.query` 的方式查询，这样书写会更方便。\n\n## 运行\n最后加上 `app.run()` 来启动 web 服务，运行\n```bash\n$ python run.py\n```\n启动项目\n\n创建\n```bash\n$ curl -X POST localhost:5000/book -H \"Content-Type:application/json\" -d '{\"name\":\"wxnacy\"}'\n```\n```bash\n{\n    \"id\": 94,\n    \"name\": \"wxnacy\"\n}\n```\n获取\n```bash\n$ curl localhost:5000/book/94\n```\n```bash\n{\n    \"id\": 94,\n    \"name\": \"wxnacy\"\n}\n```\n\n## 参考\n- [Flask SQLAlchemy](http://flask-sqlalchemy.pocoo.org/2.3/)\n","slug":"flask-sqlalchemy","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7e008o5gqoxrz7391l"},{"title":"Python 中使用 Graphql 返回 JSON 类型","date":"2018-02-14T19:34:16.000Z","_content":"\n\n在使用 Graphql 在 Python 中的模块 Graphene 时，发现默认返回类型没有 JSON 格式，通过网上资料发现需要自己补充该类型才可以。\n\n<!-- more --><!-- toc -->\n## py2\n```python\nimport graphene\nfrom graphene.types.scalars import MIN_INT, MAX_INT\nfrom graphql.language.ast import BooleanValue, StringValue, IntValue, ListValue, ObjectValue, FloatValue\n\n\nclass JSON(graphene.Scalar):\n\t\"\"\"\n\tThe `JSON` scalar type represents JSON values as specified by\n\t[ECMA-404](http://www.ecma-international.org/\n\tpublications/files/ECMA-ST/ECMA-404.pdf).\n\t\"\"\"\n\n\t@staticmethod\n\tdef identity(value):\n\t\tif isinstance(value, (unicode, str, bool, int, float)):\n\t\t\treturn value.__class__(value)\n\t\telif isinstance(value, (list, dict)):\n\t\t\treturn value\n\t\telse:\n\t\t\treturn None\n\n\tserialize = identity\n\tparse_value = identity\n\n\t@staticmethod\n\tdef parse_literal(ast):\n\t\tif isinstance(ast, (StringValue, BooleanValue)):\n\t\t\treturn ast.value\n\t\telif isinstance(ast, IntValue):\n\t\t\tnum = int(ast.value)\n\t\t\tif MIN_INT <= num <= MAX_INT:\n\t\t\t\treturn num\n\t\telif isinstance(ast, FloatValue):\n\t\t\treturn float(ast.value)\n\t\telif isinstance(ast, ListValue):\n\t\t\treturn [JSON.parse_literal(value) for value in ast.values]\n\t\telif isinstance(ast, ObjectValue):\n\t\t\treturn {field.name.value: JSON.parse_literal(field.value) for field in ast.fields}\n\t\telse:\n\t\t\treturn None\n```\n\n## py3\n```python\nimport graphene\nfrom graphql.language.ast import BooleanValue, StringValue, IntValue, ListValue, ObjectValue, FloatValue\n\nclass JSON(graphene.Scalar):\n\t\"\"\"\n\tThe `JSON` scalar type represents JSON values as specified by\n\t[ECMA-404](http://www.ecma-international.org/\n\tpublications/files/ECMA-ST/ECMA-404.pdf).\n\t\"\"\"\n\n\t@staticmethod\n\tdef identity(value):\n\t\tif isinstance(value, (str, bool, int, float)):\n\t\t\treturn value.__class__(value)\n\t\telif isinstance(value, (list, dict)):\n\t\t\treturn value\n\t\telse:\n\t\t\treturn None\n\n\tserialize = identity\n\tparse_value = identity\n\n\t@staticmethod\n\tdef parse_literal(ast):\n\t\tif isinstance(ast, (StringValue, BooleanValue)):\n\t\t\treturn ast.value\n\t\telif isinstance(ast, IntValue):\n\t\t\treturn int(ast.value)\n\t\telif isinstance(ast, FloatValue):\n\t\t\treturn float(ast.value)\n\t\telif isinstance(ast, ListValue):\n\t\t\treturn [JSON.parse_literal(value) for value in ast.values]\n\t\telif isinstance(ast, ObjectValue):\n\t\t\treturn {field.name.value: JSON.parse_literal(field.value) for field in ast.fields}\n\t\telse:\n\t\t\treturn None\n```\n\n## 使用\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport graphene\n\nclass Query(graphene.ObjectType):\n    test = graphene.Field(JSON)\n\n    def resolve_test(self, info):\n        return dict(name=\"wxnacy\", age=12, types = ['shuaiqi', 'youcai'],\n            book=dict(name='wohenshuai'))\n\nschema = graphene.Schema(query=Query)\n\nresult = schema.execute('{ test  }')\nprint(result.data['test'])\n# {'name': 'wxnacy', 'age': 12, 'types': ['shuaiqi', 'youcai'], 'book': {'name': 'wohenshuai'}}\n```\n完整 demo 地址：https://github.com/wxnacy/study/blob/master/python/graphql_demo/type_json.py\n\n- [Implement JSON type](https://github.com/graphql-python/graphene/issues/384)\n","source":"_posts/2018-02-14-graphene-type-json.md","raw":"---\ntitle: Python 中使用 Graphql 返回 JSON 类型\ntags:\n  - graphql\n  - python\ndate: 2018-02-14 19:34:16\n---\n\n\n在使用 Graphql 在 Python 中的模块 Graphene 时，发现默认返回类型没有 JSON 格式，通过网上资料发现需要自己补充该类型才可以。\n\n<!-- more --><!-- toc -->\n## py2\n```python\nimport graphene\nfrom graphene.types.scalars import MIN_INT, MAX_INT\nfrom graphql.language.ast import BooleanValue, StringValue, IntValue, ListValue, ObjectValue, FloatValue\n\n\nclass JSON(graphene.Scalar):\n\t\"\"\"\n\tThe `JSON` scalar type represents JSON values as specified by\n\t[ECMA-404](http://www.ecma-international.org/\n\tpublications/files/ECMA-ST/ECMA-404.pdf).\n\t\"\"\"\n\n\t@staticmethod\n\tdef identity(value):\n\t\tif isinstance(value, (unicode, str, bool, int, float)):\n\t\t\treturn value.__class__(value)\n\t\telif isinstance(value, (list, dict)):\n\t\t\treturn value\n\t\telse:\n\t\t\treturn None\n\n\tserialize = identity\n\tparse_value = identity\n\n\t@staticmethod\n\tdef parse_literal(ast):\n\t\tif isinstance(ast, (StringValue, BooleanValue)):\n\t\t\treturn ast.value\n\t\telif isinstance(ast, IntValue):\n\t\t\tnum = int(ast.value)\n\t\t\tif MIN_INT <= num <= MAX_INT:\n\t\t\t\treturn num\n\t\telif isinstance(ast, FloatValue):\n\t\t\treturn float(ast.value)\n\t\telif isinstance(ast, ListValue):\n\t\t\treturn [JSON.parse_literal(value) for value in ast.values]\n\t\telif isinstance(ast, ObjectValue):\n\t\t\treturn {field.name.value: JSON.parse_literal(field.value) for field in ast.fields}\n\t\telse:\n\t\t\treturn None\n```\n\n## py3\n```python\nimport graphene\nfrom graphql.language.ast import BooleanValue, StringValue, IntValue, ListValue, ObjectValue, FloatValue\n\nclass JSON(graphene.Scalar):\n\t\"\"\"\n\tThe `JSON` scalar type represents JSON values as specified by\n\t[ECMA-404](http://www.ecma-international.org/\n\tpublications/files/ECMA-ST/ECMA-404.pdf).\n\t\"\"\"\n\n\t@staticmethod\n\tdef identity(value):\n\t\tif isinstance(value, (str, bool, int, float)):\n\t\t\treturn value.__class__(value)\n\t\telif isinstance(value, (list, dict)):\n\t\t\treturn value\n\t\telse:\n\t\t\treturn None\n\n\tserialize = identity\n\tparse_value = identity\n\n\t@staticmethod\n\tdef parse_literal(ast):\n\t\tif isinstance(ast, (StringValue, BooleanValue)):\n\t\t\treturn ast.value\n\t\telif isinstance(ast, IntValue):\n\t\t\treturn int(ast.value)\n\t\telif isinstance(ast, FloatValue):\n\t\t\treturn float(ast.value)\n\t\telif isinstance(ast, ListValue):\n\t\t\treturn [JSON.parse_literal(value) for value in ast.values]\n\t\telif isinstance(ast, ObjectValue):\n\t\t\treturn {field.name.value: JSON.parse_literal(field.value) for field in ast.fields}\n\t\telse:\n\t\t\treturn None\n```\n\n## 使用\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport graphene\n\nclass Query(graphene.ObjectType):\n    test = graphene.Field(JSON)\n\n    def resolve_test(self, info):\n        return dict(name=\"wxnacy\", age=12, types = ['shuaiqi', 'youcai'],\n            book=dict(name='wohenshuai'))\n\nschema = graphene.Schema(query=Query)\n\nresult = schema.execute('{ test  }')\nprint(result.data['test'])\n# {'name': 'wxnacy', 'age': 12, 'types': ['shuaiqi', 'youcai'], 'book': {'name': 'wohenshuai'}}\n```\n完整 demo 地址：https://github.com/wxnacy/study/blob/master/python/graphql_demo/type_json.py\n\n- [Implement JSON type](https://github.com/graphql-python/graphene/issues/384)\n","slug":"graphene-type-json","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7f008q5gqoi527a9gy"},{"title":"Javascript trim() 方法及兼容","date":"2018-02-13T17:37:43.000Z","_content":"\n\n`trim()` 方法会从一个字符串的两端删除空白字符。在这个上下文中的空白字符是所有的空白字符 (space, tab, no-break space 等) 以及所有行终止符字符（如 LF，CR）。\n\n<!-- more --><!-- toc -->\n## 使用\n`trim()` 方法并不影响原字符串本身，它返回的是一个新的字符串。\n```javascript\nvar orig = '   foo  ';\nconsole.log(orig.trim()); // 'foo'\n```\n\n## 兼容\n如果 trim() 不存在，可以在所有代码前执行下面代码\n```java\nif( !String.prototype.trim) {\n    String.prototype.trim = function () {\n        return this.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n    };\n}\n```\n\n- [原文](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/Trim)\n","source":"_posts/2018-02-13-javascript-trim.md","raw":"---\ntitle: Javascript trim() 方法及兼容\ntags:\n  - javascript\ndate: 2018-02-13 17:37:43\n---\n\n\n`trim()` 方法会从一个字符串的两端删除空白字符。在这个上下文中的空白字符是所有的空白字符 (space, tab, no-break space 等) 以及所有行终止符字符（如 LF，CR）。\n\n<!-- more --><!-- toc -->\n## 使用\n`trim()` 方法并不影响原字符串本身，它返回的是一个新的字符串。\n```javascript\nvar orig = '   foo  ';\nconsole.log(orig.trim()); // 'foo'\n```\n\n## 兼容\n如果 trim() 不存在，可以在所有代码前执行下面代码\n```java\nif( !String.prototype.trim) {\n    String.prototype.trim = function () {\n        return this.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n    };\n}\n```\n\n- [原文](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/Trim)\n","slug":"javascript-trim","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7f008s5gqoa6ssvfck"},{"title":"除夕啦","date":"2018-02-15T22:47:58.000Z","_content":"\n\n除夕啦，今天水一篇\n<!-- more -->\n今年没有回家过年，俩人，不，是仨人在北京过年，一大早就开始忙活。\n![/images/chuxi2.jpg](/images/chuxi2.jpeg)\n\n白天打扫卫生，中午做丸子汤，晚上包饺子，虽然没有回家还是浓浓的年味，话说今年的春晚还是不错的，比前两年好太多了。\n![/images/chuxi.jpg](/images/chuxi.jpg)\n继续去看春晚了，今天水一篇。\n\n","source":"_posts/2018-02-15-chuxile.md","raw":"---\ntitle: 除夕啦\ntags:\n  - 杂谈\ndate: 2018-02-15 22:47:58\n---\n\n\n除夕啦，今天水一篇\n<!-- more -->\n今年没有回家过年，俩人，不，是仨人在北京过年，一大早就开始忙活。\n![/images/chuxi2.jpg](/images/chuxi2.jpeg)\n\n白天打扫卫生，中午做丸子汤，晚上包饺子，虽然没有回家还是浓浓的年味，话说今年的春晚还是不错的，比前两年好太多了。\n![/images/chuxi.jpg](/images/chuxi.jpg)\n继续去看春晚了，今天水一篇。\n\n","slug":"chuxile","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7i008v5gqo6xwi3spq"},{"title":"Linux 安装 openresty","date":"2018-02-17T21:19:33.000Z","_content":"\n\nLinux 系统在安装 openresty 时，无法直接用 `yum, apt` 等安装包工具，需要手动添加 openresty 的仓库。\n\n<!-- more --><!-- toc -->\n## Ubuntu\n### 安装\n```bash\n# 导入我们的 GPG 密钥：\nwget -qO - https://openresty.org/package/pubkey.gpg | sudo apt-key add -\n\n# 安装 add-apt-repository 命令\n# （之后你可以删除这个包以及对应的关联包）\nsudo apt-get -y install software-properties-common\n\n# 添加我们官方 official APT 仓库：\nsudo add-apt-repository -y \"deb http://openresty.org/package/ubuntu $(lsb_release -sc) main\"\n\n# 更新 APT 索引：\nsudo apt-get update\n# 然后就可以像下面这样安装软件包，比如 openresty：\nsudo apt-get install openresty\n```\n### 自启动\n修改 `/etc/rc.local` 文件，在 `exit 0` 之前加入\n```bash\n/usr/bin/supervisord\n```\n保存退出，并修改权限\n```bash\nchmod +x /etc/rc.local\n```\n## CentOS\n### 安装\n```bash\n# 添加仓库\nsudo yum install yum-utils\nsudo yum-config-manager --add-repo https://openresty.org/package/centos/openresty.repo\n\n# 然后就可以像下面这样安装软件包，比如 openresty：\nsudo yum install openresty\n```\n### 自启动\n适用 CentOS >= 7 的版本\n新建 `/usr/lib/systemd/system/openresty.service` 文件\n```bash\n[Unit]\nDescription=openresty daemon\n\n[Service]\nType=forking\nPIDFile=/usr/local/openresty/nginx/logs/nginx.pid\nExecStartPre=/usr/local/openresty/nginx/sbin/nginx -t\nExecStart=/usr/local/openresty/nginx/sbin/nginx\nExecReload=/bin/kill -s HUP $MAINPID\nExecStop=/bin/kill -s QUIT $MAINPID\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\n```\n开启自启动\n```bash\nsystemctl enable openresty\n```\n查看启动状态\n```bash\nsystemctl status openresty\n```\n\n## 手动编译\n如果服务器重度依赖 Nginx 来做请求判断，那最好还是用编译的方式，`yum, apt` 安装的方式模块依赖非常有限，并不方便更改。\n\n安装依赖\n```bash\nyum -y install pcre pcre-devel openssl openssl-devel\n```\n从 [download](https://openresty.org/cn/download.html) 页面找到最新版，或者你想要的版本\n```bash\n$ wget https://openresty.org/download/openresty-1.13.6.1.tar.gz\n$ tar -zxvf openresty-1.13.6.1.tar.gz\n$ cd openresty-1.13.6.1\n$ ./configure --user=nginx --group=nginx \\\n    --with-http_ssl_module \\\n    --with-http_realip_module \\\n    --with-http_addition_module \\\n    --with-http_sub_module \\\n    --with-http_dav_module \\\n    --with-http_flv_module \\\n    --with-http_mp4_module \\\n    --with-http_gunzip_module \\\n    --with-http_gzip_static_module \\\n    --with-http_random_index_module \\\n    --with-http_secure_link_module \\\n    --with-http_stub_status_module \\\n    --with-mail \\\n    --with-mail_ssl_module \\\n    --with-file-aio\n\n$ gmake && gmake install\n```\n\n- [OpenResty® Linux 包](https://openresty.org/cn/linux-packages.html)\n","source":"_posts/2018-02-17-linux-install-openresty.md","raw":"---\ntitle: Linux 安装 openresty\ntags:\n  - linux\ndate: 2018-02-17 21:19:33\n---\n\n\nLinux 系统在安装 openresty 时，无法直接用 `yum, apt` 等安装包工具，需要手动添加 openresty 的仓库。\n\n<!-- more --><!-- toc -->\n## Ubuntu\n### 安装\n```bash\n# 导入我们的 GPG 密钥：\nwget -qO - https://openresty.org/package/pubkey.gpg | sudo apt-key add -\n\n# 安装 add-apt-repository 命令\n# （之后你可以删除这个包以及对应的关联包）\nsudo apt-get -y install software-properties-common\n\n# 添加我们官方 official APT 仓库：\nsudo add-apt-repository -y \"deb http://openresty.org/package/ubuntu $(lsb_release -sc) main\"\n\n# 更新 APT 索引：\nsudo apt-get update\n# 然后就可以像下面这样安装软件包，比如 openresty：\nsudo apt-get install openresty\n```\n### 自启动\n修改 `/etc/rc.local` 文件，在 `exit 0` 之前加入\n```bash\n/usr/bin/supervisord\n```\n保存退出，并修改权限\n```bash\nchmod +x /etc/rc.local\n```\n## CentOS\n### 安装\n```bash\n# 添加仓库\nsudo yum install yum-utils\nsudo yum-config-manager --add-repo https://openresty.org/package/centos/openresty.repo\n\n# 然后就可以像下面这样安装软件包，比如 openresty：\nsudo yum install openresty\n```\n### 自启动\n适用 CentOS >= 7 的版本\n新建 `/usr/lib/systemd/system/openresty.service` 文件\n```bash\n[Unit]\nDescription=openresty daemon\n\n[Service]\nType=forking\nPIDFile=/usr/local/openresty/nginx/logs/nginx.pid\nExecStartPre=/usr/local/openresty/nginx/sbin/nginx -t\nExecStart=/usr/local/openresty/nginx/sbin/nginx\nExecReload=/bin/kill -s HUP $MAINPID\nExecStop=/bin/kill -s QUIT $MAINPID\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\n```\n开启自启动\n```bash\nsystemctl enable openresty\n```\n查看启动状态\n```bash\nsystemctl status openresty\n```\n\n## 手动编译\n如果服务器重度依赖 Nginx 来做请求判断，那最好还是用编译的方式，`yum, apt` 安装的方式模块依赖非常有限，并不方便更改。\n\n安装依赖\n```bash\nyum -y install pcre pcre-devel openssl openssl-devel\n```\n从 [download](https://openresty.org/cn/download.html) 页面找到最新版，或者你想要的版本\n```bash\n$ wget https://openresty.org/download/openresty-1.13.6.1.tar.gz\n$ tar -zxvf openresty-1.13.6.1.tar.gz\n$ cd openresty-1.13.6.1\n$ ./configure --user=nginx --group=nginx \\\n    --with-http_ssl_module \\\n    --with-http_realip_module \\\n    --with-http_addition_module \\\n    --with-http_sub_module \\\n    --with-http_dav_module \\\n    --with-http_flv_module \\\n    --with-http_mp4_module \\\n    --with-http_gunzip_module \\\n    --with-http_gzip_static_module \\\n    --with-http_random_index_module \\\n    --with-http_secure_link_module \\\n    --with-http_stub_status_module \\\n    --with-mail \\\n    --with-mail_ssl_module \\\n    --with-file-aio\n\n$ gmake && gmake install\n```\n\n- [OpenResty® Linux 包](https://openresty.org/cn/linux-packages.html)\n","slug":"linux-install-openresty","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7j008x5gqo2pwc8xe4"},{"title":"JSON5 更舒服的 JSON 格式","date":"2018-02-18T21:32:08.000Z","_content":"\n\n> JSON is an excellent data format, but we think it can be better\n\n<!-- more --><!-- toc -->\n## 什么是 JSON5\n[JSON5](http://json5.org/) 是对 JSON 的一种推荐扩展，旨在使人类更易于手动编写和维护。 它通过直接从 ECMAScript 5 添加一些最小的语法功能来实现这一点。\n\nJSON5 仍然是 JavaScript 的严格子集，不添加任何新的数据类型，并且可以处理所有现有的 JSON 内容。\n\n先通过一个例子看看 JSON5 的结构\n```javascript\n{\n\tfoo: '11.1.5，bar'],\n\twhile: true,\n\n\tthis: 'is a \\\nmulti-line string',\n\n\t// this is an inline comment\n\there: 'is another', // inline comment\n\n\t/* this is a block comment\n\t   that continues on another line */\n\n\thex: 0xDEADbeef,\n\thalf: .5,\n\tdelta: +10,\n\tto: Infinity,   // and beyond!\n\n\tfinally: 'a trailing comma',\n\toh: [\n\t\t\"we shouldn't forget\",\n\t\t'arrays can have',\n\t\t'trailing commas too',\n\t],\n    'gulp-jshint': \"^2.0.0\",\n}\n```\n\n由此我们可以来讨论下它与 JSON 格式的区别\n- `key` 只要是有效的标识符，则可以不加引号。即使是 ES5 中的保留关键字\n- `key-value` 都可以使用单引号\n- 对象和数组尾巴都可跟着逗号\n- 字符串可以是多行的，只要加上反斜杠\n- 数字可以是十六进制（基数为16）／以小数点开头或结尾／包括Infinity，-Infinity，NaN和-NaN／以明确的加号开始。\n- 允许使用注视，单行多行都可以\n\nJSON5 更像 Javascript 对象了，就像开始说的，它更适合人们编写了。但是它并不是 JSON 官方的扩展，所以需要 `json5` 作为文件扩展名，下面的 `package.json5` 是现在普遍的写法。\n\n```javascript\n// This file is written in JSON5 syntax, naturally, but npm needs a regular\n// JSON file, so compile via `npm run build`. Be sure to keep both in sync!\n\n{\n\tname: 'json5',\n\tversion: '0.5.0',\n\tdescription: 'JSON for the ES5 era.',\n\tkeywords: ['json', 'es5'],\n\tauthor: 'Aseem Kishore <aseem.kishore@gmail.com>',\n\tcontributors: [\n\t\t// TODO: Should we remove this section in favor of GitHub's list?\n\t\t// https://github.com/json5/json5/contributors\n\t\t'Max Nanasy <max.nanasy@gmail.com>',\n\t\t'Andrew Eisenberg <andrew@eisenberg.as>',\n\t\t'Jordan Tucker <jordanbtucker@gmail.com>',\n\t],\n\tmain: 'lib/json5.js',\n\tbin: 'lib/cli.js',\n\tfiles: [\"lib/\"],\n\tdependencies: {},\n\tdevDependencies: {\n\t\tgulp: \"^3.9.1\",\n\t\t'gulp-jshint': \"^2.0.0\",\n\t\tjshint: \"^2.9.1\",\n\t\t'jshint-stylish': \"^2.1.0\",\n\t\tmocha: \"^2.4.5\"\n\t},\n\tscripts: {\n\t\tbuild: 'node ./lib/cli.js -c package.json5',\n\t\ttest: 'mocha --ui exports --reporter spec',\n\t\t\t// TODO: Would it be better to define these in a mocha.opts file?\n\t},\n\thomepage: 'http://json5.org/',\n\tlicense: 'MIT',\n\trepository: {\n\t\ttype: 'git',\n\t\turl: 'https://github.com/json5/json5',\n\t},\n}\n```\n\n## 使用\nNode\n```bash\n$ yarn add json5\n```\n```javascript\nvar JSON5 = require('json5');\n```\nbrowser\n```javascript\n<script src=\"json5.js\"></script>\n```\n转换\n```javascript\nvar obj = JSON5.parse('{unquoted:\"key\",trailing:\"comma\",}');\nvar str = JSON5.stringify(obj);\n```\n","source":"_posts/2018-02-18-json5.md","raw":"---\ntitle: JSON5 更舒服的 JSON 格式\ntags:\n  - javascript\ndate: 2018-02-18 21:32:08\n---\n\n\n> JSON is an excellent data format, but we think it can be better\n\n<!-- more --><!-- toc -->\n## 什么是 JSON5\n[JSON5](http://json5.org/) 是对 JSON 的一种推荐扩展，旨在使人类更易于手动编写和维护。 它通过直接从 ECMAScript 5 添加一些最小的语法功能来实现这一点。\n\nJSON5 仍然是 JavaScript 的严格子集，不添加任何新的数据类型，并且可以处理所有现有的 JSON 内容。\n\n先通过一个例子看看 JSON5 的结构\n```javascript\n{\n\tfoo: '11.1.5，bar'],\n\twhile: true,\n\n\tthis: 'is a \\\nmulti-line string',\n\n\t// this is an inline comment\n\there: 'is another', // inline comment\n\n\t/* this is a block comment\n\t   that continues on another line */\n\n\thex: 0xDEADbeef,\n\thalf: .5,\n\tdelta: +10,\n\tto: Infinity,   // and beyond!\n\n\tfinally: 'a trailing comma',\n\toh: [\n\t\t\"we shouldn't forget\",\n\t\t'arrays can have',\n\t\t'trailing commas too',\n\t],\n    'gulp-jshint': \"^2.0.0\",\n}\n```\n\n由此我们可以来讨论下它与 JSON 格式的区别\n- `key` 只要是有效的标识符，则可以不加引号。即使是 ES5 中的保留关键字\n- `key-value` 都可以使用单引号\n- 对象和数组尾巴都可跟着逗号\n- 字符串可以是多行的，只要加上反斜杠\n- 数字可以是十六进制（基数为16）／以小数点开头或结尾／包括Infinity，-Infinity，NaN和-NaN／以明确的加号开始。\n- 允许使用注视，单行多行都可以\n\nJSON5 更像 Javascript 对象了，就像开始说的，它更适合人们编写了。但是它并不是 JSON 官方的扩展，所以需要 `json5` 作为文件扩展名，下面的 `package.json5` 是现在普遍的写法。\n\n```javascript\n// This file is written in JSON5 syntax, naturally, but npm needs a regular\n// JSON file, so compile via `npm run build`. Be sure to keep both in sync!\n\n{\n\tname: 'json5',\n\tversion: '0.5.0',\n\tdescription: 'JSON for the ES5 era.',\n\tkeywords: ['json', 'es5'],\n\tauthor: 'Aseem Kishore <aseem.kishore@gmail.com>',\n\tcontributors: [\n\t\t// TODO: Should we remove this section in favor of GitHub's list?\n\t\t// https://github.com/json5/json5/contributors\n\t\t'Max Nanasy <max.nanasy@gmail.com>',\n\t\t'Andrew Eisenberg <andrew@eisenberg.as>',\n\t\t'Jordan Tucker <jordanbtucker@gmail.com>',\n\t],\n\tmain: 'lib/json5.js',\n\tbin: 'lib/cli.js',\n\tfiles: [\"lib/\"],\n\tdependencies: {},\n\tdevDependencies: {\n\t\tgulp: \"^3.9.1\",\n\t\t'gulp-jshint': \"^2.0.0\",\n\t\tjshint: \"^2.9.1\",\n\t\t'jshint-stylish': \"^2.1.0\",\n\t\tmocha: \"^2.4.5\"\n\t},\n\tscripts: {\n\t\tbuild: 'node ./lib/cli.js -c package.json5',\n\t\ttest: 'mocha --ui exports --reporter spec',\n\t\t\t// TODO: Would it be better to define these in a mocha.opts file?\n\t},\n\thomepage: 'http://json5.org/',\n\tlicense: 'MIT',\n\trepository: {\n\t\ttype: 'git',\n\t\turl: 'https://github.com/json5/json5',\n\t},\n}\n```\n\n## 使用\nNode\n```bash\n$ yarn add json5\n```\n```javascript\nvar JSON5 = require('json5');\n```\nbrowser\n```javascript\n<script src=\"json5.js\"></script>\n```\n转换\n```javascript\nvar obj = JSON5.parse('{unquoted:\"key\",trailing:\"comma\",}');\nvar str = JSON5.stringify(obj);\n```\n","slug":"json5","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7k008z5gqof9ntgi59"},{"title":"Flask 配置 logger","date":"2018-02-19T20:54:21.000Z","_content":"\n\n在 Flask 中配置 logger 用到的 Python 中原生的 logging 模块\n<!-- more -->\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport logging\nimport logging.handlers\nfrom logging import Formatter\n\nfrom flask import Flask\n\napp = Flask(__name__)\n\n# 日志格式化配置\nfmt = '[%(asctime)s] [%(filename)s:%(lineno)d\\t] [%(levelname)s] '\\\n        '[%(url)s] %(message)s '\nfmt = RequestFormatter(fmt)\nstream_handler = logging.StreamHandler()\nstream_handler.setFormatter(fmt)\napp.logger.addHandler(stream_handler)\napp.logger.setLevel(logging.DEBUG)\n\n# rotating file 配置\nfile_handler = logging.handlers.RotatingFileHandler(\n    'log/tmd.log', maxBytes=104857600, backupCount=20\n)\nfile_handler.setFormatter(fmt)\napp.logger.addHandler(file_handler)\n\napp.logger.debug('Hello World')\n```\n更多的格式化[参数](https://docs.python.org/2/library/logging.html#logrecord-attributes)\n","source":"_posts/2018-02-19-flask-log.md","raw":"---\ntitle: Flask 配置 logger\ntags:\n  - python\n  - flask\ndate: 2018-02-19 20:54:21\n---\n\n\n在 Flask 中配置 logger 用到的 Python 中原生的 logging 模块\n<!-- more -->\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport logging\nimport logging.handlers\nfrom logging import Formatter\n\nfrom flask import Flask\n\napp = Flask(__name__)\n\n# 日志格式化配置\nfmt = '[%(asctime)s] [%(filename)s:%(lineno)d\\t] [%(levelname)s] '\\\n        '[%(url)s] %(message)s '\nfmt = RequestFormatter(fmt)\nstream_handler = logging.StreamHandler()\nstream_handler.setFormatter(fmt)\napp.logger.addHandler(stream_handler)\napp.logger.setLevel(logging.DEBUG)\n\n# rotating file 配置\nfile_handler = logging.handlers.RotatingFileHandler(\n    'log/tmd.log', maxBytes=104857600, backupCount=20\n)\nfile_handler.setFormatter(fmt)\napp.logger.addHandler(file_handler)\n\napp.logger.debug('Hello World')\n```\n更多的格式化[参数](https://docs.python.org/2/library/logging.html#logrecord-attributes)\n","slug":"flask-log","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7m00915gqo1ubbst8s"},{"title":"Python 中调用 Javascript 代码","date":"2018-02-02T09:26:58.000Z","_content":"\n\n[PyExecJS](https://github.com/doloopwhile/PyExecJS) 提供了 Javascript 的运行环境，可以让 Python 执行 Javascript 代码\n\n<!-- more --><!-- toc -->\n## 下载\n```bash\n$ pip install PyExecJS\n```\n## 例子\n这是一个官方的例子\n```python\n>>> import execjs\n>>> execjs.eval(\"'red yellow blue'.split(' ')\")\n['red', 'yellow', 'blue']\n>>> ctx = execjs.compile(\"\"\"\n            function add(x, y) {\n                return x + y;\n            }\n        \"\"\")\n>>> ctx.call(\"add\", 1, 2)\n3\n```\n使用起来很简单，自己编写方法时，只需要先编译就可以直接调用自定义函数。\n\n不过单纯的调用 JS 的场景并不多，只是这样的话，还不如直接写 Python 代码，更有用\n处的是在 Node 环境中\n\n## 调用 Node\n假设我有一个压缩 JS 的工具要实现，我又不想单独搞一套 Node 的线上环境，这时候我\n们就可以直接在 Python 中调用。\n\n首先由 `index.js` 文件实现功能\n```java\nvar uglifyjs = require('uglify-js');\n\nconst test = (text) => {\n    return uglifyjs.minify(text);\n}\n```\n接着创建 Python 文件 `app.py`\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport os\nimport execjs\nimport json\n\nos.environ[\"EXECJS_RUNTIME\"] = \"Node\"\nos.environ[\"NODE_PATH\"] = os.getcwd()+\"/node_modules\"\n\nf = open(os.getcwd() + \"/index.js\")\ntext = f.read()\nparser = execjs.compile(text)\n\nif __name__ == \"__main__\":\n    obj = parser.call(\"test\", 'function add(first, second) { return first + second;    }')\n    print(obj)  # {'code': 'function add(n,d){return n+d}'}\n```\n执行 `app.py` 即可\n\n在上面的例子中\n```python\nos.environ[\"EXECJS_RUNTIME\"] = \"Node\"\nos.environ[\"NODE_PATH\"] = os.getcwd()+\"/node_modules\"\n```\n这两行起到关键作用，指明 `runtime` 为 Node，并将 `node_modules` 目录加入到环境\n变量中，其他操作就都跟 JS 一样了。\n上述例子完成 DEMO 在 [GitHub](https://github.com/wxnacy/study/tree/master/python/pyexecjs_demo) 中\n","source":"_posts/2018-02-02-pyexecjs.md","raw":"---\ntitle: Python 中调用 Javascript 代码\ntags:\n  - python\ndate: 2018-02-02 09:26:58\n---\n\n\n[PyExecJS](https://github.com/doloopwhile/PyExecJS) 提供了 Javascript 的运行环境，可以让 Python 执行 Javascript 代码\n\n<!-- more --><!-- toc -->\n## 下载\n```bash\n$ pip install PyExecJS\n```\n## 例子\n这是一个官方的例子\n```python\n>>> import execjs\n>>> execjs.eval(\"'red yellow blue'.split(' ')\")\n['red', 'yellow', 'blue']\n>>> ctx = execjs.compile(\"\"\"\n            function add(x, y) {\n                return x + y;\n            }\n        \"\"\")\n>>> ctx.call(\"add\", 1, 2)\n3\n```\n使用起来很简单，自己编写方法时，只需要先编译就可以直接调用自定义函数。\n\n不过单纯的调用 JS 的场景并不多，只是这样的话，还不如直接写 Python 代码，更有用\n处的是在 Node 环境中\n\n## 调用 Node\n假设我有一个压缩 JS 的工具要实现，我又不想单独搞一套 Node 的线上环境，这时候我\n们就可以直接在 Python 中调用。\n\n首先由 `index.js` 文件实现功能\n```java\nvar uglifyjs = require('uglify-js');\n\nconst test = (text) => {\n    return uglifyjs.minify(text);\n}\n```\n接着创建 Python 文件 `app.py`\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport os\nimport execjs\nimport json\n\nos.environ[\"EXECJS_RUNTIME\"] = \"Node\"\nos.environ[\"NODE_PATH\"] = os.getcwd()+\"/node_modules\"\n\nf = open(os.getcwd() + \"/index.js\")\ntext = f.read()\nparser = execjs.compile(text)\n\nif __name__ == \"__main__\":\n    obj = parser.call(\"test\", 'function add(first, second) { return first + second;    }')\n    print(obj)  # {'code': 'function add(n,d){return n+d}'}\n```\n执行 `app.py` 即可\n\n在上面的例子中\n```python\nos.environ[\"EXECJS_RUNTIME\"] = \"Node\"\nos.environ[\"NODE_PATH\"] = os.getcwd()+\"/node_modules\"\n```\n这两行起到关键作用，指明 `runtime` 为 Node，并将 `node_modules` 目录加入到环境\n变量中，其他操作就都跟 JS 一样了。\n上述例子完成 DEMO 在 [GitHub](https://github.com/wxnacy/study/tree/master/python/pyexecjs_demo) 中\n","slug":"pyexecjs","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7n00935gqoy2m66irv"},{"title":"Javascript replace() 方法","date":"2018-02-20T18:44:57.000Z","_content":"\n\nreplace() 方法用于在字符串中用一些字符替换另一些字符，或替换一个与正则表达式匹配的子串。\n\n<!-- more --><!-- toc -->\n## 使用\n```java\nstringObject.replace(regexp/substr,newSubstr/function)\n\n// regexp/substr 必需。规定子字符串或要替换的模式的 RegExp 对象。\n// 请注意，如果该值是一个字符串，则将它作为要检索的直接量文本模式，而不是首先被转换为 RegExp 对象。\n\n// newSubstr 必需。一个字符串值。规定了替换文本或生成替换文本的函数。\n\n// function 一个函数，用于创建新的子字符串以用于替换给定的正则表达式或substr的匹配。\n```\nnewSubstr 中如果有 $ 字符具有特定的含义。如下所示，它说明从模式匹配得到的字符串将用于替换\n```bash\n$1、$2、...、$99    # 与 regexp 中的第 1 到第 99 个子表达式相匹配的文本。\n$&                  # 与 regexp 相匹配的子串。\n$`                  # 位于匹配子串左侧的文本。\n$'                  # 位于匹配子串右侧的文本。\n$$                  # 直接量符号。'`\n```\n\n## 例子\n替换第一个\n```javascript\nvar str=\"Visit Microsoft!\"\ndocument.write(str.replace(/Microsoft/, \"W3School\"))\n```\n```html\nVisit W3School!\n```\n\n全局替换\n```javascript\nvar str=\"Welcome to Microsoft! \"\nstr=str + \"We are proud to announce that Microsoft has \"\nstr=str + \"one of the largest Web Developers sites in the world.\"\n\ndocument.write(str.replace(/Microsoft/g, \"W3School\"))\n```\n```html\nWelcome to W3School! We are proud to announce that W3School\nhas one of the largest Web Developers sites in the world.\n```\n\n全局替换\n```javascript\nvar str=\"Welcome to Microsoft! \"\nstr=str + \"We are proud to announce that Microsoft has \"\nstr=str + \"one of the largest Web Developers sites in the world.\"\n\ndocument.write(str.replace(/Microsoft/g, \"W3School\"))\n```\n```html\nWelcome to W3School! We are proud to announce that W3School\nhas one of the largest Web Developers sites in the world.\n```\n\n首字母转大写\n```java\nname = 'aaa bbb ccc';\nuw=name.replace(/\\b\\w+\\b/g, function(word){\n        return word.substring(0,1).toUpperCase()+word.substring(1);\n    }\n);\n\ndocument.write(uw);\n```\n```bash\nAaa Bbb Ccc\n```\n\n- [JavaScript replace() 方法](http://www.w3school.com.cn/jsref/jsref_replace.asp)\n- [String.prototype.replace()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace)\n","source":"_posts/2018-02-20-javascript-replace.md","raw":"---\ntitle: Javascript replace() 方法\ntags:\n  - javascript\ndate: 2018-02-20 18:44:57\n---\n\n\nreplace() 方法用于在字符串中用一些字符替换另一些字符，或替换一个与正则表达式匹配的子串。\n\n<!-- more --><!-- toc -->\n## 使用\n```java\nstringObject.replace(regexp/substr,newSubstr/function)\n\n// regexp/substr 必需。规定子字符串或要替换的模式的 RegExp 对象。\n// 请注意，如果该值是一个字符串，则将它作为要检索的直接量文本模式，而不是首先被转换为 RegExp 对象。\n\n// newSubstr 必需。一个字符串值。规定了替换文本或生成替换文本的函数。\n\n// function 一个函数，用于创建新的子字符串以用于替换给定的正则表达式或substr的匹配。\n```\nnewSubstr 中如果有 $ 字符具有特定的含义。如下所示，它说明从模式匹配得到的字符串将用于替换\n```bash\n$1、$2、...、$99    # 与 regexp 中的第 1 到第 99 个子表达式相匹配的文本。\n$&                  # 与 regexp 相匹配的子串。\n$`                  # 位于匹配子串左侧的文本。\n$'                  # 位于匹配子串右侧的文本。\n$$                  # 直接量符号。'`\n```\n\n## 例子\n替换第一个\n```javascript\nvar str=\"Visit Microsoft!\"\ndocument.write(str.replace(/Microsoft/, \"W3School\"))\n```\n```html\nVisit W3School!\n```\n\n全局替换\n```javascript\nvar str=\"Welcome to Microsoft! \"\nstr=str + \"We are proud to announce that Microsoft has \"\nstr=str + \"one of the largest Web Developers sites in the world.\"\n\ndocument.write(str.replace(/Microsoft/g, \"W3School\"))\n```\n```html\nWelcome to W3School! We are proud to announce that W3School\nhas one of the largest Web Developers sites in the world.\n```\n\n全局替换\n```javascript\nvar str=\"Welcome to Microsoft! \"\nstr=str + \"We are proud to announce that Microsoft has \"\nstr=str + \"one of the largest Web Developers sites in the world.\"\n\ndocument.write(str.replace(/Microsoft/g, \"W3School\"))\n```\n```html\nWelcome to W3School! We are proud to announce that W3School\nhas one of the largest Web Developers sites in the world.\n```\n\n首字母转大写\n```java\nname = 'aaa bbb ccc';\nuw=name.replace(/\\b\\w+\\b/g, function(word){\n        return word.substring(0,1).toUpperCase()+word.substring(1);\n    }\n);\n\ndocument.write(uw);\n```\n```bash\nAaa Bbb Ccc\n```\n\n- [JavaScript replace() 方法](http://www.w3school.com.cn/jsref/jsref_replace.asp)\n- [String.prototype.replace()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace)\n","slug":"javascript-replace","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7o00955gqoqgyx2mhs"},{"title":"《必然》划线笔记","date":"2018-02-21T19:28:25.000Z","_content":"\n\n作者列举了12个必然会发生的事，这些事情不管历史重新来过多少次都会发生，它并非某个具体的事件，而是一种趋势，比如，智能手机一定会出现，但iphone未必，及时通信一定会出现，但微信未必 这些事情很多已经在实现，有些作者想象的生活或许在明天或者不久的将来就会实现，我们有理由相信它们会实现，因为那是历史的“必然”\n\n<!-- more --><!-- toc -->\n以下记录我在读书过程中的划线\n\n有一种对“必然”的定义借用了经典的“倒带”思想实验。这个实验假定我们把历史倒退回时间的开端，让我们的文明一次又一次地从头再来。强必然性是说，无论我们重复多少次，最终都会出现这样的结果\n\n科技在本质上有所偏好，使得它朝往某种特定方向。在其他条件都相同的前提下，决定科技发展动态的物理原理和数学原理会青睐某些特定的行为。这些偏好仅存在于塑造科技大轮廓的合力中，并不会主宰那些具体而微的实例。\n\n因特网的形态——由网络组成的遍布全球的网络——是一种必然，但我们所采用的因特网的具体实现就不是必然。因特网可能是商业化的，而不是非营利的；它可能是国家的，而不是国际的；它也可能是私密的，而非公开的。长距离传输语音信息的电话系统是必然的，但 iPhone不是；四轮车辆是必然的，但SUV不是；即时信息是必然的，但推特不是。\n\n当我们面对数字领域中极力向前的新科技时，第一反应可能是退回原位。我们会对它加以阻止、禁止、否认，或者至少会让它变得难用无比。（举个例子，当因特网让音乐和电影的复制变得轻而易举时，好莱坞和音乐产业就开始尽其所能来阻止人们复制。但这全然徒劳。他们只是成功地把顾客变成了敌人。）螳臂挡车只会适得其反。任何禁止的做法最多只能暂时有效，从长远来讲则违背了生产力的发展。\n\n一旦洞察，我们就不用采取对立的态度，而是可以因势利导。我们会更深入地理解，为何大规模复制、大规模跟踪以及全面监控会在这里大行其道。我们也会认识到，基于所有制的商业模式正在发生改变；虚拟现实正在成为现实；我们也无法阻止人工智能和机器人改进和创造新的商业，从而抢走我们现有的工作。这或许和我们最初的动机相悖，但我们应当拥抱这些科技的再造和重组。只有与这些科技协作而非阻挠，我们才能最大程度地获取到科技所要给予我们的。\n\n变化是必然的。我们现在承认，一切都是可变的，一切都在变化当中——尽管很多变化并不为人所察觉。\n\n因为自这种流程发明以来，我们已经借助它生成了数以百万计的新产品。正确掌握这种流程，它就能源源不断地带给我们好处。在我们所处的新时代，流程完胜产品。\n\n永无休止的变化是一切人造之物的命运。\n\n新兴技术正在席卷全球，这股迅猛的大潮会潜移默化且持续坚定地改变我们的文化。下述力量将会得到凸显：形成（Becoming）、知化（Cognifying）、流动（Flowing）、屏读（ Screening）、使用（Accessing）、共享（Sharing）、过滤（Filtering）、重混（ Remixing）、互动（Interacting）、追踪（Tracking）、提问（Questioning）以及开始（Beginning）。\n\n世间万物都需要额外的能量和秩序来维持自身，无一例外。\n\n然后，不断变化的数字领域就扑面而来。当你身边的所有东西都在升级的时候，你的数码产品自然也会受到压力，让你对它们进行必要的维护。即使你不太想升级，也必须这么做，因为所有的东西都是如此。这是一场升级军备竞赛。\n\n如果你拒绝进行不断的小升级，那么积累起来的变化会最终变成一项巨大的更新，大到足以带来“创伤”级别的干扰。\n\n无论你使用一样工具的时间有多长，无尽的升级都会把你变成一个菜鸟——也就是说，你会变成笨手笨脚的新用户。在这个“形成”的时代里，所有人都会成为菜鸟。更糟糕的是，我们永远都会是菜鸟，并永远因此保持虚心。\n\n因为进托邦在产生新利益的同时，也在制造几乎同样多的新麻烦。今天的问题来自昨天的成功。而对今天问题的技术解决方案，又会给明天埋下隐患。随着时间流逝，真正的利益便在这种问题与解决方案同时进行的循环扩张背后逐渐积累起来。\n\n答案是：来自受众。参与行为所携带的营养推动普通大众在撰写免费百科全书、制作平光轮胎更换的免费教程，以及分类整理参议院投票这类事情上，投入大量精力和时间。这种模式在越来越多地支撑网络运转。几年前的一项研究发现，只有40%的网络内容是以商业形式创造出来的。支撑人们创造其余部分的，不是责任，就是激情。\n\n那些未来人说得没错。因为从我们现在的角度来看，本世纪前半叶最伟大的网络事物已经出现在我们面前。只不过那些奇迹般的发明都在等着一个狂人以他的卓识远见来点化我们去采摘那些累累果实——这情形，就像是1984年的那些.com域名一样。\n\n那些未来人说得没错。因为在2050年，会有另外一个白胡子老头问你：你能想象在2016年当一个发明家会有多棒吗？那是一片广袤的处女地！你随便找个什么东西，都可以加上人工智能，上传到云里面去。那时的设备里不像现在，传感器成千上百，很少有超过一两个的。那时的期望不多，壁垒很低。成为第一轻而易举。而到那时，未来的人们会感慨：“唉，我们要是意识到那时有多少可能性该多好！”\n\n试着让自己活在30年后看今天，那样很多事情都会成为成功的机遇，然而发现还不够，这个世界永远不缺“发现”，缺的是“行动”\n\n所以真相就是：此时此刻，今天，2016年，就是创业的最佳时机。纵观历史，从来没有哪一天会比今天更适合发明创造。从来没有哪个时代会比当前、当下、此时此刻更有机遇，更加开放，有更低的壁垒、更高的利益风险比、更多的回报和更积极的环境。未来的人们回顾此刻时，会感慨道：“哦，要是活在那时该有多好！”\n\n今天确实是一片广袤的处女地。我们都正在“形成”。这在人类的历史上，是绝无仅有的最佳开始时机。你没迟到。\n\n到了2026年，谷歌的主营产品将不再是搜索，而是人工智能。\n\n到了2005年，投入大量生产的GPU的价格已经与一般商品相当。2009年，吴恩达（Andrew Ng）和斯坦福大学的一个研究团队意识到GPU芯片可以并行运行神经网络。\n\n吴恩达这样解释道：“建设人工智能就像造一艘火箭飞船，需要一个巨大的引擎和许多燃料。飞船的引擎是各种学习型算法，而燃料是我们提供给这些算法的大量数据。”\n\n众所周知，我们的思维方式不擅长做统计，所以我们制造出各种统计技术很强的智能设备，是为了让它们用不同的方式思考。让人工智能替我们开车的一项优势就是，它们不像我们那样容易分心。\n\n后工业化经济将会持续发展。因为每个人的任务之一将是找到、从事并完成将来会成为机器人重复性劳动的新工作。\n\n这将是人类最后的退路\n\n人类和机器之间将形成一种共生关系。人类的工作就是不停地给机器人安排任务，这本身就是一项永远做不完的工作，所以，我们至少还能保留这份“工作”。\n\n1.机器人（电脑）干不了我的工作。【后来】2.好吧，它会许多事情，但我做的事情它不一定都会。【后来】3.好吧，我做的事情它都会，但它常常出故障，这时需要我来处理。【后来】4.好吧，它干常规工作时从不出错，但是我需要训练它学习新任务。【后来】5.  好吧，就让它做我原来的工作吧，那工作本来就不是人该干的。【后来】6.哇，机器人正在干我以前做的工作，我的新工作不仅好玩多了，工资还高！【后来】7.真高兴，机器人（电脑）绝对干不了我现在做的事情。【重复】\n\n未来，你的薪水高低将取决于你能否和机器人默契配合。90%的同事将会是看不见的机器，而没有它们，你的大部分工作将无法完成。\n\n这一切都是必然的。让机器人代替我们从事现在的工作，让我们在它们的帮助下去构想有意义的新工作吧。\n\n很多时候互联网的成本低，在于它的可复制性\n\n如果一样东西可以复制，那么当它接触到互联网之后，就必然会被复制。\n\n永无止境的改进，汇聚成了一条条河流。\n\n然后我就醒悟过来了（我保证别人也和我一样）：如果提前购买一本电子书，它存放的位置和我没有买它时存放的位置是一模一样的（都在云端），区别只是付款和没有付款而已。既然如此，为什么不让它保持未付款状态呢？所以现在，不是半分钟内非要读到不可，我是不会买下一本书的。这种即时购买模式正是实时数据流的自然结果\n\n名词需要变成动词。固定的实体事物需要编程服务。数据不会保持静止，万物如今都要流动成为数据流。\n\n从现实层面来看，这8种无法复制的价值要好过免费。免费是好事，但如果你愿意为它们掏钱，那么这些价值就会比免费更好。我把这些特性称为“原生性”（generative）。原生价值必须是在交易时产生的特性或品质。人们无法复制、克隆、存储具有原生性的事物，也无法仿制和伪造原生性。原生性因实际进行的特定交易而生，独一无二。原生性为免费的复制品增添了价值，从而使它们变成了可以出售的商品。\n\n即时性（Immediacy）——迟早你都会找到自己想要的免费复制品，但是如果生产者能将产品在发布的第一时间，甚至是生产出来的第一时间发送到你的收件箱中，这可是一种原生性资产。许多人会在首映式的时候前去电影院花大价钱看那些以后会通过下载和租赁方式变得免费，或者几乎免费的电影。从非常现实的角度来看，他们花钱购买的并不是电影（电影是“免费的”），而是即时看到最新的电影。\n\n个性化（Personalization）——听普通的演唱会录音或许不用花钱，但如果能买回一张经过特殊音效处理、听起来就像是在你家客厅中录制的唱片的话，那你可能就愿意花大价钱了。这时，你花钱购买的不是演唱会的复制品，而是原生性中的个性化。一本免费的图书也可以经过出版社的个性化编辑，反映出你先前的阅读背景。你所购买的免费电影也许会按照你所希望的那样重新经过了剪辑（没有色情场面，儿童可以观看）。\n\n解释性（Interpretation）——有个老笑话是这么讲的：软件下载免费，用户手册一万美元。但这并不是玩笑。红帽（Red Hat）[插图]和Apache等[插图]一批高度知名的公司就是这么存活下来的。他们为免费的软件提供有偿的技术支持。这些公司只有代码的副本是免费的。但成千上万行的代码只有通过技术支持和技术指导才会对你变得有所价值。\n\n可靠性（Authenticity）——你或许能免费获得一个流行的软件应用，但即便你不需要看说明书，你也得考虑这个软件有没有缺陷、是不是恶意程序或者垃圾软件。这种情况下，你会很高兴地为可靠性付钱。这样，你在使用软件时就会自由自在[插图]，脑袋里不用为别的事情操心。这种情况下，你付钱购买的不是软件的副本，而是软件的可靠性。美国乐队感恩而死（Grateful Dead）[插图]的唱片种类多到几乎无数，但从乐队自己那里买上一张可靠版本的唱片就能省去你不少麻烦。最起码这张唱片里面的歌曲确实是感恩而死乐队自己的作品。\n\n获取权（Accessibility）——拥有往往是件烦人的事情。你得让自己拥有的东西井井有条，与时俱进。如果你拥有的是数字产品的话，还要加上备份的活计。在这个移动的世界里，你又得无时不刻地带着它们。当我们懒懒地订阅云端上的服务时，包括我在内，许多人都乐意付钱给别人来照料我们的“财产”。我或许会拥有一本书，也或许会通过预付费的方式来获得我喜爱的音乐，但我还会付钱给Acme数字仓库（Acme Digital Warehouse），让它为我服务，无论何时无论何地。大多数东西都可以在什么地方免费得到，但很不方便。通过付费服务，我就可以通过一个超级用户界面，在任何设备上随时随地获取这些免费的东西。从某种程度上讲，iTunes[插图]通过云端提供的内容，就是在向你出售获取权。虽然可以从其他地方下载到免费版本，但你还是会为了方便地获取音乐而付费。你花钱购买的不是这些东西，而是简单获取的便利，以及不用再去维护的义务。\n\n实体化（Embodiment）——从根本上看，数字复制品没有实体。阅读一本PDF格式的电子书，我会很开心，但有时候，同样的字句印刷在雪白的棉纸上，再配以皮革质地的封面，也非常诱人，给人感受很棒。游戏玩家们喜欢和好友在网上对战，但不时地，他们也会呼朋引伴地在同一个房间里玩个痛快。\n\n可赞助（patronage）——从本质上讲，热心的受众和爱好者希望为创作者买单。爱好者们喜欢奖励，无论对方是艺术家、音乐家、作家、演员，还是其他创造欣赏价值的创造者，因为这能让爱好者们和倾慕的对象建立联系。\n\n可寻性（Discoverability）——上述7种原生性扎根在创意作品之内，但可寻行是一种适用于许多产品的资产。没人看到的产品没有价值，无论价格贵贱，而未被发掘的佳作更是一文不值。当世界上的图书、歌曲、电影、应用和其他所有事情都以数百万计（其中大部分都是免费的）争夺你的注意力的时候，能被寻找到就具有了价值。而鉴于被创造出来的作品每天都以爆发性的数字增长，能被寻找到就更成了难能之事。爱好者们会用很多方法从百亿千亿的产品中发掘出有价值的作品。他们利用评论、评测和品牌（出版商、厂牌、工作室），而越来越多地则依赖其他爱好者和朋友来推荐好东西。他们也越来越希望为引导买单。\n\n书页是一成不变的——书的每一页会保持不变。无论什么时候，翻开到一本书的固定一页，它都是不变的。这让人感到十分可靠。也就是说，无论参考还是引述，书中某一页的内容都会是一模一样的。版本是一成不变的——无论你手里拿起的书是哪一本，也无论你在任何地方，任何时间购买到了这本书。只要是同一个版本，它们就不会有所不同，所以我们才能分享其中的文字，讨论一本书的内容，而不用担心我们看到的东西是否不同。介质是一成不变的——爱护得当的话，一本书可以保存很长时间（比数字格式多保存几个世纪），而书中的文字不会因为年久发生改变。完成度是一成不变的——一本纸书同时意味着盖棺定论。书中的内容已经终结，是已经完成的东西。以印刷品出现的文学，部分魅力就在于它把自身交付给了纸张，几乎如同誓言一般。而作者的威望，就建立在此之上。\n\n书页是流动的——页面成了一种灵活的单位。从智能眼镜上那微乎其微的屏幕，到一整面墙，内容会流动适应任何可用的空间，它可以适配你喜爱的阅读设备和阅读风格。书页以你为主。版本是流动的——电子书的材料可以变得个性化。如果你是学生，那么你手中的版本或许会解释生词。如果你在阅读一个系列的丛书，那么这本书可以省略掉前情提要，因为你已经读过之前的那一本了。个性化的“我的图书”会在真正意义上为我量身打造。介质是流动的——电子书在云端保存的成本是如此之低，以至于在没有限制的图书馆里保存一本书的费用是“免费”的。而且这本书还能再瞬时间发往地球上的任何地方，无论发送时间如何，接受对象是谁。改进是流动的——电子书的内容可以随时更正，也可以逐步改进。和一块毫无生气的石头相比，永无更新止境的电子书（至少在理想状态下）更像是一种动物。而这种生机勃勃的流动性也鼓舞我们成为了创造者和读者。\n\n以下就是流动的4个阶段：固定、罕见。最开始的情况，是耗费了大量专业经验创造出来的宝贵产品。这些产品，每一个都如同艺术品一般，完成度高，盈盈独立，通常以高质量产品的形式出售，如此才能补偿创造者付出的艰辛。免费、无所不在。最早的破坏来自于对第一阶段产品的杂乱复制，其量级之大，使得产品变成了日用品。廉价、完美的复制品近乎免费，哪里有需求，就会在哪里开枝散叶。复制品的过度散播会破坏掉既有的经济。流动、分享。第二阶段的破坏是对产品的解构，产品拆散后的每一个原件，都会流动寻找新的用途，并和新的产品绑定在一起。第一阶段的产品现在成为了服务信息流。它分享自云端，变成了财富和创新的平台。开放、变化。前两个阶段引发了第三阶段的解构。强大的服务信息流和既有的“原材料”顺手把成本降低到了一点点，使得业余者只需要很少的专业技能就能创造出新产品和全新品类的产品。创造的地位发生了转变，受众因而成为了艺术家。输出、选择和质量都会突飞猛进。\n\n书籍的命运值得仔细研究，因为在屏读将会转变的众多媒介中，书籍是第一个。屏读首先会改变书籍，然后会改变图书馆；之后，它会给电影和视频动手术；再之后，它会瓦解掉游戏和教育；而最终，屏读将会改变每件事。\n\n这会是一座极其巨大的图书馆。从苏美尔人在泥板上写下楔形文字到现在，人类已经至少“出版”了3.1亿本书，14亿篇文章和论述，1.8亿首歌曲，3.5万亿幅图像，327514部电影， 10亿个小时的视频、电视节目和短片，60万亿个公共网页。这些资料目前全部存放在世界各处的图书馆和档案馆中。它们全部数字化后，数据可以压缩存放到一个50PB大小的硬盘上（以目前的技术水平）。\n\n就像穆里尔·鲁凯泽[插图]所说的那样：“组成宇宙的是故事，而非原子。”\n\n减物质化（Dematerialization）\n优步作为世界上最大的出租车公司，却不拥有任何出租车辆。脸谱网作为世界上最流行的媒体平台，却不创造任何内容。阿里巴巴作为最有价值的零售公司，却没有任何库存。另外，Airbnb[插图]作为世界上最大的短租住宿供应商，却并不拥有任何房产。一些有意思的事情正在发生。”\n\n每一年我使用的东西都要比我实际拥有的多。\n\n对事物的占有不再像曾经那样重要，而对事物的使用则比以往更加重要。\n\n这种从“拥有你所购买的”到“使用你所订阅的”的转变推翻了一些传统。所有权是随意的、不稳定的。如果有更好的东西出现，那就抓住新的丢掉旧的。\n\n尽管这些想法会继续兴旺发展下去，但绝大多数这种公司都无法成功。由于初创费用较低，去中心化的生意是很容易开办起来的。因为如果这些创新公司的商业模式被证明是有效的，那么较成熟的公司就会准备效仿。像Hertz这样的汽车租赁公司没有理由不去租汽车给自由职业者，出租车公司也没有理由不去做些与优步相似的业务。但无论怎样，重新整合的利益会继续蓬勃发展和壮大。\n\n6年前，一帮声名狼藉之徒想利用现金的匿名性在网上贩卖毒品，于是便想找到一种没有政府插手的货币。而一些拥护人权的可敬人士也在苦苦寻找一种货币系统，使其可以在那些腐败或镇压民众的政府之外，以及那些压根不存在政府的地方发生效力。最终，他们共同想出来的这种货币就是比特币。\n\n比特币是一种完全去中心化、分布式的货币，它无需任何一家中央银行来为其准确性、强制性与调节性负责。\n\n无论比特币本身是否成功，它的区块链创新都会促进点对点信任系统的发展，而这将进一步推动众多机构与行业的去中心化。\n\n区块链已经脱离开比特币，成为一种互联网从业者新的追逐方向，不管你是不是真的懂，如果你不知道这个词，那就已经out了\n\n无论比特币本身是否成功，它的区块链创新都会促进点对点信任系统的发展，而这将进一步推动众多机构与行业的去中心化。 \n\n区块链的一个重要方面还在于它是一种民众公有（public commons）。没有一个人真正拥有它，因为每个人都拥有它。作为一个变得数字化的发明，它也在倾向于变得共享；在它变得共享的同时，它也在变得无主化（ownerless）。当每一个人都“拥有”它时，也就没有人拥有它。\n\n我使用道路，但我并不拥有它。我可以随时驶入全世界99%的道路和高速公路（当然也有些例外），因为它们是民众公有。我们通过向当地政府缴纳税费来获取道路的使用权。就我能想到的所有的目的而言，全世界的道路都在为我服务，就好像我拥有它们一样——甚至比我拥有它们还要好，因为我无需负责维护工作。大多数公共基础设施都带给我们这种“胜过拥有”的利益。\n\n平台协同（Platform Synergy）长期以来，有两种基本方式来组织人们进行工作，即企业和市场。\n\n平台是由一个企业创建的基地，使得其他企业可以在其基础上创建产品和服务。它既不是市场也不是企业，而是某种新的事物。\n\n减物质化、去中心化和大量的沟通会共同催生出更多的平台。平台是提供服务的工厂，而服务则偏爱使用权胜于所有权。\n\n云端也具有弹性，这意味着可以通过在其网络中添加或减少与其连接的电脑数量，来即时地扩大或缩小云端。并且由于它们固有的备用与分布的特性，云端是现存机器中可靠性最高的。它们可以表现出著名的5个9的（99.999%）的近乎完美的服务。\n\n云端的一个核心优势在于，它变得越大，我们的设备就变得越小巧、越轻薄。云端负责所有的工作，而我们手里的设备只是提供对接云端工作的一个窗口。\n\n由于生活在云端里，谷歌将来便可以轻易地将基于云计算的人工智能应用到我们的文字中。除了自动检查拼写问题和关键语法，Google可能也会对语句中的事实陈述进行核查，使用的则是他们称之为“知识型信任”（Knowledge-based Trust，KBT）的新型事实检验员。\n\n我”包含了大量不同的东西！借助机器智能和人工智能，所有的这些混合体将进一步发展。我将不仅仅是“我+”（Me Plus），还是“我们+”（We Plus）。\n\n云端给我们提供了令人惊异的可靠性计算、极快的速度以及不断拓展的深度，而使用者却无需承担任何维护的负担。任何一个拥有电脑的人都知道那种麻烦：它们占空间，需要持续的专业照料，而且很快就会过时淘汰。谁想拥有他们自己的电脑？这个问题的答案越来越多地变成：“没有人愿意”。就像从电网买电一样，你并不会想拥有自己的发电站。\n\n但可以明确的是，亚马逊的云端、谷歌的云端、脸谱网的云端以及所有其他企业的云端将会交织成一个巨大的云端——大云端（The Cloud），而且对于每个使用者或公司而言，这个大云端运行起来就是一个独立的云端。对抗这一融合过程的阻力之一，就是互联云需要各个商业云端共享它们的数据（一个云端就是一个连接数据的网络），而现在人们倾向于把数据当作黄金一样地储备。数据储备被视作一种竞争优势，而免费共享数据则被法律所阻止，所以在企业学会如何创造性地、富有成效地、负责任地共享数据之前，还有很多年（也许是几十年？）的路程要走。\n\n我们知道一个去中心化的云端可以发挥作用，是因为有一个事例证明了这一点，那就是 2014年发生在中国香港的学生抗议活动。为了逃避中国政府在香港市民民通信上施加的监视，香港学生想出了一种传递信息的方式，这一方式无需把信息传到一个手机信号塔，也不用通过微博、微信或电子邮箱的企业服务器。取而代之的是，他们在各自手机上安装了一个叫作FireChat的App。两部装有FireChat的手机可以通过wifi广播进行直接的联系，而无需将信息上传至一个手机信号基站。更重要的是，两个手机中的任何一个都可以将这个信息传给第三个装有FireChat的手机。继续增加装有FireChat的手机，你就可以得到一个所有手机完全连接的网络。若某部手机并非信息接收者，它便会作为一个中继站，将信息传至目标接收者那里。这一紧密联系的点对点网络（被称作无线网格网络）并不高效，却能够发挥作用。这种不太灵活的传播方式正是因特网在某一层面上的运行方式，也是因特网之所以如此强劲的原因。成功组建出FireChat构成的无线网格网络，意味着学生们创立了一个无人拥有的广播云端（因此它才难以被监控）。通过完全依靠其自身设备构成的无线网格网络，他们运行了一个避开中国政府监管的通信系统，时间长达几个月。同样的组建形式可以再一步扩大化，从而运行于各种云端。\n\n只有农民才需要一个谷仓来储藏他的财富。数字原住民[插图]是自由地奔向前方的，他们不会承受拥有事物所带来的负累，可以自由地探索未知的世界。使用而非拥有事物，使我可以保持敏捷和精力充沛，时刻为即将出现的未知事物做好准备。\n\n知识共享”（Creative Commons）这种利于共享的版权许可协议已被人们广泛接受，它鼓励人们准许他人合法地使用和改进自己的图像、文本或音乐，而无需额外许可。换句话说，内容的共享和摘取是新的默认模式。\n\n新兴的数字社会主义不同于老式的社会主义，它借助网络通信技术运行在没有边界的互联网上，催生了贯穿全球一体化经济的无形服务。它旨在提升个人的自主性，反对中央集权。它是去中心化的极致表现。\n\n最初的谷歌之所以成功击败了当时搜索引擎行业的领头者，就是利用了由业余网页制作者所创建的各种链接。每当有人在网站上添加超链接时，谷歌就会把这一链接计作被链接网页的“信任票”，并根据这一票为由此伸向网络的所有链接赋予权重。若链向某个特定页面（A）的网页也链向其他有可靠网页链入的页面，那么该特定页面（A）在谷歌的搜索结果中就会获得较高的可靠性排位。这一奇特的循环证据链并非由谷歌建立，而是由数百万个网页上共享的公共链接所构成。谷歌是第一家从消费者点击的共享搜索结果中获利的公司。一位普通用户的每次点击都在为那个网页的有效性进行投票。所以仅需使用谷歌，粉丝们就会将谷歌变得越来越好，并且具有更大的经济价值。\n\n纽约大学经济学家保罗·罗默（Paul Romer）专门研究经济增长理论，他认为真正可持续的经济增长并非源于新资源的发现和利用，而是源于将已有的资源重新安排后使其产生更大的价值。增长来源于重混。圣塔菲研究所的经济学家布莱恩·亚瑟（Brain Arthur）专门研究技术增长的动态过程，他认为“所有的新技术都源自已有技术的组合”\n\n在他的《星球大战》系列电影中，卢卡斯开创了一种新的电影拍摄方法，它与图书、绘画的创作有着更多的相似之处，而与传统电影拍摄手法则相去较远。在传统的电影拍摄手法中，影片的拍摄计划依据场景制定，所有场景都会被拍摄（通常不止一次），通过重复大量使用这些场景，最终组合成一部电影。有时，如果可供使用的胶片不能很好地阐述故事，那么导演必须返回影棚，补拍一些镜头。然而，借助数字技术带来的新屏幕流动性，一个电影场景具有更大的可塑性：就像作者笔下的一个段落可以被反复修改。无需再去捕捉场景（就像是照相取景），而是逐步地叠加场景，就像绘画一样。只需向一个大致的动作框架上添加一层层的视觉、听觉细节素材，混合出的效果就可以不断变化，并且可以一直再进行修改。乔治·卢卡斯拍摄的《星球大战》系列电影中的最后一部就是以这种与作者创作类似的方式进行层层效果添加的。他在绿幕房间里拍摄了演员的动作，即“两名绝地武士挥舞长剑碰撞——没有背景”，然后在这个框架上铺垫上一个热闹集市的复杂场景，同时还有一些细小的视觉素材。光剑的效果和其他效果则是后期以数字形式一层一层绘制上去的。以这种方式，逼真的雨水、火焰和烟雾可以一层层地添加到一个粗略的框架上。这一过程的便利简洁就像是卢卡斯在写剧本时可能会写上一句“这是一个风雨交加的黑夜”。最终，电影中的每个画面几乎都以这种方式进行过修改。本质上，一部数字电影就是这样一个像素一个像素地“写”出来的。\n","source":"_posts/2018-02-21-biran.md","raw":"---\ntitle: 《必然》划线笔记\ntags:\n  - 杂文\ndate: 2018-02-21 19:28:25\n---\n\n\n作者列举了12个必然会发生的事，这些事情不管历史重新来过多少次都会发生，它并非某个具体的事件，而是一种趋势，比如，智能手机一定会出现，但iphone未必，及时通信一定会出现，但微信未必 这些事情很多已经在实现，有些作者想象的生活或许在明天或者不久的将来就会实现，我们有理由相信它们会实现，因为那是历史的“必然”\n\n<!-- more --><!-- toc -->\n以下记录我在读书过程中的划线\n\n有一种对“必然”的定义借用了经典的“倒带”思想实验。这个实验假定我们把历史倒退回时间的开端，让我们的文明一次又一次地从头再来。强必然性是说，无论我们重复多少次，最终都会出现这样的结果\n\n科技在本质上有所偏好，使得它朝往某种特定方向。在其他条件都相同的前提下，决定科技发展动态的物理原理和数学原理会青睐某些特定的行为。这些偏好仅存在于塑造科技大轮廓的合力中，并不会主宰那些具体而微的实例。\n\n因特网的形态——由网络组成的遍布全球的网络——是一种必然，但我们所采用的因特网的具体实现就不是必然。因特网可能是商业化的，而不是非营利的；它可能是国家的，而不是国际的；它也可能是私密的，而非公开的。长距离传输语音信息的电话系统是必然的，但 iPhone不是；四轮车辆是必然的，但SUV不是；即时信息是必然的，但推特不是。\n\n当我们面对数字领域中极力向前的新科技时，第一反应可能是退回原位。我们会对它加以阻止、禁止、否认，或者至少会让它变得难用无比。（举个例子，当因特网让音乐和电影的复制变得轻而易举时，好莱坞和音乐产业就开始尽其所能来阻止人们复制。但这全然徒劳。他们只是成功地把顾客变成了敌人。）螳臂挡车只会适得其反。任何禁止的做法最多只能暂时有效，从长远来讲则违背了生产力的发展。\n\n一旦洞察，我们就不用采取对立的态度，而是可以因势利导。我们会更深入地理解，为何大规模复制、大规模跟踪以及全面监控会在这里大行其道。我们也会认识到，基于所有制的商业模式正在发生改变；虚拟现实正在成为现实；我们也无法阻止人工智能和机器人改进和创造新的商业，从而抢走我们现有的工作。这或许和我们最初的动机相悖，但我们应当拥抱这些科技的再造和重组。只有与这些科技协作而非阻挠，我们才能最大程度地获取到科技所要给予我们的。\n\n变化是必然的。我们现在承认，一切都是可变的，一切都在变化当中——尽管很多变化并不为人所察觉。\n\n因为自这种流程发明以来，我们已经借助它生成了数以百万计的新产品。正确掌握这种流程，它就能源源不断地带给我们好处。在我们所处的新时代，流程完胜产品。\n\n永无休止的变化是一切人造之物的命运。\n\n新兴技术正在席卷全球，这股迅猛的大潮会潜移默化且持续坚定地改变我们的文化。下述力量将会得到凸显：形成（Becoming）、知化（Cognifying）、流动（Flowing）、屏读（ Screening）、使用（Accessing）、共享（Sharing）、过滤（Filtering）、重混（ Remixing）、互动（Interacting）、追踪（Tracking）、提问（Questioning）以及开始（Beginning）。\n\n世间万物都需要额外的能量和秩序来维持自身，无一例外。\n\n然后，不断变化的数字领域就扑面而来。当你身边的所有东西都在升级的时候，你的数码产品自然也会受到压力，让你对它们进行必要的维护。即使你不太想升级，也必须这么做，因为所有的东西都是如此。这是一场升级军备竞赛。\n\n如果你拒绝进行不断的小升级，那么积累起来的变化会最终变成一项巨大的更新，大到足以带来“创伤”级别的干扰。\n\n无论你使用一样工具的时间有多长，无尽的升级都会把你变成一个菜鸟——也就是说，你会变成笨手笨脚的新用户。在这个“形成”的时代里，所有人都会成为菜鸟。更糟糕的是，我们永远都会是菜鸟，并永远因此保持虚心。\n\n因为进托邦在产生新利益的同时，也在制造几乎同样多的新麻烦。今天的问题来自昨天的成功。而对今天问题的技术解决方案，又会给明天埋下隐患。随着时间流逝，真正的利益便在这种问题与解决方案同时进行的循环扩张背后逐渐积累起来。\n\n答案是：来自受众。参与行为所携带的营养推动普通大众在撰写免费百科全书、制作平光轮胎更换的免费教程，以及分类整理参议院投票这类事情上，投入大量精力和时间。这种模式在越来越多地支撑网络运转。几年前的一项研究发现，只有40%的网络内容是以商业形式创造出来的。支撑人们创造其余部分的，不是责任，就是激情。\n\n那些未来人说得没错。因为从我们现在的角度来看，本世纪前半叶最伟大的网络事物已经出现在我们面前。只不过那些奇迹般的发明都在等着一个狂人以他的卓识远见来点化我们去采摘那些累累果实——这情形，就像是1984年的那些.com域名一样。\n\n那些未来人说得没错。因为在2050年，会有另外一个白胡子老头问你：你能想象在2016年当一个发明家会有多棒吗？那是一片广袤的处女地！你随便找个什么东西，都可以加上人工智能，上传到云里面去。那时的设备里不像现在，传感器成千上百，很少有超过一两个的。那时的期望不多，壁垒很低。成为第一轻而易举。而到那时，未来的人们会感慨：“唉，我们要是意识到那时有多少可能性该多好！”\n\n试着让自己活在30年后看今天，那样很多事情都会成为成功的机遇，然而发现还不够，这个世界永远不缺“发现”，缺的是“行动”\n\n所以真相就是：此时此刻，今天，2016年，就是创业的最佳时机。纵观历史，从来没有哪一天会比今天更适合发明创造。从来没有哪个时代会比当前、当下、此时此刻更有机遇，更加开放，有更低的壁垒、更高的利益风险比、更多的回报和更积极的环境。未来的人们回顾此刻时，会感慨道：“哦，要是活在那时该有多好！”\n\n今天确实是一片广袤的处女地。我们都正在“形成”。这在人类的历史上，是绝无仅有的最佳开始时机。你没迟到。\n\n到了2026年，谷歌的主营产品将不再是搜索，而是人工智能。\n\n到了2005年，投入大量生产的GPU的价格已经与一般商品相当。2009年，吴恩达（Andrew Ng）和斯坦福大学的一个研究团队意识到GPU芯片可以并行运行神经网络。\n\n吴恩达这样解释道：“建设人工智能就像造一艘火箭飞船，需要一个巨大的引擎和许多燃料。飞船的引擎是各种学习型算法，而燃料是我们提供给这些算法的大量数据。”\n\n众所周知，我们的思维方式不擅长做统计，所以我们制造出各种统计技术很强的智能设备，是为了让它们用不同的方式思考。让人工智能替我们开车的一项优势就是，它们不像我们那样容易分心。\n\n后工业化经济将会持续发展。因为每个人的任务之一将是找到、从事并完成将来会成为机器人重复性劳动的新工作。\n\n这将是人类最后的退路\n\n人类和机器之间将形成一种共生关系。人类的工作就是不停地给机器人安排任务，这本身就是一项永远做不完的工作，所以，我们至少还能保留这份“工作”。\n\n1.机器人（电脑）干不了我的工作。【后来】2.好吧，它会许多事情，但我做的事情它不一定都会。【后来】3.好吧，我做的事情它都会，但它常常出故障，这时需要我来处理。【后来】4.好吧，它干常规工作时从不出错，但是我需要训练它学习新任务。【后来】5.  好吧，就让它做我原来的工作吧，那工作本来就不是人该干的。【后来】6.哇，机器人正在干我以前做的工作，我的新工作不仅好玩多了，工资还高！【后来】7.真高兴，机器人（电脑）绝对干不了我现在做的事情。【重复】\n\n未来，你的薪水高低将取决于你能否和机器人默契配合。90%的同事将会是看不见的机器，而没有它们，你的大部分工作将无法完成。\n\n这一切都是必然的。让机器人代替我们从事现在的工作，让我们在它们的帮助下去构想有意义的新工作吧。\n\n很多时候互联网的成本低，在于它的可复制性\n\n如果一样东西可以复制，那么当它接触到互联网之后，就必然会被复制。\n\n永无止境的改进，汇聚成了一条条河流。\n\n然后我就醒悟过来了（我保证别人也和我一样）：如果提前购买一本电子书，它存放的位置和我没有买它时存放的位置是一模一样的（都在云端），区别只是付款和没有付款而已。既然如此，为什么不让它保持未付款状态呢？所以现在，不是半分钟内非要读到不可，我是不会买下一本书的。这种即时购买模式正是实时数据流的自然结果\n\n名词需要变成动词。固定的实体事物需要编程服务。数据不会保持静止，万物如今都要流动成为数据流。\n\n从现实层面来看，这8种无法复制的价值要好过免费。免费是好事，但如果你愿意为它们掏钱，那么这些价值就会比免费更好。我把这些特性称为“原生性”（generative）。原生价值必须是在交易时产生的特性或品质。人们无法复制、克隆、存储具有原生性的事物，也无法仿制和伪造原生性。原生性因实际进行的特定交易而生，独一无二。原生性为免费的复制品增添了价值，从而使它们变成了可以出售的商品。\n\n即时性（Immediacy）——迟早你都会找到自己想要的免费复制品，但是如果生产者能将产品在发布的第一时间，甚至是生产出来的第一时间发送到你的收件箱中，这可是一种原生性资产。许多人会在首映式的时候前去电影院花大价钱看那些以后会通过下载和租赁方式变得免费，或者几乎免费的电影。从非常现实的角度来看，他们花钱购买的并不是电影（电影是“免费的”），而是即时看到最新的电影。\n\n个性化（Personalization）——听普通的演唱会录音或许不用花钱，但如果能买回一张经过特殊音效处理、听起来就像是在你家客厅中录制的唱片的话，那你可能就愿意花大价钱了。这时，你花钱购买的不是演唱会的复制品，而是原生性中的个性化。一本免费的图书也可以经过出版社的个性化编辑，反映出你先前的阅读背景。你所购买的免费电影也许会按照你所希望的那样重新经过了剪辑（没有色情场面，儿童可以观看）。\n\n解释性（Interpretation）——有个老笑话是这么讲的：软件下载免费，用户手册一万美元。但这并不是玩笑。红帽（Red Hat）[插图]和Apache等[插图]一批高度知名的公司就是这么存活下来的。他们为免费的软件提供有偿的技术支持。这些公司只有代码的副本是免费的。但成千上万行的代码只有通过技术支持和技术指导才会对你变得有所价值。\n\n可靠性（Authenticity）——你或许能免费获得一个流行的软件应用，但即便你不需要看说明书，你也得考虑这个软件有没有缺陷、是不是恶意程序或者垃圾软件。这种情况下，你会很高兴地为可靠性付钱。这样，你在使用软件时就会自由自在[插图]，脑袋里不用为别的事情操心。这种情况下，你付钱购买的不是软件的副本，而是软件的可靠性。美国乐队感恩而死（Grateful Dead）[插图]的唱片种类多到几乎无数，但从乐队自己那里买上一张可靠版本的唱片就能省去你不少麻烦。最起码这张唱片里面的歌曲确实是感恩而死乐队自己的作品。\n\n获取权（Accessibility）——拥有往往是件烦人的事情。你得让自己拥有的东西井井有条，与时俱进。如果你拥有的是数字产品的话，还要加上备份的活计。在这个移动的世界里，你又得无时不刻地带着它们。当我们懒懒地订阅云端上的服务时，包括我在内，许多人都乐意付钱给别人来照料我们的“财产”。我或许会拥有一本书，也或许会通过预付费的方式来获得我喜爱的音乐，但我还会付钱给Acme数字仓库（Acme Digital Warehouse），让它为我服务，无论何时无论何地。大多数东西都可以在什么地方免费得到，但很不方便。通过付费服务，我就可以通过一个超级用户界面，在任何设备上随时随地获取这些免费的东西。从某种程度上讲，iTunes[插图]通过云端提供的内容，就是在向你出售获取权。虽然可以从其他地方下载到免费版本，但你还是会为了方便地获取音乐而付费。你花钱购买的不是这些东西，而是简单获取的便利，以及不用再去维护的义务。\n\n实体化（Embodiment）——从根本上看，数字复制品没有实体。阅读一本PDF格式的电子书，我会很开心，但有时候，同样的字句印刷在雪白的棉纸上，再配以皮革质地的封面，也非常诱人，给人感受很棒。游戏玩家们喜欢和好友在网上对战，但不时地，他们也会呼朋引伴地在同一个房间里玩个痛快。\n\n可赞助（patronage）——从本质上讲，热心的受众和爱好者希望为创作者买单。爱好者们喜欢奖励，无论对方是艺术家、音乐家、作家、演员，还是其他创造欣赏价值的创造者，因为这能让爱好者们和倾慕的对象建立联系。\n\n可寻性（Discoverability）——上述7种原生性扎根在创意作品之内，但可寻行是一种适用于许多产品的资产。没人看到的产品没有价值，无论价格贵贱，而未被发掘的佳作更是一文不值。当世界上的图书、歌曲、电影、应用和其他所有事情都以数百万计（其中大部分都是免费的）争夺你的注意力的时候，能被寻找到就具有了价值。而鉴于被创造出来的作品每天都以爆发性的数字增长，能被寻找到就更成了难能之事。爱好者们会用很多方法从百亿千亿的产品中发掘出有价值的作品。他们利用评论、评测和品牌（出版商、厂牌、工作室），而越来越多地则依赖其他爱好者和朋友来推荐好东西。他们也越来越希望为引导买单。\n\n书页是一成不变的——书的每一页会保持不变。无论什么时候，翻开到一本书的固定一页，它都是不变的。这让人感到十分可靠。也就是说，无论参考还是引述，书中某一页的内容都会是一模一样的。版本是一成不变的——无论你手里拿起的书是哪一本，也无论你在任何地方，任何时间购买到了这本书。只要是同一个版本，它们就不会有所不同，所以我们才能分享其中的文字，讨论一本书的内容，而不用担心我们看到的东西是否不同。介质是一成不变的——爱护得当的话，一本书可以保存很长时间（比数字格式多保存几个世纪），而书中的文字不会因为年久发生改变。完成度是一成不变的——一本纸书同时意味着盖棺定论。书中的内容已经终结，是已经完成的东西。以印刷品出现的文学，部分魅力就在于它把自身交付给了纸张，几乎如同誓言一般。而作者的威望，就建立在此之上。\n\n书页是流动的——页面成了一种灵活的单位。从智能眼镜上那微乎其微的屏幕，到一整面墙，内容会流动适应任何可用的空间，它可以适配你喜爱的阅读设备和阅读风格。书页以你为主。版本是流动的——电子书的材料可以变得个性化。如果你是学生，那么你手中的版本或许会解释生词。如果你在阅读一个系列的丛书，那么这本书可以省略掉前情提要，因为你已经读过之前的那一本了。个性化的“我的图书”会在真正意义上为我量身打造。介质是流动的——电子书在云端保存的成本是如此之低，以至于在没有限制的图书馆里保存一本书的费用是“免费”的。而且这本书还能再瞬时间发往地球上的任何地方，无论发送时间如何，接受对象是谁。改进是流动的——电子书的内容可以随时更正，也可以逐步改进。和一块毫无生气的石头相比，永无更新止境的电子书（至少在理想状态下）更像是一种动物。而这种生机勃勃的流动性也鼓舞我们成为了创造者和读者。\n\n以下就是流动的4个阶段：固定、罕见。最开始的情况，是耗费了大量专业经验创造出来的宝贵产品。这些产品，每一个都如同艺术品一般，完成度高，盈盈独立，通常以高质量产品的形式出售，如此才能补偿创造者付出的艰辛。免费、无所不在。最早的破坏来自于对第一阶段产品的杂乱复制，其量级之大，使得产品变成了日用品。廉价、完美的复制品近乎免费，哪里有需求，就会在哪里开枝散叶。复制品的过度散播会破坏掉既有的经济。流动、分享。第二阶段的破坏是对产品的解构，产品拆散后的每一个原件，都会流动寻找新的用途，并和新的产品绑定在一起。第一阶段的产品现在成为了服务信息流。它分享自云端，变成了财富和创新的平台。开放、变化。前两个阶段引发了第三阶段的解构。强大的服务信息流和既有的“原材料”顺手把成本降低到了一点点，使得业余者只需要很少的专业技能就能创造出新产品和全新品类的产品。创造的地位发生了转变，受众因而成为了艺术家。输出、选择和质量都会突飞猛进。\n\n书籍的命运值得仔细研究，因为在屏读将会转变的众多媒介中，书籍是第一个。屏读首先会改变书籍，然后会改变图书馆；之后，它会给电影和视频动手术；再之后，它会瓦解掉游戏和教育；而最终，屏读将会改变每件事。\n\n这会是一座极其巨大的图书馆。从苏美尔人在泥板上写下楔形文字到现在，人类已经至少“出版”了3.1亿本书，14亿篇文章和论述，1.8亿首歌曲，3.5万亿幅图像，327514部电影， 10亿个小时的视频、电视节目和短片，60万亿个公共网页。这些资料目前全部存放在世界各处的图书馆和档案馆中。它们全部数字化后，数据可以压缩存放到一个50PB大小的硬盘上（以目前的技术水平）。\n\n就像穆里尔·鲁凯泽[插图]所说的那样：“组成宇宙的是故事，而非原子。”\n\n减物质化（Dematerialization）\n优步作为世界上最大的出租车公司，却不拥有任何出租车辆。脸谱网作为世界上最流行的媒体平台，却不创造任何内容。阿里巴巴作为最有价值的零售公司，却没有任何库存。另外，Airbnb[插图]作为世界上最大的短租住宿供应商，却并不拥有任何房产。一些有意思的事情正在发生。”\n\n每一年我使用的东西都要比我实际拥有的多。\n\n对事物的占有不再像曾经那样重要，而对事物的使用则比以往更加重要。\n\n这种从“拥有你所购买的”到“使用你所订阅的”的转变推翻了一些传统。所有权是随意的、不稳定的。如果有更好的东西出现，那就抓住新的丢掉旧的。\n\n尽管这些想法会继续兴旺发展下去，但绝大多数这种公司都无法成功。由于初创费用较低，去中心化的生意是很容易开办起来的。因为如果这些创新公司的商业模式被证明是有效的，那么较成熟的公司就会准备效仿。像Hertz这样的汽车租赁公司没有理由不去租汽车给自由职业者，出租车公司也没有理由不去做些与优步相似的业务。但无论怎样，重新整合的利益会继续蓬勃发展和壮大。\n\n6年前，一帮声名狼藉之徒想利用现金的匿名性在网上贩卖毒品，于是便想找到一种没有政府插手的货币。而一些拥护人权的可敬人士也在苦苦寻找一种货币系统，使其可以在那些腐败或镇压民众的政府之外，以及那些压根不存在政府的地方发生效力。最终，他们共同想出来的这种货币就是比特币。\n\n比特币是一种完全去中心化、分布式的货币，它无需任何一家中央银行来为其准确性、强制性与调节性负责。\n\n无论比特币本身是否成功，它的区块链创新都会促进点对点信任系统的发展，而这将进一步推动众多机构与行业的去中心化。\n\n区块链已经脱离开比特币，成为一种互联网从业者新的追逐方向，不管你是不是真的懂，如果你不知道这个词，那就已经out了\n\n无论比特币本身是否成功，它的区块链创新都会促进点对点信任系统的发展，而这将进一步推动众多机构与行业的去中心化。 \n\n区块链的一个重要方面还在于它是一种民众公有（public commons）。没有一个人真正拥有它，因为每个人都拥有它。作为一个变得数字化的发明，它也在倾向于变得共享；在它变得共享的同时，它也在变得无主化（ownerless）。当每一个人都“拥有”它时，也就没有人拥有它。\n\n我使用道路，但我并不拥有它。我可以随时驶入全世界99%的道路和高速公路（当然也有些例外），因为它们是民众公有。我们通过向当地政府缴纳税费来获取道路的使用权。就我能想到的所有的目的而言，全世界的道路都在为我服务，就好像我拥有它们一样——甚至比我拥有它们还要好，因为我无需负责维护工作。大多数公共基础设施都带给我们这种“胜过拥有”的利益。\n\n平台协同（Platform Synergy）长期以来，有两种基本方式来组织人们进行工作，即企业和市场。\n\n平台是由一个企业创建的基地，使得其他企业可以在其基础上创建产品和服务。它既不是市场也不是企业，而是某种新的事物。\n\n减物质化、去中心化和大量的沟通会共同催生出更多的平台。平台是提供服务的工厂，而服务则偏爱使用权胜于所有权。\n\n云端也具有弹性，这意味着可以通过在其网络中添加或减少与其连接的电脑数量，来即时地扩大或缩小云端。并且由于它们固有的备用与分布的特性，云端是现存机器中可靠性最高的。它们可以表现出著名的5个9的（99.999%）的近乎完美的服务。\n\n云端的一个核心优势在于，它变得越大，我们的设备就变得越小巧、越轻薄。云端负责所有的工作，而我们手里的设备只是提供对接云端工作的一个窗口。\n\n由于生活在云端里，谷歌将来便可以轻易地将基于云计算的人工智能应用到我们的文字中。除了自动检查拼写问题和关键语法，Google可能也会对语句中的事实陈述进行核查，使用的则是他们称之为“知识型信任”（Knowledge-based Trust，KBT）的新型事实检验员。\n\n我”包含了大量不同的东西！借助机器智能和人工智能，所有的这些混合体将进一步发展。我将不仅仅是“我+”（Me Plus），还是“我们+”（We Plus）。\n\n云端给我们提供了令人惊异的可靠性计算、极快的速度以及不断拓展的深度，而使用者却无需承担任何维护的负担。任何一个拥有电脑的人都知道那种麻烦：它们占空间，需要持续的专业照料，而且很快就会过时淘汰。谁想拥有他们自己的电脑？这个问题的答案越来越多地变成：“没有人愿意”。就像从电网买电一样，你并不会想拥有自己的发电站。\n\n但可以明确的是，亚马逊的云端、谷歌的云端、脸谱网的云端以及所有其他企业的云端将会交织成一个巨大的云端——大云端（The Cloud），而且对于每个使用者或公司而言，这个大云端运行起来就是一个独立的云端。对抗这一融合过程的阻力之一，就是互联云需要各个商业云端共享它们的数据（一个云端就是一个连接数据的网络），而现在人们倾向于把数据当作黄金一样地储备。数据储备被视作一种竞争优势，而免费共享数据则被法律所阻止，所以在企业学会如何创造性地、富有成效地、负责任地共享数据之前，还有很多年（也许是几十年？）的路程要走。\n\n我们知道一个去中心化的云端可以发挥作用，是因为有一个事例证明了这一点，那就是 2014年发生在中国香港的学生抗议活动。为了逃避中国政府在香港市民民通信上施加的监视，香港学生想出了一种传递信息的方式，这一方式无需把信息传到一个手机信号塔，也不用通过微博、微信或电子邮箱的企业服务器。取而代之的是，他们在各自手机上安装了一个叫作FireChat的App。两部装有FireChat的手机可以通过wifi广播进行直接的联系，而无需将信息上传至一个手机信号基站。更重要的是，两个手机中的任何一个都可以将这个信息传给第三个装有FireChat的手机。继续增加装有FireChat的手机，你就可以得到一个所有手机完全连接的网络。若某部手机并非信息接收者，它便会作为一个中继站，将信息传至目标接收者那里。这一紧密联系的点对点网络（被称作无线网格网络）并不高效，却能够发挥作用。这种不太灵活的传播方式正是因特网在某一层面上的运行方式，也是因特网之所以如此强劲的原因。成功组建出FireChat构成的无线网格网络，意味着学生们创立了一个无人拥有的广播云端（因此它才难以被监控）。通过完全依靠其自身设备构成的无线网格网络，他们运行了一个避开中国政府监管的通信系统，时间长达几个月。同样的组建形式可以再一步扩大化，从而运行于各种云端。\n\n只有农民才需要一个谷仓来储藏他的财富。数字原住民[插图]是自由地奔向前方的，他们不会承受拥有事物所带来的负累，可以自由地探索未知的世界。使用而非拥有事物，使我可以保持敏捷和精力充沛，时刻为即将出现的未知事物做好准备。\n\n知识共享”（Creative Commons）这种利于共享的版权许可协议已被人们广泛接受，它鼓励人们准许他人合法地使用和改进自己的图像、文本或音乐，而无需额外许可。换句话说，内容的共享和摘取是新的默认模式。\n\n新兴的数字社会主义不同于老式的社会主义，它借助网络通信技术运行在没有边界的互联网上，催生了贯穿全球一体化经济的无形服务。它旨在提升个人的自主性，反对中央集权。它是去中心化的极致表现。\n\n最初的谷歌之所以成功击败了当时搜索引擎行业的领头者，就是利用了由业余网页制作者所创建的各种链接。每当有人在网站上添加超链接时，谷歌就会把这一链接计作被链接网页的“信任票”，并根据这一票为由此伸向网络的所有链接赋予权重。若链向某个特定页面（A）的网页也链向其他有可靠网页链入的页面，那么该特定页面（A）在谷歌的搜索结果中就会获得较高的可靠性排位。这一奇特的循环证据链并非由谷歌建立，而是由数百万个网页上共享的公共链接所构成。谷歌是第一家从消费者点击的共享搜索结果中获利的公司。一位普通用户的每次点击都在为那个网页的有效性进行投票。所以仅需使用谷歌，粉丝们就会将谷歌变得越来越好，并且具有更大的经济价值。\n\n纽约大学经济学家保罗·罗默（Paul Romer）专门研究经济增长理论，他认为真正可持续的经济增长并非源于新资源的发现和利用，而是源于将已有的资源重新安排后使其产生更大的价值。增长来源于重混。圣塔菲研究所的经济学家布莱恩·亚瑟（Brain Arthur）专门研究技术增长的动态过程，他认为“所有的新技术都源自已有技术的组合”\n\n在他的《星球大战》系列电影中，卢卡斯开创了一种新的电影拍摄方法，它与图书、绘画的创作有着更多的相似之处，而与传统电影拍摄手法则相去较远。在传统的电影拍摄手法中，影片的拍摄计划依据场景制定，所有场景都会被拍摄（通常不止一次），通过重复大量使用这些场景，最终组合成一部电影。有时，如果可供使用的胶片不能很好地阐述故事，那么导演必须返回影棚，补拍一些镜头。然而，借助数字技术带来的新屏幕流动性，一个电影场景具有更大的可塑性：就像作者笔下的一个段落可以被反复修改。无需再去捕捉场景（就像是照相取景），而是逐步地叠加场景，就像绘画一样。只需向一个大致的动作框架上添加一层层的视觉、听觉细节素材，混合出的效果就可以不断变化，并且可以一直再进行修改。乔治·卢卡斯拍摄的《星球大战》系列电影中的最后一部就是以这种与作者创作类似的方式进行层层效果添加的。他在绿幕房间里拍摄了演员的动作，即“两名绝地武士挥舞长剑碰撞——没有背景”，然后在这个框架上铺垫上一个热闹集市的复杂场景，同时还有一些细小的视觉素材。光剑的效果和其他效果则是后期以数字形式一层一层绘制上去的。以这种方式，逼真的雨水、火焰和烟雾可以一层层地添加到一个粗略的框架上。这一过程的便利简洁就像是卢卡斯在写剧本时可能会写上一句“这是一个风雨交加的黑夜”。最终，电影中的每个画面几乎都以这种方式进行过修改。本质上，一部数字电影就是这样一个像素一个像素地“写”出来的。\n","slug":"biran","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7q00975gqoylm5mk6i"},{"title":"Chrome Driver 下载","date":"2018-02-24T09:16:32.000Z","_content":"\n\n在使用 Splinter 等 web 测试工具时，机器需要安装对应浏览器的 WebDriver 才能运行，在这总结下 Chrome Driver 在几种环境下的安装方式\n\n<!-- more --><!-- toc -->\n\n## MacOS\n苹果最简单，使用 [Homebrew](/2017/09/07/mac-2017-09-07-homebrew/) 轻松搞定\n```bash\n$ brew install chromedriver\n```\n\n## Linux\nLinux 就麻烦些，两种方式\n### 从官网下载\n- 首先访问 https://sites.google.com/a/chromium.org/chromedriver/downloads 查找最新的包\n- `wget https://chromedriver.storage.googleapis.com/2.35/chromedriver_linux64.zip`\n- `unzip chromedriver_linux64.zip`\n- `mv chromedriver /usr/local/bin`\n这种方式需要翻墙，不然下载不下来\n\n### npm 安装\n```bash\n$ sudo npm -g install chromedriver\n$ ln -sf /usr/lib/node_modules/chromedriver/lib/chromedriver/chromedriver /usr/local/bin/chromedriver\n```\n\n","source":"_posts/2018-02-24-chromedriver.md","raw":"---\ntitle: Chrome Driver 下载\ntags:\n  - python\n  - 工具\ndate: 2018-02-24 09:16:32\n---\n\n\n在使用 Splinter 等 web 测试工具时，机器需要安装对应浏览器的 WebDriver 才能运行，在这总结下 Chrome Driver 在几种环境下的安装方式\n\n<!-- more --><!-- toc -->\n\n## MacOS\n苹果最简单，使用 [Homebrew](/2017/09/07/mac-2017-09-07-homebrew/) 轻松搞定\n```bash\n$ brew install chromedriver\n```\n\n## Linux\nLinux 就麻烦些，两种方式\n### 从官网下载\n- 首先访问 https://sites.google.com/a/chromium.org/chromedriver/downloads 查找最新的包\n- `wget https://chromedriver.storage.googleapis.com/2.35/chromedriver_linux64.zip`\n- `unzip chromedriver_linux64.zip`\n- `mv chromedriver /usr/local/bin`\n这种方式需要翻墙，不然下载不下来\n\n### npm 安装\n```bash\n$ sudo npm -g install chromedriver\n$ ln -sf /usr/lib/node_modules/chromedriver/lib/chromedriver/chromedriver /usr/local/bin/chromedriver\n```\n\n","slug":"chromedriver","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7r00995gqoesjladd6"},{"title":"Python 中使用 Graphql","date":"2018-02-23T11:14:39.000Z","_content":"\n\n[GraphQL](http://graphql.cn/) 既是一种用于 API 的查询语言也是一个满足你数据查询的运行时。 GraphQL 对你的 API 中的数据提供了一套易于理解的完整描述，使得客户端能够准确地获得它需要的数据，而且没有任何冗余，也让 API 更容易地随着时间推移而演进，还能用于构建强大的开发者工具。\n\n<!-- more --><!-- toc -->\n## 安装\n```bash\n$ pip install graphene\n```\n\n## Hello World\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport graphene\n\nclass Query(graphene.ObjectType):\n    hello = graphene.String(name=graphene.String(default_value=\"stranger\"))\n\n    def resolve_hello(self, info, name):\n        print(info)\n        return 'Hello ' + name\n\nschema = graphene.Schema(query=Query)\n\nresult = schema.execute('{ hello  }')\nprint(result.data)\nprint(result.data['hello']) # \"Hello stranger\"\n```\n\n## SQLAlchemy\n想在项目中使用 Graphql 链接数据库是必备的，现在 Python 中链接数据库普遍使用 SQLAlchemy 框架，将两者整合起来也非常简单\n\n安装\n```bash\n$ pip install \"graphene-sqlalchemy>=2.0\"\n```\n例子\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom sqlalchemy import create_engine\nfrom sqlalchemy import Column, Integer, String\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.orm import sessionmaker\nimport graphene\nfrom graphene_sqlalchemy import SQLAlchemyObjectType\nSQLALCHEMY_DATABASE_URI = 'mysql+pymysql://root:wxnacy@127.0.0.1:3306/study?charset=utf8mb4'\n\nengine = create_engine(SQLALCHEMY_DATABASE_URI, echo=False)\nBase = declarative_base()\nSession = sessionmaker(bind=engine)\nsession = Session()\nclass Book(Base):\n    __tablename__ = 'book'\n    id = Column(Integer, primary_key=True)\n    name = Column(String(132))\n\n    def __str__(self):\n        return f\"Book[id:{self.id}, name:{self.name}]\"\n\n\nclass BookQuery(SQLAlchemyObjectType):\n    class Meta:\n        model = Book\n\nclass Query(graphene.ObjectType):\n    books = graphene.List(BookQuery)\n    book = BookQuery\n\n    def resolve_books(self, info):\n        print(info)\n        query = BookQuery.get_query(info)  # SQLAlchemy query\n        return query.all()\n\n    def resolve_book(self, info):\n        query = BookQuery.get_query(info)  # SQLAlchemy query\n        return query.filter(Book.id==2).first()\n\nschema = graphene.Schema(query=Query)\n\n\nquery = '''\n        query {\n            books {\n                name\n            }\n            book\n        }\n'''.strip()\nresult = schema.execute(query, context_value={'session': session})\nprint(result.data)\n```\n\n## Flask\n终归我们是要在 web 接口中使用的，Graphql 也提供了 Flask 相应的框架\n\n下载\n```bash\n$ pip install Flask-GraphQL\n```\n例子\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom flask import Flask\nfrom flask_graphql import GraphQLView\nimport graphene\n\napp = Flask(__name__)\n\nclass Query(graphene.ObjectType):\n    hello = graphene.String(name=graphene.String(default_value=\"stranger\"))\n\n    def resolve_hello(self, info, name):\n        print(info)\n        return 'Hello ' + name\n\nschema = graphene.Schema(query=Query)\n\napp.add_url_rule('/graphql', view_func=GraphQLView.as_view('graphql',\n    schema=schema, graphiql=True))\n\napp.run(port=4901)\n```\n在执行上述代码时，会启动一个端口 4901 的服务，访问 `http://localhost:4901/graphql` 并在左侧输入查询语句，会看到如下界面\n![/images/pygraphql1.png](/images/pygraphql1.png)\n这就是 Graphql 的调试页面了，在查询后，地址栏的地址会变成\n```bash\nhttp://localhost:4901/graphql?query=%7Bhello%7D\n```\n使用 curl 访问会直接得到 JSON 数据\n```json\n{\"data\":{\"hello\":\"Hello stranger\"}}\n```\n在调试到想要数据后，地址直接用到客户端即可\n\n同时在 Flask 中直接使用 Flask-SQLAlchemy 模块会更加方便操作数据库\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom flask import Flask\nfrom flask_sqlalchemy import SQLAlchemy\nfrom flask_graphql import GraphQLView\nfrom graphene_sqlalchemy import SQLAlchemyObjectType\nimport graphene\napp = Flask(__name__)\nSQLALCHEMY_DATABASE_URI = 'mysql+pymysql://root:wxnacy@127.0.0.1:3306/study?charset=utf8mb4'\napp.config['SQLALCHEMY_DATABASE_URI'] = SQLALCHEMY_DATABASE_URI\ndb = SQLAlchemy(app)\n\n\nclass Book(db.Model):\n\t__tablename__ = 'book'\n\tid = db.Column(db.INT, primary_key=True)\n\tname = db.Column(db.String, default=\"\")\n\tdef format(self):\n\t\treturn dict(id=self.id, name=self.name)\n\nclass BookQuery(SQLAlchemyObjectType):\n    class Meta:\n        model = Book\n\nclass Query(graphene.ObjectType):\n    books = graphene.List(BookQuery)\n\n    def resolve_books(self, info):\n        print(info)\n        query = BookQuery.get_query(info)  # SQLAlchemy query\n        return query.all()\n\nschema = graphene.Schema(query=Query)\napp.add_url_rule('/graphql', view_func=GraphQLView.as_view('graphql',\n    schema=schema, graphiql=True))\n\napp.run(port=4901)\n```\n\n- [graphene](https://github.com/graphql-python/graphene)\n- [Graphene-SQLAlchemy](https://github.com/graphql-python/graphene-sqlalchemy/)\n- [flask-graphql](https://github.com/graphql-python/flask-graphql)\n- [查询和变更](http://graphql.cn/learn/queries/)\n","source":"_posts/2018-02-23-python-graphql.md","raw":"---\ntitle: Python 中使用 Graphql\ntags:\n  - python\n  - graphql\ndate: 2018-02-23 11:14:39\n---\n\n\n[GraphQL](http://graphql.cn/) 既是一种用于 API 的查询语言也是一个满足你数据查询的运行时。 GraphQL 对你的 API 中的数据提供了一套易于理解的完整描述，使得客户端能够准确地获得它需要的数据，而且没有任何冗余，也让 API 更容易地随着时间推移而演进，还能用于构建强大的开发者工具。\n\n<!-- more --><!-- toc -->\n## 安装\n```bash\n$ pip install graphene\n```\n\n## Hello World\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport graphene\n\nclass Query(graphene.ObjectType):\n    hello = graphene.String(name=graphene.String(default_value=\"stranger\"))\n\n    def resolve_hello(self, info, name):\n        print(info)\n        return 'Hello ' + name\n\nschema = graphene.Schema(query=Query)\n\nresult = schema.execute('{ hello  }')\nprint(result.data)\nprint(result.data['hello']) # \"Hello stranger\"\n```\n\n## SQLAlchemy\n想在项目中使用 Graphql 链接数据库是必备的，现在 Python 中链接数据库普遍使用 SQLAlchemy 框架，将两者整合起来也非常简单\n\n安装\n```bash\n$ pip install \"graphene-sqlalchemy>=2.0\"\n```\n例子\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom sqlalchemy import create_engine\nfrom sqlalchemy import Column, Integer, String\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.orm import sessionmaker\nimport graphene\nfrom graphene_sqlalchemy import SQLAlchemyObjectType\nSQLALCHEMY_DATABASE_URI = 'mysql+pymysql://root:wxnacy@127.0.0.1:3306/study?charset=utf8mb4'\n\nengine = create_engine(SQLALCHEMY_DATABASE_URI, echo=False)\nBase = declarative_base()\nSession = sessionmaker(bind=engine)\nsession = Session()\nclass Book(Base):\n    __tablename__ = 'book'\n    id = Column(Integer, primary_key=True)\n    name = Column(String(132))\n\n    def __str__(self):\n        return f\"Book[id:{self.id}, name:{self.name}]\"\n\n\nclass BookQuery(SQLAlchemyObjectType):\n    class Meta:\n        model = Book\n\nclass Query(graphene.ObjectType):\n    books = graphene.List(BookQuery)\n    book = BookQuery\n\n    def resolve_books(self, info):\n        print(info)\n        query = BookQuery.get_query(info)  # SQLAlchemy query\n        return query.all()\n\n    def resolve_book(self, info):\n        query = BookQuery.get_query(info)  # SQLAlchemy query\n        return query.filter(Book.id==2).first()\n\nschema = graphene.Schema(query=Query)\n\n\nquery = '''\n        query {\n            books {\n                name\n            }\n            book\n        }\n'''.strip()\nresult = schema.execute(query, context_value={'session': session})\nprint(result.data)\n```\n\n## Flask\n终归我们是要在 web 接口中使用的，Graphql 也提供了 Flask 相应的框架\n\n下载\n```bash\n$ pip install Flask-GraphQL\n```\n例子\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom flask import Flask\nfrom flask_graphql import GraphQLView\nimport graphene\n\napp = Flask(__name__)\n\nclass Query(graphene.ObjectType):\n    hello = graphene.String(name=graphene.String(default_value=\"stranger\"))\n\n    def resolve_hello(self, info, name):\n        print(info)\n        return 'Hello ' + name\n\nschema = graphene.Schema(query=Query)\n\napp.add_url_rule('/graphql', view_func=GraphQLView.as_view('graphql',\n    schema=schema, graphiql=True))\n\napp.run(port=4901)\n```\n在执行上述代码时，会启动一个端口 4901 的服务，访问 `http://localhost:4901/graphql` 并在左侧输入查询语句，会看到如下界面\n![/images/pygraphql1.png](/images/pygraphql1.png)\n这就是 Graphql 的调试页面了，在查询后，地址栏的地址会变成\n```bash\nhttp://localhost:4901/graphql?query=%7Bhello%7D\n```\n使用 curl 访问会直接得到 JSON 数据\n```json\n{\"data\":{\"hello\":\"Hello stranger\"}}\n```\n在调试到想要数据后，地址直接用到客户端即可\n\n同时在 Flask 中直接使用 Flask-SQLAlchemy 模块会更加方便操作数据库\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom flask import Flask\nfrom flask_sqlalchemy import SQLAlchemy\nfrom flask_graphql import GraphQLView\nfrom graphene_sqlalchemy import SQLAlchemyObjectType\nimport graphene\napp = Flask(__name__)\nSQLALCHEMY_DATABASE_URI = 'mysql+pymysql://root:wxnacy@127.0.0.1:3306/study?charset=utf8mb4'\napp.config['SQLALCHEMY_DATABASE_URI'] = SQLALCHEMY_DATABASE_URI\ndb = SQLAlchemy(app)\n\n\nclass Book(db.Model):\n\t__tablename__ = 'book'\n\tid = db.Column(db.INT, primary_key=True)\n\tname = db.Column(db.String, default=\"\")\n\tdef format(self):\n\t\treturn dict(id=self.id, name=self.name)\n\nclass BookQuery(SQLAlchemyObjectType):\n    class Meta:\n        model = Book\n\nclass Query(graphene.ObjectType):\n    books = graphene.List(BookQuery)\n\n    def resolve_books(self, info):\n        print(info)\n        query = BookQuery.get_query(info)  # SQLAlchemy query\n        return query.all()\n\nschema = graphene.Schema(query=Query)\napp.add_url_rule('/graphql', view_func=GraphQLView.as_view('graphql',\n    schema=schema, graphiql=True))\n\napp.run(port=4901)\n```\n\n- [graphene](https://github.com/graphql-python/graphene)\n- [Graphene-SQLAlchemy](https://github.com/graphql-python/graphene-sqlalchemy/)\n- [flask-graphql](https://github.com/graphql-python/flask-graphql)\n- [查询和变更](http://graphql.cn/learn/queries/)\n","slug":"python-graphql","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7t009b5gqojkn7p9po"},{"title":"Python super() 继承方法","date":"2018-02-22T10:31:28.000Z","_content":"\n\nsuper() 函数是用于调用父类(超类)的一个方法。\n\n<!-- more --><!-- toc -->\nsuper 是用来解决多重继承问题的，直接用类名调用父类方法在使用单继承的时候没问题，但是如果使用多继承，会涉及到查找顺序（MRO）、重复调用（钻石继承）等种种问题。\n\nMRO 就是类的方法解析顺序表, 其实也就是继承父类方法时的顺序表。\n\n## py2\n```python\nclass TestJson(dict):\n    def __init__(self, *args, **kwargs):\n        super(TestJson, self).__init__(*args, **kwargs)\n```\n## py3\n```python\nclass TestJson(dict):\n    def __init__(self, *args, **kwargs):\n        super().__init__(*args, **kwargs)\n```\n\n以前只是用 py2 的方法，后来发现了 py3 的写法，果断抛弃之，快拥抱 py3 吧，时代在进步\n\n- [Python super() 函数](http://www.runoob.com/python/python-func-super.html)\n","source":"_posts/2018-02-22-python-super.md","raw":"---\ntitle: Python super() 继承方法\ntags:\n  - python\ndate: 2018-02-22 10:31:28\n---\n\n\nsuper() 函数是用于调用父类(超类)的一个方法。\n\n<!-- more --><!-- toc -->\nsuper 是用来解决多重继承问题的，直接用类名调用父类方法在使用单继承的时候没问题，但是如果使用多继承，会涉及到查找顺序（MRO）、重复调用（钻石继承）等种种问题。\n\nMRO 就是类的方法解析顺序表, 其实也就是继承父类方法时的顺序表。\n\n## py2\n```python\nclass TestJson(dict):\n    def __init__(self, *args, **kwargs):\n        super(TestJson, self).__init__(*args, **kwargs)\n```\n## py3\n```python\nclass TestJson(dict):\n    def __init__(self, *args, **kwargs):\n        super().__init__(*args, **kwargs)\n```\n\n以前只是用 py2 的方法，后来发现了 py3 的写法，果断抛弃之，快拥抱 py3 吧，时代在进步\n\n- [Python super() 函数](http://www.runoob.com/python/python-func-super.html)\n","slug":"python-super","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7u009d5gqo775ezkcc"},{"title":"iTerm2 使用 expect 无密码登录服务器","date":"2018-02-26T11:43:05.000Z","_content":"\n\n之前介绍过[使用 expect 交互免输入密码](/2017/09/15/linux-2017-09-15-expect/)，你也可以跟 iTerm 配合在进行无密码登录服务器\n<!-- more -->\n首先编辑登录脚本 `/data/test_ssh.sh`\n```bash\n#!/usr/bin/env expect\nset user root\nset host your_host\nset password your_password\nset timeout -1\n\nspawn ssh $user@$host\nexpect \"*assword:*\"\nsend \"$password\\r\"\ninteract\nexpect eof\n```\n\n然后在 iTerm 界面通过快捷键 `command + ,` 进入设置界面，并使用下图进行配置\n![/images/iterm2.png](/images/iterm2.png)\n\n最后如下图所示右键选择配置完成的标签，即可打开新窗口并自动登录到服务器\n![/images/iterm3.png](/images/iterm3.png)\n\n","source":"_posts/2018-02-26-iterm2-expect.md","raw":"---\ntitle: iTerm2 使用 expect 无密码登录服务器\ntags:\n  - iterm\n  - expect\ndate: 2018-02-26 11:43:05\n---\n\n\n之前介绍过[使用 expect 交互免输入密码](/2017/09/15/linux-2017-09-15-expect/)，你也可以跟 iTerm 配合在进行无密码登录服务器\n<!-- more -->\n首先编辑登录脚本 `/data/test_ssh.sh`\n```bash\n#!/usr/bin/env expect\nset user root\nset host your_host\nset password your_password\nset timeout -1\n\nspawn ssh $user@$host\nexpect \"*assword:*\"\nsend \"$password\\r\"\ninteract\nexpect eof\n```\n\n然后在 iTerm 界面通过快捷键 `command + ,` 进入设置界面，并使用下图进行配置\n![/images/iterm2.png](/images/iterm2.png)\n\n最后如下图所示右键选择配置完成的标签，即可打开新窗口并自动登录到服务器\n![/images/iterm3.png](/images/iterm3.png)\n\n","slug":"iterm2-expect","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7u009f5gqofevz6dyi"},{"title":"Python 常用内置方法","date":"2018-02-27T08:44:17.000Z","_content":"\n\nPython 常用内置方法\n<!-- more -->\n```bash\n__init__(self,...)        # 初始化对象，在创建新对象时调用\n__del__(self)             # 释放对象，在对象被删除之前调用\n__new__(cls,*args,**kwd)  # 实例的生成操作\n__str__(self)             # 在使用print语句时被调用\n__getitem__(self,key)     # 获取序列的索引key对应的值，等价于seq[key]\n__len__(self)             # 在调用内联函数len()时被调用\n__cmp__(stc,dst)          # 比较两个对象src和dst\n__getattr__(s,name)       # 获取属性的值\n__setattr__(s,name,value) # 设置属性的值\n__delattr__(s,name)       # 删除name属性\n__getattribute__()        # __getattribute__()功能与__getattr__()类似\n__gt__(self,other)        # 判断self对象是否大于other对象 >\n__lt__(slef,other)        # 判断self对象是否小于other对象 <\n__ge__(slef,other)        # 判断self对象是否大于或者等于other对象 >=\n__le__(slef,other)        # 判断self对象是否小于或者等于other对象 <=\n__eq__(slef,other)        # 判断self对象是否等于other对象 ==\n__call__(self,*args)      # 把实例对象作为函数调用\n```\n\n## 用法\n巧用内置方法，很多时间会起到意想不到的效果\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nclass User():\n    def __init__(self, id, name):\n        self.id = id\n        self.name = name\n\n    def __eq__(self, other):\n        return self.id == other.id and self.name == other.name\n\n\nif __name__ == \"__main__\":\n    a = User(1, 'wxnacy')\n    b = User(2, 'ning')\n    c = [a, b]\n    print(a in c)\n```\n上边这个例子，最后会打印 `True`，如果去掉重写的 `__eq__` 方法，则返回 `False`，原因在于 `in` 表达式将对象 a 与 数组 c 中每个元素做了 `==` 比较，而 `==` 表达式就是用调用了对象的 `__eq__` 内置方法，重写了这个方法，即可以自定义我们对象的比较方法，其他的内置方法也都可以起到类似的作用。\n","source":"_posts/2018-02-27-python-built-func.md","raw":"---\ntitle: Python 常用内置方法\ntags:\n  - python\ndate: 2018-02-27 08:44:17\n---\n\n\nPython 常用内置方法\n<!-- more -->\n```bash\n__init__(self,...)        # 初始化对象，在创建新对象时调用\n__del__(self)             # 释放对象，在对象被删除之前调用\n__new__(cls,*args,**kwd)  # 实例的生成操作\n__str__(self)             # 在使用print语句时被调用\n__getitem__(self,key)     # 获取序列的索引key对应的值，等价于seq[key]\n__len__(self)             # 在调用内联函数len()时被调用\n__cmp__(stc,dst)          # 比较两个对象src和dst\n__getattr__(s,name)       # 获取属性的值\n__setattr__(s,name,value) # 设置属性的值\n__delattr__(s,name)       # 删除name属性\n__getattribute__()        # __getattribute__()功能与__getattr__()类似\n__gt__(self,other)        # 判断self对象是否大于other对象 >\n__lt__(slef,other)        # 判断self对象是否小于other对象 <\n__ge__(slef,other)        # 判断self对象是否大于或者等于other对象 >=\n__le__(slef,other)        # 判断self对象是否小于或者等于other对象 <=\n__eq__(slef,other)        # 判断self对象是否等于other对象 ==\n__call__(self,*args)      # 把实例对象作为函数调用\n```\n\n## 用法\n巧用内置方法，很多时间会起到意想不到的效果\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nclass User():\n    def __init__(self, id, name):\n        self.id = id\n        self.name = name\n\n    def __eq__(self, other):\n        return self.id == other.id and self.name == other.name\n\n\nif __name__ == \"__main__\":\n    a = User(1, 'wxnacy')\n    b = User(2, 'ning')\n    c = [a, b]\n    print(a in c)\n```\n上边这个例子，最后会打印 `True`，如果去掉重写的 `__eq__` 方法，则返回 `False`，原因在于 `in` 表达式将对象 a 与 数组 c 中每个元素做了 `==` 比较，而 `==` 表达式就是用调用了对象的 `__eq__` 内置方法，重写了这个方法，即可以自定义我们对象的比较方法，其他的内置方法也都可以起到类似的作用。\n","slug":"python-built-func","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7v009h5gqojoufn49o"},{"title":"Splinter 用于测试web应用程序的 Python 工具","date":"2018-02-25T10:45:53.000Z","_content":"\n\n[Splinter](https://github.com/cobrateam/splinter) 是一个用于测试 web 应用程序的工具，它具有查找元素、表单操作和其他浏览器操作的简单功能。\n\n<!-- more --><!-- toc -->\n## 安装\n```bash\n$ pip install splinter\n```\n运行还需要安装 WebDriver，ChromeDriver 安装可以看[这里](/2018/02/23/chromedriver/)，其他浏览器见[这里](https://splinter.readthedocs.io/en/latest/#browser-based-drivers)\n\n## 快速入门\n我在官方的例子上做了下修改，现在运行下，然后我们再来分析它做了什么\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom splinter import Browser\n\nbrowser = Browser(driver_name='chrome')\nbrowser.driver.set_window_size(1920, 1080)\nbrowser.visit('http://google.com')\nbrowser.fill('q', 'splinter - python acceptance testing for web applications')\nbrowser.find_by_name('btnK').click()\nhtml = browser.html\nprint(html)\nimage = browser.screenshot(name='/Users/wxnacy/PycharmProjects/study/python/splinter_demo/screenshot', suffix='.jpg')\nprint(image)\n\nif browser.is_text_present('splinter.readthedocs.io'):\n    print(\"Yes, the official website was found!\")\nelse:\n    print(\"No, it wasn't found... We need to improve our SEO techniques\")\n\nbrowser.quit()\n```\n下面我们来分析下，这个例子都做了什么\n- 创建实例，并指定浏览器为 `chrome`，如果不指定默认为 `foxfire`，如果你本地的 driver 没有在环境变量中，还需要 `executable_path` 参数来制定 driver 地址\n```python\nbrowser = Browser(driver_name='chrome')\n```\n- 设置打开浏览器的大小，不设置打开一个默认大小的浏览器\n```python\nbrowser.driver.set_window_size(1920, 1080)\n```\n- 访问指定地址\n```python\nbrowser.visit('http://google.com')\n```\n- 在 `name=q` 的域内输入内容\n```python\nbrowser.fill('q', 'splinter - python acceptance testing for web applications')\n```\n- 找到 `name=btnK` 按钮，并点击，这是一个链式操作\n```python\nbrowser.find_by_name('btnK').click()\n```\n- 打印此时页面的 document，这时打印出来的是浏览器加载完动态效果的代码\n```python\nhtml = browser.html\nprint(html)\n```\n- 截图，在制定的文件名后加一个随机字符串并截图，后缀默认为 `.png`，方法返回最终的图片地址\n```python\nbrowser.screenshot(name='/Users/wxnacy/PycharmProjects/study/python/splinter_demo/screenshot', suffix='.jpg')\n```\n- 判断页面的文字中是否包含某个文字\n```python\nif browser.is_text_present('splinter.readthedocs.io'):\n    print(\"Yes, the official website was found!\")\nelse:\n    print(\"No, it wasn't found... We need to improve our SEO techniques\")\n```\n- 最后关闭浏览器\n```python\nbrowser.quit()\n```\n关于浏览器和页面操作还有很多方法，详见 [API 文档](http://splinter.readthedocs.io/en/latest/api/driver-and-element-api.html)\n\n- [Splinter](http://splinter.readthedocs.io/en/latest/index.html)\n- [API Documentation](http://splinter.readthedocs.io/en/latest/api/)\n- [Selenium](https://github.com/SeleniumHQ/selenium)\n- [Selenium Client Driver](http://seleniumhq.github.io/selenium/docs/api/py/)\n","source":"_posts/2018-02-25-splinter.md","raw":"---\ntitle: Splinter 用于测试web应用程序的 Python 工具\ntags:\n  - python\ndate: 2018-02-25 10:45:53\n---\n\n\n[Splinter](https://github.com/cobrateam/splinter) 是一个用于测试 web 应用程序的工具，它具有查找元素、表单操作和其他浏览器操作的简单功能。\n\n<!-- more --><!-- toc -->\n## 安装\n```bash\n$ pip install splinter\n```\n运行还需要安装 WebDriver，ChromeDriver 安装可以看[这里](/2018/02/23/chromedriver/)，其他浏览器见[这里](https://splinter.readthedocs.io/en/latest/#browser-based-drivers)\n\n## 快速入门\n我在官方的例子上做了下修改，现在运行下，然后我们再来分析它做了什么\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom splinter import Browser\n\nbrowser = Browser(driver_name='chrome')\nbrowser.driver.set_window_size(1920, 1080)\nbrowser.visit('http://google.com')\nbrowser.fill('q', 'splinter - python acceptance testing for web applications')\nbrowser.find_by_name('btnK').click()\nhtml = browser.html\nprint(html)\nimage = browser.screenshot(name='/Users/wxnacy/PycharmProjects/study/python/splinter_demo/screenshot', suffix='.jpg')\nprint(image)\n\nif browser.is_text_present('splinter.readthedocs.io'):\n    print(\"Yes, the official website was found!\")\nelse:\n    print(\"No, it wasn't found... We need to improve our SEO techniques\")\n\nbrowser.quit()\n```\n下面我们来分析下，这个例子都做了什么\n- 创建实例，并指定浏览器为 `chrome`，如果不指定默认为 `foxfire`，如果你本地的 driver 没有在环境变量中，还需要 `executable_path` 参数来制定 driver 地址\n```python\nbrowser = Browser(driver_name='chrome')\n```\n- 设置打开浏览器的大小，不设置打开一个默认大小的浏览器\n```python\nbrowser.driver.set_window_size(1920, 1080)\n```\n- 访问指定地址\n```python\nbrowser.visit('http://google.com')\n```\n- 在 `name=q` 的域内输入内容\n```python\nbrowser.fill('q', 'splinter - python acceptance testing for web applications')\n```\n- 找到 `name=btnK` 按钮，并点击，这是一个链式操作\n```python\nbrowser.find_by_name('btnK').click()\n```\n- 打印此时页面的 document，这时打印出来的是浏览器加载完动态效果的代码\n```python\nhtml = browser.html\nprint(html)\n```\n- 截图，在制定的文件名后加一个随机字符串并截图，后缀默认为 `.png`，方法返回最终的图片地址\n```python\nbrowser.screenshot(name='/Users/wxnacy/PycharmProjects/study/python/splinter_demo/screenshot', suffix='.jpg')\n```\n- 判断页面的文字中是否包含某个文字\n```python\nif browser.is_text_present('splinter.readthedocs.io'):\n    print(\"Yes, the official website was found!\")\nelse:\n    print(\"No, it wasn't found... We need to improve our SEO techniques\")\n```\n- 最后关闭浏览器\n```python\nbrowser.quit()\n```\n关于浏览器和页面操作还有很多方法，详见 [API 文档](http://splinter.readthedocs.io/en/latest/api/driver-and-element-api.html)\n\n- [Splinter](http://splinter.readthedocs.io/en/latest/index.html)\n- [API Documentation](http://splinter.readthedocs.io/en/latest/api/)\n- [Selenium](https://github.com/SeleniumHQ/selenium)\n- [Selenium Client Driver](http://seleniumhq.github.io/selenium/docs/api/py/)\n","slug":"splinter","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7x009k5gqobozc4c6v"},{"title":"如何在终端使用代理","date":"2018-02-28T09:50:19.000Z","_content":"\n\n如何在终端使用代理\n<!-- more -->\n我使用的翻墙环境使用 VPS 服务器搭建的，使用 [ShadowsocksX-NG](https://github.com/shadowsocks/ShadowsocksX-NG/releases) 客户端来完成代理操作，但是在终端环境中，仍然不能翻墙，这样很多依赖翻墙的开发就不能进行，这时候需要手动设置下环境变量。\n\n我们需要写一个脚本来完成这件事，编辑 `~/.bash_profile`\n```bash\n...\n\nfunction proxyoff(){\n    unset http_proxy\n    unset https_proxy\n    echo -e \"已关闭代理\"\n}\nfunction proxyon() {\n    export no_proxy=\"baidu.com,github.com,wxnacy.com\"\n    export http_proxy=\"http://127.0.0.1:1080\"\n    export https_proxy=$http_proxy\n    echo -e \"已开启代理\"\n}\n...\n```\n在 `proxyon()` 函数中，`http_proxy, https_proxy` 的值是本机的代理地址，这个地址的端口号 ShadowsocksX-NG 已经帮我们完成了，`no_proxy` 是不需要走代理的地址列表，这样可以保证在访问国内时网速可以得到保证。\n\n然后执行 `source ~/.bash_profile` 使函数生效，以后想在终端使用代理，运行 `proxyon` 即可\n","source":"_posts/2018-02-28-terminal-proxy.md","raw":"---\ntitle: 如何在终端使用代理\ntags:\n  - 工具\ndate: 2018-02-28 09:50:19\n---\n\n\n如何在终端使用代理\n<!-- more -->\n我使用的翻墙环境使用 VPS 服务器搭建的，使用 [ShadowsocksX-NG](https://github.com/shadowsocks/ShadowsocksX-NG/releases) 客户端来完成代理操作，但是在终端环境中，仍然不能翻墙，这样很多依赖翻墙的开发就不能进行，这时候需要手动设置下环境变量。\n\n我们需要写一个脚本来完成这件事，编辑 `~/.bash_profile`\n```bash\n...\n\nfunction proxyoff(){\n    unset http_proxy\n    unset https_proxy\n    echo -e \"已关闭代理\"\n}\nfunction proxyon() {\n    export no_proxy=\"baidu.com,github.com,wxnacy.com\"\n    export http_proxy=\"http://127.0.0.1:1080\"\n    export https_proxy=$http_proxy\n    echo -e \"已开启代理\"\n}\n...\n```\n在 `proxyon()` 函数中，`http_proxy, https_proxy` 的值是本机的代理地址，这个地址的端口号 ShadowsocksX-NG 已经帮我们完成了，`no_proxy` 是不需要走代理的地址列表，这样可以保证在访问国内时网速可以得到保证。\n\n然后执行 `source ~/.bash_profile` 使函数生效，以后想在终端使用代理，运行 `proxyon` 即可\n","slug":"terminal-proxy","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7y009m5gqomz8o4rxp"},{"title":"Javascript 给 Fetch 加上 Timeout","date":"2018-02-16T19:34:53.000Z","_content":"\n\n使用 `setTimeout()` 函数给 Fetch Api 加上 timeout 效果\n<!-- more -->\n```javascript\nconst fetchRequest = (url, params={}, timeout=10000) => {\n    let isTimeout = false;\n    return new Promise(function(resolve, reject) {\n        const TO = setTimeout(function() {\n            isTimeout = true;\n            reject(new Error('Fetch timeout'));\n        }, timeout);\n\n        fetch(url, params)\n            .then(res => {\n                clearTimeout(TO)\n                if(!isTimeout) {\n                    resolve(res)\n                }\n            }).catch(e => {\n                if( isTimeout ){\n                    return\n                }\n                reject(e)\n            })\n    })\n}\n\nfetchRequest('https://ipapi.co/json', null).then(res => {\n    console.log(res);\n})\nfetchRequest('http://localhost:8010/test', null, 1000).catch(e => {\n    console.log(e)\n})\n```\n原理很简单，首先在 `fetch()` 函数外包一层 `Promise`，然后关键点在于 `setTimeout()`\n```javascript\nconst TO = setTimeout(function() {\n    isTimeout = true;\n    reject(new Error('Fetch timeout'));\n}, timeout);\n```\n在执行 `setTimeout()` 中的函数时，抛出异常，强行中断 `fetch` 动作，也就达到了 timeout 的效果，另外在 `Promise` 外面在封装一层，使方法调用起来更加方便。\n\n- [JavaScript fetch with Timeout](https://davidwalsh.name/fetch-timeout)\n","source":"_posts/2018-02-16-fetch-timeout.md","raw":"---\ntitle: Javascript 给 Fetch 加上 Timeout\ntags:\n  - javascript\ndate: 2018-02-16 19:34:53\n---\n\n\n使用 `setTimeout()` 函数给 Fetch Api 加上 timeout 效果\n<!-- more -->\n```javascript\nconst fetchRequest = (url, params={}, timeout=10000) => {\n    let isTimeout = false;\n    return new Promise(function(resolve, reject) {\n        const TO = setTimeout(function() {\n            isTimeout = true;\n            reject(new Error('Fetch timeout'));\n        }, timeout);\n\n        fetch(url, params)\n            .then(res => {\n                clearTimeout(TO)\n                if(!isTimeout) {\n                    resolve(res)\n                }\n            }).catch(e => {\n                if( isTimeout ){\n                    return\n                }\n                reject(e)\n            })\n    })\n}\n\nfetchRequest('https://ipapi.co/json', null).then(res => {\n    console.log(res);\n})\nfetchRequest('http://localhost:8010/test', null, 1000).catch(e => {\n    console.log(e)\n})\n```\n原理很简单，首先在 `fetch()` 函数外包一层 `Promise`，然后关键点在于 `setTimeout()`\n```javascript\nconst TO = setTimeout(function() {\n    isTimeout = true;\n    reject(new Error('Fetch timeout'));\n}, timeout);\n```\n在执行 `setTimeout()` 中的函数时，抛出异常，强行中断 `fetch` 动作，也就达到了 timeout 的效果，另外在 `Promise` 外面在封装一层，使方法调用起来更加方便。\n\n- [JavaScript fetch with Timeout](https://davidwalsh.name/fetch-timeout)\n","slug":"fetch-timeout","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a7z009o5gqobrj2ehes"},{"title":"Python 如何获取模块中所以 class 的列表","date":"2018-03-01T14:09:30.000Z","_content":"\n\nPython 如何获取模块中所以 class 的列表\n\n<!-- more --><!-- toc -->\n查询模块 `foo` 的 class 列表\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport inspect\nimport foo  # 需要查询的模块\n\nfor name, obj in inspect.getmembers(foo):\n    if inspect.isclass(obj):\n        print obj\n```\n查询当前模块的 class 列表\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport inspect\nimport sys\n\nfor name, obj in inspect.getmembers(sys.modules[__name__]):\n    if inspect.isclass(obj):\n        print obj\n```\n\n\n","source":"_posts/2018-03-01-python-module-class.md","raw":"---\ntitle: Python 如何获取模块中所以 class 的列表\ntags:\n  - python\ndate: 2018-03-01 14:09:30\n---\n\n\nPython 如何获取模块中所以 class 的列表\n\n<!-- more --><!-- toc -->\n查询模块 `foo` 的 class 列表\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport inspect\nimport foo  # 需要查询的模块\n\nfor name, obj in inspect.getmembers(foo):\n    if inspect.isclass(obj):\n        print obj\n```\n查询当前模块的 class 列表\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport inspect\nimport sys\n\nfor name, obj in inspect.getmembers(sys.modules[__name__]):\n    if inspect.isclass(obj):\n        print obj\n```\n\n\n","slug":"python-module-class","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a80009r5gqog6k87esk"},{"title":"Python 几种判断 class 是否包含字段的方法","date":"2018-03-02T10:20:34.000Z","_content":"\n\nPython 有三种判断 class 是否包含字段的方法\n\n<!-- more --><!-- toc -->\n## dir\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nclass User():\n    pass\n\nfields = dir(User)\nprint('foo' in fields)  # False\n```\n\n## hasattr\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nclass User():\n    pass\n\nprint(hasattr(User, 'foo')) # False\n```\n该方法在 py2 中不建议使用，详情见[一个危险的Python函数，不推荐使用](http://codingpy.com/article/hasattr-a-dangerous-misnomer/)\n\n## getattr\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nclass User():\n    pass\n\nprint(getattr(User, 'foo', None))   # None\n```\n这种方法是最安全的\n","source":"_posts/2018-03-02-python-hasattr.md","raw":"---\ntitle: Python 几种判断 class 是否包含字段的方法\ntags:\n  - python\ndate: 2018-03-02 10:20:34\n---\n\n\nPython 有三种判断 class 是否包含字段的方法\n\n<!-- more --><!-- toc -->\n## dir\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nclass User():\n    pass\n\nfields = dir(User)\nprint('foo' in fields)  # False\n```\n\n## hasattr\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nclass User():\n    pass\n\nprint(hasattr(User, 'foo')) # False\n```\n该方法在 py2 中不建议使用，详情见[一个危险的Python函数，不推荐使用](http://codingpy.com/article/hasattr-a-dangerous-misnomer/)\n\n## getattr\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nclass User():\n    pass\n\nprint(getattr(User, 'foo', None))   # None\n```\n这种方法是最安全的\n","slug":"python-hasattr","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a81009t5gqocwu96akl"},{"title":"《非暴力沟通》划线书摘","date":"2018-03-05T17:17:09.000Z","_content":"\n\n非暴力沟通的四个要素：1．观察2．感受3．需要4．请求\n<!-- more -->\n\n使用暴力的人其实是因为他们内心的宁静遭到了破坏，所以他们才会用暴力的方式维护或寻求心灵的和平。这或许是暴力的蝴蝶效应吧\n\n十岁那年，白人打了我，他们认为我太黑了；接着，黑人又打了我，他们认为我太白了。这样的耻辱也许会让任何人想报复社会。\n\n非暴力生活的一个关键就是：感激生活的赐予，而不贪心。\n\n对他人的评价实际上反映了我们的需要和价值观。\n\n印度哲学家克里希那穆提（J. Krishnamurti）曾经说，“不带评论的观察是人类智力的最高形式。”\n\n别人的行为可能会刺激我们，但并不是我们感受的根源。\n\n听到不中听的话的四种选择：1．责备自己2．指责他人3．体会自己的感受和需要4．体会他人的感受和需要\n\n\n对于大多数人来说，个人成长一般会经历三个阶段：\n- （1）“情感的奴隶”——我们认为自己有义务使他人快乐；\n- （2）“面目可憎”时期——此时，我们拒绝考虑他人的感受和需要；\n- （3）“生活的主人”——我们意识到，虽然我们对自己的意愿、感受和行动负有完全的责任，但无法为他人负责。与此同时，我们还认识到，我们无法牺牲他人来满足自己的需要。\n\n非暴力沟通实例“让私生子女像以前那样见不得人！”一位女士是救济食品发放中心的志愿者。有一天，她的同事在读报时气冲冲地说：“我们需要让私生子女像以前那样见不得人！”在过去，听到不同意见，她一般只会在心里嘀咕对方的不是。这一次，她试着运用非暴力沟通进行交流。女士：（首先试图了解同事的观察……）“你在读有关‘少女妈妈’的报道？”同事：“是的。真不可思议！有这么多少女未婚先孕！”女士：（接着了解她的感受和需要）“你担心她们的孩子没有良好的家庭环境？”同事：“当然！你知道吗？如果我那样做，我父亲会杀了我！”女士：“哦，看起来在过去少女未婚先孕后果极为严重？”同事：“是的！我们知道怀孕意味着什么！我们总是担惊受怕，而这些女孩却毫无顾忌。”女士：“你希望她们能有所顾忌？”同事：“至少恐惧和惩罚会起到一些作用！报道说有些女孩为了怀孕去和不同的男人睡觉！然后，她们生了孩子，由我们来买单！”此时，这位女士注意到两种不同的感受：1．对一些女孩故意怀孕感到震惊；2．对纳税人需要养育她们的孩子感到愤怒。她选择先关注第一种感受。女士：“现在的人不顾名誉、后果和经济状况就未婚先孕，你很难接受这个事实？”（一般来说，在存在多种感受的情况下，一个人会诉说那些还没有得到倾听的感受。因此，倾听的人无须一开始就对各种感受同时作出反馈，而可以自然地从一种感受过渡到另一种。）同事：“是的，你说最后是谁为这些孩子买单？”女士：“你希望你纳的税能有更好的用途，是这样吗？”同事：“那当然！我儿子和儿媳想再要一个孩子。可是，培养孩子太花钱了，虽然他们都有工作，但还是做不到！”女士：“你想要一个孙子，是吗？”同事：“是的，但不只是我想要……”女士：“……你还希望儿子能过上称心如意的生活……”（她继续倾听，让同事充分表达感受和愿望。）同事：“是的。只有一个孩子是很可悲的。”此时，这位女士感到同事已经平静了下来。她们沉默了片刻。她惊讶地发现，虽然她并不赞同同事的观点，但心中已无任何不满。接着，她通过非暴力沟通的四个要素表达她的看法。女士：“听到你说‘我们应该让私生子女像以前那样见不得人’（观察），我有些担心（感受），因为我希望我们每个人都乐于助人（需要）。来这里领取食物的人，有些就是‘少女妈妈’（观察），我希望她们能喜欢这里（需要）。你是否愿意告诉我，小莉和她男友进来时，你是什么心情？（请求）”她们又谈了一会儿。最后，这位女士确信，她的同事也很关心那些青少年，并热情提供服务。更为重要的是，她发现，她同时满足了自己诚实和互相尊重的需要。与此同时，她的同事也感到欣慰，因为她充分表达了对青少年未婚先孕的忧虑。通过不带敌意地分享彼此的观念，她们增进了理解，发展了友谊。如果没有运用非暴力沟通进行交流，她们的关系也许就会开始恶化。\n\n在越战期间，我被邀请去参加电视辩论。晚上在家看节目的录像带时，我十分不安，因为我很不喜欢自己的辩论方式。我告诫自己：“在下一次辩论时，决不能再这么被动。”请注意，我只是提醒自己要避免出现什么，而没有提醒自己主动做些什么。一周以后，这个节目邀请我去继续上一次的辩论。在去演播室的路上，我不断地提醒自己不要犯同样的错误。节目一开始，对手就按其上周的方式展开了辩论。他结束讲话后，大概有10秒，我努力控制自己不要按原来的方式进行回应。于是，我坐在那里，一句话也没说。可是，我一开始辩论，就发现我回应对手的方式和上次一模一样。这个教训使我明白了：如果我只是提醒自己要避免什么，而不清楚自己可以做什么，会有怎样的后果。\n\n不管是感受和需求都应该具体到某件事情上，不然你们可能对抽象的“公平对待”理解上会不一样\n\n我们提出的请求越具体越好。如果我们的意思含糊不清，别人就难以了解我们到底想要什么。有一幅卡通画描述的是一个人掉到了湖里。在湖中挣扎时，他冲着岸上的狗喊道：“快去求助！”在第二幅画中，这只狗躺在精神病医生的诊断台上。这个故事反映了人们对于“帮助”的含义可能存在不同的看法。\n\n我们越是将他人的不顺从看作是对我们的排斥，我们所表达的愿望就越有可能被看作是命令。\n\n非暴力沟通是用来帮助我们在诚实和倾听的基础上与人联系。使用非暴力沟通时，我们希望人们的改变和行动是出于对生命的爱。一旦人们相信我们看重彼此的感情，并能兼顾双方的需要，那么，他们也就会相信我们所表达的愿望是请求而非命令。\n\n坚持以非暴力沟通的方式与人沟通是很不容易的。对于父母、老师、经理以及其他处于管理位置的人来说，尤其如此。在一次研讨班中，有位母亲和我说：“马歇尔，我回家试过了，但没什么用。”于是，我请她讲讲发生了什么事情。“回家后，就像上午练习时那样，我表达了感受和需要。我并没有责备孩子。我只是说‘当我看到你没有做你答应做的家务活，我十分失望。因为我希望回家后有个干净整洁的环境’。然后，我提出了请求：我请他立即把房间收拾干净。”“听起来你已经很清楚地表达了非暴力沟通的四个要素，”我回答说，“然后呢？”“他什么都没做。”“那接下来呢？”我接着问。“我和他说，像他这样懒惰和不负责任的人是不会有什么前途的。”我注意到这位女士把请求和命令混为一谈。在她看来，非暴力沟通是否有用取决于她的“请求”是否能得到满足。在刚开始运用非暴力沟通时，我们也许会发现，有时我们只是在运用非暴力沟通的表达形式，而忘记了它所服务的目的。\n\n有一次，一所高中的管理团队请我去示范如何运用非暴力沟通与学生沟通。我要会见的学生有四十位。在学校中，他们被看作是“品行不端”的学生。我认为，像“品行不端”这样的标签会带来很消极的影响。如果一个学生被贴上这样的标签，那岂不是说他不遵守学校规矩是正常的吗？这样的标签将鼓励学生做我们不希望他们做的事，然后，他们的行为似乎又进一步证实了我们的判断。当我走进教室时，大部分的学生挤在窗口和楼下的同学互相叫骂。对此，我并不意外。一开始，我就提出请求：“请各位同学回座位坐好，我将做自我介绍，并谈谈来这里的目的。”大概有一半的学生回到了座位。为了让其他学生听清我的请求，我重复了一遍。这时，除了两位学生仍站在窗口，其他学生都在位子上坐了下来。他们是班上个子最大的两位学生。“你们好，”我对他们说，“你们中哪一位愿意告诉我，我刚才说了什么？”其中一位学生转过来，粗声粗气地说：“你要求我们马上回到座位坐下来。”这让我明白了，他把我的请求当作了命令。我接着问他：“你是否愿意告诉我，我怎样表达我的请求，你才不会认为我在发号施令？”“什么？”对于我这个问题，他很意外。于是，我解释说：“我的意思是，我怎样表达我的请求，你才会认为我也在乎你的需要呢？”他想了想，然后耸了耸肩，说道：“我不知道。”“刚才的对话已经提到了我今天想讨论的话题。我认为，表达愿望时，只要不发号施令，我们的相处就会愉快得多。我说出我的愿望，并不是要求你照我说的去做。我不知道，怎么说，你才能相信这一点。”那位学生似乎明白了我的意思，听完我的话，他就和他的同学慢悠悠地走回了座位。可见，在一些情形中，对方也许需要一些时间来了解我们提出的是请求而非命令。\n\n在印象中，如果我没照你说的去做，你就不会尊重我。如果我知道你并不想使唤我，在你叫我时，我会乐于回应你。如果你高高在上，像个盛气凌人的老板，你将会发现，你一头撞在了墙上。当你反复提醒我，你为我做的各种事情，你最好准备再次碰壁！你可以大声抱怨、责骂，但我仍不会去倒垃圾。即使你现在改变方式，我也需要时间忘记不快。\n\n遭遇他人的痛苦时，我们常常急于提建议，安慰或表达我们的态度和感受。可是，倾听意味着全心全意地体会他人的信息——这为他人充分表达痛苦创造了条件。有一句佛教格言恰如其分地描述了这种能力：“不要急着做什么，站在那里。”\n\n如果人们常常怀疑我们的诚意，那么，我们就需要好好审视自己的动机。也许，我们只是在机械地运用非暴力沟通，而忘记其目的。这时，我们就可以问自己，我们关心的是加深与人的联系，还是以“标准的”非暴力沟通方式来说话。或者，虽然我们是以非暴力沟通的方式来表达自己，我们在乎的也许只是改变他人来迎合我们的需要。\n\n当我们痛苦得无法倾听他人时，我们需要（1）体会自己的感受和需要（2）大声地提出请求（3）换一个环境。\n\n\n表达愤怒的步骤：1．停下来。呼吸。2．留意我们的指责。3．体会我们的需要。4．表达感受和尚未满足的需要。\n\n\n一旦意识到他人的感受和需要，我们就会发现彼此相同的人性。\n\n留意头脑中出现的暴力想法，而不评判它们。\n\n如果我们不够成熟，我们可能会有以下的表现：\n- 我们意识不到自己行为的后果；\n- 我们认识不到，我们并不需要通过惩罚他人来满足自己的需要；\n- 我们相信，我们有“权利”去惩罚或伤害他人，因为他们是罪有应得；\n- 我们产生了幻觉，例如，听到“某种声音”叫我们去杀人。\n\n使用防卫性的强制力，是为了保护自己或他人，而不是为了惩罚、羞辱或谴责他人。\n\n在使用惩罚性的强制力时，我们认为某些人是邪恶的，为了让他们悔改，必须给他们一点颜色看看。此时，我们希望痛苦能让他们：（1）意识到自己的过错；（2）感到懊悔；（3）改变行为。\n\n无数的例子表明了，有的时候孩子拒绝做一件对他们有益的事情，只是因为他们不想在父母的压力面前屈服。其次，即使体罚能带来立竿见影的效果，这也并不意味着，其他方法无法达到同样的效果。最后，我还担心，体罚孩子会造成不良的社会影响。如果我们把暴力作为解决问题的办法，虽然孩子可能会去做我们要求的事，但这样做难道不是在鼓励孩子用暴力来解决冲突吗？\n\n非暴力沟通表达感激的方式包含三个部分：\n- 对方做了什么事情使我们的生活得到了改善；\n- 我们有哪些需要得到了满足；\n- 我们的心情怎么样？\n\n在表达感激时，我们说出：（1）对我们有益的行为；（2）我们的哪些需要得到了满足；（3）我们的需要得到满足后，我们是什么样的心情。\n\n当别人以这样的方式表达对我们的感激时，我们可以与对方一起庆祝生命的美——既不自大，也不假谦虚。\n\n","source":"_posts/2018-03-05-feibaoligoutong.md","raw":"---\ntitle: 《非暴力沟通》划线书摘\ntags:\n  - 杂文\ndate: 2018-03-05 17:17:09\n---\n\n\n非暴力沟通的四个要素：1．观察2．感受3．需要4．请求\n<!-- more -->\n\n使用暴力的人其实是因为他们内心的宁静遭到了破坏，所以他们才会用暴力的方式维护或寻求心灵的和平。这或许是暴力的蝴蝶效应吧\n\n十岁那年，白人打了我，他们认为我太黑了；接着，黑人又打了我，他们认为我太白了。这样的耻辱也许会让任何人想报复社会。\n\n非暴力生活的一个关键就是：感激生活的赐予，而不贪心。\n\n对他人的评价实际上反映了我们的需要和价值观。\n\n印度哲学家克里希那穆提（J. Krishnamurti）曾经说，“不带评论的观察是人类智力的最高形式。”\n\n别人的行为可能会刺激我们，但并不是我们感受的根源。\n\n听到不中听的话的四种选择：1．责备自己2．指责他人3．体会自己的感受和需要4．体会他人的感受和需要\n\n\n对于大多数人来说，个人成长一般会经历三个阶段：\n- （1）“情感的奴隶”——我们认为自己有义务使他人快乐；\n- （2）“面目可憎”时期——此时，我们拒绝考虑他人的感受和需要；\n- （3）“生活的主人”——我们意识到，虽然我们对自己的意愿、感受和行动负有完全的责任，但无法为他人负责。与此同时，我们还认识到，我们无法牺牲他人来满足自己的需要。\n\n非暴力沟通实例“让私生子女像以前那样见不得人！”一位女士是救济食品发放中心的志愿者。有一天，她的同事在读报时气冲冲地说：“我们需要让私生子女像以前那样见不得人！”在过去，听到不同意见，她一般只会在心里嘀咕对方的不是。这一次，她试着运用非暴力沟通进行交流。女士：（首先试图了解同事的观察……）“你在读有关‘少女妈妈’的报道？”同事：“是的。真不可思议！有这么多少女未婚先孕！”女士：（接着了解她的感受和需要）“你担心她们的孩子没有良好的家庭环境？”同事：“当然！你知道吗？如果我那样做，我父亲会杀了我！”女士：“哦，看起来在过去少女未婚先孕后果极为严重？”同事：“是的！我们知道怀孕意味着什么！我们总是担惊受怕，而这些女孩却毫无顾忌。”女士：“你希望她们能有所顾忌？”同事：“至少恐惧和惩罚会起到一些作用！报道说有些女孩为了怀孕去和不同的男人睡觉！然后，她们生了孩子，由我们来买单！”此时，这位女士注意到两种不同的感受：1．对一些女孩故意怀孕感到震惊；2．对纳税人需要养育她们的孩子感到愤怒。她选择先关注第一种感受。女士：“现在的人不顾名誉、后果和经济状况就未婚先孕，你很难接受这个事实？”（一般来说，在存在多种感受的情况下，一个人会诉说那些还没有得到倾听的感受。因此，倾听的人无须一开始就对各种感受同时作出反馈，而可以自然地从一种感受过渡到另一种。）同事：“是的，你说最后是谁为这些孩子买单？”女士：“你希望你纳的税能有更好的用途，是这样吗？”同事：“那当然！我儿子和儿媳想再要一个孩子。可是，培养孩子太花钱了，虽然他们都有工作，但还是做不到！”女士：“你想要一个孙子，是吗？”同事：“是的，但不只是我想要……”女士：“……你还希望儿子能过上称心如意的生活……”（她继续倾听，让同事充分表达感受和愿望。）同事：“是的。只有一个孩子是很可悲的。”此时，这位女士感到同事已经平静了下来。她们沉默了片刻。她惊讶地发现，虽然她并不赞同同事的观点，但心中已无任何不满。接着，她通过非暴力沟通的四个要素表达她的看法。女士：“听到你说‘我们应该让私生子女像以前那样见不得人’（观察），我有些担心（感受），因为我希望我们每个人都乐于助人（需要）。来这里领取食物的人，有些就是‘少女妈妈’（观察），我希望她们能喜欢这里（需要）。你是否愿意告诉我，小莉和她男友进来时，你是什么心情？（请求）”她们又谈了一会儿。最后，这位女士确信，她的同事也很关心那些青少年，并热情提供服务。更为重要的是，她发现，她同时满足了自己诚实和互相尊重的需要。与此同时，她的同事也感到欣慰，因为她充分表达了对青少年未婚先孕的忧虑。通过不带敌意地分享彼此的观念，她们增进了理解，发展了友谊。如果没有运用非暴力沟通进行交流，她们的关系也许就会开始恶化。\n\n在越战期间，我被邀请去参加电视辩论。晚上在家看节目的录像带时，我十分不安，因为我很不喜欢自己的辩论方式。我告诫自己：“在下一次辩论时，决不能再这么被动。”请注意，我只是提醒自己要避免出现什么，而没有提醒自己主动做些什么。一周以后，这个节目邀请我去继续上一次的辩论。在去演播室的路上，我不断地提醒自己不要犯同样的错误。节目一开始，对手就按其上周的方式展开了辩论。他结束讲话后，大概有10秒，我努力控制自己不要按原来的方式进行回应。于是，我坐在那里，一句话也没说。可是，我一开始辩论，就发现我回应对手的方式和上次一模一样。这个教训使我明白了：如果我只是提醒自己要避免什么，而不清楚自己可以做什么，会有怎样的后果。\n\n不管是感受和需求都应该具体到某件事情上，不然你们可能对抽象的“公平对待”理解上会不一样\n\n我们提出的请求越具体越好。如果我们的意思含糊不清，别人就难以了解我们到底想要什么。有一幅卡通画描述的是一个人掉到了湖里。在湖中挣扎时，他冲着岸上的狗喊道：“快去求助！”在第二幅画中，这只狗躺在精神病医生的诊断台上。这个故事反映了人们对于“帮助”的含义可能存在不同的看法。\n\n我们越是将他人的不顺从看作是对我们的排斥，我们所表达的愿望就越有可能被看作是命令。\n\n非暴力沟通是用来帮助我们在诚实和倾听的基础上与人联系。使用非暴力沟通时，我们希望人们的改变和行动是出于对生命的爱。一旦人们相信我们看重彼此的感情，并能兼顾双方的需要，那么，他们也就会相信我们所表达的愿望是请求而非命令。\n\n坚持以非暴力沟通的方式与人沟通是很不容易的。对于父母、老师、经理以及其他处于管理位置的人来说，尤其如此。在一次研讨班中，有位母亲和我说：“马歇尔，我回家试过了，但没什么用。”于是，我请她讲讲发生了什么事情。“回家后，就像上午练习时那样，我表达了感受和需要。我并没有责备孩子。我只是说‘当我看到你没有做你答应做的家务活，我十分失望。因为我希望回家后有个干净整洁的环境’。然后，我提出了请求：我请他立即把房间收拾干净。”“听起来你已经很清楚地表达了非暴力沟通的四个要素，”我回答说，“然后呢？”“他什么都没做。”“那接下来呢？”我接着问。“我和他说，像他这样懒惰和不负责任的人是不会有什么前途的。”我注意到这位女士把请求和命令混为一谈。在她看来，非暴力沟通是否有用取决于她的“请求”是否能得到满足。在刚开始运用非暴力沟通时，我们也许会发现，有时我们只是在运用非暴力沟通的表达形式，而忘记了它所服务的目的。\n\n有一次，一所高中的管理团队请我去示范如何运用非暴力沟通与学生沟通。我要会见的学生有四十位。在学校中，他们被看作是“品行不端”的学生。我认为，像“品行不端”这样的标签会带来很消极的影响。如果一个学生被贴上这样的标签，那岂不是说他不遵守学校规矩是正常的吗？这样的标签将鼓励学生做我们不希望他们做的事，然后，他们的行为似乎又进一步证实了我们的判断。当我走进教室时，大部分的学生挤在窗口和楼下的同学互相叫骂。对此，我并不意外。一开始，我就提出请求：“请各位同学回座位坐好，我将做自我介绍，并谈谈来这里的目的。”大概有一半的学生回到了座位。为了让其他学生听清我的请求，我重复了一遍。这时，除了两位学生仍站在窗口，其他学生都在位子上坐了下来。他们是班上个子最大的两位学生。“你们好，”我对他们说，“你们中哪一位愿意告诉我，我刚才说了什么？”其中一位学生转过来，粗声粗气地说：“你要求我们马上回到座位坐下来。”这让我明白了，他把我的请求当作了命令。我接着问他：“你是否愿意告诉我，我怎样表达我的请求，你才不会认为我在发号施令？”“什么？”对于我这个问题，他很意外。于是，我解释说：“我的意思是，我怎样表达我的请求，你才会认为我也在乎你的需要呢？”他想了想，然后耸了耸肩，说道：“我不知道。”“刚才的对话已经提到了我今天想讨论的话题。我认为，表达愿望时，只要不发号施令，我们的相处就会愉快得多。我说出我的愿望，并不是要求你照我说的去做。我不知道，怎么说，你才能相信这一点。”那位学生似乎明白了我的意思，听完我的话，他就和他的同学慢悠悠地走回了座位。可见，在一些情形中，对方也许需要一些时间来了解我们提出的是请求而非命令。\n\n在印象中，如果我没照你说的去做，你就不会尊重我。如果我知道你并不想使唤我，在你叫我时，我会乐于回应你。如果你高高在上，像个盛气凌人的老板，你将会发现，你一头撞在了墙上。当你反复提醒我，你为我做的各种事情，你最好准备再次碰壁！你可以大声抱怨、责骂，但我仍不会去倒垃圾。即使你现在改变方式，我也需要时间忘记不快。\n\n遭遇他人的痛苦时，我们常常急于提建议，安慰或表达我们的态度和感受。可是，倾听意味着全心全意地体会他人的信息——这为他人充分表达痛苦创造了条件。有一句佛教格言恰如其分地描述了这种能力：“不要急着做什么，站在那里。”\n\n如果人们常常怀疑我们的诚意，那么，我们就需要好好审视自己的动机。也许，我们只是在机械地运用非暴力沟通，而忘记其目的。这时，我们就可以问自己，我们关心的是加深与人的联系，还是以“标准的”非暴力沟通方式来说话。或者，虽然我们是以非暴力沟通的方式来表达自己，我们在乎的也许只是改变他人来迎合我们的需要。\n\n当我们痛苦得无法倾听他人时，我们需要（1）体会自己的感受和需要（2）大声地提出请求（3）换一个环境。\n\n\n表达愤怒的步骤：1．停下来。呼吸。2．留意我们的指责。3．体会我们的需要。4．表达感受和尚未满足的需要。\n\n\n一旦意识到他人的感受和需要，我们就会发现彼此相同的人性。\n\n留意头脑中出现的暴力想法，而不评判它们。\n\n如果我们不够成熟，我们可能会有以下的表现：\n- 我们意识不到自己行为的后果；\n- 我们认识不到，我们并不需要通过惩罚他人来满足自己的需要；\n- 我们相信，我们有“权利”去惩罚或伤害他人，因为他们是罪有应得；\n- 我们产生了幻觉，例如，听到“某种声音”叫我们去杀人。\n\n使用防卫性的强制力，是为了保护自己或他人，而不是为了惩罚、羞辱或谴责他人。\n\n在使用惩罚性的强制力时，我们认为某些人是邪恶的，为了让他们悔改，必须给他们一点颜色看看。此时，我们希望痛苦能让他们：（1）意识到自己的过错；（2）感到懊悔；（3）改变行为。\n\n无数的例子表明了，有的时候孩子拒绝做一件对他们有益的事情，只是因为他们不想在父母的压力面前屈服。其次，即使体罚能带来立竿见影的效果，这也并不意味着，其他方法无法达到同样的效果。最后，我还担心，体罚孩子会造成不良的社会影响。如果我们把暴力作为解决问题的办法，虽然孩子可能会去做我们要求的事，但这样做难道不是在鼓励孩子用暴力来解决冲突吗？\n\n非暴力沟通表达感激的方式包含三个部分：\n- 对方做了什么事情使我们的生活得到了改善；\n- 我们有哪些需要得到了满足；\n- 我们的心情怎么样？\n\n在表达感激时，我们说出：（1）对我们有益的行为；（2）我们的哪些需要得到了满足；（3）我们的需要得到满足后，我们是什么样的心情。\n\n当别人以这样的方式表达对我们的感激时，我们可以与对方一起庆祝生命的美——既不自大，也不假谦虚。\n\n","slug":"feibaoligoutong","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a82009v5gqoxwckudp6"},{"title":"Vim 解决复制黏贴格式错乱的问题","date":"2018-03-03T16:19:33.000Z","_content":"\n\nVim 让我头疼了很长时间的黏贴剪切版乱码的问题终于得到了解决，跟从 Vim 复制到剪切版是一样的道理，使用缓存区，妈蛋，为什么我没有早点想到。\n\n<!-- more --><!-- toc -->\n当复制系统内容后按键 `\"+p` 即可将文本原格式黏贴到 Vim 中\n\n方便的做法是使用 map 映射，修改 `~/.vimrc`\n```vim\nnnoremap <C-p> \"+p\ninoremap <C-p> <esc>\"+pkddi\n```\n这样不管普通模式还是插入模式，使用 `<ctrl> + p` 既可以完成黏贴\n\n- [Vim 复制粘贴探秘](http://www.worldhello.net/2010/12/08/2190.html)\n","source":"_posts/2018-03-03-vim-paste-messy-code.md","raw":"---\ntitle: Vim 解决复制黏贴格式错乱的问题\ntags:\n  - vim\ndate: 2018-03-03 16:19:33\n---\n\n\nVim 让我头疼了很长时间的黏贴剪切版乱码的问题终于得到了解决，跟从 Vim 复制到剪切版是一样的道理，使用缓存区，妈蛋，为什么我没有早点想到。\n\n<!-- more --><!-- toc -->\n当复制系统内容后按键 `\"+p` 即可将文本原格式黏贴到 Vim 中\n\n方便的做法是使用 map 映射，修改 `~/.vimrc`\n```vim\nnnoremap <C-p> \"+p\ninoremap <C-p> <esc>\"+pkddi\n```\n这样不管普通模式还是插入模式，使用 `<ctrl> + p` 既可以完成黏贴\n\n- [Vim 复制粘贴探秘](http://www.worldhello.net/2010/12/08/2190.html)\n","slug":"vim-paste-messy-code","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a83009x5gqocs68fvrq"},{"title":"Javascript onkeydown onkeypress onkeyup 区别","date":"2018-03-04T21:17:18.000Z","_content":"\n\nonkeydown onkeypress onkeyup 区别\n\n<!-- more --><!-- toc -->\n```javascript\n<input id=\"input\" value=\"default\" type=\"text\" />\n<script>\nvar input = document.getElementById('input');\ninput.onkeydown = function() {\n    console.log('onkeydown ' + this.value);\n}\ninput.onkeypress = function() {\n    console.log('onkeypress ' + this.value);\n}\ninput.onkeyup = function() {\n    console.log('onkeyup ' + this.value);\n}\n</script>\n```\n现在运行这个例子，在 `input` 中输入 s 键，日志打印\n```javascript\nonkeydown\nonkeypress\nonkeyup s\n```\n与此可见，他们的运行顺序为 `onkeydown > onkeypress > onkeyup`，而 `onkeyup` 是在内容输入完毕后才会触发，这样如果需要拦截输入操作，就要在 `onkeydown, onkeypress` 时进行判断。\n\n`onkeypress` 跟其他两者的区别在于\n- 不识别中文输入法\n- 无法响应功能键（如，delete，backspace，shift等）\n","source":"_posts/2018-03-04-onkeydown-onkeypress-onkeyup.md","raw":"---\ntitle: Javascript onkeydown onkeypress onkeyup 区别\ntags:\n  - javascript\ndate: 2018-03-04 21:17:18\n---\n\n\nonkeydown onkeypress onkeyup 区别\n\n<!-- more --><!-- toc -->\n```javascript\n<input id=\"input\" value=\"default\" type=\"text\" />\n<script>\nvar input = document.getElementById('input');\ninput.onkeydown = function() {\n    console.log('onkeydown ' + this.value);\n}\ninput.onkeypress = function() {\n    console.log('onkeypress ' + this.value);\n}\ninput.onkeyup = function() {\n    console.log('onkeyup ' + this.value);\n}\n</script>\n```\n现在运行这个例子，在 `input` 中输入 s 键，日志打印\n```javascript\nonkeydown\nonkeypress\nonkeyup s\n```\n与此可见，他们的运行顺序为 `onkeydown > onkeypress > onkeyup`，而 `onkeyup` 是在内容输入完毕后才会触发，这样如果需要拦截输入操作，就要在 `onkeydown, onkeypress` 时进行判断。\n\n`onkeypress` 跟其他两者的区别在于\n- 不识别中文输入法\n- 无法响应功能键（如，delete，backspace，shift等）\n","slug":"onkeydown-onkeypress-onkeyup","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a84009z5gqophc91j7s"},{"title":"MacOS /dev/urandom 报错 tr Illegal byte sequence","date":"2018-03-07T10:06:33.000Z","_content":"\n> tr: Illegal byte sequence\n\n<!-- more -->\n在使用 MacOS 环境运行\n```bash\ntr -dc A-Za-z0-9_\\!\\@\\#\\$\\%\\^\\&\\*\\(\\)-+= < /dev/urandom | head -c 32 | xargs\n```\n来生成随机数时，会报非法字符的错误，主要是因为 MacOS 在处理 unicode 字符时跟 Linux 会不一样，此时需要指定一个语言环境才行，如：C\n```bash\nLC_CTYPE=C tr -dc A-Za-z0-9_\\!\\@\\#\\$\\%\\^\\&\\*\\(\\)-+= < /dev/urandom | head -c 32 | xargs\n```\n","source":"_posts/2018-03-07-tr-Illegal-byte-sequence.md","raw":"---\ntitle: MacOS /dev/urandom 报错 tr Illegal byte sequence\ntags:\n  - mac\ndate: 2018-03-07 10:06:33\n---\n\n> tr: Illegal byte sequence\n\n<!-- more -->\n在使用 MacOS 环境运行\n```bash\ntr -dc A-Za-z0-9_\\!\\@\\#\\$\\%\\^\\&\\*\\(\\)-+= < /dev/urandom | head -c 32 | xargs\n```\n来生成随机数时，会报非法字符的错误，主要是因为 MacOS 在处理 unicode 字符时跟 Linux 会不一样，此时需要指定一个语言环境才行，如：C\n```bash\nLC_CTYPE=C tr -dc A-Za-z0-9_\\!\\@\\#\\$\\%\\^\\&\\*\\(\\)-+= < /dev/urandom | head -c 32 | xargs\n```\n","slug":"tr-Illegal-byte-sequence","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8400a15gqo9096aubj"},{"title":"Python 常用装饰器","date":"2018-03-08T10:01:36.000Z","_content":"\n\n收录一些常用的装饰器\n\n<!-- more --><!-- toc -->\n## JSONP\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom functools import wraps\n\ndef jsonp(func):\n    \"\"\"Wraps JSONified output for JSONP requests.\"\"\"\n\n    @wraps(func)\n    def decorated_function(*args, **kwargs):\n        callback = request.args.get('callback', False)\n        if callback:\n            data = str(func(*args, **kwargs).data)\n            content = str(callback) + '(' + data + ')'\n            mimetype = 'application/javascript'\n            return current_app.response_class(content, mimetype=mimetype)\n        else:\n            return func(*args, **kwargs)\n\n    return decorated_function\n```\n\n## 跨域\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom flask import make_response\nfrom flask import current_app\nfrom flask import request\nfrom flask import Response\nfrom flask import g\nfrom functools import wraps\nfrom functools import update_wrapper\n\ndef cross_domain(origin=None, methods=None, headers=None,\n                 max_age=21600, attach_to_all=True,\n                 automatic_options=True):\n    \"\"\"跨域\"\"\"\n    if methods is not None:\n        methods = ', '.join(sorted(x.upper() for x in methods))\n    if headers is not None and not isinstance(headers, str):\n        headers = ', '.join(x.upper() for x in headers)\n    if not isinstance(origin, str):\n        origin = ', '.join(origin)\n    if isinstance(max_age, timedelta):\n        max_age = max_age.total_seconds()\n\n    def get_methods():\n        if methods is not None:\n            return methods\n\n        options_resp = current_app.make_default_options_response()\n        return options_resp.headers['allow']\n\n    def decorator(f):\n        def wrapped_function(*args, **kwargs):\n            if automatic_options and request.method == 'OPTIONS':\n                resp = current_app.make_default_options_response()\n            else:\n                resp = make_response(f(*args, **kwargs))\n            if not attach_to_all and request.method != 'OPTIONS':\n                return resp\n\n            h = resp.headers\n\n            h['Access-Control-Allow-Origin'] = origin\n            h['Access-Control-Allow-Methods'] = get_methods()\n            h['Access-Control-Max-Age'] = str(max_age)\n            if headers is not None:\n                h['Access-Control-Allow-Headers'] = headers\n            return resp\n\n        f.provide_automatic_options = False\n        return update_wrapper(wrapped_function, f)\n\n    return decorator\n\n```\n\n## 检查必传参数\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom flask import make_response\nfrom flask import current_app\nfrom flask import request\nfrom flask import Response\nfrom flask import g\nfrom flask import jsonify\nfrom functools import wraps\nfrom functools import update_wrapper\n\ndef args_required(*params):\n    \"\"\"\n    检查参数\n    \"\"\"\n    def _wrapper(func):\n        @wraps(func)\n        def _wrapped(*args, **kwargs):\n            content_type = request.content_type\n            _args = None\n            if content_type == 'application/x-www-form-urlencoded':\n                _args = request.form\n            elif content_type == 'application/json':\n                _args = request.json\n            else:\n                _args = request.args\n            diff = list(params) - dict.fromkeys(list(_args.keys())).keys()\n            if diff:\n                return make_response(jsonify(\n                    {\n                        \"message\": 'args {} is necessary'.format(diff),\n                        \"status\": 403,\n                        \"version\": int(time.time())\n                    }\n                ), 403)\n            return func(*args, **kwargs)\n\n        return _wrapped\n\n    return _wrapper\n```\n","source":"_posts/2018-03-08-python-common-decorator.md","raw":"---\ntitle: Python 常用装饰器\ntags:\n  - python\ndate: 2018-03-08 10:01:36\n---\n\n\n收录一些常用的装饰器\n\n<!-- more --><!-- toc -->\n## JSONP\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom functools import wraps\n\ndef jsonp(func):\n    \"\"\"Wraps JSONified output for JSONP requests.\"\"\"\n\n    @wraps(func)\n    def decorated_function(*args, **kwargs):\n        callback = request.args.get('callback', False)\n        if callback:\n            data = str(func(*args, **kwargs).data)\n            content = str(callback) + '(' + data + ')'\n            mimetype = 'application/javascript'\n            return current_app.response_class(content, mimetype=mimetype)\n        else:\n            return func(*args, **kwargs)\n\n    return decorated_function\n```\n\n## 跨域\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom flask import make_response\nfrom flask import current_app\nfrom flask import request\nfrom flask import Response\nfrom flask import g\nfrom functools import wraps\nfrom functools import update_wrapper\n\ndef cross_domain(origin=None, methods=None, headers=None,\n                 max_age=21600, attach_to_all=True,\n                 automatic_options=True):\n    \"\"\"跨域\"\"\"\n    if methods is not None:\n        methods = ', '.join(sorted(x.upper() for x in methods))\n    if headers is not None and not isinstance(headers, str):\n        headers = ', '.join(x.upper() for x in headers)\n    if not isinstance(origin, str):\n        origin = ', '.join(origin)\n    if isinstance(max_age, timedelta):\n        max_age = max_age.total_seconds()\n\n    def get_methods():\n        if methods is not None:\n            return methods\n\n        options_resp = current_app.make_default_options_response()\n        return options_resp.headers['allow']\n\n    def decorator(f):\n        def wrapped_function(*args, **kwargs):\n            if automatic_options and request.method == 'OPTIONS':\n                resp = current_app.make_default_options_response()\n            else:\n                resp = make_response(f(*args, **kwargs))\n            if not attach_to_all and request.method != 'OPTIONS':\n                return resp\n\n            h = resp.headers\n\n            h['Access-Control-Allow-Origin'] = origin\n            h['Access-Control-Allow-Methods'] = get_methods()\n            h['Access-Control-Max-Age'] = str(max_age)\n            if headers is not None:\n                h['Access-Control-Allow-Headers'] = headers\n            return resp\n\n        f.provide_automatic_options = False\n        return update_wrapper(wrapped_function, f)\n\n    return decorator\n\n```\n\n## 检查必传参数\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom flask import make_response\nfrom flask import current_app\nfrom flask import request\nfrom flask import Response\nfrom flask import g\nfrom flask import jsonify\nfrom functools import wraps\nfrom functools import update_wrapper\n\ndef args_required(*params):\n    \"\"\"\n    检查参数\n    \"\"\"\n    def _wrapper(func):\n        @wraps(func)\n        def _wrapped(*args, **kwargs):\n            content_type = request.content_type\n            _args = None\n            if content_type == 'application/x-www-form-urlencoded':\n                _args = request.form\n            elif content_type == 'application/json':\n                _args = request.json\n            else:\n                _args = request.args\n            diff = list(params) - dict.fromkeys(list(_args.keys())).keys()\n            if diff:\n                return make_response(jsonify(\n                    {\n                        \"message\": 'args {} is necessary'.format(diff),\n                        \"status\": 403,\n                        \"version\": int(time.time())\n                    }\n                ), 403)\n            return func(*args, **kwargs)\n\n        return _wrapped\n\n    return _wrapper\n```\n","slug":"python-common-decorator","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8600a35gqohf2ar4n6"},{"title":"Python 解析单引号 JSON 格式数据报错","date":"2018-03-06T10:28:12.000Z","_content":"\n\n> JSONDecodeError Expecting property name enclosed in double quotes line 1 column 2 (char 1)\n\nPython 在使用 `json.loads()` 方法时会报一个标题提到的错误，这是因为 JSON 格式的问题。\n<!-- more -->\n首先 JSON 格式数据本身规定字符串必须使用双引号来包裹，而 `loads()` 方法又没有做这方面的处理，想要解决 BUG 笨点办法就是用双引号替换单引号\n\n当然更好的办法就是使用 [ast](https://docs.python.org/3/library/ast.html#ast-helpers) 模块\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport ast\n\ntext = \"{'name': 'wxnacy'}\"\nres = ast.literal_eval(text)\nprint(res)  # => {'name': 'wxnacy'}\n```\n","source":"_posts/2018-03-06-python-json-double-quotes-error.md","raw":"---\ntitle: Python 解析单引号 JSON 格式数据报错\ntags:\n  - python\ndate: 2018-03-06 10:28:12\n---\n\n\n> JSONDecodeError Expecting property name enclosed in double quotes line 1 column 2 (char 1)\n\nPython 在使用 `json.loads()` 方法时会报一个标题提到的错误，这是因为 JSON 格式的问题。\n<!-- more -->\n首先 JSON 格式数据本身规定字符串必须使用双引号来包裹，而 `loads()` 方法又没有做这方面的处理，想要解决 BUG 笨点办法就是用双引号替换单引号\n\n当然更好的办法就是使用 [ast](https://docs.python.org/3/library/ast.html#ast-helpers) 模块\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport ast\n\ntext = \"{'name': 'wxnacy'}\"\nres = ast.literal_eval(text)\nprint(res)  # => {'name': 'wxnacy'}\n```\n","slug":"python-json-double-quotes-error","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8700a55gqo9hhp1fk7"},{"title":"Mac 上反编译 Android APK","date":"2018-03-09T11:26:24.000Z","_content":"\n\n最近在对一款 app 软件进行抓包，但是接口的返回数据是加密的，没办法只能试着反编译 apk，然后分析它的代码，当然我是抱着学习的心态来进行如下操作的\n\n<!-- more --><!-- toc -->\n## 条件\n- JDK 7 及以上\n- demo.apk 想要反编译的 apk\n- Apktool 工具\n- dex2jar\n- JD-GUI\n\n## Apktool\nJDK 就不再说了，如果不知道怎么装，请移步google\n\n首先安装 [Apktool](https://ibotpeaches.github.io/Apktool/install/) 环境，这是反编译的基础，接下跟紧我的脚步\n\n下载 Apktool 命令脚本\n```bash\n$ wget https://raw.githubusercontent.com/iBotPeaches/Apktool/master/scripts/osx/apktool\n$ chmod +x apktool\n$ mv apktool /usr/local/bin\n```\n这里需要注意名字不要加上 `.sh` 后缀，然后从 https://bitbucket.org/iBotPeaches/apktool/downloads/ 下载最新的 jar 包\n```bash\n$ mv apktool_x.x.x.jar apktool.jar\n$ chmod +x apktool.jar\n$ mv apktool.jar /usr/local/bin\n$ apktool --version\n2.3.1\n```\n这样我们就安装好了 Apktool，下面我们来测试下反编译和编译是否能成功\n```bash\n$ apktool d demo.apk\n\nI: Using Apktool 2.3.1 on sp.apk\nI: Loading resource table...\nI: Decoding AndroidManifest.xml with resources...\nS: WARNING: Could not write to (/Users/wxnacy/Library/apktool/framework), using /var/folders/kz/8syfctw919zdt3shr9w5j8v00000gn/T/ instead...\nS: Please be aware this is a volatile directory and frameworks could go missing, please utilize --frame-path if the default storage directory is unavailable\nI: Loading resource table from file: /var/folders/kz/8syfctw919zdt3shr9w5j8v00000gn/T/1.apk\nI: Regular manifest package...\nI: Decoding file-resources...\nI: Decoding values */* XMLs...\nI: Baksmaling classes.dex...\nI: Copying assets and libs...\nI: Copying unknown files...\nI: Copying original files...\n```\n运行命令后，如果出现上述类似信息，并在当前目录下生成一个 demo 文件夹，代表反编译成功了，文件夹内就是反编译后的内容\n\n也可以将文件夹反编译为 apk\n```bash\n$ apktool b demo\n\nI: Using Apktool 2.3.1\nI: Checking whether sources has changed...\nI: Smaling smali folder into classes.dex...\nI: Checking whether resources has changed...\nI: Building resources...\nS: WARNING: Could not write to (/Users/wxnacy/Library/apktool/framework), using /var/folders/kz/8syfctw919zdt3shr9w5j8v00000gn/T/ instead...\nS: Please be aware this is a volatile directory and frameworks could go missing, please utilize --frame-path if the default storage directory is unavailable\nI: Copying libs... (/lib)\nI: Building apk file...\n```\n在 demo 文件夹中生成 `build, dist` 两个文件夹，这就是编译后生成的文件，apk 在 dist 中\n\n## dex2jar\n接下来我们需要使用 dex2jar 将 apk 转为 jar 文件，首先从网址 https://github.com/pxb1988/dex2jar/releases 下载最新版的 dex2jar，并解压到 dex2jar 文件夹\n```bash\n$ cd dex2jar\n# 添加执行权限\n$ chmod +x d2j_invoke.sh\n$ chmod +x d2j-dex2jar.sh\n$ ./d2j-dex2jar.sh ~/demo.apk\n```\n随后会在当前目录得到 demo-dex2jar.jar 文件\n\n## JD-GUI\n最后就剩打开源码了，从 http://jd.benow.ca/ 中下载最新的 jar 文件，在电脑上打开这个文件会启动一个 jar 客户端，并将生成的 demo-dex2jar.jar 拖入其中即可\n![/images/uncomplete.png](/images/uncomplete.png)\n","source":"_posts/2018-03-09-apk-decompile.md","raw":"---\ntitle: Mac 上反编译 Android APK\ntags:\n  - mac\n  - 工具\ndate: 2018-03-09 11:26:24\n---\n\n\n最近在对一款 app 软件进行抓包，但是接口的返回数据是加密的，没办法只能试着反编译 apk，然后分析它的代码，当然我是抱着学习的心态来进行如下操作的\n\n<!-- more --><!-- toc -->\n## 条件\n- JDK 7 及以上\n- demo.apk 想要反编译的 apk\n- Apktool 工具\n- dex2jar\n- JD-GUI\n\n## Apktool\nJDK 就不再说了，如果不知道怎么装，请移步google\n\n首先安装 [Apktool](https://ibotpeaches.github.io/Apktool/install/) 环境，这是反编译的基础，接下跟紧我的脚步\n\n下载 Apktool 命令脚本\n```bash\n$ wget https://raw.githubusercontent.com/iBotPeaches/Apktool/master/scripts/osx/apktool\n$ chmod +x apktool\n$ mv apktool /usr/local/bin\n```\n这里需要注意名字不要加上 `.sh` 后缀，然后从 https://bitbucket.org/iBotPeaches/apktool/downloads/ 下载最新的 jar 包\n```bash\n$ mv apktool_x.x.x.jar apktool.jar\n$ chmod +x apktool.jar\n$ mv apktool.jar /usr/local/bin\n$ apktool --version\n2.3.1\n```\n这样我们就安装好了 Apktool，下面我们来测试下反编译和编译是否能成功\n```bash\n$ apktool d demo.apk\n\nI: Using Apktool 2.3.1 on sp.apk\nI: Loading resource table...\nI: Decoding AndroidManifest.xml with resources...\nS: WARNING: Could not write to (/Users/wxnacy/Library/apktool/framework), using /var/folders/kz/8syfctw919zdt3shr9w5j8v00000gn/T/ instead...\nS: Please be aware this is a volatile directory and frameworks could go missing, please utilize --frame-path if the default storage directory is unavailable\nI: Loading resource table from file: /var/folders/kz/8syfctw919zdt3shr9w5j8v00000gn/T/1.apk\nI: Regular manifest package...\nI: Decoding file-resources...\nI: Decoding values */* XMLs...\nI: Baksmaling classes.dex...\nI: Copying assets and libs...\nI: Copying unknown files...\nI: Copying original files...\n```\n运行命令后，如果出现上述类似信息，并在当前目录下生成一个 demo 文件夹，代表反编译成功了，文件夹内就是反编译后的内容\n\n也可以将文件夹反编译为 apk\n```bash\n$ apktool b demo\n\nI: Using Apktool 2.3.1\nI: Checking whether sources has changed...\nI: Smaling smali folder into classes.dex...\nI: Checking whether resources has changed...\nI: Building resources...\nS: WARNING: Could not write to (/Users/wxnacy/Library/apktool/framework), using /var/folders/kz/8syfctw919zdt3shr9w5j8v00000gn/T/ instead...\nS: Please be aware this is a volatile directory and frameworks could go missing, please utilize --frame-path if the default storage directory is unavailable\nI: Copying libs... (/lib)\nI: Building apk file...\n```\n在 demo 文件夹中生成 `build, dist` 两个文件夹，这就是编译后生成的文件，apk 在 dist 中\n\n## dex2jar\n接下来我们需要使用 dex2jar 将 apk 转为 jar 文件，首先从网址 https://github.com/pxb1988/dex2jar/releases 下载最新版的 dex2jar，并解压到 dex2jar 文件夹\n```bash\n$ cd dex2jar\n# 添加执行权限\n$ chmod +x d2j_invoke.sh\n$ chmod +x d2j-dex2jar.sh\n$ ./d2j-dex2jar.sh ~/demo.apk\n```\n随后会在当前目录得到 demo-dex2jar.jar 文件\n\n## JD-GUI\n最后就剩打开源码了，从 http://jd.benow.ca/ 中下载最新的 jar 文件，在电脑上打开这个文件会启动一个 jar 客户端，并将生成的 demo-dex2jar.jar 拖入其中即可\n![/images/uncomplete.png](/images/uncomplete.png)\n","slug":"apk-decompile","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8800a75gqogrgg27xv"},{"title":"Python 使用 PyCrypto 进行散列和加解密算法","date":"2018-03-10T16:51:46.000Z","_content":"\n\n我在 [Node 使用 crypto-js 进行散列和加解密算法](/2017/12/20/cryptojs/)中简单介绍了什么是散列和加解密算法，并了解了在 Node 中的使用方式，今天主要介绍如何在 Python 进行这些操作。\n\n<!-- more --><!-- toc -->\n[PyCrypto](https://www.dlitz.net/software/pycrypto/) 提供 安全的哈希函数和各种加密算法，支持Python 2.1 以上\n## 下载\n```bash\n$ pip install pycrypto\n```\n## MD5\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom Crypto.Hash import MD5\n\ndef md5(text):\n    hash = MD5.new()\n    hash.update('message'.encode('utf-8'))\n    return hash.hexdigest()\nif __name__ == '__main__':\n    print(md5('message'))   # => '78e731027d8fd50ed642340b7c9a63b3'\n```\n其他哈希函数见[文档](https://www.dlitz.net/software/pycrypto/api/current/)\n另外还有一种方法不需要外部依赖，使用 Python 的 hashlib 模块\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nimport hashlib\n\ndef md5(text):\n    hash = hashlib.md5()\n    hash.update(text.encode('utf-8'))\n    return hash.hexdigest()\n\nif __name__ == \"__main__\":\n    print(md5('message'))\n```\n\n## AES\n[这里](https://www.dlitz.net/software/pycrypto/api/current/)是 AES 的文档，只看他的文档运行加密过程是没问题，但是想要在项目里应用就比较蛋疼，首先加密的是个二进制数据就是个问题，所以我写了一个 Demo 来描述在项目中加解密的过程。\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfrom Crypto import Random\nfrom Crypto.Cipher import AES\nfrom binascii import b2a_hex, a2b_hex\n\nclass AESUtils():\n    @classmethod\n    def generate_key(cls):\n        \"\"\"\n        在对称密码中使用的密钥。 它必须是16（AES-128），24（AES-192）或32（AES-256）字节长。\n        先用 Random 生成一个16位的二进制数据，并转为16进制数据变成 32 位\n        \"\"\"\n        return b2a_hex(Random.new().read(16)).decode('utf-8')\n\n    def __init__(self, key):\n        self.key = key\n        self.mode = AES.MODE_CBC\n        self.iv = Random.new().read(16)\n\n    def encrypt(self, text):\n        \"\"\"\n        需要加密的文本，长度必须为 16 的倍数，不够的位用空格补全\n        \"\"\"\n        length = 16\n        count = len(text)\n        add = length - (count % length)\n        text = text + ('\\0' * add)\n        aes = AES.new(self.key, self.mode, self.iv)\n        secret = aes.encrypt(text)\n        # 加密后返回的是二进制数据，需要转为 16 进制的字符串\n        secret = b2a_hex(secret).decode('utf-8')\n        return secret\n\n    def decrypt(self, secret):\n        \"\"\"\n        解密时先将文本转为二进制在操作\n        \"\"\"\n        aes = AES.new(self.key, self.mode, self.iv)\n        plain_text = aes.decrypt(a2b_hex(secret)).decode(\"utf-8\")\n\n        return plain_text.rstrip('\\x00')\n\nif __name__ == \"__main__\":\n    key = AESUtils.generate_key()\n    print(key)\n    aes = AESUtils(key)\n    secret = aes.encrypt('message')\n    print(secret)\n    plain = aes.decrypt(secret)\n    print(plain)\n```\n其他的对称加密类型详见[文档](https://www.dlitz.net/software/pycrypto/api/current/)\n\n- 相关阅读\n- [MD5，SHA，HMAC ，AES 在线加密计算](/2017/12/19/tool-crypto/)\n- [Node 使用 crypto-js 进行散列和加解密算法](/2017/12/20/cryptojs/)\n","source":"_posts/2018-03-10-python-crypto.md","raw":"---\ntitle: Python 使用 PyCrypto 进行散列和加解密算法\ntags:\n  - python\ndate: 2018-03-10 16:51:46\n---\n\n\n我在 [Node 使用 crypto-js 进行散列和加解密算法](/2017/12/20/cryptojs/)中简单介绍了什么是散列和加解密算法，并了解了在 Node 中的使用方式，今天主要介绍如何在 Python 进行这些操作。\n\n<!-- more --><!-- toc -->\n[PyCrypto](https://www.dlitz.net/software/pycrypto/) 提供 安全的哈希函数和各种加密算法，支持Python 2.1 以上\n## 下载\n```bash\n$ pip install pycrypto\n```\n## MD5\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom Crypto.Hash import MD5\n\ndef md5(text):\n    hash = MD5.new()\n    hash.update('message'.encode('utf-8'))\n    return hash.hexdigest()\nif __name__ == '__main__':\n    print(md5('message'))   # => '78e731027d8fd50ed642340b7c9a63b3'\n```\n其他哈希函数见[文档](https://www.dlitz.net/software/pycrypto/api/current/)\n另外还有一种方法不需要外部依赖，使用 Python 的 hashlib 模块\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nimport hashlib\n\ndef md5(text):\n    hash = hashlib.md5()\n    hash.update(text.encode('utf-8'))\n    return hash.hexdigest()\n\nif __name__ == \"__main__\":\n    print(md5('message'))\n```\n\n## AES\n[这里](https://www.dlitz.net/software/pycrypto/api/current/)是 AES 的文档，只看他的文档运行加密过程是没问题，但是想要在项目里应用就比较蛋疼，首先加密的是个二进制数据就是个问题，所以我写了一个 Demo 来描述在项目中加解密的过程。\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfrom Crypto import Random\nfrom Crypto.Cipher import AES\nfrom binascii import b2a_hex, a2b_hex\n\nclass AESUtils():\n    @classmethod\n    def generate_key(cls):\n        \"\"\"\n        在对称密码中使用的密钥。 它必须是16（AES-128），24（AES-192）或32（AES-256）字节长。\n        先用 Random 生成一个16位的二进制数据，并转为16进制数据变成 32 位\n        \"\"\"\n        return b2a_hex(Random.new().read(16)).decode('utf-8')\n\n    def __init__(self, key):\n        self.key = key\n        self.mode = AES.MODE_CBC\n        self.iv = Random.new().read(16)\n\n    def encrypt(self, text):\n        \"\"\"\n        需要加密的文本，长度必须为 16 的倍数，不够的位用空格补全\n        \"\"\"\n        length = 16\n        count = len(text)\n        add = length - (count % length)\n        text = text + ('\\0' * add)\n        aes = AES.new(self.key, self.mode, self.iv)\n        secret = aes.encrypt(text)\n        # 加密后返回的是二进制数据，需要转为 16 进制的字符串\n        secret = b2a_hex(secret).decode('utf-8')\n        return secret\n\n    def decrypt(self, secret):\n        \"\"\"\n        解密时先将文本转为二进制在操作\n        \"\"\"\n        aes = AES.new(self.key, self.mode, self.iv)\n        plain_text = aes.decrypt(a2b_hex(secret)).decode(\"utf-8\")\n\n        return plain_text.rstrip('\\x00')\n\nif __name__ == \"__main__\":\n    key = AESUtils.generate_key()\n    print(key)\n    aes = AESUtils(key)\n    secret = aes.encrypt('message')\n    print(secret)\n    plain = aes.decrypt(secret)\n    print(plain)\n```\n其他的对称加密类型详见[文档](https://www.dlitz.net/software/pycrypto/api/current/)\n\n- 相关阅读\n- [MD5，SHA，HMAC ，AES 在线加密计算](/2017/12/19/tool-crypto/)\n- [Node 使用 crypto-js 进行散列和加解密算法](/2017/12/20/cryptojs/)\n","slug":"python-crypto","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8900a95gqom6etrbti"},{"title":"Python binascii 二进制数据与 ASCII 编码的转换","date":"2018-03-11T14:58:18.000Z","_content":"\n\nbinascii 模块中包含了很多二进制和 ASCII 编码的相互转换的方法\n\n<!-- more --><!-- toc -->\n\n## 16 进制转换\n```bash\n>>> import binascii as ba\n>>> plain = 'wxnacy'\n>>> ba.b2a_hex(plain.encode('utf-8'))\nb'77786e616379'\n>>> ba.a2b_hex('77786e616379')\nb'wxnacy'\n```\n另外还有 `hexlify()` 方法与 `b2a_hex()` 相同，`unhexlify()` 方法与 `a2b_hex()` 相同。\n\n## base64 编码\n```bash\n>>> import binascii as ba\n>>> plain = 'wxnacy'\n>>> ba.b2a_base64(plain.encode('utf-8'))\nb'd3huYWN5\\n'\n>>> ba.a2b_base64('d3huYWN5\\n')\nb'wxnacy'\n```\n其他用法详见[文档](https://docs.python.org/2/library/binascii.html)\n","source":"_posts/2018-03-11-binascii.md","raw":"---\ntitle: Python binascii 二进制数据与 ASCII 编码的转换\ntags:\n  - python\ndate: 2018-03-11 14:58:18\n---\n\n\nbinascii 模块中包含了很多二进制和 ASCII 编码的相互转换的方法\n\n<!-- more --><!-- toc -->\n\n## 16 进制转换\n```bash\n>>> import binascii as ba\n>>> plain = 'wxnacy'\n>>> ba.b2a_hex(plain.encode('utf-8'))\nb'77786e616379'\n>>> ba.a2b_hex('77786e616379')\nb'wxnacy'\n```\n另外还有 `hexlify()` 方法与 `b2a_hex()` 相同，`unhexlify()` 方法与 `a2b_hex()` 相同。\n\n## base64 编码\n```bash\n>>> import binascii as ba\n>>> plain = 'wxnacy'\n>>> ba.b2a_base64(plain.encode('utf-8'))\nb'd3huYWN5\\n'\n>>> ba.a2b_base64('d3huYWN5\\n')\nb'wxnacy'\n```\n其他用法详见[文档](https://docs.python.org/2/library/binascii.html)\n","slug":"binascii","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8900ab5gqocww0af7p"},{"title":"Unix /dev/random 与 /dev/urandom","date":"2018-03-12T11:37:41.000Z","_content":"\n> 在UNIX操作系统（包括类UNIX系统）中，[/dev/random](https://zh.wikipedia.org/wiki//dev/random) 是一个特殊的设备文件，可以用作随机数发生器或伪随机数发生器。\n\n<!-- more -->\n`/dev/urandom` 是 `/dev/random` 一个副本，非阻塞的随机数发生器，它会重复使用熵池中的数据以产生伪随机数据。这表示对 `/dev/urandom` 的读取操作不会产生阻塞，但其输出的熵可能小于 `/dev/random` 的。它可以作为生成较低强度密码的伪随机数生成器，不建议用于生成高强度长期密码。\n\n常用的生成随机数的方法\n```bash\ntr -dc A-Za-z0-9_\\!\\@\\#\\$\\%\\^\\&\\*\\(\\)-+= < /dev/urandom | head -c 32 | xargs\n```\n该命令生成 32 位的带有 `A-Za-z0-9_!@#$%^&*()-+=` 的随机数，在 MacOS 中需要指定语言环境为 C 语言才行\n```bash\nLC_CTYPE=C tr -dc A-Za-z0-9_\\!\\@\\#\\$\\%\\^\\&\\*\\(\\)-+= < /dev/urandom | head -c 32 | xargs\n```\n\n- [/dev/random](https://zh.wikipedia.org/wiki//dev/random)\n- [/dev/random和/dev/urandom的一点备忘](http://blog.csdn.net/ohmygirl/article/details/40385083)\n","source":"_posts/2018-03-12-dev-random.md","raw":"---\ntitle: Unix /dev/random 与 /dev/urandom\ntags:\n  - linux\ndate: 2018-03-12 11:37:41\n---\n\n> 在UNIX操作系统（包括类UNIX系统）中，[/dev/random](https://zh.wikipedia.org/wiki//dev/random) 是一个特殊的设备文件，可以用作随机数发生器或伪随机数发生器。\n\n<!-- more -->\n`/dev/urandom` 是 `/dev/random` 一个副本，非阻塞的随机数发生器，它会重复使用熵池中的数据以产生伪随机数据。这表示对 `/dev/urandom` 的读取操作不会产生阻塞，但其输出的熵可能小于 `/dev/random` 的。它可以作为生成较低强度密码的伪随机数生成器，不建议用于生成高强度长期密码。\n\n常用的生成随机数的方法\n```bash\ntr -dc A-Za-z0-9_\\!\\@\\#\\$\\%\\^\\&\\*\\(\\)-+= < /dev/urandom | head -c 32 | xargs\n```\n该命令生成 32 位的带有 `A-Za-z0-9_!@#$%^&*()-+=` 的随机数，在 MacOS 中需要指定语言环境为 C 语言才行\n```bash\nLC_CTYPE=C tr -dc A-Za-z0-9_\\!\\@\\#\\$\\%\\^\\&\\*\\(\\)-+= < /dev/urandom | head -c 32 | xargs\n```\n\n- [/dev/random](https://zh.wikipedia.org/wiki//dev/random)\n- [/dev/random和/dev/urandom的一点备忘](http://blog.csdn.net/ohmygirl/article/details/40385083)\n","slug":"dev-random","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8a00ad5gqo85ouku13"},{"title":"又一次打鸡血","date":"2018-03-13T16:55:58.000Z","_content":"\n\n今天又一次被打了鸡血\n<!-- more -->\n这两天又在听老罗的一些吹牛逼的视频，突然就跑去 Google 搜索了“罗永浩多长时间学好的英语”，其实关于他学英语的经历已经听视频讲过好多次了，但还是想再看看这类的文字，给自己打打血，毕竟英语这块老大难，虽然我一直没学好，但是又不想放弃。\n\n然后就出现了这篇文章[我只用了两年时间自学英语，成功逆袭，彻底改变人生](http://bbs.tianya.cn/post-english-265706-1.shtml)，一般这种标题的文章我都是直接忽略的，但是病急乱投医同样也让我忽略这些原则，我就点进去了，然后就出不来了。\n\n楼主人生很多经历，前半部分很像老罗，一样的什么都做，一样的没出息，当讲到英语这块的时候，感觉整个人都不一样了，因为是连载，篇幅很长，但是我倒是很相信这是作者的真实经历，因为他的方法中透露出了“思想”，这是真正研究过才会有的结果。\n\n英文思想，讲说一定要在一个语境的环境中去理解一门语言，比如，ambulance，这个单词，你看到的时候一定不能想到“救护车”这个中文词，而是一个画面，一辆救护车在街上行驶，一个声音，wu...li...wu...li，如果你先联想到“救护车”这个母语词在转换描述物体本身，那就是还没有母语思想。就像一个孩童，虽然不会写，但也明白你每天跟他说的话，同时简单表达自己的思想，看，这就是一门语言学习本来该有的顺序，听说读写，我们一直都在这样说。\n\n这套思想也是楼主从漏屋老师的“二语心得”学到的，我还没有看到这些，但是我非常理解，也支持这种方式来学习。\n\n我再次捡起学习英语这件事情也有几个月了，逐渐放弃了一些方法，唯一还在坚持的是每天背一些单词，这个习惯我还会坚持，但是我还要再次捡起一些其他的学习习惯，比如，听好莱坞电影原声。加油，加油\n","source":"_posts/2018-03-13-english-again.md","raw":"---\ntitle: 又一次打鸡血\ntags:\n  - 杂谈\ndate: 2018-03-13 16:55:58\n---\n\n\n今天又一次被打了鸡血\n<!-- more -->\n这两天又在听老罗的一些吹牛逼的视频，突然就跑去 Google 搜索了“罗永浩多长时间学好的英语”，其实关于他学英语的经历已经听视频讲过好多次了，但还是想再看看这类的文字，给自己打打血，毕竟英语这块老大难，虽然我一直没学好，但是又不想放弃。\n\n然后就出现了这篇文章[我只用了两年时间自学英语，成功逆袭，彻底改变人生](http://bbs.tianya.cn/post-english-265706-1.shtml)，一般这种标题的文章我都是直接忽略的，但是病急乱投医同样也让我忽略这些原则，我就点进去了，然后就出不来了。\n\n楼主人生很多经历，前半部分很像老罗，一样的什么都做，一样的没出息，当讲到英语这块的时候，感觉整个人都不一样了，因为是连载，篇幅很长，但是我倒是很相信这是作者的真实经历，因为他的方法中透露出了“思想”，这是真正研究过才会有的结果。\n\n英文思想，讲说一定要在一个语境的环境中去理解一门语言，比如，ambulance，这个单词，你看到的时候一定不能想到“救护车”这个中文词，而是一个画面，一辆救护车在街上行驶，一个声音，wu...li...wu...li，如果你先联想到“救护车”这个母语词在转换描述物体本身，那就是还没有母语思想。就像一个孩童，虽然不会写，但也明白你每天跟他说的话，同时简单表达自己的思想，看，这就是一门语言学习本来该有的顺序，听说读写，我们一直都在这样说。\n\n这套思想也是楼主从漏屋老师的“二语心得”学到的，我还没有看到这些，但是我非常理解，也支持这种方式来学习。\n\n我再次捡起学习英语这件事情也有几个月了，逐渐放弃了一些方法，唯一还在坚持的是每天背一些单词，这个习惯我还会坚持，但是我还要再次捡起一些其他的学习习惯，比如，听好莱坞电影原声。加油，加油\n","slug":"english-again","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8b00af5gqok5l4q9a8"},{"title":"设计一个领取红包的活动需要注意的点","date":"2018-03-14T14:49:40.000Z","_content":"\n\n前段时间开发了一个领取红包的功能，有很多需要注意的点，是下次需要注意的\n<!-- more -->\n\n- 检查用户是否有资格领取红包的定时任务需要有时间期限\n- 活动到期后，领取接口需要做判断\n- 需要考虑用户保存领取红包的二维码或网页信息的情况，设计每日任务时效机制\n\n## 红包分配思路\n### 实例一\n给定一个固定的活动日期，固定的奖金总额，有一个可以预见的参与人数，有一个每天领取可以接受的上下限金额，如何分配用户领取的随机金额\n\n有一种方式是可以预先生成足够多的红包金额数组，每个参与的用户根据领取的索引在获取该得到的红包金额，算法如下\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport random\n\ndef get_redpacket_amounts():\n    \"\"\"\n    活动时间：39天\n    活动金额：$2300\n    参与人数：288\n    平均每天领取金额：2300 / 39  =  $59\n    每天平均领取金额：59 / 288  = $0.2\n    期望最低领取：$0.1\n    期望最高领取：$8\n    算法：首先生成一个长度为每天最大参与人数的数组，每个元素的值为活动可以期望的最小金额，然后遍历数组，给定几个位置赋值为可以接受的最大金额，剩下的位置根据当天奖金池随机分配，直到全部分完\n    \"\"\"\n    daily_total = 5900\n    min_amount = 10\n    total = 288\n    normal_range = 91\n\n    big_amount = daily_total - (min_amount * total)\n\n    res = [min_amount] * total\n    for i in range(len(res)):\n        n = res[i]\n        if i == 0 or i == 9:\n            rand =  int(random.uniform(600, 791))\n        else:\n            ran = normal_range if big_amount >=normal_range else big_amount\n            rand =  int(random.uniform(0, ran)\n                    ) if ran > 0 else 0\n        big_amount = big_amount - rand\n        res[i] = n + rand\n\n    return res\n\nif __name__ == \"__main__\":\n    print(get_redpacket_amounts())\n```\n\n","source":"_posts/2018-03-14-redpacket-require-notice.md","raw":"---\ntitle: 设计一个领取红包的活动需要注意的点\ntags:\n  - 开发\ndate: 2018-03-14 14:49:40\n---\n\n\n前段时间开发了一个领取红包的功能，有很多需要注意的点，是下次需要注意的\n<!-- more -->\n\n- 检查用户是否有资格领取红包的定时任务需要有时间期限\n- 活动到期后，领取接口需要做判断\n- 需要考虑用户保存领取红包的二维码或网页信息的情况，设计每日任务时效机制\n\n## 红包分配思路\n### 实例一\n给定一个固定的活动日期，固定的奖金总额，有一个可以预见的参与人数，有一个每天领取可以接受的上下限金额，如何分配用户领取的随机金额\n\n有一种方式是可以预先生成足够多的红包金额数组，每个参与的用户根据领取的索引在获取该得到的红包金额，算法如下\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport random\n\ndef get_redpacket_amounts():\n    \"\"\"\n    活动时间：39天\n    活动金额：$2300\n    参与人数：288\n    平均每天领取金额：2300 / 39  =  $59\n    每天平均领取金额：59 / 288  = $0.2\n    期望最低领取：$0.1\n    期望最高领取：$8\n    算法：首先生成一个长度为每天最大参与人数的数组，每个元素的值为活动可以期望的最小金额，然后遍历数组，给定几个位置赋值为可以接受的最大金额，剩下的位置根据当天奖金池随机分配，直到全部分完\n    \"\"\"\n    daily_total = 5900\n    min_amount = 10\n    total = 288\n    normal_range = 91\n\n    big_amount = daily_total - (min_amount * total)\n\n    res = [min_amount] * total\n    for i in range(len(res)):\n        n = res[i]\n        if i == 0 or i == 9:\n            rand =  int(random.uniform(600, 791))\n        else:\n            ran = normal_range if big_amount >=normal_range else big_amount\n            rand =  int(random.uniform(0, ran)\n                    ) if ran > 0 else 0\n        big_amount = big_amount - rand\n        res[i] = n + rand\n\n    return res\n\nif __name__ == \"__main__\":\n    print(get_redpacket_amounts())\n```\n\n","slug":"redpacket-require-notice","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8c00ah5gqoyav1elts"},{"title":"Mysql 自动生成 id 算法","date":"2018-03-15T17:27:51.000Z","_content":"\n\n本章介绍一种 Mysql 生成 id 的算法，主要用于某些特定数据表，希望有统一的 id 空间，但不是简单的自增\n\n<!-- more --><!-- toc -->\n需求是 id 为数值型，可以在 js 环境中安全的使用，每个表有独立的 id 空间，并且全局唯一\n\n思路是这样的\n\n为了在 js 中安全使用，长度最大为 52 位，所以分为区域位（8位）、表位（8位）、id 长度（36位）\n\n为了生成效率直接在 Mysql 自定义方法，首先建立一个表来作为目标表的 id 生成器，利用 `replace INTO` 方法在达到生成自增 id 的目的，然后根据表名判断位移长度计算出最终 id，完整代码如下\n\n```mysql\nDROP TABLE IF EXISTS `auto_user_id`;\nCREATE TABLE `auto_user_id` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\n  `max_id` bigint(20) NOT NULL DEFAULT 0 COMMENT '占位字段',\n  `create_ts` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '记录创建时间',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `auto_max_id_uindex` (`max_id`)\n) ENGINE=InnoDB CHARSET=utf8mb4 COMMENT='自动生成 id';\n\nDROP TABLE IF EXISTS `auto_article_id`;\nCREATE TABLE `auto_article_id` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\n  `max_id` bigint(20) NOT NULL DEFAULT 0 COMMENT '占位字段',\n  `create_ts` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '记录创建时间',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `auto_max_id_uindex` (`max_id`)\n) ENGINE=InnoDB CHARSET=utf8mb4 COMMENT='自动生成 id';\n\nDROP TABLE IF EXISTS `auto_id`;\nCREATE TABLE `auto_id` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\n  `max_id` bigint(20) NOT NULL DEFAULT 0 COMMENT '占位字段',\n  `create_ts` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '记录创建时间',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `auto_max_id_uindex` (`max_id`)\n) ENGINE=InnoDB CHARSET=utf8mb4 COMMENT='自动生成 id';\n\nDROP FUNCTION IF EXISTS `func_gen_auto_id`;\nDELIMITER $$\nCREATE FUNCTION `func_gen_auto_id`(shard_seed BIGINT, item_name VARCHAR(10)) RETURNS BIGINT(20)\nBEGIN\n    DECLARE shard_offset    INT;\n    DECLARE item_offset     INT;\n    DECLARE item_seed       INT;\n\n    DECLARE final_id        BIGINT;\n    DECLARE shard_id        BIGINT;\n    DECLARE item_type       BIGINT;\n    DECLARE last_insert_id  BIGINT;\n\n    SET shard_offset = 44;\n    SET item_offset  = 36;\n\n    CASE item_name\n        WHEN 'user'         THEN SET item_seed = 1;\n        WHEN 'article'      THEN SET item_seed = 2;\n        ELSE                     SET item_seed = 0;\n    END CASE;\n\n    SET shard_id  = (SELECT shard_seed << shard_offset);\n    SET item_type = (SELECT item_seed  << item_offset);\n\n    CASE item_name\n        WHEN 'user'         THEN replace INTO auto_user_id      (`max_id`) VALUES (1);\n        WHEN 'article'      THEN replace INTO auto_article_id   (`max_id`) VALUES (1);\n        ELSE                     replace INTO auto_id           (`max_id`) VALUES (1);\n    END CASE;\n\n    SET last_insert_id = (SELECT last_insert_id());\n\n    SET final_id = (SELECT shard_id + item_type + last_insert_id);\n    RETURN final_id;\nEND $$\nDELIMITER ;\n```\n\n最后直接查询即可得到最终 id\n```mysql\nselect func_gen_auto_id(1, 'user');\n```\n\n","source":"_posts/2018-03-15-mysql-auto-generate-id.md","raw":"---\ntitle: Mysql 自动生成 id 算法\ntags:\n  - mysql\ndate: 2018-03-15 17:27:51\n---\n\n\n本章介绍一种 Mysql 生成 id 的算法，主要用于某些特定数据表，希望有统一的 id 空间，但不是简单的自增\n\n<!-- more --><!-- toc -->\n需求是 id 为数值型，可以在 js 环境中安全的使用，每个表有独立的 id 空间，并且全局唯一\n\n思路是这样的\n\n为了在 js 中安全使用，长度最大为 52 位，所以分为区域位（8位）、表位（8位）、id 长度（36位）\n\n为了生成效率直接在 Mysql 自定义方法，首先建立一个表来作为目标表的 id 生成器，利用 `replace INTO` 方法在达到生成自增 id 的目的，然后根据表名判断位移长度计算出最终 id，完整代码如下\n\n```mysql\nDROP TABLE IF EXISTS `auto_user_id`;\nCREATE TABLE `auto_user_id` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\n  `max_id` bigint(20) NOT NULL DEFAULT 0 COMMENT '占位字段',\n  `create_ts` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '记录创建时间',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `auto_max_id_uindex` (`max_id`)\n) ENGINE=InnoDB CHARSET=utf8mb4 COMMENT='自动生成 id';\n\nDROP TABLE IF EXISTS `auto_article_id`;\nCREATE TABLE `auto_article_id` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\n  `max_id` bigint(20) NOT NULL DEFAULT 0 COMMENT '占位字段',\n  `create_ts` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '记录创建时间',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `auto_max_id_uindex` (`max_id`)\n) ENGINE=InnoDB CHARSET=utf8mb4 COMMENT='自动生成 id';\n\nDROP TABLE IF EXISTS `auto_id`;\nCREATE TABLE `auto_id` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\n  `max_id` bigint(20) NOT NULL DEFAULT 0 COMMENT '占位字段',\n  `create_ts` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '记录创建时间',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `auto_max_id_uindex` (`max_id`)\n) ENGINE=InnoDB CHARSET=utf8mb4 COMMENT='自动生成 id';\n\nDROP FUNCTION IF EXISTS `func_gen_auto_id`;\nDELIMITER $$\nCREATE FUNCTION `func_gen_auto_id`(shard_seed BIGINT, item_name VARCHAR(10)) RETURNS BIGINT(20)\nBEGIN\n    DECLARE shard_offset    INT;\n    DECLARE item_offset     INT;\n    DECLARE item_seed       INT;\n\n    DECLARE final_id        BIGINT;\n    DECLARE shard_id        BIGINT;\n    DECLARE item_type       BIGINT;\n    DECLARE last_insert_id  BIGINT;\n\n    SET shard_offset = 44;\n    SET item_offset  = 36;\n\n    CASE item_name\n        WHEN 'user'         THEN SET item_seed = 1;\n        WHEN 'article'      THEN SET item_seed = 2;\n        ELSE                     SET item_seed = 0;\n    END CASE;\n\n    SET shard_id  = (SELECT shard_seed << shard_offset);\n    SET item_type = (SELECT item_seed  << item_offset);\n\n    CASE item_name\n        WHEN 'user'         THEN replace INTO auto_user_id      (`max_id`) VALUES (1);\n        WHEN 'article'      THEN replace INTO auto_article_id   (`max_id`) VALUES (1);\n        ELSE                     replace INTO auto_id           (`max_id`) VALUES (1);\n    END CASE;\n\n    SET last_insert_id = (SELECT last_insert_id());\n\n    SET final_id = (SELECT shard_id + item_type + last_insert_id);\n    RETURN final_id;\nEND $$\nDELIMITER ;\n```\n\n最后直接查询即可得到最终 id\n```mysql\nselect func_gen_auto_id(1, 'user');\n```\n\n","slug":"mysql-auto-generate-id","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8d00aj5gqo15lmaqul"},{"title":"Python 使用字符串名字导入模块","date":"2018-03-16T15:46:22.000Z","_content":"\n\n在优化代码时出现一个需求，我希望通过 module 的字符串名字来导入模块，这样可以避免没写一个 module 就手动导入。\n<!-- more -->\n\n`importlib.import_module()` 可以完成该操作\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nmod = importlib.import_module('os')\nprint(mod.getcwd())     # /Users/wxnacy/wxnacy.github.io\n```\n\n- [importlib](https://docs.python.org/3/library/importlib.html)\n","source":"_posts/2018-03-16-import-by-string.md","raw":"---\ntitle: Python 使用字符串名字导入模块\ntags:\n  - python\ndate: 2018-03-16 15:46:22\n---\n\n\n在优化代码时出现一个需求，我希望通过 module 的字符串名字来导入模块，这样可以避免没写一个 module 就手动导入。\n<!-- more -->\n\n`importlib.import_module()` 可以完成该操作\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nmod = importlib.import_module('os')\nprint(mod.getcwd())     # /Users/wxnacy/wxnacy.github.io\n```\n\n- [importlib](https://docs.python.org/3/library/importlib.html)\n","slug":"import-by-string","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8e00al5gqoj4eekmnm"},{"title":"Python 字符串大小写转换","date":"2018-03-17T19:51:20.000Z","_content":"\n\n```python\nstr = \"www.wxnacy.com\"\nprint(str.upper())          # 把所有字符中的小写字母转换成大写字母\nprint(str.lower())          # 把所有字符中的大写字母转换成小写字母\nprint(str.capitalize())     # 把第一个字母转化为大写字母，其余小写\nprint(str.title())          # 把每个单词的第一个字母转化为大写，其余小写\n```\n```bash\nWWW.WXNACY.COM\nwww.wxnacy.com\nWww.wxnacy.com\nWww.Wxnacy.Com\n```\n","source":"_posts/2018-03-17-python-upper-lower.md","raw":"---\ntitle: Python 字符串大小写转换\ntags:\n  - python\ndate: 2018-03-17 19:51:20\n---\n\n\n```python\nstr = \"www.wxnacy.com\"\nprint(str.upper())          # 把所有字符中的小写字母转换成大写字母\nprint(str.lower())          # 把所有字符中的大写字母转换成小写字母\nprint(str.capitalize())     # 把第一个字母转化为大写字母，其余小写\nprint(str.title())          # 把每个单词的第一个字母转化为大写，其余小写\n```\n```bash\nWWW.WXNACY.COM\nwww.wxnacy.com\nWww.wxnacy.com\nWww.Wxnacy.Com\n```\n","slug":"python-upper-lower","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8g00an5gqoq8yhmnj5"},{"title":"Python 获取 class 名字","date":"2018-03-18T09:54:17.000Z","_content":"\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nclass User():\n    pass\n\nu = User()\nprint(u.__class__.__name__)     # User\n```\n","source":"_posts/2018-03-18-python-class-name.md","raw":"---\ntitle: Python 获取 class 名字\ntags:\n  - python\ndate: 2018-03-18 09:54:17\n---\n\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nclass User():\n    pass\n\nu = User()\nprint(u.__class__.__name__)     # User\n```\n","slug":"python-class-name","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8g00ap5gqovkg7qqls"},{"title":"Python 使用 PyMySQL 操作 Mysql 数据库","date":"2018-03-19T11:39:26.000Z","_content":"\n\nPython 使用 PyMySQL 操作 Mysql 数据库\n\n<!-- more --><!-- toc -->\n## 下载\n```bash\n$ sudo pip install PyMySQL\n```\n\n## 连接数据库\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport pymysql.cursors\nconn            = pymysql.connect(\n    host        = 'localhost',\n    port        = 3306,\n    user        = 'root',\n    password    = 'passwd'\n    db          = 'your_db'\n    charset     = 'utf8mb4',\n    cursorclass = pymysql.cursors.DictCursor\n)\n```\n### 使用 URI 创建连接\n创建连接非常简单，但是配置在项目中却不方便，如果数据信息使用 URI 就简单了很多，这需要 `urllib` 模块的配合\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport pymysql.cursors\nfrom urllib.parse import urlparse\n\nURI = 'mysql+pymysql://root:wxnacy@127.0.0.1:3306/study?charset=utf8mb4'\nURL_CONFIG = urlparse(URI)\n\nconn            = pymysql.connect(\n    host        = URL_CONFIG.hostname,\n    port        = URL_CONFIG.port,\n    user        = URL_CONFIG.username,\n    password    = URL_CONFIG.password,\n    db          = URL_CONFIG.path[1:],\n    charset     = 'utf8mb4',\n    cursorclass = pymysql.cursors.DictCursor\n)\n```\n注意地址模式需要使用 `mysql+pymysql`\n\n## 操作数据库\n### 插入数据\n```python\ncursor = conn.cursor()\ncursor.execute('insert into book (name) values (%s)', ['wxnacy'])\nconn.commit()\ncursor.close()\n```\n### 查询数据\n```python\ncursor = conn.cursor()\ncursor.execute('select * from book where name = %s', ['wxnacy'])\nconn.commit()\nres = cursor.fetchall()\ncursor.close()\nprint(res)  # [{\"id\": 1, \"name\": \"wxnacy\"}]\n```\n\n## 完整 demo\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport pymysql.cursors\nfrom urllib.parse import urlparse\n\nURI = 'mysql+pymysql://root:wxnacy@127.0.0.1:3306/study?charset=utf8mb4'\nURL_CONFIG = urlparse(URI)\nprint(URL_CONFIG)\n\nclass BaseDB(object):\n    @classmethod\n    def create_conn(cls):\n        '''创建mysql链接'''\n        return pymysql.connect(\n            host=URL_CONFIG.hostname,\n            port=URL_CONFIG.port,\n            user=URL_CONFIG.username,\n            password=URL_CONFIG.password,\n            db=URL_CONFIG.path[1:],\n            charset='utf8mb4',\n            cursorclass=pymysql.cursors.DictCursor\n        )\n\n    @classmethod\n    def query(cls, sql, params):\n        \"\"\"\n        查询操作\n        :param sql:\n        :param params:\n        :return:\n        \"\"\"\n        conn = cls.create_conn()\n        try:\n            cursor = conn.cursor()\n\n            cursor.execute(sql, params)\n            conn.commit()\n            result = cursor.fetchall()\n            cursor.close()\n            return result\n        except BaseException as e:\n            app.logger.error(traceback.format_exc())\n            return []\n        finally:\n            conn.close()\n\n    @classmethod\n    def execute(cls, sql, params):\n        \"\"\"\n        更新操作\n        :param sql:\n        :param params:\n        :return:\n        \"\"\"\n        conn = cls.create_conn()\n        try:\n            cursor = conn.cursor()\n\n            result = cursor.execute(sql, params)\n            conn.commit()\n            cursor.close()\n            return result\n        except BaseException as e:\n            app.logger.error(traceback.format_exc())\n            return False\n        finally:\n            conn.close()\n\nif __name__ == \"__main__\":\n    sql = 'select * from user'\n    res = BaseDB.query(sql, [])\n    print(res)\n```\n","source":"_posts/2018-03-19-pymysql.md","raw":"---\ntitle: Python 使用 PyMySQL 操作 Mysql 数据库\ntags:\n  - python\ndate: 2018-03-19 11:39:26\n---\n\n\nPython 使用 PyMySQL 操作 Mysql 数据库\n\n<!-- more --><!-- toc -->\n## 下载\n```bash\n$ sudo pip install PyMySQL\n```\n\n## 连接数据库\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport pymysql.cursors\nconn            = pymysql.connect(\n    host        = 'localhost',\n    port        = 3306,\n    user        = 'root',\n    password    = 'passwd'\n    db          = 'your_db'\n    charset     = 'utf8mb4',\n    cursorclass = pymysql.cursors.DictCursor\n)\n```\n### 使用 URI 创建连接\n创建连接非常简单，但是配置在项目中却不方便，如果数据信息使用 URI 就简单了很多，这需要 `urllib` 模块的配合\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport pymysql.cursors\nfrom urllib.parse import urlparse\n\nURI = 'mysql+pymysql://root:wxnacy@127.0.0.1:3306/study?charset=utf8mb4'\nURL_CONFIG = urlparse(URI)\n\nconn            = pymysql.connect(\n    host        = URL_CONFIG.hostname,\n    port        = URL_CONFIG.port,\n    user        = URL_CONFIG.username,\n    password    = URL_CONFIG.password,\n    db          = URL_CONFIG.path[1:],\n    charset     = 'utf8mb4',\n    cursorclass = pymysql.cursors.DictCursor\n)\n```\n注意地址模式需要使用 `mysql+pymysql`\n\n## 操作数据库\n### 插入数据\n```python\ncursor = conn.cursor()\ncursor.execute('insert into book (name) values (%s)', ['wxnacy'])\nconn.commit()\ncursor.close()\n```\n### 查询数据\n```python\ncursor = conn.cursor()\ncursor.execute('select * from book where name = %s', ['wxnacy'])\nconn.commit()\nres = cursor.fetchall()\ncursor.close()\nprint(res)  # [{\"id\": 1, \"name\": \"wxnacy\"}]\n```\n\n## 完整 demo\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport pymysql.cursors\nfrom urllib.parse import urlparse\n\nURI = 'mysql+pymysql://root:wxnacy@127.0.0.1:3306/study?charset=utf8mb4'\nURL_CONFIG = urlparse(URI)\nprint(URL_CONFIG)\n\nclass BaseDB(object):\n    @classmethod\n    def create_conn(cls):\n        '''创建mysql链接'''\n        return pymysql.connect(\n            host=URL_CONFIG.hostname,\n            port=URL_CONFIG.port,\n            user=URL_CONFIG.username,\n            password=URL_CONFIG.password,\n            db=URL_CONFIG.path[1:],\n            charset='utf8mb4',\n            cursorclass=pymysql.cursors.DictCursor\n        )\n\n    @classmethod\n    def query(cls, sql, params):\n        \"\"\"\n        查询操作\n        :param sql:\n        :param params:\n        :return:\n        \"\"\"\n        conn = cls.create_conn()\n        try:\n            cursor = conn.cursor()\n\n            cursor.execute(sql, params)\n            conn.commit()\n            result = cursor.fetchall()\n            cursor.close()\n            return result\n        except BaseException as e:\n            app.logger.error(traceback.format_exc())\n            return []\n        finally:\n            conn.close()\n\n    @classmethod\n    def execute(cls, sql, params):\n        \"\"\"\n        更新操作\n        :param sql:\n        :param params:\n        :return:\n        \"\"\"\n        conn = cls.create_conn()\n        try:\n            cursor = conn.cursor()\n\n            result = cursor.execute(sql, params)\n            conn.commit()\n            cursor.close()\n            return result\n        except BaseException as e:\n            app.logger.error(traceback.format_exc())\n            return False\n        finally:\n            conn.close()\n\nif __name__ == \"__main__\":\n    sql = 'select * from user'\n    res = BaseDB.query(sql, [])\n    print(res)\n```\n","slug":"pymysql","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8i00ar5gqoj2j1kkje"},{"title":"Python 单元测试模块 unittest","date":"2018-03-21T11:21:48.000Z","_content":"\n\n不写测试用例的程序员，不是好测试\n\n<!-- more --><!-- toc -->\n以前在 Java 中 junit 是必用的单元测试框架，而 Python 中的 junit 就是 unittest\n## 第一个 TestCase\n少废话，先看代码\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport unittest\n\nclass Test(unittest.TestCase):\n\n    def test_hello_world(self):\n        self.assertEqual(11, len('Hello World'))\n\nif __name__ == \"__main__\":\n    unittest.main()\n```\n```bash\n.\n----------------------------------------------------------------------\nRan 1 test in 0.000s\n\nOK\n```\n\n我们实现了一个最简单的测试用例，unittest 中最基本的结构就是 TestCase，新建一个类继承 `unittest.TestCase`，类中每个 `test` 开头的方法都是一个测试函数（一定要 test 开头）\n\n一个测试通过的用例，运行结果除了分割线，共三行\n- 第一行，每个测试函数的运行状态，共四种状态，`.` 为成功\n- 第二行，运行的测试条数及用时\n- 第三行，测试最终结果，一条失败则为 FAILED，并显示各种状态的条数\n\n## 函数运行状态\n测试函数的运行状态分四种\n- `.` 成功\n- `F` 失败\n- `E` 出错\n- `s` 跳过\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nimport unittest\n\nclass Test(unittest.TestCase):\n\n    def add(self):\n        return 1 + 1\n\n    def divide(self):\n        return 0 / 0\n\n    def test_1(self):\n        '''test_1 func'''\n        self.assertEqual(2, self.add())\n\n    def test_2(self):\n        '''test_2 func'''\n        self.assertEqual(3, self.add())\n\n    def test_3(self):\n        '''test_3 func'''\n        self.assertEqual(3, self.divide())\n\n    @unittest.skip(\"skip this test case\")\n    def test_4(self):\n        '''test_4 func'''\n        self.assertEqual(3, self.divide())\n\nif __name__ == \"__main__\":\n    unittest.main()\n```\n```bash\n.FEs\n======================================================================\nERROR: test_3 (__main__.Test)\ntest_3 func\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"simple.py\", line 26, in test_3\n    self.assertEqual(3, self.divide())\n  File \"simple.py\", line 14, in divide\n    return 0 / 0\nZeroDivisionError: division by zero\n\n======================================================================\nFAIL: test_2 (__main__.Test)\ntest_2 func\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"simple.py\", line 22, in test_2\n    self.assertEqual(3, self.add())\nAssertionError: 3 != 2\n\n----------------------------------------------------------------------\nRan 4 tests in 0.001s\n\nFAILED (failures=1, errors=1, skipped=1)\n```\n\n这是一个包含四种状态的例子，`test_3(), test_2()` 分别报错和测试失败，在结果中给出了出错的位置和具体原因\n\n现在的测试程序运行结果是简要信息，这取决于 `unittest.main()` 方法中的 `verbosity` 参数，默认值为 1，0 则不输出每条结果，2 则为详细信息，如下：\n```bash\ntest_1 (__main__.Test)\ntest_1 func ... ok\ntest_2 (__main__.Test)\ntest_2 func ... FAIL\ntest_3 (__main__.Test)\ntest_3 func ... ERROR\ntest_4 (__main__.Test)\ntest_4 func ... skipped 'skip this test case'\n...\n```\n\n## 跳过某条测试\n在上面的例子中，`test_4()` 方法是跳过的，unittest 中共有三种装饰器可以跳过程序\n- `@unittest.skip(reason)` 无条件跳过\n- `@unittest.skipIf(condition, reason)` 当条件为真时跳过\n- `@unittest.skipUnless(condition, reason)` 当条件为假时跳过\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nimport unittest\n\nclass Test(unittest.TestCase):\n\n    def add(self):\n        return 1 + 1\n\n    @unittest.skip(\"skip test_1 case\")\n    def test_1(self):\n        '''test_1'''\n        self.assertEqual(2, self.add())\n\n    def test_2(self):\n        '''test_2'''\n        self.skipTest('skip test_2 case')\n        self.assertEqual(3, self.add())\n\n    @unittest.skipIf(1 == 1, 'skip test_3 case')\n    def test_3(self):\n        self.assertEqual(3, self.add())\n\n    @unittest.skipUnless(1 != 1, 'skip test_4 case')\n    def test_4(self):\n        self.assertEqual(3, self.add())\n\nif __name__ == \"__main__\":\n    unittest.main(verbosity=2)\n```\n```bash\ntest_1 (__main__.Test)\ntest_1 ... skipped 'skip test_1 case'\ntest_2 (__main__.Test)\ntest_2 ... skipped 'skip test_2 case'\ntest_3 (__main__.Test) ... skipped 'skip test_3 case'\ntest_4 (__main__.Test) ... skipped 'skip test_4 case'\n\n----------------------------------------------------------------------\nRan 4 tests in 0.000s\n\nOK (skipped=4)\n```\n在详细结果中，会将跳过原因打印出来，并且在测试程序中，使用 `self.skipTest(resaon)` 也可以跳过程序\n\n## 环境的准备和还原\n一个完整的测试用例还需要一个环节，准备环境和还原环境，使用 `setUp(), tearDown()` 两个方法来完成\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport unittest\n\nclass Test(unittest.TestCase):\n\n    def add(self):\n        return 1 + 1\n\n    def setUp(self):\n        print('begin setUp')\n\n    def tearDown(self):\n        print('begin tearDown')\n\n    def test_1(self):\n        self.assertEqual(2, self.add())\n        print('run test_1')\n\n    def test_2(self):\n        self.assertEqual(2, self.add())\n        print('run test_2')\n\nif __name__ == \"__main__\":\n    unittest.main()\n```\n```bash\nbegin setUp\nrun test_1\nbegin tearDown\n.begin setUp\nrun test_2\nbegin tearDown\n.\n----------------------------------------------------------------------\nRan 2 tests in 0.000s\n\nOK\n```\n从打印结果中可以看出，每次执行一个测试方法前后都会执行准备和还原操作，如果你想要一个 TestCase 只执行一次准备和还原操作，则需要使用这两个方法\n```python\n@classmethod\ndef setUpClass(cls):\n    print('begin setUpClass')\n\n@classmethod\ndef tearDownClass(cls):\n    print('begin tearDownClass')\n```\n至此，我们已经经历一个完整的 TestCase 是什么样的，它有环境准备工作（setUp)，运行测试代码（run），还原环境（tearDown），根据条件跳过（skip），共同组成了一个元测试（unit test），这样就是完整的测试用例\n\n同时，我们需要开始考虑两个问题\n- 怎样控制测试程序的执行顺序\n- 如果同时执行多个测试用例\n\n## 使用 TestSuite\n针对刚才提出的问题，我们需要引入 TestSuite 的概念，多个测试用例组合起来，就是 TestSuite，TestSuite 也可以嵌套 TestSuite\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport unittest\n\nclass Test(unittest.TestCase):\n\n    def add(self):\n        return 1 + 1\n\n    def test_1(self):\n        self.assertEqual(2, self.add())\n\n    def test_2(self):\n        self.assertEqual(2, self.add())\n\n    def test_3(self):\n        self.assertEqual(2, self.add())\n\n\nif __name__ == \"__main__\":\n    suite = unittest.TestSuite()\n\n    tests = [Test(\"test_1\"), Test(\"test_3\"), Test(\"test_2\")]\n    suite.addTests(tests)\n\n    runner = unittest.TextTestRunner(verbosity=2)\n    runner.run(suite)\n```\n```bash\ntest_1 (__main__.Test) ... ok\ntest_3 (__main__.Test) ... ok\ntest_2 (__main__.Test) ... ok\n\n----------------------------------------------------------------------\nRan 3 tests in 0.000s\n\nOK\n```\n在将多个 TestCase 调价到 TestSuite 中后，我们用到了 `unittest.TextTestRunner()` 方法，他会执行 TestSuite 或 TestCase 测 `run()` 方法，并把结果输出到 TextTestResult 中，后续我们将怎样将结果在打印到文件中\n\n然后如你所见，我们已经可以控制测试程序的执行顺序，同样的，通过这样的方式，我们还可以进行多个 TestCase 同时测试\n\n## 输出到文件\n每次测试结果都输出控制台，从可读性和持久化上都是个问题，我们需要想办法将结果打印到文件中，这里我们需要借助下第三方文件 [HTMLTestRunner](http://tungwaiyip.info/software/HTMLTestRunner.html) ，但是原版只支持 python2，我做了下改动，适配了 python3，地址为：https://github.com/wxnacy/study/blob/master/python/unittest_demo/HTMLTestRunner.py\n\n使用方法请见[修改 HTMLTestRunner.py 可以在 Python3 运行 ](/2018/03/20/update-htmltestrunner/)\n\n## 检测方法\n我们在刚才的例子中只用到了 `assertEqual()` 方法来检测结果是否相同，还有很多方法可以用来检测测试结果\n```bash\nassertEqual(a, b)\t    # a == b\nassertNotEqual(a, b)\t# a != b\nassertTrue(x)\t        # bool(x) is True\nassertFalse(x)\t        # bool(x) is False\n# 3.1 新加\nassertIs(a, b)\t        # a is b\nassertIsNot(a, b)\t    # a is not b\nassertIsNone(x)\t        # x is None\nassertIsNotNone(x)\t    # x is not None\nassertIn(a, b)\t        # a in b\nassertNotIn(a, b)\t    # a not in b\n# 3.2 新加\nassertIsInstance(a, b)\t    # isinstance(a, b)\nassertNotIsInstance(a, b)\t# not isinstance(a, b)\n```\n更多方法见[文档](https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertRaises)\n\n- [unittest — Unit testing framework](https://docs.python.org/3/library/unittest.html)\n- [Python单元测试框架](http://pyunit.sourceforge.net/pyunit_cn.html)\n- [Python单元测试——深入理解unittest](http://www.cnblogs.com/hackerain/p/3682019.html)\n- [Python必会的单元测试框架 —— unittest](http://blog.csdn.net/huilan_same/article/details/52944782)\n","source":"_posts/2018-03-21-unittest.md","raw":"---\ntitle: Python 单元测试模块 unittest\ntags:\n  - python\ndate: 2018-03-21 11:21:48\n---\n\n\n不写测试用例的程序员，不是好测试\n\n<!-- more --><!-- toc -->\n以前在 Java 中 junit 是必用的单元测试框架，而 Python 中的 junit 就是 unittest\n## 第一个 TestCase\n少废话，先看代码\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport unittest\n\nclass Test(unittest.TestCase):\n\n    def test_hello_world(self):\n        self.assertEqual(11, len('Hello World'))\n\nif __name__ == \"__main__\":\n    unittest.main()\n```\n```bash\n.\n----------------------------------------------------------------------\nRan 1 test in 0.000s\n\nOK\n```\n\n我们实现了一个最简单的测试用例，unittest 中最基本的结构就是 TestCase，新建一个类继承 `unittest.TestCase`，类中每个 `test` 开头的方法都是一个测试函数（一定要 test 开头）\n\n一个测试通过的用例，运行结果除了分割线，共三行\n- 第一行，每个测试函数的运行状态，共四种状态，`.` 为成功\n- 第二行，运行的测试条数及用时\n- 第三行，测试最终结果，一条失败则为 FAILED，并显示各种状态的条数\n\n## 函数运行状态\n测试函数的运行状态分四种\n- `.` 成功\n- `F` 失败\n- `E` 出错\n- `s` 跳过\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nimport unittest\n\nclass Test(unittest.TestCase):\n\n    def add(self):\n        return 1 + 1\n\n    def divide(self):\n        return 0 / 0\n\n    def test_1(self):\n        '''test_1 func'''\n        self.assertEqual(2, self.add())\n\n    def test_2(self):\n        '''test_2 func'''\n        self.assertEqual(3, self.add())\n\n    def test_3(self):\n        '''test_3 func'''\n        self.assertEqual(3, self.divide())\n\n    @unittest.skip(\"skip this test case\")\n    def test_4(self):\n        '''test_4 func'''\n        self.assertEqual(3, self.divide())\n\nif __name__ == \"__main__\":\n    unittest.main()\n```\n```bash\n.FEs\n======================================================================\nERROR: test_3 (__main__.Test)\ntest_3 func\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"simple.py\", line 26, in test_3\n    self.assertEqual(3, self.divide())\n  File \"simple.py\", line 14, in divide\n    return 0 / 0\nZeroDivisionError: division by zero\n\n======================================================================\nFAIL: test_2 (__main__.Test)\ntest_2 func\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"simple.py\", line 22, in test_2\n    self.assertEqual(3, self.add())\nAssertionError: 3 != 2\n\n----------------------------------------------------------------------\nRan 4 tests in 0.001s\n\nFAILED (failures=1, errors=1, skipped=1)\n```\n\n这是一个包含四种状态的例子，`test_3(), test_2()` 分别报错和测试失败，在结果中给出了出错的位置和具体原因\n\n现在的测试程序运行结果是简要信息，这取决于 `unittest.main()` 方法中的 `verbosity` 参数，默认值为 1，0 则不输出每条结果，2 则为详细信息，如下：\n```bash\ntest_1 (__main__.Test)\ntest_1 func ... ok\ntest_2 (__main__.Test)\ntest_2 func ... FAIL\ntest_3 (__main__.Test)\ntest_3 func ... ERROR\ntest_4 (__main__.Test)\ntest_4 func ... skipped 'skip this test case'\n...\n```\n\n## 跳过某条测试\n在上面的例子中，`test_4()` 方法是跳过的，unittest 中共有三种装饰器可以跳过程序\n- `@unittest.skip(reason)` 无条件跳过\n- `@unittest.skipIf(condition, reason)` 当条件为真时跳过\n- `@unittest.skipUnless(condition, reason)` 当条件为假时跳过\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nimport unittest\n\nclass Test(unittest.TestCase):\n\n    def add(self):\n        return 1 + 1\n\n    @unittest.skip(\"skip test_1 case\")\n    def test_1(self):\n        '''test_1'''\n        self.assertEqual(2, self.add())\n\n    def test_2(self):\n        '''test_2'''\n        self.skipTest('skip test_2 case')\n        self.assertEqual(3, self.add())\n\n    @unittest.skipIf(1 == 1, 'skip test_3 case')\n    def test_3(self):\n        self.assertEqual(3, self.add())\n\n    @unittest.skipUnless(1 != 1, 'skip test_4 case')\n    def test_4(self):\n        self.assertEqual(3, self.add())\n\nif __name__ == \"__main__\":\n    unittest.main(verbosity=2)\n```\n```bash\ntest_1 (__main__.Test)\ntest_1 ... skipped 'skip test_1 case'\ntest_2 (__main__.Test)\ntest_2 ... skipped 'skip test_2 case'\ntest_3 (__main__.Test) ... skipped 'skip test_3 case'\ntest_4 (__main__.Test) ... skipped 'skip test_4 case'\n\n----------------------------------------------------------------------\nRan 4 tests in 0.000s\n\nOK (skipped=4)\n```\n在详细结果中，会将跳过原因打印出来，并且在测试程序中，使用 `self.skipTest(resaon)` 也可以跳过程序\n\n## 环境的准备和还原\n一个完整的测试用例还需要一个环节，准备环境和还原环境，使用 `setUp(), tearDown()` 两个方法来完成\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport unittest\n\nclass Test(unittest.TestCase):\n\n    def add(self):\n        return 1 + 1\n\n    def setUp(self):\n        print('begin setUp')\n\n    def tearDown(self):\n        print('begin tearDown')\n\n    def test_1(self):\n        self.assertEqual(2, self.add())\n        print('run test_1')\n\n    def test_2(self):\n        self.assertEqual(2, self.add())\n        print('run test_2')\n\nif __name__ == \"__main__\":\n    unittest.main()\n```\n```bash\nbegin setUp\nrun test_1\nbegin tearDown\n.begin setUp\nrun test_2\nbegin tearDown\n.\n----------------------------------------------------------------------\nRan 2 tests in 0.000s\n\nOK\n```\n从打印结果中可以看出，每次执行一个测试方法前后都会执行准备和还原操作，如果你想要一个 TestCase 只执行一次准备和还原操作，则需要使用这两个方法\n```python\n@classmethod\ndef setUpClass(cls):\n    print('begin setUpClass')\n\n@classmethod\ndef tearDownClass(cls):\n    print('begin tearDownClass')\n```\n至此，我们已经经历一个完整的 TestCase 是什么样的，它有环境准备工作（setUp)，运行测试代码（run），还原环境（tearDown），根据条件跳过（skip），共同组成了一个元测试（unit test），这样就是完整的测试用例\n\n同时，我们需要开始考虑两个问题\n- 怎样控制测试程序的执行顺序\n- 如果同时执行多个测试用例\n\n## 使用 TestSuite\n针对刚才提出的问题，我们需要引入 TestSuite 的概念，多个测试用例组合起来，就是 TestSuite，TestSuite 也可以嵌套 TestSuite\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport unittest\n\nclass Test(unittest.TestCase):\n\n    def add(self):\n        return 1 + 1\n\n    def test_1(self):\n        self.assertEqual(2, self.add())\n\n    def test_2(self):\n        self.assertEqual(2, self.add())\n\n    def test_3(self):\n        self.assertEqual(2, self.add())\n\n\nif __name__ == \"__main__\":\n    suite = unittest.TestSuite()\n\n    tests = [Test(\"test_1\"), Test(\"test_3\"), Test(\"test_2\")]\n    suite.addTests(tests)\n\n    runner = unittest.TextTestRunner(verbosity=2)\n    runner.run(suite)\n```\n```bash\ntest_1 (__main__.Test) ... ok\ntest_3 (__main__.Test) ... ok\ntest_2 (__main__.Test) ... ok\n\n----------------------------------------------------------------------\nRan 3 tests in 0.000s\n\nOK\n```\n在将多个 TestCase 调价到 TestSuite 中后，我们用到了 `unittest.TextTestRunner()` 方法，他会执行 TestSuite 或 TestCase 测 `run()` 方法，并把结果输出到 TextTestResult 中，后续我们将怎样将结果在打印到文件中\n\n然后如你所见，我们已经可以控制测试程序的执行顺序，同样的，通过这样的方式，我们还可以进行多个 TestCase 同时测试\n\n## 输出到文件\n每次测试结果都输出控制台，从可读性和持久化上都是个问题，我们需要想办法将结果打印到文件中，这里我们需要借助下第三方文件 [HTMLTestRunner](http://tungwaiyip.info/software/HTMLTestRunner.html) ，但是原版只支持 python2，我做了下改动，适配了 python3，地址为：https://github.com/wxnacy/study/blob/master/python/unittest_demo/HTMLTestRunner.py\n\n使用方法请见[修改 HTMLTestRunner.py 可以在 Python3 运行 ](/2018/03/20/update-htmltestrunner/)\n\n## 检测方法\n我们在刚才的例子中只用到了 `assertEqual()` 方法来检测结果是否相同，还有很多方法可以用来检测测试结果\n```bash\nassertEqual(a, b)\t    # a == b\nassertNotEqual(a, b)\t# a != b\nassertTrue(x)\t        # bool(x) is True\nassertFalse(x)\t        # bool(x) is False\n# 3.1 新加\nassertIs(a, b)\t        # a is b\nassertIsNot(a, b)\t    # a is not b\nassertIsNone(x)\t        # x is None\nassertIsNotNone(x)\t    # x is not None\nassertIn(a, b)\t        # a in b\nassertNotIn(a, b)\t    # a not in b\n# 3.2 新加\nassertIsInstance(a, b)\t    # isinstance(a, b)\nassertNotIsInstance(a, b)\t# not isinstance(a, b)\n```\n更多方法见[文档](https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertRaises)\n\n- [unittest — Unit testing framework](https://docs.python.org/3/library/unittest.html)\n- [Python单元测试框架](http://pyunit.sourceforge.net/pyunit_cn.html)\n- [Python单元测试——深入理解unittest](http://www.cnblogs.com/hackerain/p/3682019.html)\n- [Python必会的单元测试框架 —— unittest](http://blog.csdn.net/huilan_same/article/details/52944782)\n","slug":"unittest","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8i00at5gqocv3zksti"},{"title":"修改 HTMLTestRunner.py 可以在 Python3 运行","date":"2018-03-20T18:46:14.000Z","_content":"\n\n原版的 [HTMLTestRunner](http://tungwaiyip.info/software/HTMLTestRunner.html) 只支持 python2 环境，为了使用我做了适配 python3 的改动，并记录在此\n\n<!-- more --><!-- toc -->\n## No module named StringIO\n```python\nself.outputBuffer = StringIO.StringIO()\n```\npy3 中 `StringIO` 由 `io` 代替，所以导入模块时需要加上如下操作\n```python\ntry:\n    import StringIO\nexcept ImportError:\n    import io as StringIO\n```\n\n## AttributeError: 'dict' object has no attribute 'has_key'\npy3 中去掉了 `has_key()` 方法，判断是否包含 key 使用 `in` 操作符\n```python\nif not rmap.has_key(cls):\n# ==>\nif not cls in rmap:\n```\n## 'str' object has no attribute 'decode'\n同样的 py3 中去掉了 `decode`\n```python\nue = e.decode('latin-1')\n# ==>\nue = e\n\nuo = o.decode('latin-1')\n# ==>\nuo = o\n```\n## TypeError: unsupported operand type(s) for >>: 'builtin_function_or_method' and '_io.TextIOWrapper'\n`print` 是 py3 与 py2 最不可调和的矛盾\n```python\nprint >> sys.stderr, '\\nTime Elapsed: %s' % (self.stopTime-self.startTime)\n# ==>\nprint(sys.stderr, '\\nTime Elapsed: %s' % (self.stopTime-self.startTime))\n```\n\n修改后完整代码地址： https://github.com/wxnacy/study/blob/master/python/unittest_demo/HTMLTestRunner.py\n\n测试\n```bash\n$ wget https://raw.githubusercontent.com/wxnacy/study/master/python/unittest_demo/HTMLTestRunner.py\n$ wget https://raw.githubusercontent.com/wxnacy/study/master/python/unittest_demo/to_html.py\n$ python to_html.py\n$ open my_report.html\n```\n打开网页的效果如下\n\n![/images/htmltestrunner.png](/images/htmltestrunner.png)\n","source":"_posts/2018-03-20-update-htmltestrunner.md","raw":"---\ntitle: 修改 HTMLTestRunner.py 可以在 Python3 运行\ntags:\n  - python\ndate: 2018-03-20 18:46:14\n---\n\n\n原版的 [HTMLTestRunner](http://tungwaiyip.info/software/HTMLTestRunner.html) 只支持 python2 环境，为了使用我做了适配 python3 的改动，并记录在此\n\n<!-- more --><!-- toc -->\n## No module named StringIO\n```python\nself.outputBuffer = StringIO.StringIO()\n```\npy3 中 `StringIO` 由 `io` 代替，所以导入模块时需要加上如下操作\n```python\ntry:\n    import StringIO\nexcept ImportError:\n    import io as StringIO\n```\n\n## AttributeError: 'dict' object has no attribute 'has_key'\npy3 中去掉了 `has_key()` 方法，判断是否包含 key 使用 `in` 操作符\n```python\nif not rmap.has_key(cls):\n# ==>\nif not cls in rmap:\n```\n## 'str' object has no attribute 'decode'\n同样的 py3 中去掉了 `decode`\n```python\nue = e.decode('latin-1')\n# ==>\nue = e\n\nuo = o.decode('latin-1')\n# ==>\nuo = o\n```\n## TypeError: unsupported operand type(s) for >>: 'builtin_function_or_method' and '_io.TextIOWrapper'\n`print` 是 py3 与 py2 最不可调和的矛盾\n```python\nprint >> sys.stderr, '\\nTime Elapsed: %s' % (self.stopTime-self.startTime)\n# ==>\nprint(sys.stderr, '\\nTime Elapsed: %s' % (self.stopTime-self.startTime))\n```\n\n修改后完整代码地址： https://github.com/wxnacy/study/blob/master/python/unittest_demo/HTMLTestRunner.py\n\n测试\n```bash\n$ wget https://raw.githubusercontent.com/wxnacy/study/master/python/unittest_demo/HTMLTestRunner.py\n$ wget https://raw.githubusercontent.com/wxnacy/study/master/python/unittest_demo/to_html.py\n$ python to_html.py\n$ open my_report.html\n```\n打开网页的效果如下\n\n![/images/htmltestrunner.png](/images/htmltestrunner.png)\n","slug":"update-htmltestrunner","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8j00av5gqotu9ttijh"},{"title":"Python User Agents","date":"2018-03-23T15:29:04.000Z","_content":"\n\n最近在写流量监控，需要分析 User Agent，写了两行，放弃，我为什么不找个工具干这事。\n\n<!-- more --><!-- toc -->\n`user_agents` 是 Python 库，可以解析用户代理中使用系统、设备、浏览器等信息。它依赖于 `ua_parse` 解析库对原始代理字符串的解析。\n## 下载\n```bash\npip install pyyaml ua-parser user-agents\n```\n## 设备信息\n系浏览、器统、设备\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom user_agents import parse\n\n# iPhone's user agent string\nua_string = 'Mozilla/5.0 (iPhone; CPU iPhone OS 5_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9B179 Safari/7534.48.3'\nuser_agent = parse(ua_string)\n\n# Accessing user agent's browser attributes\nuser_agent.browser  # returns Browser(family=u'Mobile Safari', version=(5, 1), version_string='5.1')\nuser_agent.browser.family  # returns 'Mobile Safari'\nuser_agent.browser.version  # returns (5, 1)\nuser_agent.browser.version_string   # returns '5.1'\n\n# Accessing user agent's operating system properties\nuser_agent.os  # returns OperatingSystem(family=u'iOS', version=(5, 1), version_string='5.1')\nuser_agent.os.family  # returns 'iOS'\nuser_agent.os.version  # returns (5, 1)\nuser_agent.os.version_string  # returns '5.1'\n\n# Accessing user agent's device properties\nuser_agent.device  # returns Device(family=u'iPhone', brand=u'Apple', model=u'iPhone')\nuser_agent.device.family  # returns 'iPhone'\nuser_agent.device.brand # returns 'Apple'\nuser_agent.device.model # returns 'iPhone'\n\n# Viewing a pretty string version\nstr(user_agent) # returns \"iPhone / iOS 5.1 / Mobile Safari 5.1\"\n```\n\n## 设备类型判断\n- `is_mobile` 是否为手机\n- `is_pc` 是否为桌面电脑\n- `is_tablet` 是否为平板设备\n- `is_touch_capable` 是否为触摸设备\n- `is_bot` 是否为爬虫机器人\n\n- [Python User Agents](https://github.com/selwin/python-user-agents)\n","source":"_posts/2018-03-23-python-user-agents.md","raw":"---\ntitle: Python User Agents\ntags:\n  - python\ndate: 2018-03-23 15:29:04\n---\n\n\n最近在写流量监控，需要分析 User Agent，写了两行，放弃，我为什么不找个工具干这事。\n\n<!-- more --><!-- toc -->\n`user_agents` 是 Python 库，可以解析用户代理中使用系统、设备、浏览器等信息。它依赖于 `ua_parse` 解析库对原始代理字符串的解析。\n## 下载\n```bash\npip install pyyaml ua-parser user-agents\n```\n## 设备信息\n系浏览、器统、设备\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom user_agents import parse\n\n# iPhone's user agent string\nua_string = 'Mozilla/5.0 (iPhone; CPU iPhone OS 5_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9B179 Safari/7534.48.3'\nuser_agent = parse(ua_string)\n\n# Accessing user agent's browser attributes\nuser_agent.browser  # returns Browser(family=u'Mobile Safari', version=(5, 1), version_string='5.1')\nuser_agent.browser.family  # returns 'Mobile Safari'\nuser_agent.browser.version  # returns (5, 1)\nuser_agent.browser.version_string   # returns '5.1'\n\n# Accessing user agent's operating system properties\nuser_agent.os  # returns OperatingSystem(family=u'iOS', version=(5, 1), version_string='5.1')\nuser_agent.os.family  # returns 'iOS'\nuser_agent.os.version  # returns (5, 1)\nuser_agent.os.version_string  # returns '5.1'\n\n# Accessing user agent's device properties\nuser_agent.device  # returns Device(family=u'iPhone', brand=u'Apple', model=u'iPhone')\nuser_agent.device.family  # returns 'iPhone'\nuser_agent.device.brand # returns 'Apple'\nuser_agent.device.model # returns 'iPhone'\n\n# Viewing a pretty string version\nstr(user_agent) # returns \"iPhone / iOS 5.1 / Mobile Safari 5.1\"\n```\n\n## 设备类型判断\n- `is_mobile` 是否为手机\n- `is_pc` 是否为桌面电脑\n- `is_tablet` 是否为平板设备\n- `is_touch_capable` 是否为触摸设备\n- `is_bot` 是否为爬虫机器人\n\n- [Python User Agents](https://github.com/selwin/python-user-agents)\n","slug":"python-user-agents","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8k00ax5gqof42dz6pd"},{"title":"Python 2.7 退休倒计时","date":"2018-03-24T22:13:40.000Z","_content":"\n\n我满怀欣喜的写了一个 py2 死亡，不，退休倒计时，呵呵呵呵，感谢 Python2 这么多年辛勤的付出，Python3 下面的时间后，就是你的天下了\n<!-- more -->\n{% raw %}\n<div id=\"aaa\" style=\"font-size: 50px\"></div>\n<script type=\"text/javascript\" src=\"/js/countdown.js\"></script>\n\n<script>\nTicts.createTicts(\"aaa\",\"2020-01-01 00:00:00\");\n</script>\n{% endraw %}\n\n- [Python 2.7 will retire in...](https://pythonclock.org/)\n","source":"_posts/2018-03-24-py2-end-day.md","raw":"---\ntitle: Python 2.7 退休倒计时\ntags:\n  - python\ndate: 2018-03-24 22:13:40\n---\n\n\n我满怀欣喜的写了一个 py2 死亡，不，退休倒计时，呵呵呵呵，感谢 Python2 这么多年辛勤的付出，Python3 下面的时间后，就是你的天下了\n<!-- more -->\n{% raw %}\n<div id=\"aaa\" style=\"font-size: 50px\"></div>\n<script type=\"text/javascript\" src=\"/js/countdown.js\"></script>\n\n<script>\nTicts.createTicts(\"aaa\",\"2020-01-01 00:00:00\");\n</script>\n{% endraw %}\n\n- [Python 2.7 will retire in...](https://pythonclock.org/)\n","slug":"py2-end-day","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8l00az5gqotueber1c"},{"title":"JavaScript 获取地址相关信息","date":"2018-03-22T16:34:12.000Z","_content":"\n\n简单总结下 JavaScript 环境下获取当前地址相关信息\n\n<!-- more --><!-- toc -->\n## window.location\n`window.location` 中包含了很丰富的地址信息\n```javascript\nconsole.log(window.location)\n```\n```json\n{\n　　　　\"hash\":\"\",\n　　　　\"host\":\"localhost:4001\",\n　　　　\"href\":\"http://localhost:4001/2018/03/22/js-get-location-data/?query=s\",\n　　　　\"port\":\"4001\",\n　　　　\"origin\":\"http://localhost:4001\",\n　　　　\"search\":\"?query=s\",\n　　　　\"hostname\":\"localhost\",\n　　　　\"pathname\":\"/2018/03/22/js-get-location-data/\",\n　　　　\"protocol\":\"http:\",\n　　　　\"ancestorOrigins\":{}\n}\n```\n一般常用到 `window.location.href` 来获取当前地址，`window.location.search` 来分析传入的参数\n\n## referrer\nreferrer 是流量来源地址，非常有用，可以用它来做\n- 登陆后跳回访问页面\n- 网站数据统计\n- 防盗链\n获取非常简单\n```java\nconsole.log(document.referrer);\n// https://www.google.com/\n```\n","source":"_posts/2018-03-22-js-get-location-data.md","raw":"---\ntitle: JavaScript 获取地址相关信息\ntags:\n  - javascript\ndate: 2018-03-22 16:34:12\n---\n\n\n简单总结下 JavaScript 环境下获取当前地址相关信息\n\n<!-- more --><!-- toc -->\n## window.location\n`window.location` 中包含了很丰富的地址信息\n```javascript\nconsole.log(window.location)\n```\n```json\n{\n　　　　\"hash\":\"\",\n　　　　\"host\":\"localhost:4001\",\n　　　　\"href\":\"http://localhost:4001/2018/03/22/js-get-location-data/?query=s\",\n　　　　\"port\":\"4001\",\n　　　　\"origin\":\"http://localhost:4001\",\n　　　　\"search\":\"?query=s\",\n　　　　\"hostname\":\"localhost\",\n　　　　\"pathname\":\"/2018/03/22/js-get-location-data/\",\n　　　　\"protocol\":\"http:\",\n　　　　\"ancestorOrigins\":{}\n}\n```\n一般常用到 `window.location.href` 来获取当前地址，`window.location.search` 来分析传入的参数\n\n## referrer\nreferrer 是流量来源地址，非常有用，可以用它来做\n- 登陆后跳回访问页面\n- 网站数据统计\n- 防盗链\n获取非常简单\n```java\nconsole.log(document.referrer);\n// https://www.google.com/\n```\n","slug":"js-get-location-data","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8m00b15gqoqiykszit"},{"title":"Vim 插件 Emmet web 开发神器","date":"2018-03-25T17:17:10.000Z","_content":"\n\n最近开发些 web 页面，忍着敲标签的痛苦，想起来以前用过但不熟练的插件 [Emmet](https://emmet.io/)，用完以后在写起代码感觉欲罢不能。\n\n<!-- more --><!-- toc -->\n![/images/emmet.gif](/images/emmet.gif)\n\n相信你在看过这个预览后，一定想开始尝试着用这个插件了，我们开始吧\n\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/mattn/emmet-vim.git\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'mattn/emmet-vim'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 配置\n官方默认的快捷键前缀是 `<C-Y>`，这在按第三个键位的时候简直逆天，官方自己也说用户可以改成 `<C-Z>` 比较方便\n```bash\nlet g:user_emmet_leader_key='<C-Z>'     \" 设置快捷键\n```\n\n## 使用\ninsert 模式下输入 `html:5` 后键入快捷键 `<c-z>,` 完成代码键入\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title></title>\n</head>\n<body>\n\n</body>\n</html>\n```\nnormal 模式下选中多行 `item`，键入快捷键 `<c-z>,` 完成代码键入\n```html\n  <ul>\n    <li>\n      <a href=\"\">item</a>\n    </li>\n    <li>\n      <a href=\"\">item</a>\n    </li>\n    <li>\n      <a href=\"\">item</a>\n    </li>\n  </ul>\n```\ninsert 模式后输入 `ul>li*3>a`，键入快捷键 `<c-z>,` 完成代码键入\n```html\n  <ul>\n    <li><a href=\"\"></a></li>\n    <li><a href=\"\"></a></li>\n    <li><a href=\"\"></a></li>\n  </ul>\n```\n更多使用见[文档](https://raw.githubusercontent.com/mattn/emmet-vim/master/TUTORIAL)\n","source":"_posts/2018-03-25-vim-plugin-emmet.md","raw":"---\ntitle: Vim 插件 Emmet web 开发神器\ndate: 2018-03-25 17:17:10\ntags:\n---\n\n\n最近开发些 web 页面，忍着敲标签的痛苦，想起来以前用过但不熟练的插件 [Emmet](https://emmet.io/)，用完以后在写起代码感觉欲罢不能。\n\n<!-- more --><!-- toc -->\n![/images/emmet.gif](/images/emmet.gif)\n\n相信你在看过这个预览后，一定想开始尝试着用这个插件了，我们开始吧\n\n## 安装\n### Pathogen\n```bash\n$ cd ~/.vim/bundle\n$ git clone https://github.com/mattn/emmet-vim.git\n```\n\n### Vundle\n修改 `~/.vimrc`\n```bash\nPlugin 'mattn/emmet-vim'\n```\n在 Vim 中运行\n```bash\n:PluginInstall\n```\n\n## 配置\n官方默认的快捷键前缀是 `<C-Y>`，这在按第三个键位的时候简直逆天，官方自己也说用户可以改成 `<C-Z>` 比较方便\n```bash\nlet g:user_emmet_leader_key='<C-Z>'     \" 设置快捷键\n```\n\n## 使用\ninsert 模式下输入 `html:5` 后键入快捷键 `<c-z>,` 完成代码键入\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title></title>\n</head>\n<body>\n\n</body>\n</html>\n```\nnormal 模式下选中多行 `item`，键入快捷键 `<c-z>,` 完成代码键入\n```html\n  <ul>\n    <li>\n      <a href=\"\">item</a>\n    </li>\n    <li>\n      <a href=\"\">item</a>\n    </li>\n    <li>\n      <a href=\"\">item</a>\n    </li>\n  </ul>\n```\ninsert 模式后输入 `ul>li*3>a`，键入快捷键 `<c-z>,` 完成代码键入\n```html\n  <ul>\n    <li><a href=\"\"></a></li>\n    <li><a href=\"\"></a></li>\n    <li><a href=\"\"></a></li>\n  </ul>\n```\n更多使用见[文档](https://raw.githubusercontent.com/mattn/emmet-vim/master/TUTORIAL)\n","slug":"vim-plugin-emmet","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8n00b35gqoov2q16ko"},{"title":"SQLAlchemy Paginate 分页查询","date":"2018-03-27T18:16:12.000Z","_content":"\n在 SQLAlchemy 中查询分页使用 `paginate()` 方法\n\n<!-- more --><!-- toc -->\n## 方法\n```python\ndb.session.query(User).filter_by().paginate(page=None, per_page=None,\n    error_out=True, max_per_page=None)\n```\n参数定义：\n- `page` 查询的页数\n- `per_page` 每页的条数\n- `max_per_page` 每页最大条数，有值时，`per_page` 受它影响\n- `error_out` 当值为 True 时，下列情况会报错\n    - 当 page 为 1 时，找不到任何数据\n    - page 小于 1，或者 per_page 为负数\n    - page 或 per_page 不是整数\n\n该方法返回一个分页对象 `Pagination`\n\n## Pagination\n调用 `paginate()` 方法，会返回一个 `Pagination` 对象，它封装了当前页的各种数据和方法，具体如下\n### 字段\n- `has_next` 如果下一页存在，返回 True\n- `has_prev` 如果上一页存在，返回 True\n- `items` 当前页的数据列表\n- `next_num` 下一页的页码\n- `page` 当前页码\n- `pages` 总页数\n- `per_page` 每页的条数\n- `prev_num` 上一页的页码\n- `query` 用于创建此分页对象的无限查询对象。\n- `total` 总条数\n- `iter_pages(left_edge=2, left_current=2, right_current=5, right_edge=2)`\n    迭代分页中的页码，四个参数，分别控制了省略号左右两侧各显示多少页码，在模板中可以这样渲染\n```python\n{% macro render_pagination(pagination, endpoint) %}\n  <div class=pagination>\n  {% for page in pagination.iter_pages() %}\n    {% if page %}\n      {% if page != pagination.page %}\n        <a href=\"{{ url_for(endpoint, page=page) }}\">{{ page }}</a>\n      {% else %}\n        <strong>{{ page }}</strong>\n      {% endif %}\n    {% else %}\n      <span class=ellipsis>…</span>\n    {% endif %}\n  {%- endfor %}\n  </div>\n{% endmacro %}\n```\n- `next(error_out=False)` 返回下一页的分页对象\n- `prev(error_out=False)` 返回上一页的分页对象\n\n- [Pagination](http://flask-sqlalchemy.pocoo.org/2.3/api/#flask_sqlalchemy.Pagination)\n","source":"_posts/2018-03-27-sqlalchemy-paginate.md","raw":"---\ntitle: SQLAlchemy Paginate 分页查询\ndate: 2018-03-27 18:16:12\ntags: [python, sqlalchemy]\n---\n\n在 SQLAlchemy 中查询分页使用 `paginate()` 方法\n\n<!-- more --><!-- toc -->\n## 方法\n```python\ndb.session.query(User).filter_by().paginate(page=None, per_page=None,\n    error_out=True, max_per_page=None)\n```\n参数定义：\n- `page` 查询的页数\n- `per_page` 每页的条数\n- `max_per_page` 每页最大条数，有值时，`per_page` 受它影响\n- `error_out` 当值为 True 时，下列情况会报错\n    - 当 page 为 1 时，找不到任何数据\n    - page 小于 1，或者 per_page 为负数\n    - page 或 per_page 不是整数\n\n该方法返回一个分页对象 `Pagination`\n\n## Pagination\n调用 `paginate()` 方法，会返回一个 `Pagination` 对象，它封装了当前页的各种数据和方法，具体如下\n### 字段\n- `has_next` 如果下一页存在，返回 True\n- `has_prev` 如果上一页存在，返回 True\n- `items` 当前页的数据列表\n- `next_num` 下一页的页码\n- `page` 当前页码\n- `pages` 总页数\n- `per_page` 每页的条数\n- `prev_num` 上一页的页码\n- `query` 用于创建此分页对象的无限查询对象。\n- `total` 总条数\n- `iter_pages(left_edge=2, left_current=2, right_current=5, right_edge=2)`\n    迭代分页中的页码，四个参数，分别控制了省略号左右两侧各显示多少页码，在模板中可以这样渲染\n```python\n{% macro render_pagination(pagination, endpoint) %}\n  <div class=pagination>\n  {% for page in pagination.iter_pages() %}\n    {% if page %}\n      {% if page != pagination.page %}\n        <a href=\"{{ url_for(endpoint, page=page) }}\">{{ page }}</a>\n      {% else %}\n        <strong>{{ page }}</strong>\n      {% endif %}\n    {% else %}\n      <span class=ellipsis>…</span>\n    {% endif %}\n  {%- endfor %}\n  </div>\n{% endmacro %}\n```\n- `next(error_out=False)` 返回下一页的分页对象\n- `prev(error_out=False)` 返回上一页的分页对象\n\n- [Pagination](http://flask-sqlalchemy.pocoo.org/2.3/api/#flask_sqlalchemy.Pagination)\n","slug":"sqlalchemy-paginate","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8o00b55gqoigu6jfen"},{"title":"Mysql REPLACE INTO 语法","date":"2018-03-26T21:29:36.000Z","_content":"\n\nMysql 中插入数据的语法除了 `INSERT INTO`，还有一个 `REPLACE INTO` 语法，只不过该语法在没有插入数据时是插入，表中有时是替换，并且会更改主键 id\n<!-- more -->\n更改主键 id 这个设定，就决定了正常的业务程序是用不到这个语法的，一条数据老改 id 谁受得了。\n\n但是换一种情况就会显得很有用，比如，你就是想要得到每次都变化的 id，举个例子\n```mysql\nDROP TABLE IF EXISTS `auto_id`;\nCREATE TABLE `auto_id` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\n  `max_id` bigint(20) NOT NULL DEFAULT 0 COMMENT '占位字段',\n  `create_ts` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '记录创建时间',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `auto_max_id_uindex` (`max_id`)\n) ENGINE=InnoDB CHARSET=utf8mb4 COMMENT='自动生成 id';\n```\n新建一个表，我通过不断的插入相同的 `mac_id` 字段来获取自增的 id\n```mysql\nreplace into auto_id(max_id) values (1);\nselect last_insert_id();    -- 1\nreplace into auto_id(max_id) values (1);\nselect last_insert_id();    -- 2\n```\n想要达到这样的效果需要一个条件，想要替换的数据字段需要设为唯一键\n```mysql\nUNIQUE KEY `auto_max_id_uindex` (`max_id`)\n```\n\n`REPLACE INTO` 一共三种写法分别为\n```mysql\nreplace into auto_id(max_id) values (1);\nreplace into auto_id(max_id) select 1;\nreplace into auto_id set max_id = 1;\n```\n\n只是为了得到这个自增 id，多少有点脱裤子放屁，不过配合一些算法，我们可以根据表来得到对应的命名空间的 id，详见 [Mysql 自动生成 id 算法](Mysql 自动生成 id 算法)\n","source":"_posts/2018-03-26-replace-into.md","raw":"---\ntitle: Mysql REPLACE INTO 语法\ntags:\n  - mysql\ndate: 2018-03-26 21:29:36\n---\n\n\nMysql 中插入数据的语法除了 `INSERT INTO`，还有一个 `REPLACE INTO` 语法，只不过该语法在没有插入数据时是插入，表中有时是替换，并且会更改主键 id\n<!-- more -->\n更改主键 id 这个设定，就决定了正常的业务程序是用不到这个语法的，一条数据老改 id 谁受得了。\n\n但是换一种情况就会显得很有用，比如，你就是想要得到每次都变化的 id，举个例子\n```mysql\nDROP TABLE IF EXISTS `auto_id`;\nCREATE TABLE `auto_id` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\n  `max_id` bigint(20) NOT NULL DEFAULT 0 COMMENT '占位字段',\n  `create_ts` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '记录创建时间',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `auto_max_id_uindex` (`max_id`)\n) ENGINE=InnoDB CHARSET=utf8mb4 COMMENT='自动生成 id';\n```\n新建一个表，我通过不断的插入相同的 `mac_id` 字段来获取自增的 id\n```mysql\nreplace into auto_id(max_id) values (1);\nselect last_insert_id();    -- 1\nreplace into auto_id(max_id) values (1);\nselect last_insert_id();    -- 2\n```\n想要达到这样的效果需要一个条件，想要替换的数据字段需要设为唯一键\n```mysql\nUNIQUE KEY `auto_max_id_uindex` (`max_id`)\n```\n\n`REPLACE INTO` 一共三种写法分别为\n```mysql\nreplace into auto_id(max_id) values (1);\nreplace into auto_id(max_id) select 1;\nreplace into auto_id set max_id = 1;\n```\n\n只是为了得到这个自增 id，多少有点脱裤子放屁，不过配合一些算法，我们可以根据表来得到对应的命名空间的 id，详见 [Mysql 自动生成 id 算法](Mysql 自动生成 id 算法)\n","slug":"replace-into","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8p00b75gqos2zs6q2a"},{"title":"JavaScript 实现倒计时","date":"2018-03-28T21:30:04.000Z","_content":"前两天写了一个 python2 退休的倒计时，从网上找了一个算法，但是只能支持到天的倒计时，不是我想要的从年开始倒计时，所以自己优化了下，先看个效果\n<!-- more -->\n{% raw %}\n<div id=\"aaa\" style=\"font-size: 50px\"></div>\n<script type=\"text/javascript\" src=\"/js/countdown.js\"></script>\n\n<script>\n//定义一个立即执行的函数\nTicts.createTicts(\"aaa\",\"2021-05-05 00:00:00\");\n</script>\n{% endraw %}\n\n以下为代码\n```javascript\n(function () {\n    var Ticts=function Ticts() {\n        this.ticts = {};\n    };\n    Ticts.prototype.createTicts=function(id, dealline) {\n        var ticts=this;\n        var dd = new Date(dealline)     // 倒计时最终时间\n        var time = dd - new Date()      // 距今天的毫秒数\n        var _ticts=this.ticts[id] = {\n            dealine: dealline\n            , id: id\n            , time: time\n            , interval: setInterval(function () {\n                var t = null;\n                var d = null;\n                var h = null;\n                var m = null;\n                var s = null;\n\n                var now = new Date();\n                t = _ticts.time / 1000; //js默认时间戳为毫秒,需要转化成秒\n                var y = dd.getFullYear() - now.getFullYear()\n                var M = dd.getMonth() - now.getMonth()\n                var d = dd.getDate() - now.getDate()\n                var h = dd.getHours() - now.getHours()\n                if( M < 0 ){\n                    y--;\n                    M = M + 12\n                }\n                var flag = [1, 3, 5, 7, 8, 10, 12, 4, 6, 9, 11, 2];\n                if( d < 0 ){\n                    M--;\n                    var index = flag.findIndex((temp) => {\n                        return temp === now.getMonth() + 1\n                    });\n                    var monthLength;\n                    if (index <= 6) {\n                        monthLength = 31;\n                    } else if (index > 6 && index <= 10) {\n                        monthLength = 30;\n                    } else {\n                        monthLength = 28;\n                    }\n                    d = dd.getDate() + (monthLength - now.getDate());\n                }\n                if( h < 0 ){\n                    d--;\n                }\n                t = t - y * 365 * 24 * 3600\n                var total_day = Math.floor(t / (24 * 3600))\n                t = t - 24 * 3600 * total_day\n                h = Math.floor(t / 3600);\n                t = t -h * 3600\n                m = Math.floor(t / 60);\n                t = t - m * 60\n                s = Math.floor(t);\n　　　　　　　　　//这里可以做一个格式化的处理,甚至做毫秒级的页面渲染,基于DOM操作,太多个倒计时一起会导致页面性能下降\n                document.getElementById(id).innerHTML = `${y} 年 ${M} 月 ${d} 天 ${h} 小时 ${m} 分钟 ${s} 秒`\n                _ticts.time -= 1000;\n                if (_ticts.time < 0)\n　　　　　　　　　　　ticts.deleteTicts(id);//判断是否到期,到期后自动删除定时器\n            }, 1000)\n        }\n    };\n    Ticts.prototype.deleteTicts = function(id) {\n        clearInterval(this.ticts[id].interval);//清楚定时器的方法,需要定时器的指针作为参数传入clearInterval\n        delete this.ticts[id];//通过delete的方法删除对象中的属性\n    };\n   //新建一个ticts对象,放到window全局函数中,那么在html页面是(或者其他js文件)可以访问该对象\n    window.Ticts=new Ticts();\n})();\n```\n使用\n```java\n<div id=\"aaa\" style=\"font-size: 50px\"></div>\n<script type=\"text/javascript\" src=\"/js/countdown.js\"></script>\n\n<script>\n//定义一个立即执行的函数\nTicts.createTicts(\"aaa\",\"2021-05-05 00:00:00\");\n</script>\n```\n[试一试](/run.html?id=68719480037)\n","source":"_posts/2018-03-28-js-countdown.md","raw":"---\ntitle: JavaScript 实现倒计时\ndate: 2018-03-28 21:30:04\ntags: [javascript]\n---\n前两天写了一个 python2 退休的倒计时，从网上找了一个算法，但是只能支持到天的倒计时，不是我想要的从年开始倒计时，所以自己优化了下，先看个效果\n<!-- more -->\n{% raw %}\n<div id=\"aaa\" style=\"font-size: 50px\"></div>\n<script type=\"text/javascript\" src=\"/js/countdown.js\"></script>\n\n<script>\n//定义一个立即执行的函数\nTicts.createTicts(\"aaa\",\"2021-05-05 00:00:00\");\n</script>\n{% endraw %}\n\n以下为代码\n```javascript\n(function () {\n    var Ticts=function Ticts() {\n        this.ticts = {};\n    };\n    Ticts.prototype.createTicts=function(id, dealline) {\n        var ticts=this;\n        var dd = new Date(dealline)     // 倒计时最终时间\n        var time = dd - new Date()      // 距今天的毫秒数\n        var _ticts=this.ticts[id] = {\n            dealine: dealline\n            , id: id\n            , time: time\n            , interval: setInterval(function () {\n                var t = null;\n                var d = null;\n                var h = null;\n                var m = null;\n                var s = null;\n\n                var now = new Date();\n                t = _ticts.time / 1000; //js默认时间戳为毫秒,需要转化成秒\n                var y = dd.getFullYear() - now.getFullYear()\n                var M = dd.getMonth() - now.getMonth()\n                var d = dd.getDate() - now.getDate()\n                var h = dd.getHours() - now.getHours()\n                if( M < 0 ){\n                    y--;\n                    M = M + 12\n                }\n                var flag = [1, 3, 5, 7, 8, 10, 12, 4, 6, 9, 11, 2];\n                if( d < 0 ){\n                    M--;\n                    var index = flag.findIndex((temp) => {\n                        return temp === now.getMonth() + 1\n                    });\n                    var monthLength;\n                    if (index <= 6) {\n                        monthLength = 31;\n                    } else if (index > 6 && index <= 10) {\n                        monthLength = 30;\n                    } else {\n                        monthLength = 28;\n                    }\n                    d = dd.getDate() + (monthLength - now.getDate());\n                }\n                if( h < 0 ){\n                    d--;\n                }\n                t = t - y * 365 * 24 * 3600\n                var total_day = Math.floor(t / (24 * 3600))\n                t = t - 24 * 3600 * total_day\n                h = Math.floor(t / 3600);\n                t = t -h * 3600\n                m = Math.floor(t / 60);\n                t = t - m * 60\n                s = Math.floor(t);\n　　　　　　　　　//这里可以做一个格式化的处理,甚至做毫秒级的页面渲染,基于DOM操作,太多个倒计时一起会导致页面性能下降\n                document.getElementById(id).innerHTML = `${y} 年 ${M} 月 ${d} 天 ${h} 小时 ${m} 分钟 ${s} 秒`\n                _ticts.time -= 1000;\n                if (_ticts.time < 0)\n　　　　　　　　　　　ticts.deleteTicts(id);//判断是否到期,到期后自动删除定时器\n            }, 1000)\n        }\n    };\n    Ticts.prototype.deleteTicts = function(id) {\n        clearInterval(this.ticts[id].interval);//清楚定时器的方法,需要定时器的指针作为参数传入clearInterval\n        delete this.ticts[id];//通过delete的方法删除对象中的属性\n    };\n   //新建一个ticts对象,放到window全局函数中,那么在html页面是(或者其他js文件)可以访问该对象\n    window.Ticts=new Ticts();\n})();\n```\n使用\n```java\n<div id=\"aaa\" style=\"font-size: 50px\"></div>\n<script type=\"text/javascript\" src=\"/js/countdown.js\"></script>\n\n<script>\n//定义一个立即执行的函数\nTicts.createTicts(\"aaa\",\"2021-05-05 00:00:00\");\n</script>\n```\n[试一试](/run.html?id=68719480037)\n","slug":"js-countdown","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8q00ba5gqoolb382bq"},{"title":"CentOS 7 安装 Nginx","date":"2018-03-31T16:16:47.000Z","_content":"\n这两天折腾 Nginx 使用 GeoIp 通过分析 ip 来区分用户来源，又学到了些东西，今天先来总结下 Nginx 的安装方式\n\n<!-- more --><!-- toc -->\n## RPM 包安装\nRPM 包安装有两种方式，分别是添加 EPEL 库和添加 Nginx 库\n### 安装 EPEL 库\n安装 EPEL 库\n```bash\n$ sudo yum -y install epel-release\n```\n安装 Nginx\n```bash\n$ sudo yum -y install nginx\n```\n查看版本\n```bash\n$ nginx -V\nnginx version: nginx/1.12.2\nbuilt by gcc 4.8.5 20150623 (Red Hat 4.8.5-16) (GCC)\nbuilt with OpenSSL 1.0.2k-fips  26 Jan 2017\nTLS SNI support enabled\nconfigure arguments: --prefix=/usr/share/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib64/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --http-client-body-temp-path=/var/lib/nginx/tmp/client_body --http-proxy-temp-path=/var/lib/nginx/tmp/proxy --http-fastcgi-temp-path=/var/lib/nginx/tmp/fastcgi --http-uwsgi-temp-path=/var/lib/nginx/tmp/uwsgi --http-scgi-temp-path=/var/lib/nginx/tmp/scgi --pid-path=/run/nginx.pid --lock-path=/run/lock/subsys/nginx --user=nginx --group=nginx --with-file-aio --with-ipv6 --with-http_auth_request_module --with-http_ssl_module --with-http_v2_module --with-http_realip_module --with-http_addition_module --with-http_xslt_module=dynamic --with-http_image_filter_module=dynamic --with-http_geoip_module=dynamic --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_degradation_module --with-http_slice_module --with-http_stub_status_module --with-http_perl_module=dynamic --with-mail=dynamic --with-mail_ssl_module --with-pcre --with-pcre-jit --with-stream=dynamic --with-stream_ssl_module --with-google_perftools_module --with-debug --with-cc-opt='-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -mtune=generic' --with-ld-opt='-Wl,-z,relro -specs=/usr/lib/rpm/redhat/redhat-hardened-ld -Wl,-E'\n```\n### 添加 Nginx 仓库\n添加 Nginx 仓库\n```bash\n$ sudo rpm -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm\n```\n安装 Nginx\n```bash\n$ sudo yum -y install nginx\n```\n查看版本\n```bash\n$ nginx -V\nnginx version: nginx/1.12.2\nbuilt by gcc 4.8.5 20150623 (Red Hat 4.8.5-16) (GCC)\nbuilt with OpenSSL 1.0.2k-fips  26 Jan 2017\nTLS SNI support enabled\nconfigure arguments: --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib64/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=nginx --group=nginx --with-compat --with-file-aio --with-threads --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_flv_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_mp4_module --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-mail --with-mail_ssl_module --with-stream --with-stream_realip_module --with-stream_ssl_module --with-stream_ssl_preread_module --with-cc-opt='-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -fPIC' --with-ld-opt='-Wl,-z,relro -Wl,-z,now -pie'\n```\n两种安装方式都很简洁，效果也差不多，但是通过 EPEL 库方式安装出来会发现，Nginx 的携带的模块要多一些，比如 `http_geoip_module` 而它恰恰是服务器安全和设置重要的模块之一，预期后期折腾的去安装模块，为什么不开始就装上呢\n\n## 编译安装\n包安装很方便，但是扩展性不够，比如添加额外的模块，还是要使用源码编译\n首先安装依赖\n```bash\n$ yum -y install pcre pcre-devel openssl openssl-devel\n```\n从 [download](https://nginx.org/en/download.html) 下载当前文档版\n```bash\n$ wget https://nginx.org/download/nginx-1.12.2.tar.gz\n```\n创建相应用户\n```bash\n$ groupadd -f nginx\n$ useradd -g nginx nginx\n```\n解压并安装\n```bash\n$ tar zxvf nginx-1.12.2.tar.gz\n$ cd nginx-1.12.2\n$ ./configure --user=nginx --group=nginx \\\n    --with-http_ssl_module \\\n    --with-http_realip_module \\\n    --with-http_addition_module \\\n    --with-http_sub_module \\\n    --with-http_dav_module \\\n    --with-http_flv_module \\\n    --with-http_mp4_module \\\n    --with-http_gunzip_module \\\n    --with-http_gzip_static_module \\\n    --with-http_random_index_module \\\n    --with-http_secure_link_module \\\n    --with-http_stub_status_module \\\n    --with-mail \\\n    --with-mail_ssl_module \\\n    --with-file-aio\n$ make && make install\n```\n默认的安装目录为 `/usr/local/nginx`\n最后将命令脚本超链接到环境变量中\n```bash\n$ ln -sf /usr/local/nginx/sbin/nginx /usr/local/bin/nginx\n```\n## 使用\n启动\n```bash\n$ nginx\n```\n停止\n```bash\n$ nginx -s [start, stop]\n```\n重新启动\n```bash\n$ nginx -s reopen\n```\n修改 `nginx.conf` 先进性测试是否没有语法错误\n```bash\n$ nginx -t\nnginx: the configuration file /etc/nginx/nginx.conf syntax is ok\nnginx: configuration file /etc/nginx/nginx.conf test is successful\n```\n然后重新加载配置，使之生效\n```bash\n$ nginx -s reload\n```\n系统命令的方式来启动停止\n```bash\n$ sudo systemctl [start, stop, restart] nginx\n```\n设置或取消开机启动\n```bash\n$ sudo systemctl [enable, disable] nginx\n```\n\n\n","source":"_posts/2018-03-31-linux-install-nginx.md","raw":"---\ntitle: CentOS 7 安装 Nginx\ntags:\n  - linux\n  - nginx\ndate: 2018-03-31 16:16:47\n---\n\n这两天折腾 Nginx 使用 GeoIp 通过分析 ip 来区分用户来源，又学到了些东西，今天先来总结下 Nginx 的安装方式\n\n<!-- more --><!-- toc -->\n## RPM 包安装\nRPM 包安装有两种方式，分别是添加 EPEL 库和添加 Nginx 库\n### 安装 EPEL 库\n安装 EPEL 库\n```bash\n$ sudo yum -y install epel-release\n```\n安装 Nginx\n```bash\n$ sudo yum -y install nginx\n```\n查看版本\n```bash\n$ nginx -V\nnginx version: nginx/1.12.2\nbuilt by gcc 4.8.5 20150623 (Red Hat 4.8.5-16) (GCC)\nbuilt with OpenSSL 1.0.2k-fips  26 Jan 2017\nTLS SNI support enabled\nconfigure arguments: --prefix=/usr/share/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib64/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --http-client-body-temp-path=/var/lib/nginx/tmp/client_body --http-proxy-temp-path=/var/lib/nginx/tmp/proxy --http-fastcgi-temp-path=/var/lib/nginx/tmp/fastcgi --http-uwsgi-temp-path=/var/lib/nginx/tmp/uwsgi --http-scgi-temp-path=/var/lib/nginx/tmp/scgi --pid-path=/run/nginx.pid --lock-path=/run/lock/subsys/nginx --user=nginx --group=nginx --with-file-aio --with-ipv6 --with-http_auth_request_module --with-http_ssl_module --with-http_v2_module --with-http_realip_module --with-http_addition_module --with-http_xslt_module=dynamic --with-http_image_filter_module=dynamic --with-http_geoip_module=dynamic --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_degradation_module --with-http_slice_module --with-http_stub_status_module --with-http_perl_module=dynamic --with-mail=dynamic --with-mail_ssl_module --with-pcre --with-pcre-jit --with-stream=dynamic --with-stream_ssl_module --with-google_perftools_module --with-debug --with-cc-opt='-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -mtune=generic' --with-ld-opt='-Wl,-z,relro -specs=/usr/lib/rpm/redhat/redhat-hardened-ld -Wl,-E'\n```\n### 添加 Nginx 仓库\n添加 Nginx 仓库\n```bash\n$ sudo rpm -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm\n```\n安装 Nginx\n```bash\n$ sudo yum -y install nginx\n```\n查看版本\n```bash\n$ nginx -V\nnginx version: nginx/1.12.2\nbuilt by gcc 4.8.5 20150623 (Red Hat 4.8.5-16) (GCC)\nbuilt with OpenSSL 1.0.2k-fips  26 Jan 2017\nTLS SNI support enabled\nconfigure arguments: --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib64/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=nginx --group=nginx --with-compat --with-file-aio --with-threads --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_flv_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_mp4_module --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-mail --with-mail_ssl_module --with-stream --with-stream_realip_module --with-stream_ssl_module --with-stream_ssl_preread_module --with-cc-opt='-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -fPIC' --with-ld-opt='-Wl,-z,relro -Wl,-z,now -pie'\n```\n两种安装方式都很简洁，效果也差不多，但是通过 EPEL 库方式安装出来会发现，Nginx 的携带的模块要多一些，比如 `http_geoip_module` 而它恰恰是服务器安全和设置重要的模块之一，预期后期折腾的去安装模块，为什么不开始就装上呢\n\n## 编译安装\n包安装很方便，但是扩展性不够，比如添加额外的模块，还是要使用源码编译\n首先安装依赖\n```bash\n$ yum -y install pcre pcre-devel openssl openssl-devel\n```\n从 [download](https://nginx.org/en/download.html) 下载当前文档版\n```bash\n$ wget https://nginx.org/download/nginx-1.12.2.tar.gz\n```\n创建相应用户\n```bash\n$ groupadd -f nginx\n$ useradd -g nginx nginx\n```\n解压并安装\n```bash\n$ tar zxvf nginx-1.12.2.tar.gz\n$ cd nginx-1.12.2\n$ ./configure --user=nginx --group=nginx \\\n    --with-http_ssl_module \\\n    --with-http_realip_module \\\n    --with-http_addition_module \\\n    --with-http_sub_module \\\n    --with-http_dav_module \\\n    --with-http_flv_module \\\n    --with-http_mp4_module \\\n    --with-http_gunzip_module \\\n    --with-http_gzip_static_module \\\n    --with-http_random_index_module \\\n    --with-http_secure_link_module \\\n    --with-http_stub_status_module \\\n    --with-mail \\\n    --with-mail_ssl_module \\\n    --with-file-aio\n$ make && make install\n```\n默认的安装目录为 `/usr/local/nginx`\n最后将命令脚本超链接到环境变量中\n```bash\n$ ln -sf /usr/local/nginx/sbin/nginx /usr/local/bin/nginx\n```\n## 使用\n启动\n```bash\n$ nginx\n```\n停止\n```bash\n$ nginx -s [start, stop]\n```\n重新启动\n```bash\n$ nginx -s reopen\n```\n修改 `nginx.conf` 先进性测试是否没有语法错误\n```bash\n$ nginx -t\nnginx: the configuration file /etc/nginx/nginx.conf syntax is ok\nnginx: configuration file /etc/nginx/nginx.conf test is successful\n```\n然后重新加载配置，使之生效\n```bash\n$ nginx -s reload\n```\n系统命令的方式来启动停止\n```bash\n$ sudo systemctl [start, stop, restart] nginx\n```\n设置或取消开机启动\n```bash\n$ sudo systemctl [enable, disable] nginx\n```\n\n\n","slug":"linux-install-nginx","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8r00bc5gqowrksp9e3"},{"title":"JavaScript Date 对象","date":"2018-03-29T16:27:18.000Z","_content":"\n\nJavaScript 中 Date 对象用来处理日期和时间\n\n<!-- more --><!-- toc -->\n## 创建\n```java\nvar now = new Date()\n```\n{% raw %}\n<script type=\"text/javascript\">\ndocument.write(`通过上述方法我们可以定一个 Date 对象，并返回当前时间 <code>${new Date()}</code>`)\n</script>\n{% endraw %}\n\n## 对象方法\n{% raw %}\n<ul>\n    <li><code>getFullYear()</code><script\n    type=\"text/javascript\">document.write(`从 Date 对象以四位数字返回年份。\n    <code>${new Date().getFullYear()}</code>`)</script> </li>\n    <li><code>getMonth()</code><script\n    type=\"text/javascript\">document.write(`从 Date 对象返回月份 (0 ~ 11)\n    <code>${new Date().getMonth()}</code>`)</script> </li>\n    <li><code>getDate()</code><script\n    type=\"text/javascript\">document.write(`从 Date 对象返回一个月中的某一天 (1 ~ 31)。\n    <code>${new Date().getDate()}</code>`)</script> </li>\n    <li><code>getDay()</code><script\n    type=\"text/javascript\">document.write(`从 Date 对象返回一周中的某一天 (0 ~ 6)。0 为周日\n    <code>${new Date().getDay()}</code>`)</script> </li>\n    <li><code>getHours()</code><script\n    type=\"text/javascript\">document.write(`返回 Date 对象的小时 (0 ~ 23)。\n    <code>${new Date().getHours()}</code>`)</script> </li>\n    <li><code>getMinutes()</code><script\n    type=\"text/javascript\">document.write(`返回 Date 对象的分钟 (0 ~ 59)。\n    <code>${new Date().getMinutes()}</code>`)</script> </li>\n    <li><code>getSeconds()</code><script\n    type=\"text/javascript\">document.write(`返回 Date 对象的秒数 (0 ~ 59)。\n    <code>${new Date().getSeconds()}</code>`)</script> </li>\n    <li><code>getMilliseconds()</code><script\n    type=\"text/javascript\">document.write(`返回 Date 对象的毫秒(0 ~ 999)。\n    <code>${new Date().getMilliseconds()}</code>`)</script> </li>\n    <li><code>getTime()</code><script\n    type=\"text/javascript\">document.write(`返回 1970 年 1 月 1 日至今的毫秒数。\n    <code>${new Date().getTime()}</code>`)</script> </li>\n    <li><code>getTimezoneOffset()</code><script\n    type=\"text/javascript\">document.write(`返回本地时间与格林威治标准时间 (GMT) 的分钟差。\n    <code>${new Date().getTimezoneOffset()}</code>`)</script> </li>\n\n    <li><code>getUTCFullYear()</code><script\n    type=\"text/javascript\">document.write(`根据世界时从 Date 对象以四位数字返回年份。\n    <code>${new Date().getUTCFullYear()}</code>`)</script> </li>\n    <li><code>getUTCMonth()</code><script\n    type=\"text/javascript\">document.write(`根据世界时从 Date 对象返回月份 (0 ~ 11)\n    <code>${new Date().getUTCMonth()}</code>`)</script> </li>\n    <li><code>getUTCDate()</code><script\n    type=\"text/javascript\">document.write(`根据世界时从 Date 对象返回一个月中的某一天 (1 ~ 31)。\n    <code>${new Date().getUTCDate()}</code>`)</script> </li>\n    <li><code>getUTCDay()</code><script\n    type=\"text/javascript\">document.write(`根据世界时从 Date 对象返回一周中的某一天 (0 ~ 6)。0 为周日\n    <code>${new Date().getUTCDay()}</code>`)</script> </li>\n    <li><code>getUTCHours()</code><script\n    type=\"text/javascript\">document.write(`根据世界时返回 Date 对象的小时 (0 ~ 23)。\n    <code>${new Date().getUTCHours()}</code>`)</script> </li>\n    <li><code>getUTCMinutes()</code><script\n    type=\"text/javascript\">document.write(`根据世界时返回 Date 对象的分钟 (0 ~ 59)。\n    <code>${new Date().getUTCMinutes()}</code>`)</script> </li>\n    <li><code>getUTCSeconds()</code><script\n    type=\"text/javascript\">document.write(`根据世界时返回 Date 对象的秒数 (0 ~ 59)。\n    <code>${new Date().getUTCSeconds()}</code>`)</script> </li>\n    <li><code>getUTCMilliseconds()</code><script\n    type=\"text/javascript\">document.write(`根据世界时返回 Date 对象的毫秒(0 ~ 999)。\n    <code>${new Date().getUTCMilliseconds()}</code>`)</script> </li>\n\n    <li><code>parse()</code><script\n    type=\"text/javascript\">document.write(`返回1970年1月1日午夜到指定日期（字符串）的毫秒数。Date.parse('2018-03-29 16:23:53')\n    <code>${Date.parse('2018-03-29 16:23:53')}</code>`)</script> </li>\n</ul>\n{% endraw %}\n\n- [JavaScript Date 对象](http://www.w3school.com.cn/js/jsref_obj_date.asp)\n","source":"_posts/2018-03-29-js-date.md","raw":"---\ntitle: JavaScript Date 对象\ntags:\n  - javascript\ndate: 2018-03-29 16:27:18\n---\n\n\nJavaScript 中 Date 对象用来处理日期和时间\n\n<!-- more --><!-- toc -->\n## 创建\n```java\nvar now = new Date()\n```\n{% raw %}\n<script type=\"text/javascript\">\ndocument.write(`通过上述方法我们可以定一个 Date 对象，并返回当前时间 <code>${new Date()}</code>`)\n</script>\n{% endraw %}\n\n## 对象方法\n{% raw %}\n<ul>\n    <li><code>getFullYear()</code><script\n    type=\"text/javascript\">document.write(`从 Date 对象以四位数字返回年份。\n    <code>${new Date().getFullYear()}</code>`)</script> </li>\n    <li><code>getMonth()</code><script\n    type=\"text/javascript\">document.write(`从 Date 对象返回月份 (0 ~ 11)\n    <code>${new Date().getMonth()}</code>`)</script> </li>\n    <li><code>getDate()</code><script\n    type=\"text/javascript\">document.write(`从 Date 对象返回一个月中的某一天 (1 ~ 31)。\n    <code>${new Date().getDate()}</code>`)</script> </li>\n    <li><code>getDay()</code><script\n    type=\"text/javascript\">document.write(`从 Date 对象返回一周中的某一天 (0 ~ 6)。0 为周日\n    <code>${new Date().getDay()}</code>`)</script> </li>\n    <li><code>getHours()</code><script\n    type=\"text/javascript\">document.write(`返回 Date 对象的小时 (0 ~ 23)。\n    <code>${new Date().getHours()}</code>`)</script> </li>\n    <li><code>getMinutes()</code><script\n    type=\"text/javascript\">document.write(`返回 Date 对象的分钟 (0 ~ 59)。\n    <code>${new Date().getMinutes()}</code>`)</script> </li>\n    <li><code>getSeconds()</code><script\n    type=\"text/javascript\">document.write(`返回 Date 对象的秒数 (0 ~ 59)。\n    <code>${new Date().getSeconds()}</code>`)</script> </li>\n    <li><code>getMilliseconds()</code><script\n    type=\"text/javascript\">document.write(`返回 Date 对象的毫秒(0 ~ 999)。\n    <code>${new Date().getMilliseconds()}</code>`)</script> </li>\n    <li><code>getTime()</code><script\n    type=\"text/javascript\">document.write(`返回 1970 年 1 月 1 日至今的毫秒数。\n    <code>${new Date().getTime()}</code>`)</script> </li>\n    <li><code>getTimezoneOffset()</code><script\n    type=\"text/javascript\">document.write(`返回本地时间与格林威治标准时间 (GMT) 的分钟差。\n    <code>${new Date().getTimezoneOffset()}</code>`)</script> </li>\n\n    <li><code>getUTCFullYear()</code><script\n    type=\"text/javascript\">document.write(`根据世界时从 Date 对象以四位数字返回年份。\n    <code>${new Date().getUTCFullYear()}</code>`)</script> </li>\n    <li><code>getUTCMonth()</code><script\n    type=\"text/javascript\">document.write(`根据世界时从 Date 对象返回月份 (0 ~ 11)\n    <code>${new Date().getUTCMonth()}</code>`)</script> </li>\n    <li><code>getUTCDate()</code><script\n    type=\"text/javascript\">document.write(`根据世界时从 Date 对象返回一个月中的某一天 (1 ~ 31)。\n    <code>${new Date().getUTCDate()}</code>`)</script> </li>\n    <li><code>getUTCDay()</code><script\n    type=\"text/javascript\">document.write(`根据世界时从 Date 对象返回一周中的某一天 (0 ~ 6)。0 为周日\n    <code>${new Date().getUTCDay()}</code>`)</script> </li>\n    <li><code>getUTCHours()</code><script\n    type=\"text/javascript\">document.write(`根据世界时返回 Date 对象的小时 (0 ~ 23)。\n    <code>${new Date().getUTCHours()}</code>`)</script> </li>\n    <li><code>getUTCMinutes()</code><script\n    type=\"text/javascript\">document.write(`根据世界时返回 Date 对象的分钟 (0 ~ 59)。\n    <code>${new Date().getUTCMinutes()}</code>`)</script> </li>\n    <li><code>getUTCSeconds()</code><script\n    type=\"text/javascript\">document.write(`根据世界时返回 Date 对象的秒数 (0 ~ 59)。\n    <code>${new Date().getUTCSeconds()}</code>`)</script> </li>\n    <li><code>getUTCMilliseconds()</code><script\n    type=\"text/javascript\">document.write(`根据世界时返回 Date 对象的毫秒(0 ~ 999)。\n    <code>${new Date().getUTCMilliseconds()}</code>`)</script> </li>\n\n    <li><code>parse()</code><script\n    type=\"text/javascript\">document.write(`返回1970年1月1日午夜到指定日期（字符串）的毫秒数。Date.parse('2018-03-29 16:23:53')\n    <code>${Date.parse('2018-03-29 16:23:53')}</code>`)</script> </li>\n</ul>\n{% endraw %}\n\n- [JavaScript Date 对象](http://www.w3school.com.cn/js/jsref_obj_date.asp)\n","slug":"js-date","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8s00be5gqob40z0fqr"},{"title":"Nginx 异常 unknown directive","date":"2018-03-30T21:43:14.000Z","_content":"\n记一个基础知识不好的异常\n\n<!-- more --><!-- toc -->\n```bash\nnginx: [emerg] unknown directive \"if(\" in /usr/local/etc/openresty/nginx.conf:85\n```\n在做地区区分的时候遇到一个上述的异常，废了很大功夫，最后找到原因是 `if` 和 `()` 之间需要有一个空格，呵呵哒，发现真相的我心好累，不想说话，只能赶快记下来加强记忆。\n","source":"_posts/2018-03-30-nginx-error-unknown-directive.md","raw":"---\ntitle: Nginx 异常 unknown directive\ntags:\n  - nginx\ndate: 2018-03-30 21:43:14\n---\n\n记一个基础知识不好的异常\n\n<!-- more --><!-- toc -->\n```bash\nnginx: [emerg] unknown directive \"if(\" in /usr/local/etc/openresty/nginx.conf:85\n```\n在做地区区分的时候遇到一个上述的异常，废了很大功夫，最后找到原因是 `if` 和 `()` 之间需要有一个空格，呵呵哒，发现真相的我心好累，不想说话，只能赶快记下来加强记忆。\n","slug":"nginx-error-unknown-directive","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8t00bh5gqox8jry824"},{"title":"Nginx 使用 GeoIP 模块区分用户地区","date":"2018-04-01T11:35:35.000Z","_content":"\n\n昨天介绍了 Nginx 的安装，今天说说 GeoIP 模块的使用\n\n<!-- more --><!-- toc -->\n## 检查 GeoIP 是否安装\n首先需要确认当前安装的 Nginx 是否安装了 GeoIP 模块\n```bash\n$ nginx -V\nnginx version: nginx/1.12.2\nbuilt by gcc 4.8.5 20150623 (Red Hat 4.8.5-11) (GCC)\nbuilt with OpenSSL 1.0.2k-fips  26 Jan 2017\nTLS SNI support enabled\nconfigure arguments: --user=nginx --group=nginx --with-http_geoip_module --with-http_ssl_module --with-http_realip_module --with-http_addition_module --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_stub_status_module --with-mail --with-mail_ssl_module --with-file-aio\n```\n如果版本信息中包含 `--with-http_geoip_module`，则说明已经支持该模块，如果不支持请往下看\n\n## 安装 GeoIP\n首先安装依赖\n```bash\n$ yum -y install zlib zlib-devel\n```\n安装 GeoIP\n```bash\n$ wget http://geolite.maxmind.com/download/geoip/api/c/GeoIP.tar.gz\n$ tar -zxvf GeoIP.tar.gz\n$ cd GeoIP-1.4.8\n$ ./configure\n$ make\n$ make install\n```\n使用ldconfig将库索引到系统中\n```bash\n$ echo '/usr/local/lib' > /etc/ld.so.conf.d/geoip.conf\n$ ldconfig\n```\n检查库是否加载成功\n```bash\n$ ldconfig -v | grep GeoIP\n\nlibGeoIPUpdate.so.0 -> libGeoIPUpdate.so.0.0.0\nlibGeoIP.so.1 -> libGeoIP.so.1.4.8\nlibGeoIPUpdate.so.0 -> libGeoIPUpdate.so.0.0.0\nlibGeoIP.so.1 -> libGeoIP.so.1.5.0\n```\n\n## 将 GeoIP 模块编译到 Nginx 中\n根据你当前 Nginx 的安装参数带上 `--with-http_geoip_module` 重新编译\n```bash\n$ ./configure --user=nginx --group=nginx \\\n    --with-http_geoip_module \\\n    --with-http_ssl_module \\\n    --with-http_realip_module \\\n    --with-http_addition_module \\\n    --with-http_sub_module \\\n    --with-http_dav_module \\\n    --with-http_flv_module \\\n    --with-http_mp4_module \\\n    --with-http_gunzip_module \\\n    --with-http_gzip_static_module \\\n    --with-http_random_index_module \\\n    --with-http_secure_link_module \\\n    --with-http_stub_status_module \\\n    --with-mail \\\n    --with-mail_ssl_module \\\n    --with-file-aio\n$ make && make install\n```\n或者重新安装\n```bash\n$ wget https://nginx.org/download/nginx-1.12.2.tar.gz\n$ tar zxvf nginx-1.12.2.tar.gz\n$ cd nginx-1.12.2\n$ ./configure --user=nginx --group=nginx \\\n    --with-http_geoip_module \\\n    --with-http_ssl_module \\\n    --with-http_realip_module \\\n    --with-http_addition_module \\\n    --with-http_sub_module \\\n    --with-http_dav_module \\\n    --with-http_flv_module \\\n    --with-http_mp4_module \\\n    --with-http_gunzip_module \\\n    --with-http_gzip_static_module \\\n    --with-http_random_index_module \\\n    --with-http_secure_link_module \\\n    --with-http_stub_status_module \\\n    --with-mail \\\n    --with-mail_ssl_module \\\n    --with-file-aio\n$ make && make install\n```\n## 使用 GeoIP\n首先查看本地是否已有 GeoIP 数据库\n```bash\n$ cd /usr/local/share/GeoIP\n$ ll\n-rw-r--r--. 1 root root  1183408 Mar 31 06:00 GeoIP.dat\n-rw-r--r--. 1 root root 20539238 Mar 27 05:05 GeoLiteCity.dat\n```\n如果没有这两个库，则手动下载\n```bash\nwget http://geolite.maxmind.com/download/geoip/database/GeoLiteCity.dat.gz\ngzip GeoLiteCity.dat.gz\nwget http://geolite.maxmind.com/download/geoip/database/GeoLiteCountry/GeoIP.dat.gz\ngzip GeoIP.dat.gz\n```\n将库地址配置到 `nginx.conf` 中这个位置\n```bash\nhttp{\n    ...\n    geoip_country /usr/local/share/GeoIP/GeoIP.dat;\n    geoip_city /usr/local/share/GeoIP/GeoLiteCity.dat;\n    server {\n        location / {\n            root /www;\n            if( $geo_country_code = CN ){\n                root /www/zh;\n            }\n        }\n    }\n}\n```\n其他参数\n- $geoip_country_code; - 两个字母的国家代码，如：”RU”, “US”。\n- $geoip_country_code3; - 三个字母的国家代码，如：”RUS”, “USA”。\n- $geoip_country_name; - 国家的完整名称，如：”Russian Federation”, “United States”。\n- $geoip_region - 地区的名称（类似于省，地区，州，行政区，联邦土地等），如：”30”。 30代码就是广州的意思\n- $geoip_city - 城市名称，如”Guangzhou”, “ShangHai”（如果可用）。\n- $geoip_postal_code - 邮政编码。\n- $geoip_city_continent_code。\n- $geoip_latitude - 所在维度。\n- $geoip_longitude - 所在经度。\n\n- [How to install Nginx GeoIP module](https://www.scalescale.com/tips/nginx/how-to-install-nginx-geoip-module/)\n","source":"_posts/2018-04-01-nginx-geoip.md","raw":"---\ntitle: Nginx 使用 GeoIP 模块区分用户地区\ntags:\n  - nginx\ndate: 2018-04-01 11:35:35\n---\n\n\n昨天介绍了 Nginx 的安装，今天说说 GeoIP 模块的使用\n\n<!-- more --><!-- toc -->\n## 检查 GeoIP 是否安装\n首先需要确认当前安装的 Nginx 是否安装了 GeoIP 模块\n```bash\n$ nginx -V\nnginx version: nginx/1.12.2\nbuilt by gcc 4.8.5 20150623 (Red Hat 4.8.5-11) (GCC)\nbuilt with OpenSSL 1.0.2k-fips  26 Jan 2017\nTLS SNI support enabled\nconfigure arguments: --user=nginx --group=nginx --with-http_geoip_module --with-http_ssl_module --with-http_realip_module --with-http_addition_module --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_stub_status_module --with-mail --with-mail_ssl_module --with-file-aio\n```\n如果版本信息中包含 `--with-http_geoip_module`，则说明已经支持该模块，如果不支持请往下看\n\n## 安装 GeoIP\n首先安装依赖\n```bash\n$ yum -y install zlib zlib-devel\n```\n安装 GeoIP\n```bash\n$ wget http://geolite.maxmind.com/download/geoip/api/c/GeoIP.tar.gz\n$ tar -zxvf GeoIP.tar.gz\n$ cd GeoIP-1.4.8\n$ ./configure\n$ make\n$ make install\n```\n使用ldconfig将库索引到系统中\n```bash\n$ echo '/usr/local/lib' > /etc/ld.so.conf.d/geoip.conf\n$ ldconfig\n```\n检查库是否加载成功\n```bash\n$ ldconfig -v | grep GeoIP\n\nlibGeoIPUpdate.so.0 -> libGeoIPUpdate.so.0.0.0\nlibGeoIP.so.1 -> libGeoIP.so.1.4.8\nlibGeoIPUpdate.so.0 -> libGeoIPUpdate.so.0.0.0\nlibGeoIP.so.1 -> libGeoIP.so.1.5.0\n```\n\n## 将 GeoIP 模块编译到 Nginx 中\n根据你当前 Nginx 的安装参数带上 `--with-http_geoip_module` 重新编译\n```bash\n$ ./configure --user=nginx --group=nginx \\\n    --with-http_geoip_module \\\n    --with-http_ssl_module \\\n    --with-http_realip_module \\\n    --with-http_addition_module \\\n    --with-http_sub_module \\\n    --with-http_dav_module \\\n    --with-http_flv_module \\\n    --with-http_mp4_module \\\n    --with-http_gunzip_module \\\n    --with-http_gzip_static_module \\\n    --with-http_random_index_module \\\n    --with-http_secure_link_module \\\n    --with-http_stub_status_module \\\n    --with-mail \\\n    --with-mail_ssl_module \\\n    --with-file-aio\n$ make && make install\n```\n或者重新安装\n```bash\n$ wget https://nginx.org/download/nginx-1.12.2.tar.gz\n$ tar zxvf nginx-1.12.2.tar.gz\n$ cd nginx-1.12.2\n$ ./configure --user=nginx --group=nginx \\\n    --with-http_geoip_module \\\n    --with-http_ssl_module \\\n    --with-http_realip_module \\\n    --with-http_addition_module \\\n    --with-http_sub_module \\\n    --with-http_dav_module \\\n    --with-http_flv_module \\\n    --with-http_mp4_module \\\n    --with-http_gunzip_module \\\n    --with-http_gzip_static_module \\\n    --with-http_random_index_module \\\n    --with-http_secure_link_module \\\n    --with-http_stub_status_module \\\n    --with-mail \\\n    --with-mail_ssl_module \\\n    --with-file-aio\n$ make && make install\n```\n## 使用 GeoIP\n首先查看本地是否已有 GeoIP 数据库\n```bash\n$ cd /usr/local/share/GeoIP\n$ ll\n-rw-r--r--. 1 root root  1183408 Mar 31 06:00 GeoIP.dat\n-rw-r--r--. 1 root root 20539238 Mar 27 05:05 GeoLiteCity.dat\n```\n如果没有这两个库，则手动下载\n```bash\nwget http://geolite.maxmind.com/download/geoip/database/GeoLiteCity.dat.gz\ngzip GeoLiteCity.dat.gz\nwget http://geolite.maxmind.com/download/geoip/database/GeoLiteCountry/GeoIP.dat.gz\ngzip GeoIP.dat.gz\n```\n将库地址配置到 `nginx.conf` 中这个位置\n```bash\nhttp{\n    ...\n    geoip_country /usr/local/share/GeoIP/GeoIP.dat;\n    geoip_city /usr/local/share/GeoIP/GeoLiteCity.dat;\n    server {\n        location / {\n            root /www;\n            if( $geo_country_code = CN ){\n                root /www/zh;\n            }\n        }\n    }\n}\n```\n其他参数\n- $geoip_country_code; - 两个字母的国家代码，如：”RU”, “US”。\n- $geoip_country_code3; - 三个字母的国家代码，如：”RUS”, “USA”。\n- $geoip_country_name; - 国家的完整名称，如：”Russian Federation”, “United States”。\n- $geoip_region - 地区的名称（类似于省，地区，州，行政区，联邦土地等），如：”30”。 30代码就是广州的意思\n- $geoip_city - 城市名称，如”Guangzhou”, “ShangHai”（如果可用）。\n- $geoip_postal_code - 邮政编码。\n- $geoip_city_continent_code。\n- $geoip_latitude - 所在维度。\n- $geoip_longitude - 所在经度。\n\n- [How to install Nginx GeoIP module](https://www.scalescale.com/tips/nginx/how-to-install-nginx-geoip-module/)\n","slug":"nginx-geoip","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8u00bj5gqowagzyye0"},{"title":"Shell test 命令","date":"2018-04-03T09:59:18.000Z","_content":"\nShell中的 test 命令用于检查某个条件是否成立，它可以进行数值、字符和文件三个方面的测试。\n\n<!-- more --><!-- toc -->\ntest 根据表达式的求值返回 **0（真）或 1（假）**，这个地方需要注意，真和假的返回值跟绝大数的结果都不一样，如果你熟悉了其他语言的 1（真）0（假），在这里可要小心了。\n## 数值\n- -eq\t等于则为真\n- -ne\t不等于则为真\n- -gt\t大于则为真\n- -ge\t大于等于则为真\n- -lt\t小于则为真\n- -le\t小于等于则为真\n```bash\nif test 1 -eq 1\nthen\n    echo true\nelse\n    echo false\nfi\n```\n输出\n```bash\ntrue\n```\n也可以用 `&&, ||` 来做真假的判断\n```bash\n$ test 1 -eq 1 && echo true || echo false\n\ntrue\n```\n## 字符串测试\n- =\t等于则为真\n- !=\t不相等则为真\n- -z 字符串\t字符串的长度为零则为真\n- -n 字符串\t字符串的长度不为零则为真\n```bash\n$ test 'wxnacy' = 'wxnacy' && echo true || echo false\n\ntrue\n```\n\n## 文件测试\n- -e 文件名\t如果文件存在则为真\n- -r 文件名\t如果文件存在且可读则为真\n- -w 文件名\t如果文件存在且可写则为真\n- -x 文件名\t如果文件存在且可执行则为真\n- -s 文件名\t如果文件存在且至少有一个字符则为真\n- -d 文件名\t如果文件存在且为目录则为真\n- -f 文件名\t如果文件存在且为普通文件则为真\n- -c 文件名\t如果文件存在且为字符型特殊文件则为真\n- -b 文件名\t如果文件存在且为块特殊文件则为真\n```bash\n$ test -f test.sh && echo true || echo false\n\nfalse\n```\n\n## 与或非\nShell 还提供了三个操作符\n- ! 非\n- -a 与\n- -o 或\n优先级由高到低为 `!, -a, -o`\n\n## 返回值\n我们可以通过 `$?` 来获取 `test` 的返回值\n```bash\n$ test 1 -gt 1; echo $?\n\n1 # 假\n```\n\n- [Shell test 命令](http://www.runoob.com/linux/linux-shell-test.html)\n- [Bash 测试和比较函数](https://www.ibm.com/developerworks/cn/linux/l-bash-test.html)\n","source":"_posts/2018-04-03-shell-test.md","raw":"---\ntitle: Shell test 命令\ntags:\n  - linux\ndate: 2018-04-03 09:59:18\n---\n\nShell中的 test 命令用于检查某个条件是否成立，它可以进行数值、字符和文件三个方面的测试。\n\n<!-- more --><!-- toc -->\ntest 根据表达式的求值返回 **0（真）或 1（假）**，这个地方需要注意，真和假的返回值跟绝大数的结果都不一样，如果你熟悉了其他语言的 1（真）0（假），在这里可要小心了。\n## 数值\n- -eq\t等于则为真\n- -ne\t不等于则为真\n- -gt\t大于则为真\n- -ge\t大于等于则为真\n- -lt\t小于则为真\n- -le\t小于等于则为真\n```bash\nif test 1 -eq 1\nthen\n    echo true\nelse\n    echo false\nfi\n```\n输出\n```bash\ntrue\n```\n也可以用 `&&, ||` 来做真假的判断\n```bash\n$ test 1 -eq 1 && echo true || echo false\n\ntrue\n```\n## 字符串测试\n- =\t等于则为真\n- !=\t不相等则为真\n- -z 字符串\t字符串的长度为零则为真\n- -n 字符串\t字符串的长度不为零则为真\n```bash\n$ test 'wxnacy' = 'wxnacy' && echo true || echo false\n\ntrue\n```\n\n## 文件测试\n- -e 文件名\t如果文件存在则为真\n- -r 文件名\t如果文件存在且可读则为真\n- -w 文件名\t如果文件存在且可写则为真\n- -x 文件名\t如果文件存在且可执行则为真\n- -s 文件名\t如果文件存在且至少有一个字符则为真\n- -d 文件名\t如果文件存在且为目录则为真\n- -f 文件名\t如果文件存在且为普通文件则为真\n- -c 文件名\t如果文件存在且为字符型特殊文件则为真\n- -b 文件名\t如果文件存在且为块特殊文件则为真\n```bash\n$ test -f test.sh && echo true || echo false\n\nfalse\n```\n\n## 与或非\nShell 还提供了三个操作符\n- ! 非\n- -a 与\n- -o 或\n优先级由高到低为 `!, -a, -o`\n\n## 返回值\n我们可以通过 `$?` 来获取 `test` 的返回值\n```bash\n$ test 1 -gt 1; echo $?\n\n1 # 假\n```\n\n- [Shell test 命令](http://www.runoob.com/linux/linux-shell-test.html)\n- [Bash 测试和比较函数](https://www.ibm.com/developerworks/cn/linux/l-bash-test.html)\n","slug":"shell-test","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8v00bl5gqoh6ae2q6d"},{"title":"Nginx 分割日志","date":"2018-04-02T09:50:08.000Z","_content":"\nNginx 有个非常大的缺点，就是日志不能自动分割，死磕着一个文件写到死\n\n<!-- more --><!-- toc -->\n如果你重度依赖 `access.log` 日志进行分析，那长时间面对动辄上 G 的文件，你会很头痛，所以只能自己来写脚本来分割\n\n首先确定思路，最容易想到的方法就是将现在的日志文件挪走，然后期望 Nginx 重新生成一个日志，然后把这个动作定时执行，接下来我们一步一步实现\n\n挪走日志\n```bash\n$ cd /usr/local/nginx/logs\n$ sudo mv access.log access.log.1\n$ ll\n\n-rw-r--r--. 1 nginx root   97 Mar 31 23:12 access.log.1\n-rw-r--r--. 1 nginx root 4575 Mar 31 23:12 error.log\n```\n做完后，Nginx 程序并没有停止，但是也没有生成新的 `access.log` 文件，查看日志\n```bash\n$ tail -f access.log.1\n```\n发现日志继续写在了 `access.log.1` 中，虽然名字改变了，但对于 Nginx 来说文件指向\n依然是它，那就需要强迫它重新打开日志文件\n```bash\n$ nginx -s reopen\n$ ll\n\n-rw-r--r--. 1 nginx root   97 Mar 31 23:12 access.log\n-rw-r--r--. 1 nginx root   97 Mar 31 23:12 access.log.1\n-rw-r--r--. 1 nginx root 4575 Mar 31 23:12 error.log\n```\n执行后，我们会发现新的 `access.log` 生成了，至此单次流程完成。\n\n我们总不能每次都手动完成这个操作，定时任务是必须的\n\n首先完善下分割脚本\n```bash\n$ cd /usr/local/nginx/logs\n$ touch split_log.sh\n$ vim split_log.sh\n\n#!/usr/bin/env bash\nLOG_DIR=/usr/local/nginx/logs\nLOG_FILE=${LOG_DIR}/access.log\nDT=`date \"+%Y%m%d%H%M%S\"`\n# 检查日志文件是否存在\ntest -f ${LOG_FILE} && mv ${LOG_FILE} ${LOG_FILE}.${DT}\nnginx -s reopen\n```\n添加执行权限\n```bash\n$ chmod +x split_log.sh\n```\n添加定时任务\n```bash\n$ crontab -e\n\n* */1 * * * /bin/bash /usr/local/nginx/logs/split_log.sh\n```\n然后执行 `:wq` 退出，系统会自动生成定时任务，每小时执行一次。\n\n- [Linux Crontab 定时任务](/2018/01/15/linux-crontab/)\n","source":"_posts/2018-04-02-nginx-split-log.md","raw":"---\ntitle: Nginx 分割日志\ntags:\n  - nginx\ndate: 2018-04-02 09:50:08\n---\n\nNginx 有个非常大的缺点，就是日志不能自动分割，死磕着一个文件写到死\n\n<!-- more --><!-- toc -->\n如果你重度依赖 `access.log` 日志进行分析，那长时间面对动辄上 G 的文件，你会很头痛，所以只能自己来写脚本来分割\n\n首先确定思路，最容易想到的方法就是将现在的日志文件挪走，然后期望 Nginx 重新生成一个日志，然后把这个动作定时执行，接下来我们一步一步实现\n\n挪走日志\n```bash\n$ cd /usr/local/nginx/logs\n$ sudo mv access.log access.log.1\n$ ll\n\n-rw-r--r--. 1 nginx root   97 Mar 31 23:12 access.log.1\n-rw-r--r--. 1 nginx root 4575 Mar 31 23:12 error.log\n```\n做完后，Nginx 程序并没有停止，但是也没有生成新的 `access.log` 文件，查看日志\n```bash\n$ tail -f access.log.1\n```\n发现日志继续写在了 `access.log.1` 中，虽然名字改变了，但对于 Nginx 来说文件指向\n依然是它，那就需要强迫它重新打开日志文件\n```bash\n$ nginx -s reopen\n$ ll\n\n-rw-r--r--. 1 nginx root   97 Mar 31 23:12 access.log\n-rw-r--r--. 1 nginx root   97 Mar 31 23:12 access.log.1\n-rw-r--r--. 1 nginx root 4575 Mar 31 23:12 error.log\n```\n执行后，我们会发现新的 `access.log` 生成了，至此单次流程完成。\n\n我们总不能每次都手动完成这个操作，定时任务是必须的\n\n首先完善下分割脚本\n```bash\n$ cd /usr/local/nginx/logs\n$ touch split_log.sh\n$ vim split_log.sh\n\n#!/usr/bin/env bash\nLOG_DIR=/usr/local/nginx/logs\nLOG_FILE=${LOG_DIR}/access.log\nDT=`date \"+%Y%m%d%H%M%S\"`\n# 检查日志文件是否存在\ntest -f ${LOG_FILE} && mv ${LOG_FILE} ${LOG_FILE}.${DT}\nnginx -s reopen\n```\n添加执行权限\n```bash\n$ chmod +x split_log.sh\n```\n添加定时任务\n```bash\n$ crontab -e\n\n* */1 * * * /bin/bash /usr/local/nginx/logs/split_log.sh\n```\n然后执行 `:wq` 退出，系统会自动生成定时任务，每小时执行一次。\n\n- [Linux Crontab 定时任务](/2018/01/15/linux-crontab/)\n","slug":"nginx-split-log","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8w00bo5gqocj6iwoj8"},{"title":"Mysql 复制表的几种方式","date":"2018-04-04T10:10:56.000Z","_content":"\n\n介绍几种复制表的方式\n\n<!-- more --><!-- toc -->\n首先创建一个表\n```mysql\nDROP TABLE IF EXISTS `user` ;\nCREATE TABLE `user` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `name` varchar(32) NOT NULL COMMENT '标题',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `index_name` (`name`)\n) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COMMENT='视频表';\ninsert into `user` (name) values ('wxnacy');\ninsert into `user` (name) values ('win');\n```\n## CREATE ... SELECT ...\n使用语句\n```mysql\nmysql> CREATE TABLE `user2` SELECT * FROM user;\nmysql> SHOW CREATE TABLE `user2`;\n\nCREATE TABLE `user2` (\n  `id` int(11) NOT NULL DEFAULT '0',\n  `name` varchar(32) CHARACTER SET utf8mb4 NOT NULL COMMENT '标题'\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n```\n可以拷贝表结构，并复制数据，然后索引等信息却无法复制，所以并不推荐\n\n## SHOW CREATE TABLE\n查询建表结构\n```mysql\nmysql> show create table `user`\\G;\n  Table: user\n  Create Table: CREATE TABLE `user` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `name` varchar(32) NOT NULL COMMENT '标题' default 'win',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `index_name` (`name`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COMMENT='视频表';\n```\n复制建表信息并执行\n```mysql\nmysql> CREATE TABLE `user2` (\n   ->  `id` int(11) NOT NULL AUTO_INCREMENT,\n   ->  `name` varchar(32) NOT NULL COMMENT '标题' default 'win',\n   ->  PRIMARY KEY (`id`),\n   ->  UNIQUE KEY `index_name` (`name`)\n   ->) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COMMENT='视频表';\n```\n随后复制数据\n```mysql\nmysql> insert into `user2` select * from `user`;\n```\n这样可以完全复制表结构和数据，但是却不方便\n\n## CREATE ... LIKE\n使用该语句可以方便的完全复制表结构\n```mysql\nmysql> create table `user2` like `user`;\n```\n复制数据\n```mysql\nmysql> insert into `user2` select * from `user`;\n```\n","source":"_posts/2018-04-04-mysql-clone-table.md","raw":"---\ntitle: Mysql 复制表的几种方式\ntags:\n  - mysql\ndate: 2018-04-04 10:10:56\n---\n\n\n介绍几种复制表的方式\n\n<!-- more --><!-- toc -->\n首先创建一个表\n```mysql\nDROP TABLE IF EXISTS `user` ;\nCREATE TABLE `user` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `name` varchar(32) NOT NULL COMMENT '标题',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `index_name` (`name`)\n) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COMMENT='视频表';\ninsert into `user` (name) values ('wxnacy');\ninsert into `user` (name) values ('win');\n```\n## CREATE ... SELECT ...\n使用语句\n```mysql\nmysql> CREATE TABLE `user2` SELECT * FROM user;\nmysql> SHOW CREATE TABLE `user2`;\n\nCREATE TABLE `user2` (\n  `id` int(11) NOT NULL DEFAULT '0',\n  `name` varchar(32) CHARACTER SET utf8mb4 NOT NULL COMMENT '标题'\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n```\n可以拷贝表结构，并复制数据，然后索引等信息却无法复制，所以并不推荐\n\n## SHOW CREATE TABLE\n查询建表结构\n```mysql\nmysql> show create table `user`\\G;\n  Table: user\n  Create Table: CREATE TABLE `user` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `name` varchar(32) NOT NULL COMMENT '标题' default 'win',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `index_name` (`name`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COMMENT='视频表';\n```\n复制建表信息并执行\n```mysql\nmysql> CREATE TABLE `user2` (\n   ->  `id` int(11) NOT NULL AUTO_INCREMENT,\n   ->  `name` varchar(32) NOT NULL COMMENT '标题' default 'win',\n   ->  PRIMARY KEY (`id`),\n   ->  UNIQUE KEY `index_name` (`name`)\n   ->) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COMMENT='视频表';\n```\n随后复制数据\n```mysql\nmysql> insert into `user2` select * from `user`;\n```\n这样可以完全复制表结构和数据，但是却不方便\n\n## CREATE ... LIKE\n使用该语句可以方便的完全复制表结构\n```mysql\nmysql> create table `user2` like `user`;\n```\n复制数据\n```mysql\nmysql> insert into `user2` select * from `user`;\n```\n","slug":"mysql-clone-table","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8x00bq5gqog1docc25"},{"title":"Nginx 命令行参数","date":"2018-04-05T10:40:59.000Z","_content":"\n\n简单介绍下 Nginx 的命令行参数\n\n<!-- more --><!-- toc -->\n通过 `nginx -h` 我们可以得到如下参数信息\n```bash\nOptions:\n  -?,-h         : this help\n  -v            : show version and exit\n  -V            : show version and configure options then exit\n  -t            : test configuration and exit\n  -T            : test configuration, dump it and exit\n  -q            : suppress non-error messages during configuration testing\n  -s signal     : send signal to a master process: stop, quit, reopen, reload\n  -p prefix     : set prefix path (default: /usr/local/Cellar/nginx/1.12.0_1/)\n  -c filename   : set configuration file (default: /usr/local/etc/nginx/nginx.conf)\n  -g directives : set global directives out of configuration file\n```\n其中我们常用到的命令如下\n查看版本\n```bash\n$ nginx -V\n\nnginx version: nginx/1.12.0\nbuilt by clang 8.0.0 (clang-800.0.42.1)\nbuilt with OpenSSL 1.1.0e  16 Feb 2017 (running with OpenSSL 1.1.0f  25 May 2017)\nTLS SNI support enabled\nconfigure arguments: --prefix=/usr/local/Cellar/nginx/1.12.0_1 --with-http_ssl_module --with-pcre --sbin-path=/usr/local/Cellar/nginx/1.12.0_1/bin/nginx --with-cc-opt='-I/usr/local/opt/pcre/include -I/usr/local/opt/openssl@1.1/include' --with-ld-opt='-L/usr/local/opt/pcre/lib -L/usr/local/opt/openssl@1.1/lib' --conf-path=/usr/local/etc/nginx/nginx.conf --pid-path=/usr/local/var/run/nginx.pid --lock-path=/usr/local/var/run/nginx.lock --http-client-body-temp-path=/usr/local/var/run/nginx/client_body_temp --http-proxy-temp-path=/usr/local/var/run/nginx/proxy_temp --http-fastcgi-temp-path=/usr/local/var/run/nginx/fastcgi_temp --http-uwsgi-temp-path=/usr/local/var/run/nginx/uwsgi_temp --http-scgi-temp-path=/usr/local/var/run/nginx/scgi_temp --http-log-path=/usr/local/var/log/nginx/access.log --error-log-path=/usr/local/var/log/nginx/error.log --with-http_gzip_static_module --with-http_v2_module\n```\n修改 `nginx.conf` 文件后测试是否通过\n```bash\n$ nginx -t\n\nnginx: the configuration file /usr/local/etc/nginx/nginx.conf syntax is ok\nnginx: configuration file /usr/local/etc/nginx/nginx.conf test is successful\n```\n运行 Nginx 时指定配置文件\n```bash\n$ nginx -c /www/nginx.conf\n```\n`-s` 的使用\n快速关闭 Nginx\n```bash\n$ nginx -s stop\n```\n优雅的关闭 Nginx\n```bash\n$ nginx -s quit\n```\n优雅地关闭 Nginx，这是说 Nginx 主进程会等待 worker 进程完成当前用户请求的处理。需要启动时的用户身份来执行\n\n重新打开日志文件\n```bash\n$ nginx -s reopen\n```\n可用于[分割日志](/2018/04/02/nginx-split-log/)后，重新打开一个新的日志文件，\n\n重新加载配置\n```bash\n$ nginx -s reload\n```\n当主进程接收到 reload 信号，它会检查配置文件的语法，然后尝试应用该配置。如果成功，主进程启动新的 worker 进程，并发送消息给原来的 worker 进程要求他们关闭。如果加载配置失败，主进程会对改动进行回滚，继续以原来的配置进行工作。当原来的 worker 进程接收到消息要他们关闭，他们会停止接收新的连接，并继续处理当前的请求直到完成。完成之后，原来的 worker 进程将会退出。\n\n","source":"_posts/2018-04-05-nginx-params.md","raw":"---\ntitle: Nginx 命令行参数\ntags:\n  - nginx\ndate: 2018-04-05 10:40:59\n---\n\n\n简单介绍下 Nginx 的命令行参数\n\n<!-- more --><!-- toc -->\n通过 `nginx -h` 我们可以得到如下参数信息\n```bash\nOptions:\n  -?,-h         : this help\n  -v            : show version and exit\n  -V            : show version and configure options then exit\n  -t            : test configuration and exit\n  -T            : test configuration, dump it and exit\n  -q            : suppress non-error messages during configuration testing\n  -s signal     : send signal to a master process: stop, quit, reopen, reload\n  -p prefix     : set prefix path (default: /usr/local/Cellar/nginx/1.12.0_1/)\n  -c filename   : set configuration file (default: /usr/local/etc/nginx/nginx.conf)\n  -g directives : set global directives out of configuration file\n```\n其中我们常用到的命令如下\n查看版本\n```bash\n$ nginx -V\n\nnginx version: nginx/1.12.0\nbuilt by clang 8.0.0 (clang-800.0.42.1)\nbuilt with OpenSSL 1.1.0e  16 Feb 2017 (running with OpenSSL 1.1.0f  25 May 2017)\nTLS SNI support enabled\nconfigure arguments: --prefix=/usr/local/Cellar/nginx/1.12.0_1 --with-http_ssl_module --with-pcre --sbin-path=/usr/local/Cellar/nginx/1.12.0_1/bin/nginx --with-cc-opt='-I/usr/local/opt/pcre/include -I/usr/local/opt/openssl@1.1/include' --with-ld-opt='-L/usr/local/opt/pcre/lib -L/usr/local/opt/openssl@1.1/lib' --conf-path=/usr/local/etc/nginx/nginx.conf --pid-path=/usr/local/var/run/nginx.pid --lock-path=/usr/local/var/run/nginx.lock --http-client-body-temp-path=/usr/local/var/run/nginx/client_body_temp --http-proxy-temp-path=/usr/local/var/run/nginx/proxy_temp --http-fastcgi-temp-path=/usr/local/var/run/nginx/fastcgi_temp --http-uwsgi-temp-path=/usr/local/var/run/nginx/uwsgi_temp --http-scgi-temp-path=/usr/local/var/run/nginx/scgi_temp --http-log-path=/usr/local/var/log/nginx/access.log --error-log-path=/usr/local/var/log/nginx/error.log --with-http_gzip_static_module --with-http_v2_module\n```\n修改 `nginx.conf` 文件后测试是否通过\n```bash\n$ nginx -t\n\nnginx: the configuration file /usr/local/etc/nginx/nginx.conf syntax is ok\nnginx: configuration file /usr/local/etc/nginx/nginx.conf test is successful\n```\n运行 Nginx 时指定配置文件\n```bash\n$ nginx -c /www/nginx.conf\n```\n`-s` 的使用\n快速关闭 Nginx\n```bash\n$ nginx -s stop\n```\n优雅的关闭 Nginx\n```bash\n$ nginx -s quit\n```\n优雅地关闭 Nginx，这是说 Nginx 主进程会等待 worker 进程完成当前用户请求的处理。需要启动时的用户身份来执行\n\n重新打开日志文件\n```bash\n$ nginx -s reopen\n```\n可用于[分割日志](/2018/04/02/nginx-split-log/)后，重新打开一个新的日志文件，\n\n重新加载配置\n```bash\n$ nginx -s reload\n```\n当主进程接收到 reload 信号，它会检查配置文件的语法，然后尝试应用该配置。如果成功，主进程启动新的 worker 进程，并发送消息给原来的 worker 进程要求他们关闭。如果加载配置失败，主进程会对改动进行回滚，继续以原来的配置进行工作。当原来的 worker 进程接收到消息要他们关闭，他们会停止接收新的连接，并继续处理当前的请求直到完成。完成之后，原来的 worker 进程将会退出。\n\n","slug":"nginx-params","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8y00bs5gqoyfecthhf"},{"title":"Linux date 命令简单用法","date":"2018-04-06T15:45:08.000Z","_content":"\n\n简单总结 date 命令的用法\n\n<!-- more --><!-- toc -->\n显示日期\n```bash\n$ date\n\nTue Apr  3 17:51:49 CST 2018\n```\n\n显示“开始时间”加上秒数的时间\n```bash\n$ date -r 1\n\nThu Jan  1 08:00:01 CST 1970\n```\n\n格式化\n```bash\n$ date '+%F %T'\n\n2018-04-03 17:57:07\n```\n更多的格式化参数\n- `%F` 完整日期格式 2018-04-03\n- `%T` 完整时间格式 15:35:37\n\n- `%Y` 当前年份 2018\n- `%m` 当前月份 04\n- `%m` 当前日期 06\n- `%H` 当前小时数，二十四进制 15\n- `%M` 当前分钟数 39\n- `%S` 当前秒数 10\n- `%s` 自UTC 时间 1970-01-01 00:00:00 以来所经过的秒数 1523000441\n\n- `%a` 星期名简称 Tue\n- `%A` 星期名全称 Tuesday\n- `%b` 月份简称 Apr\n- `%B` 月份全称 April\n- `%c` 当前时间和日期 Tue Apr  3 18:00:21 2018\n- `%C` 世纪 20\n- `%D` 按月计算的日期 04/03/18\n- `%e` 按月计算的日期  3 相当月 `%_d`\n\n- [Linux date命令](http://www.runoob.com/linux/linux-comm-date.html)\n","source":"_posts/2018-04-06-linux-date.md","raw":"---\ntitle: Linux date 命令简单用法\ntags:\n  - linux\ndate: 2018-04-06 15:45:08\n---\n\n\n简单总结 date 命令的用法\n\n<!-- more --><!-- toc -->\n显示日期\n```bash\n$ date\n\nTue Apr  3 17:51:49 CST 2018\n```\n\n显示“开始时间”加上秒数的时间\n```bash\n$ date -r 1\n\nThu Jan  1 08:00:01 CST 1970\n```\n\n格式化\n```bash\n$ date '+%F %T'\n\n2018-04-03 17:57:07\n```\n更多的格式化参数\n- `%F` 完整日期格式 2018-04-03\n- `%T` 完整时间格式 15:35:37\n\n- `%Y` 当前年份 2018\n- `%m` 当前月份 04\n- `%m` 当前日期 06\n- `%H` 当前小时数，二十四进制 15\n- `%M` 当前分钟数 39\n- `%S` 当前秒数 10\n- `%s` 自UTC 时间 1970-01-01 00:00:00 以来所经过的秒数 1523000441\n\n- `%a` 星期名简称 Tue\n- `%A` 星期名全称 Tuesday\n- `%b` 月份简称 Apr\n- `%B` 月份全称 April\n- `%c` 当前时间和日期 Tue Apr  3 18:00:21 2018\n- `%C` 世纪 20\n- `%D` 按月计算的日期 04/03/18\n- `%e` 按月计算的日期  3 相当月 `%_d`\n\n- [Linux date命令](http://www.runoob.com/linux/linux-comm-date.html)\n","slug":"linux-date","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a8z00bu5gqov0mz6gbb"},{"title":"北漂可以在北京更换身份证了","date":"2018-04-08T19:17:20.000Z","_content":"\n生活真的是越来越方便了呢\n<!-- more -->\n![/images/bjid1.png](/images/bjid1.png)\n\n去年老哥身份证过期还是回老家办的，本来我还想着往前回家去办，结果从网上查到去年 9 月份就可以在北京办理，有省去了很多麻烦，在北京真是越来越方便了\n\n- [申请异地补领《居民身份证》](http://www.bjgaj.gov.cn/web/detail_getWsgsInfo_436600_col1348.html)\n- [非京籍公民换（补）领居民身份证问答](http://www.beijing.gov.cn/zhuanti/sfz/rdtj/t1469347.htm)\n\n","source":"_posts/2018-04-08-bj-change-id-card.md","raw":"---\ntitle: 北漂可以在北京更换身份证了\ndate: 2018-04-08 19:17:20\ntags: [北京]\n---\n\n生活真的是越来越方便了呢\n<!-- more -->\n![/images/bjid1.png](/images/bjid1.png)\n\n去年老哥身份证过期还是回老家办的，本来我还想着往前回家去办，结果从网上查到去年 9 月份就可以在北京办理，有省去了很多麻烦，在北京真是越来越方便了\n\n- [申请异地补领《居民身份证》](http://www.bjgaj.gov.cn/web/detail_getWsgsInfo_436600_col1348.html)\n- [非京籍公民换（补）领居民身份证问答](http://www.beijing.gov.cn/zhuanti/sfz/rdtj/t1469347.htm)\n\n","slug":"bj-change-id-card","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a9000bw5gqodgusa9ff"},{"title":"我开始写书了","date":"2018-04-07T19:44:19.000Z","_content":"\n《Vim 练级手册》一书是本开源的 Vim 教程，尽我所能的介绍 Vim 的相关知识\n<!-- more -->\n写这本书的初衷有两点\n\n- 自去年 8 月份我的博客上线以来，Vim 相关的文章以 1/10 的比重占到了总站访问量的 1/3，这让我意识到学习并使用 Vim 的人有很多\n- 国内中文的 Vim 资料很少，这让我有了想写一本详细的学习手册来反哺互联网的想法。\n\n本书将以连载的形式发布到网上，暂定的访问地址为：https://vimhandbook.github.io/\n\n今天第一天上线，章节写到[键位操作](https://vimhandbook.github.io/#docs/key-position)，以后会尽量以每周一章的形式发布。\n\n这将会是一次完全不同的体验，从博客的给自己，到现在要给别人看，就是一个很大的转变，也是对自己知识的一次检讨，加油，2018！\n\n","source":"_posts/2018-04-07-first-book.md","raw":"---\ntitle: 我开始写书了\ndate: 2018-04-07 19:44:19\ntags: [vim, 杂谈]\n---\n\n《Vim 练级手册》一书是本开源的 Vim 教程，尽我所能的介绍 Vim 的相关知识\n<!-- more -->\n写这本书的初衷有两点\n\n- 自去年 8 月份我的博客上线以来，Vim 相关的文章以 1/10 的比重占到了总站访问量的 1/3，这让我意识到学习并使用 Vim 的人有很多\n- 国内中文的 Vim 资料很少，这让我有了想写一本详细的学习手册来反哺互联网的想法。\n\n本书将以连载的形式发布到网上，暂定的访问地址为：https://vimhandbook.github.io/\n\n今天第一天上线，章节写到[键位操作](https://vimhandbook.github.io/#docs/key-position)，以后会尽量以每周一章的形式发布。\n\n这将会是一次完全不同的体验，从博客的给自己，到现在要给别人看，就是一个很大的转变，也是对自己知识的一次检讨，加油，2018！\n\n","slug":"first-book","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a9100by5gqotijkeeop"},{"title":"整理 CentOS 需要的基础包","date":"2018-04-10T15:45:18.000Z","_content":"\n最近使用新的 CentOS 环境开发，碰到很多缺包的情况，今天整理下新环境需要安装的包。\n\n<!-- more --><!-- toc -->\n\n**安装基础工具**\n\n```bash\n$ yum install wget screen telnet perl perl-CPAN bash-completion ntp iptraf sysstat git subversion nfs-utils vim-common lrzsz patch\n# bash-completion bash自动补全\n# iptraf          ip诊断工具\n# sysstat         sar等系统诊断工具\n# lrzsz           rz/sz zmodem上传下载工具\n```\n\n**编译安装需要的开发包**\n\n```bash\n$ yum install gcc g++ gcc-c++ make cmake aclocal\n```\n\n**安装 Nginx 肯定需要的**\n\n```bash\n$ yum -y install pcre pcre-devel openssl openssl-devel\n```\n\n**安装 GeoIp 需要的**\n\n```bash\n$ yum -y install zlib zlib-devel\n```\n\n**开发包**\n\n```bash\n$ yum install db4 db4-devel libjs libjs-devel libcurl libpcap libtool sqlite sqlite-devel\n\n$ yum install libevent libevent-devel readline readline-devel\n\n$ yum install libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel tcl tcl-devel\n\n$ yum install libxml2 libxml2-devel glibc glibc-devel glib2 glib2-devel\n\n$ yum install ncurses ncurses-devel curl curl-devel e2fsprogs e2fsprogs-devel krb5 krb5-devel\n\n$ yum install bzip2  bzip2-devel libidn libidn-devel\n\n$ yum install libffi libffi-devel\n\n$ yum install cffi cryptography\n\n$ yum install python python-devel\n\n$ yum install python35 python35-devel\n```\n","source":"_posts/2018-04-10-centos-need-rpm.md","raw":"---\ntitle: 整理 CentOS 需要的基础包\ndate: 2018-04-10 15:45:18\ntags: [linux]\n---\n\n最近使用新的 CentOS 环境开发，碰到很多缺包的情况，今天整理下新环境需要安装的包。\n\n<!-- more --><!-- toc -->\n\n**安装基础工具**\n\n```bash\n$ yum install wget screen telnet perl perl-CPAN bash-completion ntp iptraf sysstat git subversion nfs-utils vim-common lrzsz patch\n# bash-completion bash自动补全\n# iptraf          ip诊断工具\n# sysstat         sar等系统诊断工具\n# lrzsz           rz/sz zmodem上传下载工具\n```\n\n**编译安装需要的开发包**\n\n```bash\n$ yum install gcc g++ gcc-c++ make cmake aclocal\n```\n\n**安装 Nginx 肯定需要的**\n\n```bash\n$ yum -y install pcre pcre-devel openssl openssl-devel\n```\n\n**安装 GeoIp 需要的**\n\n```bash\n$ yum -y install zlib zlib-devel\n```\n\n**开发包**\n\n```bash\n$ yum install db4 db4-devel libjs libjs-devel libcurl libpcap libtool sqlite sqlite-devel\n\n$ yum install libevent libevent-devel readline readline-devel\n\n$ yum install libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel tcl tcl-devel\n\n$ yum install libxml2 libxml2-devel glibc glibc-devel glib2 glib2-devel\n\n$ yum install ncurses ncurses-devel curl curl-devel e2fsprogs e2fsprogs-devel krb5 krb5-devel\n\n$ yum install bzip2  bzip2-devel libidn libidn-devel\n\n$ yum install libffi libffi-devel\n\n$ yum install cffi cryptography\n\n$ yum install python python-devel\n\n$ yum install python35 python35-devel\n```\n","slug":"centos-need-rpm","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a9100c05gqokpmoaa7h"},{"title":"Nginx 编译报错：SSL modules require the OpenSSL library","date":"2018-04-09T18:37:02.000Z","_content":"\nNginx 编译报错：SSL modules require the OpenSSL library\n<!-- more -->\n\n```bash\n./configure: error: SSL modules require the OpenSSL library.\nYou can either do not enable the modules, or install the OpenSSL library\ninto the system, or build the OpenSSL library statically from the source\nwith nginx by using --with-openssl=<path> option.\n```\n\n在编译 Nginx 时遇到这样的错误，明显是缺少 openssl 环境，需要手动安装\n\n**CentOS**\n\n```bash\n$ yum -y install openssl openssl-devel\n```\n\n**Ubuntu**\n\n```bash\n$ apt -y install openssl openssl-devel\n```\n","source":"_posts/2018-04-09-nginx-need-openssl.md","raw":"---\ntitle: Nginx 编译报错：SSL modules require the OpenSSL library\ndate: 2018-04-09 18:37:02\ntags: [nginx]\n---\n\nNginx 编译报错：SSL modules require the OpenSSL library\n<!-- more -->\n\n```bash\n./configure: error: SSL modules require the OpenSSL library.\nYou can either do not enable the modules, or install the OpenSSL library\ninto the system, or build the OpenSSL library statically from the source\nwith nginx by using --with-openssl=<path> option.\n```\n\n在编译 Nginx 时遇到这样的错误，明显是缺少 openssl 环境，需要手动安装\n\n**CentOS**\n\n```bash\n$ yum -y install openssl openssl-devel\n```\n\n**Ubuntu**\n\n```bash\n$ apt -y install openssl openssl-devel\n```\n","slug":"nginx-need-openssl","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a9300c25gqoigjd3lgq"},{"title":"Bower 的使用","date":"2018-04-14T21:23:48.000Z","_content":"\n> A package manager for the web\n\n<!-- more --><!-- toc -->\n\n## 下载\n\n[Bower](https://bower.io/) 需要 Node, npm, Git 的支持\n\n```bash\n$ npm install -g bower\n```\n\n**macOS**\n\n```bash\n$ brew install bower\n```\n\n## 用法\n\n**下载包**\n\n```bash\n# installs the project dependencies listed in bower.json\nbower install\n# registered package\nbower install jquery\n# GitHub shorthand\nbower install desandro/masonry\n# Git endpoint\nbower install git://github.com/user/package.git\n# URL\nbower install http://example.com/script.js\n```\n\n**搜索**\n\n```bash\n$ bower search jquery\n```\n\n**保存包**\n\n```bash\n$ bower init\n$ bower install jquery --save\n```\n\n**使用**\n\n```bash\n<script src=\"bower_components/jquery/dist/jquery.min.js\"></script>\n```\n\n**卸载**\n\n```bash\n$ bower uninstall\n```\n","source":"_posts/2018-04-14-bower.md","raw":"---\ntitle: Bower 的使用\ndate: 2018-04-14 21:23:48\ntags: [javascript]\n---\n\n> A package manager for the web\n\n<!-- more --><!-- toc -->\n\n## 下载\n\n[Bower](https://bower.io/) 需要 Node, npm, Git 的支持\n\n```bash\n$ npm install -g bower\n```\n\n**macOS**\n\n```bash\n$ brew install bower\n```\n\n## 用法\n\n**下载包**\n\n```bash\n# installs the project dependencies listed in bower.json\nbower install\n# registered package\nbower install jquery\n# GitHub shorthand\nbower install desandro/masonry\n# Git endpoint\nbower install git://github.com/user/package.git\n# URL\nbower install http://example.com/script.js\n```\n\n**搜索**\n\n```bash\n$ bower search jquery\n```\n\n**保存包**\n\n```bash\n$ bower init\n$ bower install jquery --save\n```\n\n**使用**\n\n```bash\n<script src=\"bower_components/jquery/dist/jquery.min.js\"></script>\n```\n\n**卸载**\n\n```bash\n$ bower uninstall\n```\n","slug":"bower","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a9400c45gqoql7auldq"},{"title":"MacOS 使用 SSHFS 将远程文件挂载到本地","date":"2018-04-12T15:41:54.000Z","_content":"\n> SSHFS允许您使用SFTP安装远程文件系统。 大多数SSH服务器默认支持并启用此SFTP访问，因此SSHFS使用起来非常简单，服务器端无需执行任何操作。\n\n<!-- more --><!-- toc -->\n\n在 MacOS 中使用 SSHFS 需要 FUSE 的支持\n\n> 用于 macOS 的 FUSE 允许您通过第三方文件系统扩展 macOS 的本地文件处理功能。 它是 MacFUSE 的继任者，已被许多产品用作软件构建块，但不再维护;\n\n## 安装\n\n**下载安装**\n\n你可以从[官网](https://osxfuse.github.io/)中下载最新版的 `FUSE for macOS` 和 `SSHFS` 直接安装。\n\n**HomeBrew**\n\n也可以使用 HomeBrew 安装\n\n```bash\n$ brew cask install osxfuse\n$ brew cask install sshfs\n```\n\n## 使用\n\n**新建本地挂载点**\n\n```bash\n$ mkdir local-file\n```\n\n**挂载**\n\n```bash\n$ sshfs user@hostname:/absolute/path/to/document local-file\n```\n\n远程的地址最好使用绝对路径。此时打开该文件夹就可以访问远程文件了。\n\n**卸载挂载文件**\n\n```bash\n$ umount local-file\n```\n\n- [sshfs](https://github.com/libfuse/sshfs)\n","source":"_posts/2018-04-12-osx-user-sshfs.md","raw":"---\ntitle: MacOS 使用 SSHFS 将远程文件挂载到本地\ndate: 2018-04-12 15:41:54\ntags: [mac]\n---\n\n> SSHFS允许您使用SFTP安装远程文件系统。 大多数SSH服务器默认支持并启用此SFTP访问，因此SSHFS使用起来非常简单，服务器端无需执行任何操作。\n\n<!-- more --><!-- toc -->\n\n在 MacOS 中使用 SSHFS 需要 FUSE 的支持\n\n> 用于 macOS 的 FUSE 允许您通过第三方文件系统扩展 macOS 的本地文件处理功能。 它是 MacFUSE 的继任者，已被许多产品用作软件构建块，但不再维护;\n\n## 安装\n\n**下载安装**\n\n你可以从[官网](https://osxfuse.github.io/)中下载最新版的 `FUSE for macOS` 和 `SSHFS` 直接安装。\n\n**HomeBrew**\n\n也可以使用 HomeBrew 安装\n\n```bash\n$ brew cask install osxfuse\n$ brew cask install sshfs\n```\n\n## 使用\n\n**新建本地挂载点**\n\n```bash\n$ mkdir local-file\n```\n\n**挂载**\n\n```bash\n$ sshfs user@hostname:/absolute/path/to/document local-file\n```\n\n远程的地址最好使用绝对路径。此时打开该文件夹就可以访问远程文件了。\n\n**卸载挂载文件**\n\n```bash\n$ umount local-file\n```\n\n- [sshfs](https://github.com/libfuse/sshfs)\n","slug":"osx-user-sshfs","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a9500c65gqoocyohdn9"},{"title":"Python Template 关闭自动转义","date":"2018-04-11T17:11:52.000Z","_content":"\n在用 Python 的 Template 写页面时碰见一个自动转义的问题。\n<!-- more -->\n\n原始数据\n\n```python\n['2018-04-10']\n```\n\n在用模板展示\n\n```html\n{{ days }}\n```\n\n得到了这样的结果，很明显它将 `'` 单引号转义了，这不是我想要的\n\n```bash\n[&#39;2018-04-10&#39;]\n```\n\nTemplate 默认是开启转义的，需要我们手动关闭掉\n\n```html\n{% autoescape off %}\n{{ days }}\n{% endautoescape %}\n```\n\n显示正常\n\n","source":"_posts/2018-04-11-template-no-auto-escaping.md","raw":"---\ntitle: Python Template 关闭自动转义\ndate: 2018-04-11 17:11:52\ntags: [python]\n---\n\n在用 Python 的 Template 写页面时碰见一个自动转义的问题。\n<!-- more -->\n\n原始数据\n\n```python\n['2018-04-10']\n```\n\n在用模板展示\n\n```html\n{{ days }}\n```\n\n得到了这样的结果，很明显它将 `'` 单引号转义了，这不是我想要的\n\n```bash\n[&#39;2018-04-10&#39;]\n```\n\nTemplate 默认是开启转义的，需要我们手动关闭掉\n\n```html\n{% autoescape off %}\n{{ days }}\n{% endautoescape %}\n```\n\n显示正常\n\n","slug":"template-no-auto-escaping","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a9600c85gqot4pijmvh"},{"title":"压缩图片","date":"2018-04-13T21:42:27.000Z","_content":"\n\n今天工作需要用到压缩图片，但是一时间竟然找不到方便的工具来做这件事。你们知道我的，我一定要写个工具干这事。\n\n<!-- more --><!-- toc -->\n\n\n{% raw %}\n网络图片：<input id=\"url\" value=\"/images/gzjzz2.png\"/>\n<br/>\n压缩系数：<input type=\"text\" id=\"quality\" value=\"0.7\">\n<br/>\n<button id=\"comp\" onClick=\"compression()\">压缩</button>\n<button id=\"download\" onClick=\"download()\">下载</button>\n<br/>\n<span id='fs'></span>\n<br/>\n<img id=\"preview\" width=\"200\"/>\n<script type=\"text/javascript\" src=\"/js/lrz.bundle.js\"></script>\n<script>\n//定义一个立即执行的函数\ncompression()\nfunction compression(){\n    var url = document.getElementById('url').value;\n    var q = document.getElementById('quality').value;\n    q = parseFloat(q)\n    console.log(q);\n    console.log(url);\n    lrz(url, {quality:q})\n        .then(function (rst) {\n                // 处理成功会执行\n                var imgDoc = document.getElementById('preview');\n                imgDoc.src = rst.base64\n                var fs = rst.fileLen / Math.pow(1024, 1)\n                fs = Math.floor(fs)\n                document.getElementById('fs').innerHTML = '压缩后大约：' + fs + 'KB'\n\n                })\n    .catch(function (err){\n            // 处理失败会执行\n            console.log(res);\n            })\n    .always(function () {\n            // 不管是成功失败，都会执行\n            });\n}\nfunction download(){\n    var imgDoc = document.getElementById('preview');\n    var url = imgDoc.src.replace(/^data:image\\/[^;]+/, 'data:image/octet-stream');\n    window.open(url);\n}\n</script>\n{% endraw %}\n","source":"_posts/2018-04-13-compression-image.md","raw":"---\ntitle: 压缩图片\ntags:\n  - 工具\n  - javascript\ndate: 2018-04-13 21:42:27\n---\n\n\n今天工作需要用到压缩图片，但是一时间竟然找不到方便的工具来做这件事。你们知道我的，我一定要写个工具干这事。\n\n<!-- more --><!-- toc -->\n\n\n{% raw %}\n网络图片：<input id=\"url\" value=\"/images/gzjzz2.png\"/>\n<br/>\n压缩系数：<input type=\"text\" id=\"quality\" value=\"0.7\">\n<br/>\n<button id=\"comp\" onClick=\"compression()\">压缩</button>\n<button id=\"download\" onClick=\"download()\">下载</button>\n<br/>\n<span id='fs'></span>\n<br/>\n<img id=\"preview\" width=\"200\"/>\n<script type=\"text/javascript\" src=\"/js/lrz.bundle.js\"></script>\n<script>\n//定义一个立即执行的函数\ncompression()\nfunction compression(){\n    var url = document.getElementById('url').value;\n    var q = document.getElementById('quality').value;\n    q = parseFloat(q)\n    console.log(q);\n    console.log(url);\n    lrz(url, {quality:q})\n        .then(function (rst) {\n                // 处理成功会执行\n                var imgDoc = document.getElementById('preview');\n                imgDoc.src = rst.base64\n                var fs = rst.fileLen / Math.pow(1024, 1)\n                fs = Math.floor(fs)\n                document.getElementById('fs').innerHTML = '压缩后大约：' + fs + 'KB'\n\n                })\n    .catch(function (err){\n            // 处理失败会执行\n            console.log(res);\n            })\n    .always(function () {\n            // 不管是成功失败，都会执行\n            });\n}\nfunction download(){\n    var imgDoc = document.getElementById('preview');\n    var url = imgDoc.src.replace(/^data:image\\/[^;]+/, 'data:image/octet-stream');\n    window.open(url);\n}\n</script>\n{% endraw %}\n","slug":"compression-image","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a9700ca5gqo1af9ypgq"},{"title":"使用 localResizeIMG 来压缩图片","date":"2018-04-15T18:04:15.000Z","_content":"\n前两天写的图片的压缩的工具，使用了 [localResizeIMG](https://github.com/think2011/localResizeIMG) 这个第三方工具，虽然现在已经不维护了，但毕竟人家已经踩过了很多坑，还是比自己写要高效些。\n\n<!-- more --><!-- toc -->\n\n我主要使用压缩最简单的功能\n\n**下载**\n\n```bash\n$ wget https://raw.githubusercontent.com/think2011/localResizeIMG/master/dist/lrz.bundle.js\n```\n\n**使用**\n\n```java\n<img id=\"origin\" src=\"/images/springhw1.png\" width=\"200\"/>\n<img id=\"preview\" width=\"200\"/>\n<div id=\"fs\"></div>\n<script type=\"text/javascript\" src=\"/js/lrz.bundle.js\"></script>\n<script>\n    lrz('/images/springhw1.png', {quality:0.2})\n      .then(function (rst) {\n        // 处理成功会执行\n        var imgDoc = document.getElementById('preview');\n        imgDoc.src = rst.base64\n        var fs = rst.fileLen / Math.pow(1024, 1)\n          fs = Math.floor(fs)\n          document.getElementById('fs').innerHTML = '压缩后大约：' + fs + 'KB'\n\n\n      })\n      .catch(function (err){\n        // 处理失败会执行\n        console.log(err);\n      })\n      .always(function () {\n        // 不管是成功失败，都会执行\n      });\n\n</script>\n```\n\n[试一下](/run/?id=68719483404)\n\n参数文档详见：https://github.com/think2011/localResizeIMG/wiki/2.-%E5%8F%82%E6%95%B0%E6%96%87%E6%A1%A3\n","source":"_posts/2018-04-15-use-lrz.md","raw":"---\ntitle: 使用 localResizeIMG 来压缩图片\ndate: 2018-04-15 18:04:15\ntags: [javascript]\n---\n\n前两天写的图片的压缩的工具，使用了 [localResizeIMG](https://github.com/think2011/localResizeIMG) 这个第三方工具，虽然现在已经不维护了，但毕竟人家已经踩过了很多坑，还是比自己写要高效些。\n\n<!-- more --><!-- toc -->\n\n我主要使用压缩最简单的功能\n\n**下载**\n\n```bash\n$ wget https://raw.githubusercontent.com/think2011/localResizeIMG/master/dist/lrz.bundle.js\n```\n\n**使用**\n\n```java\n<img id=\"origin\" src=\"/images/springhw1.png\" width=\"200\"/>\n<img id=\"preview\" width=\"200\"/>\n<div id=\"fs\"></div>\n<script type=\"text/javascript\" src=\"/js/lrz.bundle.js\"></script>\n<script>\n    lrz('/images/springhw1.png', {quality:0.2})\n      .then(function (rst) {\n        // 处理成功会执行\n        var imgDoc = document.getElementById('preview');\n        imgDoc.src = rst.base64\n        var fs = rst.fileLen / Math.pow(1024, 1)\n          fs = Math.floor(fs)\n          document.getElementById('fs').innerHTML = '压缩后大约：' + fs + 'KB'\n\n\n      })\n      .catch(function (err){\n        // 处理失败会执行\n        console.log(err);\n      })\n      .always(function () {\n        // 不管是成功失败，都会执行\n      });\n\n</script>\n```\n\n[试一下](/run/?id=68719483404)\n\n参数文档详见：https://github.com/think2011/localResizeIMG/wiki/2.-%E5%8F%82%E6%95%B0%E6%96%87%E6%A1%A3\n","slug":"use-lrz","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a9800cc5gqok83ws2pe"},{"title":"Yum 安装的文件去哪了","date":"2018-04-21T10:33:27.000Z","_content":"\n借助 RPM 命令可以非常方便的查找 yum 安装包的所有路径。\n<!-- more -->\n\n**查找包名**\n\n首先确定想要查找的完整包名，以 `wget` 为例\n\n```bash\n$ rpm -qa | grep wget\nwget-1.18-3.28.amzn1.x86_64\n```\n`wget-1.18-3.28.amzn1.x86_64` 就是完整的按照包名\n\n**查找所有路径**\n\n```bash\n$ rpm -ql wget-1.18-3.28.amzn1.x86_64\n/etc/wgetrc\n/usr/bin/wget\n/usr/share/doc/wget-1.18\n/usr/share/doc/wget-1.18/AUTHORS\n/usr/share/doc/wget-1.18/COPYING\n/usr/share/doc/wget-1.18/MAILING-LIST\n/usr/share/doc/wget-1.18/NEWS\n/usr/share/doc/wget-1.18/README\n/usr/share/doc/wget-1.18/sample.wgetrc\n/usr/share/info/wget.info.gz\n/usr/share/locale/be/LC_MESSAGES/wget.mo\n/usr/share/locale/bg/LC_MESSAGES/wget.mo\n/usr/share/locale/ca/LC_MESSAGES/wget.mo\n/usr/share/locale/cs/LC_MESSAGES/wget.mo\n/usr/share/locale/da/LC_MESSAGES/wget.mo\n/usr/share/locale/de/LC_MESSAGES/wget.mo\n/usr/share/locale/el/LC_MESSAGES/wget.mo\n/usr/share/locale/en_GB/LC_MESSAGES/wget.mo\n/usr/share/locale/eo/LC_MESSAGES/wget.mo\n/usr/share/locale/es/LC_MESSAGES/wget.mo\n/usr/share/locale/et/LC_MESSAGES/wget.mo\n/usr/share/locale/eu/LC_MESSAGES/wget.mo\n/usr/share/locale/fi/LC_MESSAGES/wget.mo\n/usr/share/locale/fr/LC_MESSAGES/wget.mo\n/usr/share/locale/ga/LC_MESSAGES/wget.mo\n/usr/share/locale/gl/LC_MESSAGES/wget.mo\n/usr/share/locale/he/LC_MESSAGES/wget.mo\n/usr/share/locale/hr/LC_MESSAGES/wget.mo\n/usr/share/locale/hu/LC_MESSAGES/wget.mo\n/usr/share/locale/id/LC_MESSAGES/wget.mo\n/usr/share/locale/it/LC_MESSAGES/wget.mo\n/usr/share/locale/ja/LC_MESSAGES/wget.mo\n/usr/share/locale/lt/LC_MESSAGES/wget.mo\n/usr/share/locale/nb/LC_MESSAGES/wget.mo\n/usr/share/locale/nl/LC_MESSAGES/wget.mo\n/usr/share/locale/pl/LC_MESSAGES/wget.mo\n/usr/share/locale/pt/LC_MESSAGES/wget.mo\n/usr/share/locale/pt_BR/LC_MESSAGES/wget.mo\n/usr/share/locale/ro/LC_MESSAGES/wget.mo\n/usr/share/locale/ru/LC_MESSAGES/wget.mo\n/usr/share/locale/sk/LC_MESSAGES/wget.mo\n/usr/share/locale/sl/LC_MESSAGES/wget.mo\n/usr/share/locale/sr/LC_MESSAGES/wget.mo\n/usr/share/locale/sv/LC_MESSAGES/wget.mo\n/usr/share/locale/tr/LC_MESSAGES/wget.mo\n/usr/share/locale/uk/LC_MESSAGES/wget.mo\n/usr/share/locale/vi/LC_MESSAGES/wget.mo\n/usr/share/locale/zh_CN/LC_MESSAGES/wget.mo\n/usr/share/locale/zh_TW/LC_MESSAGES/wget.mo\n/usr/share/man/man1/wget.1.gz\n```\n\n列出的就是全部文件的路径，通常 RPM 的默认安装路径为\n\n- `/etc`              一些设置文件放置的目录如/etc/crontab\n- `/usr/bin`          一些可执行文件\n- `/usr/lib`          一些程序使用的动态函数库\n- `/usr/share/doc`    一些基本的软件使用手册与帮助文档\n- `/usr/share/man`    一些man page文件\n","source":"_posts/2018-04-21-where-yum-install.md","raw":"---\ntitle: Yum 安装的文件去哪了\ndate: 2018-04-21 10:33:27\ntags: [linux]\n---\n\n借助 RPM 命令可以非常方便的查找 yum 安装包的所有路径。\n<!-- more -->\n\n**查找包名**\n\n首先确定想要查找的完整包名，以 `wget` 为例\n\n```bash\n$ rpm -qa | grep wget\nwget-1.18-3.28.amzn1.x86_64\n```\n`wget-1.18-3.28.amzn1.x86_64` 就是完整的按照包名\n\n**查找所有路径**\n\n```bash\n$ rpm -ql wget-1.18-3.28.amzn1.x86_64\n/etc/wgetrc\n/usr/bin/wget\n/usr/share/doc/wget-1.18\n/usr/share/doc/wget-1.18/AUTHORS\n/usr/share/doc/wget-1.18/COPYING\n/usr/share/doc/wget-1.18/MAILING-LIST\n/usr/share/doc/wget-1.18/NEWS\n/usr/share/doc/wget-1.18/README\n/usr/share/doc/wget-1.18/sample.wgetrc\n/usr/share/info/wget.info.gz\n/usr/share/locale/be/LC_MESSAGES/wget.mo\n/usr/share/locale/bg/LC_MESSAGES/wget.mo\n/usr/share/locale/ca/LC_MESSAGES/wget.mo\n/usr/share/locale/cs/LC_MESSAGES/wget.mo\n/usr/share/locale/da/LC_MESSAGES/wget.mo\n/usr/share/locale/de/LC_MESSAGES/wget.mo\n/usr/share/locale/el/LC_MESSAGES/wget.mo\n/usr/share/locale/en_GB/LC_MESSAGES/wget.mo\n/usr/share/locale/eo/LC_MESSAGES/wget.mo\n/usr/share/locale/es/LC_MESSAGES/wget.mo\n/usr/share/locale/et/LC_MESSAGES/wget.mo\n/usr/share/locale/eu/LC_MESSAGES/wget.mo\n/usr/share/locale/fi/LC_MESSAGES/wget.mo\n/usr/share/locale/fr/LC_MESSAGES/wget.mo\n/usr/share/locale/ga/LC_MESSAGES/wget.mo\n/usr/share/locale/gl/LC_MESSAGES/wget.mo\n/usr/share/locale/he/LC_MESSAGES/wget.mo\n/usr/share/locale/hr/LC_MESSAGES/wget.mo\n/usr/share/locale/hu/LC_MESSAGES/wget.mo\n/usr/share/locale/id/LC_MESSAGES/wget.mo\n/usr/share/locale/it/LC_MESSAGES/wget.mo\n/usr/share/locale/ja/LC_MESSAGES/wget.mo\n/usr/share/locale/lt/LC_MESSAGES/wget.mo\n/usr/share/locale/nb/LC_MESSAGES/wget.mo\n/usr/share/locale/nl/LC_MESSAGES/wget.mo\n/usr/share/locale/pl/LC_MESSAGES/wget.mo\n/usr/share/locale/pt/LC_MESSAGES/wget.mo\n/usr/share/locale/pt_BR/LC_MESSAGES/wget.mo\n/usr/share/locale/ro/LC_MESSAGES/wget.mo\n/usr/share/locale/ru/LC_MESSAGES/wget.mo\n/usr/share/locale/sk/LC_MESSAGES/wget.mo\n/usr/share/locale/sl/LC_MESSAGES/wget.mo\n/usr/share/locale/sr/LC_MESSAGES/wget.mo\n/usr/share/locale/sv/LC_MESSAGES/wget.mo\n/usr/share/locale/tr/LC_MESSAGES/wget.mo\n/usr/share/locale/uk/LC_MESSAGES/wget.mo\n/usr/share/locale/vi/LC_MESSAGES/wget.mo\n/usr/share/locale/zh_CN/LC_MESSAGES/wget.mo\n/usr/share/locale/zh_TW/LC_MESSAGES/wget.mo\n/usr/share/man/man1/wget.1.gz\n```\n\n列出的就是全部文件的路径，通常 RPM 的默认安装路径为\n\n- `/etc`              一些设置文件放置的目录如/etc/crontab\n- `/usr/bin`          一些可执行文件\n- `/usr/lib`          一些程序使用的动态函数库\n- `/usr/share/doc`    一些基本的软件使用手册与帮助文档\n- `/usr/share/man`    一些man page文件\n","slug":"where-yum-install","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a9900ce5gqo5m8k72ud"},{"title":"Git ERROR Permission to XXX.git denied to user 的一种可能","date":"2018-04-17T09:46:04.000Z","_content":"\nGit 的使用过程你一定会遇到一两次报错 `ERROR: Permission to XXX.git denied to user`，归根到底是当前用户对仓库没有对应的权限，然而造成这种错误的情况却有很多种，今天记录某一种可能。\n\n<!-- more -->\n\n我有两个用户 A 和 B，用户 A 创建了的仓库并邀请了 B，B 对其操作是没有问题的。但是如果 A 新建了组织，并在组织中新建仓库再邀请 B，就会报权限的错误。\n\n**解决方法**\n\n在 `~/.ssh/config` 中添加\n\n```bash\nHost github.com\n\tHostName github.com\n\tUser git\n\tIdentityFile ~/.ssh/id_rsa\n```\n\n并修改项目的远程地址\n\n```bash\n$ vim .git/config\n\n- https://github.com/wxnacy/wxnacy.github.io.git\n+ git@github.com:wxnacy/wxnacy.github.io.git\n```\n\n\n","source":"_posts/2018-04-17-git-permission1.md","raw":"---\ntitle: Git ERROR Permission to XXX.git denied to user 的一种可能\ndate: 2018-04-17 09:46:04\ntags: [git]\n---\n\nGit 的使用过程你一定会遇到一两次报错 `ERROR: Permission to XXX.git denied to user`，归根到底是当前用户对仓库没有对应的权限，然而造成这种错误的情况却有很多种，今天记录某一种可能。\n\n<!-- more -->\n\n我有两个用户 A 和 B，用户 A 创建了的仓库并邀请了 B，B 对其操作是没有问题的。但是如果 A 新建了组织，并在组织中新建仓库再邀请 B，就会报权限的错误。\n\n**解决方法**\n\n在 `~/.ssh/config` 中添加\n\n```bash\nHost github.com\n\tHostName github.com\n\tUser git\n\tIdentityFile ~/.ssh/id_rsa\n```\n\n并修改项目的远程地址\n\n```bash\n$ vim .git/config\n\n- https://github.com/wxnacy/wxnacy.github.io.git\n+ git@github.com:wxnacy/wxnacy.github.io.git\n```\n\n\n","slug":"git-permission1","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a9900cg5gqoatdok5hb"},{"title":"Javascript 常用 DOM 操作","date":"2018-04-20T08:39:31.000Z","_content":"\n使用 `jQuery` 时间长了，对 `dom` 的基本操作难免生疏，总结些常用的，免得使用时捉急。\n\n<!-- more --><!-- toc -->\n## DOM 创建\n\n```vim\ndocument.createElement('div');\ndocument.createTextNode('wxnacy');\n```\n\n## DOM 查询\n\n```javascript\ndocument.querySelector(\".myclass\");\ndocument.querySelectorAll(\"div.note, div.alert\");\n\ndocument.getElementById('id');\ndocument.getElementsByClassName('className');\ndocument.getElementsByTagName('td');\n```\n\n### Element 查询\n\n```java\n// 获取父元素、父节点\nvar parent = ele.parentElement;\nvar parent = ele.parentNode;\n\n// 获取子节点，子节点可以是任何一种节点，可以通过nodeType来判断\nvar nodes = ele.children;\n\n// 查询子元素\nvar els = ele.getElementsByTagName('td');\nvar els = ele.getElementsByClassName('highlight');\n\n// 当前元素的第一个/最后一个子元素节点\nvar el = ele.firstElementChild;\nvar el = ele.lastElementChild;\n\n// 下一个/上一个兄弟元素节点\nvar el = ele.nextElementSibling;\nvar el = ele.previousElementSibling;\n```\n\n### 删除元素\n\n```java\nele.parentNode.removeChild(ele);\n```\n\n### class\n```java\nelement.classList\nelement.classList.add(c1, c2)\nelement.classList.remove(c1, c2)\nelement.classList.contains(className)\n```\n\n- [classList](http://www.runoob.com/jsref/prop-element-classlist.html)\n","source":"_posts/2018-04-20-js-dom.md","raw":"---\ntitle: Javascript 常用 DOM 操作\ndate: 2018-04-20 08:39:31\ntags: [javascript]\n---\n\n使用 `jQuery` 时间长了，对 `dom` 的基本操作难免生疏，总结些常用的，免得使用时捉急。\n\n<!-- more --><!-- toc -->\n## DOM 创建\n\n```vim\ndocument.createElement('div');\ndocument.createTextNode('wxnacy');\n```\n\n## DOM 查询\n\n```javascript\ndocument.querySelector(\".myclass\");\ndocument.querySelectorAll(\"div.note, div.alert\");\n\ndocument.getElementById('id');\ndocument.getElementsByClassName('className');\ndocument.getElementsByTagName('td');\n```\n\n### Element 查询\n\n```java\n// 获取父元素、父节点\nvar parent = ele.parentElement;\nvar parent = ele.parentNode;\n\n// 获取子节点，子节点可以是任何一种节点，可以通过nodeType来判断\nvar nodes = ele.children;\n\n// 查询子元素\nvar els = ele.getElementsByTagName('td');\nvar els = ele.getElementsByClassName('highlight');\n\n// 当前元素的第一个/最后一个子元素节点\nvar el = ele.firstElementChild;\nvar el = ele.lastElementChild;\n\n// 下一个/上一个兄弟元素节点\nvar el = ele.nextElementSibling;\nvar el = ele.previousElementSibling;\n```\n\n### 删除元素\n\n```java\nele.parentNode.removeChild(ele);\n```\n\n### class\n```java\nelement.classList\nelement.classList.add(c1, c2)\nelement.classList.remove(c1, c2)\nelement.classList.contains(className)\n```\n\n- [classList](http://www.runoob.com/jsref/prop-element-classlist.html)\n","slug":"js-dom","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a9a00ci5gqovce0okv9"},{"title":"IPython autoreload 自动重加载","date":"2018-04-22T12:01:50.000Z","_content":"\nIPython 在项目开发中快速测试函数是很常用的，但是默认情况下他不会自动重新加载模块，这样在高频繁的改动情况下会很不方便，而 `autoreload` 可以解决这个问题。\n\n<!-- more -->\n\n**运行方法前重新加载所以模块**\n\n```python\n$ ipython\nIn [1]: %load_ext autoreload\n\nIn [2]: %autoreload 2\n\nIn [3]: from foo import some_function\n\nIn [4]: some_function()\nOut[4]: 42\n\nIn [5]: # open foo.py in an editor and change some_function to return 43\n\nIn [6]: some_function()\nOut[6]: 43\n```\n\n**启动时默认加载**\n\n每次手动执行命令也不是个好主意，最好是默认加载\n\n找到配置文件 `~/.ipython/profile_default/ipython_config.py`\n\n如果你之前没用过这个文件，很可能还不存在，需要手动创建\n\n```bash\n$ ipython profile create\n```\n\n随后修改该文件，选择下面一种方式即可\n\n```python\nc.InteractiveShellApp.exec_lines = [ '%load_ext autoreload', '%autoreload 2' ]\n```\n\n或者\n\n```python\nc.InteractiveShellApp.extensions = ['autoreload']\nc.InteractiveShellApp.exec_lines = [ '%autoreload 2' ]\n```\n\n随后再次执行 ipython，现在已经自动实现热加载。\n\n- [autoreload](https://ipython.org/ipython-doc/3/config/extensions/autoreload.html)\n","source":"_posts/2018-04-22-ipython-autoreload.md","raw":"---\ntitle: IPython autoreload 自动重加载\ndate: 2018-04-22 12:01:50\ntags: [python]\n---\n\nIPython 在项目开发中快速测试函数是很常用的，但是默认情况下他不会自动重新加载模块，这样在高频繁的改动情况下会很不方便，而 `autoreload` 可以解决这个问题。\n\n<!-- more -->\n\n**运行方法前重新加载所以模块**\n\n```python\n$ ipython\nIn [1]: %load_ext autoreload\n\nIn [2]: %autoreload 2\n\nIn [3]: from foo import some_function\n\nIn [4]: some_function()\nOut[4]: 42\n\nIn [5]: # open foo.py in an editor and change some_function to return 43\n\nIn [6]: some_function()\nOut[6]: 43\n```\n\n**启动时默认加载**\n\n每次手动执行命令也不是个好主意，最好是默认加载\n\n找到配置文件 `~/.ipython/profile_default/ipython_config.py`\n\n如果你之前没用过这个文件，很可能还不存在，需要手动创建\n\n```bash\n$ ipython profile create\n```\n\n随后修改该文件，选择下面一种方式即可\n\n```python\nc.InteractiveShellApp.exec_lines = [ '%load_ext autoreload', '%autoreload 2' ]\n```\n\n或者\n\n```python\nc.InteractiveShellApp.extensions = ['autoreload']\nc.InteractiveShellApp.exec_lines = [ '%autoreload 2' ]\n```\n\n随后再次执行 ipython，现在已经自动实现热加载。\n\n- [autoreload](https://ipython.org/ipython-doc/3/config/extensions/autoreload.html)\n","slug":"ipython-autoreload","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a9b00ck5gqoes1i54lz"},{"title":"使用 youtube-dl 下载视频","date":"2018-04-16T14:18:56.000Z","_content":"\n\n> 可以从视频网站下载视频的命令行程序\n\n<!-- more --><!-- toc -->\n\n## 下载\n\n**curl**\n\n```bash\n$ sudo curl -L https://yt-dl.org/downloads/latest/youtube-dl -o /usr/local/bin/youtube-dl\n$ sudo chmod a+rx /usr/local/bin/youtube-dl\n```\n\n**wget**\n\n```bash\n$ sudo wget https://yt-dl.org/downloads/latest/youtube-dl -O /usr/local/bin/youtube-dl\n$ sudo chmod a+rx /usr/local/bin/youtube-dl\n```\n\n**pip**\n\n```bash\n$ sudo pip install --upgrade youtube_dl\n```\n\n**Homebrew**\n\n```bash\n$ brew install youtube-dl\n```\n\n## 使用\n\n```bash\n$ youtube-dl [OPTIONS] URL [URL...]\n```\n\n**无参数**，模式下载 `720p` 的视频\n\n```bash\n$ youtube-dl https://www.youtube.com/watch\\?v\\=IYMqASfrvKY\n```\n\n**查看可以下载的格式**\n\n```bash\n$ youtube-dl -F https://www.youtube.com/watch\\?v\\=IYMqASfrvKY\n```\n\n**下载指定格式**\n\n```bash\n$ youtube-dl -f 137 https://www.youtube.com/watch\\?v\\=IYMqASfrvKY\n```\n\n**程序升级**\n\n```bash\n$ youtube-dl -U\n```\n\n**查看支持的网站**\n\n```bash\n$ youtube-dl --list-extractors\n```\n\n更多用法见[文档](https://github.com/rg3/youtube-dl/#options)\n\n- [youtube-dl 使用小记](http://www.cnblogs.com/faunjoe88/p/7810427.html)\n","source":"_posts/2018-04-16-youtube-dl.md","raw":"---\ntitle: 使用 youtube-dl 下载视频\ntags:\n  - 工具\ndate: 2018-04-16 14:18:56\n---\n\n\n> 可以从视频网站下载视频的命令行程序\n\n<!-- more --><!-- toc -->\n\n## 下载\n\n**curl**\n\n```bash\n$ sudo curl -L https://yt-dl.org/downloads/latest/youtube-dl -o /usr/local/bin/youtube-dl\n$ sudo chmod a+rx /usr/local/bin/youtube-dl\n```\n\n**wget**\n\n```bash\n$ sudo wget https://yt-dl.org/downloads/latest/youtube-dl -O /usr/local/bin/youtube-dl\n$ sudo chmod a+rx /usr/local/bin/youtube-dl\n```\n\n**pip**\n\n```bash\n$ sudo pip install --upgrade youtube_dl\n```\n\n**Homebrew**\n\n```bash\n$ brew install youtube-dl\n```\n\n## 使用\n\n```bash\n$ youtube-dl [OPTIONS] URL [URL...]\n```\n\n**无参数**，模式下载 `720p` 的视频\n\n```bash\n$ youtube-dl https://www.youtube.com/watch\\?v\\=IYMqASfrvKY\n```\n\n**查看可以下载的格式**\n\n```bash\n$ youtube-dl -F https://www.youtube.com/watch\\?v\\=IYMqASfrvKY\n```\n\n**下载指定格式**\n\n```bash\n$ youtube-dl -f 137 https://www.youtube.com/watch\\?v\\=IYMqASfrvKY\n```\n\n**程序升级**\n\n```bash\n$ youtube-dl -U\n```\n\n**查看支持的网站**\n\n```bash\n$ youtube-dl --list-extractors\n```\n\n更多用法见[文档](https://github.com/rg3/youtube-dl/#options)\n\n- [youtube-dl 使用小记](http://www.cnblogs.com/faunjoe88/p/7810427.html)\n","slug":"youtube-dl","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a9c00cm5gqo4e52mdqd"},{"title":"Python 取整","date":"2018-04-18T17:29:04.000Z","_content":"\nPython 有三种方式取整：向下取整、向上取整、四舍五入。\n<!-- more -->\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport math\n\n# 向上取整\nprint(math.ceil(2.4))   ==> 3\n\n# 向下取整\nprint(math.floor(2.8))   ==> 2\n\n# 四舍五入\nprint(round(2.8))   ==> 3\nprint(round(2.2))   ==> 2\n\n```\n\n","source":"_posts/2018-04-18-python-quzheng.md","raw":"---\ntitle: Python 取整\ndate: 2018-04-18 17:29:04\ntags: [python]\n---\n\nPython 有三种方式取整：向下取整、向上取整、四舍五入。\n<!-- more -->\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport math\n\n# 向上取整\nprint(math.ceil(2.4))   ==> 3\n\n# 向下取整\nprint(math.floor(2.8))   ==> 2\n\n# 四舍五入\nprint(round(2.8))   ==> 3\nprint(round(2.2))   ==> 2\n\n```\n\n","slug":"python-quzheng","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a9d00co5gqoropbzs31"},{"title":"人体 12 经络","date":"2018-04-19T09:35:39.000Z","_content":"\n最近在看中医书，打算陆续整理一些中医知识，今天这篇摘自懒兔子的《说医不二》。\n\n<!-- more --><!-- toc -->\n\n## 1 忠肝义胆的好兄弟\n\n### 子时：23:00-1:00，胆经当令\n\n胆经具体干啥呢？就是进行胆汁的新陈代谢，让胆汁更加清新。古语说：“胆有多清，脑有多清。”\n\n就是在子时，人体的阳气就开始升发了。对，你没听错，大半夜的，升发的不是阴气，是阳气。所以一旦过了23点，你反而会越来越精神，困意全无。\n\n你不按时睡觉，除了第二天头脑不清醒以外，还会脸色晦暗、皮肤粗糙、胸胁疼痛、头晕目眩。这就是23点前睡美容觉的原因。由于胆经从脑后侧经过，因此晚睡也是很多常年偏头痛患者的病因。\n\n### 丑时：1:00-3:00，肝经当令\n\n肝经是把肝血运送给肝，滋养它，让它进行新陈代谢和自我修复。丑时未入睡者，肝回不了血，有毒的血排不掉，新鲜的血生不成，胆又无法换胆汁，所以这些人容易得胆结石、囊肿、大三阳、小三阳等各种病症。同时还会面色青灰，情志倦怠而躁，易生肝病，脸色晦暗长斑。\n\n## 2 肺与大肠是好基友\n\n### 寅时：3:00-5:00 肺经当令\n\n肺经运行的时候，是人体处在深度睡眠的时候。因为肺主肃降，此时人的气是往下走的，所以一般熬夜，3点之前都很精神，可是一过3点就扛不住了，好想睡觉。这个时候肺经在干吗呢？它在把之前已经代谢好的肝血，输送到身体的每个角落，叫“肺朝百脉”。就跟园丁洒水似的，把身体的角角落落都用肝血滋润一遍。如果患有肺病，肺气在此时就不能很好地肃降，反而会因为咳嗽或者呼吸困难而醒来。\n\n还有的婴幼儿，因为有肺热，此时也会醒。不管大人困得有多想死，他们都会趴在床边不停地点你：嘿起来，聊个5块钱儿的呗。\n\n### 卯时：5:00-7:00 大肠经当令\n\n可要看仔细了，是大肠经而不是“大长今”。那它在这个时候干吗呢？正是排便清肠的时间。因为肺经把血液输送给了大肠，大肠就满血复活了，开始吸收营养，排出渣滓。\n\n## 3 脾胃的那点儿事儿\n\n### 辰时：7:00-9:00 胃经当令\n\n胃经上班后的工作是什么呢？就是开始接受和腐化胃里的食物，所以在这个时间段，我们就应该吃早饭了。\n\n此时，为了配合胃里的食物消化，胆囊开始向小肠输送胆汁。可如果不吃早饭，胆汁就无处释放，全部积存在胆囊里，时间一长就变成了结晶，就是所谓的胆结石。\n\n### 巳时：9:00-11:00 脾经当令\n\n假如胃是一个食堂的话，脾就像是它的分发员。它把胃中的水谷精微运送到身体的各个器官。\n\n脾胃的五行属土，厚德载物，是身体的根本。好好保护脾胃就像农民守着一块土地，种不种，种什么，都不重要，重要的是地还在，地还肥。如果有一天地都没有了，或者土地贫瘠了，那还扯啥？\n\n## 4 心与小肠是两口子\n\n### 午时：11:00-13:00 心经当令\n\n中午就是应该吃得有营养一点儿，心经虽然用不上这些营养，但一会儿接班的小肠经用得上。心经主要负责给心脏补充血液，然后让心脏更好地推动周身的血液运行。\n\n这个时间段，最好能睡一会儿，让心血得到充分的补给。要养心、要静心。\n\n汗为心之液，所以午时运动其实对身体并没有任何好处，此时流汗对心的伤害很大。要睡觉、要安静。\n\n### 未时：13:00-15:00 小肠经当令\n\n小肠经是干吗的呢？它开始对营养和糟粕进行整理和分送，把好东西挑出来输送给脾，供脾运送给全身。\n\n然后，再把脏东西分成液体和渣滓，分送到膀胱和大肠。\n\n## 5 膀胱经的时候尿尿，肾经的时候爱爱\n\n膀胱经和肾经的关系就像一对东家和掌柜，相辅相成。\n\n### 申时：15:00-17:00 膀胱经当令\n\n这个时候膀胱经来上班了，一看，小肠经已经把稀的都分拨给了膀胱。那么问题来了，在膀胱里的都是尿吗？No，那是水液和津液的混合。所以膀胱经要做的第一件事，就是把这两种液体再区分开来。\n\n津液分离出来，继续在身体里流动。那液体呢？也就是尿液，从尿道里排出体外。所以，这个时候不要憋尿哦，否则很容易憋出病来。\n\n因为人体在这个时间段津液最充足，因此比较适合运动。若膀胱有热就会导致膀胱咳，就是一咳嗽就遗尿。另外膀胱经是人体最大的一个经络，从脚丫子一直沿着后背，经过后脑勺走到眼睛。癫痫、头痛、目疾、鼻病、遗尿、小便不利及下肢后侧部位的疼痛等病症，都和膀胱经有关，别以为人家就是管排尿的。\n\n### 酉时：17:00-19:00 肾经当令\n\n很多工作压力大、劳累过度的人在这段时间就会莫名其妙地发低烧，而且常年如此，但过了这个时候烧就退了，很奇怪。其实这就是肾气虚的表现，是肾经在用发烧来提醒你。\n\n肾藏精，其中先天之精是父母给的，后天之精是靠吸收脾运送过来的水谷精微转化而成。所以脾虚的人一定肾气虚，因为肾没有营养进行精气的转化了。\n\n肾经上班的时间确实最适合Make Love了，往往很容易受孕。\n\n## 6 你不知道的两根经\n\n### 戌时：19:00-21:00 心包经当令\n\n心包是心的保护组织，又是气血通道。心包经晚上7点上班，9点下班。专门负责清除心脏周围的外邪，使心脏处于完好状态。此时最宜步行，可增强心功能。同时一定要保持心情舒畅，放松心情，释放压力。但这个时候也是人阴气最重的时候，所以并不适宜进行剧烈运动。很多人都会在晚饭后打球或者健身，其实这不但对身体没有好处，反而会伤身。因为人在夜晚阳气需要收敛，剧烈的运动会发散阳气，导致失眠。\n\n### 亥时：21:00-23:00 三焦经当令\n\n三焦经具有主持诸气、疏通水道的作用。三焦通百脉，人如果在此时睡觉，那美容养颜不用烦了。\n\n## 总结\n凡事都有因果，健康也一样。坦然面对和接受结果，因为没有任何疾病与苦难是从天而降的，不过是我们之前不经意种下的种子发了芽。\n\n","source":"_posts/2018-04-19-12-jinglu.md","raw":"---\ntitle: 人体 12 经络\ndate: 2018-04-19 09:35:39\ntags: [杂谈]\n---\n\n最近在看中医书，打算陆续整理一些中医知识，今天这篇摘自懒兔子的《说医不二》。\n\n<!-- more --><!-- toc -->\n\n## 1 忠肝义胆的好兄弟\n\n### 子时：23:00-1:00，胆经当令\n\n胆经具体干啥呢？就是进行胆汁的新陈代谢，让胆汁更加清新。古语说：“胆有多清，脑有多清。”\n\n就是在子时，人体的阳气就开始升发了。对，你没听错，大半夜的，升发的不是阴气，是阳气。所以一旦过了23点，你反而会越来越精神，困意全无。\n\n你不按时睡觉，除了第二天头脑不清醒以外，还会脸色晦暗、皮肤粗糙、胸胁疼痛、头晕目眩。这就是23点前睡美容觉的原因。由于胆经从脑后侧经过，因此晚睡也是很多常年偏头痛患者的病因。\n\n### 丑时：1:00-3:00，肝经当令\n\n肝经是把肝血运送给肝，滋养它，让它进行新陈代谢和自我修复。丑时未入睡者，肝回不了血，有毒的血排不掉，新鲜的血生不成，胆又无法换胆汁，所以这些人容易得胆结石、囊肿、大三阳、小三阳等各种病症。同时还会面色青灰，情志倦怠而躁，易生肝病，脸色晦暗长斑。\n\n## 2 肺与大肠是好基友\n\n### 寅时：3:00-5:00 肺经当令\n\n肺经运行的时候，是人体处在深度睡眠的时候。因为肺主肃降，此时人的气是往下走的，所以一般熬夜，3点之前都很精神，可是一过3点就扛不住了，好想睡觉。这个时候肺经在干吗呢？它在把之前已经代谢好的肝血，输送到身体的每个角落，叫“肺朝百脉”。就跟园丁洒水似的，把身体的角角落落都用肝血滋润一遍。如果患有肺病，肺气在此时就不能很好地肃降，反而会因为咳嗽或者呼吸困难而醒来。\n\n还有的婴幼儿，因为有肺热，此时也会醒。不管大人困得有多想死，他们都会趴在床边不停地点你：嘿起来，聊个5块钱儿的呗。\n\n### 卯时：5:00-7:00 大肠经当令\n\n可要看仔细了，是大肠经而不是“大长今”。那它在这个时候干吗呢？正是排便清肠的时间。因为肺经把血液输送给了大肠，大肠就满血复活了，开始吸收营养，排出渣滓。\n\n## 3 脾胃的那点儿事儿\n\n### 辰时：7:00-9:00 胃经当令\n\n胃经上班后的工作是什么呢？就是开始接受和腐化胃里的食物，所以在这个时间段，我们就应该吃早饭了。\n\n此时，为了配合胃里的食物消化，胆囊开始向小肠输送胆汁。可如果不吃早饭，胆汁就无处释放，全部积存在胆囊里，时间一长就变成了结晶，就是所谓的胆结石。\n\n### 巳时：9:00-11:00 脾经当令\n\n假如胃是一个食堂的话，脾就像是它的分发员。它把胃中的水谷精微运送到身体的各个器官。\n\n脾胃的五行属土，厚德载物，是身体的根本。好好保护脾胃就像农民守着一块土地，种不种，种什么，都不重要，重要的是地还在，地还肥。如果有一天地都没有了，或者土地贫瘠了，那还扯啥？\n\n## 4 心与小肠是两口子\n\n### 午时：11:00-13:00 心经当令\n\n中午就是应该吃得有营养一点儿，心经虽然用不上这些营养，但一会儿接班的小肠经用得上。心经主要负责给心脏补充血液，然后让心脏更好地推动周身的血液运行。\n\n这个时间段，最好能睡一会儿，让心血得到充分的补给。要养心、要静心。\n\n汗为心之液，所以午时运动其实对身体并没有任何好处，此时流汗对心的伤害很大。要睡觉、要安静。\n\n### 未时：13:00-15:00 小肠经当令\n\n小肠经是干吗的呢？它开始对营养和糟粕进行整理和分送，把好东西挑出来输送给脾，供脾运送给全身。\n\n然后，再把脏东西分成液体和渣滓，分送到膀胱和大肠。\n\n## 5 膀胱经的时候尿尿，肾经的时候爱爱\n\n膀胱经和肾经的关系就像一对东家和掌柜，相辅相成。\n\n### 申时：15:00-17:00 膀胱经当令\n\n这个时候膀胱经来上班了，一看，小肠经已经把稀的都分拨给了膀胱。那么问题来了，在膀胱里的都是尿吗？No，那是水液和津液的混合。所以膀胱经要做的第一件事，就是把这两种液体再区分开来。\n\n津液分离出来，继续在身体里流动。那液体呢？也就是尿液，从尿道里排出体外。所以，这个时候不要憋尿哦，否则很容易憋出病来。\n\n因为人体在这个时间段津液最充足，因此比较适合运动。若膀胱有热就会导致膀胱咳，就是一咳嗽就遗尿。另外膀胱经是人体最大的一个经络，从脚丫子一直沿着后背，经过后脑勺走到眼睛。癫痫、头痛、目疾、鼻病、遗尿、小便不利及下肢后侧部位的疼痛等病症，都和膀胱经有关，别以为人家就是管排尿的。\n\n### 酉时：17:00-19:00 肾经当令\n\n很多工作压力大、劳累过度的人在这段时间就会莫名其妙地发低烧，而且常年如此，但过了这个时候烧就退了，很奇怪。其实这就是肾气虚的表现，是肾经在用发烧来提醒你。\n\n肾藏精，其中先天之精是父母给的，后天之精是靠吸收脾运送过来的水谷精微转化而成。所以脾虚的人一定肾气虚，因为肾没有营养进行精气的转化了。\n\n肾经上班的时间确实最适合Make Love了，往往很容易受孕。\n\n## 6 你不知道的两根经\n\n### 戌时：19:00-21:00 心包经当令\n\n心包是心的保护组织，又是气血通道。心包经晚上7点上班，9点下班。专门负责清除心脏周围的外邪，使心脏处于完好状态。此时最宜步行，可增强心功能。同时一定要保持心情舒畅，放松心情，释放压力。但这个时候也是人阴气最重的时候，所以并不适宜进行剧烈运动。很多人都会在晚饭后打球或者健身，其实这不但对身体没有好处，反而会伤身。因为人在夜晚阳气需要收敛，剧烈的运动会发散阳气，导致失眠。\n\n### 亥时：21:00-23:00 三焦经当令\n\n三焦经具有主持诸气、疏通水道的作用。三焦通百脉，人如果在此时睡觉，那美容养颜不用烦了。\n\n## 总结\n凡事都有因果，健康也一样。坦然面对和接受结果，因为没有任何疾病与苦难是从天而降的，不过是我们之前不经意种下的种子发了芽。\n\n","slug":"12-jinglu","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a9f00cq5gqoqno0x1gj"},{"title":"IPython 使用 virtualenv 环境","date":"2018-04-23T17:20:19.000Z","_content":"\nIPython 默认是不会使用当前环境的虚拟环境的，不过可以变通一下通过先打开 python shell 交互界面，然后倒入 IPython 模块的形式在达到目的。\n<!-- more -->\n\n我们直接修改 shell 命令别称\n\n```bash\nalias ipy=\"python -c 'import IPython; IPython.terminal.ipapp.launch_new_instance()'\"\n```\n\n- [Calling IPython from a virtualenv](https://stackoverflow.com/questions/20327621/calling-ipython-from-a-virtualenv)\n","source":"_posts/2018-04-23-ipython-use-virtualenv.md","raw":"---\ntitle: IPython 使用 virtualenv 环境\ndate: 2018-04-23 17:20:19\ntags: [python]\n---\n\nIPython 默认是不会使用当前环境的虚拟环境的，不过可以变通一下通过先打开 python shell 交互界面，然后倒入 IPython 模块的形式在达到目的。\n<!-- more -->\n\n我们直接修改 shell 命令别称\n\n```bash\nalias ipy=\"python -c 'import IPython; IPython.terminal.ipapp.launch_new_instance()'\"\n```\n\n- [Calling IPython from a virtualenv](https://stackoverflow.com/questions/20327621/calling-ipython-from-a-virtualenv)\n","slug":"ipython-use-virtualenv","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a9g00cs5gqohma3b1vd"},{"title":"Python json 模块","date":"2018-04-24T16:12:08.000Z","_content":"\nPython 中使用 json 模块来处理 JSON 数据的编码和解码\n<!-- more -->\n\n导入库 `import json`\n\n- `json.dumps`：将 Python 对象编码成 JSON 字符串\n- `json.loads`：将已编码的 JSON 字符串解码为 Python 对象\n\n## loads\n\n**语法**\n\n```python\njson.loads(s[, encoding[, cls[, object_hook[, parse_float[, parse_int[, parse_constant[, object_pairs_hook[, **kw]]]]]]]])\n```\n\n**实例**\n\n```python\n>>> import json\n>>> json.loads('[\"one\", 42, true, null]')\n['one', 42, True, None]\n```\n\n## dumps\n\n**语法**\n\n```python\njson.dumps(obj, skipkeys=False, ensure_ascii=True, check_circular=True, allow_nan=True, cls=None, indent=None, separators=None, encoding=\"utf-8\", default=None, sort_keys=False, **kw)\n```\n\n**实例**\n\n```python\n>>> json.dumps(['one', 42, True, None, '中国'])\n'[\"one\", 42, true, null, \"\\\\u4e2d\\\\u56fd\"]'\n```\n\n**禁止 ASCII 转码**\n\n```python\n>>> json.dumps(['one', 42, True, None, '中国'], ensure_ascii=False)\n'[\"one\", 42, true, null, \"中国\"]'\n```\n\n**格式化**\n\n```python\n>>> print(json.dumps({'a': 'wxnacy', 'b': 7}, sort_keys=True, indent=4, separators=(',', ': ')))\n{\n    \"a\": \"wxnacy\",\n    \"b\": 7\n}\n```\n\n- [Python JSON](http://www.runoob.com/python/python-json.html)\n","source":"_posts/2018-04-24-python-json.md","raw":"---\ntitle: Python json 模块\ndate: 2018-04-24 16:12:08\ntags: [python]\n---\n\nPython 中使用 json 模块来处理 JSON 数据的编码和解码\n<!-- more -->\n\n导入库 `import json`\n\n- `json.dumps`：将 Python 对象编码成 JSON 字符串\n- `json.loads`：将已编码的 JSON 字符串解码为 Python 对象\n\n## loads\n\n**语法**\n\n```python\njson.loads(s[, encoding[, cls[, object_hook[, parse_float[, parse_int[, parse_constant[, object_pairs_hook[, **kw]]]]]]]])\n```\n\n**实例**\n\n```python\n>>> import json\n>>> json.loads('[\"one\", 42, true, null]')\n['one', 42, True, None]\n```\n\n## dumps\n\n**语法**\n\n```python\njson.dumps(obj, skipkeys=False, ensure_ascii=True, check_circular=True, allow_nan=True, cls=None, indent=None, separators=None, encoding=\"utf-8\", default=None, sort_keys=False, **kw)\n```\n\n**实例**\n\n```python\n>>> json.dumps(['one', 42, True, None, '中国'])\n'[\"one\", 42, true, null, \"\\\\u4e2d\\\\u56fd\"]'\n```\n\n**禁止 ASCII 转码**\n\n```python\n>>> json.dumps(['one', 42, True, None, '中国'], ensure_ascii=False)\n'[\"one\", 42, true, null, \"中国\"]'\n```\n\n**格式化**\n\n```python\n>>> print(json.dumps({'a': 'wxnacy', 'b': 7}, sort_keys=True, indent=4, separators=(',', ': ')))\n{\n    \"a\": \"wxnacy\",\n    \"b\": 7\n}\n```\n\n- [Python JSON](http://www.runoob.com/python/python-json.html)\n","slug":"python-json","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2a9h00cu5gqobr72p8jw"},{"title":"使用 CDN 加载的方式运行 Ace","date":"2018-04-29T16:54:11.000Z","_content":"\n一个使用 cdn 加载的方式运行 ace 组件。\n\n<!-- more --><!-- toc -->\n\n## 使用\n\n**预览**\n\n![ace](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/upload/1524992481.924261-ace.png)\n\n**Demo**\n```html\n<body>\n    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/ace.js\"></script>\n    <textarea name=\"my-xml-editor\" data-editor=\"html\" data-gutter=\"1\" rows=\"20\">\n<html>\n    <body>\n        Hello World\n    </body>\n</html>\n    </textarea>\n\n<script>\n\n    $(function() {\n        $('textarea[data-editor]').each(function() {\n            var textarea = $(this);\n            var mode = textarea.data('editor');\n            var editDiv = $('<div>', {\n                position: 'absolute',\n                width: textarea.width(),\n                height: textarea.height(),\n                'class': textarea.attr('class')\n            }).insertBefore(textarea);\n            textarea.css('display', 'none');\n            var editor = ace.edit(editDiv[0]);\n            editor.renderer.setShowGutter(textarea.data('gutter'));\n            editor.getSession().setValue(textarea.val());\n            editor.getSession().setMode(\"ace/mode/\" + mode);\n            editor.setTheme(\"ace/theme/idle_fingers\");\n\n            // copy back to textarea on form submit...\n            textarea.closest('form').submit(function() {\n                textarea.val(editor.getSession().getValue());\n            })\n        });\n    });\n</script>\n</body>\n```\n\n[试一试](/run/?id=68719486928)\n\n## 美化代码\n\n需要下载 [beautify.js](https://raw.githubusercontent.com/ajaxorg/ace/master/lib/ace/ext/beautify.js) 扩展\n\n```javascript\nvar beautify = ace.require(\"ace/ext/beautify\"); // get reference to extension\nvar editor = ace.edit(\"editor\"); // get reference to editor\nbeautify.beautify(editor.session);\n```\n\n- [api](https://ace.c9.io/#nav=api&api=ace)\n- [github](https://github.com/ajaxorg/ace)\n","source":"_posts/2018-04-29-cdn-use-ace.md","raw":"---\ntitle: 使用 CDN 加载的方式运行 Ace\ndate: 2018-04-29 16:54:11\ntags: [html, javascript]\n---\n\n一个使用 cdn 加载的方式运行 ace 组件。\n\n<!-- more --><!-- toc -->\n\n## 使用\n\n**预览**\n\n![ace](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/upload/1524992481.924261-ace.png)\n\n**Demo**\n```html\n<body>\n    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/ace.js\"></script>\n    <textarea name=\"my-xml-editor\" data-editor=\"html\" data-gutter=\"1\" rows=\"20\">\n<html>\n    <body>\n        Hello World\n    </body>\n</html>\n    </textarea>\n\n<script>\n\n    $(function() {\n        $('textarea[data-editor]').each(function() {\n            var textarea = $(this);\n            var mode = textarea.data('editor');\n            var editDiv = $('<div>', {\n                position: 'absolute',\n                width: textarea.width(),\n                height: textarea.height(),\n                'class': textarea.attr('class')\n            }).insertBefore(textarea);\n            textarea.css('display', 'none');\n            var editor = ace.edit(editDiv[0]);\n            editor.renderer.setShowGutter(textarea.data('gutter'));\n            editor.getSession().setValue(textarea.val());\n            editor.getSession().setMode(\"ace/mode/\" + mode);\n            editor.setTheme(\"ace/theme/idle_fingers\");\n\n            // copy back to textarea on form submit...\n            textarea.closest('form').submit(function() {\n                textarea.val(editor.getSession().getValue());\n            })\n        });\n    });\n</script>\n</body>\n```\n\n[试一试](/run/?id=68719486928)\n\n## 美化代码\n\n需要下载 [beautify.js](https://raw.githubusercontent.com/ajaxorg/ace/master/lib/ace/ext/beautify.js) 扩展\n\n```javascript\nvar beautify = ace.require(\"ace/ext/beautify\"); // get reference to extension\nvar editor = ace.edit(\"editor\"); // get reference to editor\nbeautify.beautify(editor.session);\n```\n\n- [api](https://ace.c9.io/#nav=api&api=ace)\n- [github](https://github.com/ajaxorg/ace)\n","slug":"cdn-use-ace","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ac200eg5gqoqnkhaqgx"},{"title":"HTML DOM target 属性","date":"2018-05-01T20:03:58.000Z","_content":"\nDOM 中 target 共有四种属性\n<!-- more -->\n- `_blank` 在一个新的未命名的窗口载入文档\n- `_self` 在相同的框架或窗口中载入目标文档\n- `_parent` 把文档载入父窗口或包含了超链接引用的框架的框架集\n- `_top` 把文档载入包含该超链接的窗口,取代任何当前正在窗口中显示的框架\n\n[试一试](/run/?id=68719487583)\n\n**动态设置**\n\n```javascript\nvar target = document.getElementById('target');\ntarget.href = \"https://baidu.com\"\ntarget.target = '_blank'\n```\n","source":"_posts/2018-05-01-dom-target.md","raw":"---\ntitle: HTML DOM target 属性\ndate: 2018-05-01 20:03:58\ntags: [html]\n---\n\nDOM 中 target 共有四种属性\n<!-- more -->\n- `_blank` 在一个新的未命名的窗口载入文档\n- `_self` 在相同的框架或窗口中载入目标文档\n- `_parent` 把文档载入父窗口或包含了超链接引用的框架的框架集\n- `_top` 把文档载入包含该超链接的窗口,取代任何当前正在窗口中显示的框架\n\n[试一试](/run/?id=68719487583)\n\n**动态设置**\n\n```javascript\nvar target = document.getElementById('target');\ntarget.href = \"https://baidu.com\"\ntarget.target = '_blank'\n```\n","slug":"dom-target","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ac300eh5gqoybbg7av3"},{"title":"HTML import 加载模块","date":"2018-04-28T16:03:55.000Z","_content":"\n在写静态页面的时候动态加载模块一直是个问题，以前只能用 `iframe, ajax` 等动态加载，这样整体的加载效果很差，最近才发现 HTML 中可以使用 `import` 导入。\n\n<!-- more --><!-- toc -->\n## 使用\n\n```html\n<head>\n  <link rel=\"import\" href=\"/path/to/imports/stuff.html\">\n</head>\n```\n\n`link` 中 `href` 中的导入地址必须允许跨域。\n\n> 浏览器的网络协议栈(network stack)会对访问相同 URL 的请求自动去重。这意味着从同一个 URL 导入的内容只会被获取一次。无论这个地址被导入多少次，最终它将只执行一次。\n\n## 检查是否可用\n\n```java\nfunction supportsImports() {\n  return 'import' in document.createElement('link');\n}\n\nif (supportsImports()) {\n  // 支持导入!\n} else {\n  // 使用其他的库来加载文件。\n}\n```\n\n## link.import\n\n若想访问导入的内容，需要使用 link 元素的 import 属性：\n\n```java\nvar content = document.querySelector('link[rel=\"import\"]').import;\n```\n\n在下面几种情况下，link.import 值为 null ：\n- 浏览器不支持 HTML 导入。\n- <link> 没有 rel=\"import\"。\n- <link> 没有被加入到 DOM 中。\n- <link> 从 DOM 中被移除。\n- 资源没有开启 CORS。\n\n### 实例\n\n假设 warnings.html 包含如下内容：\n\n```html\n<div class=\"warning\">\n  <style scoped>\n    h3 {\n      color: red;\n    }\n  </style>\n  <h3>Warning!</h3>\n  <p>This page is under construction</p>\n</div>\n\n<div class=\"outdated\">\n  <h3>Heads up!</h3>\n  <p>This content may be out of date</p>\n</div>\n```\n\n导入页面中\n\n```html\n<head>\n  <link rel=\"import\" href=\"warnings.html\">\n</head>\n<body>\n  ...\n  <script>\n    var link = document.querySelector('link[rel=\"import\"]');\n    var content = link.import;\n\n    // 从 warning.html 的文档中获取 DOM。\n    var el = content.querySelector('.warning');\n\n    document.body.appendChild(el.cloneNode(true));\n  </script>\n</body>\n```\n\n## 包含模板\n\nHTML Template 元素是 HTML 导入的好搭档。<template> 特别适合于为需要导入的应用搭建必要的标记。将内容包裹在一个 <template> 元素中还为你提供了延迟加载内容的好处。也就是说，在 template 元素加入到 DOM 之前，它包含的脚本不会执行。\n\n**import.html**\n\n```html\n<template>\n  <h1>Hello World!</h1>\n  <img src=\"world.png\"> <!-- 只有当模板生效后才会去请求图片 -->\n  <script>alert(\"Executed when the template is activated.\");</script>\n</template>\n```\n\n**index.html**\n\n```html\n<head>\n  <link rel=\"import\" href=\"import.html\">\n</head>\n<body>\n  <div id=\"container\"></div>\n  <script>\n    var link = document.querySelector('link[rel=\"import\"]');\n\n    // 从导入中复制 <template>。\n    var template = link.import.querySelector('template');\n    var content = template.content.cloneNode(true)\n\n    document.querySelector('#container').appendChild(content);\n  </script>\n</body>\n```\n\n- [HTML imports](https://www.html5rocks.com/zh/tutorials/webcomponents/imports/)\n","source":"_posts/2018-04-28-html-import.md","raw":"---\ntitle: HTML import 加载模块\ndate: 2018-04-28 16:03:55\ntags: [html, javascript]\n---\n\n在写静态页面的时候动态加载模块一直是个问题，以前只能用 `iframe, ajax` 等动态加载，这样整体的加载效果很差，最近才发现 HTML 中可以使用 `import` 导入。\n\n<!-- more --><!-- toc -->\n## 使用\n\n```html\n<head>\n  <link rel=\"import\" href=\"/path/to/imports/stuff.html\">\n</head>\n```\n\n`link` 中 `href` 中的导入地址必须允许跨域。\n\n> 浏览器的网络协议栈(network stack)会对访问相同 URL 的请求自动去重。这意味着从同一个 URL 导入的内容只会被获取一次。无论这个地址被导入多少次，最终它将只执行一次。\n\n## 检查是否可用\n\n```java\nfunction supportsImports() {\n  return 'import' in document.createElement('link');\n}\n\nif (supportsImports()) {\n  // 支持导入!\n} else {\n  // 使用其他的库来加载文件。\n}\n```\n\n## link.import\n\n若想访问导入的内容，需要使用 link 元素的 import 属性：\n\n```java\nvar content = document.querySelector('link[rel=\"import\"]').import;\n```\n\n在下面几种情况下，link.import 值为 null ：\n- 浏览器不支持 HTML 导入。\n- <link> 没有 rel=\"import\"。\n- <link> 没有被加入到 DOM 中。\n- <link> 从 DOM 中被移除。\n- 资源没有开启 CORS。\n\n### 实例\n\n假设 warnings.html 包含如下内容：\n\n```html\n<div class=\"warning\">\n  <style scoped>\n    h3 {\n      color: red;\n    }\n  </style>\n  <h3>Warning!</h3>\n  <p>This page is under construction</p>\n</div>\n\n<div class=\"outdated\">\n  <h3>Heads up!</h3>\n  <p>This content may be out of date</p>\n</div>\n```\n\n导入页面中\n\n```html\n<head>\n  <link rel=\"import\" href=\"warnings.html\">\n</head>\n<body>\n  ...\n  <script>\n    var link = document.querySelector('link[rel=\"import\"]');\n    var content = link.import;\n\n    // 从 warning.html 的文档中获取 DOM。\n    var el = content.querySelector('.warning');\n\n    document.body.appendChild(el.cloneNode(true));\n  </script>\n</body>\n```\n\n## 包含模板\n\nHTML Template 元素是 HTML 导入的好搭档。<template> 特别适合于为需要导入的应用搭建必要的标记。将内容包裹在一个 <template> 元素中还为你提供了延迟加载内容的好处。也就是说，在 template 元素加入到 DOM 之前，它包含的脚本不会执行。\n\n**import.html**\n\n```html\n<template>\n  <h1>Hello World!</h1>\n  <img src=\"world.png\"> <!-- 只有当模板生效后才会去请求图片 -->\n  <script>alert(\"Executed when the template is activated.\");</script>\n</template>\n```\n\n**index.html**\n\n```html\n<head>\n  <link rel=\"import\" href=\"import.html\">\n</head>\n<body>\n  <div id=\"container\"></div>\n  <script>\n    var link = document.querySelector('link[rel=\"import\"]');\n\n    // 从导入中复制 <template>。\n    var template = link.import.querySelector('template');\n    var content = template.content.cloneNode(true)\n\n    document.querySelector('#container').appendChild(content);\n  </script>\n</body>\n```\n\n- [HTML imports](https://www.html5rocks.com/zh/tutorials/webcomponents/imports/)\n","slug":"html-import","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ac500ej5gqo4ms8q5z2"},{"title":"aliyun 媒体转码报错 Can not find endpoint to access","date":"2018-04-25T11:25:47.000Z","_content":"\n\n在用阿里云没媒体转码功能时报了半天的错误\n\n<!-- more --><!-- toc -->\n\n```bash\nCan not find endpoint to access\n```\n\n程序里用的是 `oss-cn-beijing` 忽略了是 oss 专用的，换成 `cn-beijing` 则成功。\n\n","source":"_posts/2018-04-25-aliyun-acs-endpoint-error.md","raw":"---\ntitle: aliyun 媒体转码报错 Can not find endpoint to access\ntags:\n  - 开发\ndate: 2018-04-25 11:25:47\n---\n\n\n在用阿里云没媒体转码功能时报了半天的错误\n\n<!-- more --><!-- toc -->\n\n```bash\nCan not find endpoint to access\n```\n\n程序里用的是 `oss-cn-beijing` 忽略了是 oss 专用的，换成 `cn-beijing` 则成功。\n\n","slug":"aliyun-acs-endpoint-error","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ac600ek5gqo0fbpjrnk"},{"title":"JavaScript 处理 Cookie","date":"2018-04-30T10:43:49.000Z","_content":"\n\nJS 处理 Cookie 数据\n\n<!-- more --><!-- toc -->\n\n## 创建 Cookie\n\n```javascript\ndocument.cookie=\"username=John Doe\";\n\n// 您还可以为 cookie 添加一个过期时间（以 UTC 或 GMT 时间）。默认情况下，cookie 在浏览器关闭时删除：\ndocument.cookie=\"username=John Doe; expires=Thu, 18 Dec 2013 12:00:00 GMT\";\n\n// 您可以使用 path 参数告诉浏览器 cookie 的路径。默认情况下，cookie 属于当前页面。\ndocument.cookie=\"username=John Doe; expires=Thu, 18 Dec 2013 12:00:00 GMT; path=/\";\n```\n\n**封装函数**\n\n```javascript\nfunction setCookie(cname,cvalue,exdays) {\n  var d = new Date();\n  d.setTime(d.getTime()+(exdays*24*60*60*1000));\n  var expires = \"expires=\"+d.toGMTString();\n  document.cookie = cname + \"=\" + cvalue + \"; \" + expires;\n}\n```\n\n## 获取 Cookie\n\n```java\nvar x = document.cookie;\n// x 格式为 cookie1=value; cookie2=value;\n```\n\n**封装函数**\n\n```javascript\nfunction setCookie(cname,cvalue,exdays) {\n  var d = new Date();\n  d.setTime(d.getTime()+(exdays*24*60*60*1000));\n  var expires = \"expires=\"+d.toGMTString();\n  document.cookie = cname + \"=\" + cvalue + \"; \" + expires;\n}\n```\n\n- [JavaScript Cookie](http://www.runoob.com/js/js-cookies.html)\n","source":"_posts/2018-04-30-js-cookie.md","raw":"---\ntitle: JavaScript 处理 Cookie\ntags:\n  - javascript\ndate: 2018-04-30 10:43:49\n---\n\n\nJS 处理 Cookie 数据\n\n<!-- more --><!-- toc -->\n\n## 创建 Cookie\n\n```javascript\ndocument.cookie=\"username=John Doe\";\n\n// 您还可以为 cookie 添加一个过期时间（以 UTC 或 GMT 时间）。默认情况下，cookie 在浏览器关闭时删除：\ndocument.cookie=\"username=John Doe; expires=Thu, 18 Dec 2013 12:00:00 GMT\";\n\n// 您可以使用 path 参数告诉浏览器 cookie 的路径。默认情况下，cookie 属于当前页面。\ndocument.cookie=\"username=John Doe; expires=Thu, 18 Dec 2013 12:00:00 GMT; path=/\";\n```\n\n**封装函数**\n\n```javascript\nfunction setCookie(cname,cvalue,exdays) {\n  var d = new Date();\n  d.setTime(d.getTime()+(exdays*24*60*60*1000));\n  var expires = \"expires=\"+d.toGMTString();\n  document.cookie = cname + \"=\" + cvalue + \"; \" + expires;\n}\n```\n\n## 获取 Cookie\n\n```java\nvar x = document.cookie;\n// x 格式为 cookie1=value; cookie2=value;\n```\n\n**封装函数**\n\n```javascript\nfunction setCookie(cname,cvalue,exdays) {\n  var d = new Date();\n  d.setTime(d.getTime()+(exdays*24*60*60*1000));\n  var expires = \"expires=\"+d.toGMTString();\n  document.cookie = cname + \"=\" + cvalue + \"; \" + expires;\n}\n```\n\n- [JavaScript Cookie](http://www.runoob.com/js/js-cookies.html)\n","slug":"js-cookie","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ac700el5gqoiw7twbuv"},{"title":"JavaScript 操作 Select DOM","date":"2018-05-03T09:35:53.000Z","_content":"\n\nJavascript 操作 Select DOM 的一些方法。\n\n<!-- more --><!-- toc -->\n\n```html\n<select id=\"defaultSelect\">\n    <option value=\"GET\">GET</option>\n    <option value=\"POST\" selected>POST</option>\n    <option value=\"PUT\">PUT</option>\n</select>\n```\n\n**获取 Select DOM**\n```javascript\nvar objSelect = document.getElementById('defaultSelect');\n```\n\n## 属性操作\n\n```javascript\nobjSelect.value = 'GET'                         // 设置值\nobjSelect.value                                 // 获取值\nobjSelect.selectedIndex                         // 获取索引\nobjSelect.options[selectedIndex].text           // 获取选中text\nobjSelect.options.length = 0;                   // 清空\n```\n\n## 判断是否有某个值\n\n```javascript\nfunction isExitItem(objSelect, objItemValue) {\n    var isExit = false;\n    for (var i = 0; i < objSelect.options.length; i++) {\n        if (objSelect.options[i].value == objItemValue) {\n            isExit = true;\n            break;\n        }\n    }\n    return isExit;\n}\n```\n\n## 添加 Option\n\n```javascript\nfunction addItemToSelect(objSelect, objItemText, objItemValue) {\n    if (isExitItem(objSelect, objItemValue)) {\n        alert(\"该 Item 的 Value 值已经存在\");\n    } else {\n        var varItem = new Option(objItemText, objItemValue);\n        objSelect.options.add(varItem);\n        alert(\"成功加入\");\n    }\n}\n```\n\n## 修改 text 值\n\n```javascript\nfunction updateItemTextForSelect(objSelect, objItemText, objItemValue) {\n    //判断是否存在\n    if (isExitItem(objSelect, objItemValue)) {\n        for (var i = 0; i < objSelect.options.length; i++) {\n            if (objSelect.options[i].value == objItemValue) {\n                objSelect.options[i].text = objItemText;\n                break;\n            }\n        }\n        alert(\"成功修改\");\n    } else {\n        alert(\"该select中 不存在该项\");\n    }\n}\n```\n\n## 删除 Option\n\n```javascript\nfunction removeItemFromSelect(objSelect, objItemValue) {\n    //判断是否存在\n    if (isExitItem(objSelect, objItemValue)) {\n        for (var i = 0; i < objSelect.options.length; i++) {\n            if (objSelect.options[i].value == objItemValue) {\n                objSelect.options.remove(i);\n                break;\n            }\n        }\n        alert(\"成功删除\");\n    } else {\n        alert(\"该select中 不存在该项\");\n    }\n}\n```\n\n## 根据 Text 选中 item\n\n```javascript\nfunction selectItemByText(objSelect, objItemText) {\n    //判断是否存在\n    var isExit = false;\n    for (var i = 0; i < objSelect.options.length; i++) {\n        if (objSelect.options[i].text == objItemText) {\n            objSelect.options[i].selected = true;\n            isExit = true;\n            break;\n        }\n    }\n    //Show出结果\n    if (isExit) {\n        alert(\"成功选中\");\n    } else {\n        alert(\"该select中 不存在该项\");\n    }\n}\n```\n\n[试一试](/run/?id=68719487623)\n\n","source":"_posts/2018-05-03-js-select-dom.md","raw":"---\ntitle: JavaScript 操作 Select DOM\ntags:\n  - javascript\ndate: 2018-05-03 09:35:53\n---\n\n\nJavascript 操作 Select DOM 的一些方法。\n\n<!-- more --><!-- toc -->\n\n```html\n<select id=\"defaultSelect\">\n    <option value=\"GET\">GET</option>\n    <option value=\"POST\" selected>POST</option>\n    <option value=\"PUT\">PUT</option>\n</select>\n```\n\n**获取 Select DOM**\n```javascript\nvar objSelect = document.getElementById('defaultSelect');\n```\n\n## 属性操作\n\n```javascript\nobjSelect.value = 'GET'                         // 设置值\nobjSelect.value                                 // 获取值\nobjSelect.selectedIndex                         // 获取索引\nobjSelect.options[selectedIndex].text           // 获取选中text\nobjSelect.options.length = 0;                   // 清空\n```\n\n## 判断是否有某个值\n\n```javascript\nfunction isExitItem(objSelect, objItemValue) {\n    var isExit = false;\n    for (var i = 0; i < objSelect.options.length; i++) {\n        if (objSelect.options[i].value == objItemValue) {\n            isExit = true;\n            break;\n        }\n    }\n    return isExit;\n}\n```\n\n## 添加 Option\n\n```javascript\nfunction addItemToSelect(objSelect, objItemText, objItemValue) {\n    if (isExitItem(objSelect, objItemValue)) {\n        alert(\"该 Item 的 Value 值已经存在\");\n    } else {\n        var varItem = new Option(objItemText, objItemValue);\n        objSelect.options.add(varItem);\n        alert(\"成功加入\");\n    }\n}\n```\n\n## 修改 text 值\n\n```javascript\nfunction updateItemTextForSelect(objSelect, objItemText, objItemValue) {\n    //判断是否存在\n    if (isExitItem(objSelect, objItemValue)) {\n        for (var i = 0; i < objSelect.options.length; i++) {\n            if (objSelect.options[i].value == objItemValue) {\n                objSelect.options[i].text = objItemText;\n                break;\n            }\n        }\n        alert(\"成功修改\");\n    } else {\n        alert(\"该select中 不存在该项\");\n    }\n}\n```\n\n## 删除 Option\n\n```javascript\nfunction removeItemFromSelect(objSelect, objItemValue) {\n    //判断是否存在\n    if (isExitItem(objSelect, objItemValue)) {\n        for (var i = 0; i < objSelect.options.length; i++) {\n            if (objSelect.options[i].value == objItemValue) {\n                objSelect.options.remove(i);\n                break;\n            }\n        }\n        alert(\"成功删除\");\n    } else {\n        alert(\"该select中 不存在该项\");\n    }\n}\n```\n\n## 根据 Text 选中 item\n\n```javascript\nfunction selectItemByText(objSelect, objItemText) {\n    //判断是否存在\n    var isExit = false;\n    for (var i = 0; i < objSelect.options.length; i++) {\n        if (objSelect.options[i].text == objItemText) {\n            objSelect.options[i].selected = true;\n            isExit = true;\n            break;\n        }\n    }\n    //Show出结果\n    if (isExit) {\n        alert(\"成功选中\");\n    } else {\n        alert(\"该select中 不存在该项\");\n    }\n}\n```\n\n[试一试](/run/?id=68719487623)\n\n","slug":"js-select-dom","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ac900eo5gqonuim17dw"},{"title":"JavaScript JSON 使用","date":"2018-05-06T20:49:18.000Z","_content":"\nJSON 在 JavaScript 中的使用\n\n<!-- more --><!-- toc -->\n\n## parse\n\n```java\n> JSON.parse('{\"a\": 1}')\n{ a: 1 }\n```\n\n## stringify\n\n```java\n> var foo = {\"a\": 1, \"b\": 2, \"c\": 3, \"d\": { \"e\": 4}, \"e\": 5}\nundefined\n> JSON.stringify(foo)\n'{\"a\":1,\"b\":2,\"c\":3,\"d\":{\"e\":4},\"e\":5}'\n```\n\n**美化**\n\n```java\n> console.log(JSON.stringify(foo, [\"a\", \"d\", \"e\"], 4))\n{\n    \"a\": 1,\n    \"d\": {\n        \"e\": 4\n    },\n    \"e\": 5\n}\n```\n\n### 过滤\n\n**数组**\n\n```java\n> JSON.stringify(foo, [\"a\", \"d\", \"e\"])\n'{\"a\":1,\"d\":{\"e\":4},\"e\":5}'\n```\n\n**方法**\n\n- 返回undefined表示忽略该属性；\n- 返回字符串，布尔值或则数字将会被stringify；\n- 返回对象将会触发递归调用知道遇到基本类型的属性；\n- 返回无法stringify的值将会被忽略；\n\n```java\nlet baz = {\n  a : 1,\n  b : { c : 2 }\n};\n\n// 返回大于1的值\nlet replacer = function (key, value) {\n    if(typeof === 'number') {\n        return value > 1 ? value: undefined;\n    }\n    return value;\n};\n\nJSON.stringify(baz, replacer);\n// \"{\"b\":{\"c\":2}}\"\n```\n\n\n## toJSON\n\n```java\nfunction Person (first, last) {\n    this.firstName = first;\n    this.last = last;\n}\n\nPerson.prototype.process = function () {\n   return this.firstName + ' ' +\n          this.lastName;\n};\n\nlet ade = new Person('Ade', 'P');\nJSON.stringify(ade);\n// \"{\"firstName\":\"Ade\",\"last\":\"P\"}\"\n```\n\n- [你所不知道的JSON.stringify](https://blog.fundebug.com/2017/08/17/what-you-didnt-know%20about-json-stringify/)\n- [JSON](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON)\n","source":"_posts/2018-05-06-js-json.md","raw":"---\ntitle: JavaScript JSON 使用\ndate: 2018-05-06 20:49:18\ntags: [javascript]\n---\n\nJSON 在 JavaScript 中的使用\n\n<!-- more --><!-- toc -->\n\n## parse\n\n```java\n> JSON.parse('{\"a\": 1}')\n{ a: 1 }\n```\n\n## stringify\n\n```java\n> var foo = {\"a\": 1, \"b\": 2, \"c\": 3, \"d\": { \"e\": 4}, \"e\": 5}\nundefined\n> JSON.stringify(foo)\n'{\"a\":1,\"b\":2,\"c\":3,\"d\":{\"e\":4},\"e\":5}'\n```\n\n**美化**\n\n```java\n> console.log(JSON.stringify(foo, [\"a\", \"d\", \"e\"], 4))\n{\n    \"a\": 1,\n    \"d\": {\n        \"e\": 4\n    },\n    \"e\": 5\n}\n```\n\n### 过滤\n\n**数组**\n\n```java\n> JSON.stringify(foo, [\"a\", \"d\", \"e\"])\n'{\"a\":1,\"d\":{\"e\":4},\"e\":5}'\n```\n\n**方法**\n\n- 返回undefined表示忽略该属性；\n- 返回字符串，布尔值或则数字将会被stringify；\n- 返回对象将会触发递归调用知道遇到基本类型的属性；\n- 返回无法stringify的值将会被忽略；\n\n```java\nlet baz = {\n  a : 1,\n  b : { c : 2 }\n};\n\n// 返回大于1的值\nlet replacer = function (key, value) {\n    if(typeof === 'number') {\n        return value > 1 ? value: undefined;\n    }\n    return value;\n};\n\nJSON.stringify(baz, replacer);\n// \"{\"b\":{\"c\":2}}\"\n```\n\n\n## toJSON\n\n```java\nfunction Person (first, last) {\n    this.firstName = first;\n    this.last = last;\n}\n\nPerson.prototype.process = function () {\n   return this.firstName + ' ' +\n          this.lastName;\n};\n\nlet ade = new Person('Ade', 'P');\nJSON.stringify(ade);\n// \"{\"firstName\":\"Ade\",\"last\":\"P\"}\"\n```\n\n- [你所不知道的JSON.stringify](https://blog.fundebug.com/2017/08/17/what-you-didnt-know%20about-json-stringify/)\n- [JSON](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON)\n","slug":"js-json","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aca00eq5gqom56u284r"},{"title":"JavaScript 绑定组合键","date":"2018-05-04T15:13:25.000Z","_content":"\n\n在写[在线编辑](/run/)时需要使用 `ctrl+s` 组合键完成保存的功能，今天总结下用法。\n\n<!-- more --><!-- toc -->\n\n监听 `ctrl+s` 组合键，并自定义功能，其他键位正常使用\n```javascript\ndocument.onkeydown = function(e) {\n  console.log(e);\n  var keyCode = e.keyCode || e.which || e.charCode;\n  var ctrlKey = e.ctrlKey || e.metaKey;\n  if(ctrlKey && keyCode == 83) {\n    e.preventDefault();\n    alert('保存')\n  }\n  return true;\n}\n```\n\n按下 `ctrl+l` 打印 `event` 会有如下结果\n\n```java\naltKey : false\nbubbles : true\ncancelBubble : false\ncancelable : true\ncharCode : 0\ncode : \"KeyL\"\ncomposed : true\nctrlKey : false\ncurrentTarget : null\ndefaultPrevented : false\ndetail : 0\neventPhase : 0\nisComposing : false\nisTrusted : true\nkey : \"l\"\nkeyCode : 76\nlocation : 0\nmetaKey : true\nrepeat : false\nreturnValue : true\nshiftKey : false\nsrcElement : body\ntarget : body\ntimeStamp : 87489.19999999634\ntype : \"keydown\"\nwhich : 76\n```\n\n根据 `altKey, shiftKey, keyCode` 我们还可以完成 `alt, shift` 等组合键的判断。\n\n如果考虑兼容问题，可以直接使用一个开放组件 [jQuery.Hotkeys](https://github.com/jeresig/jquery.hotkeys)\n\n```javascript\n$(document).on('keydown', null, 'ctrl+a', fn);\n```\n","source":"_posts/2018-05-04-js-bind-key.md","raw":"---\ntitle: JavaScript 绑定组合键\ntags:\n  - javascript\ndate: 2018-05-04 15:13:25\n---\n\n\n在写[在线编辑](/run/)时需要使用 `ctrl+s` 组合键完成保存的功能，今天总结下用法。\n\n<!-- more --><!-- toc -->\n\n监听 `ctrl+s` 组合键，并自定义功能，其他键位正常使用\n```javascript\ndocument.onkeydown = function(e) {\n  console.log(e);\n  var keyCode = e.keyCode || e.which || e.charCode;\n  var ctrlKey = e.ctrlKey || e.metaKey;\n  if(ctrlKey && keyCode == 83) {\n    e.preventDefault();\n    alert('保存')\n  }\n  return true;\n}\n```\n\n按下 `ctrl+l` 打印 `event` 会有如下结果\n\n```java\naltKey : false\nbubbles : true\ncancelBubble : false\ncancelable : true\ncharCode : 0\ncode : \"KeyL\"\ncomposed : true\nctrlKey : false\ncurrentTarget : null\ndefaultPrevented : false\ndetail : 0\neventPhase : 0\nisComposing : false\nisTrusted : true\nkey : \"l\"\nkeyCode : 76\nlocation : 0\nmetaKey : true\nrepeat : false\nreturnValue : true\nshiftKey : false\nsrcElement : body\ntarget : body\ntimeStamp : 87489.19999999634\ntype : \"keydown\"\nwhich : 76\n```\n\n根据 `altKey, shiftKey, keyCode` 我们还可以完成 `alt, shift` 等组合键的判断。\n\n如果考虑兼容问题，可以直接使用一个开放组件 [jQuery.Hotkeys](https://github.com/jeresig/jquery.hotkeys)\n\n```javascript\n$(document).on('keydown', null, 'ctrl+a', fn);\n```\n","slug":"js-bind-key","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2acc00et5gqo1e6jv1nz"},{"title":"整理 cdn 库","date":"2018-05-02T15:25:04.000Z","_content":"\n\n收集些 cdn 库\n\n<!-- more --><!-- toc -->\n\n- [cdnjs](https://cdnjs.com/)\n- [Google Hosted Libraries](https://developers.google.com/speed/libraries/)\n- [Staticfile CDN](https://www.staticfile.org/)\n- [UNPKG](https://unpkg.com/#/)\n\n```html\n<link rel=\"stylesheet\" href=\"https://cdn.bootcss.com/bootstrap/4.0.0/css/bootstrap.min.css\">\n\n\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/ace.js\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.5/require.min.js\" ></script>\n<script src=\"https://cdn.bootcss.com/jquery/3.2.1/jquery.slim.min.js\" ></script>\n<script src=\"https://cdn.bootcss.com/popper.js/1.12.9/umd/popper.min.js\"></script>\n<script src=\"https://cdn.bootcss.com/bootstrap/4.0.0/js/bootstrap.min.js\"></script>\n```\n\n**CentOS 仓库**\n\n```bash\nhttp://mirror.centos.org/centos/7/extras/x86_64/Packages/\n```\n\n**rpmfind**\n\n```bash\nhttps://rpmfind.net/linux/rpm2html/search.php\n```\n\n**Docker 仓库**\n\n```bash\nhttps://download.docker.com/linux/centos/7/x86_64/stable/Packages/\n```\n\n**Docker deb**\n\n```bash\nhttps://download.docker.com/linux/\n```\n\n**vagrant boxes**\n\n```bash\nhttps://app.vagrantup.com/boxes/search\n```\n","source":"_posts/2018-05-02-cdn-lib.md","raw":"---\ntitle: 整理 cdn 库\ntags:\n  - 工具\ndate: 2018-05-02 15:25:04\n---\n\n\n收集些 cdn 库\n\n<!-- more --><!-- toc -->\n\n- [cdnjs](https://cdnjs.com/)\n- [Google Hosted Libraries](https://developers.google.com/speed/libraries/)\n- [Staticfile CDN](https://www.staticfile.org/)\n- [UNPKG](https://unpkg.com/#/)\n\n```html\n<link rel=\"stylesheet\" href=\"https://cdn.bootcss.com/bootstrap/4.0.0/css/bootstrap.min.css\">\n\n\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/ace.js\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.5/require.min.js\" ></script>\n<script src=\"https://cdn.bootcss.com/jquery/3.2.1/jquery.slim.min.js\" ></script>\n<script src=\"https://cdn.bootcss.com/popper.js/1.12.9/umd/popper.min.js\"></script>\n<script src=\"https://cdn.bootcss.com/bootstrap/4.0.0/js/bootstrap.min.js\"></script>\n```\n\n**CentOS 仓库**\n\n```bash\nhttp://mirror.centos.org/centos/7/extras/x86_64/Packages/\n```\n\n**rpmfind**\n\n```bash\nhttps://rpmfind.net/linux/rpm2html/search.php\n```\n\n**Docker 仓库**\n\n```bash\nhttps://download.docker.com/linux/centos/7/x86_64/stable/Packages/\n```\n\n**Docker deb**\n\n```bash\nhttps://download.docker.com/linux/\n```\n\n**vagrant boxes**\n\n```bash\nhttps://app.vagrantup.com/boxes/search\n```\n","slug":"cdn-lib","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ace00ev5gqo0xkohia3"},{"title":"LocalStorage 和 SessionStorage","date":"2018-05-05T17:13:32.000Z","_content":"\n> LocalStorage 是一种持久化的存储方式，也就是说如果不手动清除，数据就永远不会过期。SessionStorage 和服务器端使用的session类似，是一种会话级别的缓存，关闭浏览器会数据会被清除。不过有点特别的是它的作用域是窗口级别的，也就是说不同窗口间的sessionStorage数据不能共享的。\n\n<!-- more --><!-- toc -->\n\n## localStorage\n\n它是采用Key - Value的方式存储数据，底层数据接口是sqlite，按域名将数据分别保存到对应数据库文件里。它能保存更大的数据（IE8上是10MB，Chrome是5MB），同时保存的数据不会再发送给服务器，避免带宽浪费。\n\n**属性和方法**\n\n```javascript\nlocalStorage.length             // 获得storage中的个数\nlocalStorage.key(n)             // 获得storage中第n个元素对的键值（第一个元素是0）\nlocalStorage.getItem(key)       // 获取键值key对应的值\nlocalStorage.key                // 获取键值key对应的值\nlocalStorage.setItem(key, value)// 添加数据，键值为key，值为value\nlocalStorage.removeItem(key)    // 移除键值为key的数据\nlocalStorage.clear()            // 清除所有数据\n```\n\n**sessionStorage 与它的用法完全相同**\n\n**缺点**\n\n- localStorage大小限制在500万字符左右，各个浏览器不一致\n- localStorage在隐私模式下不可读取\n- localStorage本质是在读写文件，数据多的话会比较卡（firefox会一次性将数据导入内存，想想就觉得吓人啊）\n- localStorage不能被爬虫爬取，不要用它完全取代URL传参\n\n## sessionStorage和localStorage的区别\n\nsessionStorage用于本地存储一个会话（session）中的数据，这些数据只有在同一个会话中的页面才能访问并且当会话结束后数据也随之销毁。因此sessionStorage不是一种持久化的本地存储，仅仅是会话级别的存储。当用户关闭浏览器窗口后，数据立马会被删除。\n\nlocalStorage用于持久化的本地存储，除非主动删除数据，否则数据是永远不会过期的。第二天、第二周或下一年之后，数据依然可用。\n\n- [Javascript本地存储小结](https://segmentfault.com/a/1190000007506189)\n","source":"_posts/2018-05-05-storage.md","raw":"---\ntitle: LocalStorage 和 SessionStorage\ndate: 2018-05-05 17:13:32\ntags: [javascript, html]\n---\n\n> LocalStorage 是一种持久化的存储方式，也就是说如果不手动清除，数据就永远不会过期。SessionStorage 和服务器端使用的session类似，是一种会话级别的缓存，关闭浏览器会数据会被清除。不过有点特别的是它的作用域是窗口级别的，也就是说不同窗口间的sessionStorage数据不能共享的。\n\n<!-- more --><!-- toc -->\n\n## localStorage\n\n它是采用Key - Value的方式存储数据，底层数据接口是sqlite，按域名将数据分别保存到对应数据库文件里。它能保存更大的数据（IE8上是10MB，Chrome是5MB），同时保存的数据不会再发送给服务器，避免带宽浪费。\n\n**属性和方法**\n\n```javascript\nlocalStorage.length             // 获得storage中的个数\nlocalStorage.key(n)             // 获得storage中第n个元素对的键值（第一个元素是0）\nlocalStorage.getItem(key)       // 获取键值key对应的值\nlocalStorage.key                // 获取键值key对应的值\nlocalStorage.setItem(key, value)// 添加数据，键值为key，值为value\nlocalStorage.removeItem(key)    // 移除键值为key的数据\nlocalStorage.clear()            // 清除所有数据\n```\n\n**sessionStorage 与它的用法完全相同**\n\n**缺点**\n\n- localStorage大小限制在500万字符左右，各个浏览器不一致\n- localStorage在隐私模式下不可读取\n- localStorage本质是在读写文件，数据多的话会比较卡（firefox会一次性将数据导入内存，想想就觉得吓人啊）\n- localStorage不能被爬虫爬取，不要用它完全取代URL传参\n\n## sessionStorage和localStorage的区别\n\nsessionStorage用于本地存储一个会话（session）中的数据，这些数据只有在同一个会话中的页面才能访问并且当会话结束后数据也随之销毁。因此sessionStorage不是一种持久化的本地存储，仅仅是会话级别的存储。当用户关闭浏览器窗口后，数据立马会被删除。\n\nlocalStorage用于持久化的本地存储，除非主动删除数据，否则数据是永远不会过期的。第二天、第二周或下一年之后，数据依然可用。\n\n- [Javascript本地存储小结](https://segmentfault.com/a/1190000007506189)\n","slug":"storage","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2acf00ex5gqoktw4wnba"},{"title":"在 Mac 中使用 tree","date":"2018-05-07T15:27:24.000Z","_content":"\n\n`tree` 命令可以使用树状图解构来展示目录文件信息。\n\n<!-- more --><!-- toc -->\n\n```bash\n> $ tree -a\n.\n├── .vagrant\n│   └── machines\n│       └── default\n│           └── virtualbox\n│               ├── action_provision\n│               ├── action_set_name\n│               ├── creator_uid\n│               ├── id\n│               ├── index_uuid\n│               ├── private_key\n│               ├── synced_folders\n│               └── vagrant_cwd\n└── Vagrantfile\n\n4 directories, 9 files\n```\n\n## 下载\n\n```bash\n$ brew install tree\n```\n\n## 使用\n\n- -a 显示所有文件和目录。\n- -A 使用ASNI绘图字符显示树状图而非以ASCII字符组合。\n- -C 在文件和目录清单加上色彩，便于区分各种类型。\n- -d 显示目录名称而非内容。\n- -D 列出文件或目录的更改时间。\n- -f 在每个文件或目录之前，显示完整的相对路径名称。\n- -F 在执行文件，目录，Socket，符号连接，管道名称名称，各自加上 `*, /, =, @, |` 号。\n- -g 列出文件或目录的所属群组名称，没有对应的名称时，则显示群组识别码。\n- -i 不以阶梯状列出文件或目录名称。\n- -I 不显示符合范本样式的文件或目录名称。\n- -l 如遇到性质为符号连接的目录，直接列出该连接所指向的原始目录。\n- -n 不在文件和目录清单加上色彩。\n- -N 直接列出文件和目录名称，包括控制字符。\n- -p 列出权限标示。\n- -P 只显示符合范本样式的文件或目录名称。\n- -q 用\"?\"号取代控制字符，列出文件和目录名称。\n- -s 列出文件或目录大小。\n- -t 用文件和目录的更改时间排序。\n- -u 列出文件或目录的拥有者名称，没有对应的名称时，则显示用户识别码。\n- -x 将范围局限在现行的文件系统中，若指定目录下的某些子目录，其存放于另一个文件系统上，则将该子目录予以排除在寻找范围外。\n\n## 原理\n\n使用 `find` 命令即可达到如上效果\n\n```bash\n$ find . -print | sed -e 's;[^/]*/;|____;g;s;____|; |;g'\n```\n","source":"_posts/2018-05-07-tree.md","raw":"---\ntitle: 在 Mac 中使用 tree\ndate: 2018-05-07 15:27:24\ntags: [mac, linux]\n---\n\n\n`tree` 命令可以使用树状图解构来展示目录文件信息。\n\n<!-- more --><!-- toc -->\n\n```bash\n> $ tree -a\n.\n├── .vagrant\n│   └── machines\n│       └── default\n│           └── virtualbox\n│               ├── action_provision\n│               ├── action_set_name\n│               ├── creator_uid\n│               ├── id\n│               ├── index_uuid\n│               ├── private_key\n│               ├── synced_folders\n│               └── vagrant_cwd\n└── Vagrantfile\n\n4 directories, 9 files\n```\n\n## 下载\n\n```bash\n$ brew install tree\n```\n\n## 使用\n\n- -a 显示所有文件和目录。\n- -A 使用ASNI绘图字符显示树状图而非以ASCII字符组合。\n- -C 在文件和目录清单加上色彩，便于区分各种类型。\n- -d 显示目录名称而非内容。\n- -D 列出文件或目录的更改时间。\n- -f 在每个文件或目录之前，显示完整的相对路径名称。\n- -F 在执行文件，目录，Socket，符号连接，管道名称名称，各自加上 `*, /, =, @, |` 号。\n- -g 列出文件或目录的所属群组名称，没有对应的名称时，则显示群组识别码。\n- -i 不以阶梯状列出文件或目录名称。\n- -I 不显示符合范本样式的文件或目录名称。\n- -l 如遇到性质为符号连接的目录，直接列出该连接所指向的原始目录。\n- -n 不在文件和目录清单加上色彩。\n- -N 直接列出文件和目录名称，包括控制字符。\n- -p 列出权限标示。\n- -P 只显示符合范本样式的文件或目录名称。\n- -q 用\"?\"号取代控制字符，列出文件和目录名称。\n- -s 列出文件或目录大小。\n- -t 用文件和目录的更改时间排序。\n- -u 列出文件或目录的拥有者名称，没有对应的名称时，则显示用户识别码。\n- -x 将范围局限在现行的文件系统中，若指定目录下的某些子目录，其存放于另一个文件系统上，则将该子目录予以排除在寻找范围外。\n\n## 原理\n\n使用 `find` 命令即可达到如上效果\n\n```bash\n$ find . -print | sed -e 's;[^/]*/;|____;g;s;____|; |;g'\n```\n","slug":"tree","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2acg00ez5gqou3dyh4d1"},{"title":"JavaScript 自定义监听事件 Event","date":"2018-05-08T15:31:12.000Z","_content":"\n这个需求的由来是在做[点击或拖拽获取文件信息](/run/?id=68719489588)时，获取文件这一步操作不希望每次都写，而是封装起来，同时希望可以自定义一个监听事件，以后我只需要监听 Element 的该监听事件就可以拿到需要上传的文件。\n\n<!-- more --><!-- toc -->\n\n首先来看如何定义一个监听事件\n\n**语法**\n\n```javascript\nevent = new Event(typeArg, eventInit);\n```\n\n**参数**\n\n- typeArg 是DOMString 类型，表示所创建事件的名称\n- eventInit 可选 是 EventInit 类型的字典，接受以下字段:\n  - \"bubbles\"，可选，Boolean类型，默认值为 false，表示该事件是否冒泡。\n  - \"cancelable\"，可选，Boolean类型，默认值为 false， 表示该事件能否被取消。\n  - \"composed\"，可选，Boolean类型，默认值为 false，指示事件是否会在影子DOM根节点之外触发侦听器。\n\n以前也有 [Document.createEvent()](https://developer.mozilla.org/zh-CN/docs/Web/API/Document/createEvent) 创建方法，但是已经被废弃。\n\n**使用**\n\n```javascript\n// 定义事件类型\nvar evt = new Event('upload', {\"bubbles\":true, \"cancelable\":true})\n// 在元素上监听事件\nvar obj = document.getElementById('file');\nobj.addEventListener('upload', function(e){\n    console.log('upload 事件触发了');\n}, false);\n\nobj.dispatchEvent(evt)  // 调用监听事件\n// upload 事件触发了\n```\n\n以上模拟了事件创建和触发的过程。\n\n在获取文件信息的例子中完成使用详见[自定义监听事件](/run/?id=68719489633)\n\n- [Event](https://developer.mozilla.org/zh-CN/docs/Web/API/Event/Event)\n- [创建和触发 events](https://developer.mozilla.org/zh-CN/docs/Web/Guide/Events/Creating_and_triggering_events)\n- [JavaScript event对象：当前事件](http://www.itxueyuan.org/view/6340.html)\n- [JavaScript 自定义事件](https://juejin.im/entry/57a4a7427db2a2005a98bcf0)\n","source":"_posts/2018-05-08-js-custom-event.md","raw":"---\ntitle: JavaScript 自定义监听事件 Event\ndate: 2018-05-08 15:31:12\ntags: [javascript]\n---\n\n这个需求的由来是在做[点击或拖拽获取文件信息](/run/?id=68719489588)时，获取文件这一步操作不希望每次都写，而是封装起来，同时希望可以自定义一个监听事件，以后我只需要监听 Element 的该监听事件就可以拿到需要上传的文件。\n\n<!-- more --><!-- toc -->\n\n首先来看如何定义一个监听事件\n\n**语法**\n\n```javascript\nevent = new Event(typeArg, eventInit);\n```\n\n**参数**\n\n- typeArg 是DOMString 类型，表示所创建事件的名称\n- eventInit 可选 是 EventInit 类型的字典，接受以下字段:\n  - \"bubbles\"，可选，Boolean类型，默认值为 false，表示该事件是否冒泡。\n  - \"cancelable\"，可选，Boolean类型，默认值为 false， 表示该事件能否被取消。\n  - \"composed\"，可选，Boolean类型，默认值为 false，指示事件是否会在影子DOM根节点之外触发侦听器。\n\n以前也有 [Document.createEvent()](https://developer.mozilla.org/zh-CN/docs/Web/API/Document/createEvent) 创建方法，但是已经被废弃。\n\n**使用**\n\n```javascript\n// 定义事件类型\nvar evt = new Event('upload', {\"bubbles\":true, \"cancelable\":true})\n// 在元素上监听事件\nvar obj = document.getElementById('file');\nobj.addEventListener('upload', function(e){\n    console.log('upload 事件触发了');\n}, false);\n\nobj.dispatchEvent(evt)  // 调用监听事件\n// upload 事件触发了\n```\n\n以上模拟了事件创建和触发的过程。\n\n在获取文件信息的例子中完成使用详见[自定义监听事件](/run/?id=68719489633)\n\n- [Event](https://developer.mozilla.org/zh-CN/docs/Web/API/Event/Event)\n- [创建和触发 events](https://developer.mozilla.org/zh-CN/docs/Web/Guide/Events/Creating_and_triggering_events)\n- [JavaScript event对象：当前事件](http://www.itxueyuan.org/view/6340.html)\n- [JavaScript 自定义事件](https://juejin.im/entry/57a4a7427db2a2005a98bcf0)\n","slug":"js-custom-event","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aci00f15gqob4rui18s"},{"title":"ECMAScript 6 Class 用法","date":"2018-05-09T16:22:30.000Z","_content":"\n> ES6 提供了更接近传统语言的写法，引入了 Class（类）这个概念，作为对象的模板。通过class关键字，可以定义类。\n\n<!-- more --><!-- toc -->\n\n类和模块的内部，默认就是严格模式，所以不需要使用use strict指定运行模式。只要你的代码写在类或模块之中，就只有严格模式可用。\n\n## 构造\n\n```javascript\n\nclass User {\n  constructor(id, name) {\n    this.id = id;\n    this.name = name;\n  }\n\n  toString() {\n    return `id: ${this.id} name: ${this.name}`\n  }\n}\n\nlet user = new User(1, 'wxnacy');\nconsole.log(user.toString())    // id: 1 name: wxnacy\n\n```\n\n## 表达式\n\n```javascript\nconst MyClass = class Me {\n  getClassName() {\n    return Me.name;\n  }\n};\n\nlet inst = new MyClass();\ninst.getClassName() // Me\nMe.name // ReferenceError: Me is not defined\n```\n\n如果类的内部没用到的话，可以省略Me，也就是可以写成下面的形式。\n\n```javascript\nconst MyClass = class { /* ... */ };\n```\n\n采用 Class 表达式，可以写出立即执行的 Class。\n\n```javascript\nlet person = new class {\n  constructor(name) {\n    this.name = name;\n  }\n\n  sayName() {\n    console.log(this.name);\n  }\n}('张三');\n\nperson.sayName(); // \"张三\"\n```\n\n## getter 和 setter\n\n```javascript\nclass MyClass {\n  constructor() {\n    // ...\n  }\n  get prop() {\n    return 'getter';\n  }\n  set prop(value) {\n    console.log('setter: '+value);\n  }\n}\n\nlet inst = new MyClass();\n\ninst.prop = 123;\n// setter: 123\n\ninst.prop\n// 'getter'\n```\n\n## 静态方法\n\n```javascript\nclass Foo {\n  static classMethod() {\n    return 'hello';\n  }\n}\n\nFoo.classMethod() // 'hello'\n\nvar foo = new Foo();\nfoo.classMethod()\n// TypeError: foo.classMethod is not a function\n```\n\n- [Class 的基本语法](http://es6.ruanyifeng.com/#docs/class)\n","source":"_posts/2018-05-09-es6-class.md","raw":"---\ntitle: ECMAScript 6 Class 用法\ndate: 2018-05-09 16:22:30\ntags: [javascript]\n---\n\n> ES6 提供了更接近传统语言的写法，引入了 Class（类）这个概念，作为对象的模板。通过class关键字，可以定义类。\n\n<!-- more --><!-- toc -->\n\n类和模块的内部，默认就是严格模式，所以不需要使用use strict指定运行模式。只要你的代码写在类或模块之中，就只有严格模式可用。\n\n## 构造\n\n```javascript\n\nclass User {\n  constructor(id, name) {\n    this.id = id;\n    this.name = name;\n  }\n\n  toString() {\n    return `id: ${this.id} name: ${this.name}`\n  }\n}\n\nlet user = new User(1, 'wxnacy');\nconsole.log(user.toString())    // id: 1 name: wxnacy\n\n```\n\n## 表达式\n\n```javascript\nconst MyClass = class Me {\n  getClassName() {\n    return Me.name;\n  }\n};\n\nlet inst = new MyClass();\ninst.getClassName() // Me\nMe.name // ReferenceError: Me is not defined\n```\n\n如果类的内部没用到的话，可以省略Me，也就是可以写成下面的形式。\n\n```javascript\nconst MyClass = class { /* ... */ };\n```\n\n采用 Class 表达式，可以写出立即执行的 Class。\n\n```javascript\nlet person = new class {\n  constructor(name) {\n    this.name = name;\n  }\n\n  sayName() {\n    console.log(this.name);\n  }\n}('张三');\n\nperson.sayName(); // \"张三\"\n```\n\n## getter 和 setter\n\n```javascript\nclass MyClass {\n  constructor() {\n    // ...\n  }\n  get prop() {\n    return 'getter';\n  }\n  set prop(value) {\n    console.log('setter: '+value);\n  }\n}\n\nlet inst = new MyClass();\n\ninst.prop = 123;\n// setter: 123\n\ninst.prop\n// 'getter'\n```\n\n## 静态方法\n\n```javascript\nclass Foo {\n  static classMethod() {\n    return 'hello';\n  }\n}\n\nFoo.classMethod() // 'hello'\n\nvar foo = new Foo();\nfoo.classMethod()\n// TypeError: foo.classMethod is not a function\n```\n\n- [Class 的基本语法](http://es6.ruanyifeng.com/#docs/class)\n","slug":"es6-class","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2acj00f35gqok5xilx8j"},{"title":"使用 electron-builder 打包 electron 程序","date":"2018-05-10T15:29:25.000Z","_content":"\n[electron-builder](https://www.electron.build/) 可以将 `electron` 程序打包为 `macOS, Linux, Windows` 三个平台的软件包，并且使用非常简单。\n\n<!-- more --><!-- toc -->\n\n**下载模块**\n\n```bash\n$ yarn add electron-builder --dev\n```\n\n**将配置信息添加到 `package.json` 中**\n\n```json\n\"build\": {\n   \"appId\": \"your.id\",\n   \"mac\": {\n     \"category\": \"your.app.category.type\"\n   }\n }\n```\n\n完整配置信息见[详情](https://www.electron.build/configuration/configuration#configuration)\n\n**添加 icon**\n\nmacOS 默认使用 icon 位置为 `build/icon.icns`，更多信息见[详情](https://www.electron.build/icons)\n\n**在 `package.json` 中添加运行脚本**\n\n```json\n\"scripts\": {\n   \"pack\": \"electron-builder --dir\",\n   \"dist\": \"electron-builder\"\n }\n```\n\n然后运行 `yarn dist` 即可打包，运行 `yarn pack` 打包后将源码打压缩包。打包目录\n为 `dist`\n\n**注意**\n\n- 如果你的应用里面，包含有自己的原生addon (并不是依赖项)，那么请设置[nodeGypRebuild](https://www.electron.build/configuration/configuration#Configuration-nodeGypRebuild)为true。\n\n- 如果你不是 macOS 10.12+ 系统的话，您需要安装[必须的系统包](https://electron.org.cn/builder/multi-platform-build.html)。请注意，[默认情况](https://www.electron.build/configuration/configuration#Configuration-asar)下，所有的文件都会被打包到asar压缩包中。对于一个将要马上投入生产的app，你应该对你的应用进行签名。参见[哪里可以购买签名证书](https://www.electron.build/code-signing#where-to-buy-code-signing-certificate).\n\n你也可以将[DEMO](https://github.com/wxnacy/study/tree/master/node/electron/electron-builder)下载到本地，在 `electron-builder` 目录中执行 `yarn && yarn dist` 即可\n\n- [electron-builder 中文](https://electron.org.cn/builder/index.html)\n","source":"_posts/2018-05-10-use-electron-builder.md","raw":"---\ntitle: 使用 electron-builder 打包 electron 程序\ndate: 2018-05-10 15:29:25\ntags: [electron]\n---\n\n[electron-builder](https://www.electron.build/) 可以将 `electron` 程序打包为 `macOS, Linux, Windows` 三个平台的软件包，并且使用非常简单。\n\n<!-- more --><!-- toc -->\n\n**下载模块**\n\n```bash\n$ yarn add electron-builder --dev\n```\n\n**将配置信息添加到 `package.json` 中**\n\n```json\n\"build\": {\n   \"appId\": \"your.id\",\n   \"mac\": {\n     \"category\": \"your.app.category.type\"\n   }\n }\n```\n\n完整配置信息见[详情](https://www.electron.build/configuration/configuration#configuration)\n\n**添加 icon**\n\nmacOS 默认使用 icon 位置为 `build/icon.icns`，更多信息见[详情](https://www.electron.build/icons)\n\n**在 `package.json` 中添加运行脚本**\n\n```json\n\"scripts\": {\n   \"pack\": \"electron-builder --dir\",\n   \"dist\": \"electron-builder\"\n }\n```\n\n然后运行 `yarn dist` 即可打包，运行 `yarn pack` 打包后将源码打压缩包。打包目录\n为 `dist`\n\n**注意**\n\n- 如果你的应用里面，包含有自己的原生addon (并不是依赖项)，那么请设置[nodeGypRebuild](https://www.electron.build/configuration/configuration#Configuration-nodeGypRebuild)为true。\n\n- 如果你不是 macOS 10.12+ 系统的话，您需要安装[必须的系统包](https://electron.org.cn/builder/multi-platform-build.html)。请注意，[默认情况](https://www.electron.build/configuration/configuration#Configuration-asar)下，所有的文件都会被打包到asar压缩包中。对于一个将要马上投入生产的app，你应该对你的应用进行签名。参见[哪里可以购买签名证书](https://www.electron.build/code-signing#where-to-buy-code-signing-certificate).\n\n你也可以将[DEMO](https://github.com/wxnacy/study/tree/master/node/electron/electron-builder)下载到本地，在 `electron-builder` 目录中执行 `yarn && yarn dist` 即可\n\n- [electron-builder 中文](https://electron.org.cn/builder/index.html)\n","slug":"use-electron-builder","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2acl00f55gqo5vjvrjby"},{"title":"使用 pm2 运行 hexo","date":"2018-05-11T17:34:32.000Z","_content":"\n\n使用 hexo 有一阵了，本地运行的时候一直使用脚本来运行 `hexo server --draft`，但是一直感觉不方便，今天换成 pm2 来管理进程，如果你不知道 pm2，请点击[Node 生产环境部署神器 PM2](/2018/02/06/pm2/)\n\n<!-- more --><!-- toc -->\n\n**首先编写启动脚本 `run.js`**\n\n```javascript\nvar spawn = require('child_process').spawn;\n\n/* 其实就是等于执行hexo server --draft*/\nfree = spawn('hexo', ['server', '--draft']);\nfree.stdout.on('data', function (data) {\n  console.log('standard output:\\n' + data);\n});\n\nfree.stderr.on('data', function (data) {\n  console.log('standard error output:\\n' + data);\n});\n\nfree.on('exit', function (code, signal) {\n  console.log('child process eixt ,exit:' + code);\n});\n\n```\n\n**然后编写 pm2 启动配置 `pm2-config.json`**\n\n```json\n{\n    \"apps\" : [{\n        \"name\"        : \"wxnacy\",\n        \"script\"      : \"./run.js\"\n    }]\n}\n```\n\n**启动**\n\n```bash\n$ pm2 start pm2-config.json\n```\n","source":"_posts/2018-05-11-pm2-run-hexo.md","raw":"---\ntitle: 使用 pm2 运行 hexo\ntags:\n  - hexo\ndate: 2018-05-11 17:34:32\n---\n\n\n使用 hexo 有一阵了，本地运行的时候一直使用脚本来运行 `hexo server --draft`，但是一直感觉不方便，今天换成 pm2 来管理进程，如果你不知道 pm2，请点击[Node 生产环境部署神器 PM2](/2018/02/06/pm2/)\n\n<!-- more --><!-- toc -->\n\n**首先编写启动脚本 `run.js`**\n\n```javascript\nvar spawn = require('child_process').spawn;\n\n/* 其实就是等于执行hexo server --draft*/\nfree = spawn('hexo', ['server', '--draft']);\nfree.stdout.on('data', function (data) {\n  console.log('standard output:\\n' + data);\n});\n\nfree.stderr.on('data', function (data) {\n  console.log('standard error output:\\n' + data);\n});\n\nfree.on('exit', function (code, signal) {\n  console.log('child process eixt ,exit:' + code);\n});\n\n```\n\n**然后编写 pm2 启动配置 `pm2-config.json`**\n\n```json\n{\n    \"apps\" : [{\n        \"name\"        : \"wxnacy\",\n        \"script\"      : \"./run.js\"\n    }]\n}\n```\n\n**启动**\n\n```bash\n$ pm2 start pm2-config.json\n```\n","slug":"pm2-run-hexo","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2acm00f75gqopmhpo4sp"},{"title":"Ubuntu 安装 Yarn","date":"2018-05-12T19:17:08.000Z","_content":"\n在 Ubuntu 系统中不能直接通过 `apt` 安装，需要先添加 yarn 仓库。\n\n<!-- more --><!-- toc -->\n\n```bash\n$ curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -\n$ echo \"deb https://dl.yarnpkg.com/debian/ stable main\" | sudo tee /etc/apt/sources.list.d/yarn.list\n```\n\n随后更新 `apt` 再下载即可。\n\n```bash\n$ sudo apt-get update && sudo apt-get install yarn\n```\n\n- [ubuntu 安装](https://yarnpkg.com/lang/zh-hans/docs/install/#debian-stable)\n","source":"_posts/2018-05-12-ubuntu-install-yarn.md","raw":"---\ntitle: Ubuntu 安装 Yarn\ndate: 2018-05-12 19:17:08\ntags: [node]\n---\n\n在 Ubuntu 系统中不能直接通过 `apt` 安装，需要先添加 yarn 仓库。\n\n<!-- more --><!-- toc -->\n\n```bash\n$ curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -\n$ echo \"deb https://dl.yarnpkg.com/debian/ stable main\" | sudo tee /etc/apt/sources.list.d/yarn.list\n```\n\n随后更新 `apt` 再下载即可。\n\n```bash\n$ sudo apt-get update && sudo apt-get install yarn\n```\n\n- [ubuntu 安装](https://yarnpkg.com/lang/zh-hans/docs/install/#debian-stable)\n","slug":"ubuntu-install-yarn","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aco00fa5gqoq22toh79"},{"title":"Yarn 简单使用","date":"2018-05-13T21:19:55.000Z","_content":"\nyarn 的简单使用。\n\n<!-- more --><!-- toc -->\n## 初始化新项目\n\n```bash\nyarn init\n```\n\n## 添加依赖包\n\n```bash\nyarn add [package]\nyarn add [package]@[version]\nyarn add [package]@[tag]\n```\n\n## 将依赖项添加到不同依赖项类别\n\n分别添加到 devDependencies、peerDependencies 和 optionalDependencies：\n\n```bash\nyarn add [package] --dev\nyarn add [package] --peer\nyarn add [package] --optional\n```\n\n## 升级依赖包\n\n```bash\nyarn upgrade [package]\nyarn upgrade [package]@[version]\nyarn upgrade [package]@[tag]\n```\n\n## 移除依赖包\n\n```bash\nyarn remove [package]\n```\n\n## 安装项目的全部依赖\n\n```bash\nyarn\n```\n\n或者\n\n```bash\nyarn install\n```\n\n- [yarn 使用](https://yarnpkg.com/zh-Hans/docs/usage)\n","source":"_posts/2018-05-13-yarn-guide.md","raw":"---\ntitle: Yarn 简单使用\ndate: 2018-05-13 21:19:55\ntags: [node]\n---\n\nyarn 的简单使用。\n\n<!-- more --><!-- toc -->\n## 初始化新项目\n\n```bash\nyarn init\n```\n\n## 添加依赖包\n\n```bash\nyarn add [package]\nyarn add [package]@[version]\nyarn add [package]@[tag]\n```\n\n## 将依赖项添加到不同依赖项类别\n\n分别添加到 devDependencies、peerDependencies 和 optionalDependencies：\n\n```bash\nyarn add [package] --dev\nyarn add [package] --peer\nyarn add [package] --optional\n```\n\n## 升级依赖包\n\n```bash\nyarn upgrade [package]\nyarn upgrade [package]@[version]\nyarn upgrade [package]@[tag]\n```\n\n## 移除依赖包\n\n```bash\nyarn remove [package]\n```\n\n## 安装项目的全部依赖\n\n```bash\nyarn\n```\n\n或者\n\n```bash\nyarn install\n```\n\n- [yarn 使用](https://yarnpkg.com/zh-Hans/docs/usage)\n","slug":"yarn-guide","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2acq00fc5gqo4wpg0oxw"},{"title":"pyenv 指南","date":"2018-05-14T13:26:32.000Z","_content":"\n[pyenv](https://github.com/pyenv/pyenv) 目前是管理 Python 版本的最佳方案，是开发环境必备的工具之一。\n\n<!-- more --><!-- toc -->\n\n## 下载\n\n### Ubuntu\n\n**必备环境**\n\n```bash\n$ sudo apt update\n$ sudo apt -y install git gcc make patch zlib1g.dev libgdbm-dev libssl-dev libsqlite3-dev libbz2-dev libreadline-dev\n```\n\n**安装**\n\n```bash\n$ curl -L https://raw.githubusercontent.com/yyuu/pyenv-installer/master/bin/pyenv-installer | bash\n```\n\n**配置环境变量**\n\n```bash\n$ vim ~/.bash_profile\n\nexport PYENV_ROOT=\"$HOME/.pyenv\"\nexport PATH=\"$PYENV_ROOT/bin:$PATH\"\neval \"$(pyenv init -)\"\neval \"$(pyenv virtualenv-init -)\"\n```\n\n### CentOS\n\n**必备环境**\n\n```bash\n$ sudo yum -y update\n$ sudo yum -y install git gcc readline readline-devel readline-static openssl openssl-devel openssl-static sqlite-devel bzip2-devel bzip2-libs\n```\n\n**安装**\n\n```bash\n$ curl -L https://raw.githubusercontent.com/yyuu/pyenv-installer/master/bin/pyenv-installer | bash\n```\n\n**配置环境变量**\n\n```bash\n$ vim ~/.bash_profile\n\nexport PYENV_ROOT=\"$HOME/.pyenv\"\nexport PATH=\"$PYENV_ROOT/bin:$PATH\"\neval \"$(pyenv init -)\"\neval \"$(pyenv virtualenv-init -)\"\n```\n\n### macOS\n\n**必备环境**\n\n```bash\n$ xcode-select --install\n$ brew install readline xz zlib\n```\n\n**安装**\n\n```bash\n$ brew install pyenv\n```\n\n**配置环境变量**\n\n```bash\n$ vim ~/.bash_profile\n\nexport PYENV_ROOT=\"${HOME}/.pyenv\"\nif [ -d \"${PYENV_ROOT}\" ]; then\n  export PATH=\"${PYENV_ROOT}/bin:${PATH}\"\n  eval \"$(pyenv init -)\"\nfi\nCFLAGS=\"-I$(brew --prefix openssl)/include\" \\\nLDFLAGS=\"-L$(brew --prefix openssl)/lib\" \\\n```\n\n## 常用命令\n\n```bash\n$ pyenv install -list       # 可安装版本列表\n\n# 下载指定版本 python\n$ pyenv install 3.5.0\n$ pyenv install -v 3.5.0\n\n# 查看当前所用版本\n$ pyenv version\nsystem (set by /home/wxnacy/.pyenv/version)\n\n# 查看本地版本列表\n$ pyenv versions\n* system (set by /home/wxnacy/.pyenv/version) # 系统python环境 *号代表当前环境版本\n  3.5.0 # 刚下载的3.5.0版本\n\n# 设置全局为某一个环境\n$ pyenv global 3.5.0\n\n# 设置当前目录为某一个 python 版本\n$ pyenv local 3.5.0\n\n# 更新\n$ pyenv update\n\n# 卸载\n$ rm -rf ~/.pyenv   # 并移除环境变量即可\n```\n\n## virtualenv\n\n假如你想在 `3.5.0` 版本下做两个不同的项目，并且希望他们的环境互相独立，那么这个时候 virtualenv 就派上用场了，它是在 pyenv 的基础上做的更独立的虚拟环境。\n\n### 创建\n\n```bash\n$ pyenv virtualenv 3.5.0 env_350\n$ pyenv versions\n* system (set by /home/wxnacy/.pyenv/version)\n  3.5.0\n  3.5.0/envs/env_350\n  env_350\n```\n\n查看环境后我们发现多了两个环境 `3.5.0/envs/env_350` 和 `env_350`，它们指定同一个虚拟机，通常使用名称 `env_350`。\n\n### 进入、退出虚拟机\n\n```bash\n$ pyenv activate env_350    # 使用\n\n$ pynev deactivate          # 退出\n```\n\n该命令只在当前 shell 有效，如果想永久有效，需要配合 pyenv 的 `local, global` 命令。\n\n","source":"_posts/2018-05-14-pyenv.md","raw":"---\ntitle: pyenv 指南\ndate: 2018-05-14 13:26:32\ntags: [python]\n---\n\n[pyenv](https://github.com/pyenv/pyenv) 目前是管理 Python 版本的最佳方案，是开发环境必备的工具之一。\n\n<!-- more --><!-- toc -->\n\n## 下载\n\n### Ubuntu\n\n**必备环境**\n\n```bash\n$ sudo apt update\n$ sudo apt -y install git gcc make patch zlib1g.dev libgdbm-dev libssl-dev libsqlite3-dev libbz2-dev libreadline-dev\n```\n\n**安装**\n\n```bash\n$ curl -L https://raw.githubusercontent.com/yyuu/pyenv-installer/master/bin/pyenv-installer | bash\n```\n\n**配置环境变量**\n\n```bash\n$ vim ~/.bash_profile\n\nexport PYENV_ROOT=\"$HOME/.pyenv\"\nexport PATH=\"$PYENV_ROOT/bin:$PATH\"\neval \"$(pyenv init -)\"\neval \"$(pyenv virtualenv-init -)\"\n```\n\n### CentOS\n\n**必备环境**\n\n```bash\n$ sudo yum -y update\n$ sudo yum -y install git gcc readline readline-devel readline-static openssl openssl-devel openssl-static sqlite-devel bzip2-devel bzip2-libs\n```\n\n**安装**\n\n```bash\n$ curl -L https://raw.githubusercontent.com/yyuu/pyenv-installer/master/bin/pyenv-installer | bash\n```\n\n**配置环境变量**\n\n```bash\n$ vim ~/.bash_profile\n\nexport PYENV_ROOT=\"$HOME/.pyenv\"\nexport PATH=\"$PYENV_ROOT/bin:$PATH\"\neval \"$(pyenv init -)\"\neval \"$(pyenv virtualenv-init -)\"\n```\n\n### macOS\n\n**必备环境**\n\n```bash\n$ xcode-select --install\n$ brew install readline xz zlib\n```\n\n**安装**\n\n```bash\n$ brew install pyenv\n```\n\n**配置环境变量**\n\n```bash\n$ vim ~/.bash_profile\n\nexport PYENV_ROOT=\"${HOME}/.pyenv\"\nif [ -d \"${PYENV_ROOT}\" ]; then\n  export PATH=\"${PYENV_ROOT}/bin:${PATH}\"\n  eval \"$(pyenv init -)\"\nfi\nCFLAGS=\"-I$(brew --prefix openssl)/include\" \\\nLDFLAGS=\"-L$(brew --prefix openssl)/lib\" \\\n```\n\n## 常用命令\n\n```bash\n$ pyenv install -list       # 可安装版本列表\n\n# 下载指定版本 python\n$ pyenv install 3.5.0\n$ pyenv install -v 3.5.0\n\n# 查看当前所用版本\n$ pyenv version\nsystem (set by /home/wxnacy/.pyenv/version)\n\n# 查看本地版本列表\n$ pyenv versions\n* system (set by /home/wxnacy/.pyenv/version) # 系统python环境 *号代表当前环境版本\n  3.5.0 # 刚下载的3.5.0版本\n\n# 设置全局为某一个环境\n$ pyenv global 3.5.0\n\n# 设置当前目录为某一个 python 版本\n$ pyenv local 3.5.0\n\n# 更新\n$ pyenv update\n\n# 卸载\n$ rm -rf ~/.pyenv   # 并移除环境变量即可\n```\n\n## virtualenv\n\n假如你想在 `3.5.0` 版本下做两个不同的项目，并且希望他们的环境互相独立，那么这个时候 virtualenv 就派上用场了，它是在 pyenv 的基础上做的更独立的虚拟环境。\n\n### 创建\n\n```bash\n$ pyenv virtualenv 3.5.0 env_350\n$ pyenv versions\n* system (set by /home/wxnacy/.pyenv/version)\n  3.5.0\n  3.5.0/envs/env_350\n  env_350\n```\n\n查看环境后我们发现多了两个环境 `3.5.0/envs/env_350` 和 `env_350`，它们指定同一个虚拟机，通常使用名称 `env_350`。\n\n### 进入、退出虚拟机\n\n```bash\n$ pyenv activate env_350    # 使用\n\n$ pynev deactivate          # 退出\n```\n\n该命令只在当前 shell 有效，如果想永久有效，需要配合 pyenv 的 `local, global` 命令。\n\n","slug":"pyenv","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2acr00fe5gqocqhgm44k"},{"title":"CentOS 安装 Docker","date":"2018-05-15T18:43:23.000Z","_content":"\n简单介绍下 CentOS 环境下安装 Docker。\n\n<!-- more --><!-- toc -->\n\n**准备工作**\n\n```bash\n$ sudo yum install -y yum-utils device-mapper-persistent-data lvm2\n```\n\n**添加 Docker 仓库**\n\n```bash\n$ sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n```\n\n**允许使用edge test 版本**\n\n```bash\n$ sudo yum-config-manager --enable docker-ce-edge\n$ sudo yum-config-manager --enable docker-ce-test\n```\n\n**查看可下载版本**\n\n```bash\n$ yum list docker-ce --showduplicates | sort -r\n```\n\n**下载指定版本**\n\n```bash\n$ sudo yum install -y docker-ce-18.03.0.ce\n```\n\n**下载最新版本**\n\n```bash\n$ sudo yum install -y docker-ce\n```\n\n**启动**\n\n```bash\n$ sudo systemctl start docker\n```\n\n- [Get Docker CE for CentOS](https://docs.docker.com/install/linux/docker-ce/centos/)\n","source":"_posts/2018-05-15-centos-install-docker.md","raw":"---\ntitle: CentOS 安装 Docker\ndate: 2018-05-15 18:43:23\ntags: [docker]\n---\n\n简单介绍下 CentOS 环境下安装 Docker。\n\n<!-- more --><!-- toc -->\n\n**准备工作**\n\n```bash\n$ sudo yum install -y yum-utils device-mapper-persistent-data lvm2\n```\n\n**添加 Docker 仓库**\n\n```bash\n$ sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n```\n\n**允许使用edge test 版本**\n\n```bash\n$ sudo yum-config-manager --enable docker-ce-edge\n$ sudo yum-config-manager --enable docker-ce-test\n```\n\n**查看可下载版本**\n\n```bash\n$ yum list docker-ce --showduplicates | sort -r\n```\n\n**下载指定版本**\n\n```bash\n$ sudo yum install -y docker-ce-18.03.0.ce\n```\n\n**下载最新版本**\n\n```bash\n$ sudo yum install -y docker-ce\n```\n\n**启动**\n\n```bash\n$ sudo systemctl start docker\n```\n\n- [Get Docker CE for CentOS](https://docs.docker.com/install/linux/docker-ce/centos/)\n","slug":"centos-install-docker","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2act00fg5gqoi5citaqs"},{"title":"AWS AMI 下载 Docker 报错","date":"2018-05-17T09:39:52.000Z","_content":"\n使用 AWS AMI 服务器安装 Docker 死活装不上。\n\n<!-- more --><!-- toc -->\n\n```bash\n[ec2-user@ip-172-31-6-217 ~]$ sudo yum install -y docker-ce\nLoaded plugins: priorities, update-motd, upgrade-helper\nResolving Dependencies\n--> Running transaction check\n---> Package docker-ce.x86_64 0:18.05.0.ce-3.el7.centos will be installed\n--> Processing Dependency: container-selinux >= 2.9 for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n--> Processing Dependency: libseccomp >= 2.3 for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n--> Processing Dependency: libsystemd.so.0(LIBSYSTEMD_209)(64bit) for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n--> Processing Dependency: pigz for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n--> Processing Dependency: systemd-units for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n--> Processing Dependency: libseccomp.so.2()(64bit) for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n--> Processing Dependency: libsystemd.so.0()(64bit) for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n--> Processing Dependency: libltdl.so.7()(64bit) for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n--> Running transaction check\n---> Package docker-ce.x86_64 0:18.05.0.ce-3.el7.centos will be installed\n--> Processing Dependency: container-selinux >= 2.9 for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n--> Processing Dependency: libsystemd.so.0(LIBSYSTEMD_209)(64bit) for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n--> Processing Dependency: systemd-units for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n--> Processing Dependency: libsystemd.so.0()(64bit) for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n---> Package libseccomp.x86_64 0:2.3.1-2.4.amzn1 will be installed\n---> Package libtool-ltdl.x86_64 0:2.4.2-20.4.8.5.32.amzn1 will be installed\n---> Package pigz.x86_64 0:2.3.3-1.6.amzn1 will be installed\n--> Finished Dependency Resolution\nError: Package: docker-ce-18.05.0.ce-3.el7.centos.x86_64 (docker-ce-edge)\n           Requires: container-selinux >= 2.9\nError: Package: docker-ce-18.05.0.ce-3.el7.centos.x86_64 (docker-ce-edge)\n           Requires: systemd-units\nError: Package: docker-ce-18.05.0.ce-3.el7.centos.x86_64 (docker-ce-edge)\n           Requires: libsystemd.so.0()(64bit)\nError: Package: docker-ce-18.05.0.ce-3.el7.centos.x86_64 (docker-ce-edge)\n           Requires: libsystemd.so.0(LIBSYSTEMD_209)(64bit)\n You could try using --skip-broken to work around the problem\n You could try running: rpm -Va --nofiles --nodigest\n```\n\n后来看到大神的指点 [issue](https://github.com/moby/moby/issues/33930#issuecomment-312782998) 使用\n\n```bash\n$ sudo yum install -y --setopt=obsoletes=0 \\\n    docker-ce-17.03.1.ce-1.el7.centos \\\n    docker-ce-selinux-17.03.1.ce-1.el7.centos\n```\n\n仍然不行，最后发现当前使用为\n\n```bash\nAmazon Linux AMI 2018.03.0 (HVM), SSD Volume Type - ami-e251209a\n```\n\nDocker 对内核要求比较高，换成比较新的\n\n```bash\nAmazon Linux 2 LTS Candidate 2 AMI (HVM), SSD Volume Type - ami-31394949\n```\n\n装新版 Docker 依然不行，但是执行上边的命令可以安装老版本\n\n","source":"_posts/2018-05-17-docker-error.md","raw":"---\ntitle: AWS AMI 下载 Docker 报错\ndate: 2018-05-17 09:39:52\ntags: [docker]\n---\n\n使用 AWS AMI 服务器安装 Docker 死活装不上。\n\n<!-- more --><!-- toc -->\n\n```bash\n[ec2-user@ip-172-31-6-217 ~]$ sudo yum install -y docker-ce\nLoaded plugins: priorities, update-motd, upgrade-helper\nResolving Dependencies\n--> Running transaction check\n---> Package docker-ce.x86_64 0:18.05.0.ce-3.el7.centos will be installed\n--> Processing Dependency: container-selinux >= 2.9 for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n--> Processing Dependency: libseccomp >= 2.3 for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n--> Processing Dependency: libsystemd.so.0(LIBSYSTEMD_209)(64bit) for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n--> Processing Dependency: pigz for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n--> Processing Dependency: systemd-units for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n--> Processing Dependency: libseccomp.so.2()(64bit) for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n--> Processing Dependency: libsystemd.so.0()(64bit) for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n--> Processing Dependency: libltdl.so.7()(64bit) for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n--> Running transaction check\n---> Package docker-ce.x86_64 0:18.05.0.ce-3.el7.centos will be installed\n--> Processing Dependency: container-selinux >= 2.9 for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n--> Processing Dependency: libsystemd.so.0(LIBSYSTEMD_209)(64bit) for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n--> Processing Dependency: systemd-units for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n--> Processing Dependency: libsystemd.so.0()(64bit) for package: docker-ce-18.05.0.ce-3.el7.centos.x86_64\n---> Package libseccomp.x86_64 0:2.3.1-2.4.amzn1 will be installed\n---> Package libtool-ltdl.x86_64 0:2.4.2-20.4.8.5.32.amzn1 will be installed\n---> Package pigz.x86_64 0:2.3.3-1.6.amzn1 will be installed\n--> Finished Dependency Resolution\nError: Package: docker-ce-18.05.0.ce-3.el7.centos.x86_64 (docker-ce-edge)\n           Requires: container-selinux >= 2.9\nError: Package: docker-ce-18.05.0.ce-3.el7.centos.x86_64 (docker-ce-edge)\n           Requires: systemd-units\nError: Package: docker-ce-18.05.0.ce-3.el7.centos.x86_64 (docker-ce-edge)\n           Requires: libsystemd.so.0()(64bit)\nError: Package: docker-ce-18.05.0.ce-3.el7.centos.x86_64 (docker-ce-edge)\n           Requires: libsystemd.so.0(LIBSYSTEMD_209)(64bit)\n You could try using --skip-broken to work around the problem\n You could try running: rpm -Va --nofiles --nodigest\n```\n\n后来看到大神的指点 [issue](https://github.com/moby/moby/issues/33930#issuecomment-312782998) 使用\n\n```bash\n$ sudo yum install -y --setopt=obsoletes=0 \\\n    docker-ce-17.03.1.ce-1.el7.centos \\\n    docker-ce-selinux-17.03.1.ce-1.el7.centos\n```\n\n仍然不行，最后发现当前使用为\n\n```bash\nAmazon Linux AMI 2018.03.0 (HVM), SSD Volume Type - ami-e251209a\n```\n\nDocker 对内核要求比较高，换成比较新的\n\n```bash\nAmazon Linux 2 LTS Candidate 2 AMI (HVM), SSD Volume Type - ami-31394949\n```\n\n装新版 Docker 依然不行，但是执行上边的命令可以安装老版本\n\n","slug":"docker-error","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2acu00fi5gqoq3zgs1h6"},{"title":"Docker 简单实用","date":"2018-05-16T11:02:59.000Z","_content":"\nDocker 简单实用\n\n<!-- more --><!-- toc -->\n\n**避免每次输入 sudo**\n\n```bash\n$ vim ~/.bash_profile\n\nalias docker=\"sudo docker\"\n```\n\n**版本信息**\n\n```bash\n$ docker --version\n$ docker version\n$ docker info\n```\n\n**登陆**\n\n```bash\n$ docker login\n```\n\n**创建镜像**\n\n```bash\n$ docker build -t <image-name> .\n```\n\n**查看镜像列表**\n\n```bash\n$ docker image ls\n```\n\n**运行镜像**\n\n```bash\n$ docker run --rm --name <container-name> -d -p 8080:80 <image-name>\n```\n\n**删除镜像**\n\n```bash\n$ docker image rm <image-id>[<image-name>]  # id 输入前几位即可\n$ docker rmi <image-id>[<image-name>]\n```\n\n**容器列表**\n\n```bash\n$ docker container ls           # 在运行的容器列表\n$ docker container ls --all     # 全部容器列表\n$ docker container ls -aq\n```\n\n**停止容器**\n\n```bash\n$ docker container stop <container-name>[<container-id>]\n```\n\n**使用镜像运行demo**\n\n```bash\n$ docker run -it --rm --name <demo-name> -v \"$PWD\":/usr/src/myapp -w /usr/src/myapp -p 8006:8005 python:3.5 python app.py\n```\n\n- [Get Started](https://docs.docker.com/get-started/)\n","source":"_posts/2018-05-16-use-docker.md","raw":"---\ntitle: Docker 简单实用\ndate: 2018-05-16 11:02:59\ntags: [docker]\n---\n\nDocker 简单实用\n\n<!-- more --><!-- toc -->\n\n**避免每次输入 sudo**\n\n```bash\n$ vim ~/.bash_profile\n\nalias docker=\"sudo docker\"\n```\n\n**版本信息**\n\n```bash\n$ docker --version\n$ docker version\n$ docker info\n```\n\n**登陆**\n\n```bash\n$ docker login\n```\n\n**创建镜像**\n\n```bash\n$ docker build -t <image-name> .\n```\n\n**查看镜像列表**\n\n```bash\n$ docker image ls\n```\n\n**运行镜像**\n\n```bash\n$ docker run --rm --name <container-name> -d -p 8080:80 <image-name>\n```\n\n**删除镜像**\n\n```bash\n$ docker image rm <image-id>[<image-name>]  # id 输入前几位即可\n$ docker rmi <image-id>[<image-name>]\n```\n\n**容器列表**\n\n```bash\n$ docker container ls           # 在运行的容器列表\n$ docker container ls --all     # 全部容器列表\n$ docker container ls -aq\n```\n\n**停止容器**\n\n```bash\n$ docker container stop <container-name>[<container-id>]\n```\n\n**使用镜像运行demo**\n\n```bash\n$ docker run -it --rm --name <demo-name> -v \"$PWD\":/usr/src/myapp -w /usr/src/myapp -p 8006:8005 python:3.5 python app.py\n```\n\n- [Get Started](https://docs.docker.com/get-started/)\n","slug":"use-docker","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2acv00fk5gqokt7e9ida"},{"title":"Ubuntu 14.04 LTS 安装 Docker","date":"2018-05-18T14:19:39.000Z","_content":"\nUbuntu Trusty 14.04 版本安装 Docker。\n\n<!-- more --><!-- toc -->\n\n**删掉老版本**\n\n```bash\n$ sudo apt-get remove docker docker-engine docker.io\n```\n\n## 安装 `linux-image-extra-`\n\n安装 Docker 的 `aufs` 储存驱动程序\n\n```bash\n$ sudo apt-get update\n$ sudo apt-get install  linux-image-extra-$(uname -r) linux-image-extra-virtual\n```\n\n## 使用仓库安装\n\n**允许 apt 使用 HTTPS 仓库**\n\n```bash\n$ sudo apt-get update\n$ sudo apt-get install \\\n    apt-transport-https \\\n    ca-certificates \\\n    curl \\\n    software-properties-common\n```\n\n**添加 Docker 官方 GPG 秘钥**\n\n```bash\n$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\n```\n\n**添加仓库**\n\n```bash\n$ sudo add-apt-repository \\\n   \"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\\n   $(lsb_release -cs) \\\n   stable\"\n```\n\n## 安装 Docker ce\n\n**安装最新稳定版**\n\n```bash\n$ sudo apt-get update\n$ sudo apt-get install -y docker-ce\n```\n\n**查看所有可安装版本**\n\n```bash\n$ apt-cache madison docker-ce\n\ndocker-ce | 18.03.0~ce-0~ubuntu | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages\n```\n\n**安装指定版本**\n\n```bash\n$ sudo apt-get install -y docker-ce=18.03.0.ce\n```\n\n**运行 helloworld 镜像**\n\n```bash\n$ sudo docker run hello-world\n```\n\n- [Get Docker CE for Ubuntu](https://docs.docker.com/install/linux/docker-ce/ubuntu/)\n","source":"_posts/2018-05-18-ubuntu-14-04-install-docker.md","raw":"---\ntitle: Ubuntu 14.04 LTS 安装 Docker\ndate: 2018-05-18 14:19:39\ntags: [docker]\n---\n\nUbuntu Trusty 14.04 版本安装 Docker。\n\n<!-- more --><!-- toc -->\n\n**删掉老版本**\n\n```bash\n$ sudo apt-get remove docker docker-engine docker.io\n```\n\n## 安装 `linux-image-extra-`\n\n安装 Docker 的 `aufs` 储存驱动程序\n\n```bash\n$ sudo apt-get update\n$ sudo apt-get install  linux-image-extra-$(uname -r) linux-image-extra-virtual\n```\n\n## 使用仓库安装\n\n**允许 apt 使用 HTTPS 仓库**\n\n```bash\n$ sudo apt-get update\n$ sudo apt-get install \\\n    apt-transport-https \\\n    ca-certificates \\\n    curl \\\n    software-properties-common\n```\n\n**添加 Docker 官方 GPG 秘钥**\n\n```bash\n$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\n```\n\n**添加仓库**\n\n```bash\n$ sudo add-apt-repository \\\n   \"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\\n   $(lsb_release -cs) \\\n   stable\"\n```\n\n## 安装 Docker ce\n\n**安装最新稳定版**\n\n```bash\n$ sudo apt-get update\n$ sudo apt-get install -y docker-ce\n```\n\n**查看所有可安装版本**\n\n```bash\n$ apt-cache madison docker-ce\n\ndocker-ce | 18.03.0~ce-0~ubuntu | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages\n```\n\n**安装指定版本**\n\n```bash\n$ sudo apt-get install -y docker-ce=18.03.0.ce\n```\n\n**运行 helloworld 镜像**\n\n```bash\n$ sudo docker run hello-world\n```\n\n- [Get Docker CE for Ubuntu](https://docs.docker.com/install/linux/docker-ce/ubuntu/)\n","slug":"ubuntu-14-04-install-docker","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2acx00fm5gqoqkjg9uej"},{"title":"JavaScript 获取图片尺寸和字节大小","date":"2018-04-26T17:46:38.000Z","_content":"\n\n今天需要使用 JS 获取网络图片的尺寸大小，然后 Google 了一大圈找到的都是获取宽高的，好吧，也可能是我搜索的方式不对，还好凭着我的聪明才智最终自己琢磨出了方法，下面总结下。\n\n<!-- more --><!-- toc -->\n## 本地图片\n\n**字节大小**\n\n本地图片是比较简单的，使用 `File Api` 即可\n\n```javascript\n<input type=\"file\" id = 'file' multiple/><br/>\n<script>\ndocument.getElementById(\"file\").addEventListener(\"change\", selectFile, false);\n\nfunction selectFile(e) {\n  var files = e.target.files;\n  console.log(files[i].size);\n}\n  </script>\n```\n\n[试一试](/run/?id=68719485505)\n\n**宽高**\n\n需要使用 `FileReader` 来宽高 `dataurl`，然后使用 `Image` 来获取宽高。\n\n```javascript\n<input type=\"file\" id = 'file' multiple/><br/>\n<script>\ndocument.getElementById(\"file\").addEventListener(\"change\", selectFile, false);\n\nfunction selectFile(e) {\n  var files = e.target.files;\n  var f = files[0];\n  var reader = new FileReader();\n  reader.onload = (function(theFile) {\n    return function(e) {\n      var img = new Image();\n      img.src = e.target.result;\n      img.onload = function(){\n        console.log(img.width);\n        console.log(img.height);\n      };\n    };\n  })(f);\n\n  reader.readAsDataURL(f);\n}\n  </script>\n```\n\n[试一试](/run/?id=68719485516)\n\n## 网络图片\n\n**字节大小**\n\n通过 `fetch` 请求获取字节大小，在这里获取头信息 `Content-Length` 为空，需要使用 `blob` 数据中的 size。\n\n```java\n<span id='output'></span><br/>\n<img id=\"preview\" width=\"300\"/>\n<script>\n  fetch('/images/gzjzz2.png').then(function(res){\n    return res.blob()\n  }).then(function(data){\n    document.getElementById(\"output\").innerHTML =  `${data.size} bytes`\n\n  })\ndocument.getElementById(\"preview\").src = '/images/gzjzz2.png'\n\n</script>\n```\n\n[试一试](/run/?id=68719485526)\n\n**宽高**\n\n只需要使用 `Image` 即可\n```java\n<span id='output'></span><br/>\n<img id=\"preview\" width=\"300\"/>\n<script>\nvar img = new Image();\nimg.src = '/images/gzjzz2.png';\nimg.onload = function(){\n  content = `宽：${img.width} 高：${img.height}`\n  document.getElementById(\"output\").innerHTML = content;\n};\ndocument.getElementById(\"preview\").src = '/images/gzjzz2.png'\n\n</script>\n```\n\n[试一试](/run/?id=68719485524)\n","source":"_posts/2018-04-26-js-image-size.md","raw":"---\ntitle: JavaScript 获取图片尺寸和字节大小\ntags:\n  - javascript\ndate: 2018-04-26 17:46:38\n---\n\n\n今天需要使用 JS 获取网络图片的尺寸大小，然后 Google 了一大圈找到的都是获取宽高的，好吧，也可能是我搜索的方式不对，还好凭着我的聪明才智最终自己琢磨出了方法，下面总结下。\n\n<!-- more --><!-- toc -->\n## 本地图片\n\n**字节大小**\n\n本地图片是比较简单的，使用 `File Api` 即可\n\n```javascript\n<input type=\"file\" id = 'file' multiple/><br/>\n<script>\ndocument.getElementById(\"file\").addEventListener(\"change\", selectFile, false);\n\nfunction selectFile(e) {\n  var files = e.target.files;\n  console.log(files[i].size);\n}\n  </script>\n```\n\n[试一试](/run/?id=68719485505)\n\n**宽高**\n\n需要使用 `FileReader` 来宽高 `dataurl`，然后使用 `Image` 来获取宽高。\n\n```javascript\n<input type=\"file\" id = 'file' multiple/><br/>\n<script>\ndocument.getElementById(\"file\").addEventListener(\"change\", selectFile, false);\n\nfunction selectFile(e) {\n  var files = e.target.files;\n  var f = files[0];\n  var reader = new FileReader();\n  reader.onload = (function(theFile) {\n    return function(e) {\n      var img = new Image();\n      img.src = e.target.result;\n      img.onload = function(){\n        console.log(img.width);\n        console.log(img.height);\n      };\n    };\n  })(f);\n\n  reader.readAsDataURL(f);\n}\n  </script>\n```\n\n[试一试](/run/?id=68719485516)\n\n## 网络图片\n\n**字节大小**\n\n通过 `fetch` 请求获取字节大小，在这里获取头信息 `Content-Length` 为空，需要使用 `blob` 数据中的 size。\n\n```java\n<span id='output'></span><br/>\n<img id=\"preview\" width=\"300\"/>\n<script>\n  fetch('/images/gzjzz2.png').then(function(res){\n    return res.blob()\n  }).then(function(data){\n    document.getElementById(\"output\").innerHTML =  `${data.size} bytes`\n\n  })\ndocument.getElementById(\"preview\").src = '/images/gzjzz2.png'\n\n</script>\n```\n\n[试一试](/run/?id=68719485526)\n\n**宽高**\n\n只需要使用 `Image` 即可\n```java\n<span id='output'></span><br/>\n<img id=\"preview\" width=\"300\"/>\n<script>\nvar img = new Image();\nimg.src = '/images/gzjzz2.png';\nimg.onload = function(){\n  content = `宽：${img.width} 高：${img.height}`\n  document.getElementById(\"output\").innerHTML = content;\n};\ndocument.getElementById(\"preview\").src = '/images/gzjzz2.png'\n\n</script>\n```\n\n[试一试](/run/?id=68719485524)\n","slug":"js-image-size","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ad600fo5gqo421rgan2"},{"title":"CentOS 安装 Htop","date":"2018-05-19T15:34:01.000Z","_content":"\n\nHtop 的强大和方便不在赘述，直说一下在 CentOS 系统中如何安装。\n<!-- more -->\n\n**使用 EPEL 仓库**\n\n```bash\n$ yum -y install epel-release\n$ yum -y update\n```\n\n接下来正常安装即可\n\n```bash\n$ yum -y install htop\n```\n\n","source":"_posts/2018-05-19-centos-install-htop.md","raw":"---\ntitle: CentOS 安装 Htop\ntags:\n  - linux\ndate: 2018-05-19 15:34:01\n---\n\n\nHtop 的强大和方便不在赘述，直说一下在 CentOS 系统中如何安装。\n<!-- more -->\n\n**使用 EPEL 仓库**\n\n```bash\n$ yum -y install epel-release\n$ yum -y update\n```\n\n接下来正常安装即可\n\n```bash\n$ yum -y install htop\n```\n\n","slug":"centos-install-htop","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ad700fq5gqomhs1cuqy"},{"title":"JavaScript 上传文件时获取 File 属性","date":"2018-04-27T09:54:21.000Z","_content":"\n总结下获取 `File` 属性以及三种上传文件的方法\n\n<!-- more --><!-- toc -->\n\n## 文件属性\n\n- `File.lastModified` 只读，获取文件最后修改的时间戳\n- `File.lastModifiedDate` 只读，获取文件最后的修改时间，现在已经废除，建议使用 `File.lastModified`\n- `File.name` 只读，获取文件名\n- `File.size` 只读，文件大小，单位 bytes\n- `File.type` 只读，文件类型\n\n## 点击上传\n\n```javascript\n<body>\n<input type=\"file\" id = 'file' multiple/><br/>\n<ul id = 'output'></ul>\n</body>\n<script>\ndocument.getElementById(\"file\").addEventListener(\"change\", handleFileSelecter, false);\n\nfunction handleFileSelecter(e) {\n    var content = '';\n    var files = e.target.files;\n    content = `<li>总数: ${files.length}</li>`\n        for(var i = 0; i < files.length; i++){\n            console.log(files[i]);\n            var f = files[i]\n                content += '<li>-------------------------</li>';\n            content += `<li>name: ${f.name}</li>`;\n            content += `<li>size: ${f.size}</li>`;\n            content += `<li>type: ${f.type}</li>`;\n            content += `<li>lastModified: ${f.lastModified}</li>`;\n            content += `<li>lastModifiedDate: ${f.lastModifiedDate}</li>`;\n\n        }\n    document.getElementById(\"output\").innerHTML = content;\n}\n</script>\n```\n\n[试一试](/run/?id=68719485239)\n\n## 拖动上传\n\n```javascript\n<body>\n<div id=\"file\">将文件拖放到此处</div>\n<ul id='output'></ul>\n</body>\n<script>\ndocument.getElementById(\"file\").addEventListener('dragover', handleDrop, false);\ndocument.getElementById(\"file\").addEventListener('drop', handleFileSelect, false);\n\nfunction handleDrop(e){\n    e.stopPropagation();\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'copy';\n}\n\nfunction handleFileSelect(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    var content = '';\n    var files = e.dataTransfer.files;\n    content = `<li>总数: ${files.length}</li>`\n        for(var i = 0; i < files.length; i++){\n            var f = files[i]\n                content += '<li>-------------------------</li>';\n            content += `<li>name: ${f.name}</li>`;\n            content += `<li>size: ${f.size}</li>`;\n            content += `<li>type: ${f.type}</li>`;\n            content += `<li>lastModified: ${f.lastModified}</li>`;\n            content += `<li>lastModifiedDate: ${f.lastModifiedDate}</li>`;\n\n        }\n    document.getElementById(\"output\").innerHTML = content;\n}\n</script>\n```\n\n[试一试](/run/?id=68719485256)\n\n## 点击或拖动\n\n```javascript\n<body>\n<div id=\"file\">点击或将文件拖放到此处</div>\n<ul id='output'></ul>\n</body>\n<script>\ndocument.getElementById(\"file\").addEventListener('dragover', handleDrop, false);\ndocument.getElementById(\"file\").addEventListener('drop', handleFileSelect, false);\ndocument.getElementById(\"file\").addEventListener('click', handleClick, false);\n\nfunction handleClick(){\n    var text = \"<input type='file' onChange='handleFileChangeSelect() />'\";\n    var f = document.createElement('input');\n    f.type = 'file'\n        f.addEventListener(\"change\", handleFileChangeSelect, false);\n    f.multiple = true\n        f.click()\n};\n\nfunction handleDrop(e){\n    e.stopPropagation();\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'copy';\n}\n\nfunction handleFileSelect(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    var files = e.dataTransfer.files;\n    viewFiles(files);\n}\n\nfunction handleFileChangeSelect(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    var files = e.target.files;\n    viewFiles(files);\n}\n\nfunction viewFiles(files){\n    var content = '';\n    content = `<li>总数: ${files.length}</li>`\n        for(var i = 0; i < files.length; i++){\n            var f = files[i]\n                content += '<li>-------------------------</li>';\n            content += `<li>name: ${f.name}</li>`;\n            content += `<li>size: ${f.size}</li>`;\n            content += `<li>type: ${f.type}</li>`;\n            content += `<li>lastModified: ${f.lastModified}</li>`;\n            content += `<li>lastModifiedDate: ${f.lastModifiedDate}</li>`;\n\n        }\n    document.getElementById(\"output\").innerHTML = content;\n}\n</script>\n```\n\n[试一试](/run/?id=68719485268)\n\n- [File](https://developer.mozilla.org/en-US/docs/Web/API/File)\n- [通过 File API 使用 JavaScript 读取文件](https://www.html5rocks.com/zh/tutorials/file/dndfiles/)\n","source":"_posts/2018-04-27-js-file-field.md","raw":"---\ntitle: JavaScript 上传文件时获取 File 属性\ndate: 2018-04-27 09:54:21\ntags: [javascript]\n---\n\n总结下获取 `File` 属性以及三种上传文件的方法\n\n<!-- more --><!-- toc -->\n\n## 文件属性\n\n- `File.lastModified` 只读，获取文件最后修改的时间戳\n- `File.lastModifiedDate` 只读，获取文件最后的修改时间，现在已经废除，建议使用 `File.lastModified`\n- `File.name` 只读，获取文件名\n- `File.size` 只读，文件大小，单位 bytes\n- `File.type` 只读，文件类型\n\n## 点击上传\n\n```javascript\n<body>\n<input type=\"file\" id = 'file' multiple/><br/>\n<ul id = 'output'></ul>\n</body>\n<script>\ndocument.getElementById(\"file\").addEventListener(\"change\", handleFileSelecter, false);\n\nfunction handleFileSelecter(e) {\n    var content = '';\n    var files = e.target.files;\n    content = `<li>总数: ${files.length}</li>`\n        for(var i = 0; i < files.length; i++){\n            console.log(files[i]);\n            var f = files[i]\n                content += '<li>-------------------------</li>';\n            content += `<li>name: ${f.name}</li>`;\n            content += `<li>size: ${f.size}</li>`;\n            content += `<li>type: ${f.type}</li>`;\n            content += `<li>lastModified: ${f.lastModified}</li>`;\n            content += `<li>lastModifiedDate: ${f.lastModifiedDate}</li>`;\n\n        }\n    document.getElementById(\"output\").innerHTML = content;\n}\n</script>\n```\n\n[试一试](/run/?id=68719485239)\n\n## 拖动上传\n\n```javascript\n<body>\n<div id=\"file\">将文件拖放到此处</div>\n<ul id='output'></ul>\n</body>\n<script>\ndocument.getElementById(\"file\").addEventListener('dragover', handleDrop, false);\ndocument.getElementById(\"file\").addEventListener('drop', handleFileSelect, false);\n\nfunction handleDrop(e){\n    e.stopPropagation();\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'copy';\n}\n\nfunction handleFileSelect(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    var content = '';\n    var files = e.dataTransfer.files;\n    content = `<li>总数: ${files.length}</li>`\n        for(var i = 0; i < files.length; i++){\n            var f = files[i]\n                content += '<li>-------------------------</li>';\n            content += `<li>name: ${f.name}</li>`;\n            content += `<li>size: ${f.size}</li>`;\n            content += `<li>type: ${f.type}</li>`;\n            content += `<li>lastModified: ${f.lastModified}</li>`;\n            content += `<li>lastModifiedDate: ${f.lastModifiedDate}</li>`;\n\n        }\n    document.getElementById(\"output\").innerHTML = content;\n}\n</script>\n```\n\n[试一试](/run/?id=68719485256)\n\n## 点击或拖动\n\n```javascript\n<body>\n<div id=\"file\">点击或将文件拖放到此处</div>\n<ul id='output'></ul>\n</body>\n<script>\ndocument.getElementById(\"file\").addEventListener('dragover', handleDrop, false);\ndocument.getElementById(\"file\").addEventListener('drop', handleFileSelect, false);\ndocument.getElementById(\"file\").addEventListener('click', handleClick, false);\n\nfunction handleClick(){\n    var text = \"<input type='file' onChange='handleFileChangeSelect() />'\";\n    var f = document.createElement('input');\n    f.type = 'file'\n        f.addEventListener(\"change\", handleFileChangeSelect, false);\n    f.multiple = true\n        f.click()\n};\n\nfunction handleDrop(e){\n    e.stopPropagation();\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'copy';\n}\n\nfunction handleFileSelect(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    var files = e.dataTransfer.files;\n    viewFiles(files);\n}\n\nfunction handleFileChangeSelect(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    var files = e.target.files;\n    viewFiles(files);\n}\n\nfunction viewFiles(files){\n    var content = '';\n    content = `<li>总数: ${files.length}</li>`\n        for(var i = 0; i < files.length; i++){\n            var f = files[i]\n                content += '<li>-------------------------</li>';\n            content += `<li>name: ${f.name}</li>`;\n            content += `<li>size: ${f.size}</li>`;\n            content += `<li>type: ${f.type}</li>`;\n            content += `<li>lastModified: ${f.lastModified}</li>`;\n            content += `<li>lastModifiedDate: ${f.lastModifiedDate}</li>`;\n\n        }\n    document.getElementById(\"output\").innerHTML = content;\n}\n</script>\n```\n\n[试一试](/run/?id=68719485268)\n\n- [File](https://developer.mozilla.org/en-US/docs/Web/API/File)\n- [通过 File API 使用 JavaScript 读取文件](https://www.html5rocks.com/zh/tutorials/file/dndfiles/)\n","slug":"js-file-field","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ad800fs5gqoo2i2sc20"},{"title":"Ubuntu 16.04 LTS 安装 Docker","date":"2018-05-20T11:04:33.000Z","_content":"\n\nUbuntu Xenial 16.04 版本安装 Docker。\n\n<!-- more --><!-- toc -->\n\n**删掉老版本**\n\n```bash\n$ sudo apt-get remove docker docker-engine docker.io\n```\n\n## 使用仓库安装\n\n**允许 apt 使用 HTTPS 仓库**\n\n```bash\n$ sudo apt-get update\n$ sudo apt-get install \\\n    apt-transport-https \\\n    ca-certificates \\\n    curl \\\n    software-properties-common\n```\n\n**添加 Docker 官方 GPG 秘钥**\n\n```bash\n$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\n```\n\n**添加仓库**\n\n```bash\n$ sudo add-apt-repository \\\n   \"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\\n   $(lsb_release -cs) \\\n   stable\"\n```\n\n## 安装 Docker ce\n\n**安装最新稳定版**\n\n```bash\n$ sudo apt-get update\n$ sudo apt-get install docker-ce\n```\n\n**查看所有可安装版本**\n\n```bash\n$ apt-cache madison docker-ce\n\ndocker-ce | 18.03.0~ce-0~ubuntu | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages\n```\n\n**安装指定版本**\n\n```bash\n$ sudo apt-get install docker-ce=18.03.0.ce\n```\n\n**运行 helloworld 镜像**\n\n```bash\n$ sudo docker run hello-world\n```\n\n- [Get Docker CE for Ubuntu](https://docs.docker.com/install/linux/docker-ce/ubuntu/)\n","source":"_posts/2018-05-20-ubuntu-16-04-install-docker.md","raw":"---\ntitle: Ubuntu 16.04 LTS 安装 Docker\ntags:\n  - docker\ndate: 2018-05-20 11:04:33\n---\n\n\nUbuntu Xenial 16.04 版本安装 Docker。\n\n<!-- more --><!-- toc -->\n\n**删掉老版本**\n\n```bash\n$ sudo apt-get remove docker docker-engine docker.io\n```\n\n## 使用仓库安装\n\n**允许 apt 使用 HTTPS 仓库**\n\n```bash\n$ sudo apt-get update\n$ sudo apt-get install \\\n    apt-transport-https \\\n    ca-certificates \\\n    curl \\\n    software-properties-common\n```\n\n**添加 Docker 官方 GPG 秘钥**\n\n```bash\n$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\n```\n\n**添加仓库**\n\n```bash\n$ sudo add-apt-repository \\\n   \"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\\n   $(lsb_release -cs) \\\n   stable\"\n```\n\n## 安装 Docker ce\n\n**安装最新稳定版**\n\n```bash\n$ sudo apt-get update\n$ sudo apt-get install docker-ce\n```\n\n**查看所有可安装版本**\n\n```bash\n$ apt-cache madison docker-ce\n\ndocker-ce | 18.03.0~ce-0~ubuntu | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages\n```\n\n**安装指定版本**\n\n```bash\n$ sudo apt-get install docker-ce=18.03.0.ce\n```\n\n**运行 helloworld 镜像**\n\n```bash\n$ sudo docker run hello-world\n```\n\n- [Get Docker CE for Ubuntu](https://docs.docker.com/install/linux/docker-ce/ubuntu/)\n","slug":"ubuntu-16-04-install-docker","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ad900fu5gqollkxebb8"},{"title":"macOS 使用 Vagrant","date":"2018-05-21T13:47:37.000Z","_content":"\n\nVagrant 是非常强大好用的虚拟机管理工具，它依赖于 virtualbox，可以非常方便的在电脑中起各种系统的虚拟机。\n\n<!-- more --><!-- toc -->\n\n## 安装\n\n```bash\n$ brew cask install virtualbox\n$ brew cask install vagrant\n```\n\n## 使用\n\n### 快速开始\n\n**初始化 box **\n\n使用 `centos7` 系统，你也可以从 [Discover Vagrant Boxes](https://app.vagrantup.com/boxes/search) 查找其他系统\n\n```bash\n$ mkdir vagrant && cd vagrant\n$ vagrant init centos/7\n```\n\n**启动虚拟机**\n\n第一次启动时，vagrant 检查到没有指定的系统，会自动下载该镜像，下载目录为 `~/.vagrant.d/boxes`\n\n```bash\n$ vagrant up\n```\n\n**链接**\n\n```bash\n$ vagrant ssh\n```\n\n**关机**\n\n```bash\n$ vagrant halt\n```\n\n**销毁**\n\n```bash\n$ vagrant destroy\n$ vagrant destroy -f    # 不询问\n```\n\n### Boxes\n\n**下载 box**\n\n```bash\n$ vagrant box add hashicorp/precise64\n```\n\n**使用**\n\n修改 `Vagantfile` 文件\n\n```bash\nVagrant.configure(\"2\") do |config|\n  config.vm.box = \"hashicorp/precise64\"\nend\n```\n\n**指定版本**\n\n```bash\nVagrant.configure(\"2\") do |config|\n  config.vm.box = \"hashicorp/precise64\"\n  config.vm.box_version = \"1.1.0\"\nend\n```\n\n**指定地址**\n\n```bash\nVagrant.configure(\"2\") do |config|\n  config.vm.box = \"hashicorp/precise64\"\n  config.vm.box_url = \"http://files.vagrantup.com/precise64.box\"\nend\n```\n\n你也可以通过 [Vagant Cloud](https://app.vagrantup.com/boxes/search) 查找 box\n\n- [官网](https://www.vagrantup.com/)\n- [Vagrant](http://sourabhbajaj.com/mac-setup/Vagrant/)\n- [Vagrant Manager](http://vagrantmanager.com/)\n\n","source":"_posts/2018-05-21-mac-use-vagrant.md","raw":"---\ntitle: macOS 使用 Vagrant\ntags:\n  - vagrant\ndate: 2018-05-21 13:47:37\n---\n\n\nVagrant 是非常强大好用的虚拟机管理工具，它依赖于 virtualbox，可以非常方便的在电脑中起各种系统的虚拟机。\n\n<!-- more --><!-- toc -->\n\n## 安装\n\n```bash\n$ brew cask install virtualbox\n$ brew cask install vagrant\n```\n\n## 使用\n\n### 快速开始\n\n**初始化 box **\n\n使用 `centos7` 系统，你也可以从 [Discover Vagrant Boxes](https://app.vagrantup.com/boxes/search) 查找其他系统\n\n```bash\n$ mkdir vagrant && cd vagrant\n$ vagrant init centos/7\n```\n\n**启动虚拟机**\n\n第一次启动时，vagrant 检查到没有指定的系统，会自动下载该镜像，下载目录为 `~/.vagrant.d/boxes`\n\n```bash\n$ vagrant up\n```\n\n**链接**\n\n```bash\n$ vagrant ssh\n```\n\n**关机**\n\n```bash\n$ vagrant halt\n```\n\n**销毁**\n\n```bash\n$ vagrant destroy\n$ vagrant destroy -f    # 不询问\n```\n\n### Boxes\n\n**下载 box**\n\n```bash\n$ vagrant box add hashicorp/precise64\n```\n\n**使用**\n\n修改 `Vagantfile` 文件\n\n```bash\nVagrant.configure(\"2\") do |config|\n  config.vm.box = \"hashicorp/precise64\"\nend\n```\n\n**指定版本**\n\n```bash\nVagrant.configure(\"2\") do |config|\n  config.vm.box = \"hashicorp/precise64\"\n  config.vm.box_version = \"1.1.0\"\nend\n```\n\n**指定地址**\n\n```bash\nVagrant.configure(\"2\") do |config|\n  config.vm.box = \"hashicorp/precise64\"\n  config.vm.box_url = \"http://files.vagrantup.com/precise64.box\"\nend\n```\n\n你也可以通过 [Vagant Cloud](https://app.vagrantup.com/boxes/search) 查找 box\n\n- [官网](https://www.vagrantup.com/)\n- [Vagrant](http://sourabhbajaj.com/mac-setup/Vagrant/)\n- [Vagrant Manager](http://vagrantmanager.com/)\n\n","slug":"mac-use-vagrant","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2adb00fw5gqop3czz0xw"},{"title":"Linux 下载 dig","date":"2018-05-22T15:45:44.000Z","_content":"\n我的第一反应是用 `yum install dig` 来下载，呵呵，告诉我不是只有我这样干了。\n\n<!-- more --><!-- toc -->\n\n**CentOS**\n\n```bash\n$ sudo yum install -y bind-utils\n```\n\n**Ubuntu**\n\n```bash\n$ sudo apt install 0y dnsutils\n```\n","source":"_posts/2018-05-22-linux-install-dig.md","raw":"---\ntitle: Linux 下载 dig\ndate: 2018-05-22 15:45:44\ntags: [linux]\n---\n\n我的第一反应是用 `yum install dig` 来下载，呵呵，告诉我不是只有我这样干了。\n\n<!-- more --><!-- toc -->\n\n**CentOS**\n\n```bash\n$ sudo yum install -y bind-utils\n```\n\n**Ubuntu**\n\n```bash\n$ sudo apt install 0y dnsutils\n```\n","slug":"linux-install-dig","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2adc00fy5gqocijud8i3"},{"title":"Openresty 使用 upsync 模块实现服务自动发现","date":"2018-05-24T09:25:33.000Z","_content":"\n当业务量激增时，增减服务器是很频繁的事，每次手动修改配置文件的 `upstream` 并不是让人满意的做法，每次增加了服务器 nginx 可以自动刷新就好了，这时候需要使用到 upsync 模块。\n\n<!-- more --><!-- toc -->\n\n## 安装模块\n\nopenresty 版本为 1.11.2.2，通过动态加载的方式导入。\n\n**下载并解压模块**\n\n```bash\n$ wget https://github.com/weibocom/nginx-upsync-module/archive/v2.0.0.tar.gz\n$ tar -zxvf v2.0.0.tar.gz\n\ndrwxrwxr-x  5 ec2-user ec2-user     4096 Jul  2  2017 nginx-upsync-module-2.0.0\n```\n\n**下载 openresty**\n\n```bash\n$ wget https://openresty.org/download/openresty-1.11.2.2.tar.gz\n$ tar -zxvf openresty-1.11.2.2.tar.gz\n\ndrwxrwxr-x  6 ec2-user ec2-user     4096 May 23 06:20 openresty-1.11.2.2\n```\n\n**编译安装**\n\n```bash\n$ ./configure --prefix=/usr/local/openresty --add-dynamic-module=../nginx-upsync-module-2.0.0\n$ sudo gmake && sudo gmake install\n```\n\n然后在 `/usr/local/openresty/nginx/modules` 目录下会出现 `ngx_http_upsync_module.so` 模块文件，然后在 nginx.conf 中导入\n\n```bash\nload_module modules/ngx_http_upsync_module.so;\n\nevents {\n    worker_connections  1024;\n}\n```\n\n\n## etcd\n\nupsync 模块支持 consul 和 etcd 两种服务发现服务，在这里我们使用 etcd，如果你不了解 etcd，请看[这里](/2018/05/23/etcd/)\n\n我们添加两个服务到 `k/v` 储存中\n\n```bash\n$ etcdctl set upstreams/127.0.0.1:8001 '{\"server\": \"127.0.0.1:8001\"}'\n$ etcdctl set upstreams/127.0.0.1:8002 '{\"server\": \"127.0.0.1:8002\"}'\n```\n\n查看文件夹 `upstreams/`\n\n```bash\n$ curl http://127.0.0.1:2379/v2/keys/upstreams/\n\n{\"action\":\"get\",\"node\":{\"key\":\"/upstreams\",\"dir\":true,\"nodes\":[{\"key\":\"/upstreams/127.0.0.1:8001\",\"value\":\"{\\\"server\\\": \\\"127.0.0.1:8001\\\"}\",\"modifiedIndex\":4,\"createdIndex\":4},{\"key\":\"/upstreams/127.0.0.1:8002\",\"value\":\"{\\\"server\\\": \\\"120.0.0.1:8002\\\"}\",\"modifiedIndex\":5,\"createdIndex\":5}],\"modifiedIndex\":4,\"createdIndex\":4}}\n```\n\n## upstream 配置\n\nupstream 配置如下：\n\n```bash\nupstream test {\n    server localhost:8003 ;\n    upsync 127.0.0.1:2379/v2/keys/upstreams/ upsync_timeout=6m upsync_interval=500ms upsync_type=etcd strong_dependency=off;\n    upsync_dump_path /usr/local/openresty/nginx/conf/servers/servers_test.conf;\n}\n\nserver {\n    listen       80;\n    server_name  localhost;\n\n    location / {\n        proxy_pass http://test;\n    }\n\n    location /upstream_list {\n        upstream_show;\n    }\n}\n```\n\n参数 `upsync_dump_path` 的作用在于将 `upstreams/` 的内容备份到本地，并作为 `upstream` 列表使用，`servers_test.conf` 内容如下\n\n```bash\nserver 127.0.0.1:8001 weight=1 max_fails=2 fail_timeout=10s;\nserver 127.0.0.1:8002 weight=1 max_fails=2 fail_timeout=10s;\n```\n\n当 `servers_test.conf` 成功下载后，配置 `server localhost:8003;` 将不再生效，它仅仅是为了不让 nginx 报错而存在的。\n\n`upstream_show` 的作用是返回当前服务列表\n\n```bash\n$ curl localhost/upstream_list\n\nUpstream name: test; Backend server count: 2\n        server 127.0.0.1:8001 weight=1 max_fails=2 fail_timeout=10s;\n        server 127.0.0.1:8002 weight=1 max_fails=2 fail_timeout=10s;\n```\n\n- [nginx-upsync-module](https://github.com/weibocom/nginx-upsync-module)\n","source":"_posts/2018-05-24-nginx-upsync.md","raw":"---\ntitle: Openresty 使用 upsync 模块实现服务自动发现\ndate: 2018-05-24 09:25:33\ntags: [nginx]\n---\n\n当业务量激增时，增减服务器是很频繁的事，每次手动修改配置文件的 `upstream` 并不是让人满意的做法，每次增加了服务器 nginx 可以自动刷新就好了，这时候需要使用到 upsync 模块。\n\n<!-- more --><!-- toc -->\n\n## 安装模块\n\nopenresty 版本为 1.11.2.2，通过动态加载的方式导入。\n\n**下载并解压模块**\n\n```bash\n$ wget https://github.com/weibocom/nginx-upsync-module/archive/v2.0.0.tar.gz\n$ tar -zxvf v2.0.0.tar.gz\n\ndrwxrwxr-x  5 ec2-user ec2-user     4096 Jul  2  2017 nginx-upsync-module-2.0.0\n```\n\n**下载 openresty**\n\n```bash\n$ wget https://openresty.org/download/openresty-1.11.2.2.tar.gz\n$ tar -zxvf openresty-1.11.2.2.tar.gz\n\ndrwxrwxr-x  6 ec2-user ec2-user     4096 May 23 06:20 openresty-1.11.2.2\n```\n\n**编译安装**\n\n```bash\n$ ./configure --prefix=/usr/local/openresty --add-dynamic-module=../nginx-upsync-module-2.0.0\n$ sudo gmake && sudo gmake install\n```\n\n然后在 `/usr/local/openresty/nginx/modules` 目录下会出现 `ngx_http_upsync_module.so` 模块文件，然后在 nginx.conf 中导入\n\n```bash\nload_module modules/ngx_http_upsync_module.so;\n\nevents {\n    worker_connections  1024;\n}\n```\n\n\n## etcd\n\nupsync 模块支持 consul 和 etcd 两种服务发现服务，在这里我们使用 etcd，如果你不了解 etcd，请看[这里](/2018/05/23/etcd/)\n\n我们添加两个服务到 `k/v` 储存中\n\n```bash\n$ etcdctl set upstreams/127.0.0.1:8001 '{\"server\": \"127.0.0.1:8001\"}'\n$ etcdctl set upstreams/127.0.0.1:8002 '{\"server\": \"127.0.0.1:8002\"}'\n```\n\n查看文件夹 `upstreams/`\n\n```bash\n$ curl http://127.0.0.1:2379/v2/keys/upstreams/\n\n{\"action\":\"get\",\"node\":{\"key\":\"/upstreams\",\"dir\":true,\"nodes\":[{\"key\":\"/upstreams/127.0.0.1:8001\",\"value\":\"{\\\"server\\\": \\\"127.0.0.1:8001\\\"}\",\"modifiedIndex\":4,\"createdIndex\":4},{\"key\":\"/upstreams/127.0.0.1:8002\",\"value\":\"{\\\"server\\\": \\\"120.0.0.1:8002\\\"}\",\"modifiedIndex\":5,\"createdIndex\":5}],\"modifiedIndex\":4,\"createdIndex\":4}}\n```\n\n## upstream 配置\n\nupstream 配置如下：\n\n```bash\nupstream test {\n    server localhost:8003 ;\n    upsync 127.0.0.1:2379/v2/keys/upstreams/ upsync_timeout=6m upsync_interval=500ms upsync_type=etcd strong_dependency=off;\n    upsync_dump_path /usr/local/openresty/nginx/conf/servers/servers_test.conf;\n}\n\nserver {\n    listen       80;\n    server_name  localhost;\n\n    location / {\n        proxy_pass http://test;\n    }\n\n    location /upstream_list {\n        upstream_show;\n    }\n}\n```\n\n参数 `upsync_dump_path` 的作用在于将 `upstreams/` 的内容备份到本地，并作为 `upstream` 列表使用，`servers_test.conf` 内容如下\n\n```bash\nserver 127.0.0.1:8001 weight=1 max_fails=2 fail_timeout=10s;\nserver 127.0.0.1:8002 weight=1 max_fails=2 fail_timeout=10s;\n```\n\n当 `servers_test.conf` 成功下载后，配置 `server localhost:8003;` 将不再生效，它仅仅是为了不让 nginx 报错而存在的。\n\n`upstream_show` 的作用是返回当前服务列表\n\n```bash\n$ curl localhost/upstream_list\n\nUpstream name: test; Backend server count: 2\n        server 127.0.0.1:8001 weight=1 max_fails=2 fail_timeout=10s;\n        server 127.0.0.1:8002 weight=1 max_fails=2 fail_timeout=10s;\n```\n\n- [nginx-upsync-module](https://github.com/weibocom/nginx-upsync-module)\n","slug":"nginx-upsync","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2add00g15gqo7fgl3nq0"},{"title":"Shell 语言如何 split 字符串","date":"2018-05-26T08:52:10.000Z","_content":"\nshell 语言本身不支持 `split` 语法，但是我们可以通过一些变通的方法来实现。\n\n<!-- more --><!-- toc -->\n\n```bash\nstr=\"aaa bbb ccc ddd\"\narr=(${str})\necho $arr           # aaa\necho ${arr[@]}      # aaa bbb ccc ddd\necho ${!arr[@]}     # 0 1 2 3\necho ${arr[0]}      # aaa\n```\n\n```bash\nstr=\"aaa,bbb,ccc,ddd\"\narr=(${str//,/ })   # 将 , 替换为空格\narr=(${str})\necho $arr           # aaa\necho ${arr[@]}      # aaa bbb ccc ddd\necho ${!arr[@]}     # 0 1 2 3\necho ${arr[0]}      # aaa\n```\n","source":"_posts/2018-05-26-shell-split.md","raw":"---\ntitle: Shell 语言如何 split 字符串\ndate: 2018-05-26 08:52:10\ntags: [shell]\n---\n\nshell 语言本身不支持 `split` 语法，但是我们可以通过一些变通的方法来实现。\n\n<!-- more --><!-- toc -->\n\n```bash\nstr=\"aaa bbb ccc ddd\"\narr=(${str})\necho $arr           # aaa\necho ${arr[@]}      # aaa bbb ccc ddd\necho ${!arr[@]}     # 0 1 2 3\necho ${arr[0]}      # aaa\n```\n\n```bash\nstr=\"aaa,bbb,ccc,ddd\"\narr=(${str//,/ })   # 将 , 替换为空格\narr=(${str})\necho $arr           # aaa\necho ${arr[@]}      # aaa bbb ccc ddd\necho ${!arr[@]}     # 0 1 2 3\necho ${arr[0]}      # aaa\n```\n","slug":"shell-split","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ade00g35gqon8ovfadr"},{"title":"Docker 容器的自动启动","date":"2018-05-25T15:51:19.000Z","_content":"\n使用 docker 时需要这样的需求，在服务器重启后，docker 自动启动，但是容器没有启动。\n\n<!-- more --><!-- toc -->\n想要做到容器自动启动需要配合 `--restart` 参数，取值如下：\n- `no` 不会重启，默认值\n- `on-failure` 如果容器由于错误而退出，则将其重新启动，该错误表现为非零退出代码。\n- `unless-stopped` 重新启动容器，除非它明确停止或者Docker本身停止或重新启动。\n- `always` 如果停止，请始终重新启动容器。\n\n一般使用 `on-failure` 参数即可，可以指定重试次数。\n\n```bash\n$ docker run --restart on-failure:10\n```\n\n需要注意的是  `--restart` 与 `--rm` 参数不能共同存在\n\n- [Start containers automatically](https://docs.docker.com/config/containers/start-containers-automatically/)\n","source":"_posts/2018-05-25-docker-restart.md","raw":"---\ntitle: Docker 容器的自动启动\ndate: 2018-05-25 15:51:19\ntags: [docker]\n---\n\n使用 docker 时需要这样的需求，在服务器重启后，docker 自动启动，但是容器没有启动。\n\n<!-- more --><!-- toc -->\n想要做到容器自动启动需要配合 `--restart` 参数，取值如下：\n- `no` 不会重启，默认值\n- `on-failure` 如果容器由于错误而退出，则将其重新启动，该错误表现为非零退出代码。\n- `unless-stopped` 重新启动容器，除非它明确停止或者Docker本身停止或重新启动。\n- `always` 如果停止，请始终重新启动容器。\n\n一般使用 `on-failure` 参数即可，可以指定重试次数。\n\n```bash\n$ docker run --restart on-failure:10\n```\n\n需要注意的是  `--restart` 与 `--rm` 参数不能共同存在\n\n- [Start containers automatically](https://docs.docker.com/config/containers/start-containers-automatically/)\n","slug":"docker-restart","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2adg00g55gqobbelivk0"},{"title":"etcd 服务发现","date":"2018-05-23T15:54:04.000Z","_content":"\n> [etcd](https://github.com/coreos/etcd/) 是 CoreOS 团队于 2013 年 6 月发起的开源项目，它的目标是构建一个高可用的分布式键值(key-value)数据库。etcd 内部采用 raft 协议作为一致性算法，etcd 基于 Go 语言实现。\n\n<!-- more --><!-- toc -->\netcd 作为服务发现系统，有以下的特点：\n- 简单：安装配置简单，而且提供了HTTP API进行交互，使用也很简单\n- 安全：支持SSL证书验证\n- 快速：根据官方提供的benchmark数据，单实例支持每秒2k+读操作\n- 可靠：采用raft算法，实现分布式系统数据的可用性和一致性\n\n## 下载安装\n\n首先从 [releases](https://github.com/coreos/etcd/releases) 列表中查找最新版本并下载\n\n```bash\n$ sudo wget https://github.com/coreos/etcd/releases/download/v3.3.5/etcd-v3.3.5-linux-amd64.tar.gz\n$ tar -zxvf etcd-v3.3.5-linux-amd64.tar.gz\n```\n\n因为etcd是go语言编写的，安装只需要下载对应的二进制文件 `etcd` 和 `etcdctl` 放入环境变量中即可\n\n```bash\n$ cd etcd-v3.3.5-linux-amd64\n$ sudo cp -R etcd* /usr/local/bin\n```\n\n运行\n\n```bash\n$ etcd\n\n2018-05-23 16:16:09.403005 I | etcdmain: etcd Version: 3.3.5\n2018-05-23 16:16:09.403104 I | etcdmain: Git SHA: GitNotFound\n2018-05-23 16:16:09.403109 I | etcdmain: Go Version: go1.10.2\n2018-05-23 16:16:09.403114 I | etcdmain: Go OS/Arch: darwin/amd64\n2018-05-23 16:16:09.403122 I | etcdmain: setting maximum number of CPUs to 8, total number of available CPUs is 8\n2018-05-23 16:16:09.403130 N | etcdmain: failed to detect default host (default host not supported on darwin_amd64)\n2018-05-23 16:16:09.403140 W | etcdmain: no data-dir provided, using default data-dir ./default.etcd\n2018-05-23 16:16:09.403670 I | embed: listening for peers on http://localhost:2380\n2018-05-23 16:16:09.403854 I | embed: listening for client requests on localhost:2379\n2018-05-23 16:16:09.405312 I | etcdserver: name = default\n2018-05-23 16:16:09.405332 I | etcdserver: data dir = default.etcd\n2018-05-23 16:16:09.405341 I | etcdserver: member dir = default.etcd/member\n2018-05-23 16:16:09.405347 I | etcdserver: heartbeat = 100ms\n2018-05-23 16:16:09.405354 I | etcdserver: election = 1000ms\n2018-05-23 16:16:09.405360 I | etcdserver: snapshot count = 100000\n2018-05-23 16:16:09.405386 I | etcdserver: advertise client URLs = http://localhost:2379\n2018-05-23 16:16:09.405394 I | etcdserver: initial advertise peer URLs = http://localhost:2380\n2018-05-23 16:16:09.405406 I | etcdserver: initial cluster = default=http://localhost:2380\n2018-05-23 16:16:09.574156 I | etcdserver: starting member 8e9e05c52164694d in cluster cdf818194e3a8c32\n2018-05-23 16:16:09.574211 I | raft: 8e9e05c52164694d became follower at term 0\n2018-05-23 16:16:09.574238 I | raft: newRaft 8e9e05c52164694d [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]\n2018-05-23 16:16:09.574244 I | raft: 8e9e05c52164694d became follower at term 1\n2018-05-23 16:16:09.581795 W | auth: simple token is not cryptographically signed\n2018-05-23 16:16:09.582432 I | etcdserver: starting server... [version: 3.3.5, cluster version: to_be_decided]\n2018-05-23 16:16:09.582519 E | etcdserver: cannot monitor file descriptor usage (cannot get FDUsage on darwin)\n2018-05-23 16:16:09.582534 I | etcdserver: 8e9e05c52164694d as single-node; fast-forwarding 9 ticks (election ticks 10)\n2018-05-23 16:16:09.582946 I | etcdserver/membership: added member 8e9e05c52164694d [http://localhost:2380] to cluster cdf818194e3a8c32\n2018-05-23 16:16:10.581028 I | raft: 8e9e05c52164694d is starting a new election at term 1\n2018-05-23 16:16:10.581069 I | raft: 8e9e05c52164694d became candidate at term 2\n2018-05-23 16:16:10.581097 I | raft: 8e9e05c52164694d received MsgVoteResp from 8e9e05c52164694d at term 2\n2018-05-23 16:16:10.581114 I | raft: 8e9e05c52164694d became leader at term 2\n2018-05-23 16:16:10.581123 I | raft: raft.node: 8e9e05c52164694d elected leader 8e9e05c52164694d at term 2\n2018-05-23 16:16:10.581325 I | etcdserver: setting up the initial cluster version to 3.3\n2018-05-23 16:16:10.581489 I | embed: ready to serve client requests\n2018-05-23 16:16:10.581623 I | etcdserver: published {Name:default ClientURLs:[http://localhost:2379]} to cluster cdf818194e3a8c32\n2018-05-23 16:16:10.582287 N | embed: serving insecure client requests on 127.0.0.1:2379, this is strongly discouraged!\n2018-05-23 16:16:10.594227 N | etcdserver/membership: set the initial cluster version to 3.3\n2018-05-23 16:16:10.594332 I | etcdserver/api: enabled capabilities for version 3.3\n```\n\n etcd 目前默认使用2379端口提供HTTP API服务，2380端口和peer通信(这两个端口已经被IANA官方预留给etcd)\n\n## 简单使用\n\netcd 提供了 `etcdctl` 命令行和 `RESTful` 风格的 HTTP 接口\n\n### k/v 存储\n\n`k/v` 存储也是 Nginx `upsync` 模块中主要用的功能，用于灵活的存储\n\n**添加/修改**\n\n```bash\n$ etcdctl set upstreams/127.0.0.1:8001 '{\"server\": \"127.0.0.1:8001\"}'\n\n{\"server\": \"127.0.0.1:8001\"}\n```\n\n`HTTP` 接口方式会返回完整的数据结构\n```bash\n$ curl -X PUT http://127.0.0.1:2379/v2/keys/upstreams/127.0.0.1:8004 -d value='{\"server\": \"120.0.0.1:8004\"}'\n\n{\"action\":\"set\",\"node\":{\"key\":\"/upstreams/127.0.0.1:8004\",\"value\":\"{\\\"server\\\": \\\"120.0.0.1:8004\\\"}\",\"modifiedIndex\":5,\"createdIndex\":5}}\n```\n\n**获取**\n\n```bash\n$ etcdctl get upstreams/127.0.0.1:8001\n\n{\"server\": \"127.0.0.1:8001\"}\n```\n\n```bash\n$ curl http://127.0.0.1:2379/v2/keys/upstreams/127.0.0.1:8004\n\n{\"action\":\"set\",\"node\":{\"key\":\"/upstreams/127.0.0.1:8004\",\"value\":\"{\\\"server\\\": \\\"120.0.0.1:8004\\\"}\",\"modifiedIndex\":5,\"createdIndex\":5}}\n```\n\n`upstreams/127.0.0.1:8001` 作为 key，中间的 `/` 相当于在文件夹标示。`HTTP` 接口方式可以获取文件夹下的所有内容，这也是 `upsync` 模块中使用的方式\n\n```bash\n$ curl http://127.0.0.1:2379/v2/keys/upstreams/\n\n{\"action\":\"get\",\"node\":{\"key\":\"/upstreams\",\"dir\":true,\"nodes\":[{\"key\":\"/upstreams/127.0.0.1:8001\",\"value\":\"{\\\"server\\\": \\\"127.0.0.1:8001\\\"}\",\"modifiedIndex\":4,\"createdIndex\":4},{\"key\":\"/upstreams/127.0.0.1:8004\",\"value\":\"{\\\"server\\\": \\\"120.0.0.1:8004\\\"}\",\"modifiedIndex\":5,\"createdIndex\":5}],\"modifiedIndex\":4,\"createdIndex\":4}}\n```\n\n\n**删除**\n\n```bash\n$ etcdctl rm upstreams/127.0.0.1:8001\n\nPrevNode.Value: {\"server\": \"127.0.0.1:8001\"}\n```\n\n```bash\n$ curl -X DELETE http://127.0.0.1:2379/v2/keys/upstreams/127.0.0.1:8004\n\n{\"action\":\"delete\",\"node\":{\"key\":\"/upstreams/127.0.0.1:8004\",\"modifiedIndex\":7,\"createdIndex\":5},\"prevNode\":{\"key\":\"/upstreams/127.0.0.1:8004\",\"value\":\"{\\\"server\\\": \\\"120.0.0.1:8004\\\"}\",\"modifiedIndex\":5,\"createdIndex\":5}}\n```\n\n**TTL**\n\n我们也可以给 key 设置一个有效期，单位为秒\n\n```bash\n$ etcdctl set /foo \"Expiring Soon\" --ttl 20\n\nExpiring Soon\n```\n\n```bash\n$ curl -X PUT http://127.0.0.1:2379/v2/keys/foo?ttl=20 -d value=bar\n\n{\"action\":\"set\",\"node\":{\"key\":\"/foo\",\"value\":\"bar\",\"expiration\":\"2014-02-10T19:54:49.357382223Z\",\"ttl\":20,\"modifiedIndex\":31,\"createdIndex\":31}}\n```\n\n更多使用见[文档](https://coreos.com/etcd/docs/latest/getting-started-with-etcd.html)\n\n\n\n- [etcd使用入门](https://www.hi-linux.com/posts/40915.html)\n","source":"_posts/2018-05-23-etcd.md","raw":"---\ntitle: etcd 服务发现\ndate: 2018-05-23 15:54:04\ntags: [linux]\n---\n\n> [etcd](https://github.com/coreos/etcd/) 是 CoreOS 团队于 2013 年 6 月发起的开源项目，它的目标是构建一个高可用的分布式键值(key-value)数据库。etcd 内部采用 raft 协议作为一致性算法，etcd 基于 Go 语言实现。\n\n<!-- more --><!-- toc -->\netcd 作为服务发现系统，有以下的特点：\n- 简单：安装配置简单，而且提供了HTTP API进行交互，使用也很简单\n- 安全：支持SSL证书验证\n- 快速：根据官方提供的benchmark数据，单实例支持每秒2k+读操作\n- 可靠：采用raft算法，实现分布式系统数据的可用性和一致性\n\n## 下载安装\n\n首先从 [releases](https://github.com/coreos/etcd/releases) 列表中查找最新版本并下载\n\n```bash\n$ sudo wget https://github.com/coreos/etcd/releases/download/v3.3.5/etcd-v3.3.5-linux-amd64.tar.gz\n$ tar -zxvf etcd-v3.3.5-linux-amd64.tar.gz\n```\n\n因为etcd是go语言编写的，安装只需要下载对应的二进制文件 `etcd` 和 `etcdctl` 放入环境变量中即可\n\n```bash\n$ cd etcd-v3.3.5-linux-amd64\n$ sudo cp -R etcd* /usr/local/bin\n```\n\n运行\n\n```bash\n$ etcd\n\n2018-05-23 16:16:09.403005 I | etcdmain: etcd Version: 3.3.5\n2018-05-23 16:16:09.403104 I | etcdmain: Git SHA: GitNotFound\n2018-05-23 16:16:09.403109 I | etcdmain: Go Version: go1.10.2\n2018-05-23 16:16:09.403114 I | etcdmain: Go OS/Arch: darwin/amd64\n2018-05-23 16:16:09.403122 I | etcdmain: setting maximum number of CPUs to 8, total number of available CPUs is 8\n2018-05-23 16:16:09.403130 N | etcdmain: failed to detect default host (default host not supported on darwin_amd64)\n2018-05-23 16:16:09.403140 W | etcdmain: no data-dir provided, using default data-dir ./default.etcd\n2018-05-23 16:16:09.403670 I | embed: listening for peers on http://localhost:2380\n2018-05-23 16:16:09.403854 I | embed: listening for client requests on localhost:2379\n2018-05-23 16:16:09.405312 I | etcdserver: name = default\n2018-05-23 16:16:09.405332 I | etcdserver: data dir = default.etcd\n2018-05-23 16:16:09.405341 I | etcdserver: member dir = default.etcd/member\n2018-05-23 16:16:09.405347 I | etcdserver: heartbeat = 100ms\n2018-05-23 16:16:09.405354 I | etcdserver: election = 1000ms\n2018-05-23 16:16:09.405360 I | etcdserver: snapshot count = 100000\n2018-05-23 16:16:09.405386 I | etcdserver: advertise client URLs = http://localhost:2379\n2018-05-23 16:16:09.405394 I | etcdserver: initial advertise peer URLs = http://localhost:2380\n2018-05-23 16:16:09.405406 I | etcdserver: initial cluster = default=http://localhost:2380\n2018-05-23 16:16:09.574156 I | etcdserver: starting member 8e9e05c52164694d in cluster cdf818194e3a8c32\n2018-05-23 16:16:09.574211 I | raft: 8e9e05c52164694d became follower at term 0\n2018-05-23 16:16:09.574238 I | raft: newRaft 8e9e05c52164694d [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]\n2018-05-23 16:16:09.574244 I | raft: 8e9e05c52164694d became follower at term 1\n2018-05-23 16:16:09.581795 W | auth: simple token is not cryptographically signed\n2018-05-23 16:16:09.582432 I | etcdserver: starting server... [version: 3.3.5, cluster version: to_be_decided]\n2018-05-23 16:16:09.582519 E | etcdserver: cannot monitor file descriptor usage (cannot get FDUsage on darwin)\n2018-05-23 16:16:09.582534 I | etcdserver: 8e9e05c52164694d as single-node; fast-forwarding 9 ticks (election ticks 10)\n2018-05-23 16:16:09.582946 I | etcdserver/membership: added member 8e9e05c52164694d [http://localhost:2380] to cluster cdf818194e3a8c32\n2018-05-23 16:16:10.581028 I | raft: 8e9e05c52164694d is starting a new election at term 1\n2018-05-23 16:16:10.581069 I | raft: 8e9e05c52164694d became candidate at term 2\n2018-05-23 16:16:10.581097 I | raft: 8e9e05c52164694d received MsgVoteResp from 8e9e05c52164694d at term 2\n2018-05-23 16:16:10.581114 I | raft: 8e9e05c52164694d became leader at term 2\n2018-05-23 16:16:10.581123 I | raft: raft.node: 8e9e05c52164694d elected leader 8e9e05c52164694d at term 2\n2018-05-23 16:16:10.581325 I | etcdserver: setting up the initial cluster version to 3.3\n2018-05-23 16:16:10.581489 I | embed: ready to serve client requests\n2018-05-23 16:16:10.581623 I | etcdserver: published {Name:default ClientURLs:[http://localhost:2379]} to cluster cdf818194e3a8c32\n2018-05-23 16:16:10.582287 N | embed: serving insecure client requests on 127.0.0.1:2379, this is strongly discouraged!\n2018-05-23 16:16:10.594227 N | etcdserver/membership: set the initial cluster version to 3.3\n2018-05-23 16:16:10.594332 I | etcdserver/api: enabled capabilities for version 3.3\n```\n\n etcd 目前默认使用2379端口提供HTTP API服务，2380端口和peer通信(这两个端口已经被IANA官方预留给etcd)\n\n## 简单使用\n\netcd 提供了 `etcdctl` 命令行和 `RESTful` 风格的 HTTP 接口\n\n### k/v 存储\n\n`k/v` 存储也是 Nginx `upsync` 模块中主要用的功能，用于灵活的存储\n\n**添加/修改**\n\n```bash\n$ etcdctl set upstreams/127.0.0.1:8001 '{\"server\": \"127.0.0.1:8001\"}'\n\n{\"server\": \"127.0.0.1:8001\"}\n```\n\n`HTTP` 接口方式会返回完整的数据结构\n```bash\n$ curl -X PUT http://127.0.0.1:2379/v2/keys/upstreams/127.0.0.1:8004 -d value='{\"server\": \"120.0.0.1:8004\"}'\n\n{\"action\":\"set\",\"node\":{\"key\":\"/upstreams/127.0.0.1:8004\",\"value\":\"{\\\"server\\\": \\\"120.0.0.1:8004\\\"}\",\"modifiedIndex\":5,\"createdIndex\":5}}\n```\n\n**获取**\n\n```bash\n$ etcdctl get upstreams/127.0.0.1:8001\n\n{\"server\": \"127.0.0.1:8001\"}\n```\n\n```bash\n$ curl http://127.0.0.1:2379/v2/keys/upstreams/127.0.0.1:8004\n\n{\"action\":\"set\",\"node\":{\"key\":\"/upstreams/127.0.0.1:8004\",\"value\":\"{\\\"server\\\": \\\"120.0.0.1:8004\\\"}\",\"modifiedIndex\":5,\"createdIndex\":5}}\n```\n\n`upstreams/127.0.0.1:8001` 作为 key，中间的 `/` 相当于在文件夹标示。`HTTP` 接口方式可以获取文件夹下的所有内容，这也是 `upsync` 模块中使用的方式\n\n```bash\n$ curl http://127.0.0.1:2379/v2/keys/upstreams/\n\n{\"action\":\"get\",\"node\":{\"key\":\"/upstreams\",\"dir\":true,\"nodes\":[{\"key\":\"/upstreams/127.0.0.1:8001\",\"value\":\"{\\\"server\\\": \\\"127.0.0.1:8001\\\"}\",\"modifiedIndex\":4,\"createdIndex\":4},{\"key\":\"/upstreams/127.0.0.1:8004\",\"value\":\"{\\\"server\\\": \\\"120.0.0.1:8004\\\"}\",\"modifiedIndex\":5,\"createdIndex\":5}],\"modifiedIndex\":4,\"createdIndex\":4}}\n```\n\n\n**删除**\n\n```bash\n$ etcdctl rm upstreams/127.0.0.1:8001\n\nPrevNode.Value: {\"server\": \"127.0.0.1:8001\"}\n```\n\n```bash\n$ curl -X DELETE http://127.0.0.1:2379/v2/keys/upstreams/127.0.0.1:8004\n\n{\"action\":\"delete\",\"node\":{\"key\":\"/upstreams/127.0.0.1:8004\",\"modifiedIndex\":7,\"createdIndex\":5},\"prevNode\":{\"key\":\"/upstreams/127.0.0.1:8004\",\"value\":\"{\\\"server\\\": \\\"120.0.0.1:8004\\\"}\",\"modifiedIndex\":5,\"createdIndex\":5}}\n```\n\n**TTL**\n\n我们也可以给 key 设置一个有效期，单位为秒\n\n```bash\n$ etcdctl set /foo \"Expiring Soon\" --ttl 20\n\nExpiring Soon\n```\n\n```bash\n$ curl -X PUT http://127.0.0.1:2379/v2/keys/foo?ttl=20 -d value=bar\n\n{\"action\":\"set\",\"node\":{\"key\":\"/foo\",\"value\":\"bar\",\"expiration\":\"2014-02-10T19:54:49.357382223Z\",\"ttl\":20,\"modifiedIndex\":31,\"createdIndex\":31}}\n```\n\n更多使用见[文档](https://coreos.com/etcd/docs/latest/getting-started-with-etcd.html)\n\n\n\n- [etcd使用入门](https://www.hi-linux.com/posts/40915.html)\n","slug":"etcd","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2adh00g75gqol0lg4rx8"},{"title":"MacOS 如何查看系统版本","date":"2018-05-28T14:53:54.000Z","_content":"\n\nmacOS 使用 `sw_vers` 命令即可查看系统版本。\n\n<!-- more --><!-- toc -->\n```bash\n> $ sw_vers\n\nProductName:\tMac OS X\nProductVersion:\t10.11.6\nBuildVersion:\t15G20015\n```\n","source":"_posts/2018-05-28-macos-version.md","raw":"---\ntitle: MacOS 如何查看系统版本\ntags:\n  - mac\ndate: 2018-05-28 14:53:54\n---\n\n\nmacOS 使用 `sw_vers` 命令即可查看系统版本。\n\n<!-- more --><!-- toc -->\n```bash\n> $ sw_vers\n\nProductName:\tMac OS X\nProductVersion:\t10.11.6\nBuildVersion:\t15G20015\n```\n","slug":"macos-version","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2adi00g95gqohjqgsf5a"},{"title":"Shell Echo 语法详解","date":"2018-05-27T21:38:26.000Z","_content":"\n`echo` 可以将字符串打印到标准输出中。\n\n<!-- more --><!-- toc -->\n\n## 字符串输出\n\n字符串带不带双引号的效果是一样的，都是讲字符串输出并解析 `$` 符号\n\n```bash\n$ echo hello world\nhello world\n\n$ echo $PATH\n/usr/bin:/usr/local/bin\n```\n\n单引号包围时不会识别 `$` 符号，只是单纯的将字符串输出\n\n```bash\n$ echo $PATH\n$PATH\n```\n\n` ` ` 号包围时不但识别 `$` 符号，还会将字符串当 `shell` 语句执行\n\n```bash\n$ touch test.sh\n$ vim test.sh\necho 'Hello World'\n\n$ chmod +x test.sh\n$ echo `./test.sh`\nHello World\n```\n\n## 参数说明\n\n`echo` 默认输出后会带有回车，加上参数 `-n` 会去掉回车\n\n```bash\n$ echo -n Hello World\nHello World$\n```\n\n`echo` 默认不识别转义字符，即默认使用了 `-E` 参数\n\n```bash\n$ echo 'Hello\\nWorld'\nHello\\nWorld\n```\n\n使用 `-e` 参数可以解析转义字符\n\n```bash\n$ echo -e 'Hello\\nWorld'\nHello\nWorld\n```\n\n还可以解析下列转义字符\n\n```bash\n\\\\    反斜杠\n\\a    响铃声\n\\b    退格\n\\c    不再产生新的输出\n\\e    转义符\n\\f    换页\n\\n    新行\n\\r    回车\n\\t    水平制表符\n\\v    竖直制表符\n\\0NNN   字节数以八进制数 NNN (1至3位)表示\n\\xHH    字节数以十六进制数 HH (1至2位)表示\n```\n\n## 输出到文件\n\n使用 `>` 可以将字符串覆盖到文件中\n\n```bash\n$ echo 'Hello World' > hello.txt\n$ cat hello.txt\nHello World\n\n$ echo 'Hello Wxnacy' > hello.txt\n$ cat hello.txt\nHello Wxnacy\n```\n\n使用 `>>` 可以将字符串追加到文件中\n\n```bash\n$ echo 'Hello World' >> hello1.txt\n$ echo 'Hello Wxnacy' >> hello1.txt\n$ cat hello1.txt\nHello World\nHello Wxnacy\n```\n\n\n- [ECHO](http://man7.org/linux/man-pages/man1/echo.1.html)\n","source":"_posts/2018-05-27-echo.md","raw":"---\ntitle: Shell Echo 语法详解\ndate: 2018-05-27 21:38:26\ntags: [shell]\n---\n\n`echo` 可以将字符串打印到标准输出中。\n\n<!-- more --><!-- toc -->\n\n## 字符串输出\n\n字符串带不带双引号的效果是一样的，都是讲字符串输出并解析 `$` 符号\n\n```bash\n$ echo hello world\nhello world\n\n$ echo $PATH\n/usr/bin:/usr/local/bin\n```\n\n单引号包围时不会识别 `$` 符号，只是单纯的将字符串输出\n\n```bash\n$ echo $PATH\n$PATH\n```\n\n` ` ` 号包围时不但识别 `$` 符号，还会将字符串当 `shell` 语句执行\n\n```bash\n$ touch test.sh\n$ vim test.sh\necho 'Hello World'\n\n$ chmod +x test.sh\n$ echo `./test.sh`\nHello World\n```\n\n## 参数说明\n\n`echo` 默认输出后会带有回车，加上参数 `-n` 会去掉回车\n\n```bash\n$ echo -n Hello World\nHello World$\n```\n\n`echo` 默认不识别转义字符，即默认使用了 `-E` 参数\n\n```bash\n$ echo 'Hello\\nWorld'\nHello\\nWorld\n```\n\n使用 `-e` 参数可以解析转义字符\n\n```bash\n$ echo -e 'Hello\\nWorld'\nHello\nWorld\n```\n\n还可以解析下列转义字符\n\n```bash\n\\\\    反斜杠\n\\a    响铃声\n\\b    退格\n\\c    不再产生新的输出\n\\e    转义符\n\\f    换页\n\\n    新行\n\\r    回车\n\\t    水平制表符\n\\v    竖直制表符\n\\0NNN   字节数以八进制数 NNN (1至3位)表示\n\\xHH    字节数以十六进制数 HH (1至2位)表示\n```\n\n## 输出到文件\n\n使用 `>` 可以将字符串覆盖到文件中\n\n```bash\n$ echo 'Hello World' > hello.txt\n$ cat hello.txt\nHello World\n\n$ echo 'Hello Wxnacy' > hello.txt\n$ cat hello.txt\nHello Wxnacy\n```\n\n使用 `>>` 可以将字符串追加到文件中\n\n```bash\n$ echo 'Hello World' >> hello1.txt\n$ echo 'Hello Wxnacy' >> hello1.txt\n$ cat hello1.txt\nHello World\nHello Wxnacy\n```\n\n\n- [ECHO](http://man7.org/linux/man-pages/man1/echo.1.html)\n","slug":"echo","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2adk00gb5gqo1xtdv9gj"},{"title":"Nginx http 强制跳转 https 地址","date":"2018-05-30T13:55:35.000Z","_content":"\n`https` 越来越普及，但是当用户自己访问 `http` 是控制不了的，所以强制跳转的功能就必不可少了，下面是几种强制跳转的方法\n\n<!-- more -->\n<!-- toc -->\n\n## return 301\n\n返回 301 错误，并跳转到 https 地址\n```bash\nserver {\n    listen       80;\n    server_name  wxnacy.com;\n    return       301 https://$server_name$request_uri;\n}\n```\n\n## rewrite\n\n将 http 请求重写到 https 地址\n\n```bash\nrewrite ^ https://$server_name$request_uri? permanent;\n```\n\n两者相比，`301` 的方式在搜索引擎速度上要块一些。\n\n## error_page 497\n\n```bash\nerror code 497: normal request was sent to HTTPS\n```\n\n在一个站点只允许 https 访问时, 如果使用 http 访问会报出497错误码\n\n```bash\nerror_page 497  https://$host$uri?$args;\n```\n\n## index.html refresh\n\n百度页面 `http://baidu.com` 自动跳转 `http://www.baidu.com` 是灵活利用了 `meta` 的刷新属性\n\n```bash\n> $ curl http://baidu.com\n\n<html>\n<meta http-equiv=\"refresh\" content=\"0;url=http://www.baidu.com/\">\n</meta>html>\n```\n\n\n","source":"_posts/2018-05-30-nginx-http-https.md","raw":"---\ntitle: Nginx http 强制跳转 https 地址\ntags:\n  - nginx\ndate: 2018-05-30 13:55:35\n---\n\n`https` 越来越普及，但是当用户自己访问 `http` 是控制不了的，所以强制跳转的功能就必不可少了，下面是几种强制跳转的方法\n\n<!-- more -->\n<!-- toc -->\n\n## return 301\n\n返回 301 错误，并跳转到 https 地址\n```bash\nserver {\n    listen       80;\n    server_name  wxnacy.com;\n    return       301 https://$server_name$request_uri;\n}\n```\n\n## rewrite\n\n将 http 请求重写到 https 地址\n\n```bash\nrewrite ^ https://$server_name$request_uri? permanent;\n```\n\n两者相比，`301` 的方式在搜索引擎速度上要块一些。\n\n## error_page 497\n\n```bash\nerror code 497: normal request was sent to HTTPS\n```\n\n在一个站点只允许 https 访问时, 如果使用 http 访问会报出497错误码\n\n```bash\nerror_page 497  https://$host$uri?$args;\n```\n\n## index.html refresh\n\n百度页面 `http://baidu.com` 自动跳转 `http://www.baidu.com` 是灵活利用了 `meta` 的刷新属性\n\n```bash\n> $ curl http://baidu.com\n\n<html>\n<meta http-equiv=\"refresh\" content=\"0;url=http://www.baidu.com/\">\n</meta>html>\n```\n\n\n","slug":"nginx-http-https","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2adm00gd5gqo15j6dh6y"},{"title":"Shell 判断字符串包含关系","date":"2018-05-29T15:22:34.000Z","_content":"\n\n在 shell 脚本中有几种可以判断字符串包含的关系。\n\n<!-- more --><!-- toc -->\n\n**利用 grep**\n\n```bash\nstrA=\"long string\"\nstrB=\"string\"\nresult=$(echo $strA | grep \"${strB}\")\nif [[ \"$result\" != \"\" ]]\nthen\n    echo \"包含\"\nelse\n    echo \"不包含\"\nfi\n```\n\n**利用运算符**\n\n```bash\nstrA=\"helloworld\"\nstrB=\"low\"\nif [[ $strA =~ $strB ]]\nthen\n    echo \"包含\"\nelse\n    echo \"不包含\"\nfi\n```\n\n**利用通配符**\n\n```bash\nA=\"helloworld\"\nB=\"low\"\nif [[ $A == *$B* ]]\nthen\n    echo \"包含\"\nelse\n    echo \"不包含\"\nfi\n```\n\n- [Shell判断字符串包含关系的几种方法](https://blog.csdn.net/iamlihongwei/article/details/59484029)\n","source":"_posts/2018-05-29-shell-string-contain.md","raw":"---\ntitle: Shell 判断字符串包含关系\ntags:\n  - shell\ndate: 2018-05-29 15:22:34\n---\n\n\n在 shell 脚本中有几种可以判断字符串包含的关系。\n\n<!-- more --><!-- toc -->\n\n**利用 grep**\n\n```bash\nstrA=\"long string\"\nstrB=\"string\"\nresult=$(echo $strA | grep \"${strB}\")\nif [[ \"$result\" != \"\" ]]\nthen\n    echo \"包含\"\nelse\n    echo \"不包含\"\nfi\n```\n\n**利用运算符**\n\n```bash\nstrA=\"helloworld\"\nstrB=\"low\"\nif [[ $strA =~ $strB ]]\nthen\n    echo \"包含\"\nelse\n    echo \"不包含\"\nfi\n```\n\n**利用通配符**\n\n```bash\nA=\"helloworld\"\nB=\"low\"\nif [[ $A == *$B* ]]\nthen\n    echo \"包含\"\nelse\n    echo \"不包含\"\nfi\n```\n\n- [Shell判断字符串包含关系的几种方法](https://blog.csdn.net/iamlihongwei/article/details/59484029)\n","slug":"shell-string-contain","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2adn00gf5gqo55dsozph"},{"title":"Expect file 相关操作","date":"2018-05-31T14:55:14.000Z","_content":"\n本章将介绍 Expect 语法中 `file` 的相关操作。\n\n<!-- more --><!-- toc -->\n\n## 判断\n\n**exists**\n\n```bash\nputs [file exists /usr/local/etc]             # 1\nputs [file exists /usr/local/test]            # 0\n```\n\n**type**\n\n`file type name` 可以获取文件类型共 `file, directory, characterSpecial, blockSpecial, fifo, link, socket` 几种类型\n\n```bash\nputs [file type /usr/local/etc]             # directory\nputs [file type /usr/local/etc/redis.conf]  # file\n```\n\n**isdirectory**\n\n```bash\nputs [file isdirectory /usr/local/etc]                 # 1\nputs [file isdirectory /usr/local/etc/redis.conf]      # 0\n```\n\n**isfile**\n\n这里有一点需要注意，除了 `type == file` 全都会返回 0\n\n```bash\nputs [file isfile /usr/local/etc/redis.conf]    # 1\n```\n\n**判断**\n\n```bash\nif {[file isdirectory $f]} {\n    puts yes\n} else {\n    puts no\n}\n```\n\n\n## 操作\n\n**link**\n\n使用 `file link -link_type link_name target_file`\n\n`-link_type` 有两种参数软连接 `-symbolic` 和硬链接 `-hard`，当 `link_name` 已经存在或者 `target_file` 不存在时就会报错\n\n软连接\n\n```bash\nsh> ln -s target_file link_name\nexpect> file link link_name target_file     # 默认为软链接\n```\n\n硬链接\n\n```bash\nsh> ln target_file link_name\nexpect> file link -hard link_name target_file\n```\n\n查看软连接的连接对象\n\n```bash\nfile readlink link_name\n```\n\n**join**\n\n使用当前系统的路径分隔符将一个或多个相对目录文件名连接起来，如果有绝对路径，则前边的参数将会被舍弃掉\n\n```bash\nputs [file join a b c]      # a/b/c\nputs [file join a /b c]     # /b/c\n```\n\n**delete**\n\n```bash\nfile delete /usr/local/test/redis.conf\nfile delete -force /usr/local/test      # -force 参数可以删除非空目录\n```\n\n**copy**\n\n用法 `file copy -force source target`\n\n如果复制的是软连接文件，那么复制的也只是链接文件，而不是原文件\n\n```bash\nsh> ll\n-rw-r--r--  1 wxnacy  wheel     0B May 31 16:24 a\nlrwxr-xr-x  1 wxnacy  wheel     1B May 31 16:24 b -> a\n\nexpect> file copy b c\n\nsh> ll\n-rw-r--r--  1 wxnacy  wheel     0B May 31 16:24 a\nlrwxr-xr-x  1 wxnacy  wheel     1B May 31 16:24 b -> a\nlrwxr-xr-x  1 wxnacy  wheel     1B May 31 16:28 c -> a\n```\n\n覆盖目标\n\n```bash\nfile copy -force file1 file2\n```\n\n复制多个文件目录中\n\n```bash\nfile copy file1 file2 dir1\n```\n\n复制目录\n\n```bash\nfile copy dir1 dir2\n```\n\n这里需要注意的是，如果 `dir2` 已经存在，那么 `dir1` 将会复制到 `dir2` 目录中，而在此执行则会报错，应该 `dir2` 中已经包含 `dir1`，此时即使有 `-force` 参数也不行\n\n**rename**\n\n相当于 `sh` 中的 `mv`，用法\n\n```bash\nfile rename ?-force? ?--? source target\nfile rename ?-force? ?--? source ?source ...? targetDir\n```\n\n使用\n\n```bash\nsh> ll\n-rw-r--r--  1 wxnacy  wheel   279B Aug 24  2017 host1\n-rw-r--r--  1 wxnacy  wheel     0B Aug 24  2017 host2\n\nexpect> file rename host1 host3\n\nsh> ll\n-rw-r--r--  1 wxnacy  wheel   279B Aug 24  2017 host1\n-rw-r--r--  1 wxnacy  wheel     0B Aug 24  2017 host2\n-rw-r--r--  1 wxnacy  wheel   279B Aug 24  2017 host3\n```\n\n覆盖\n\n```bash\nsh> ll\n-rw-r--r--  1 wxnacy  wheel   279B Aug 24  2017 host1\n-rw-r--r--  1 wxnacy  wheel     0B Aug 24  2017 host2\n\nexpect> file rename -force host1 host2\n\nsh> ll\n-rw-r--r--  1 wxnacy  wheel   279B Aug 24  2017 host1\n-rw-r--r--  1 wxnacy  wheel   279B Aug 24  2017 host2\n```\n\n移动到目录 `dir1`\n\n```bash\nfile rename host1 host2 dir1\n```\n\n\n## 查看\n\n**dirname**\n\n获取最后一个路径分隔符以前的路径\n\n```bash\nputs [file dirname ~/data/test]     # ~/data\nputs [file dirname ~/data]          # ~/\nputs [file dirname ~]               # /Users\n```\n\n**tail**\n\n获取最后一个路径分隔符以后的路径\n\n```bash\nputs [file dirname ~/data/test]     # test\n```\n\n**rootname**\n\n查看文件名，去掉后缀\n\n```bash\nputs [file rootname do.sh]      # do\n```\n\n**extension**\n\n获取文件名后缀，带有 `.`\n\n```bash\nputs [file extension do.sh]      # .sh\n```\n\n**separator**\n\n获取系统分隔符\n\n```bash\nput [file separator]        # /\nput [file separator ~/data] # /\n```\n\n**split**\n\n分割路径\n\n```bash\nputs [file split ~/data]    # ~ data\n```\n\n**size**\n\n获取文件大小，单位 Bytes\n\n```bash\nputs [file size host1]  # 279\n```\n\n**atime**\n\n查看文件最后查看时间的时间戳\n\n```bash\nputs [file atime host1]     # 1527757243\n```\n\n**mtime**\n\n查看文件最后修改时间的时间戳\n\n```bash\nputs [file mtime host1]     # 1527757243\n```\n\n\n\n- [file](http://wiki.tcl.tk/1041)\n- [man file](https://www.tcl.tk/man/tcl/TclCmd/file.htm)\n","source":"_posts/2018-05-31-expect-file.md","raw":"---\ntitle: Expect file 相关操作\ndate: 2018-05-31 14:55:14\ntags: [expect]\n---\n\n本章将介绍 Expect 语法中 `file` 的相关操作。\n\n<!-- more --><!-- toc -->\n\n## 判断\n\n**exists**\n\n```bash\nputs [file exists /usr/local/etc]             # 1\nputs [file exists /usr/local/test]            # 0\n```\n\n**type**\n\n`file type name` 可以获取文件类型共 `file, directory, characterSpecial, blockSpecial, fifo, link, socket` 几种类型\n\n```bash\nputs [file type /usr/local/etc]             # directory\nputs [file type /usr/local/etc/redis.conf]  # file\n```\n\n**isdirectory**\n\n```bash\nputs [file isdirectory /usr/local/etc]                 # 1\nputs [file isdirectory /usr/local/etc/redis.conf]      # 0\n```\n\n**isfile**\n\n这里有一点需要注意，除了 `type == file` 全都会返回 0\n\n```bash\nputs [file isfile /usr/local/etc/redis.conf]    # 1\n```\n\n**判断**\n\n```bash\nif {[file isdirectory $f]} {\n    puts yes\n} else {\n    puts no\n}\n```\n\n\n## 操作\n\n**link**\n\n使用 `file link -link_type link_name target_file`\n\n`-link_type` 有两种参数软连接 `-symbolic` 和硬链接 `-hard`，当 `link_name` 已经存在或者 `target_file` 不存在时就会报错\n\n软连接\n\n```bash\nsh> ln -s target_file link_name\nexpect> file link link_name target_file     # 默认为软链接\n```\n\n硬链接\n\n```bash\nsh> ln target_file link_name\nexpect> file link -hard link_name target_file\n```\n\n查看软连接的连接对象\n\n```bash\nfile readlink link_name\n```\n\n**join**\n\n使用当前系统的路径分隔符将一个或多个相对目录文件名连接起来，如果有绝对路径，则前边的参数将会被舍弃掉\n\n```bash\nputs [file join a b c]      # a/b/c\nputs [file join a /b c]     # /b/c\n```\n\n**delete**\n\n```bash\nfile delete /usr/local/test/redis.conf\nfile delete -force /usr/local/test      # -force 参数可以删除非空目录\n```\n\n**copy**\n\n用法 `file copy -force source target`\n\n如果复制的是软连接文件，那么复制的也只是链接文件，而不是原文件\n\n```bash\nsh> ll\n-rw-r--r--  1 wxnacy  wheel     0B May 31 16:24 a\nlrwxr-xr-x  1 wxnacy  wheel     1B May 31 16:24 b -> a\n\nexpect> file copy b c\n\nsh> ll\n-rw-r--r--  1 wxnacy  wheel     0B May 31 16:24 a\nlrwxr-xr-x  1 wxnacy  wheel     1B May 31 16:24 b -> a\nlrwxr-xr-x  1 wxnacy  wheel     1B May 31 16:28 c -> a\n```\n\n覆盖目标\n\n```bash\nfile copy -force file1 file2\n```\n\n复制多个文件目录中\n\n```bash\nfile copy file1 file2 dir1\n```\n\n复制目录\n\n```bash\nfile copy dir1 dir2\n```\n\n这里需要注意的是，如果 `dir2` 已经存在，那么 `dir1` 将会复制到 `dir2` 目录中，而在此执行则会报错，应该 `dir2` 中已经包含 `dir1`，此时即使有 `-force` 参数也不行\n\n**rename**\n\n相当于 `sh` 中的 `mv`，用法\n\n```bash\nfile rename ?-force? ?--? source target\nfile rename ?-force? ?--? source ?source ...? targetDir\n```\n\n使用\n\n```bash\nsh> ll\n-rw-r--r--  1 wxnacy  wheel   279B Aug 24  2017 host1\n-rw-r--r--  1 wxnacy  wheel     0B Aug 24  2017 host2\n\nexpect> file rename host1 host3\n\nsh> ll\n-rw-r--r--  1 wxnacy  wheel   279B Aug 24  2017 host1\n-rw-r--r--  1 wxnacy  wheel     0B Aug 24  2017 host2\n-rw-r--r--  1 wxnacy  wheel   279B Aug 24  2017 host3\n```\n\n覆盖\n\n```bash\nsh> ll\n-rw-r--r--  1 wxnacy  wheel   279B Aug 24  2017 host1\n-rw-r--r--  1 wxnacy  wheel     0B Aug 24  2017 host2\n\nexpect> file rename -force host1 host2\n\nsh> ll\n-rw-r--r--  1 wxnacy  wheel   279B Aug 24  2017 host1\n-rw-r--r--  1 wxnacy  wheel   279B Aug 24  2017 host2\n```\n\n移动到目录 `dir1`\n\n```bash\nfile rename host1 host2 dir1\n```\n\n\n## 查看\n\n**dirname**\n\n获取最后一个路径分隔符以前的路径\n\n```bash\nputs [file dirname ~/data/test]     # ~/data\nputs [file dirname ~/data]          # ~/\nputs [file dirname ~]               # /Users\n```\n\n**tail**\n\n获取最后一个路径分隔符以后的路径\n\n```bash\nputs [file dirname ~/data/test]     # test\n```\n\n**rootname**\n\n查看文件名，去掉后缀\n\n```bash\nputs [file rootname do.sh]      # do\n```\n\n**extension**\n\n获取文件名后缀，带有 `.`\n\n```bash\nputs [file extension do.sh]      # .sh\n```\n\n**separator**\n\n获取系统分隔符\n\n```bash\nput [file separator]        # /\nput [file separator ~/data] # /\n```\n\n**split**\n\n分割路径\n\n```bash\nputs [file split ~/data]    # ~ data\n```\n\n**size**\n\n获取文件大小，单位 Bytes\n\n```bash\nputs [file size host1]  # 279\n```\n\n**atime**\n\n查看文件最后查看时间的时间戳\n\n```bash\nputs [file atime host1]     # 1527757243\n```\n\n**mtime**\n\n查看文件最后修改时间的时间戳\n\n```bash\nputs [file mtime host1]     # 1527757243\n```\n\n\n\n- [file](http://wiki.tcl.tk/1041)\n- [man file](https://www.tcl.tk/man/tcl/TclCmd/file.htm)\n","slug":"expect-file","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2adp00gh5gqovyydd13z"},{"title":"Shell 环境中 bash_profile 和 bashrc 的区别","date":"2018-06-01T22:12:49.000Z","_content":"\n\n在 shell 环境中 `~/.bash_profile` 和 `~/.bashrc`  文件都可以都可以配置环境变量等信息，那到底该写到那个文件里边呢？\n\n<!-- more --><!-- toc -->\n首先来了解下 Linux 在登录时会按照如下顺序执行配置文件\n\n```bash\n/etc/profile -> (~/.bash_profile | ~/.bash_login | ~/.profile) -> ~/.bashrc -> /etc/bashrc -> ~/.bash_logout\n```\n\n## /etc/profile\n\n该文件为系统所有用户设置环境信息，只在用户登录时执行一次，并且执行 `/etc/profile.d` 目录下的配置信息\n\n## ~/.bash_profile ~/.bash_login ~/.profile\n\n当前登录用户的环境信息，只在登录时执行一次。\n\n三个文件只会按照顺序执行一个，并且都会执行 `~/.bashrc` 文件，因为在 `~/.bash_profile` 有如下语句\n\n```bash\nif [ -f ~/.bashrc ]; then\n\t. ~/.bashrc\nfi\n```\n\n其中 CentOS 会用 `~/.bash_profile` 文件，Ubuntu 用 `~/.profile` 文件\n\n## ~/.bashrc\n\n当前登录用户的 shell 配置，在执行 `~/.bash_profile` 后会执行该文件\n\n它是交互式 `non-login` 方式，所以每次打开新 shell 都会执行\n\n## /etc/bashrc\n\n如果 `~/.bashrc` 文件中有\n\n```bash\nif [ -f /etc/bashrc ]; then\n\t. /etc/bashrc\nfi\n```\n\n则也会执行它，同时会执行 `/etc/profile.d` 目录下的配置\n\n## ~/.bash_logout\n\n最后用户登出时还会执行 `~/.bash_logout`\n\n最后总结下如果是配置环境变量等信息推荐写到 `~/.bash_profile` 文件中，shell 信息比如 `alias` 等配置推荐写到 `~/.bashrc` 中\n","source":"_posts/2018-06-01-shell-profile.md","raw":"---\ntitle: Shell 环境中 bash_profile 和 bashrc 的区别\ntags:\n  - shell\ndate: 2018-06-01 22:12:49\n---\n\n\n在 shell 环境中 `~/.bash_profile` 和 `~/.bashrc`  文件都可以都可以配置环境变量等信息，那到底该写到那个文件里边呢？\n\n<!-- more --><!-- toc -->\n首先来了解下 Linux 在登录时会按照如下顺序执行配置文件\n\n```bash\n/etc/profile -> (~/.bash_profile | ~/.bash_login | ~/.profile) -> ~/.bashrc -> /etc/bashrc -> ~/.bash_logout\n```\n\n## /etc/profile\n\n该文件为系统所有用户设置环境信息，只在用户登录时执行一次，并且执行 `/etc/profile.d` 目录下的配置信息\n\n## ~/.bash_profile ~/.bash_login ~/.profile\n\n当前登录用户的环境信息，只在登录时执行一次。\n\n三个文件只会按照顺序执行一个，并且都会执行 `~/.bashrc` 文件，因为在 `~/.bash_profile` 有如下语句\n\n```bash\nif [ -f ~/.bashrc ]; then\n\t. ~/.bashrc\nfi\n```\n\n其中 CentOS 会用 `~/.bash_profile` 文件，Ubuntu 用 `~/.profile` 文件\n\n## ~/.bashrc\n\n当前登录用户的 shell 配置，在执行 `~/.bash_profile` 后会执行该文件\n\n它是交互式 `non-login` 方式，所以每次打开新 shell 都会执行\n\n## /etc/bashrc\n\n如果 `~/.bashrc` 文件中有\n\n```bash\nif [ -f /etc/bashrc ]; then\n\t. /etc/bashrc\nfi\n```\n\n则也会执行它，同时会执行 `/etc/profile.d` 目录下的配置\n\n## ~/.bash_logout\n\n最后用户登出时还会执行 `~/.bash_logout`\n\n最后总结下如果是配置环境变量等信息推荐写到 `~/.bash_profile` 文件中，shell 信息比如 `alias` 等配置推荐写到 `~/.bashrc` 中\n","slug":"shell-profile","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2adq00gj5gqohgcj72ow"},{"title":"Linux tee 重定向到文件","date":"2018-06-03T10:25:29.000Z","_content":"\n\n> tee命令用于将数据重定向到文件，另一方面还可以提供一份重定向数据的副本作为后续命令的stdin。简单的说就是把数据重定向到给定文件和屏幕上。\n\n<!-- more --><!-- toc -->\n\n## 使用\n\n```bash\n$ ll | tee test\n\ntotal 20\n-rw-------.  1 vagrant vagrant  382 May 29 01:16 nohup.out\n-rw-rw-r--.  1 vagrant vagrant   51 May 29 10:17 out.txt\n-rw-rw-r--.  1 vagrant vagrant  297 May 29 10:53 test\ndrwxrwxr-x. 21 vagrant vagrant 4096 May 29 09:19 wxnacy.github.io\n-rw-rw-r--.  1 vagrant vagrant 1406 May 29 06:22 wxnacy.log\n```\n\n```bash\n$ cat test\n\ntotal 20\n-rw-------.  1 vagrant vagrant  382 May 29 01:16 nohup.out\n-rw-rw-r--.  1 vagrant vagrant   51 May 29 10:17 out.txt\n-rw-rw-r--.  1 vagrant vagrant  297 May 29 10:53 test\ndrwxrwxr-x. 21 vagrant vagrant 4096 May 29 09:19 wxnacy.github.io\n-rw-rw-r--.  1 vagrant vagrant 1406 May 29 06:22 wxnacy.log\n```\n\n可以看到，`ll` 命令同时输出到 `stdout` 和文件 `test` 中\n\n那它和 `echo >` 有什么区别呢\n\n```bash\n$ echo `ll` > test\n$ cat test\n\n\ntotal 20 -rw-------. 1 vagrant vagrant 382 May 29 01:16 nohup.out -rw-rw-r--. 1 vagrant vagrant 51 May 29 10:17 out.txt -rw-rw-r--. 1 vagrant vagrant 297 May 29 10:15 test drwxrwxr-x. 21 vagrant vagrant 4096 May 29 09:19 wxnacy.github.io -rw-rw-r--. 1 vagrant vagrant 1406 May 29 06:22 wxnacy.log\n```\n\n除了直观的 `\\n` 没有正确输出到文件外，最大的区别在于，如果当前用户没有对输出文件权限时，不能方便的进行输入\n\n```bash\n$ sudo echo `ll` > /var/log/test\n\n-bash: /var/log/test: Permission denied\n```\n\n`>` 会将命令分成两部分，`sudo` 并不能作用到 `/var/log/test` 中，使用 `tee` 就没问题\n\n```bash\n$ ll | sudo tee /var/log/test\n```\n\n## 参数\n\n- -a：向文件中重定向时使用追加模式；\n- -i：忽略中断（interrupt）信号。\n\n`-a` 相当于 `>>` 可以将内容追加的方式输出到文件中\n\n```bash\n$ ll | tee -a test\n```\n\n## 更多实用\n\n**stdin**\n\n```bash\n$ ll | tee test || cat -n\n\ntotal 20\n-rw-------.  1 vagrant vagrant  382 May 29 01:16 nohup.out\n-rw-rw-r--.  1 vagrant vagrant   51 May 29 10:17 out.txt\n-rw-rw-r--.  1 vagrant vagrant  297 May 29 10:53 test\ndrwxrwxr-x. 21 vagrant vagrant 4096 May 29 09:19 wxnacy.github.io\n-rw-rw-r--.  1 vagrant vagrant 1406 May 29 06:22 wxnacy.log\n```\n\n**cat 输入**\n\n```bash\n$ cat <<EOF | tee test\n< Hello World   # 输入目标文本\n< EOF           # 代表结束\n\nHello World\n\n$ cat test\n\nHello World\n```\n","source":"_posts/2018-06-03-tee.md","raw":"---\ntitle: Linux tee 重定向到文件\ntags:\n  - linux\ndate: 2018-06-03 10:25:29\n---\n\n\n> tee命令用于将数据重定向到文件，另一方面还可以提供一份重定向数据的副本作为后续命令的stdin。简单的说就是把数据重定向到给定文件和屏幕上。\n\n<!-- more --><!-- toc -->\n\n## 使用\n\n```bash\n$ ll | tee test\n\ntotal 20\n-rw-------.  1 vagrant vagrant  382 May 29 01:16 nohup.out\n-rw-rw-r--.  1 vagrant vagrant   51 May 29 10:17 out.txt\n-rw-rw-r--.  1 vagrant vagrant  297 May 29 10:53 test\ndrwxrwxr-x. 21 vagrant vagrant 4096 May 29 09:19 wxnacy.github.io\n-rw-rw-r--.  1 vagrant vagrant 1406 May 29 06:22 wxnacy.log\n```\n\n```bash\n$ cat test\n\ntotal 20\n-rw-------.  1 vagrant vagrant  382 May 29 01:16 nohup.out\n-rw-rw-r--.  1 vagrant vagrant   51 May 29 10:17 out.txt\n-rw-rw-r--.  1 vagrant vagrant  297 May 29 10:53 test\ndrwxrwxr-x. 21 vagrant vagrant 4096 May 29 09:19 wxnacy.github.io\n-rw-rw-r--.  1 vagrant vagrant 1406 May 29 06:22 wxnacy.log\n```\n\n可以看到，`ll` 命令同时输出到 `stdout` 和文件 `test` 中\n\n那它和 `echo >` 有什么区别呢\n\n```bash\n$ echo `ll` > test\n$ cat test\n\n\ntotal 20 -rw-------. 1 vagrant vagrant 382 May 29 01:16 nohup.out -rw-rw-r--. 1 vagrant vagrant 51 May 29 10:17 out.txt -rw-rw-r--. 1 vagrant vagrant 297 May 29 10:15 test drwxrwxr-x. 21 vagrant vagrant 4096 May 29 09:19 wxnacy.github.io -rw-rw-r--. 1 vagrant vagrant 1406 May 29 06:22 wxnacy.log\n```\n\n除了直观的 `\\n` 没有正确输出到文件外，最大的区别在于，如果当前用户没有对输出文件权限时，不能方便的进行输入\n\n```bash\n$ sudo echo `ll` > /var/log/test\n\n-bash: /var/log/test: Permission denied\n```\n\n`>` 会将命令分成两部分，`sudo` 并不能作用到 `/var/log/test` 中，使用 `tee` 就没问题\n\n```bash\n$ ll | sudo tee /var/log/test\n```\n\n## 参数\n\n- -a：向文件中重定向时使用追加模式；\n- -i：忽略中断（interrupt）信号。\n\n`-a` 相当于 `>>` 可以将内容追加的方式输出到文件中\n\n```bash\n$ ll | tee -a test\n```\n\n## 更多实用\n\n**stdin**\n\n```bash\n$ ll | tee test || cat -n\n\ntotal 20\n-rw-------.  1 vagrant vagrant  382 May 29 01:16 nohup.out\n-rw-rw-r--.  1 vagrant vagrant   51 May 29 10:17 out.txt\n-rw-rw-r--.  1 vagrant vagrant  297 May 29 10:53 test\ndrwxrwxr-x. 21 vagrant vagrant 4096 May 29 09:19 wxnacy.github.io\n-rw-rw-r--.  1 vagrant vagrant 1406 May 29 06:22 wxnacy.log\n```\n\n**cat 输入**\n\n```bash\n$ cat <<EOF | tee test\n< Hello World   # 输入目标文本\n< EOF           # 代表结束\n\nHello World\n\n$ cat test\n\nHello World\n```\n","slug":"tee","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2adr00gl5gqocq29mi0v"},{"title":"Shell 传递参数","date":"2018-06-04T09:47:47.000Z","_content":"\n\nshell 像所有语言一样可以在执行时传递参数\n\n<!-- more --><!-- toc -->\n\n根据 `$` 加数字的方式可以获取相应的参数\n\n- `$0` 当前脚本的绝对路径文件名\n- `$1` 第一个参数\n- `$2` 第二个参数\n以此类推\n\n`$` 加上其他字符可以获取更多种类参数\n\n```bash\n$#  # 传递到脚本的参数个数\n$*  # 以一个单字符串显示所有向脚本传递的参数。如\"$*\"用「\"」括起来的情况、以\"$1 $2 … $n\"的形式输出所有参数。\n$$  # 脚本运行的当前进程ID号\n$!  # 后台运行的最后一个进程的ID号\n$@  # 与$*相同，但是使用时加引号，并在引号中返回每个参数。如\"$@\"用「\"」括起来的情况、以\"$1\" \"$2\" … \"$n\" 的形式输出所有参数。\n$-  # 显示Shell使用的当前选项，与set命令功能相同。\n$?  # 显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。\n```\n\n\n`$*` 与 `$@` 区别：\n- 相同点：都是引用所有参数。\n- 不同点：只有在双引号中体现出来。假设在脚本运行时写了三个参数 1、2、3，，则 \" * \" 等价于 \"1 2 3\"（传递了一个参数），而 \"@\" 等价于 \"1\" \"2\" \"3\"（传递了三个参数）。\n\n```bash\n#!/usr/local/env bash\n\necho \"-- \\$* 演示 ---\"\nfor i in \"$*\"; do\n    echo $i\ndone\n\necho \"-- \\$@ 演示 ---\"\nfor i in \"$@\"; do\n    echo $i\ndone\n```\n\n```bash\n$ chmod +x test.sh\n$ ./test.sh 1 2 3\n-- $* 演示 ---\n1 2 3\n-- $@ 演示 ---\n1\n2\n3\n```\n\n- [Shell 传递参数](http://www.runoob.com/linux/linux-shell-passing-arguments.html)\n","source":"_posts/2018-06-04-shell-args.md","raw":"---\ntitle: Shell 传递参数\ntags:\n  - shell\ndate: 2018-06-04 09:47:47\n---\n\n\nshell 像所有语言一样可以在执行时传递参数\n\n<!-- more --><!-- toc -->\n\n根据 `$` 加数字的方式可以获取相应的参数\n\n- `$0` 当前脚本的绝对路径文件名\n- `$1` 第一个参数\n- `$2` 第二个参数\n以此类推\n\n`$` 加上其他字符可以获取更多种类参数\n\n```bash\n$#  # 传递到脚本的参数个数\n$*  # 以一个单字符串显示所有向脚本传递的参数。如\"$*\"用「\"」括起来的情况、以\"$1 $2 … $n\"的形式输出所有参数。\n$$  # 脚本运行的当前进程ID号\n$!  # 后台运行的最后一个进程的ID号\n$@  # 与$*相同，但是使用时加引号，并在引号中返回每个参数。如\"$@\"用「\"」括起来的情况、以\"$1\" \"$2\" … \"$n\" 的形式输出所有参数。\n$-  # 显示Shell使用的当前选项，与set命令功能相同。\n$?  # 显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。\n```\n\n\n`$*` 与 `$@` 区别：\n- 相同点：都是引用所有参数。\n- 不同点：只有在双引号中体现出来。假设在脚本运行时写了三个参数 1、2、3，，则 \" * \" 等价于 \"1 2 3\"（传递了一个参数），而 \"@\" 等价于 \"1\" \"2\" \"3\"（传递了三个参数）。\n\n```bash\n#!/usr/local/env bash\n\necho \"-- \\$* 演示 ---\"\nfor i in \"$*\"; do\n    echo $i\ndone\n\necho \"-- \\$@ 演示 ---\"\nfor i in \"$@\"; do\n    echo $i\ndone\n```\n\n```bash\n$ chmod +x test.sh\n$ ./test.sh 1 2 3\n-- $* 演示 ---\n1 2 3\n-- $@ 演示 ---\n1\n2\n3\n```\n\n- [Shell 传递参数](http://www.runoob.com/linux/linux-shell-passing-arguments.html)\n","slug":"shell-args","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2adt00gn5gqoj0h4fb9x"},{"title":"Linux 输出内容到文件权限不够","date":"2018-06-02T10:29:59.000Z","_content":"\n\n`sudo echo 'Hello World' >> /var/log/test` 在执行语句时会出现权限不够的错误\n\n<!-- more --><!-- toc -->\n\n```bash\n-bash: /var/log/test: Permission denied\n```\n\n原因是虽然 `echo` 加了 `sudo`，但是 `>>` 仍然没有 `sudo` 权限，需要将整个语句都加上 `sudo` 权限\n\n```bash\n$ sudo bash -c \"echo 'Hello World' >> /var/log/test\"\n```\n\n另一种方式是用 `tee` 命令\n\n```bash\n$ cat <<EOF | sudo tee -a /var/log/test\n> Hello World\n> EOF\n\n```\n\n输入 `EOF` 代表完成输入\n","source":"_posts/2018-06-02-file-permission-denied.md","raw":"---\ntitle: Linux 输出内容到文件权限不够\ntags:\n  - linux\ndate: 2018-06-02 10:29:59\n---\n\n\n`sudo echo 'Hello World' >> /var/log/test` 在执行语句时会出现权限不够的错误\n\n<!-- more --><!-- toc -->\n\n```bash\n-bash: /var/log/test: Permission denied\n```\n\n原因是虽然 `echo` 加了 `sudo`，但是 `>>` 仍然没有 `sudo` 权限，需要将整个语句都加上 `sudo` 权限\n\n```bash\n$ sudo bash -c \"echo 'Hello World' >> /var/log/test\"\n```\n\n另一种方式是用 `tee` 命令\n\n```bash\n$ cat <<EOF | sudo tee -a /var/log/test\n> Hello World\n> EOF\n\n```\n\n输入 `EOF` 代表完成输入\n","slug":"file-permission-denied","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2adv00gp5gqompkqhwjn"},{"title":"我当爸爸了","date":"2018-06-06T08:13:51.000Z","_content":"\n今天凌晨 1 点 45，小欣欣出生了，这个我们盼了10个月的小宝贝终于出生了。\n\n<!-- more --><!-- toc -->\n从昨天晚上开始，老婆就时不时觉得肚子疼，到了 5 点钟疼的厉害了，我的第一反应是要去医院，老婆比较淡定说还不规律再等等，这时候已经有点见红。\n\n中午去医院查了后，医生说开了半指，让住院，开始意识到要有苗头了，但是仍然感觉不会这么快生。\n\n下午 5 点探视的时间，老婆已经宫缩的非常频繁，疼的很难受，饭也没怎么吃，最后只喝了点粥。\n\n晚上 7 点 40，听见医生叫家属拿待产包进去，我第一个反应是要生了，小跑着进了病房，这时候老婆还是只喝了点粥，我怕老婆一会儿没有力气，但是又不敢问，因为老婆疼起来很烦躁。\n\n签完字出来跟老妈打电话声音有点颤抖，想象不到的激动，紧张的不能自已，泪在眼眶里总想出来，我们想象了 10 个月的场景已经到了，倒是丈母娘在一旁安慰着我。过了一会儿，我再转过来看丈母娘，她在双手合十为女儿祈祷，她说儿媳妇生的时候，她也祈祷了，都很顺利。\n\n晚上 9 点多，开了两指，老婆还能给我发消息说明状况还好，但是过了一会儿就越来越疼了，疼到发抖，我可以想象却难以体会老婆现在的感受，只能默默的等待。\n\n晚上 11 点 45 分，老婆开了 9 指，然后就没有回话，我只感觉是老婆疼的不想说话，但是过了半天我才意识到，现在应该已经再生了。\n\n这时候产科外走廊里稀稀拉拉的咕噜声此起彼伏，出来走走冷不丁会被角落里躺着的身影吓到，基本都是糙老汉子在外面守夜，里面也有他们的妻子，他们要等待的时间将会更长。\n\n6 月 6 日凌晨 2 点 29 分，我依稀听到里面在叫家属，我蹭的蹦了起来等着守门的门卫，在确定他喊是我老婆的名字时，我第一时间冲了过去，到了护士台，护士让我等着，突然听到后边一声啼哭，我猛一回头看到护工推着小车往外走，我又一回头问护士是不是我的孩子，还没等她发出声我就又转过来跑到小车旁，看着车里的婴儿。护工说是个小公主，6斤，哈哈，这是我的孩子，我的女儿，我看着她熟睡的样子有些不知所措，只能反复打量着她。没看多久，护士就往外赶我了，让我准备吃的，一个小时以后再来。\n\n此时我的心情是无比轻松的，是的，这个时候没有什么比母女平安更好的事情了，接下来还有更多的挑战在等着我们，还有更多的关卡在等着我们去闯，但是没什么是我们一家人不能度过去的难关，赶快长大吧，小宝贝。\n","source":"_posts/2018-06-06-i-am-a-dad.md","raw":"---\ntitle: 我当爸爸了\ndate: 2018-06-06 08:13:51\ntags: [宝贝]\n---\n\n今天凌晨 1 点 45，小欣欣出生了，这个我们盼了10个月的小宝贝终于出生了。\n\n<!-- more --><!-- toc -->\n从昨天晚上开始，老婆就时不时觉得肚子疼，到了 5 点钟疼的厉害了，我的第一反应是要去医院，老婆比较淡定说还不规律再等等，这时候已经有点见红。\n\n中午去医院查了后，医生说开了半指，让住院，开始意识到要有苗头了，但是仍然感觉不会这么快生。\n\n下午 5 点探视的时间，老婆已经宫缩的非常频繁，疼的很难受，饭也没怎么吃，最后只喝了点粥。\n\n晚上 7 点 40，听见医生叫家属拿待产包进去，我第一个反应是要生了，小跑着进了病房，这时候老婆还是只喝了点粥，我怕老婆一会儿没有力气，但是又不敢问，因为老婆疼起来很烦躁。\n\n签完字出来跟老妈打电话声音有点颤抖，想象不到的激动，紧张的不能自已，泪在眼眶里总想出来，我们想象了 10 个月的场景已经到了，倒是丈母娘在一旁安慰着我。过了一会儿，我再转过来看丈母娘，她在双手合十为女儿祈祷，她说儿媳妇生的时候，她也祈祷了，都很顺利。\n\n晚上 9 点多，开了两指，老婆还能给我发消息说明状况还好，但是过了一会儿就越来越疼了，疼到发抖，我可以想象却难以体会老婆现在的感受，只能默默的等待。\n\n晚上 11 点 45 分，老婆开了 9 指，然后就没有回话，我只感觉是老婆疼的不想说话，但是过了半天我才意识到，现在应该已经再生了。\n\n这时候产科外走廊里稀稀拉拉的咕噜声此起彼伏，出来走走冷不丁会被角落里躺着的身影吓到，基本都是糙老汉子在外面守夜，里面也有他们的妻子，他们要等待的时间将会更长。\n\n6 月 6 日凌晨 2 点 29 分，我依稀听到里面在叫家属，我蹭的蹦了起来等着守门的门卫，在确定他喊是我老婆的名字时，我第一时间冲了过去，到了护士台，护士让我等着，突然听到后边一声啼哭，我猛一回头看到护工推着小车往外走，我又一回头问护士是不是我的孩子，还没等她发出声我就又转过来跑到小车旁，看着车里的婴儿。护工说是个小公主，6斤，哈哈，这是我的孩子，我的女儿，我看着她熟睡的样子有些不知所措，只能反复打量着她。没看多久，护士就往外赶我了，让我准备吃的，一个小时以后再来。\n\n此时我的心情是无比轻松的，是的，这个时候没有什么比母女平安更好的事情了，接下来还有更多的挑战在等着我们，还有更多的关卡在等着我们去闯，但是没什么是我们一家人不能度过去的难关，赶快长大吧，小宝贝。\n","slug":"i-am-a-dad","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2adw00gr5gqo142pqrfn"},{"title":"Ubuntu 16.04 安装 Mysql","date":"2018-06-05T06:21:31.000Z","_content":"\n\n本章介绍在 `Ubuntu 16.04` 版本中安装 Mysql\n\n<!-- more --><!-- toc -->\n\n**安装**\n\n```bash\n$ sudo apt update -y\n$ sudo apt install -y mysql-server\n```\n\n在安装的过程中，进程会提示输入两次密码，作为 `root` 用户登录使用\n\n**设置**\n\n```bash\n$ sudo mysql_secure_installation\n```\n\n执行该命令可以修改 Mysql 密码强度并修改密码。\n\nMysql 默认启动，并且状态为开机自启\n\n如果没有启动可以手动启动\n\n```bash\n$ systemctl start mysql\n```\n\n**查看版本信息**\n\n```bash\n$ mysqladmin -p -u root version\n\nEnter password:\nmysqladmin  Ver 8.42 Distrib 5.7.22, for Linux on x86_64\nCopyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nServer version          5.7.22-0ubuntu0.16.04.1\nProtocol version        10\nConnection              Localhost via UNIX socket\nUNIX socket             /var/run/mysqld/mysqld.sock\nUptime:                 18 min 33 sec\n\nThreads: 1  Questions: 18  Slow queries: 0  Opens: 115  Flush tables: 1  Open tables: 34  Queries per second avg: 0.016\n```\n\n**修改密码**\n\n```mysql\n> set password=password('wxnacy');\n```\n\n因为 mysql 的安全策略，密码的最低长度为 8 位，所以这个命令会报错，想要修改它的安全策略可以参见[配置](/2018/06/10/centos7-install-mysql/#pei-zhi)\n\n## 对外开放\n\n**打开防火墙 3306 端口**\n\n```bash\n$ sudo ufw allow 3306\n$ sudo ufw disable\n$ sudo ufw enable\n```\n\n**注释绑定 ip**\n\n```bash\n$ sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf\n\n# bind-address      = 127.0.0.1\n```\n\n**允许所有ip访问**\n\n```mysql\n> GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'wxnacy' WITH GRANT OPTION;\n```\n\n**重启 Mysql**\n\n```bash\n$ sudo systemctl restart mysql\n```\n\n- [A Quick Guide to Using the MySQL APT Repository](https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/)\n- [How To Install MySQL on Ubuntu 16.04](https://www.digitalocean.com/community/tutorials/how-to-install-mysql-on-ubuntu-16-04)\n- [CentOS 7 安装 Mysql](/2018/06/10/centos7-install-mysql/)\n","source":"_posts/2018-06-05-ubuntu1604-install-mysql.md","raw":"---\ntitle: Ubuntu 16.04 安装 Mysql\ntags:\n  - linux\n  - mysql\ndate: 2018-06-05 06:21:31\n---\n\n\n本章介绍在 `Ubuntu 16.04` 版本中安装 Mysql\n\n<!-- more --><!-- toc -->\n\n**安装**\n\n```bash\n$ sudo apt update -y\n$ sudo apt install -y mysql-server\n```\n\n在安装的过程中，进程会提示输入两次密码，作为 `root` 用户登录使用\n\n**设置**\n\n```bash\n$ sudo mysql_secure_installation\n```\n\n执行该命令可以修改 Mysql 密码强度并修改密码。\n\nMysql 默认启动，并且状态为开机自启\n\n如果没有启动可以手动启动\n\n```bash\n$ systemctl start mysql\n```\n\n**查看版本信息**\n\n```bash\n$ mysqladmin -p -u root version\n\nEnter password:\nmysqladmin  Ver 8.42 Distrib 5.7.22, for Linux on x86_64\nCopyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nServer version          5.7.22-0ubuntu0.16.04.1\nProtocol version        10\nConnection              Localhost via UNIX socket\nUNIX socket             /var/run/mysqld/mysqld.sock\nUptime:                 18 min 33 sec\n\nThreads: 1  Questions: 18  Slow queries: 0  Opens: 115  Flush tables: 1  Open tables: 34  Queries per second avg: 0.016\n```\n\n**修改密码**\n\n```mysql\n> set password=password('wxnacy');\n```\n\n因为 mysql 的安全策略，密码的最低长度为 8 位，所以这个命令会报错，想要修改它的安全策略可以参见[配置](/2018/06/10/centos7-install-mysql/#pei-zhi)\n\n## 对外开放\n\n**打开防火墙 3306 端口**\n\n```bash\n$ sudo ufw allow 3306\n$ sudo ufw disable\n$ sudo ufw enable\n```\n\n**注释绑定 ip**\n\n```bash\n$ sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf\n\n# bind-address      = 127.0.0.1\n```\n\n**允许所有ip访问**\n\n```mysql\n> GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'wxnacy' WITH GRANT OPTION;\n```\n\n**重启 Mysql**\n\n```bash\n$ sudo systemctl restart mysql\n```\n\n- [A Quick Guide to Using the MySQL APT Repository](https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/)\n- [How To Install MySQL on Ubuntu 16.04](https://www.digitalocean.com/community/tutorials/how-to-install-mysql-on-ubuntu-16-04)\n- [CentOS 7 安装 Mysql](/2018/06/10/centos7-install-mysql/)\n","slug":"ubuntu1604-install-mysql","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2adz00gt5gqoyaw1kz3e"},{"title":"常用平台安装 ack","date":"2018-06-07T11:04:22.000Z","_content":"\n\n介绍几个常用平台安装 ack\n\n<!-- more --><!-- toc -->\n\n## 使用 curl\n\n```bash\n$ curl https://beyondgrep.com/ack-2.22-single-file > ~/bin/ack && chmod 0755 ~/bin/ack\n```\n\n## 使用安装器\n\n**macOS**\n\n```bash\n$ brew install ack\n```\n\n**Ubuntu**\n\n```bash\n$ sudo apt update -y\n$ sudo apt install -y ack-grep\n```\n\n**CentOS**\n\n```bash\n$ sudo yum -y update\n$ sudo yum -y install epel-release ack\n```\n\n更多平台安装见[文档](https://beyondgrep.com/install/)\n","source":"_posts/2018-06-07-install-ack.md","raw":"---\ntitle: 常用平台安装 ack\ntags:\n  - linux\ndate: 2018-06-07 11:04:22\n---\n\n\n介绍几个常用平台安装 ack\n\n<!-- more --><!-- toc -->\n\n## 使用 curl\n\n```bash\n$ curl https://beyondgrep.com/ack-2.22-single-file > ~/bin/ack && chmod 0755 ~/bin/ack\n```\n\n## 使用安装器\n\n**macOS**\n\n```bash\n$ brew install ack\n```\n\n**Ubuntu**\n\n```bash\n$ sudo apt update -y\n$ sudo apt install -y ack-grep\n```\n\n**CentOS**\n\n```bash\n$ sudo yum -y update\n$ sudo yum -y install epel-release ack\n```\n\n更多平台安装见[文档](https://beyondgrep.com/install/)\n","slug":"install-ack","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ae000gw5gqozto1lkyg"},{"title":"小宝贝，第三天","date":"2018-06-09T20:22:05.000Z","_content":"\n今天是小宝贝出生的第三天，经历了手忙脚乱和不知所措的痛苦，今天终于有了些头绪。\n\n<!-- more --><!-- toc -->\n回想一下，第一天实在是什么都不懂，不知道怎么帮她找奶头，不知道怎样帮她脐带消毒，不知道怎么哄她入睡，但是随着时间的推移，笨爸爸也逐渐摸到一点门路。\n\n小宝贝，快快长大吧，她睡着的时候真可爱。\n","source":"_posts/2018-06-09-baby1.md","raw":"---\ntitle: 小宝贝，第三天\ndate: 2018-06-09 20:22:05\ntags: [宝贝]\n---\n\n今天是小宝贝出生的第三天，经历了手忙脚乱和不知所措的痛苦，今天终于有了些头绪。\n\n<!-- more --><!-- toc -->\n回想一下，第一天实在是什么都不懂，不知道怎么帮她找奶头，不知道怎样帮她脐带消毒，不知道怎么哄她入睡，但是随着时间的推移，笨爸爸也逐渐摸到一点门路。\n\n小宝贝，快快长大吧，她睡着的时候真可爱。\n","slug":"baby1","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ae100gy5gqomtlfppxl"},{"title":"Python 启动最简单服务","date":"2018-06-11T14:46:02.000Z","_content":"\n\n在 Nginx 做一些运维测试时，需要启动简单服务进行配合，这时候用 Python 是最简单的，可以一行代码搞定\n\n<!-- more --><!-- toc -->\n\n**py2**\n\n```bash\n$ python -m SimpleHTTPServer\n\nServing HTTP on 0.0.0.0 port 8000 ...\n```\n\n**py3**\n\n```bash\n$ python -m http.server\n\nServing HTTP on 0.0.0.0 port 8000 ...\n```\n\n这样就启动了一个 `8000` 端口的服务，访问\n\n```bash\n$ curl localhost:8000\n```\n\n得到当前目录列表\n\n更多参数\n\n```bash\n$ python -m http.server 8001                # 修改端口\n$ python -m http.server --bind 127.0.0.1    # 绑定 ip\n```\n\n更多使用见[文档](https://docs.python.org/3/library/http.server.html#http.server.BaseHTTPRequestHandler.responses)\n","source":"_posts/2018-06-11-python-simple-server.md","raw":"---\ntitle: Python 启动最简单服务\ntags:\n  - python\ndate: 2018-06-11 14:46:02\n---\n\n\n在 Nginx 做一些运维测试时，需要启动简单服务进行配合，这时候用 Python 是最简单的，可以一行代码搞定\n\n<!-- more --><!-- toc -->\n\n**py2**\n\n```bash\n$ python -m SimpleHTTPServer\n\nServing HTTP on 0.0.0.0 port 8000 ...\n```\n\n**py3**\n\n```bash\n$ python -m http.server\n\nServing HTTP on 0.0.0.0 port 8000 ...\n```\n\n这样就启动了一个 `8000` 端口的服务，访问\n\n```bash\n$ curl localhost:8000\n```\n\n得到当前目录列表\n\n更多参数\n\n```bash\n$ python -m http.server 8001                # 修改端口\n$ python -m http.server --bind 127.0.0.1    # 绑定 ip\n```\n\n更多使用见[文档](https://docs.python.org/3/library/http.server.html#http.server.BaseHTTPRequestHandler.responses)\n","slug":"python-simple-server","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ae300h05gqo4ko0yehj"},{"title":"JRE 和 JDK 的区别","date":"2018-06-08T20:27:03.000Z","_content":"\n\n说来惭愧，虽然我是 Java 出身，但从来没去关注过 JRE 和 JDK 的区别，网上找了别人写的讲解，大多都不得要领，但其实官网的解释就非常简单明了\n\n<!-- more --><!-- toc -->\n在 JRE8 的[下载页面](http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html)有这样一段话\n![jrejdk](/images/jrejdk.png)\n\n解释过来是这样的\n\nJRE 全称 `Java Runtime Environment`，Java 的运行环境\n\nJDK 全称 `Java Development Kit`，Java 开发套件\n\n如果你只想运行 Java 程序，那么就下载 JRE\n\n如果你想开发 Java 程序，那么就下载 JDK，JDK 中包含 JRE，所以不需要两个都下载\n\n这样一说就很明了了\n\n服务器就安装 JRE\n\n开发环境就安装 JDK\n","source":"_posts/2018-06-08-jre-jdk.md","raw":"---\ntitle: JRE 和 JDK 的区别\ntags:\n  - java\ndate: 2018-06-08 20:27:03\n---\n\n\n说来惭愧，虽然我是 Java 出身，但从来没去关注过 JRE 和 JDK 的区别，网上找了别人写的讲解，大多都不得要领，但其实官网的解释就非常简单明了\n\n<!-- more --><!-- toc -->\n在 JRE8 的[下载页面](http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html)有这样一段话\n![jrejdk](/images/jrejdk.png)\n\n解释过来是这样的\n\nJRE 全称 `Java Runtime Environment`，Java 的运行环境\n\nJDK 全称 `Java Development Kit`，Java 开发套件\n\n如果你只想运行 Java 程序，那么就下载 JRE\n\n如果你想开发 Java 程序，那么就下载 JDK，JDK 中包含 JRE，所以不需要两个都下载\n\n这样一说就很明了了\n\n服务器就安装 JRE\n\n开发环境就安装 JDK\n","slug":"jre-jdk","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ae500h25gqohouzq4ws"},{"title":"CentOS 安装 JDK","date":"2018-06-15T14:49:09.000Z","_content":"\n***现以更新安装 Java 11 版本，传送门 [CentOS 7 如何安装 Java 11](/2018/12/27/centos7-install-java11/)***\n\nJava 最常用的安装方式是从[官网](http://www.oracle.com/technetwork/java/javase/downloads/jdk10-downloads-4416644.html)下载 `tar.gz` 文件，解压后配置环境变量，这样的安装方式并不利于自动化，今天来看下通过 `rpm` 的安装方式。\n\n<!-- more --><!-- toc -->\n\n## OpenJDK\n\n首先搜索可安装的 JDK\n\n```bash\n$ sudo yum search jdk\n```\n\n```bash\njava-1.6.0-openjdk.x86_64 : OpenJDK Runtime Environment\njava-1.6.0-openjdk-demo.x86_64 : OpenJDK Demos\njava-1.6.0-openjdk-devel.x86_64 : OpenJDK Development Environment\njava-1.6.0-openjdk-javadoc.x86_64 : OpenJDK API Documentation\njava-1.6.0-openjdk-src.x86_64 : OpenJDK Source Bundle\njava-1.7.0-openjdk.x86_64 : OpenJDK Runtime Environment\njava-1.7.0-openjdk-accessibility.x86_64 : OpenJDK accessibility connector\njava-1.7.0-openjdk-demo.x86_64 : OpenJDK Demos\njava-1.7.0-openjdk-devel.x86_64 : OpenJDK Development Environment\njava-1.7.0-openjdk-headless.x86_64 : The OpenJDK runtime environment without audio and video support\njava-1.7.0-openjdk-javadoc.noarch : OpenJDK API Documentation\njava-1.7.0-openjdk-src.x86_64 : OpenJDK Source Bundle\njava-1.8.0-openjdk.i686 : OpenJDK Runtime Environment\njava-1.8.0-openjdk.x86_64 : OpenJDK Runtime Environment\njava-1.8.0-openjdk-accessibility.i686 : OpenJDK accessibility connector\njava-1.8.0-openjdk-accessibility.x86_64 : OpenJDK accessibility connector\njava-1.8.0-openjdk-accessibility-debug.i686 : OpenJDK accessibility connector for packages with debug on\njava-1.8.0-openjdk-accessibility-debug.x86_64 : OpenJDK accessibility connector for packages with debug on\njava-1.8.0-openjdk-debug.i686 : OpenJDK Runtime Environment with full debug on\njava-1.8.0-openjdk-debug.x86_64 : OpenJDK Runtime Environment with full debug on\njava-1.8.0-openjdk-demo.i686 : OpenJDK Demos\njava-1.8.0-openjdk-demo.x86_64 : OpenJDK Demos\njava-1.8.0-openjdk-demo-debug.i686 : OpenJDK Demos with full debug on\njava-1.8.0-openjdk-demo-debug.x86_64 : OpenJDK Demos with full debug on\njava-1.8.0-openjdk-devel.i686 : OpenJDK Development Environment\njava-1.8.0-openjdk-devel.x86_64 : OpenJDK Development Environment\njava-1.8.0-openjdk-devel-debug.i686 : OpenJDK Development Environment with full debug on\njava-1.8.0-openjdk-devel-debug.x86_64 : OpenJDK Development Environment with full debug on\njava-1.8.0-openjdk-headless.i686 : OpenJDK Runtime Environment\njava-1.8.0-openjdk-headless.x86_64 : OpenJDK Runtime Environment\njava-1.8.0-openjdk-headless-debug.i686 : OpenJDK Runtime Environment with full debug on\njava-1.8.0-openjdk-headless-debug.x86_64 : OpenJDK Runtime Environment with full debug on\njava-1.8.0-openjdk-javadoc.noarch : OpenJDK API Documentation\njava-1.8.0-openjdk-javadoc-debug.noarch : OpenJDK API Documentation for packages with debug on\njava-1.8.0-openjdk-javadoc-zip.noarch : OpenJDK API Documentation compressed in single archive\njava-1.8.0-openjdk-javadoc-zip-debug.noarch : OpenJDK API Documentation compressed in single archive for packages with debug on\njava-1.8.0-openjdk-src.i686 : OpenJDK Source Bundle\njava-1.8.0-openjdk-src.x86_64 : OpenJDK Source Bundle\njava-1.8.0-openjdk-src-debug.i686 : OpenJDK Source Bundle for packages with debug on\njava-1.8.0-openjdk-src-debug.x86_64 : OpenJDK Source Bundle for packages with debug on\n```\n\n我们选取两个条目\n\n```bash\njava-1.8.0-openjdk.x86_64 : OpenJDK Runtime Environment\njava-1.8.0-openjdk-devel.x86_64 : OpenJDK Development Environment\n```\n\n他们分别是 JRE 和 JDK，根据你的需求安装即可，比如安装 JRE\n\n```bash\n$ sudo yum install java-1.8.0-openjdk -y\n```\n\n安装目录为\n\n```bash\n/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.171-8.b10.el7_5.x86_64\n```\n\n查看版本\n\n```bash\n$ java -version\n\nopenjdk version \"1.8.0_171\"\nOpenJDK Runtime Environment (build 1.8.0_171-b10)\nOpenJDK 64-Bit Server VM (build 25.171-b10, mixed mode)\n```\n\n## Oracle\n\nOracle 的 JDK 安装要稍微麻烦点，首先获取[官网](http://www.oracle.com/technetwork/java/javase/downloads/jdk10-downloads-4416644.html)的 JDK RPM 地址\n\n```bash\nhttp://download.oracle.com/otn-pub/java/jdk/10.0.1+10/fb4372174a714e6b8c52526dc134031e/jdk-10.0.1_linux-x64_bin.rpm\n```\n\n下载到服务器\n\n```bash\nwget --no-cookies --no-check-certificate --header \"Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com%2F; oraclelicense=accept-securebackup-cookie\" http://download.oracle.com/otn-pub/java/jdk/10.0.1+10/fb4372174a714e6b8c52526dc134031e/jdk-10.0.1_linux-x64_bin.rpm\n```\n\n安装\n\n```bash\n$ sudo yum -y localinstall jdk-10.0.1_linux-x64_bin.rpm\n```\n\n安装目录为\n\n```bash\n/usr/java/jdk-10.0.1\n```\n\n查看版本\n\n\n```bash\n$ java -version\n\njava version \"10.0.1\" 2018-04-17\nJava(TM) SE Runtime Environment 18.3 (build 10.0.1+10)\nJava HotSpot(TM) 64-Bit Server VM 18.3 (build 10.0.1+10, mixed mode)\n```\n\n## 选择版本\n\n查看所有本机 JDK 版本\n\n```bash\n$ sudo alternatives --config java\n\nThere are 2 programs which provide 'java'.\n\n  Selection    Command\n-----------------------------------------------\n*+ 1           /usr/java/jdk-10.0.1/bin/java\n   2           java-1.8.0-openjdk.x86_64 (/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.171-8.b10.el7_5.x86_64/jre/bin/java)\n\nEnter to keep the current selection[+], or type selection number:\n```\n\n`*+` 代表当前使用的版本，该命令下输入版本对应的数字即可更改版本\n\n- [How To Install Java on CentOS and Fedora](https://www.digitalocean.com/community/tutorials/how-to-install-java-on-centos-and-fedora#set-default-java)\n","source":"_posts/2018-06-15-centos-install-jdk.md","raw":"---\ntitle: CentOS 安装 JDK\ndate: 2018-06-15 14:49:09\ntags: [linux, java]\n---\n\n***现以更新安装 Java 11 版本，传送门 [CentOS 7 如何安装 Java 11](/2018/12/27/centos7-install-java11/)***\n\nJava 最常用的安装方式是从[官网](http://www.oracle.com/technetwork/java/javase/downloads/jdk10-downloads-4416644.html)下载 `tar.gz` 文件，解压后配置环境变量，这样的安装方式并不利于自动化，今天来看下通过 `rpm` 的安装方式。\n\n<!-- more --><!-- toc -->\n\n## OpenJDK\n\n首先搜索可安装的 JDK\n\n```bash\n$ sudo yum search jdk\n```\n\n```bash\njava-1.6.0-openjdk.x86_64 : OpenJDK Runtime Environment\njava-1.6.0-openjdk-demo.x86_64 : OpenJDK Demos\njava-1.6.0-openjdk-devel.x86_64 : OpenJDK Development Environment\njava-1.6.0-openjdk-javadoc.x86_64 : OpenJDK API Documentation\njava-1.6.0-openjdk-src.x86_64 : OpenJDK Source Bundle\njava-1.7.0-openjdk.x86_64 : OpenJDK Runtime Environment\njava-1.7.0-openjdk-accessibility.x86_64 : OpenJDK accessibility connector\njava-1.7.0-openjdk-demo.x86_64 : OpenJDK Demos\njava-1.7.0-openjdk-devel.x86_64 : OpenJDK Development Environment\njava-1.7.0-openjdk-headless.x86_64 : The OpenJDK runtime environment without audio and video support\njava-1.7.0-openjdk-javadoc.noarch : OpenJDK API Documentation\njava-1.7.0-openjdk-src.x86_64 : OpenJDK Source Bundle\njava-1.8.0-openjdk.i686 : OpenJDK Runtime Environment\njava-1.8.0-openjdk.x86_64 : OpenJDK Runtime Environment\njava-1.8.0-openjdk-accessibility.i686 : OpenJDK accessibility connector\njava-1.8.0-openjdk-accessibility.x86_64 : OpenJDK accessibility connector\njava-1.8.0-openjdk-accessibility-debug.i686 : OpenJDK accessibility connector for packages with debug on\njava-1.8.0-openjdk-accessibility-debug.x86_64 : OpenJDK accessibility connector for packages with debug on\njava-1.8.0-openjdk-debug.i686 : OpenJDK Runtime Environment with full debug on\njava-1.8.0-openjdk-debug.x86_64 : OpenJDK Runtime Environment with full debug on\njava-1.8.0-openjdk-demo.i686 : OpenJDK Demos\njava-1.8.0-openjdk-demo.x86_64 : OpenJDK Demos\njava-1.8.0-openjdk-demo-debug.i686 : OpenJDK Demos with full debug on\njava-1.8.0-openjdk-demo-debug.x86_64 : OpenJDK Demos with full debug on\njava-1.8.0-openjdk-devel.i686 : OpenJDK Development Environment\njava-1.8.0-openjdk-devel.x86_64 : OpenJDK Development Environment\njava-1.8.0-openjdk-devel-debug.i686 : OpenJDK Development Environment with full debug on\njava-1.8.0-openjdk-devel-debug.x86_64 : OpenJDK Development Environment with full debug on\njava-1.8.0-openjdk-headless.i686 : OpenJDK Runtime Environment\njava-1.8.0-openjdk-headless.x86_64 : OpenJDK Runtime Environment\njava-1.8.0-openjdk-headless-debug.i686 : OpenJDK Runtime Environment with full debug on\njava-1.8.0-openjdk-headless-debug.x86_64 : OpenJDK Runtime Environment with full debug on\njava-1.8.0-openjdk-javadoc.noarch : OpenJDK API Documentation\njava-1.8.0-openjdk-javadoc-debug.noarch : OpenJDK API Documentation for packages with debug on\njava-1.8.0-openjdk-javadoc-zip.noarch : OpenJDK API Documentation compressed in single archive\njava-1.8.0-openjdk-javadoc-zip-debug.noarch : OpenJDK API Documentation compressed in single archive for packages with debug on\njava-1.8.0-openjdk-src.i686 : OpenJDK Source Bundle\njava-1.8.0-openjdk-src.x86_64 : OpenJDK Source Bundle\njava-1.8.0-openjdk-src-debug.i686 : OpenJDK Source Bundle for packages with debug on\njava-1.8.0-openjdk-src-debug.x86_64 : OpenJDK Source Bundle for packages with debug on\n```\n\n我们选取两个条目\n\n```bash\njava-1.8.0-openjdk.x86_64 : OpenJDK Runtime Environment\njava-1.8.0-openjdk-devel.x86_64 : OpenJDK Development Environment\n```\n\n他们分别是 JRE 和 JDK，根据你的需求安装即可，比如安装 JRE\n\n```bash\n$ sudo yum install java-1.8.0-openjdk -y\n```\n\n安装目录为\n\n```bash\n/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.171-8.b10.el7_5.x86_64\n```\n\n查看版本\n\n```bash\n$ java -version\n\nopenjdk version \"1.8.0_171\"\nOpenJDK Runtime Environment (build 1.8.0_171-b10)\nOpenJDK 64-Bit Server VM (build 25.171-b10, mixed mode)\n```\n\n## Oracle\n\nOracle 的 JDK 安装要稍微麻烦点，首先获取[官网](http://www.oracle.com/technetwork/java/javase/downloads/jdk10-downloads-4416644.html)的 JDK RPM 地址\n\n```bash\nhttp://download.oracle.com/otn-pub/java/jdk/10.0.1+10/fb4372174a714e6b8c52526dc134031e/jdk-10.0.1_linux-x64_bin.rpm\n```\n\n下载到服务器\n\n```bash\nwget --no-cookies --no-check-certificate --header \"Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com%2F; oraclelicense=accept-securebackup-cookie\" http://download.oracle.com/otn-pub/java/jdk/10.0.1+10/fb4372174a714e6b8c52526dc134031e/jdk-10.0.1_linux-x64_bin.rpm\n```\n\n安装\n\n```bash\n$ sudo yum -y localinstall jdk-10.0.1_linux-x64_bin.rpm\n```\n\n安装目录为\n\n```bash\n/usr/java/jdk-10.0.1\n```\n\n查看版本\n\n\n```bash\n$ java -version\n\njava version \"10.0.1\" 2018-04-17\nJava(TM) SE Runtime Environment 18.3 (build 10.0.1+10)\nJava HotSpot(TM) 64-Bit Server VM 18.3 (build 10.0.1+10, mixed mode)\n```\n\n## 选择版本\n\n查看所有本机 JDK 版本\n\n```bash\n$ sudo alternatives --config java\n\nThere are 2 programs which provide 'java'.\n\n  Selection    Command\n-----------------------------------------------\n*+ 1           /usr/java/jdk-10.0.1/bin/java\n   2           java-1.8.0-openjdk.x86_64 (/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.171-8.b10.el7_5.x86_64/jre/bin/java)\n\nEnter to keep the current selection[+], or type selection number:\n```\n\n`*+` 代表当前使用的版本，该命令下输入版本对应的数字即可更改版本\n\n- [How To Install Java on CentOS and Fedora](https://www.digitalocean.com/community/tutorials/how-to-install-java-on-centos-and-fedora#set-default-java)\n","slug":"centos-install-jdk","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ae600h45gqobubtqtgs"},{"title":"CentOS 7 安装 Mysql","date":"2018-06-10T11:03:49.000Z","_content":"\n\nCentOS7 安装 Mysql 要不 Ubuntu 复杂不少。\n\n<!-- more --><!-- toc -->\n\n## 添加仓库\n\n访问地址\n\n```bash\nhttps://dev.mysql.com/downloads/repo/yum/\n```\n\n查找最新的 rpm\n![mysqlrpm](/images/mysqlrpm.png)\n\n下载\n\n```bash\n$ wget https://dev.mysql.com/get/mysql80-community-release-el7-1.noarch.rpm\n```\n\n确定 md5 值\n\n```bash\n$ md5sum mysql80-community-release-el7-1.noarch.rpm\n\n739dc44566d739c5d7b893de96ee6848  mysql80-community-release-el7-1.noarch.rpm\n```\n\n安装\n\n```bash\n$ sudo rpm -ivh mysql80-community-release-el7-1.noarch.rpm\n```\n\n\n\n## 安装\n\n### 8.0 版本\n\n添加完成仓库，直接下载即可得到最新的 `8.0` 版本\n```bash\n$ sudo yum update -y\n$ sudo yum install -y mysql-server\n```\n\n### 5.7 版本\n\n但是现在比较稳定的版本还是 `5.7`，想要下载这个版本，还需要做一些工作。\n\n**查看可安装版本**\n\n```bash\n$ yum repolist all | grep mysql\n\nmysql-cluster-7.5-community/x86_64 MySQL Cluster 7.5 Community    disabled\nmysql-cluster-7.5-community-source MySQL Cluster 7.5 Community -  disabled\nmysql-cluster-7.6-community/x86_64 MySQL Cluster 7.6 Community    disabled\nmysql-cluster-7.6-community-source MySQL Cluster 7.6 Community -  disabled\nmysql-connectors-community/x86_64  MySQL Connectors Community     enabled:    51\nmysql-connectors-community-source  MySQL Connectors Community - S disabled\nmysql-tools-community/x86_64       MySQL Tools Community          enabled:    63\nmysql-tools-community-source       MySQL Tools Community - Source disabled\nmysql-tools-preview/x86_64         MySQL Tools Preview            disabled\nmysql-tools-preview-source         MySQL Tools Preview - Source   disabled\nmysql55-community/x86_64           MySQL 5.5 Community Server     disabled\nmysql55-community-source           MySQL 5.5 Community Server - S disabled\nmysql56-community/x86_64           MySQL 5.6 Community Server     disabled\nmysql56-community-source           MySQL 5.6 Community Server - S disabled\nmysql57-community/x86_64           MySQL 5.7 Community Server     disabled\nmysql57-community-source           MySQL 5.7 Community Server - S disabled\nmysql80-community/x86_64           MySQL 8.0 Community Server     enabled:    17\nmysql80-community-source           MySQL 8.0 Community Server - S disabled\n```\n\n**选择默认版本为 5.7**\n\n```bash\n$ sudo yum-config-manager --disable mysql80-community\n$ sudo yum-config-manager --enable mysql57-community\n```\n\n**下载**\n\n```bash\n$ sudo yum install mysql-community-server\n```\n\n**启动**\n\n```bash\n$ sudo systemctl start mysqld\n```\n\n查看运行状态\n\n```bash\n$ sudo systemctl status mysqld\n\n● mysqld.service - MySQL Server\n   Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled)\n   Active: active (running) since Fri 2018-06-01 10:35:58 UTC; 1h 39min ago\n     Docs: man:mysqld(8)\n           http://dev.mysql.com/doc/refman/en/using-systemd.html\n  Process: 7474 ExecStartPre=/usr/bin/mysqld_pre_systemd (code=exited, status=0/SUCCESS)\n Main PID: 7542 (mysqld)\n   Status: \"SERVER_OPERATING\"\n   CGroup: /system.slice/mysqld.service\n           └─7542 /usr/sbin/mysqld\n\nJun 01 10:35:49 bogon systemd[1]: Starting MySQL Server...\nJun 01 10:35:58 bogon systemd[1]: Started MySQL Server.\n```\n\n默认是开机自启的，可以手动关闭\n\n```bash\n$ sudo systemctl disable mysqld\n```\n\n## 配置\n\nMysql 在安装时会默认设置一个随机密码，需要在第一次使用时修改\n\n**查看密码**\n\n```bash\n$ sudo grep 'temporary password' /var/log/mysqld.log\n\n2018-06-01T10:35:51.710406Z 5 [Note] [MY-010454] [Server] A temporary password is generated for root@localhost: Vq9wOQ&trFs*\n```\n\n**配置**\n\n```bash\n$ sudo mysql_secure_installation\n```\n\n执行该命令后，输入刚查询的密码即可进行后续操作，但是在修改密码后你可能会遇到错误\n\n```bash\nFailed! Error: Your password does not satisfy the current policy requirements\n```\n\n提示你的密码不符合当前策略，Mysql 密码策略有三种\n\n```bash\n\nThere are three levels of password validation policy:\n\n# 长度大于 8 位\nLOW    Length >= 8\n# 长度大于 8 位，数字，混合大小写和特殊字符\nMEDIUM Length >= 8, numeric, mixed case, and special characters\n# 长度大于 8 位，数字，混合大小写，特殊字符和字典\nSTRONG Length >= 8, numeric, mixed case, special characters and dictionary\n\nPlease enter 0 = LOW, 1 = MEDIUM and 2 = STRONG:\n```\n\n他们分别对应了数字 `0, 1, 2`，Mysql 默认的等级为 `MEDIUM`，所以输入普通的密码就会报错，怎样修改策略呢？\n\n首先使用默认密码登录 Mysql\n\n```bash\n$ mysql -uroot -p\n```\n\n查看所有 `validatei_password`\n\n```mysql\nmysql> SHOW VARIABLES LIKE 'validate_password%';\n\n+--------------------------------------+-------+\n| Variable_name                        | Value |\n+--------------------------------------+-------+\n| validate_password.check_user_name    | ON    |\n| validate_password.dictionary_file    |       |\n| validate_password.length             | 8     |\n| validate_password.mixed_case_count   | 1     |\n| validate_password.number_count       | 1     |\n| validate_password.policy             | MEDIUM|\n| validate_password.special_char_count | 1     |\n| validate_password_check_user_name    | ON    |\n| validate_password_dictionary_file    |       |\n| validate_password_length             | 8     |\n| validate_password_mixed_case_count   | 1     |\n| validate_password_number_count       | 1     |\n| validate_password_policy             | MEDIUM|\n| validate_password_special_char_count | 1     |\n+--------------------------------------+-------+\n14 rows in set (0.00 sec)\n```\n\n将策略改为 `LOW`\n\n```mysql\n> set global validate_password.policy=0;\n> set global validate_password_policy=0;\n```\n\n如果你不想让长度必须大于 8 位，也可以改为 4，这是最低长度\n\n```bash\n> set global validate_password_length=4;\n> set global validate_password.length=4;\n```\n\n随后执行 sql 修改密码即可\n\n```bash\n> set password=password('wxnacy');\n```\n\n最后可以将访问权限全部对外开放\n\n```bash\n> GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'wxnacy' WITH GRANT OPTION;\n```\n\n也可以指定 ip 开放\n\n```bash\n> GRANT ALL PRIVILEGES ON *.* TO 'root'@'192.168.33.11' IDENTIFIED BY 'wxnacy' WITH GRANT OPTION;\n```\n\n\n- [A Quick Guide to Using the MySQL Yum Repository](https://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en/)\n- [How To Install MySQL on CentOS 7](https://www.digitalocean.com/community/tutorials/how-to-install-mysql-on-centos-7)\n- [解决 MySQL 5.7 中 Your password does not satisfy the current policy requirements. 问题](https://blog.csdn.net/maxsky/article/details/51171474)\n\n","source":"_posts/2018-06-10-centos7-install-mysql.md","raw":"---\ntitle: CentOS 7 安装 Mysql\ntags:\n  - mysql\ndate: 2018-06-10 11:03:49\n---\n\n\nCentOS7 安装 Mysql 要不 Ubuntu 复杂不少。\n\n<!-- more --><!-- toc -->\n\n## 添加仓库\n\n访问地址\n\n```bash\nhttps://dev.mysql.com/downloads/repo/yum/\n```\n\n查找最新的 rpm\n![mysqlrpm](/images/mysqlrpm.png)\n\n下载\n\n```bash\n$ wget https://dev.mysql.com/get/mysql80-community-release-el7-1.noarch.rpm\n```\n\n确定 md5 值\n\n```bash\n$ md5sum mysql80-community-release-el7-1.noarch.rpm\n\n739dc44566d739c5d7b893de96ee6848  mysql80-community-release-el7-1.noarch.rpm\n```\n\n安装\n\n```bash\n$ sudo rpm -ivh mysql80-community-release-el7-1.noarch.rpm\n```\n\n\n\n## 安装\n\n### 8.0 版本\n\n添加完成仓库，直接下载即可得到最新的 `8.0` 版本\n```bash\n$ sudo yum update -y\n$ sudo yum install -y mysql-server\n```\n\n### 5.7 版本\n\n但是现在比较稳定的版本还是 `5.7`，想要下载这个版本，还需要做一些工作。\n\n**查看可安装版本**\n\n```bash\n$ yum repolist all | grep mysql\n\nmysql-cluster-7.5-community/x86_64 MySQL Cluster 7.5 Community    disabled\nmysql-cluster-7.5-community-source MySQL Cluster 7.5 Community -  disabled\nmysql-cluster-7.6-community/x86_64 MySQL Cluster 7.6 Community    disabled\nmysql-cluster-7.6-community-source MySQL Cluster 7.6 Community -  disabled\nmysql-connectors-community/x86_64  MySQL Connectors Community     enabled:    51\nmysql-connectors-community-source  MySQL Connectors Community - S disabled\nmysql-tools-community/x86_64       MySQL Tools Community          enabled:    63\nmysql-tools-community-source       MySQL Tools Community - Source disabled\nmysql-tools-preview/x86_64         MySQL Tools Preview            disabled\nmysql-tools-preview-source         MySQL Tools Preview - Source   disabled\nmysql55-community/x86_64           MySQL 5.5 Community Server     disabled\nmysql55-community-source           MySQL 5.5 Community Server - S disabled\nmysql56-community/x86_64           MySQL 5.6 Community Server     disabled\nmysql56-community-source           MySQL 5.6 Community Server - S disabled\nmysql57-community/x86_64           MySQL 5.7 Community Server     disabled\nmysql57-community-source           MySQL 5.7 Community Server - S disabled\nmysql80-community/x86_64           MySQL 8.0 Community Server     enabled:    17\nmysql80-community-source           MySQL 8.0 Community Server - S disabled\n```\n\n**选择默认版本为 5.7**\n\n```bash\n$ sudo yum-config-manager --disable mysql80-community\n$ sudo yum-config-manager --enable mysql57-community\n```\n\n**下载**\n\n```bash\n$ sudo yum install mysql-community-server\n```\n\n**启动**\n\n```bash\n$ sudo systemctl start mysqld\n```\n\n查看运行状态\n\n```bash\n$ sudo systemctl status mysqld\n\n● mysqld.service - MySQL Server\n   Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled)\n   Active: active (running) since Fri 2018-06-01 10:35:58 UTC; 1h 39min ago\n     Docs: man:mysqld(8)\n           http://dev.mysql.com/doc/refman/en/using-systemd.html\n  Process: 7474 ExecStartPre=/usr/bin/mysqld_pre_systemd (code=exited, status=0/SUCCESS)\n Main PID: 7542 (mysqld)\n   Status: \"SERVER_OPERATING\"\n   CGroup: /system.slice/mysqld.service\n           └─7542 /usr/sbin/mysqld\n\nJun 01 10:35:49 bogon systemd[1]: Starting MySQL Server...\nJun 01 10:35:58 bogon systemd[1]: Started MySQL Server.\n```\n\n默认是开机自启的，可以手动关闭\n\n```bash\n$ sudo systemctl disable mysqld\n```\n\n## 配置\n\nMysql 在安装时会默认设置一个随机密码，需要在第一次使用时修改\n\n**查看密码**\n\n```bash\n$ sudo grep 'temporary password' /var/log/mysqld.log\n\n2018-06-01T10:35:51.710406Z 5 [Note] [MY-010454] [Server] A temporary password is generated for root@localhost: Vq9wOQ&trFs*\n```\n\n**配置**\n\n```bash\n$ sudo mysql_secure_installation\n```\n\n执行该命令后，输入刚查询的密码即可进行后续操作，但是在修改密码后你可能会遇到错误\n\n```bash\nFailed! Error: Your password does not satisfy the current policy requirements\n```\n\n提示你的密码不符合当前策略，Mysql 密码策略有三种\n\n```bash\n\nThere are three levels of password validation policy:\n\n# 长度大于 8 位\nLOW    Length >= 8\n# 长度大于 8 位，数字，混合大小写和特殊字符\nMEDIUM Length >= 8, numeric, mixed case, and special characters\n# 长度大于 8 位，数字，混合大小写，特殊字符和字典\nSTRONG Length >= 8, numeric, mixed case, special characters and dictionary\n\nPlease enter 0 = LOW, 1 = MEDIUM and 2 = STRONG:\n```\n\n他们分别对应了数字 `0, 1, 2`，Mysql 默认的等级为 `MEDIUM`，所以输入普通的密码就会报错，怎样修改策略呢？\n\n首先使用默认密码登录 Mysql\n\n```bash\n$ mysql -uroot -p\n```\n\n查看所有 `validatei_password`\n\n```mysql\nmysql> SHOW VARIABLES LIKE 'validate_password%';\n\n+--------------------------------------+-------+\n| Variable_name                        | Value |\n+--------------------------------------+-------+\n| validate_password.check_user_name    | ON    |\n| validate_password.dictionary_file    |       |\n| validate_password.length             | 8     |\n| validate_password.mixed_case_count   | 1     |\n| validate_password.number_count       | 1     |\n| validate_password.policy             | MEDIUM|\n| validate_password.special_char_count | 1     |\n| validate_password_check_user_name    | ON    |\n| validate_password_dictionary_file    |       |\n| validate_password_length             | 8     |\n| validate_password_mixed_case_count   | 1     |\n| validate_password_number_count       | 1     |\n| validate_password_policy             | MEDIUM|\n| validate_password_special_char_count | 1     |\n+--------------------------------------+-------+\n14 rows in set (0.00 sec)\n```\n\n将策略改为 `LOW`\n\n```mysql\n> set global validate_password.policy=0;\n> set global validate_password_policy=0;\n```\n\n如果你不想让长度必须大于 8 位，也可以改为 4，这是最低长度\n\n```bash\n> set global validate_password_length=4;\n> set global validate_password.length=4;\n```\n\n随后执行 sql 修改密码即可\n\n```bash\n> set password=password('wxnacy');\n```\n\n最后可以将访问权限全部对外开放\n\n```bash\n> GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'wxnacy' WITH GRANT OPTION;\n```\n\n也可以指定 ip 开放\n\n```bash\n> GRANT ALL PRIVILEGES ON *.* TO 'root'@'192.168.33.11' IDENTIFIED BY 'wxnacy' WITH GRANT OPTION;\n```\n\n\n- [A Quick Guide to Using the MySQL Yum Repository](https://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en/)\n- [How To Install MySQL on CentOS 7](https://www.digitalocean.com/community/tutorials/how-to-install-mysql-on-centos-7)\n- [解决 MySQL 5.7 中 Your password does not satisfy the current policy requirements. 问题](https://blog.csdn.net/maxsky/article/details/51171474)\n\n","slug":"centos7-install-mysql","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ae800h65gqo9a53vt3e"},{"title":"CentOS 7 使用 rpm 安装 Elasticsearch","date":"2018-06-12T15:01:15.000Z","_content":"\n\n在安装 Elasticsearch 时，推荐使用 `rpm` 方式安装\n\n<!-- more --><!-- toc -->\n\n## 安装 Java\n\n我们只需要安装 `jre` 即可\n\n```bash\n$ sudo yum install java-1.8.0-openjdk.x86_64\n$ java -version\n\nopenjdk version \"1.8.0_171\"\nOpenJDK Runtime Environment (build 1.8.0_171-b10)\nOpenJDK 64-Bit Server VM (build 25.171-b10, mixed mode)\n```\n\n## 安装 Elasticsearch\n\n```bash\n$ wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.2.4.rpm\n$ sudo rpm --install elasticsearch-6.2.4.rpm\n```\n\n设置开机自启\n\n```bash\n$ sudo systemctl daemon-reload\n$ sudo systemctl enable elasticsearch.service\n```\n\n启动\n\n```bash\n$ sudo systemctl start elasticsearch.service\n```\n\n访问\n\n```bash\n$ curl localhost:9200\n\n{\n  \"name\" : \"elasticsearch\",\n  \"cluster_name\" : \"elasticsearch\",\n  \"cluster_uuid\" : \"pLrLT2D9QA6VM9-6cdi1vQ\",\n  \"version\" : {\n    \"number\" : \"6.2.4\",\n    \"build_hash\" : \"ccec39f\",\n    \"build_date\" : \"2018-04-12T20:37:28.497551Z\",\n    \"build_snapshot\" : false,\n    \"lucene_version\" : \"7.2.1\",\n    \"minimum_wire_compatibility_version\" : \"5.6.0\",\n    \"minimum_index_compatibility_version\" : \"5.0.0\"\n  },\n  \"tagline\" : \"You Know, for Search\"\n}\n```\n\n\n此时 Elasticsearch 在服务器外通过 ip 是无法访问的，需要修改 `network.host`\n\n```bash\n$ sudo vim /etc/elasticsearch/elasticsearch.yml\n```\n\n```bash\nnetwork.host: 0.0.0.0\n```\n\n然后重启\n\n```bash\n$ sudo systemctl start elasticsearch.service\n```\n\n此时通过 ip 访问即可\n\n另外 `cluster.name, node.name` 等 Elasticsearch 启动配置都可以在这个文件修改\n\n## 配置\n\n通过 `rpm` 方式安装的软件目录如下\n\n类型    | 描述                                                                                                   | 默认地址                         | 配置\n----    | ----                                                                                                   | --------                         | ---\nhome    | Elasticsearch home directory or $ES_HOME                                                               | /usr/share/elasticsearch         |\nbin     | 二进制运行脚本包含 `elasticsearch` 开启一个实例，`elasticsearch-plugin` 安装插件                       | /usr/share/elasticsearch/bin     |\nconf    | 配置文件包含 elasticsearch.yml                                                                         | /etc/elasticsearch               | `ES_PATH_CONF`\nconf    | 环境变量包括堆大小，文件描述符                                                                         | /etc/sysconfig/elasticsearch     |\ndata    | 在节点上分配的每个索引/分片的数据文件的位置。 可以容纳多个地点。                                       | /var/lib/elasticsearch           | `path.data`\nlogs    | 日志文件                                                                                               | /var/log/elasticsearch           | `path.logs`\nplugins | 插件文件的位置。每个插件都将包含在一个子目录中。                                                       | /usr/share/elasticsearch/plugins |\nrepo    | 共享文件系统存储库位置。 可以容纳多个地点。 文件系统存储库可以放置在此处指定的任何目录的任何子目录中。 |                                  |\n\n\n环境配置 `/etc/sysconfig/elasticsearch` 会包含如下信息\n\n- `JAVA_HOME` Set a custom Java path to be used.\n\n- `MAX_OPEN_FILES` 最大打开文件数，默认 65536.\n\n- `MAX_LOCKED_MEMORY` 最大锁定的内存大小。 如果使用 elasticsearch.yml 中的 `bootstrap.memory_lock` 选项，则设置为无限制。\n\n- `MAX_MAP_COUNT` 进程可能具有的最大内存映射区数量。如果您使用 mmapfs 作为索引存储类型，请确保将其设置为较高值。有关更多信息，请查看关于 `max_map_count` 的 linux 内核文档。 这是在启动 Elasticsearch 之前通过 sysctl 设置的。 默认为262144。\n\n- `ES_PATH_CONF` 配置文件目录（需要包含 elasticsearch.yml，jvm.options 和 log4j2.properties 文件）; 默认为 `/etc/elasticsearch`。\n\n- `ES_JAVA_OPTS` 你可能想要应用的任何其他JVM系统属性。\n\n- `RESTART_ON_UPGRADE` 在软件包升级时配置重启，默认为false。 这意味着您必须在手动安装包后重新启动Elasticsearch实例。 其原因是为了确保集群中的升级不会导致连续的碎片重新分配，从而导致高网络流量并缩短集群的响应时间。\n\n\n\n- [Install Elasticsearch with RPM](https://www.elastic.co/guide/en/elasticsearch/reference/current/rpm.html)\n- [How To Install and Configure Elasticsearch on CentOS 7](https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-elasticsearch-on-centos-7)\n","source":"_posts/2018-06-12-centos7-install-es.md","raw":"---\ntitle: CentOS 7 使用 rpm 安装 Elasticsearch\ntags:\n  - elastic\ndate: 2018-06-12 15:01:15\n---\n\n\n在安装 Elasticsearch 时，推荐使用 `rpm` 方式安装\n\n<!-- more --><!-- toc -->\n\n## 安装 Java\n\n我们只需要安装 `jre` 即可\n\n```bash\n$ sudo yum install java-1.8.0-openjdk.x86_64\n$ java -version\n\nopenjdk version \"1.8.0_171\"\nOpenJDK Runtime Environment (build 1.8.0_171-b10)\nOpenJDK 64-Bit Server VM (build 25.171-b10, mixed mode)\n```\n\n## 安装 Elasticsearch\n\n```bash\n$ wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.2.4.rpm\n$ sudo rpm --install elasticsearch-6.2.4.rpm\n```\n\n设置开机自启\n\n```bash\n$ sudo systemctl daemon-reload\n$ sudo systemctl enable elasticsearch.service\n```\n\n启动\n\n```bash\n$ sudo systemctl start elasticsearch.service\n```\n\n访问\n\n```bash\n$ curl localhost:9200\n\n{\n  \"name\" : \"elasticsearch\",\n  \"cluster_name\" : \"elasticsearch\",\n  \"cluster_uuid\" : \"pLrLT2D9QA6VM9-6cdi1vQ\",\n  \"version\" : {\n    \"number\" : \"6.2.4\",\n    \"build_hash\" : \"ccec39f\",\n    \"build_date\" : \"2018-04-12T20:37:28.497551Z\",\n    \"build_snapshot\" : false,\n    \"lucene_version\" : \"7.2.1\",\n    \"minimum_wire_compatibility_version\" : \"5.6.0\",\n    \"minimum_index_compatibility_version\" : \"5.0.0\"\n  },\n  \"tagline\" : \"You Know, for Search\"\n}\n```\n\n\n此时 Elasticsearch 在服务器外通过 ip 是无法访问的，需要修改 `network.host`\n\n```bash\n$ sudo vim /etc/elasticsearch/elasticsearch.yml\n```\n\n```bash\nnetwork.host: 0.0.0.0\n```\n\n然后重启\n\n```bash\n$ sudo systemctl start elasticsearch.service\n```\n\n此时通过 ip 访问即可\n\n另外 `cluster.name, node.name` 等 Elasticsearch 启动配置都可以在这个文件修改\n\n## 配置\n\n通过 `rpm` 方式安装的软件目录如下\n\n类型    | 描述                                                                                                   | 默认地址                         | 配置\n----    | ----                                                                                                   | --------                         | ---\nhome    | Elasticsearch home directory or $ES_HOME                                                               | /usr/share/elasticsearch         |\nbin     | 二进制运行脚本包含 `elasticsearch` 开启一个实例，`elasticsearch-plugin` 安装插件                       | /usr/share/elasticsearch/bin     |\nconf    | 配置文件包含 elasticsearch.yml                                                                         | /etc/elasticsearch               | `ES_PATH_CONF`\nconf    | 环境变量包括堆大小，文件描述符                                                                         | /etc/sysconfig/elasticsearch     |\ndata    | 在节点上分配的每个索引/分片的数据文件的位置。 可以容纳多个地点。                                       | /var/lib/elasticsearch           | `path.data`\nlogs    | 日志文件                                                                                               | /var/log/elasticsearch           | `path.logs`\nplugins | 插件文件的位置。每个插件都将包含在一个子目录中。                                                       | /usr/share/elasticsearch/plugins |\nrepo    | 共享文件系统存储库位置。 可以容纳多个地点。 文件系统存储库可以放置在此处指定的任何目录的任何子目录中。 |                                  |\n\n\n环境配置 `/etc/sysconfig/elasticsearch` 会包含如下信息\n\n- `JAVA_HOME` Set a custom Java path to be used.\n\n- `MAX_OPEN_FILES` 最大打开文件数，默认 65536.\n\n- `MAX_LOCKED_MEMORY` 最大锁定的内存大小。 如果使用 elasticsearch.yml 中的 `bootstrap.memory_lock` 选项，则设置为无限制。\n\n- `MAX_MAP_COUNT` 进程可能具有的最大内存映射区数量。如果您使用 mmapfs 作为索引存储类型，请确保将其设置为较高值。有关更多信息，请查看关于 `max_map_count` 的 linux 内核文档。 这是在启动 Elasticsearch 之前通过 sysctl 设置的。 默认为262144。\n\n- `ES_PATH_CONF` 配置文件目录（需要包含 elasticsearch.yml，jvm.options 和 log4j2.properties 文件）; 默认为 `/etc/elasticsearch`。\n\n- `ES_JAVA_OPTS` 你可能想要应用的任何其他JVM系统属性。\n\n- `RESTART_ON_UPGRADE` 在软件包升级时配置重启，默认为false。 这意味着您必须在手动安装包后重新启动Elasticsearch实例。 其原因是为了确保集群中的升级不会导致连续的碎片重新分配，从而导致高网络流量并缩短集群的响应时间。\n\n\n\n- [Install Elasticsearch with RPM](https://www.elastic.co/guide/en/elasticsearch/reference/current/rpm.html)\n- [How To Install and Configure Elasticsearch on CentOS 7](https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-elasticsearch-on-centos-7)\n","slug":"centos7-install-es","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ae900h85gqohh6g92tv"},{"title":"小宝贝，第七天，难受日","date":"2018-06-13T09:40:07.000Z","_content":"\n今天真的好难受啊。\n\n<!-- more --><!-- toc -->\n本来今天的行程安排是没太多波澜的，上午去办出生证明，下午去抽足跟血，只是天气不太美丽，有大暴雨。\n\n上午十分顺利，办完证，办完京医通，挂上号，下午准备测黄疸，出了医院门，看着阴郁的天气，心里有点压抑。\n\n下午去之前一直都是小阴天，下一小会儿停一会儿，心里想着估计今天也是雷声大雨点小。出发之前看到孩子脐带有些血钾，想着还是先消个毒再去，导致了比原定的时间晚了些。\n\n做上车后，没几分钟就开始下起暴雨了，顿时心里有些不好的预感，虽然经常调侃女儿生日加体重是 666，但现在心里却有点忐忑。\n\n直到抽完足跟血都还很正常，但是从护士到医生都会说一句，是有点黄，测测黄疸吧，测完，21.8，20.1 两个值，没太多概念，给门诊医生看，确定很高，住院吧。一听，蒙了，住院？现在怎么住院？有没有别的方法？“吃药并不保证，还是住院稳妥，值太高了，很有可能会影响智力”。靠，吓我！但是我又不敢不听，老婆说高于 15 就听医生的吧。\n\n从这时开始我脑子就有点朦，到后边办理手续心里都很堵，我也知道这是很常见的现象，很多孩子都会有这种情况，但是一想到孩子这么小就要跟我们分开自己住院，心里就难受，无法接受。\n\n憋了好长时间，护士听见我声音特别小，说不舒服吗？嗓子哑了？我说有点难受，然后就憋不住了，就开始流泪。旁边孩子也要住院的一个母亲就很淡定，虽然她心里也难受，我觉得自己有点小家子气，但是就觉得委屈啊，后边就彻底憋不住了，这次还好这位老乡也是孩子黄疸住院，很多手续都是一样的，可以搭伴去办，也能聊聊天，分分心，也就慢慢缓和了心情。\n\n给老婆打电话的时候也感觉她有点异样，等回去后她说老母亲已经哭过一次了，哎，可怜的老父亲老母亲今天都很难受。\n\n明天 10 点半去问医生，希望宝贝可以尽早出院。\n","source":"_posts/2018-06-13-baby7-nanshou.md","raw":"---\ntitle: 小宝贝，第七天，难受日\ndate: 2018-06-13 09:40:07\ntags: [宝贝]\n---\n\n今天真的好难受啊。\n\n<!-- more --><!-- toc -->\n本来今天的行程安排是没太多波澜的，上午去办出生证明，下午去抽足跟血，只是天气不太美丽，有大暴雨。\n\n上午十分顺利，办完证，办完京医通，挂上号，下午准备测黄疸，出了医院门，看着阴郁的天气，心里有点压抑。\n\n下午去之前一直都是小阴天，下一小会儿停一会儿，心里想着估计今天也是雷声大雨点小。出发之前看到孩子脐带有些血钾，想着还是先消个毒再去，导致了比原定的时间晚了些。\n\n做上车后，没几分钟就开始下起暴雨了，顿时心里有些不好的预感，虽然经常调侃女儿生日加体重是 666，但现在心里却有点忐忑。\n\n直到抽完足跟血都还很正常，但是从护士到医生都会说一句，是有点黄，测测黄疸吧，测完，21.8，20.1 两个值，没太多概念，给门诊医生看，确定很高，住院吧。一听，蒙了，住院？现在怎么住院？有没有别的方法？“吃药并不保证，还是住院稳妥，值太高了，很有可能会影响智力”。靠，吓我！但是我又不敢不听，老婆说高于 15 就听医生的吧。\n\n从这时开始我脑子就有点朦，到后边办理手续心里都很堵，我也知道这是很常见的现象，很多孩子都会有这种情况，但是一想到孩子这么小就要跟我们分开自己住院，心里就难受，无法接受。\n\n憋了好长时间，护士听见我声音特别小，说不舒服吗？嗓子哑了？我说有点难受，然后就憋不住了，就开始流泪。旁边孩子也要住院的一个母亲就很淡定，虽然她心里也难受，我觉得自己有点小家子气，但是就觉得委屈啊，后边就彻底憋不住了，这次还好这位老乡也是孩子黄疸住院，很多手续都是一样的，可以搭伴去办，也能聊聊天，分分心，也就慢慢缓和了心情。\n\n给老婆打电话的时候也感觉她有点异样，等回去后她说老母亲已经哭过一次了，哎，可怜的老父亲老母亲今天都很难受。\n\n明天 10 点半去问医生，希望宝贝可以尽早出院。\n","slug":"baby7-nanshou","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aea00ha5gqogj25dn41"},{"title":"Docker 容器日志的位置","date":"2018-06-14T09:36:24.000Z","_content":"\n\nDocker 再启动容器后，可以用 `docker logs -f <container_name>` 来查看日志内容，那么日志文件存放在哪了呢？\n\n<!-- more --><!-- toc -->\n\n**查找全部容器的日志文件**\n\n```bash\n$ sudo find /var/lib/docker/containers -name *.log\n```\n\n**查看日志位置**\n\n```bash\n$ docker inspect --format='{{.LogPath}}' <container_name>\n```\n\n**实时查询内容**\n\n```bash\n$ sudo tail -f `docker inspect --format='{{.LogPath}}' <container_name>`\n```\n\n有个问题是该文件所在目录，普通登录用户是没有权限进入的，我们可以将日志从写道一个方便的位置\n\n```bash\n$ nohup sudo bash -c \"docker logs -f <container_name> >> /var/log/<container_name>.log\" &\n```\n\n- [how to redirect docker logs to a single file?](https://stackoverflow.com/questions/41144589/how-to-redirect-docker-logs-to-a-single-file/41147654)\n","source":"_posts/2018-06-14-docker-log.md","raw":"---\ntitle: Docker 容器日志的位置\ntags:\n  - docker\ndate: 2018-06-14 09:36:24\n---\n\n\nDocker 再启动容器后，可以用 `docker logs -f <container_name>` 来查看日志内容，那么日志文件存放在哪了呢？\n\n<!-- more --><!-- toc -->\n\n**查找全部容器的日志文件**\n\n```bash\n$ sudo find /var/lib/docker/containers -name *.log\n```\n\n**查看日志位置**\n\n```bash\n$ docker inspect --format='{{.LogPath}}' <container_name>\n```\n\n**实时查询内容**\n\n```bash\n$ sudo tail -f `docker inspect --format='{{.LogPath}}' <container_name>`\n```\n\n有个问题是该文件所在目录，普通登录用户是没有权限进入的，我们可以将日志从写道一个方便的位置\n\n```bash\n$ nohup sudo bash -c \"docker logs -f <container_name> >> /var/log/<container_name>.log\" &\n```\n\n- [how to redirect docker logs to a single file?](https://stackoverflow.com/questions/41144589/how-to-redirect-docker-logs-to-a-single-file/41147654)\n","slug":"docker-log","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aec00hd5gqodp8flo2x"},{"title":"小宝贝，第 11 天，出院第三天","date":"2018-06-17T14:54:10.000Z","_content":"\n今天出院第三天了，孩子没什么异常。\n\n<!-- more --><!-- toc -->\n出院时带了一大堆药，昨天拿出来看了半天，实在是不想给孩子吃，之前就从网上看，医院开一大推药，很多未必有用，比较黄疸不是那么严重的症状。\n\n不知道是不是老天诚心作对，这些天一直都是阴雨天气，想给孩子晒太阳都不行，只能期望她多吃多拉。\n\n回家后，最大的感觉就是孩子胃大了，医院里吃奶瓶的省事和回家后吃母乳的困难，形成鲜明对比，现在她的作息节奏变成了断断续续吃几个小时，在死睡几个小时。\n\n还有许多不适应，很有很多难关，希望孩子身体越来越健康。\n","source":"_posts/2018-06-17-baby10.md","raw":"---\ntitle: 小宝贝，第 11 天，出院第三天\ndate: 2018-06-17 14:54:10\ntags: [宝贝]\n---\n\n今天出院第三天了，孩子没什么异常。\n\n<!-- more --><!-- toc -->\n出院时带了一大堆药，昨天拿出来看了半天，实在是不想给孩子吃，之前就从网上看，医院开一大推药，很多未必有用，比较黄疸不是那么严重的症状。\n\n不知道是不是老天诚心作对，这些天一直都是阴雨天气，想给孩子晒太阳都不行，只能期望她多吃多拉。\n\n回家后，最大的感觉就是孩子胃大了，医院里吃奶瓶的省事和回家后吃母乳的困难，形成鲜明对比，现在她的作息节奏变成了断断续续吃几个小时，在死睡几个小时。\n\n还有许多不适应，很有很多难关，希望孩子身体越来越健康。\n","slug":"baby10","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aed00hf5gqourpsvvnp"},{"title":"Vagrant 中安装 Mysql 如何从外边链接","date":"2018-06-16T14:29:53.000Z","_content":"\n\n在 Vagrant 中安装 Mysql 后从外部链接需要三步\n\n<!-- more --><!-- toc -->\n\n## 设置私有 ip\n\n修改 `Vagrantfile` 添加 `private_network`，这样外部可以通过该 ip 链接\n\n```bash\nconfig.vm.network \"private_network\", ip: \"192.168.33.10\"\n```\n\n这步需要放在第一步来完成，随后重新加载配置\n\n```bash\n$ vagrant reload\n```\n\n## 去掉绑定 127.0.0.1\n\n如果你是使用 `rpm` 来安装的话，修改 `/etc/mysql/mysql.conf.d/mysql.cnf`，将绑定 `127.0.0.1` 这一行注释掉\n\n```bash\n# bind-address            = 127.0.0.1\n```\n\n## 对所有 ip 开放\n\n登陆 Mysql 并对所有外网 ip 开放权限\n\n```bash\n$ mysql -uroot -p\n\n> GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'your_mysql_password' WITH GRANT OPTION;\n```\n\n这样从外部通过如下命令就可以访问了\n\n```bash\n$ mysql -uroot -p -h 192.168.33.10\n```\n\n**注意**\n\n如果在生产环境上的话建议只对指定 ip 开放权限\n\n```mysql\n> GRANT ALL PRIVILEGES ON *.* TO 'root'@'213.1.2.1' IDENTIFIED BY 'your_mysql_password' WITH GRANT OPTION;\n```\n","source":"_posts/2018-06-16-mysql-vagrant-connect.md","raw":"---\ntitle: Vagrant 中安装 Mysql 如何从外边链接\ntags:\n  - mysql\ndate: 2018-06-16 14:29:53\n---\n\n\n在 Vagrant 中安装 Mysql 后从外部链接需要三步\n\n<!-- more --><!-- toc -->\n\n## 设置私有 ip\n\n修改 `Vagrantfile` 添加 `private_network`，这样外部可以通过该 ip 链接\n\n```bash\nconfig.vm.network \"private_network\", ip: \"192.168.33.10\"\n```\n\n这步需要放在第一步来完成，随后重新加载配置\n\n```bash\n$ vagrant reload\n```\n\n## 去掉绑定 127.0.0.1\n\n如果你是使用 `rpm` 来安装的话，修改 `/etc/mysql/mysql.conf.d/mysql.cnf`，将绑定 `127.0.0.1` 这一行注释掉\n\n```bash\n# bind-address            = 127.0.0.1\n```\n\n## 对所有 ip 开放\n\n登陆 Mysql 并对所有外网 ip 开放权限\n\n```bash\n$ mysql -uroot -p\n\n> GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'your_mysql_password' WITH GRANT OPTION;\n```\n\n这样从外部通过如下命令就可以访问了\n\n```bash\n$ mysql -uroot -p -h 192.168.33.10\n```\n\n**注意**\n\n如果在生产环境上的话建议只对指定 ip 开放权限\n\n```mysql\n> GRANT ALL PRIVILEGES ON *.* TO 'root'@'213.1.2.1' IDENTIFIED BY 'your_mysql_password' WITH GRANT OPTION;\n```\n","slug":"mysql-vagrant-connect","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aee00hh5gqo3zn6cyo4"},{"title":"Expect 中 source 的用法","date":"2018-06-18T16:55:59.000Z","_content":"\n在 Expect 中 source 的用户和 Shell 很类似，可以将变量作用到当前命令中。\n\n<!-- more -->\n\n**用法**\n\n```bash\nsource fileName                         # 加载文件\nsource -encoding encodingName fileName  # 使用 encoding 加载\n```\n\n新建 source 文件 `file1.exp`\n\n```bash\nset name wxnacy     # 设置变量\n```\n\n新建执行文件 `file2.exp`\n\n```bash\n#!/usr/bin/env expect\nsource file1.exp            # 加载文件\n\nputs [info exists name]     # 判断是否存在变量，存在返回 1，否则返回 0\nputs ${name}                # 打印变量\n```\n\n执行\n\n```bash\n$ expect file2.exp\n\n1\nwxnacy\n```\n\n- [source](https://www.tcl.tk/man/tcl/TclCmd/source.htm)\n","source":"_posts/2018-06-18-expect-source.md","raw":"---\ntitle: Expect 中 source 的用法\ndate: 2018-06-18 16:55:59\ntags: [expect]\n---\n\n在 Expect 中 source 的用户和 Shell 很类似，可以将变量作用到当前命令中。\n\n<!-- more -->\n\n**用法**\n\n```bash\nsource fileName                         # 加载文件\nsource -encoding encodingName fileName  # 使用 encoding 加载\n```\n\n新建 source 文件 `file1.exp`\n\n```bash\nset name wxnacy     # 设置变量\n```\n\n新建执行文件 `file2.exp`\n\n```bash\n#!/usr/bin/env expect\nsource file1.exp            # 加载文件\n\nputs [info exists name]     # 判断是否存在变量，存在返回 1，否则返回 0\nputs ${name}                # 打印变量\n```\n\n执行\n\n```bash\n$ expect file2.exp\n\n1\nwxnacy\n```\n\n- [source](https://www.tcl.tk/man/tcl/TclCmd/source.htm)\n","slug":"expect-source","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aef00hj5gqowx6n2mob"},{"title":"Shell 中的 Replace","date":"2018-06-20T17:00:37.000Z","_content":"\n\nShell 中没有没有 Replace 方法，但是有一些替换方案。\n\n<!-- more --><!-- toc -->\n\n**用法**\n\n```bash\n${parameter/pattern/string}\n```\n\n**使用**\n\n```bash\n$ a=/data/wxnacy/data/log/log.txt\n$ echo ${a/data/User}           # 将第一个 data 替换为 User\n/User/wxnacy/data/log/log.txt\n\n$ echo ${a//data/User}           # 将全部 data 替换为 User\n/User/wxnacy/User/log/log.txt\n\n$ echo ${a/#\\/data/\\/User}           # 匹配开头 /data 替换为 /User（/ 需要转义）\n/User/wxnacy/data/log/log.txt\n\n$ echo ${a/%log.txt/User}           # 匹配结尾 log.txt 替换为 User\n/data/wxnacy/data/log/User\n```\n\n其他方法\n\n还有一种方法是利用 sed 来实现\n\n```bash\n$ echo $a | sed -e \"s/data/User/g\"\n/User/wxnacy/User/log/log.txt\n```\n\n对比一下还是第一种方式简单\n\n- [bash shell 中的扩展--参数和变量扩展](http://blog.51cto.com/xuke1668/868683)\n- [Replace a string in shell script using a variable](https://stackoverflow.com/questions/3306007/replace-a-string-in-shell-script-using-a-variable)\n","source":"_posts/2018-06-20-shell-replace.md","raw":"---\ntitle: Shell 中的 Replace\ntags:\n  - shell\ndate: 2018-06-20 17:00:37\n---\n\n\nShell 中没有没有 Replace 方法，但是有一些替换方案。\n\n<!-- more --><!-- toc -->\n\n**用法**\n\n```bash\n${parameter/pattern/string}\n```\n\n**使用**\n\n```bash\n$ a=/data/wxnacy/data/log/log.txt\n$ echo ${a/data/User}           # 将第一个 data 替换为 User\n/User/wxnacy/data/log/log.txt\n\n$ echo ${a//data/User}           # 将全部 data 替换为 User\n/User/wxnacy/User/log/log.txt\n\n$ echo ${a/#\\/data/\\/User}           # 匹配开头 /data 替换为 /User（/ 需要转义）\n/User/wxnacy/data/log/log.txt\n\n$ echo ${a/%log.txt/User}           # 匹配结尾 log.txt 替换为 User\n/data/wxnacy/data/log/User\n```\n\n其他方法\n\n还有一种方法是利用 sed 来实现\n\n```bash\n$ echo $a | sed -e \"s/data/User/g\"\n/User/wxnacy/User/log/log.txt\n```\n\n对比一下还是第一种方式简单\n\n- [bash shell 中的扩展--参数和变量扩展](http://blog.51cto.com/xuke1668/868683)\n- [Replace a string in shell script using a variable](https://stackoverflow.com/questions/3306007/replace-a-string-in-shell-script-using-a-variable)\n","slug":"shell-replace","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aeh00hl5gqofvuspv0f"},{"title":"Ubuntu 16.04 安装 JDK","date":"2018-06-19T12:34:16.000Z","_content":"\n***现以更新安装 Java 11 版本，传送门 [Ubuntu 如何安装 Java 11](/2018/12/26/ubuntu-install-jdk11/)***\n\nUbuntu 安装 JDK 与 CentOS 很相似，但更简单。\n\n<!-- more --><!-- toc -->\n\n## OpenJDK\n\n查找 JDK\n\n```bash\n$ sudo apt update -y\n$ sudo apt search jdk\n\ndefault-jdk/xenial 2:1.8-56ubuntu2 amd64\n  Standard Java or Java compatible Development Kit\n\ndefault-jdk-doc/xenial 2:1.8-56ubuntu2 amd64\n  Standard Java or Java compatible Development Kit (documentation)\n\ndefault-jdk-headless/xenial 2:1.8-56ubuntu2 amd64\n  Standard Java or Java compatible Development Kit (headless)\n\ndefault-jre/xenial 2:1.8-56ubuntu2 amd64\n  Standard Java or Java compatible Runtime\n\ndefault-jre-headless/xenial 2:1.8-56ubuntu2 amd64\n  Standard Java or Java compatible Runtime (headless)\n\nopenjdk-8-dbg/xenial-updates,xenial-security 8u171-b11-0ubuntu0.16.04.1 amd64\n  Java runtime based on OpenJDK (debugging symbols)\n\nopenjdk-8-demo/xenial-updates,xenial-security 8u171-b11-0ubuntu0.16.04.1 amd64\n  Java runtime based on OpenJDK (demos and examples)\n\nopenjdk-8-doc/xenial-updates,xenial-security 8u171-b11-0ubuntu0.16.04.1 all\n  OpenJDK Development Kit (JDK) documentation\n\nopenjdk-8-jdk/xenial-updates,xenial-security 8u171-b11-0ubuntu0.16.04.1 amd64\n  OpenJDK Development Kit (JDK)\n\nopenjdk-8-jdk-headless/xenial-updates,xenial-security 8u171-b11-0ubuntu0.16.04.1 amd64\n  OpenJDK Development Kit (JDK) (headless)\n\nopenjdk-8-jre/xenial-updates,xenial-security 8u171-b11-0ubuntu0.16.04.1 amd64\n  OpenJDK Java runtime, using Hotspot JIT\n\nopenjdk-8-jre-headless/xenial-updates,xenial-security 8u171-b11-0ubuntu0.16.04.1 amd64\n  OpenJDK Java runtime, using Hotspot JIT (headless)\n\nopenjdk-8-jre-jamvm/xenial-updates,xenial-security 8u171-b11-0ubuntu0.16.04.1 amd64\n  Transitional package for obsolete JamVM for OpenJDK\n\nopenjdk-8-source/xenial-updates,xenial-security 8u171-b11-0ubuntu0.16.04.1 all\n  OpenJDK Development Kit (JDK) source files\n```\n\n下载指定版本\n\n```bash\n$ sudo apt install -y openjdk-8-jdk\n```\n\n或直接下载默认版本\n\n```bash\n$ sudo apt install -y default-jdk\n```\n\n## Oracle JDK\n\nUbuntu 安装 Oracle JDK 要方便的很多\n\n添加 Oracle PPA 到软件仓库中\n\n```bash\n$ sudo add-apt-repository ppa:webupd8team/java\n$ sudo apt update -y\n```\n\n下载\n\n```bash\n$ sudo apt-get install oracle-java8-installer\n```\n\n## 选择版本\n\n```bash\n$ sudo update-alternatives --config java\n\nThere are 2 choices for the alternative java (providing /usr/bin/java).\n\n  Selection    Path                                            Priority   Status\n------------------------------------------------------------\n  0            /usr/lib/jvm/java-8-oracle/jre/bin/java          1081      auto mode\n  1            /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java   1081      manual mode\n* 2            /usr/lib/jvm/java-8-oracle/jre/bin/java          1081      manual mode\n\nPress <enter> to keep the current choice[*], or type selection number:\n```\n\n`*` 为当前选中版本，输入相应数字即可更改版本\n\n- [How To Install Java with Apt-Get on Ubuntu 16.04](https://www.digitalocean.com/community/tutorials/how-to-install-java-with-apt-get-on-ubuntu-16-04)\n","source":"_posts/2018-06-19-ubuntu-install-jdk.md","raw":"---\ntitle: Ubuntu 16.04 安装 JDK\ntags:\n  - linux\n  - java\ndate: 2018-06-19 12:34:16\n---\n\n***现以更新安装 Java 11 版本，传送门 [Ubuntu 如何安装 Java 11](/2018/12/26/ubuntu-install-jdk11/)***\n\nUbuntu 安装 JDK 与 CentOS 很相似，但更简单。\n\n<!-- more --><!-- toc -->\n\n## OpenJDK\n\n查找 JDK\n\n```bash\n$ sudo apt update -y\n$ sudo apt search jdk\n\ndefault-jdk/xenial 2:1.8-56ubuntu2 amd64\n  Standard Java or Java compatible Development Kit\n\ndefault-jdk-doc/xenial 2:1.8-56ubuntu2 amd64\n  Standard Java or Java compatible Development Kit (documentation)\n\ndefault-jdk-headless/xenial 2:1.8-56ubuntu2 amd64\n  Standard Java or Java compatible Development Kit (headless)\n\ndefault-jre/xenial 2:1.8-56ubuntu2 amd64\n  Standard Java or Java compatible Runtime\n\ndefault-jre-headless/xenial 2:1.8-56ubuntu2 amd64\n  Standard Java or Java compatible Runtime (headless)\n\nopenjdk-8-dbg/xenial-updates,xenial-security 8u171-b11-0ubuntu0.16.04.1 amd64\n  Java runtime based on OpenJDK (debugging symbols)\n\nopenjdk-8-demo/xenial-updates,xenial-security 8u171-b11-0ubuntu0.16.04.1 amd64\n  Java runtime based on OpenJDK (demos and examples)\n\nopenjdk-8-doc/xenial-updates,xenial-security 8u171-b11-0ubuntu0.16.04.1 all\n  OpenJDK Development Kit (JDK) documentation\n\nopenjdk-8-jdk/xenial-updates,xenial-security 8u171-b11-0ubuntu0.16.04.1 amd64\n  OpenJDK Development Kit (JDK)\n\nopenjdk-8-jdk-headless/xenial-updates,xenial-security 8u171-b11-0ubuntu0.16.04.1 amd64\n  OpenJDK Development Kit (JDK) (headless)\n\nopenjdk-8-jre/xenial-updates,xenial-security 8u171-b11-0ubuntu0.16.04.1 amd64\n  OpenJDK Java runtime, using Hotspot JIT\n\nopenjdk-8-jre-headless/xenial-updates,xenial-security 8u171-b11-0ubuntu0.16.04.1 amd64\n  OpenJDK Java runtime, using Hotspot JIT (headless)\n\nopenjdk-8-jre-jamvm/xenial-updates,xenial-security 8u171-b11-0ubuntu0.16.04.1 amd64\n  Transitional package for obsolete JamVM for OpenJDK\n\nopenjdk-8-source/xenial-updates,xenial-security 8u171-b11-0ubuntu0.16.04.1 all\n  OpenJDK Development Kit (JDK) source files\n```\n\n下载指定版本\n\n```bash\n$ sudo apt install -y openjdk-8-jdk\n```\n\n或直接下载默认版本\n\n```bash\n$ sudo apt install -y default-jdk\n```\n\n## Oracle JDK\n\nUbuntu 安装 Oracle JDK 要方便的很多\n\n添加 Oracle PPA 到软件仓库中\n\n```bash\n$ sudo add-apt-repository ppa:webupd8team/java\n$ sudo apt update -y\n```\n\n下载\n\n```bash\n$ sudo apt-get install oracle-java8-installer\n```\n\n## 选择版本\n\n```bash\n$ sudo update-alternatives --config java\n\nThere are 2 choices for the alternative java (providing /usr/bin/java).\n\n  Selection    Path                                            Priority   Status\n------------------------------------------------------------\n  0            /usr/lib/jvm/java-8-oracle/jre/bin/java          1081      auto mode\n  1            /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java   1081      manual mode\n* 2            /usr/lib/jvm/java-8-oracle/jre/bin/java          1081      manual mode\n\nPress <enter> to keep the current choice[*], or type selection number:\n```\n\n`*` 为当前选中版本，输入相应数字即可更改版本\n\n- [How To Install Java with Apt-Get on Ubuntu 16.04](https://www.digitalocean.com/community/tutorials/how-to-install-java-with-apt-get-on-ubuntu-16-04)\n","slug":"ubuntu-install-jdk","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aei00hn5gqog7ua37kz"},{"title":"Python 计算 url 短连接","date":"2018-06-21T20:17:14.000Z","_content":"\nPython 计算 url 短连接\n\n<!-- more --><!-- toc -->\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nimport hashlib\n\ndef md5(text):\n    return hashlib.md5(text.encode(\"utf-8\")).hexdigest()\n\ncode_map = (\n        'a' , 'b' , 'c' , 'd' , 'e' , 'f' , 'g' , 'h' ,\n        'i' , 'j' , 'k' , 'l' , 'm' , 'n' , 'o' , 'p' ,\n        'q' , 'r' , 's' , 't' , 'u' , 'v' , 'w' , 'x' ,\n        'y' , 'z' , '0' , '1' , '2' , '3' , '4' , '5' ,\n        '6' , '7' , '8' , '9' , 'A' , 'B' , 'C' , 'D' ,\n        'E' , 'F' , 'G' , 'H' , 'I' , 'J' , 'K' , 'L' ,\n        'M' , 'N' , 'O' , 'P' , 'Q' , 'R' , 'S' , 'T' ,\n        'U' , 'V' , 'W' , 'X' , 'Y' , 'Z'\n        )\n\ndef generate_short(long_url):\n    '''生成短连接'''\n    hkeys = []\n    hex_text = md5(long_url)\n    for i in range(0, 4):\n        n = int(hex_text[i*8:(i+1)*8], 16)\n        v = []\n        e = 0\n        for j in range(0, 5):\n            x = 0x0000003D & n\n            e |= ((0x00000002 & n ) >> 1) << j\n            v.insert(0, code_map[x])\n            n = n >> 6\n        e |= n << 5\n        v.insert(0, code_map[e & 0x0000003D])\n        hkeys.append(''.join(v))\n\n    return hkeys[0]\n\nif __name__ == '__main__':\n    print(generate_short('https://wxnacy.com'))\n```\n","source":"_posts/2018-06-21-python-short-url.md","raw":"---\ntitle: Python 计算 url 短连接\ndate: 2018-06-21 20:17:14\ntags: [python]\n---\n\nPython 计算 url 短连接\n\n<!-- more --><!-- toc -->\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nimport hashlib\n\ndef md5(text):\n    return hashlib.md5(text.encode(\"utf-8\")).hexdigest()\n\ncode_map = (\n        'a' , 'b' , 'c' , 'd' , 'e' , 'f' , 'g' , 'h' ,\n        'i' , 'j' , 'k' , 'l' , 'm' , 'n' , 'o' , 'p' ,\n        'q' , 'r' , 's' , 't' , 'u' , 'v' , 'w' , 'x' ,\n        'y' , 'z' , '0' , '1' , '2' , '3' , '4' , '5' ,\n        '6' , '7' , '8' , '9' , 'A' , 'B' , 'C' , 'D' ,\n        'E' , 'F' , 'G' , 'H' , 'I' , 'J' , 'K' , 'L' ,\n        'M' , 'N' , 'O' , 'P' , 'Q' , 'R' , 'S' , 'T' ,\n        'U' , 'V' , 'W' , 'X' , 'Y' , 'Z'\n        )\n\ndef generate_short(long_url):\n    '''生成短连接'''\n    hkeys = []\n    hex_text = md5(long_url)\n    for i in range(0, 4):\n        n = int(hex_text[i*8:(i+1)*8], 16)\n        v = []\n        e = 0\n        for j in range(0, 5):\n            x = 0x0000003D & n\n            e |= ((0x00000002 & n ) >> 1) << j\n            v.insert(0, code_map[x])\n            n = n >> 6\n        e |= n << 5\n        v.insert(0, code_map[e & 0x0000003D])\n        hkeys.append(''.join(v))\n\n    return hkeys[0]\n\nif __name__ == '__main__':\n    print(generate_short('https://wxnacy.com'))\n```\n","slug":"python-short-url","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aej00hp5gqoijwdqeif"},{"title":"关于 Javascript 的文档链接","date":"2018-06-22T17:07:36.000Z","_content":"\n关于 Javascript 的文档链接\n\n<!-- more --><!-- toc -->\n\n\n### Promise\n- [JavaScript Promise：简介](https://developers.google.com/web/fundamentals/primers/promises?hl=zh-cn)\n- [JavaScript Promise迷你书（中文版）](http://liubin.org/promises-book/)\n- [Promise-JavaScript-MDN-Mozilla](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise)\n","source":"_posts/2018-06-22-js-doc-link.md","raw":"---\ntitle: 关于 Javascript 的文档链接\ntags:\n  - javascript\ndate: 2018-06-22 17:07:36\n---\n\n关于 Javascript 的文档链接\n\n<!-- more --><!-- toc -->\n\n\n### Promise\n- [JavaScript Promise：简介](https://developers.google.com/web/fundamentals/primers/promises?hl=zh-cn)\n- [JavaScript Promise迷你书（中文版）](http://liubin.org/promises-book/)\n- [Promise-JavaScript-MDN-Mozilla](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise)\n","slug":"js-doc-link","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ael00hr5gqocqsnab3l"},{"title":"Ubuntu 1604 版本安装 Chrome","date":"2018-06-24T15:25:22.000Z","_content":"\n\n在使用 NodeJS 实现网页截图功能时，需要在 Ubuntu 上安装 Chrome 浏览器。\n\n<!-- more --><!-- toc -->\n\n## 安装\n\n将下载源加入系统源列表\n\n```bash\n$ sudo wget http://www.linuxidc.com/files/repo/google-chrome.list -P /etc/apt/sources.list.d/\n```\n\n导入谷歌软件公钥\n\n```bash\n$ wget -q -O - https://dl.google.com/linux/linux_signing_key.pub | sudo apt-key add -\n```\n\n安装\n\n```bash\n$ sudo apt update -y && sudo apt install -y  google-chrome-stable\n```\n\n## 使用\n\n使用 `headless` 打印 DOM\n\n```bash\n$ google-chrome --headless --disable-gpu --dump-dom https://wxnacy.com\n```\n\n- [Ubuntu 16.04安装Chrome浏览器](https://blog.csdn.net/qq_30164225/article/details/54632634)\n- [Headless Chrome](https://wxnacy.com/2018/02/12/headless-chrome/)\n","source":"_posts/2018-06-24-ubuntu1604-install-chrome.md","raw":"---\ntitle: Ubuntu 1604 版本安装 Chrome\ntags:\n  - linux\ndate: 2018-06-24 15:25:22\n---\n\n\n在使用 NodeJS 实现网页截图功能时，需要在 Ubuntu 上安装 Chrome 浏览器。\n\n<!-- more --><!-- toc -->\n\n## 安装\n\n将下载源加入系统源列表\n\n```bash\n$ sudo wget http://www.linuxidc.com/files/repo/google-chrome.list -P /etc/apt/sources.list.d/\n```\n\n导入谷歌软件公钥\n\n```bash\n$ wget -q -O - https://dl.google.com/linux/linux_signing_key.pub | sudo apt-key add -\n```\n\n安装\n\n```bash\n$ sudo apt update -y && sudo apt install -y  google-chrome-stable\n```\n\n## 使用\n\n使用 `headless` 打印 DOM\n\n```bash\n$ google-chrome --headless --disable-gpu --dump-dom https://wxnacy.com\n```\n\n- [Ubuntu 16.04安装Chrome浏览器](https://blog.csdn.net/qq_30164225/article/details/54632634)\n- [Headless Chrome](https://wxnacy.com/2018/02/12/headless-chrome/)\n","slug":"ubuntu1604-install-chrome","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aem00ht5gqot38cyksp"},{"title":"Node 使用 ws 模块实现简单 WebSocket","date":"2018-06-26T14:09:54.000Z","_content":"\nNode 中实现 WebSocket 可以使用 [ws](https://github.com/websockets/ws) 模块轻松实现。\n\n<!-- more --><!-- toc -->\n\n## 安装\n\n```bash\n$ yarn add ws\n```\n\n## 实现\n\n我们采用 `client` 和 `server` 分开实现发送和回复的简单流程\n\n**Server**\n\n```javascript\n// 导入WebSocket模块:\nconst WebSocket = require('ws');\n\n// 引用Server类:\nconst WebSocketServer = WebSocket.Server;\n\n// 实例化:\nconst wss = new WebSocketServer({\n    port: 4200\n});\n\nwss.on('connection', function connection(ws) {\n  console.log(\"server connection\");\n  ws.on('message', function incoming(message) {\n    console.log('received: %s', message);\n    ws.send(`hello ${message}`)\n  });\n\n});\n```\n\n**Client**\n\n```javascript\nconst WebSocket = require('ws');\n\nconst ws = new WebSocket('ws://localhost:4200/test');\n\nws.on('open', function open() {\n  ws.send('wxnacy');\n});\n\nws.on('message', function incoming(data) {\n  console.log(data);\n});\n```\n\n**启动服务**\n\n```bash\n$ node server.js\n```\n\n**启动客户端**\n\n```bash\n$ node client.js\n```\n\n随后会看到服务端打印如下日志\n\n```bash\nserver connection\nreceived: wxnacy\n```\n\n客户端打印如下日志\n\n```bash\nhello wxnacy\n```\n\n更多参数配置见[文档](https://github.com/websockets/ws/blob/master/doc/ws.md#new-websocketserveroptions-callback)\n","source":"_posts/2018-06-26-node-ws.md","raw":"---\ntitle: Node 使用 ws 模块实现简单 WebSocket\ndate: 2018-06-26 14:09:54\ntags: [node]\n---\n\nNode 中实现 WebSocket 可以使用 [ws](https://github.com/websockets/ws) 模块轻松实现。\n\n<!-- more --><!-- toc -->\n\n## 安装\n\n```bash\n$ yarn add ws\n```\n\n## 实现\n\n我们采用 `client` 和 `server` 分开实现发送和回复的简单流程\n\n**Server**\n\n```javascript\n// 导入WebSocket模块:\nconst WebSocket = require('ws');\n\n// 引用Server类:\nconst WebSocketServer = WebSocket.Server;\n\n// 实例化:\nconst wss = new WebSocketServer({\n    port: 4200\n});\n\nwss.on('connection', function connection(ws) {\n  console.log(\"server connection\");\n  ws.on('message', function incoming(message) {\n    console.log('received: %s', message);\n    ws.send(`hello ${message}`)\n  });\n\n});\n```\n\n**Client**\n\n```javascript\nconst WebSocket = require('ws');\n\nconst ws = new WebSocket('ws://localhost:4200/test');\n\nws.on('open', function open() {\n  ws.send('wxnacy');\n});\n\nws.on('message', function incoming(data) {\n  console.log(data);\n});\n```\n\n**启动服务**\n\n```bash\n$ node server.js\n```\n\n**启动客户端**\n\n```bash\n$ node client.js\n```\n\n随后会看到服务端打印如下日志\n\n```bash\nserver connection\nreceived: wxnacy\n```\n\n客户端打印如下日志\n\n```bash\nhello wxnacy\n```\n\n更多参数配置见[文档](https://github.com/websockets/ws/blob/master/doc/ws.md#new-websocketserveroptions-callback)\n","slug":"node-ws","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aeo00hv5gqoaguznozm"},{"title":"wget 网络请求工具","date":"2018-06-23T15:36:54.000Z","_content":"\nwget 是当前 Unix 系统不可或缺的工具之一。\n\n<!-- more --><!-- toc -->\n> wget命令用来从指定的URL下载文件。wget非常稳定，它在带宽很窄的情况下和不稳定网络中有很强的适应性，如果是由于网络的原因下载失败，wget会不断的尝试，直到整个文件下载完毕。如果是服务器打断下载过程，它会再次联到服务器上从停止的地方继续下载。这对从那些限定了链接时间的服务器上下载大文件非常有用。\n\n## 下载\n\n**Ubuntu**\n\n```bash\n$ sudo apt install -y wget\n```\n\n**CentOS**\n\n```bash\n$ sudo yum install -y wget\n```\n\n**macOS**\n\n```bash\n$ brew install wget\n```\n\n## 使用\n\n**下载**\n\n```bash\n$ wget https://wxnacy.com/images/vimgrep.gif\n```\n\n**重命名**\n\n```bash\n$ wget -O vg.gif https://wxnacy.com/images/vimgrep.gif\n```\n\n**后台下载**\n\n后台下载，并将日志输出到 `wget-log` 中\n\n```bash\n$ wget -b https://wxnacy.com/images/vimgrep.gif\n```\n\n**输入日志到文件**\n\n将本要输出到屏幕的日志信息输出到指定文件\n\n```bash\n$ wget -a[/-o] wget.log https://wxnacy.com/images/vimgrep.gif\n```\n\n**下载完整网站**\n\n```bash\n$ wget --mirror -p --convert-links -P ~/Downloads https://wxnacy.com\n```\n\n- `--miror` 开户镜像下载。\n- `-p` 下载所有为了html页面显示正常的文件。\n- `--convert-links` 下载后，转换成本地的链接。\n- `-P ~/Downloads` 保存所有文件和目录到本地指定目录。\n\n- [wget 命令](http://man.linuxde.net/wget)\n","source":"_posts/2018-06-23-wget.md","raw":"---\ntitle: wget 网络请求工具\ndate: 2018-06-23 15:36:54\ntags: [linux]\n---\n\nwget 是当前 Unix 系统不可或缺的工具之一。\n\n<!-- more --><!-- toc -->\n> wget命令用来从指定的URL下载文件。wget非常稳定，它在带宽很窄的情况下和不稳定网络中有很强的适应性，如果是由于网络的原因下载失败，wget会不断的尝试，直到整个文件下载完毕。如果是服务器打断下载过程，它会再次联到服务器上从停止的地方继续下载。这对从那些限定了链接时间的服务器上下载大文件非常有用。\n\n## 下载\n\n**Ubuntu**\n\n```bash\n$ sudo apt install -y wget\n```\n\n**CentOS**\n\n```bash\n$ sudo yum install -y wget\n```\n\n**macOS**\n\n```bash\n$ brew install wget\n```\n\n## 使用\n\n**下载**\n\n```bash\n$ wget https://wxnacy.com/images/vimgrep.gif\n```\n\n**重命名**\n\n```bash\n$ wget -O vg.gif https://wxnacy.com/images/vimgrep.gif\n```\n\n**后台下载**\n\n后台下载，并将日志输出到 `wget-log` 中\n\n```bash\n$ wget -b https://wxnacy.com/images/vimgrep.gif\n```\n\n**输入日志到文件**\n\n将本要输出到屏幕的日志信息输出到指定文件\n\n```bash\n$ wget -a[/-o] wget.log https://wxnacy.com/images/vimgrep.gif\n```\n\n**下载完整网站**\n\n```bash\n$ wget --mirror -p --convert-links -P ~/Downloads https://wxnacy.com\n```\n\n- `--miror` 开户镜像下载。\n- `-p` 下载所有为了html页面显示正常的文件。\n- `--convert-links` 下载后，转换成本地的链接。\n- `-P ~/Downloads` 保存所有文件和目录到本地指定目录。\n\n- [wget 命令](http://man.linuxde.net/wget)\n","slug":"wget","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aep00hx5gqo3y8xuzwd"},{"title":"Linux 防火墙工具 ufw","date":"2018-06-28T17:00:06.000Z","_content":"\nufw 是一个主机端的 iptables 类防火墙配置工具\n\n<!-- more --><!-- toc -->\n\n## 下载\n\n**Ubuntu**\n\n```bash\n$ sudo apt install -y ufw\n```\n\n**CentOS**\n\n```bash\n$ sudo yum install -y ufw\n```\n\n## 使用\n\n**开启**\n\n```bash\n$ sudo ufw enable\n$ sudo ufw default deny # 开启了防火墙并随系统启动同时关闭所有外部对本机的访问（本机访问外部正常）。\n```\n\n**关闭**\n\n```bash\n$ sudo ufw disable\n```\n\n**查看防火墙状态**\n\n```bash\n$ sudo ufw status\n```\n\n**开启/禁用相应端口或服务举例**\n\n```bash\n$ sudo ufw allow 80                 # 允许外部访问80端口\n$ sudo ufw delete allow 80          # 禁止外部访问80 端口\n$ sudo ufw allow from 192.168.1.1   # 允许此IP访问所有的本机端口\n$ sudo ufw deny smtp                # 禁止外部访问smtp服务\n$ sudo ufw delete allow smtp        # 删除上面建立的某条规则\n$ sudo ufw deny proto tcp from 10.0.0.0/8 to 192.168.0.1 port 22    # 要拒绝所有的TCP流量从10.0.0.0/8 到192.168.0.1地址的22端口\n\n# 可以允许所有RFC1918网络（局域网/无线局域网的）访问这个主机（/8,/16,/12是一种网络分级）：\n$ sudo ufw allow from 10.0.0.0/8\n$ sudo ufw allow from 172.16.0.0/12\n$ sudo ufw allow from 192.168.0.0/16\n```\n\n- [UFW防火墙简单设置](http://wiki.ubuntu.org.cn/UFW%E9%98%B2%E7%81%AB%E5%A2%99%E7%AE%80%E5%8D%95%E8%AE%BE%E7%BD%AE)\n","source":"_posts/2018-06-28-ufw.md","raw":"---\ntitle: Linux 防火墙工具 ufw\ndate: 2018-06-28 17:00:06\ntags: [linux]\n---\n\nufw 是一个主机端的 iptables 类防火墙配置工具\n\n<!-- more --><!-- toc -->\n\n## 下载\n\n**Ubuntu**\n\n```bash\n$ sudo apt install -y ufw\n```\n\n**CentOS**\n\n```bash\n$ sudo yum install -y ufw\n```\n\n## 使用\n\n**开启**\n\n```bash\n$ sudo ufw enable\n$ sudo ufw default deny # 开启了防火墙并随系统启动同时关闭所有外部对本机的访问（本机访问外部正常）。\n```\n\n**关闭**\n\n```bash\n$ sudo ufw disable\n```\n\n**查看防火墙状态**\n\n```bash\n$ sudo ufw status\n```\n\n**开启/禁用相应端口或服务举例**\n\n```bash\n$ sudo ufw allow 80                 # 允许外部访问80端口\n$ sudo ufw delete allow 80          # 禁止外部访问80 端口\n$ sudo ufw allow from 192.168.1.1   # 允许此IP访问所有的本机端口\n$ sudo ufw deny smtp                # 禁止外部访问smtp服务\n$ sudo ufw delete allow smtp        # 删除上面建立的某条规则\n$ sudo ufw deny proto tcp from 10.0.0.0/8 to 192.168.0.1 port 22    # 要拒绝所有的TCP流量从10.0.0.0/8 到192.168.0.1地址的22端口\n\n# 可以允许所有RFC1918网络（局域网/无线局域网的）访问这个主机（/8,/16,/12是一种网络分级）：\n$ sudo ufw allow from 10.0.0.0/8\n$ sudo ufw allow from 172.16.0.0/12\n$ sudo ufw allow from 192.168.0.0/16\n```\n\n- [UFW防火墙简单设置](http://wiki.ubuntu.org.cn/UFW%E9%98%B2%E7%81%AB%E5%A2%99%E7%AE%80%E5%8D%95%E8%AE%BE%E7%BD%AE)\n","slug":"ufw","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aeq00hz5gqojs561a76"},{"title":"小宝贝，第 19 天，上班第一天","date":"2018-06-25T15:24:43.000Z","_content":"\n\n陪产假结束了，今天第一天上班。\n\n<!-- more --><!-- toc -->\n养孩子是一天一个样，每天都可能遇到新的情况，好歹现在慢慢适应了这个节奏，不过今天还是总会家里是不是会发生什么情况。\n\n接下来还有很多事情要做，首先就是要搞定欣欣的社保，这样才能报销她的住院费，时间很紧张，加油。\n","source":"_posts/2018-06-25-baby19.md","raw":"---\ntitle: 小宝贝，第 19 天，上班第一天\ntags:\n  - 宝贝\ndate: 2018-06-25 15:24:43\n---\n\n\n陪产假结束了，今天第一天上班。\n\n<!-- more --><!-- toc -->\n养孩子是一天一个样，每天都可能遇到新的情况，好歹现在慢慢适应了这个节奏，不过今天还是总会家里是不是会发生什么情况。\n\n接下来还有很多事情要做，首先就是要搞定欣欣的社保，这样才能报销她的住院费，时间很紧张，加油。\n","slug":"baby19","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aer00i15gqo0zxh6mds"},{"title":"CentOS yum-config-manager command not found","date":"2018-06-30T18:25:02.000Z","_content":"\n`yum-config-manager` 命令是在 `yum-utils` 软件包中的。\n\n<!-- more --><!-- toc -->\n某些发行版本中默认是不安装的，此时判断没有 `yum-config-manager` 命令，手动安装下就行了。\n\n```bash\nif [ $SYS == 'centos' ];then\n    path=`command -v yum-config-manager`\n    if [ $path ];then\n        echo -e \"yum-utils\\tinstall on $path\"\n    else\n        sudo yum install -y yum-utils\n    fi\nfi\n```\n","source":"_posts/2018-06-30-centos-yum-config-manager-not-found.md","raw":"---\ntitle: CentOS yum-config-manager command not found\ndate: 2018-06-30 18:25:02\ntags: [linux]\n---\n\n`yum-config-manager` 命令是在 `yum-utils` 软件包中的。\n\n<!-- more --><!-- toc -->\n某些发行版本中默认是不安装的，此时判断没有 `yum-config-manager` 命令，手动安装下就行了。\n\n```bash\nif [ $SYS == 'centos' ];then\n    path=`command -v yum-config-manager`\n    if [ $path ];then\n        echo -e \"yum-utils\\tinstall on $path\"\n    else\n        sudo yum install -y yum-utils\n    fi\nfi\n```\n","slug":"centos-yum-config-manager-not-found","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aes00i35gqocesg5gju"},{"title":"Mysql 插入表情","date":"2018-07-02T10:08:12.000Z","_content":"\n\nMysql 建表时，默认 `varchar` 字段是不能保存表情符号的，会报编码错误。\n\n<!-- more --><!-- toc -->\n修改下表和字段的编码即可\n\n```mysql\n> ALTER TABLE wxnacy CHARSET=utf8mb4;\n> ALTER TABLE wxnacy MODIFY name VARCHAR(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL default '';\n```\n\n其中 `utf8mb4_unicode_ci` 值需要跟表格的 `Collation` 值相同，如果为 `utf8mb4_general_ci` ，则要相应改变。\n","source":"_posts/2018-07-02-mysql-biaoqing.md","raw":"---\ntitle: Mysql 插入表情\ntags:\n  - mysql\ndate: 2018-07-02 10:08:12\n---\n\n\nMysql 建表时，默认 `varchar` 字段是不能保存表情符号的，会报编码错误。\n\n<!-- more --><!-- toc -->\n修改下表和字段的编码即可\n\n```mysql\n> ALTER TABLE wxnacy CHARSET=utf8mb4;\n> ALTER TABLE wxnacy MODIFY name VARCHAR(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL default '';\n```\n\n其中 `utf8mb4_unicode_ci` 值需要跟表格的 `Collation` 值相同，如果为 `utf8mb4_general_ci` ，则要相应改变。\n","slug":"mysql-biaoqing","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aet00i55gqo8g9ms9kv"},{"title":"Wshell 集成化 Linux 脚本","date":"2018-06-29T16:45:29.000Z","_content":"\n\n[Wshell](https://github.com/wxnacy/wshell) 是集成化的 Linux 服务器脚本，主旨是尽量将常用软件的复杂安装过程和操作一键化，提高工作效率。\n\n<!-- more --><!-- toc -->\n**适配**\n- Ubuntu\n- CentOS\n\n\n\n## 安装\n\n```bash\n$ curl -L https://raw.githubusercontent.com/wxnacy/wshell/master/install | bash\n```\n\n**配置环境**\n\n```bash\n$ vim ~/.bash_profile\n```\n\n```bash\nexport PATH=\"${HOME}/.wshell/bin:$PATH\"\n. ${HOME}/.wshell/bin/conf/.bash_profile\n```\n\n```bash\n$ source ~/.bash_profile\n```\n\n## 使用\n\n```bash\n$ wshell <command> [args...]\n```\n\n## 参数\n### install\n\n一键下载软件，如\n\n```bash\n$ wshell install java\n```\n\n现在支持的软件\n\n- `mysql` 5.7.x\n- `java` OpenJDK 1.8.0\n- `nvm` 0.33.11\n- `pyenv`\n- `ack`\n- `dig`\n- `htop`\n- `http` httpie\n- `wvim`\n- `system`\n\n**system**\n\n包含了系统常用的基础软件\n\n```bash\ngcc, g++, make, cmake, git, vim, wget, unzip, expect, htop, httpie, patch, ack, dig\n\n# ubuntu\nzlib1g.dev, libgdbm-dev, libssl-dev, libsqlite3-dev, libbz2-dev, libreadline-dev\n\n# centos\nc++, pcre, pcre-devel, openssl, openssl-devel, epel-release, zlib, zlib-devel, readline, readline-devel, readline-static, openssl-static, sqlite-devel, bzip2-devel, bzip2-libs\n```\n\n### update\n\n更新 Wshell 到最新版\n\n### check\n\n查看 Wshell 支持软件的安装情况\n\n","source":"_posts/2018-06-29-wshell.md","raw":"---\ntitle: Wshell 集成化 Linux 脚本\ndate: 2018-06-29 16:45:29\ntags: [shell]\n---\n\n\n[Wshell](https://github.com/wxnacy/wshell) 是集成化的 Linux 服务器脚本，主旨是尽量将常用软件的复杂安装过程和操作一键化，提高工作效率。\n\n<!-- more --><!-- toc -->\n**适配**\n- Ubuntu\n- CentOS\n\n\n\n## 安装\n\n```bash\n$ curl -L https://raw.githubusercontent.com/wxnacy/wshell/master/install | bash\n```\n\n**配置环境**\n\n```bash\n$ vim ~/.bash_profile\n```\n\n```bash\nexport PATH=\"${HOME}/.wshell/bin:$PATH\"\n. ${HOME}/.wshell/bin/conf/.bash_profile\n```\n\n```bash\n$ source ~/.bash_profile\n```\n\n## 使用\n\n```bash\n$ wshell <command> [args...]\n```\n\n## 参数\n### install\n\n一键下载软件，如\n\n```bash\n$ wshell install java\n```\n\n现在支持的软件\n\n- `mysql` 5.7.x\n- `java` OpenJDK 1.8.0\n- `nvm` 0.33.11\n- `pyenv`\n- `ack`\n- `dig`\n- `htop`\n- `http` httpie\n- `wvim`\n- `system`\n\n**system**\n\n包含了系统常用的基础软件\n\n```bash\ngcc, g++, make, cmake, git, vim, wget, unzip, expect, htop, httpie, patch, ack, dig\n\n# ubuntu\nzlib1g.dev, libgdbm-dev, libssl-dev, libsqlite3-dev, libbz2-dev, libreadline-dev\n\n# centos\nc++, pcre, pcre-devel, openssl, openssl-devel, epel-release, zlib, zlib-devel, readline, readline-devel, readline-static, openssl-static, sqlite-devel, bzip2-devel, bzip2-libs\n```\n\n### update\n\n更新 Wshell 到最新版\n\n### check\n\n查看 Wshell 支持软件的安装情况\n\n","slug":"wshell","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aev00i75gqo8i4vvxaa"},{"title":"Linux 判断是否安装某个软件","date":"2018-06-27T18:15:26.000Z","_content":"\nLinux 中如果想要判断某个软件是否安装过，可以使用 `command` 命令\n\n<!-- more --><!-- toc -->\n\n**使用**\n\n```bash\n$ command -pvV command [arg ...]\n```\n\n**实例**\n\n```bash\n$ command -v java\n/usr/bin/java\n\n$ command -V java\njava is /usr/bin/java\n\n$ command -p java\n\nUsage: java [-options] class [args...]\n           (to execute a class)\n   or  java [-options] -jar jarfile [args...]\n           (to execute a jar file)\nwhere options include:\n    -d32          use a 32-bit data model if available\n    -d64          use a 64-bit data model if available\n    -server       to select the \"server\" VM\n    -zero         to select the \"zero\" VM\n    -dcevm        to select the \"dcevm\" VM\n                  The default VM is server.\n\n    -cp <class search path of directories and zip/jar files>\n    -classpath <class search path of directories and zip/jar files>\n...\n```\n\n**判断是否安装**\n\n```bash\nif [ `command -v java` ];then\n    echo 'java 已经安装'\nfi\n```\n","source":"_posts/2018-06-27-is-install.md","raw":"---\ntitle: Linux 判断是否安装某个软件\ndate: 2018-06-27 18:15:26\ntags: [linux]\n---\n\nLinux 中如果想要判断某个软件是否安装过，可以使用 `command` 命令\n\n<!-- more --><!-- toc -->\n\n**使用**\n\n```bash\n$ command -pvV command [arg ...]\n```\n\n**实例**\n\n```bash\n$ command -v java\n/usr/bin/java\n\n$ command -V java\njava is /usr/bin/java\n\n$ command -p java\n\nUsage: java [-options] class [args...]\n           (to execute a class)\n   or  java [-options] -jar jarfile [args...]\n           (to execute a jar file)\nwhere options include:\n    -d32          use a 32-bit data model if available\n    -d64          use a 64-bit data model if available\n    -server       to select the \"server\" VM\n    -zero         to select the \"zero\" VM\n    -dcevm        to select the \"dcevm\" VM\n                  The default VM is server.\n\n    -cp <class search path of directories and zip/jar files>\n    -classpath <class search path of directories and zip/jar files>\n...\n```\n\n**判断是否安装**\n\n```bash\nif [ `command -v java` ];then\n    echo 'java 已经安装'\nfi\n```\n","slug":"is-install","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aew00i95gqonjakrh60"},{"title":"ansible入门案例1 远程部署项目","date":"2018-07-01T10:11:35.000Z","_content":"\n专辑：[ansible学习笔记](/2017/08/14/ansible-2017-08-14-album-study-notes/)\n\n<!-- more --><!-- toc -->\n\n> 根据前几章讲到的内容，我们已经可以完成一些简单的功能。本章带领大家写一个通过git打tag包远程部署python项目。\n\n**首先创建一个myproject目录，并进入其中创建如下文件：**\n\n- `push_tag.sh`\n- `deploy.sh`\n- `ansible_hosts`\n- `deploy_remote.yml`\n- `deploy_remote.sh`\n\n**文件内容分别如下：**\n\n**push_tag.sh**\n\n该脚本的功能在于传入 `tag_name` 和提交 msg ，并提交打包推到远程仓库中\n\n```bash\n#!/usr/bin/env bash\n\nTAG_NAME=$1\nPUSH_MSG=$2\n\nmain(){\n    git pull origin master\n    git add .\n    git commit -m ${PUSH_MSG}\n    git push origin master\n    git tag ${TAG_NAME}\n    git push origin ${TAG_NAME}\n}\n\nif [ ! ${TAG_NAME} ]\nthen\n    echo 'UAGE: ./push_tag.sh <regex:tag_name>'\nelse\n    main\nfi\n```\n\n**deploy.sh**\n\n该脚本需要在远程服务器执行，通过传入 `tag_name` 从 git 获取相应版本代码，并通过 supervisor 来重启项目\n\n```bash\n#!/usr/bin/env bash\n# 部署指定tag 的api程序\n# __author__ = \"wenxiaoning(wenxiaoning@gochinatv.com)\"\n# __copyright__ = \"Copyright of GoChinaTV (2017).\"\n\nTAG_NAME=$1\n\ndeploy_tag(){\n    echo '******************************'\n    echo '********开始部署tag：' ${TAG_NAME}\n    echo '******************************'\n    git fetch\n    git checkout ${TAG_NAME}\n    sudo /usr/local/bin/supervisorctl  -c /etc/supervisord/supervisord.conf restart tmd\n    echo '******************************'\n    echo '********部署成功'\n    echo '******************************'\n}\n\nmain(){\n    if [ ! ${TAG_NAME} ]\n    then\n        echo 'UAGE: 需要传入想要部署的tag名称'\n    else\n        deploy_tag\n    fi\n}\n\nmain\n\n```\n\n**ansible_hosts**\n\n该文件配置远程服务器信息，并通过sshkey进行连接\n\n```bash\n[api_prod]\nprod.server.org ansible_ssh_user=root ansible_ssh_private_key_file=~/.ssh/sshkey.pem\n```\n\n**deploy_remote.yml**\n\n改yml完成远程命令为，进入tmd目录，并执行 `./deploy_api.sh` 脚本部署项目\n\n```bash\n- hosts: api_prod\n  tasks:\n    - name: deploy\n      shell: ./deploy_api.sh '{{tag_name}}'\n      args:\n      chdir: ~/tmd\n```\n\n**deploy_remote.sh**\n\n改脚本作为一个桥梁连接完成本地提交代码和执行远程部署两项工作\n\n```bash\n#!/usr/bin/env bash\nTAG_NAME=$1\nMSG=$2\n\ndeploy(){\n    echo '******************************'\n    echo '********开始远程部署tag：' ${TAG_NAME}\n    echo '******************************'\n    ./push_tag.sh ${TAG_NAME} ${MSG}\n    ansible-playbook deploy_remote_api.yml --extra-vars \"tag_name=${TAG_NAME}\" --inventory-file=ansible_hosts\n    echo '******************************'\n    echo '********部署成功'\n    echo '******************************'\n}\n\nif [ ! ${TAG_NAME} ]\nthen\n    echo 'UAGE: ./git_push.sh <regex:tag_name>'\nelse\n    deploy\nfi\n```\n\n**运行**\n\n```bash\n./deploy_remote.sh 1.0.0 '我的第一个版本'\n```\n\n","source":"_posts/2018-07-01-ansible-task1.md","raw":"---\ntitle: ansible入门案例1 远程部署项目\ndate: 2018-07-01 10:11:35\ntags: [ansible]\n---\n\n专辑：[ansible学习笔记](/2017/08/14/ansible-2017-08-14-album-study-notes/)\n\n<!-- more --><!-- toc -->\n\n> 根据前几章讲到的内容，我们已经可以完成一些简单的功能。本章带领大家写一个通过git打tag包远程部署python项目。\n\n**首先创建一个myproject目录，并进入其中创建如下文件：**\n\n- `push_tag.sh`\n- `deploy.sh`\n- `ansible_hosts`\n- `deploy_remote.yml`\n- `deploy_remote.sh`\n\n**文件内容分别如下：**\n\n**push_tag.sh**\n\n该脚本的功能在于传入 `tag_name` 和提交 msg ，并提交打包推到远程仓库中\n\n```bash\n#!/usr/bin/env bash\n\nTAG_NAME=$1\nPUSH_MSG=$2\n\nmain(){\n    git pull origin master\n    git add .\n    git commit -m ${PUSH_MSG}\n    git push origin master\n    git tag ${TAG_NAME}\n    git push origin ${TAG_NAME}\n}\n\nif [ ! ${TAG_NAME} ]\nthen\n    echo 'UAGE: ./push_tag.sh <regex:tag_name>'\nelse\n    main\nfi\n```\n\n**deploy.sh**\n\n该脚本需要在远程服务器执行，通过传入 `tag_name` 从 git 获取相应版本代码，并通过 supervisor 来重启项目\n\n```bash\n#!/usr/bin/env bash\n# 部署指定tag 的api程序\n# __author__ = \"wenxiaoning(wenxiaoning@gochinatv.com)\"\n# __copyright__ = \"Copyright of GoChinaTV (2017).\"\n\nTAG_NAME=$1\n\ndeploy_tag(){\n    echo '******************************'\n    echo '********开始部署tag：' ${TAG_NAME}\n    echo '******************************'\n    git fetch\n    git checkout ${TAG_NAME}\n    sudo /usr/local/bin/supervisorctl  -c /etc/supervisord/supervisord.conf restart tmd\n    echo '******************************'\n    echo '********部署成功'\n    echo '******************************'\n}\n\nmain(){\n    if [ ! ${TAG_NAME} ]\n    then\n        echo 'UAGE: 需要传入想要部署的tag名称'\n    else\n        deploy_tag\n    fi\n}\n\nmain\n\n```\n\n**ansible_hosts**\n\n该文件配置远程服务器信息，并通过sshkey进行连接\n\n```bash\n[api_prod]\nprod.server.org ansible_ssh_user=root ansible_ssh_private_key_file=~/.ssh/sshkey.pem\n```\n\n**deploy_remote.yml**\n\n改yml完成远程命令为，进入tmd目录，并执行 `./deploy_api.sh` 脚本部署项目\n\n```bash\n- hosts: api_prod\n  tasks:\n    - name: deploy\n      shell: ./deploy_api.sh '{{tag_name}}'\n      args:\n      chdir: ~/tmd\n```\n\n**deploy_remote.sh**\n\n改脚本作为一个桥梁连接完成本地提交代码和执行远程部署两项工作\n\n```bash\n#!/usr/bin/env bash\nTAG_NAME=$1\nMSG=$2\n\ndeploy(){\n    echo '******************************'\n    echo '********开始远程部署tag：' ${TAG_NAME}\n    echo '******************************'\n    ./push_tag.sh ${TAG_NAME} ${MSG}\n    ansible-playbook deploy_remote_api.yml --extra-vars \"tag_name=${TAG_NAME}\" --inventory-file=ansible_hosts\n    echo '******************************'\n    echo '********部署成功'\n    echo '******************************'\n}\n\nif [ ! ${TAG_NAME} ]\nthen\n    echo 'UAGE: ./git_push.sh <regex:tag_name>'\nelse\n    deploy\nfi\n```\n\n**运行**\n\n```bash\n./deploy_remote.sh 1.0.0 '我的第一个版本'\n```\n\n","slug":"ansible-task1","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aex00ib5gqomqyhewbb"},{"title":"Linux 安装 Elasticsearch","date":"2018-07-04T09:40:23.000Z","_content":"\n\n在安装 Elasticsearch 时，推荐使用软件管理器方式安装\n\n<!-- more --><!-- toc -->\n\n## 安装 Java\n\n我们只需要安装 `jre` 即可\n\n```bash\n# centos\n$ sudo yum install java-1.8.0-openjdk.x86_64\n\n# ubuntu\n$ sudo apt install -y openjdk-8-jre\n\n$ java -version\n\nopenjdk version \"1.8.0_171\"\nOpenJDK Runtime Environment (build 1.8.0_171-b10)\nOpenJDK 64-Bit Server VM (build 25.171-b10, mixed mode)\n```\n\n## 安装 Elasticsearch\n\n### CentOS 7\n\n两种方式\n\n- **添加 YUM 仓库**\n\n```bash\n$ sudo rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch\n\n$ REPO=/etc/yum.repos.d/elastic.repo\n$ echo \"[elasticsearch-6.x]\" | sudo tee -a ${REPO}\n$ echo \"name=Elasticsearch repository for 6.x packages\" | sudo tee -a ${REPO}\n$ echo \"baseurl=https://artifacts.elastic.co/packages/6.x/yum\" | sudo tee -a ${REPO}\n$ echo \"gpgcheck=1\" | sudo tee -a ${REPO}\n$ echo \"gpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch\" | sudo tee -a ${REPO}\n$ echo \"enabled=1\" | sudo tee -a ${REPO}\n$ echo \"autorefresh=1\" | sudo tee -a ${REPO}\n$ echo \"type=rpm-md\" | sudo tee -a ${REPO}\n\n$ sudo yum install -y elasticsearch\n```\n\n- **rpm 安装**\n\n```bash\n$ wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.2.4.rpm\n$ sudo rpm --install elasticsearch-6.2.4.rpm\n```\n\n### Ubuntu\n\n也是两种方式\n\n- **添加 APT 仓库**\n\n```bash\n$ wget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo apt-key add -\n\n$ echo \"deb https://artifacts.elastic.co/packages/6.x/apt stable main\" | sudo tee -a /etc/apt/sources.list.d/elastic-6.x.list\n\n$ sudo apt-get update && sudo apt-get install elasticsearch\n```\n\n- **dpkg 安装**\n\n```bash\n$ wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.3.0.deb\n$ sudo dpkg -i elasticsearch-6.3.0.deb\n```\n\n**安装完成设置启动配置**\n\n设置开机自启\n\n```bash\n$ sudo systemctl daemon-reload\n$ sudo systemctl enable elasticsearch.service\n```\n\n启动\n\n```bash\n$ sudo systemctl start elasticsearch.service\n```\n\n访问\n\n```bash\n$ curl localhost:9200\n\n{\n  \"name\" : \"elasticsearch\",\n  \"cluster_name\" : \"elasticsearch\",\n  \"cluster_uuid\" : \"pLrLT2D9QA6VM9-6cdi1vQ\",\n  \"version\" : {\n    \"number\" : \"6.2.4\",\n    \"build_hash\" : \"ccec39f\",\n    \"build_date\" : \"2018-04-12T20:37:28.497551Z\",\n    \"build_snapshot\" : false,\n    \"lucene_version\" : \"7.2.1\",\n    \"minimum_wire_compatibility_version\" : \"5.6.0\",\n    \"minimum_index_compatibility_version\" : \"5.0.0\"\n  },\n  \"tagline\" : \"You Know, for Search\"\n}\n```\n\n\n此时 Elasticsearch 在服务器外通过 ip 是无法访问的，需要修改 `network.host`\n\n```bash\n$ sudo vim /etc/elasticsearch/elasticsearch.yml\n```\n\n```bash\nnetwork.host: 0.0.0.0\n```\n\n然后重启\n\n```bash\n$ sudo systemctl start elasticsearch.service\n```\n\n此时通过 ip 访问即可\n\n另外 `cluster.name, node.name` 等 Elasticsearch 启动配置都可以在这个文件修改\n\n## 配置\n\n通过 `rpm` 方式安装的软件目录如下\n\n类型    | 描述                                                                                                   | 默认地址                         | 配置\n----    | ----                                                                                                   | --------                         | ---\nhome    | Elasticsearch home directory or $ES_HOME                                                               | /usr/share/elasticsearch         |\nbin     | 二进制运行脚本包含 `elasticsearch` 开启一个实例，`elasticsearch-plugin` 安装插件                       | /usr/share/elasticsearch/bin     |\nconf    | 配置文件包含 elasticsearch.yml                                                                         | /etc/elasticsearch               | `ES_PATH_CONF`\nconf    | 环境变量包括堆大小，文件描述符                                                                         | /etc/sysconfig/elasticsearch     |\ndata    | 在节点上分配的每个索引/分片的数据文件的位置。 可以容纳多个地点。                                       | /var/lib/elasticsearch           | `path.data`\nlogs    | 日志文件                                                                                               | /var/log/elasticsearch           | `path.logs`\nplugins | 插件文件的位置。每个插件都将包含在一个子目录中。                                                       | /usr/share/elasticsearch/plugins |\nrepo    | 共享文件系统存储库位置。 可以容纳多个地点。 文件系统存储库可以放置在此处指定的任何目录的任何子目录中。 |                                  |\n\n\n环境配置 `/etc/sysconfig/elasticsearch` 会包含如下信息\n\n- `JAVA_HOME` Set a custom Java path to be used.\n\n- `MAX_OPEN_FILES` 最大打开文件数，默认 65536.\n\n- `MAX_LOCKED_MEMORY` 最大锁定的内存大小。 如果使用 elasticsearch.yml 中的 `bootstrap.memory_lock` 选项，则设置为无限制。\n\n- `MAX_MAP_COUNT` 进程可能具有的最大内存映射区数量。如果您使用 mmapfs 作为索引存储类型，请确保将其设置为较高值。有关更多信息，请查看关于 `max_map_count` 的 linux 内核文档。 这是在启动 Elasticsearch 之前通过 sysctl 设置的。 默认为262144。\n\n- `ES_PATH_CONF` 配置文件目录（需要包含 elasticsearch.yml，jvm.options 和 log4j2.properties 文件）; 默认为 `/etc/elasticsearch`。\n\n- `ES_JAVA_OPTS` 你可能想要应用的任何其他JVM系统属性。\n\n- `RESTART_ON_UPGRADE` 在软件包升级时配置重启，默认为false。 这意味着您必须在手动安装包后重新启动Elasticsearch实例。 其原因是为了确保集群中的升级不会导致连续的碎片重新分配，从而导致高网络流量并缩短集群的响应时间。\n\n\n- [Install Elasticsearch](https://www.elastic.co/guide/en/elasticsearch/reference/6.x/install-elasticsearch.html)\n- [How To Install and Configure Elasticsearch on CentOS 7](https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-elasticsearch-on-centos-7)\n","source":"_posts/2018-07-04-linux-install-es.md","raw":"---\ntitle: Linux 安装 Elasticsearch\ntags:\n  - elastic\ndate: 2018-07-04 09:40:23\n---\n\n\n在安装 Elasticsearch 时，推荐使用软件管理器方式安装\n\n<!-- more --><!-- toc -->\n\n## 安装 Java\n\n我们只需要安装 `jre` 即可\n\n```bash\n# centos\n$ sudo yum install java-1.8.0-openjdk.x86_64\n\n# ubuntu\n$ sudo apt install -y openjdk-8-jre\n\n$ java -version\n\nopenjdk version \"1.8.0_171\"\nOpenJDK Runtime Environment (build 1.8.0_171-b10)\nOpenJDK 64-Bit Server VM (build 25.171-b10, mixed mode)\n```\n\n## 安装 Elasticsearch\n\n### CentOS 7\n\n两种方式\n\n- **添加 YUM 仓库**\n\n```bash\n$ sudo rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch\n\n$ REPO=/etc/yum.repos.d/elastic.repo\n$ echo \"[elasticsearch-6.x]\" | sudo tee -a ${REPO}\n$ echo \"name=Elasticsearch repository for 6.x packages\" | sudo tee -a ${REPO}\n$ echo \"baseurl=https://artifacts.elastic.co/packages/6.x/yum\" | sudo tee -a ${REPO}\n$ echo \"gpgcheck=1\" | sudo tee -a ${REPO}\n$ echo \"gpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch\" | sudo tee -a ${REPO}\n$ echo \"enabled=1\" | sudo tee -a ${REPO}\n$ echo \"autorefresh=1\" | sudo tee -a ${REPO}\n$ echo \"type=rpm-md\" | sudo tee -a ${REPO}\n\n$ sudo yum install -y elasticsearch\n```\n\n- **rpm 安装**\n\n```bash\n$ wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.2.4.rpm\n$ sudo rpm --install elasticsearch-6.2.4.rpm\n```\n\n### Ubuntu\n\n也是两种方式\n\n- **添加 APT 仓库**\n\n```bash\n$ wget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo apt-key add -\n\n$ echo \"deb https://artifacts.elastic.co/packages/6.x/apt stable main\" | sudo tee -a /etc/apt/sources.list.d/elastic-6.x.list\n\n$ sudo apt-get update && sudo apt-get install elasticsearch\n```\n\n- **dpkg 安装**\n\n```bash\n$ wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.3.0.deb\n$ sudo dpkg -i elasticsearch-6.3.0.deb\n```\n\n**安装完成设置启动配置**\n\n设置开机自启\n\n```bash\n$ sudo systemctl daemon-reload\n$ sudo systemctl enable elasticsearch.service\n```\n\n启动\n\n```bash\n$ sudo systemctl start elasticsearch.service\n```\n\n访问\n\n```bash\n$ curl localhost:9200\n\n{\n  \"name\" : \"elasticsearch\",\n  \"cluster_name\" : \"elasticsearch\",\n  \"cluster_uuid\" : \"pLrLT2D9QA6VM9-6cdi1vQ\",\n  \"version\" : {\n    \"number\" : \"6.2.4\",\n    \"build_hash\" : \"ccec39f\",\n    \"build_date\" : \"2018-04-12T20:37:28.497551Z\",\n    \"build_snapshot\" : false,\n    \"lucene_version\" : \"7.2.1\",\n    \"minimum_wire_compatibility_version\" : \"5.6.0\",\n    \"minimum_index_compatibility_version\" : \"5.0.0\"\n  },\n  \"tagline\" : \"You Know, for Search\"\n}\n```\n\n\n此时 Elasticsearch 在服务器外通过 ip 是无法访问的，需要修改 `network.host`\n\n```bash\n$ sudo vim /etc/elasticsearch/elasticsearch.yml\n```\n\n```bash\nnetwork.host: 0.0.0.0\n```\n\n然后重启\n\n```bash\n$ sudo systemctl start elasticsearch.service\n```\n\n此时通过 ip 访问即可\n\n另外 `cluster.name, node.name` 等 Elasticsearch 启动配置都可以在这个文件修改\n\n## 配置\n\n通过 `rpm` 方式安装的软件目录如下\n\n类型    | 描述                                                                                                   | 默认地址                         | 配置\n----    | ----                                                                                                   | --------                         | ---\nhome    | Elasticsearch home directory or $ES_HOME                                                               | /usr/share/elasticsearch         |\nbin     | 二进制运行脚本包含 `elasticsearch` 开启一个实例，`elasticsearch-plugin` 安装插件                       | /usr/share/elasticsearch/bin     |\nconf    | 配置文件包含 elasticsearch.yml                                                                         | /etc/elasticsearch               | `ES_PATH_CONF`\nconf    | 环境变量包括堆大小，文件描述符                                                                         | /etc/sysconfig/elasticsearch     |\ndata    | 在节点上分配的每个索引/分片的数据文件的位置。 可以容纳多个地点。                                       | /var/lib/elasticsearch           | `path.data`\nlogs    | 日志文件                                                                                               | /var/log/elasticsearch           | `path.logs`\nplugins | 插件文件的位置。每个插件都将包含在一个子目录中。                                                       | /usr/share/elasticsearch/plugins |\nrepo    | 共享文件系统存储库位置。 可以容纳多个地点。 文件系统存储库可以放置在此处指定的任何目录的任何子目录中。 |                                  |\n\n\n环境配置 `/etc/sysconfig/elasticsearch` 会包含如下信息\n\n- `JAVA_HOME` Set a custom Java path to be used.\n\n- `MAX_OPEN_FILES` 最大打开文件数，默认 65536.\n\n- `MAX_LOCKED_MEMORY` 最大锁定的内存大小。 如果使用 elasticsearch.yml 中的 `bootstrap.memory_lock` 选项，则设置为无限制。\n\n- `MAX_MAP_COUNT` 进程可能具有的最大内存映射区数量。如果您使用 mmapfs 作为索引存储类型，请确保将其设置为较高值。有关更多信息，请查看关于 `max_map_count` 的 linux 内核文档。 这是在启动 Elasticsearch 之前通过 sysctl 设置的。 默认为262144。\n\n- `ES_PATH_CONF` 配置文件目录（需要包含 elasticsearch.yml，jvm.options 和 log4j2.properties 文件）; 默认为 `/etc/elasticsearch`。\n\n- `ES_JAVA_OPTS` 你可能想要应用的任何其他JVM系统属性。\n\n- `RESTART_ON_UPGRADE` 在软件包升级时配置重启，默认为false。 这意味着您必须在手动安装包后重新启动Elasticsearch实例。 其原因是为了确保集群中的升级不会导致连续的碎片重新分配，从而导致高网络流量并缩短集群的响应时间。\n\n\n- [Install Elasticsearch](https://www.elastic.co/guide/en/elasticsearch/reference/6.x/install-elasticsearch.html)\n- [How To Install and Configure Elasticsearch on CentOS 7](https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-elasticsearch-on-centos-7)\n","slug":"linux-install-es","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aey00id5gqoa6e3ibc3"},{"title":"使用 Elasticsearch, Kibana, Filebeat 搭建日志工作站","date":"2018-07-05T14:18:50.000Z","_content":"\n记录下最近搭建 `elastic` 日志工作站的过程。\n\n<!-- more --><!-- toc -->\n\n## 安装\n\nElasticsearch 的安装方式可以参考我的这篇文章 [Linux 安装 Elasticsearch](/2018/07/04/linux-install-es/)，在这里不在赘述。\n\n在这里推荐使用添加仓库的方式安装 Elasticsearch，这样可以直接用 `yum, apt` 来安装  Kibana 和 Filebeat。\n\n**Centos 7**\n\n```bash\n$ sudo yum install -y kibana filebeat\n```\n\n**Ubuntu**\n\n```bash\n$ sudo apt install -y kibana filebeat\n```\n\n**启动**\n\n```bash\n$ sudo systemctl enable kibana filebeat\n$ sudo systemctl start kibana filebeat\n```\n\n**查看状态**\n\n```bash\n$ sudo systemctl status elasticsearch\n$ sudo systemctl status kibana\n$ sudo systemctl status filebeat\n```\n\n等待三个软件都启动后，可以查看 `elasticsearch, kibana` 是否正常访问\n\n**Elsaticsearch**\n\n```bash\n$ curl localhost:9200\n\n{\n  \"name\" : \"2ZsBFer\",\n  \"cluster_name\" : \"elasticsearch\",\n  \"cluster_uuid\" : \"oo_kBvPpQL-OJGHQd-SPDw\",\n  \"version\" : {\n    \"number\" : \"6.3.0\",\n    \"build_flavor\" : \"default\",\n    \"build_type\" : \"rpm\",\n    \"build_hash\" : \"424e937\",\n    \"build_date\" : \"2018-06-11T23:38:03.357887Z\",\n    \"build_snapshot\" : false,\n    \"lucene_version\" : \"7.3.1\",\n    \"minimum_wire_compatibility_version\" : \"5.6.0\",\n    \"minimum_index_compatibility_version\" : \"5.0.0\"\n  },\n  \"tagline\" : \"You Know, for Search\"\n}\n```\n\n**Kibana**\n\n```bash\n$ curl localhost:5601\n\n<script>var hashRoute = '/app/kibana';\nvar defaultRoute = '/app/kibana';\n\nvar hash = window.location.hash;\nif (hash.length) {\n  window.location = hashRoute + hash;\n} else {\n  window.location = defaultRoute;\n```\n\nKibana 需要在浏览器中访问才可以看到真正的样子\n\n## 配置\n\n### 外部访问\n\n此时 Kibana 和 Elasticsearch 都只能在本机访问，如果需要让外部机器可以访问，需要修改绑定 ip 为 `0.0.0.0`\n\n**Elasticsearch**\n\n```bash\n$ sudo vim /etc/elasticsearch/elasticsearch.yml # 修改配置\n\nnetwork.host: 0.0.0.0                           # 找到这一行并修改\n\n$ sudo systemctl restart elasticsearch          # 重启\n```\n\n**Kibana**\n\n```bash\n$ sudo vim /etc/kibana/kibana.yml # 修改配置\n\nserver.host: \"0.0.0.0\"                          # 找到这一行并修改\n\n$ sudo systemctl restart kibana          # 重启\n```\n\n### 日志导入\n\nFilebeat 的作用便是将日志文件导入 Elasticsearch 中，同样的修改配置文件\n\n**修改配置**\n\n```bash\n$ sudo vim /etc/filebeat/filebeat.yml\n```\n\n修改 `Filebeat inputs` 添加想要统计的日志位置\n\n```bash\nfilebeat.inputs:\n- type: log\n  enabled: true\n  paths:\n    - /var/log/*.log\n```\n\n更多的 inputs 配置见文档 [Configure inputs](https://www.elastic.co/guide/en/beats/filebeat/6.3/configuration-filebeat-options.html)\n\n输出 Elasticsearch 的配置默认为 `localhost:9200`，如果你想输出到远程的机器上，需要修改 `Elasticsearch output`\n\n```bash\noutput.elasticsearch\n  hosts: [\"localhost:9200\"]\n```\n\n更多配置见文档 [Configure the Elasticsearch output](https://www.elastic.co/guide/en/beats/filebeat/6.3/elasticsearch-output.html)\n\n**重启**\n\n```bash\n$ sudo systemctl restart filebeat\n```\n\n\n## 查看日志信息\n\n在浏览器中打开地址 `localhost:5601` 点击 `Management --> Index Patterns` 会进入 `Create index pattern` 页面\n\n![/images/elk1.png](/images/elk1.png)\n\nFilebeat 默认生成的索引名称为 `filebeat-${version}-${date}`，我们做如下两步完成创建\n- 使用 `filebeat*` 作为 index pattern\n- 使用 `@timestamp` 作为 Time Filter field name\n\n然后点击 `Discover` 查看收集到的日志\n\n![/images/elk2.png](/images/elk2.png)\n\n还有很多配置需要完善，后续慢慢更新\n\n\n\n- [Open Source Log Management](https://www.elastic.co/solutions/logging)\n- [Install Elasticsearch](https://www.elastic.co/guide/en/elasticsearch/reference/6.x/install-elasticsearch.html)\n- [Kibana](https://www.elastic.co/guide/en/kibana/6.3/release-notes-6.3.0.html)\n- [Filebeat overview](https://www.elastic.co/guide/en/beats/filebeat/6.3/filebeat-overview.html)\n","source":"_posts/2018-07-05-elk.md","raw":"---\ntitle: 使用 Elasticsearch, Kibana, Filebeat 搭建日志工作站\ndate: 2018-07-05 14:18:50\ntags: [elastic]\n---\n\n记录下最近搭建 `elastic` 日志工作站的过程。\n\n<!-- more --><!-- toc -->\n\n## 安装\n\nElasticsearch 的安装方式可以参考我的这篇文章 [Linux 安装 Elasticsearch](/2018/07/04/linux-install-es/)，在这里不在赘述。\n\n在这里推荐使用添加仓库的方式安装 Elasticsearch，这样可以直接用 `yum, apt` 来安装  Kibana 和 Filebeat。\n\n**Centos 7**\n\n```bash\n$ sudo yum install -y kibana filebeat\n```\n\n**Ubuntu**\n\n```bash\n$ sudo apt install -y kibana filebeat\n```\n\n**启动**\n\n```bash\n$ sudo systemctl enable kibana filebeat\n$ sudo systemctl start kibana filebeat\n```\n\n**查看状态**\n\n```bash\n$ sudo systemctl status elasticsearch\n$ sudo systemctl status kibana\n$ sudo systemctl status filebeat\n```\n\n等待三个软件都启动后，可以查看 `elasticsearch, kibana` 是否正常访问\n\n**Elsaticsearch**\n\n```bash\n$ curl localhost:9200\n\n{\n  \"name\" : \"2ZsBFer\",\n  \"cluster_name\" : \"elasticsearch\",\n  \"cluster_uuid\" : \"oo_kBvPpQL-OJGHQd-SPDw\",\n  \"version\" : {\n    \"number\" : \"6.3.0\",\n    \"build_flavor\" : \"default\",\n    \"build_type\" : \"rpm\",\n    \"build_hash\" : \"424e937\",\n    \"build_date\" : \"2018-06-11T23:38:03.357887Z\",\n    \"build_snapshot\" : false,\n    \"lucene_version\" : \"7.3.1\",\n    \"minimum_wire_compatibility_version\" : \"5.6.0\",\n    \"minimum_index_compatibility_version\" : \"5.0.0\"\n  },\n  \"tagline\" : \"You Know, for Search\"\n}\n```\n\n**Kibana**\n\n```bash\n$ curl localhost:5601\n\n<script>var hashRoute = '/app/kibana';\nvar defaultRoute = '/app/kibana';\n\nvar hash = window.location.hash;\nif (hash.length) {\n  window.location = hashRoute + hash;\n} else {\n  window.location = defaultRoute;\n```\n\nKibana 需要在浏览器中访问才可以看到真正的样子\n\n## 配置\n\n### 外部访问\n\n此时 Kibana 和 Elasticsearch 都只能在本机访问，如果需要让外部机器可以访问，需要修改绑定 ip 为 `0.0.0.0`\n\n**Elasticsearch**\n\n```bash\n$ sudo vim /etc/elasticsearch/elasticsearch.yml # 修改配置\n\nnetwork.host: 0.0.0.0                           # 找到这一行并修改\n\n$ sudo systemctl restart elasticsearch          # 重启\n```\n\n**Kibana**\n\n```bash\n$ sudo vim /etc/kibana/kibana.yml # 修改配置\n\nserver.host: \"0.0.0.0\"                          # 找到这一行并修改\n\n$ sudo systemctl restart kibana          # 重启\n```\n\n### 日志导入\n\nFilebeat 的作用便是将日志文件导入 Elasticsearch 中，同样的修改配置文件\n\n**修改配置**\n\n```bash\n$ sudo vim /etc/filebeat/filebeat.yml\n```\n\n修改 `Filebeat inputs` 添加想要统计的日志位置\n\n```bash\nfilebeat.inputs:\n- type: log\n  enabled: true\n  paths:\n    - /var/log/*.log\n```\n\n更多的 inputs 配置见文档 [Configure inputs](https://www.elastic.co/guide/en/beats/filebeat/6.3/configuration-filebeat-options.html)\n\n输出 Elasticsearch 的配置默认为 `localhost:9200`，如果你想输出到远程的机器上，需要修改 `Elasticsearch output`\n\n```bash\noutput.elasticsearch\n  hosts: [\"localhost:9200\"]\n```\n\n更多配置见文档 [Configure the Elasticsearch output](https://www.elastic.co/guide/en/beats/filebeat/6.3/elasticsearch-output.html)\n\n**重启**\n\n```bash\n$ sudo systemctl restart filebeat\n```\n\n\n## 查看日志信息\n\n在浏览器中打开地址 `localhost:5601` 点击 `Management --> Index Patterns` 会进入 `Create index pattern` 页面\n\n![/images/elk1.png](/images/elk1.png)\n\nFilebeat 默认生成的索引名称为 `filebeat-${version}-${date}`，我们做如下两步完成创建\n- 使用 `filebeat*` 作为 index pattern\n- 使用 `@timestamp` 作为 Time Filter field name\n\n然后点击 `Discover` 查看收集到的日志\n\n![/images/elk2.png](/images/elk2.png)\n\n还有很多配置需要完善，后续慢慢更新\n\n\n\n- [Open Source Log Management](https://www.elastic.co/solutions/logging)\n- [Install Elasticsearch](https://www.elastic.co/guide/en/elasticsearch/reference/6.x/install-elasticsearch.html)\n- [Kibana](https://www.elastic.co/guide/en/kibana/6.3/release-notes-6.3.0.html)\n- [Filebeat overview](https://www.elastic.co/guide/en/beats/filebeat/6.3/filebeat-overview.html)\n","slug":"elk","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aez00ig5gqohsisedln"},{"title":"CentOS 怎样安装 ifconfig","date":"2018-07-03T13:58:43.000Z","_content":"\n在 centos 的原始版本是不带 `ifconfig` 工具的，而它是 `net-tools` 工具包的一部分。\n\n<!-- more --><!-- toc -->\n\n安装 `net-tools` 就很简单了，使用 `yum` 即可\n\n```bash\n$ sudo yum install -y net-tools\n```\n\n","source":"_posts/2018-07-03-centos-install-ifconfig.md","raw":"---\ntitle: CentOS 怎样安装 ifconfig\ndate: 2018-07-03 13:58:43\ntags: [linux]\n---\n\n在 centos 的原始版本是不带 `ifconfig` 工具的，而它是 `net-tools` 工具包的一部分。\n\n<!-- more --><!-- toc -->\n\n安装 `net-tools` 就很简单了，使用 `yum` 即可\n\n```bash\n$ sudo yum install -y net-tools\n```\n\n","slug":"centos-install-ifconfig","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2af100ii5gqo4pdqryyw"},{"title":"Linux mount 命令","date":"2018-07-06T18:54:49.000Z","_content":"\n`mount` 可以查看磁盘分区情况、卸载、挂载硬盘。\n\n<!-- more --><!-- toc -->\n\n**查看硬盘分区**\n\n```bash\n$ mount\n\n/dev/disk1 on / (hfs, local, journaled)\ndevfs on /dev (devfs, local, nobrowse)\nmap -hosts on /net (autofs, nosuid, automounted, nobrowse)\nmap auto_home on /home (autofs, automounted, nobrowse)\n```\n\n**卸载**\n\n```bash\n$ sudo umount /home/ec2-user/data\n```\n\n**挂载**\n\n```bash\n$ sudo mount /dev/xvdf /data\n```\n","source":"_posts/2018-07-06-mount.md","raw":"---\ntitle: Linux mount 命令\ndate: 2018-07-06 18:54:49\ntags: [linux]\n---\n\n`mount` 可以查看磁盘分区情况、卸载、挂载硬盘。\n\n<!-- more --><!-- toc -->\n\n**查看硬盘分区**\n\n```bash\n$ mount\n\n/dev/disk1 on / (hfs, local, journaled)\ndevfs on /dev (devfs, local, nobrowse)\nmap -hosts on /net (autofs, nosuid, automounted, nobrowse)\nmap auto_home on /home (autofs, automounted, nobrowse)\n```\n\n**卸载**\n\n```bash\n$ sudo umount /home/ec2-user/data\n```\n\n**挂载**\n\n```bash\n$ sudo mount /dev/xvdf /data\n```\n","slug":"mount","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2af200ik5gqol1jbw8m5"},{"title":"CSS3 div 添加圆角边框","date":"2018-07-08T14:09:53.000Z","_content":"\n在 CSS3 中使用 `border-radius` 属性来实现圆角功能。\n\n<!-- more --><!-- toc -->\n\n以像素大小来定义，数值越大，弧度越大\n\n```css\ndiv {\n    border: 1px solid;\n    border-radius: 25px;\n}\n```\n\n也可以用百分比来定义\n\n```css\ndiv {\n    border: 1px solid;\n    witdh: 100px;\n    height: 100px;\n    border-radius: 20%;\n}\n```\n\nJavascript 动态设置该属性\n\n```javascript\nobject.style.borderRadius=\"5px\"\n```\n","source":"_posts/2018-07-08-css-radius.md","raw":"---\ntitle: CSS3 div 添加圆角边框\ndate: 2018-07-08 14:09:53\ntags: [css]\n---\n\n在 CSS3 中使用 `border-radius` 属性来实现圆角功能。\n\n<!-- more --><!-- toc -->\n\n以像素大小来定义，数值越大，弧度越大\n\n```css\ndiv {\n    border: 1px solid;\n    border-radius: 25px;\n}\n```\n\n也可以用百分比来定义\n\n```css\ndiv {\n    border: 1px solid;\n    witdh: 100px;\n    height: 100px;\n    border-radius: 20%;\n}\n```\n\nJavascript 动态设置该属性\n\n```javascript\nobject.style.borderRadius=\"5px\"\n```\n","slug":"css-radius","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2af300im5gqofpnyy8w2"},{"title":"Yum 命令","date":"2018-07-10T13:57:14.000Z","_content":"\n> yum 命令是在Fedora和RedHat以及SUSE中基于rpm的软件包管理器，它可以使系统管理人员交互和自动化地更细与管理RPM软件包，能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软体包，无须繁琐地一次次下载、安装。\n\n<!-- more --><!-- toc -->\n\n**语法**\n\n```bash\n$ yum [选项] <参数>\n```\n\n**选项**\n\n```bash\n-h：显示帮助信息；\n-y：对所有的提问都回答“yes”；\n-c：指定配置文件；\n-q：安静模式；\n-v：详细模式；\n-d：设置调试等级（0-10）；\n-e：设置错误等级（0-10）；\n-R：设置yum处理一个命令的最大等待时间；\n-C：完全从缓存中运行，而不去下载或者更新任何头文件。\n```\n\n**参数**\n\n```bash\ninstall      安装rpm软件包；\nupdate       更新rpm软件包；\ncheck-update 检查是否有可用的更新rpm软件包；\nremove       删除指定的rpm软件包；\nlist         显示软件包的信息；\nsearch       检查软件包的信息；\ninfo         显示指定的rpm软件包的描述信息和概要信息；\nclean        清理yum过期的缓存；\nshell        进入yum的shell提示符；\nresolvedep   显示rpm软件包的依赖关系；\nlocalinstall 安装本地的rpm软件包；\nlocalupdate  显示本地rpm软件包进行更新；\ndeplist      显示rpm软件包的所有依赖关系。\n```\n\n**实用**\n\n```bash\n$ yum install packname      # 安装指定软件\n$ yum install packname -y   # 安装指定软件，并自动回答 yes\n\n$ yum update  packname      # 更新指定软件\n$ yum update                # 更新全部\n\n$ yum info package1         # 显示安装包信息package1\n$ yum deplist package       # 显示软件的依赖关系\n$ yum list                  # 显示所有已经安装和可以安装的程序包\n\n$ yum remove                # 删除软件\n\n$ yum clean packages        # 清除缓存目录下的软件包\n```\n\n- [yum命令](http://man.linuxde.net/yum)\n","source":"_posts/2018-07-10-yum.md","raw":"---\ntitle: Yum 命令\ndate: 2018-07-10 13:57:14\ntags: [linux]\n---\n\n> yum 命令是在Fedora和RedHat以及SUSE中基于rpm的软件包管理器，它可以使系统管理人员交互和自动化地更细与管理RPM软件包，能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软体包，无须繁琐地一次次下载、安装。\n\n<!-- more --><!-- toc -->\n\n**语法**\n\n```bash\n$ yum [选项] <参数>\n```\n\n**选项**\n\n```bash\n-h：显示帮助信息；\n-y：对所有的提问都回答“yes”；\n-c：指定配置文件；\n-q：安静模式；\n-v：详细模式；\n-d：设置调试等级（0-10）；\n-e：设置错误等级（0-10）；\n-R：设置yum处理一个命令的最大等待时间；\n-C：完全从缓存中运行，而不去下载或者更新任何头文件。\n```\n\n**参数**\n\n```bash\ninstall      安装rpm软件包；\nupdate       更新rpm软件包；\ncheck-update 检查是否有可用的更新rpm软件包；\nremove       删除指定的rpm软件包；\nlist         显示软件包的信息；\nsearch       检查软件包的信息；\ninfo         显示指定的rpm软件包的描述信息和概要信息；\nclean        清理yum过期的缓存；\nshell        进入yum的shell提示符；\nresolvedep   显示rpm软件包的依赖关系；\nlocalinstall 安装本地的rpm软件包；\nlocalupdate  显示本地rpm软件包进行更新；\ndeplist      显示rpm软件包的所有依赖关系。\n```\n\n**实用**\n\n```bash\n$ yum install packname      # 安装指定软件\n$ yum install packname -y   # 安装指定软件，并自动回答 yes\n\n$ yum update  packname      # 更新指定软件\n$ yum update                # 更新全部\n\n$ yum info package1         # 显示安装包信息package1\n$ yum deplist package       # 显示软件的依赖关系\n$ yum list                  # 显示所有已经安装和可以安装的程序包\n\n$ yum remove                # 删除软件\n\n$ yum clean packages        # 清除缓存目录下的软件包\n```\n\n- [yum命令](http://man.linuxde.net/yum)\n","slug":"yum","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2af400io5gqoey9w61kw"},{"title":"Python XML 转换为 JSON","date":"2018-07-07T11:39:32.000Z","_content":"\n现在接口数据返回基本都用 JSON 格式，然而一些大公司依然保留 XML 格式，比如微信，我们依然想把 XML 转为 JSON 格式，因为它更流行更容易读。\n\n<!-- more --><!-- toc -->\n`xmltodict` 模块可以实现该功能。\n\n**下载**\n\n```bash\n$ pip install xmltodict\n```\n\n**使用**\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport xmltodict\n\ndata = '<xml> <ToUserName><![CDATA[gh_96c685096fbd]]></ToUserName> <Encrypt><![CDATA[awoq2zcSPV4GAjg5u8Jr5E2G4/dUS3FbbTgeDlhYOHKxC2a7Bb+WROg6gEUUlZdgokjgUHHdPikMI/GvqGKoQ66HLxIFf54xq8FdFdXLLoZBlqHztUL3wV/T1uv25IkmlVe7zfkOG9erKemIw74gKuNzimm49Vam/OJVoYnKPYMhkWJcz9YQcP2y79ZMA6giEnGTVnAPFIc0wgpPMbpOgfih8s7H/NhE+uA+b9zdbdR5eynW3qbFtXqjRz2hxOb/LGo7djibx6OX5E6PaZ7anKxiq9psPNCo0h43h/7Gy/zT+E0BwgQg9EdjEmD/Dets8pSK7JX5WLO/oAToYVYDDtsIvFRlXK1rbn1rd9eIAj2IgrsrDFM3BGjHHybKTGOf3luSADlnxtXS4rjo8/oaZeyOe4O0JxTLvwwhlew5wd0=]]> </Encrypt> </xml>'\n\nprint(xmltodict.parse(data))\n```\n\n```bash\nOrderedDict([('xml', OrderedDict([('ToUserName', 'gh_96c685096fbd'), ('Encrypt', 'awoq2zcSPV4GAjg5u8Jr5E2G4/dUS3FbbTgeDlhYOHKxC2a7Bb+WROg6gEUUlZdgokjgUHHdPikMI/GvqGKoQ66HLxIFf54xq8FdFdXLLoZBlqHztUL3wV/T1uv25IkmlVe7zfkOG9erKemIw74gKuNzimm49Vam/OJVoYnKPYMhkWJcz9YQcP2y79ZMA6giEnGTVnAPFIc0wgpPMbpOgfih8s7H/NhE+uA+b9zdbdR5eynW3qbFtXqjRz2hxOb/LGo7djibx6OX5E6PaZ7anKxiq9psPNCo0h43h/7Gy/zT+E0BwgQg9EdjEmD/Dets8pSK7JX5WLO/oAToYVYDDtsIvFRlXK1rbn1rd9eIAj2IgrsrDFM3BGjHHybKTGOf3luSADlnxtXS4rjo8/oaZeyOe4O0JxTLvwwhlew5wd0=')]))])\n```\n\n达到的结果还不是我们理想的 JSON 格式化，在手动转换一下\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport xmltodict\nimport json\n\ndata = '<xml> <ToUserName><![CDATA[gh_96c685096fbd]]></ToUserName> <Encrypt><![CDATA[awoq2zcSPV4GAjg5u8Jr5E2G4/dUS3FbbTgeDlhYOHKxC2a7Bb+WROg6gEUUlZdgokjgUHHdPikMI/GvqGKoQ66HLxIFf54xq8FdFdXLLoZBlqHztUL3wV/T1uv25IkmlVe7zfkOG9erKemIw74gKuNzimm49Vam/OJVoYnKPYMhkWJcz9YQcP2y79ZMA6giEnGTVnAPFIc0wgpPMbpOgfih8s7H/NhE+uA+b9zdbdR5eynW3qbFtXqjRz2hxOb/LGo7djibx6OX5E6PaZ7anKxiq9psPNCo0h43h/7Gy/zT+E0BwgQg9EdjEmD/Dets8pSK7JX5WLO/oAToYVYDDtsIvFRlXK1rbn1rd9eIAj2IgrsrDFM3BGjHHybKTGOf3luSADlnxtXS4rjo8/oaZeyOe4O0JxTLvwwhlew5wd0=]]> </Encrypt> </xml>'\n\nprint(json.loads(json.dumps(xmltodict.parse(data))))\n```\n\n```bash\n{'xml': {'ToUserName': 'gh_96c685096fbd', 'Encrypt': 'awoq2zcSPV4GAjg5u8Jr5E2G4/dUS3FbbTgeDlhYOHKxC2a7Bb+WROg6gEUUlZdgokjgUHHdPikMI/GvqGKoQ66HLxIFf54xq8FdFdXLLoZBlqHztUL3wV/T1uv25IkmlVe7zfkOG9erKemIw74gKuNzimm49Vam/OJVoYnKPYMhkWJcz9YQcP2y79ZMA6giEnGTVnAPFIc0wgpPMbpOgfih8s7H/NhE+uA+b9zdbdR5eynW3qbFtXqjRz2hxOb/LGo7djibx6OX5E6PaZ7anKxiq9psPNCo0h43h/7Gy/zT+E0BwgQg9EdjEmD/Dets8pSK7JX5WLO/oAToYVYDDtsIvFRlXK1rbn1rd9eIAj2IgrsrDFM3BGjHHybKTGOf3luSADlnxtXS4rjo8/oaZeyOe4O0JxTLvwwhlew5wd0='}}\n```\n","source":"_posts/2018-07-07-xmltojson.md","raw":"---\ntitle: Python XML 转换为 JSON\ndate: 2018-07-07 11:39:32\ntags: [python]\n---\n\n现在接口数据返回基本都用 JSON 格式，然而一些大公司依然保留 XML 格式，比如微信，我们依然想把 XML 转为 JSON 格式，因为它更流行更容易读。\n\n<!-- more --><!-- toc -->\n`xmltodict` 模块可以实现该功能。\n\n**下载**\n\n```bash\n$ pip install xmltodict\n```\n\n**使用**\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport xmltodict\n\ndata = '<xml> <ToUserName><![CDATA[gh_96c685096fbd]]></ToUserName> <Encrypt><![CDATA[awoq2zcSPV4GAjg5u8Jr5E2G4/dUS3FbbTgeDlhYOHKxC2a7Bb+WROg6gEUUlZdgokjgUHHdPikMI/GvqGKoQ66HLxIFf54xq8FdFdXLLoZBlqHztUL3wV/T1uv25IkmlVe7zfkOG9erKemIw74gKuNzimm49Vam/OJVoYnKPYMhkWJcz9YQcP2y79ZMA6giEnGTVnAPFIc0wgpPMbpOgfih8s7H/NhE+uA+b9zdbdR5eynW3qbFtXqjRz2hxOb/LGo7djibx6OX5E6PaZ7anKxiq9psPNCo0h43h/7Gy/zT+E0BwgQg9EdjEmD/Dets8pSK7JX5WLO/oAToYVYDDtsIvFRlXK1rbn1rd9eIAj2IgrsrDFM3BGjHHybKTGOf3luSADlnxtXS4rjo8/oaZeyOe4O0JxTLvwwhlew5wd0=]]> </Encrypt> </xml>'\n\nprint(xmltodict.parse(data))\n```\n\n```bash\nOrderedDict([('xml', OrderedDict([('ToUserName', 'gh_96c685096fbd'), ('Encrypt', 'awoq2zcSPV4GAjg5u8Jr5E2G4/dUS3FbbTgeDlhYOHKxC2a7Bb+WROg6gEUUlZdgokjgUHHdPikMI/GvqGKoQ66HLxIFf54xq8FdFdXLLoZBlqHztUL3wV/T1uv25IkmlVe7zfkOG9erKemIw74gKuNzimm49Vam/OJVoYnKPYMhkWJcz9YQcP2y79ZMA6giEnGTVnAPFIc0wgpPMbpOgfih8s7H/NhE+uA+b9zdbdR5eynW3qbFtXqjRz2hxOb/LGo7djibx6OX5E6PaZ7anKxiq9psPNCo0h43h/7Gy/zT+E0BwgQg9EdjEmD/Dets8pSK7JX5WLO/oAToYVYDDtsIvFRlXK1rbn1rd9eIAj2IgrsrDFM3BGjHHybKTGOf3luSADlnxtXS4rjo8/oaZeyOe4O0JxTLvwwhlew5wd0=')]))])\n```\n\n达到的结果还不是我们理想的 JSON 格式化，在手动转换一下\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport xmltodict\nimport json\n\ndata = '<xml> <ToUserName><![CDATA[gh_96c685096fbd]]></ToUserName> <Encrypt><![CDATA[awoq2zcSPV4GAjg5u8Jr5E2G4/dUS3FbbTgeDlhYOHKxC2a7Bb+WROg6gEUUlZdgokjgUHHdPikMI/GvqGKoQ66HLxIFf54xq8FdFdXLLoZBlqHztUL3wV/T1uv25IkmlVe7zfkOG9erKemIw74gKuNzimm49Vam/OJVoYnKPYMhkWJcz9YQcP2y79ZMA6giEnGTVnAPFIc0wgpPMbpOgfih8s7H/NhE+uA+b9zdbdR5eynW3qbFtXqjRz2hxOb/LGo7djibx6OX5E6PaZ7anKxiq9psPNCo0h43h/7Gy/zT+E0BwgQg9EdjEmD/Dets8pSK7JX5WLO/oAToYVYDDtsIvFRlXK1rbn1rd9eIAj2IgrsrDFM3BGjHHybKTGOf3luSADlnxtXS4rjo8/oaZeyOe4O0JxTLvwwhlew5wd0=]]> </Encrypt> </xml>'\n\nprint(json.loads(json.dumps(xmltodict.parse(data))))\n```\n\n```bash\n{'xml': {'ToUserName': 'gh_96c685096fbd', 'Encrypt': 'awoq2zcSPV4GAjg5u8Jr5E2G4/dUS3FbbTgeDlhYOHKxC2a7Bb+WROg6gEUUlZdgokjgUHHdPikMI/GvqGKoQ66HLxIFf54xq8FdFdXLLoZBlqHztUL3wV/T1uv25IkmlVe7zfkOG9erKemIw74gKuNzimm49Vam/OJVoYnKPYMhkWJcz9YQcP2y79ZMA6giEnGTVnAPFIc0wgpPMbpOgfih8s7H/NhE+uA+b9zdbdR5eynW3qbFtXqjRz2hxOb/LGo7djibx6OX5E6PaZ7anKxiq9psPNCo0h43h/7Gy/zT+E0BwgQg9EdjEmD/Dets8pSK7JX5WLO/oAToYVYDDtsIvFRlXK1rbn1rd9eIAj2IgrsrDFM3BGjHHybKTGOf3luSADlnxtXS4rjo8/oaZeyOe4O0JxTLvwwhlew5wd0='}}\n```\n","slug":"xmltojson","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2af600ir5gqozrwfyonf"},{"title":"Flask 操作 Cookie","date":"2018-07-12T18:01:33.000Z","_content":"\n在 FLask 中可以使用 `request, response` 来操作 Cookie\n\n<!-- more --><!-- toc -->\n## 设置\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom flask import make_response\n\n@app.route('/set_cookie')\ndef set_cookie():\n    response=make_response('Hello World');\n    response.set_cookie('Name','Hyman')\n    return response\n```\n\n**设置有效期**\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom flask import make_response\nfrom datetime import datetime\nfrom datetime import timedelta\n\n@app.route('/set_cookie')\ndef set_cookie():\n    response=make_response('Hello World');\n    outdate=datetime.today() + timedelta(days=30)\n    response.set_cookie('Name','Hyman',expires=outdate)\n    return response\n```\n\n## 获取\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom flask import request\n\n@app.route('/get_cookie')\ndef get_cookie():\n    name=request.cookies.get('Name')\n    return name\n```\n\n## 删除\n\n**方法一**\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom flask import make_response\n\n@app.route('/del_cookie')\ndef del_cookie():\n    response=make_response('delete cookie')\n    response.set_cookie('Name','',expires=0)\n    return response\n```\n\n**方法二**\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom flask import make_response\n\n@app.route('/del_cookie2')\ndef del_cookie2():\n    response=make_response('delete cookie2')\n    response.delete_cookie('Name')\n    return response\n```\n","source":"_posts/2018-07-12-flask-cookie.md","raw":"---\ntitle: Flask 操作 Cookie\ndate: 2018-07-12 18:01:33\ntags: [flask]\n---\n\n在 FLask 中可以使用 `request, response` 来操作 Cookie\n\n<!-- more --><!-- toc -->\n## 设置\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom flask import make_response\n\n@app.route('/set_cookie')\ndef set_cookie():\n    response=make_response('Hello World');\n    response.set_cookie('Name','Hyman')\n    return response\n```\n\n**设置有效期**\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom flask import make_response\nfrom datetime import datetime\nfrom datetime import timedelta\n\n@app.route('/set_cookie')\ndef set_cookie():\n    response=make_response('Hello World');\n    outdate=datetime.today() + timedelta(days=30)\n    response.set_cookie('Name','Hyman',expires=outdate)\n    return response\n```\n\n## 获取\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom flask import request\n\n@app.route('/get_cookie')\ndef get_cookie():\n    name=request.cookies.get('Name')\n    return name\n```\n\n## 删除\n\n**方法一**\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom flask import make_response\n\n@app.route('/del_cookie')\ndef del_cookie():\n    response=make_response('delete cookie')\n    response.set_cookie('Name','',expires=0)\n    return response\n```\n\n**方法二**\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom flask import make_response\n\n@app.route('/del_cookie2')\ndef del_cookie2():\n    response=make_response('delete cookie2')\n    response.delete_cookie('Name')\n    return response\n```\n","slug":"flask-cookie","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2af700it5gqontw7v45t"},{"title":"Linux 安装 Vagrant","date":"2018-07-11T11:11:31.000Z","_content":"\n本章介绍如何在 Linux 中安装 Vagrant\n\n<!-- more --><!-- toc -->\n\n**Ubuntu**\n\n```bash\n$ sudo apt update -y && sudo apt install vagrant\n```\n\n**CentOS**\n\n首先从地址 https://releases.hashicorp.com/vagrant 中查找你需要的版本，比如\n\n```bash\nhttps://releases.hashicorp.com/vagrant/2.1.2/vagrant_2.1.2_x86_64.rpm\n```\n\n安装\n\n```bash\n$ sudo yum install -y https://releases.hashicorp.com/vagrant/2.1.2/vagrant_2.1.2_x86_64.rpm\n```\n","source":"_posts/2018-07-11-linux-install-vagrant.md","raw":"---\ntitle: Linux 安装 Vagrant\ndate: 2018-07-11 11:11:31\ntags: [vagrant]\n---\n\n本章介绍如何在 Linux 中安装 Vagrant\n\n<!-- more --><!-- toc -->\n\n**Ubuntu**\n\n```bash\n$ sudo apt update -y && sudo apt install vagrant\n```\n\n**CentOS**\n\n首先从地址 https://releases.hashicorp.com/vagrant 中查找你需要的版本，比如\n\n```bash\nhttps://releases.hashicorp.com/vagrant/2.1.2/vagrant_2.1.2_x86_64.rpm\n```\n\n安装\n\n```bash\n$ sudo yum install -y https://releases.hashicorp.com/vagrant/2.1.2/vagrant_2.1.2_x86_64.rpm\n```\n","slug":"linux-install-vagrant","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2af700iv5gqonie897x0"},{"title":"Python 编写 pip 包并上传到 pypi","date":"2018-07-13T13:54:58.000Z","_content":"\n用了这么长时间的 python，一直想写些开源的东西回馈社区，最近在封装微信的公众平台，借着机会研究了下怎样封装 pip 包，并上传到 pypi。\n\n<!-- more --><!-- toc -->\n\n## 创建项目\n\n首先创建项目，目录结构如下\n\n```bash\n-- wwx\n  |\n  |-- wwx\n  |  |\n  |  |-- __init__.py\n  |  |-- models.py\n  |\n  |-- setup.py\n```\n\n其中 `wwx/wwx` 是主代码目录，`setup.py` 是必备的打包文件\n\n**setup.py**\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfrom setuptools import setup, find_packages\n\nsetup(\n    name = 'wwx',\n    version = '0.0.1',\n    keywords='wx',\n    description = 'a library for wx Developer',\n    license = 'MIT License',\n    url = 'https://github.com/wxnacy/wwx',\n    author = 'wxnacy',\n    author_email = 'wxnacy@gmail.com',\n    packages = find_packages(),\n    include_package_data = True,\n    platforms = 'any',\n    install_requires = [\n        'requests>=2.19.1',\n        'pycrypto>=2.6.1',\n        'xmltodict>=0.11.0'\n        ],\n)\n```\n\n项目代码根据你的需求编写，你可以写一个这样的例子来测试\n\n**models.py**\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nclass Message():\n    @classmethod\n    def test():\n        print('Hello World')\n```\n\n** `__init__.py` **\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom .models import Message\n```\n\n## 安装到本地测试\n\n接下来在 `setup.py` 所在目录下执行安装命令，安装到本地\n\n```bash\n$ pip install .\n```\n\n在项目中你就可以使用测试了\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom wwx import Message\n\nMessage.test()\n```\n\n## 打包\n\n测试完成后，再上传到 pypi 之前需要先打包\n\n```bash\n$ python setup.py <params>\n```\n\n`params` 有如下取值\n\n```bash\nsdist             create a source distribution (tarball, zip file, etc.)\nbdist             create a built (binary) distribution\nbdist_dumb        create a \"dumb\" built distribution\nbdist_rpm         create an RPM distribution\nbdist_wininst     create an executable installer for MS Windows\nbdist_egg         create an \"egg\" distribution\n```\n\n`sdist` 可以支持上传到 pypi\n\n```bash\n$ python setup.py sdist\n```\n\n然后根目录中会出现 `dist` 目录存放打包文件\n\n## 上传 pypi\n\n最后一步上传到 pypi，首先去[官网](https://pypi.org/)搜索确认项目名没有被占用，并注册用户，然后使用 `twine` 进行上传\n\n**下载 twine**\n\n```bash\n$ pip install twine\n```\n\n**上传**\n\n```bash\n$ twine upload dist/*\n```\n\n然后根据提示输入用户名密码即可。\n\n**设置全局账户信息**\n\n创建 `~/.pypirc` 文件并添加如下信息\n\n```bash\n[distutils]\nindex-servers=pypi\n\n[pypi]\nrepository = https://upload.pypi.org/legacy/\nusername = <username>\npassword = <password>\n```\n\n然后再次上传就不会提示输入用户密码了\n","source":"_posts/2018-07-13-python-create-pip.md","raw":"---\ntitle: Python 编写 pip 包并上传到 pypi\ndate: 2018-07-13 13:54:58\ntags: [python]\n---\n\n用了这么长时间的 python，一直想写些开源的东西回馈社区，最近在封装微信的公众平台，借着机会研究了下怎样封装 pip 包，并上传到 pypi。\n\n<!-- more --><!-- toc -->\n\n## 创建项目\n\n首先创建项目，目录结构如下\n\n```bash\n-- wwx\n  |\n  |-- wwx\n  |  |\n  |  |-- __init__.py\n  |  |-- models.py\n  |\n  |-- setup.py\n```\n\n其中 `wwx/wwx` 是主代码目录，`setup.py` 是必备的打包文件\n\n**setup.py**\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfrom setuptools import setup, find_packages\n\nsetup(\n    name = 'wwx',\n    version = '0.0.1',\n    keywords='wx',\n    description = 'a library for wx Developer',\n    license = 'MIT License',\n    url = 'https://github.com/wxnacy/wwx',\n    author = 'wxnacy',\n    author_email = 'wxnacy@gmail.com',\n    packages = find_packages(),\n    include_package_data = True,\n    platforms = 'any',\n    install_requires = [\n        'requests>=2.19.1',\n        'pycrypto>=2.6.1',\n        'xmltodict>=0.11.0'\n        ],\n)\n```\n\n项目代码根据你的需求编写，你可以写一个这样的例子来测试\n\n**models.py**\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nclass Message():\n    @classmethod\n    def test():\n        print('Hello World')\n```\n\n** `__init__.py` **\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom .models import Message\n```\n\n## 安装到本地测试\n\n接下来在 `setup.py` 所在目录下执行安装命令，安装到本地\n\n```bash\n$ pip install .\n```\n\n在项目中你就可以使用测试了\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom wwx import Message\n\nMessage.test()\n```\n\n## 打包\n\n测试完成后，再上传到 pypi 之前需要先打包\n\n```bash\n$ python setup.py <params>\n```\n\n`params` 有如下取值\n\n```bash\nsdist             create a source distribution (tarball, zip file, etc.)\nbdist             create a built (binary) distribution\nbdist_dumb        create a \"dumb\" built distribution\nbdist_rpm         create an RPM distribution\nbdist_wininst     create an executable installer for MS Windows\nbdist_egg         create an \"egg\" distribution\n```\n\n`sdist` 可以支持上传到 pypi\n\n```bash\n$ python setup.py sdist\n```\n\n然后根目录中会出现 `dist` 目录存放打包文件\n\n## 上传 pypi\n\n最后一步上传到 pypi，首先去[官网](https://pypi.org/)搜索确认项目名没有被占用，并注册用户，然后使用 `twine` 进行上传\n\n**下载 twine**\n\n```bash\n$ pip install twine\n```\n\n**上传**\n\n```bash\n$ twine upload dist/*\n```\n\n然后根据提示输入用户名密码即可。\n\n**设置全局账户信息**\n\n创建 `~/.pypirc` 文件并添加如下信息\n\n```bash\n[distutils]\nindex-servers=pypi\n\n[pypi]\nrepository = https://upload.pypi.org/legacy/\nusername = <username>\npassword = <password>\n```\n\n然后再次上传就不会提示输入用户密码了\n","slug":"python-create-pip","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2af900ix5gqoo4npqb5p"},{"title":"微信第三方平台授权问题：此公众号没有这些scope的权限","date":"2018-07-14T20:54:04.000Z","_content":"\n在微信第三方平台授权中，[代公众号发起网页授权](https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=open1419318590&token=&lang=zh_CN)会出现一种错误，此公众号没有这些scope的权限。\n\n<!-- more --><!-- toc -->\n这时候需要授权方确认是否已经获取网页授权的接口权限，如图\n\n![/images/wxsq2.png](/images/wxsq2.png)\n","source":"_posts/2018-07-14-wx-open-scope-issue.md","raw":"---\ntitle: 微信第三方平台授权问题：此公众号没有这些scope的权限\ndate: 2018-07-14 20:54:04\ntags: [微信]\n---\n\n在微信第三方平台授权中，[代公众号发起网页授权](https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=open1419318590&token=&lang=zh_CN)会出现一种错误，此公众号没有这些scope的权限。\n\n<!-- more --><!-- toc -->\n这时候需要授权方确认是否已经获取网页授权的接口权限，如图\n\n![/images/wxsq2.png](/images/wxsq2.png)\n","slug":"wx-open-scope-issue","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2afa00iz5gqojqj0fnq8"},{"title":"Linux 桌面版 修改分辨率","date":"2018-07-16T15:18:24.000Z","_content":"\n在使用虚拟机来运行 Linux 桌面版，上来这个分辨率实在是让人无法忍受。\n\n<!-- more --><!-- toc -->\n所以第一件事就是要修改分辨率\n\n```bash\n$ xrandr\n\nScreen 0: minimum 1 x 1, current 800 x 600, maximum 8192 x 8192\nVirtual1 connected primary 800x600+0+0 (normal left inverted right x axis y axis) 0mm x 0mm\n   800x600       60.00*+  60.32\n   2560x1600     59.99\n   1920x1440     60.00\n   1856x1392     60.00\n   1792x1344     60.00\n   1920x1200     59.88\n   1600x1200     60.00\n   1680x1050     59.95\n   1400x1050     59.98\n   1280x1024     60.02\n   1440x900      59.89\n   1280x960      60.00\n   1360x768      60.02\n   1280x800      59.81\n   1152x864      75.00\n   1280x768      59.87\n   1024x768      60.00\n   640x480       59.94\nVirtual2 disconnected (normal left inverted right x axis y axis)\nVirtual3 disconnected (normal left inverted right x axis y axis)\nVirtual4 disconnected (normal left inverted right x axis y axis)\nVirtual5 disconnected (normal left inverted right x axis y axis)\nVirtual6 disconnected (normal left inverted right x axis y axis)\nVirtual7 disconnected (normal left inverted right x axis y axis)\nVirtual8 disconnected (normal left inverted right x axis y axis)\n```\n\n`xrandr` 命令可以操作分辨率，列表中带有 `*` 号的就是当前正在使用的分辨率\n\n```bash\n$ xrandr -s 5\n```\n\n它的索引是从 0 开始的，输入目标数字即可切换分辨率\n","source":"_posts/2018-07-16-linux-fenbianlv.md","raw":"---\ntitle: Linux 桌面版 修改分辨率\ndate: 2018-07-16 15:18:24\ntags: [linux]\n---\n\n在使用虚拟机来运行 Linux 桌面版，上来这个分辨率实在是让人无法忍受。\n\n<!-- more --><!-- toc -->\n所以第一件事就是要修改分辨率\n\n```bash\n$ xrandr\n\nScreen 0: minimum 1 x 1, current 800 x 600, maximum 8192 x 8192\nVirtual1 connected primary 800x600+0+0 (normal left inverted right x axis y axis) 0mm x 0mm\n   800x600       60.00*+  60.32\n   2560x1600     59.99\n   1920x1440     60.00\n   1856x1392     60.00\n   1792x1344     60.00\n   1920x1200     59.88\n   1600x1200     60.00\n   1680x1050     59.95\n   1400x1050     59.98\n   1280x1024     60.02\n   1440x900      59.89\n   1280x960      60.00\n   1360x768      60.02\n   1280x800      59.81\n   1152x864      75.00\n   1280x768      59.87\n   1024x768      60.00\n   640x480       59.94\nVirtual2 disconnected (normal left inverted right x axis y axis)\nVirtual3 disconnected (normal left inverted right x axis y axis)\nVirtual4 disconnected (normal left inverted right x axis y axis)\nVirtual5 disconnected (normal left inverted right x axis y axis)\nVirtual6 disconnected (normal left inverted right x axis y axis)\nVirtual7 disconnected (normal left inverted right x axis y axis)\nVirtual8 disconnected (normal left inverted right x axis y axis)\n```\n\n`xrandr` 命令可以操作分辨率，列表中带有 `*` 号的就是当前正在使用的分辨率\n\n```bash\n$ xrandr -s 5\n```\n\n它的索引是从 0 开始的，输入目标数字即可切换分辨率\n","slug":"linux-fenbianlv","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2afb00j15gqork5s74xg"},{"title":"jQuery $.fn 的用法","date":"2018-07-17T18:27:21.000Z","_content":"\njQuery $.fn 的用法\n\n<!-- more --><!-- toc -->\n\n**初始化方法**\n\n```java\n(function($) {\n    $.fn.upload = function(options) {\n        var opts = $.extend({\n            isShow: false\n\t\t}, options);\n        console.log(opts);\n\n        return $(this)\n    }\n})(jQuery);\n```\n\n**使用**\n\n```javascript\n$(\"#add\").upload({\n    isShow: true\n})\n\n// {\"isShow\": true}\n```\n\n","source":"_posts/2018-07-17-jquery-fn.md","raw":"---\ntitle: jQuery $.fn 的用法\ndate: 2018-07-17 18:27:21\ntags: [jquery]\n---\n\njQuery $.fn 的用法\n\n<!-- more --><!-- toc -->\n\n**初始化方法**\n\n```java\n(function($) {\n    $.fn.upload = function(options) {\n        var opts = $.extend({\n            isShow: false\n\t\t}, options);\n        console.log(opts);\n\n        return $(this)\n    }\n})(jQuery);\n```\n\n**使用**\n\n```javascript\n$(\"#add\").upload({\n    isShow: true\n})\n\n// {\"isShow\": true}\n```\n\n","slug":"jquery-fn","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2afc00j35gqow3vra1s2"},{"title":"Ubuntu 中 VIM 剪切板与系统交互","date":"2018-07-18T13:28:29.000Z","_content":"\n在 Ubuntu 服务器中使用 Vim 剪切板默认是不支持与系统交互的。\n\n<!-- more --><!-- toc -->\n你可以通过命令查询\n\n```bash\n$ vim --version | grep \"clipboard\"\n\n-clipboard       +insert_expand   +path_extra      +user_commands\n+emacs_tags      +mouseshape      +startuptime     +xterm_clipboard\n```\n\n`clipboard` 前边是 `-` 号，即为不支持\n\n此时需要下载图形化界面 Vim\n\n```bash\n$ sudo apt update -y\n$ sudo apt install vim-gnome -y\n```\n\n再次查看已经可以支持\n\n**将 Vim 数据复制到剪切板**\n\n```bash\n\"+y\n```\n\n**将剪切板数据复制到 Vim**\n\n`normal` 模式下\n\n```bash\n\"+p\n```\n","source":"_posts/2018-07-18-ubuntu-vim-clipboard.md","raw":"---\ntitle: Ubuntu 中 VIM 剪切板与系统交互\ndate: 2018-07-18 13:28:29\ntags: [vim]\n---\n\n在 Ubuntu 服务器中使用 Vim 剪切板默认是不支持与系统交互的。\n\n<!-- more --><!-- toc -->\n你可以通过命令查询\n\n```bash\n$ vim --version | grep \"clipboard\"\n\n-clipboard       +insert_expand   +path_extra      +user_commands\n+emacs_tags      +mouseshape      +startuptime     +xterm_clipboard\n```\n\n`clipboard` 前边是 `-` 号，即为不支持\n\n此时需要下载图形化界面 Vim\n\n```bash\n$ sudo apt update -y\n$ sudo apt install vim-gnome -y\n```\n\n再次查看已经可以支持\n\n**将 Vim 数据复制到剪切板**\n\n```bash\n\"+y\n```\n\n**将剪切板数据复制到 Vim**\n\n`normal` 模式下\n\n```bash\n\"+p\n```\n","slug":"ubuntu-vim-clipboard","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2afd00j55gqoy5y0p7je"},{"title":"Mysql 修改字段加上前缀或后缀","date":"2018-07-19T11:33:19.000Z","_content":"\n最近需要给数据库表某个字段加上前缀，我想当然的这样操作。\n\n<!-- more --><!-- toc -->\n```mysql\n> update table set field = '-' + field;\n```\n\n很显然不对，应该使用 `CONCAT` 方法\n\n```mysql\n> update table set field = CONCAT('-' , field);\n```\n","source":"_posts/2018-07-19-mysql-string-prefix.md","raw":"---\ntitle: Mysql 修改字段加上前缀或后缀\ndate: 2018-07-19 11:33:19\ntags: [mysql]\n---\n\n最近需要给数据库表某个字段加上前缀，我想当然的这样操作。\n\n<!-- more --><!-- toc -->\n```mysql\n> update table set field = '-' + field;\n```\n\n很显然不对，应该使用 `CONCAT` 方法\n\n```mysql\n> update table set field = CONCAT('-' , field);\n```\n","slug":"mysql-string-prefix","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2afe00j85gqovfsbumqj"},{"title":"Python3 与 Python2 的不同之：module 'string' has no attribute 'letters'","date":"2018-07-20T11:32:35.000Z","_content":"\n很多人说 Python3 与 Python2 没什么不同，无非就是 `print` 写法不同而已，很显然他没怎么处理过兼容问题。\n\n<!-- more --><!-- toc -->\n\n```python\nAttributeError: module 'string' has no attribute 'letters'\n```\n\n报这个错误是因为 python3 去掉了该方法，使用 `ascii_letters` 替换即可\n\n```python\nstr.ascii_letters\n```\n","source":"_posts/2018-07-20-string-no-letters.md","raw":"---\ntitle: Python3 与 Python2 的不同之：module 'string' has no attribute 'letters'\ndate: 2018-07-20 11:32:35\ntags: [python]\n---\n\n很多人说 Python3 与 Python2 没什么不同，无非就是 `print` 写法不同而已，很显然他没怎么处理过兼容问题。\n\n<!-- more --><!-- toc -->\n\n```python\nAttributeError: module 'string' has no attribute 'letters'\n```\n\n报这个错误是因为 python3 去掉了该方法，使用 `ascii_letters` 替换即可\n\n```python\nstr.ascii_letters\n```\n","slug":"string-no-letters","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aff00ja5gqoxwpo3bz6"},{"title":"Python 下载模块报错 install_requires must be a string or list of strings containing valid project/version requirement specifiers","date":"2018-07-21T11:45:39.000Z","_content":"\n> It seems that older version of distutils do not support this requirement format.  I will change it and make a new release.\n\n<!-- more --><!-- toc -->\n将 distutils 升级到最新版即可\n\n```bash\n$ pip install setuptools -U\n```\n\n- [Installation error: 'install_requires' must be a string or list of strings containing valid project/version requirement specifiers](https://github.com/sdispater/pendulum/issues/187)\n","source":"_posts/2018-07-21-python-pip-install-requires.md","raw":"---\ntitle: Python 下载模块报错 install_requires must be a string or list of strings containing valid project/version requirement specifiers\ndate: 2018-07-21 11:45:39\ntags: [python]\n---\n\n> It seems that older version of distutils do not support this requirement format.  I will change it and make a new release.\n\n<!-- more --><!-- toc -->\n将 distutils 升级到最新版即可\n\n```bash\n$ pip install setuptools -U\n```\n\n- [Installation error: 'install_requires' must be a string or list of strings containing valid project/version requirement specifiers](https://github.com/sdispater/pendulum/issues/187)\n","slug":"python-pip-install-requires","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2afg00jc5gqou5oznwf0"},{"title":"Vagrantfile 常用配置","date":"2018-07-24T08:07:16.000Z","_content":"\n记录下 Vagrant 常用配置\n\n<!-- more --><!-- toc -->\n\n```ruby\n# -*- mode: ruby -*-\n# vi: set ft=ruby :\n\n# All Vagrant configuration is done below. The \"2\" in Vagrant.configure\n# configures the configuration version (we support older styles for\n# backwards compatibility). Please don't change it unless you know what\n# you're doing.\nVagrant.configure(\"2\") do |config|\n  # The most common configuration options are documented and commented below.\n  # For a complete reference, please see the online documentation at\n  # https://docs.vagrantup.com.\n\n  # Every Vagrant development environment requires a box. You can search for\n  # boxes at https://vagrantcloud.com/search.\n  config.vm.box = \"wxnacy/ubuntu1604\"\n  # vm box 地址\n  config.vm.box_url = \"/Users/wxnacy/VagrantProjects/ubuntu1604-1.6.0.box\"\n\n  # Disable automatic box update checking. If you disable this, then\n  # boxes will only be checked for updates when the user runs\n  # `vagrant box outdated`. This is not recommended.\n  # config.vm.box_check_update = false\n\n  # Create a forwarded port mapping which allows access to a specific port\n  # within the machine from a port on the host machine. In the example below,\n  # accessing \"localhost:8080\" will access port 80 on the guest machine.\n  # NOTE: This will enable public access to the opened port\n  # config.vm.network \"forwarded_port\", guest: 80, host: 8080\n\n  # Create a forwarded port mapping which allows access to a specific port\n  # within the machine from a port on the host machine and only allow access\n  # via 127.0.0.1 to disable public access\n  # config.vm.network \"forwarded_port\", guest: 80, host: 8080, host_ip: \"127.0.0.1\"\n\n  # Create a private network, which allows host-only access to the machine\n  # vm 私有 ip 可以通过本机访问\n  config.vm.network \"private_network\", ip: \"192.168.33.11\"\n\n  # Create a public network, which generally matched to bridged network.\n  # Bridged networks make the machine appear as another physical device on\n  # your network.\n  # config.vm.network \"public_network\"\n\n  # Share an additional folder to the guest VM. The first argument is\n  # the path on the host to the actual folder. The second argument is\n  # the path on the guest to mount the folder. And the optional third\n  # argument is a set of non-required options.\n  # 同步本机的文件夹，默认还有 /vagrant 同步当前文件夹\n  config.vm.synced_folder \"../data\", \"/vagrant_data\"\n\n  # Provider-specific configuration so you can fine-tune various\n  # backing providers for Vagrant. These expose provider-specific options.\n  # Example for VirtualBox:\n  #\n  config.vm.provider \"virtualbox\" do |vb|\n  #   # Display the VirtualBox GUI when booting the machine\n  #   vb.gui = true\n  #\n  #   # Customize the amount of memory on the VM:\n    vb.memory = \"2048\"\n    vb.cpus = 2\n  end\n  #\n  # View the documentation for the provider you are using for more\n  # information on available options.\n\n  # Enable provisioning with a shell script. Additional provisioners such as\n  # Puppet, Chef, Ansible, Salt, and Docker are also available. Please see the\n  # documentation for more information about their specific syntax and use.\n  # vm 启动后执行 shell 命令\n  config.vm.provision \"shell\", inline: <<-SHELL\n    sudo apt-get update -y\n    apt-get install -y git\n  SHELL\nend\n```\n","source":"_posts/2018-07-24-vagrantfile.md","raw":"---\ntitle: Vagrantfile 常用配置\ndate: 2018-07-24 08:07:16\ntags: [vagrant]\n---\n\n记录下 Vagrant 常用配置\n\n<!-- more --><!-- toc -->\n\n```ruby\n# -*- mode: ruby -*-\n# vi: set ft=ruby :\n\n# All Vagrant configuration is done below. The \"2\" in Vagrant.configure\n# configures the configuration version (we support older styles for\n# backwards compatibility). Please don't change it unless you know what\n# you're doing.\nVagrant.configure(\"2\") do |config|\n  # The most common configuration options are documented and commented below.\n  # For a complete reference, please see the online documentation at\n  # https://docs.vagrantup.com.\n\n  # Every Vagrant development environment requires a box. You can search for\n  # boxes at https://vagrantcloud.com/search.\n  config.vm.box = \"wxnacy/ubuntu1604\"\n  # vm box 地址\n  config.vm.box_url = \"/Users/wxnacy/VagrantProjects/ubuntu1604-1.6.0.box\"\n\n  # Disable automatic box update checking. If you disable this, then\n  # boxes will only be checked for updates when the user runs\n  # `vagrant box outdated`. This is not recommended.\n  # config.vm.box_check_update = false\n\n  # Create a forwarded port mapping which allows access to a specific port\n  # within the machine from a port on the host machine. In the example below,\n  # accessing \"localhost:8080\" will access port 80 on the guest machine.\n  # NOTE: This will enable public access to the opened port\n  # config.vm.network \"forwarded_port\", guest: 80, host: 8080\n\n  # Create a forwarded port mapping which allows access to a specific port\n  # within the machine from a port on the host machine and only allow access\n  # via 127.0.0.1 to disable public access\n  # config.vm.network \"forwarded_port\", guest: 80, host: 8080, host_ip: \"127.0.0.1\"\n\n  # Create a private network, which allows host-only access to the machine\n  # vm 私有 ip 可以通过本机访问\n  config.vm.network \"private_network\", ip: \"192.168.33.11\"\n\n  # Create a public network, which generally matched to bridged network.\n  # Bridged networks make the machine appear as another physical device on\n  # your network.\n  # config.vm.network \"public_network\"\n\n  # Share an additional folder to the guest VM. The first argument is\n  # the path on the host to the actual folder. The second argument is\n  # the path on the guest to mount the folder. And the optional third\n  # argument is a set of non-required options.\n  # 同步本机的文件夹，默认还有 /vagrant 同步当前文件夹\n  config.vm.synced_folder \"../data\", \"/vagrant_data\"\n\n  # Provider-specific configuration so you can fine-tune various\n  # backing providers for Vagrant. These expose provider-specific options.\n  # Example for VirtualBox:\n  #\n  config.vm.provider \"virtualbox\" do |vb|\n  #   # Display the VirtualBox GUI when booting the machine\n  #   vb.gui = true\n  #\n  #   # Customize the amount of memory on the VM:\n    vb.memory = \"2048\"\n    vb.cpus = 2\n  end\n  #\n  # View the documentation for the provider you are using for more\n  # information on available options.\n\n  # Enable provisioning with a shell script. Additional provisioners such as\n  # Puppet, Chef, Ansible, Salt, and Docker are also available. Please see the\n  # documentation for more information about their specific syntax and use.\n  # vm 启动后执行 shell 命令\n  config.vm.provision \"shell\", inline: <<-SHELL\n    sudo apt-get update -y\n    apt-get install -y git\n  SHELL\nend\n```\n","slug":"vagrantfile","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2afo00je5gqo0hqjylik"},{"title":"推荐一个 SSL 证书检测网站","date":"2018-07-23T13:44:21.000Z","_content":"\n现在使用 SSL 证书，让网站前边加上小绿盾已经非常普及了，不过第一次自己给网站加 SSL 证书，难免会不知道怎么验证健康情况，小绿盾是个标示，但有时候并不准。\n\n<!-- more --><!-- toc -->\n\n推荐一个网站 [SSL Checker](https://www.sslshopper.com/ssl-checker.html)\n\n输入你的网址即可检查，如图\n\n![sslchecker](http://wxnacy-img.oss-cn-beijing.aliyuncs.com/common/2018/sslchecker.png)\n","source":"_posts/2018-07-23-ssl-checker.md","raw":"---\ntitle: 推荐一个 SSL 证书检测网站\ndate: 2018-07-23 13:44:21\ntags: [工具]\n---\n\n现在使用 SSL 证书，让网站前边加上小绿盾已经非常普及了，不过第一次自己给网站加 SSL 证书，难免会不知道怎么验证健康情况，小绿盾是个标示，但有时候并不准。\n\n<!-- more --><!-- toc -->\n\n推荐一个网站 [SSL Checker](https://www.sslshopper.com/ssl-checker.html)\n\n输入你的网址即可检查，如图\n\n![sslchecker](http://wxnacy-img.oss-cn-beijing.aliyuncs.com/common/2018/sslchecker.png)\n","slug":"ssl-checker","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2afp00jg5gqolexsqvi5"},{"title":"使用 pypi 国内镜像","date":"2018-07-25T14:28:22.000Z","_content":"\n最近在自己写 python 包，在服务器上使用时发现了一些问题。\n\n<!-- more --><!-- toc -->\n\n因为使用的阿里云的服务器，默认使用的他们的镜像，但是发现同步很慢，无法满足高频的开发节奏，而是用 [pypi](https://pypi.org/simple) 就会经常超时或直接被墙。\n\n从网上找到一些国内其他的镜像\n\n- http://pypi.douban.com/ 豆瓣\n- http://pypi.mirrors.ustc.edu.cn/ 中科大\n- https://pypi.tuna.tsinghua.edu.cn/ 清华\n\n其中豆瓣的最好，更新最快\n\n**使用**\n\n```bash\n$ pip install <package_name> -i http://pypi.doubanio.com/simple/\n```\n\n全局使用\n\n修改 `~/.pip/pip.conf`\n\n```bash\n[global]\nindex-url=http://pypi.douban.com/simple/\n\n[install]\ntrusted-host=pypi.douban.com\n```\n\n最后还有一种情况是，命名镜像源中已经有了最新上传的包，但是通过 `pip install --upgrade wwx` 并不能更新到，索性只好直接找到包地址安装\n\n```bash\n$ pip install https://files.pythonhosted.org/packages/41/64/5417dc693f4aa3cfc194c7f491cb3e88567de2214ecfb330caac57611870/wwx-0.1.1.tar.gz#sha256=57a4243adc13f9e91ab7db70ffb7da88c01447eff594727232f46f3c1be6d107\n```\n","source":"_posts/2018-07-25-pip-china.md","raw":"---\ntitle: 使用 pypi 国内镜像\ndate: 2018-07-25 14:28:22\ntags: [python]\n---\n\n最近在自己写 python 包，在服务器上使用时发现了一些问题。\n\n<!-- more --><!-- toc -->\n\n因为使用的阿里云的服务器，默认使用的他们的镜像，但是发现同步很慢，无法满足高频的开发节奏，而是用 [pypi](https://pypi.org/simple) 就会经常超时或直接被墙。\n\n从网上找到一些国内其他的镜像\n\n- http://pypi.douban.com/ 豆瓣\n- http://pypi.mirrors.ustc.edu.cn/ 中科大\n- https://pypi.tuna.tsinghua.edu.cn/ 清华\n\n其中豆瓣的最好，更新最快\n\n**使用**\n\n```bash\n$ pip install <package_name> -i http://pypi.doubanio.com/simple/\n```\n\n全局使用\n\n修改 `~/.pip/pip.conf`\n\n```bash\n[global]\nindex-url=http://pypi.douban.com/simple/\n\n[install]\ntrusted-host=pypi.douban.com\n```\n\n最后还有一种情况是，命名镜像源中已经有了最新上传的包，但是通过 `pip install --upgrade wwx` 并不能更新到，索性只好直接找到包地址安装\n\n```bash\n$ pip install https://files.pythonhosted.org/packages/41/64/5417dc693f4aa3cfc194c7f491cb3e88567de2214ecfb330caac57611870/wwx-0.1.1.tar.gz#sha256=57a4243adc13f9e91ab7db70ffb7da88c01447eff594727232f46f3c1be6d107\n```\n","slug":"pip-china","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2afq00ji5gqo9tq9q5ne"},{"title":"Python chardet 判断字符编码","date":"2018-07-26T10:38:22.000Z","_content":"\n在处理微信的编码时经常会很头疼，因为它的数据有时候是 `utf-8` 有时候是 `ISO-8859-1`\n\n<!-- more --><!-- toc -->\n使用 `chardet` 模块可以判断字符的编码\n\n```python\n>>> import chardet\n>>> chardet.detect('哈哈'.encode())\n{'encoding': 'utf-8', 'confidence': 0.7525, 'language': ''}\n>>> chardet.detect('哈哈'.encode('GB2312'))\n{'encoding': 'ISO-8859-1', 'confidence': 0.73, 'language': ''}\n>>>\n```\n","source":"_posts/2018-07-26-python-chardet.md","raw":"---\ntitle: Python chardet 判断字符编码\ndate: 2018-07-26 10:38:22\ntags: [python]\n---\n\n在处理微信的编码时经常会很头疼，因为它的数据有时候是 `utf-8` 有时候是 `ISO-8859-1`\n\n<!-- more --><!-- toc -->\n使用 `chardet` 模块可以判断字符的编码\n\n```python\n>>> import chardet\n>>> chardet.detect('哈哈'.encode())\n{'encoding': 'utf-8', 'confidence': 0.7525, 'language': ''}\n>>> chardet.detect('哈哈'.encode('GB2312'))\n{'encoding': 'ISO-8859-1', 'confidence': 0.73, 'language': ''}\n>>>\n```\n","slug":"python-chardet","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2afr00jk5gqoh2qbg2gd"},{"title":"Python JSON 数据字段过滤","date":"2018-07-27T19:54:38.000Z","_content":"\n最近使用 Python 语言写一个过滤 JSON 数据字段的方法，适用多种方式过滤，在此记录一下。\n\n<!-- more --><!-- toc -->\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\ndef filter(source: dict, *args, **kwargs):\n    source_include = args if args else kwargs.get('source_include')\n    source_exclude = kwargs.get('source_exclude')\n    return BaseDict(source).filter(source_include = source_include,\n        source_exclude = source_exclude)\n\nclass BaseDict(dict):\n    def filter(self, *args, **kwargs):\n        \"\"\"\n        过滤dict\n        :param args: 默认 source_include\n        :param kwargs:\n            source_include：想要留下的keys\n                eq:[attr,attr1]\n                子元素可以使用 [\"obj.attr\"] 和 [\"obj[attr1,attr2]\"] 两种方式\n                速度上推荐使用 [\"obj[attr1,attr2]\"]\n            source_exclude：想要去掉的keys\n        :return:\n        \"\"\"\n        source_include = args if args else kwargs.get('source_include')\n        source_exclude = kwargs.get('source_exclude')\n\n        def _filter(t, o, k):\n            \"\"\"\n            过滤key\n            :param t: 过滤结果\n            :param o: 目标对象\n            :param k: 需要过滤的key\n            :return:\n            \"\"\"\n            if k in o:\n                t[k] = o[k]\n            return t\n\n        def _kv1(k):\n            key = k.split('.', 1)[0]\n            sub_key = k.split('.', 1)[1]\n            return key, sub_key\n\n        def _kv2(k):\n            key = k.split('[')[0]\n            sub_keys = k.split('[')[1].rstrip(']').split(',')\n            return key, sub_keys\n\n        def _include(t, o, k):\n            \"\"\"\n            判断key需要何种过滤\n            :param t: 过滤结果\n            :param o: 目标对象\n            :param k: 需要过滤的key\n            :return:\n            \"\"\"\n            if '.' in k:\n                key, sub_key = _kv1(k)\n                v = o.get(key)\n                if o.get(key) and isinstance(o.get(key), dict):\n                    if key not in t:\n                        t[key] = {}\n                    t[key] = _include(t[key], o[key], sub_key)\n                elif v and isinstance(v, list):\n                    if key not in t:\n                        t[key] = []\n                    for i in range(len(v)):\n                        temp = BaseDict(v[i]).filter(sub_key)\n                        if len(t[key]) == i:\n                            t[key].append(temp)\n                        else:\n                            t[key][i].update(temp)\n\n            elif '[' in k and ']' in k:\n                key, sub_keys = _kv2(k)\n                v = o.get(key)\n                if v and isinstance(v, dict):\n                    t[key] = BaseDict(v).filter(*sub_keys)\n                elif v and isinstance(v, list):\n                    t[key] = [BaseDict(sv).filter(*sub_keys) for sv in v]\n            else:\n                t = _filter(t, o, k)\n\n            return t\n\n        def _exclude(o, k):\n            if '.' in k:\n                key, sub_key = _kv1(k)\n                v = o.get(key)\n                if v and isinstance(v, dict):\n                    if sub_key in o[key]:\n                        o[key].pop(sub_key)\n                elif v and isinstance(v, list):\n                    o[key] = [BaseDict(o).filter(source_exclude=[sub_key])\n                            for o in v]\n\n            elif '[' in k and ']' in k:\n                key, sub_keys = _kv2(k)\n                v = o.get(key)\n                if v and isinstance(v, dict):\n                    o[key] = BaseDict(v).filter(source_exclude=sub_keys)\n                elif v and isinstance(v, list):\n                    o[key] = [BaseDict(o).filter(source_exclude=sub_keys)\n                            for o in v]\n            else:\n                if k in o:\n                    o.pop(k)\n\n        temp = {}\n        if source_include:\n            for item in source_include:\n                temp = _include(temp, self, item)\n            return temp\n        elif source_exclude:\n            for item in source_exclude:\n                _exclude(self, item)\n            return self\n        return self\n\n    def __getattr__(self, item):\n        return self[item]\n```\n\n测试用例\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nimport unittest\nfrom wpy import JSON\n\n\nclass TestCase(unittest.TestCase):\n    def setUp(self):\n        pass\n    def teardown(self):\n        pass\n\n    def test_filter(self):\n        book = dict(id = 2, name = 'size', price = 5)\n        user = dict(id = 1, name = \"wxnacy\", book= book)\n\n        res = JSON.filter(source = dict(user), source_include=['id', 'book'])\n        data = dict(id = 1, book= book)\n        self.assertEqual(res, data)\n\n        res = JSON.filter(dict(user), 'id', 'book')\n        data = dict(id = 1, book= book)\n        self.assertEqual(res, data)\n\n        res = JSON.filter(dict(user), 'id', 'book.id')\n        data = dict(id = 1, book= dict(id = 2))\n        self.assertEqual(res, data)\n\n        res = JSON.filter(dict(user), 'id', 'book.id', 'book.name')\n        data = dict(id = 1, book= dict(id = 2, name = \"size\"))\n        self.assertEqual(res, data)\n\n        res = JSON.filter(dict(user), 'id', 'book[id,name]')\n        data = dict(id = 1, book= dict(id = 2, name = \"size\"))\n        self.assertEqual(res, data)\n\n        res = JSON.filter(dict(user), source_exclude=['name', 'book'])\n        data = dict(id = 1)\n        self.assertEqual(res, data)\n\n        res = JSON.filter(dict(user), source_exclude=['name', 'book.price'])\n        data = dict(id = 1, book= dict(id = 2, name = \"size\"))\n        self.assertEqual(res, data)\n\n        print(user)\n        res = JSON.filter(dict(user), source_exclude=['name', 'book.price', 'book.id'])\n        data = dict(id = 1, book= dict(name = \"size\"))\n        self.assertEqual(res, data)\n\n        res = JSON.filter(dict(user), source_exclude=['name', 'book[id,price]'])\n        data = dict(id = 1, book= dict(name = \"size\"))\n        self.assertEqual(res, data)\n\n    def test_getattr(self):\n\n        book = dict(id = 2, name = 'size', price = 5)\n        user = dict(id = 1, name = \"wxnacy\", book= book)\n        user = JSON.BaseDict(user)\n        self.assertEqual(1, user.id)\n        self.assertEqual(book, user.book)\n\n    def test_filter_list(self):\n        book = dict(id = 2, name = 'size', price = 5)\n        book1 = dict(id = 3, name = 'bo', price = 6)\n        user = dict(id = 1, name = \"wxnacy\", books= [book, book1])\n\n        res = JSON.filter(user, 'id', 'books.id')\n        data = dict(id = 1, books = [dict(id = 2), dict(id = 3)])\n        self.assertEqual(res, data)\n\n        res = JSON.filter(user, 'id', 'books.id', 'books.price')\n        data = dict(id = 1, books = [dict(id = 2, price = 5),\n            dict(id = 3, price=6)])\n        self.assertEqual(res, data)\n\n        res = JSON.filter(user, 'id', 'books[id,price]')\n        data = dict(id = 1, books = [dict(id = 2, price = 5),\n            dict(id = 3, price=6)])\n        self.assertEqual(res, data)\n\n        res = JSON.filter(user, source_exclude=['name', 'books.name'])\n        data = dict(id = 1, books = [dict(id = 2, price = 5),\n            dict(id = 3, price=6)])\n        self.assertEqual(res, data)\n\n        res = JSON.filter(user, source_exclude=['name', 'books.name',\n            'books.price'])\n        data = dict(id = 1, books = [dict(id = 2), dict(id = 3)])\n        self.assertEqual(res, data)\n\n        res = JSON.filter(user, source_exclude = ['name', 'books[name,price]'])\n        data = dict(id = 1, books = [dict(id = 2), dict(id = 3)])\n        self.assertEqual(res, data)\n\nif __name__ == \"__main__\":\n    unittest.main()\n```\n","source":"_posts/2018-07-27-python-json-filter.md","raw":"---\ntitle: Python JSON 数据字段过滤\ndate: 2018-07-27 19:54:38\ntags: [python]\n---\n\n最近使用 Python 语言写一个过滤 JSON 数据字段的方法，适用多种方式过滤，在此记录一下。\n\n<!-- more --><!-- toc -->\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\ndef filter(source: dict, *args, **kwargs):\n    source_include = args if args else kwargs.get('source_include')\n    source_exclude = kwargs.get('source_exclude')\n    return BaseDict(source).filter(source_include = source_include,\n        source_exclude = source_exclude)\n\nclass BaseDict(dict):\n    def filter(self, *args, **kwargs):\n        \"\"\"\n        过滤dict\n        :param args: 默认 source_include\n        :param kwargs:\n            source_include：想要留下的keys\n                eq:[attr,attr1]\n                子元素可以使用 [\"obj.attr\"] 和 [\"obj[attr1,attr2]\"] 两种方式\n                速度上推荐使用 [\"obj[attr1,attr2]\"]\n            source_exclude：想要去掉的keys\n        :return:\n        \"\"\"\n        source_include = args if args else kwargs.get('source_include')\n        source_exclude = kwargs.get('source_exclude')\n\n        def _filter(t, o, k):\n            \"\"\"\n            过滤key\n            :param t: 过滤结果\n            :param o: 目标对象\n            :param k: 需要过滤的key\n            :return:\n            \"\"\"\n            if k in o:\n                t[k] = o[k]\n            return t\n\n        def _kv1(k):\n            key = k.split('.', 1)[0]\n            sub_key = k.split('.', 1)[1]\n            return key, sub_key\n\n        def _kv2(k):\n            key = k.split('[')[0]\n            sub_keys = k.split('[')[1].rstrip(']').split(',')\n            return key, sub_keys\n\n        def _include(t, o, k):\n            \"\"\"\n            判断key需要何种过滤\n            :param t: 过滤结果\n            :param o: 目标对象\n            :param k: 需要过滤的key\n            :return:\n            \"\"\"\n            if '.' in k:\n                key, sub_key = _kv1(k)\n                v = o.get(key)\n                if o.get(key) and isinstance(o.get(key), dict):\n                    if key not in t:\n                        t[key] = {}\n                    t[key] = _include(t[key], o[key], sub_key)\n                elif v and isinstance(v, list):\n                    if key not in t:\n                        t[key] = []\n                    for i in range(len(v)):\n                        temp = BaseDict(v[i]).filter(sub_key)\n                        if len(t[key]) == i:\n                            t[key].append(temp)\n                        else:\n                            t[key][i].update(temp)\n\n            elif '[' in k and ']' in k:\n                key, sub_keys = _kv2(k)\n                v = o.get(key)\n                if v and isinstance(v, dict):\n                    t[key] = BaseDict(v).filter(*sub_keys)\n                elif v and isinstance(v, list):\n                    t[key] = [BaseDict(sv).filter(*sub_keys) for sv in v]\n            else:\n                t = _filter(t, o, k)\n\n            return t\n\n        def _exclude(o, k):\n            if '.' in k:\n                key, sub_key = _kv1(k)\n                v = o.get(key)\n                if v and isinstance(v, dict):\n                    if sub_key in o[key]:\n                        o[key].pop(sub_key)\n                elif v and isinstance(v, list):\n                    o[key] = [BaseDict(o).filter(source_exclude=[sub_key])\n                            for o in v]\n\n            elif '[' in k and ']' in k:\n                key, sub_keys = _kv2(k)\n                v = o.get(key)\n                if v and isinstance(v, dict):\n                    o[key] = BaseDict(v).filter(source_exclude=sub_keys)\n                elif v and isinstance(v, list):\n                    o[key] = [BaseDict(o).filter(source_exclude=sub_keys)\n                            for o in v]\n            else:\n                if k in o:\n                    o.pop(k)\n\n        temp = {}\n        if source_include:\n            for item in source_include:\n                temp = _include(temp, self, item)\n            return temp\n        elif source_exclude:\n            for item in source_exclude:\n                _exclude(self, item)\n            return self\n        return self\n\n    def __getattr__(self, item):\n        return self[item]\n```\n\n测试用例\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nimport unittest\nfrom wpy import JSON\n\n\nclass TestCase(unittest.TestCase):\n    def setUp(self):\n        pass\n    def teardown(self):\n        pass\n\n    def test_filter(self):\n        book = dict(id = 2, name = 'size', price = 5)\n        user = dict(id = 1, name = \"wxnacy\", book= book)\n\n        res = JSON.filter(source = dict(user), source_include=['id', 'book'])\n        data = dict(id = 1, book= book)\n        self.assertEqual(res, data)\n\n        res = JSON.filter(dict(user), 'id', 'book')\n        data = dict(id = 1, book= book)\n        self.assertEqual(res, data)\n\n        res = JSON.filter(dict(user), 'id', 'book.id')\n        data = dict(id = 1, book= dict(id = 2))\n        self.assertEqual(res, data)\n\n        res = JSON.filter(dict(user), 'id', 'book.id', 'book.name')\n        data = dict(id = 1, book= dict(id = 2, name = \"size\"))\n        self.assertEqual(res, data)\n\n        res = JSON.filter(dict(user), 'id', 'book[id,name]')\n        data = dict(id = 1, book= dict(id = 2, name = \"size\"))\n        self.assertEqual(res, data)\n\n        res = JSON.filter(dict(user), source_exclude=['name', 'book'])\n        data = dict(id = 1)\n        self.assertEqual(res, data)\n\n        res = JSON.filter(dict(user), source_exclude=['name', 'book.price'])\n        data = dict(id = 1, book= dict(id = 2, name = \"size\"))\n        self.assertEqual(res, data)\n\n        print(user)\n        res = JSON.filter(dict(user), source_exclude=['name', 'book.price', 'book.id'])\n        data = dict(id = 1, book= dict(name = \"size\"))\n        self.assertEqual(res, data)\n\n        res = JSON.filter(dict(user), source_exclude=['name', 'book[id,price]'])\n        data = dict(id = 1, book= dict(name = \"size\"))\n        self.assertEqual(res, data)\n\n    def test_getattr(self):\n\n        book = dict(id = 2, name = 'size', price = 5)\n        user = dict(id = 1, name = \"wxnacy\", book= book)\n        user = JSON.BaseDict(user)\n        self.assertEqual(1, user.id)\n        self.assertEqual(book, user.book)\n\n    def test_filter_list(self):\n        book = dict(id = 2, name = 'size', price = 5)\n        book1 = dict(id = 3, name = 'bo', price = 6)\n        user = dict(id = 1, name = \"wxnacy\", books= [book, book1])\n\n        res = JSON.filter(user, 'id', 'books.id')\n        data = dict(id = 1, books = [dict(id = 2), dict(id = 3)])\n        self.assertEqual(res, data)\n\n        res = JSON.filter(user, 'id', 'books.id', 'books.price')\n        data = dict(id = 1, books = [dict(id = 2, price = 5),\n            dict(id = 3, price=6)])\n        self.assertEqual(res, data)\n\n        res = JSON.filter(user, 'id', 'books[id,price]')\n        data = dict(id = 1, books = [dict(id = 2, price = 5),\n            dict(id = 3, price=6)])\n        self.assertEqual(res, data)\n\n        res = JSON.filter(user, source_exclude=['name', 'books.name'])\n        data = dict(id = 1, books = [dict(id = 2, price = 5),\n            dict(id = 3, price=6)])\n        self.assertEqual(res, data)\n\n        res = JSON.filter(user, source_exclude=['name', 'books.name',\n            'books.price'])\n        data = dict(id = 1, books = [dict(id = 2), dict(id = 3)])\n        self.assertEqual(res, data)\n\n        res = JSON.filter(user, source_exclude = ['name', 'books[name,price]'])\n        data = dict(id = 1, books = [dict(id = 2), dict(id = 3)])\n        self.assertEqual(res, data)\n\nif __name__ == \"__main__\":\n    unittest.main()\n```\n","slug":"python-json-filter","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2afs00jm5gqo7higycrz"},{"title":"Supervisord 启动报错：unknown error making dispatchers for xxx ： EISDIR","date":"2018-07-15T16:05:13.000Z","_content":"\n同事在使用 Supervisord 来启动进程时，报了一个错误。\n\n<!-- more --><!-- toc -->\n```bash\nunknown error making dispatchers for 'tmd'： EISDIR\n```\n\n该错误只看最后的标示即可 `EISDIR` 是目录错误的意思，随后仔细查看配置文件，发现 `stdout_logfile` 配置的文件名与当前系统一个文件夹重名导致，修改后，重启搞定\n","source":"_posts/2018-07-15-supervisor-issue-eisdir.md","raw":"---\ntitle: Supervisord 启动报错：unknown error making dispatchers for xxx ： EISDIR\ndate: 2018-07-15 16:05:13\ntags: [python]\n---\n\n同事在使用 Supervisord 来启动进程时，报了一个错误。\n\n<!-- more --><!-- toc -->\n```bash\nunknown error making dispatchers for 'tmd'： EISDIR\n```\n\n该错误只看最后的标示即可 `EISDIR` 是目录错误的意思，随后仔细查看配置文件，发现 `stdout_logfile` 配置的文件名与当前系统一个文件夹重名导致，修改后，重启搞定\n","slug":"supervisor-issue-eisdir","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aft00jo5gqol9c2ck9w"},{"title":"不需要下载完整视频也可以获取时长","date":"2018-07-28T17:58:54.000Z","_content":"\n使用 ffmpeg 即可\n\n<!-- more --><!-- toc -->\n\n```bash\n$ ffmpeg -i video_url 2>&1 | grep Duration | awk '{print $2}'\n00:07:44.53,\n```\n\n这样获取到的是完整的时间格式，一般程序需要使用秒数，可以再改一下命令\n\n```bash\n$ ffprobe  -show_entries format=duration -v quiet -of csv=\"p=0\" -i video_url\n30.333\n```\n\n返回的是秒数，浮点型，可以使用程序在处理下\n\n","source":"_posts/2018-07-28-get-video-duration.md","raw":"---\ntitle: 不需要下载完整视频也可以获取时长\ndate: 2018-07-28 17:58:54\ntags: [工具]\n---\n\n使用 ffmpeg 即可\n\n<!-- more --><!-- toc -->\n\n```bash\n$ ffmpeg -i video_url 2>&1 | grep Duration | awk '{print $2}'\n00:07:44.53,\n```\n\n这样获取到的是完整的时间格式，一般程序需要使用秒数，可以再改一下命令\n\n```bash\n$ ffprobe  -show_entries format=duration -v quiet -of csv=\"p=0\" -i video_url\n30.333\n```\n\n返回的是秒数，浮点型，可以使用程序在处理下\n\n","slug":"get-video-duration","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2afu00jq5gqo2nkc2mp0"},{"title":"Openresty 安装报错 ngx_postgres addon was unable to detect version of the libpq library","date":"2018-07-22T13:32:18.000Z","_content":"\n手动编译安装 openresty 时报了个错\n\n> ngx_postgres addon was unable to detect version of the libpq library\n\n```bash\n./configure --prefix=/opt/openresty \\\n            --with-luajit \\\n            --without-http_redis2_module \\\n            --with-http_iconv_module \\\n            --with-http_postgres_module\n```\n\n这明明是官方提供的命令行，但是它本身又不提供 postgresql-devel 只能自己手动安装\n\n```bash\n$ sudo yum install -y postgresql-devel\n```\n\n手动编译安装最好提前安装这几个包\n\n```bash\n$ sudo yum install -y pcre-devel openssl-devel gcc postgresql-devel\n```\n","source":"_posts/2018-07-22-openresty-error-ngx-postgres.md","raw":"---\ntitle: Openresty 安装报错 ngx_postgres addon was unable to detect version of the libpq library\ndate: 2018-07-22 13:32:18\ntags: [openresty]\n---\n\n手动编译安装 openresty 时报了个错\n\n> ngx_postgres addon was unable to detect version of the libpq library\n\n```bash\n./configure --prefix=/opt/openresty \\\n            --with-luajit \\\n            --without-http_redis2_module \\\n            --with-http_iconv_module \\\n            --with-http_postgres_module\n```\n\n这明明是官方提供的命令行，但是它本身又不提供 postgresql-devel 只能自己手动安装\n\n```bash\n$ sudo yum install -y postgresql-devel\n```\n\n手动编译安装最好提前安装这几个包\n\n```bash\n$ sudo yum install -y pcre-devel openssl-devel gcc postgresql-devel\n```\n","slug":"openresty-error-ngx-postgres","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2afv00js5gqofkf3ayas"},{"title":"微信第三方平台授权问题：授权入口页所在域名：空","date":"2018-07-30T19:42:54.000Z","_content":"\n在微信第三方平台[授权](https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=open1453779503&token=&lang=zh_CN)的时候碰见一个错误。\n\n<!-- more --><!-- toc -->\n![/image/wxsq1.png](/images/wxsq1.png)\n\n如图在**引入用户进入授权页**这一步骤中，访问授权地址时报错\n\n```bash\nhttps://mp.weixin.qq.com/cgi-bin/componentloginpage?component\\_appid=xxxx&pre\\_auth\\_code=xxxxx&redirect\\_uri=xxxx&auth\\_type=xxx。\n```\n\n开始以为 `redirect_uri` 和第三方应用配置的授权域名不同导致的，但是查看后发现并没有不同。\n\n并且**授权入口页所在域名：空**这叫话一时不理解是什么意思，google 后发现原来是必须从 `redirect_uri` 所在域名访问该地址才行，我从浏览器里访问自然是不行的。\n\n或者请求加上同域名的 refer 即可\n","source":"_posts/2018-07-30-wx-open-issue1.md","raw":"---\ntitle: 微信第三方平台授权问题：授权入口页所在域名：空\ndate: 2018-07-30 19:42:54\ntags: [微信]\n---\n\n在微信第三方平台[授权](https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=open1453779503&token=&lang=zh_CN)的时候碰见一个错误。\n\n<!-- more --><!-- toc -->\n![/image/wxsq1.png](/images/wxsq1.png)\n\n如图在**引入用户进入授权页**这一步骤中，访问授权地址时报错\n\n```bash\nhttps://mp.weixin.qq.com/cgi-bin/componentloginpage?component\\_appid=xxxx&pre\\_auth\\_code=xxxxx&redirect\\_uri=xxxx&auth\\_type=xxx。\n```\n\n开始以为 `redirect_uri` 和第三方应用配置的授权域名不同导致的，但是查看后发现并没有不同。\n\n并且**授权入口页所在域名：空**这叫话一时不理解是什么意思，google 后发现原来是必须从 `redirect_uri` 所在域名访问该地址才行，我从浏览器里访问自然是不行的。\n\n或者请求加上同域名的 refer 即可\n","slug":"wx-open-issue1","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2afw00ju5gqog6srw3bi"},{"title":"Shell 中的 Switch 语法 case","date":"2018-07-09T13:57:54.000Z","_content":"\nShell 脚本中 case 可以进行多选择操作，每个选择匹配一中命令。\n\n<!-- more --><!-- toc -->\n\n语法\n\n```bash\ncase 值 in\n模式1)\n    command1\n    command2\n    ...\n    commandN\n    ;;\n模式2|模式3）\n    command1\n    command2\n    ...\n    commandN\n    ;;\nesac\n```\n\n使用\n\n```bash\necho '输入 1 到 4 之间的数字:'\necho '你输入的数字为:'\nread aNum\ncase $aNum in\n    1)  echo '你选择了 1'\n    ;;\n    2)  echo '你选择了 2'\n    ;;\n    3|4)  echo '你选择了 3 或 4'\n    ;;\n    *)  echo '你没有输入 1 到 4 之间的数字'\n    ;;\nesac\n```\n\n执行并输入 `1 - 4` 中的数字\n\n```bash\n输入 1 到 4 之间的数字:\n你输入的数字为:\n3\n你选择了 3 或 4\n```\n\n- [Shell 流程控制](http://www.runoob.com/linux/linux-shell-process-control.html)\n","source":"_posts/2018-07-09-linux-case.md","raw":"---\ntitle: Shell 中的 Switch 语法 case\ndate: 2018-07-09 13:57:54\ntags: [shell]\n---\n\nShell 脚本中 case 可以进行多选择操作，每个选择匹配一中命令。\n\n<!-- more --><!-- toc -->\n\n语法\n\n```bash\ncase 值 in\n模式1)\n    command1\n    command2\n    ...\n    commandN\n    ;;\n模式2|模式3）\n    command1\n    command2\n    ...\n    commandN\n    ;;\nesac\n```\n\n使用\n\n```bash\necho '输入 1 到 4 之间的数字:'\necho '你输入的数字为:'\nread aNum\ncase $aNum in\n    1)  echo '你选择了 1'\n    ;;\n    2)  echo '你选择了 2'\n    ;;\n    3|4)  echo '你选择了 3 或 4'\n    ;;\n    *)  echo '你没有输入 1 到 4 之间的数字'\n    ;;\nesac\n```\n\n执行并输入 `1 - 4` 中的数字\n\n```bash\n输入 1 到 4 之间的数字:\n你输入的数字为:\n3\n你选择了 3 或 4\n```\n\n- [Shell 流程控制](http://www.runoob.com/linux/linux-shell-process-control.html)\n","slug":"linux-case","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2afx00jw5gqopd76cl8h"},{"title":"Linux 解决 du 与 df 查询结果不一致的问题","date":"2018-08-02T16:26:42.000Z","_content":"\n最近碰到一个怪事，再生产环境部署应用时提示空间不足，随后使用 df 和 du 分别查询磁盘使用情况，结果 df 显示空间已满，但 du 现在所有文件加起来远远没有达到磁盘的总空间，简直是灵异事件，百思不得姐，后来查询发现，还是要相信科学，碰见这种情况就要开始使用 lsof 了。\n\n<!-- more --><!-- toc -->\n\n```bash\n$ sudo lsof | grep delete\n\ngunicorn  12684     root    9u      REG              202,1         0     262218 /tmp/wgunicorn-8i1jdgje (deleted)\ngunicorn  12684     root   10u      REG              202,1         0     266807 /tmp/wgunicorn-mm95v3yh (deleted)\ngunicorn  12684     root   11u      REG              202,1         0     266812 /tmp/wgunicorn-5m96ndz5 (deleted)\ngunicorn  12684     root   12u      REG              202,1         0     266894 /tmp/wgunicorn-gq5yj56p (deleted)\ngunicorn  12687     root    6u      REG              202,1         0     262184 /tmp/wgunicorn-5furub77 (deleted)\ngunicorn  12687     root    7u      REG              202,1         0     262186 /tmp/wgunicorn-wbxhe1yf (deleted)\ngunicorn  12687     root    8u      REG              202,1         0     262204 /tmp/wgunicorn-xc3x68bt (deleted)\ngunicorn  12687     root    9u      REG              202,1         0     262218 /tmp/wgunicorn-8i1jdgje (deleted)\ngunicorn  12687     root   10u      REG              202,1         0     266807 /tmp/wgunicorn-mm95v3yh (deleted)\n```\n\n通过上述命令查询得到的文件全都为删除状态，这就好比是电脑的回收站，你以为删除了没用的日志文件，其实某些启动它的程序因为没有重启，并没有真正的删除掉，而这些文件并不会被 du 读取到。\n\n这样事情就简单多了，只需要重启改程序（第一列数据）或者直接 kill 掉进行（pid 为第二列数据），随后在执行 df 就会发现空间瞬间增加。\n","source":"_posts/2018-08-02-du-diff-df.md","raw":"---\ntitle: Linux 解决 du 与 df 查询结果不一致的问题\ndate: 2018-08-02 16:26:42\ntags: [linux]\n---\n\n最近碰到一个怪事，再生产环境部署应用时提示空间不足，随后使用 df 和 du 分别查询磁盘使用情况，结果 df 显示空间已满，但 du 现在所有文件加起来远远没有达到磁盘的总空间，简直是灵异事件，百思不得姐，后来查询发现，还是要相信科学，碰见这种情况就要开始使用 lsof 了。\n\n<!-- more --><!-- toc -->\n\n```bash\n$ sudo lsof | grep delete\n\ngunicorn  12684     root    9u      REG              202,1         0     262218 /tmp/wgunicorn-8i1jdgje (deleted)\ngunicorn  12684     root   10u      REG              202,1         0     266807 /tmp/wgunicorn-mm95v3yh (deleted)\ngunicorn  12684     root   11u      REG              202,1         0     266812 /tmp/wgunicorn-5m96ndz5 (deleted)\ngunicorn  12684     root   12u      REG              202,1         0     266894 /tmp/wgunicorn-gq5yj56p (deleted)\ngunicorn  12687     root    6u      REG              202,1         0     262184 /tmp/wgunicorn-5furub77 (deleted)\ngunicorn  12687     root    7u      REG              202,1         0     262186 /tmp/wgunicorn-wbxhe1yf (deleted)\ngunicorn  12687     root    8u      REG              202,1         0     262204 /tmp/wgunicorn-xc3x68bt (deleted)\ngunicorn  12687     root    9u      REG              202,1         0     262218 /tmp/wgunicorn-8i1jdgje (deleted)\ngunicorn  12687     root   10u      REG              202,1         0     266807 /tmp/wgunicorn-mm95v3yh (deleted)\n```\n\n通过上述命令查询得到的文件全都为删除状态，这就好比是电脑的回收站，你以为删除了没用的日志文件，其实某些启动它的程序因为没有重启，并没有真正的删除掉，而这些文件并不会被 du 读取到。\n\n这样事情就简单多了，只需要重启改程序（第一列数据）或者直接 kill 掉进行（pid 为第二列数据），随后在执行 df 就会发现空间瞬间增加。\n","slug":"du-diff-df","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2afy00jy5gqok5uqgvwb"},{"title":"Python 使用 format 语句时对大括号转义","date":"2018-08-01T15:43:18.000Z","_content":"\nPython format 语句如何对大括号（{}）进行转义。\n\n<!-- more -->\n\n我想要达到一个效果，将\n\n```python\n'{:.2f}'.format(3.333)\n```\n\n中控制小数后位数的 `2` 进行参数控制，这样就要先对 `{:.2f}` format 一次，我这样写\n\n```python\n'{}:.{}f{}}'.format(2)\n```\n\n显然不对，我以前记录过如果想要显示 `{0}` 需要 &#123;&#123;0&#125;&#125;，而在这里，我想当然的以为将想要转义的部分单独用 `{}` 包起来就行了，愚昧。\n\n真正的转义的方式\n\n- &#123;&#123; 两个左卡括号输出 `{`\n- &#125;&#125; 两个左卡括号输出 `}`\n\n所以上面需求的正解为\n\n```python\n'{{:.{}f}}'.format(2)\n```\n\n知其然，还要知其所以然\n","source":"_posts/2018-08-01-python-format-show-big-parantheses.md","raw":"---\ntitle: Python 使用 format 语句时对大括号转义\ndate: 2018-08-01 15:43:18\ntags: [python]\n---\n\nPython format 语句如何对大括号（{}）进行转义。\n\n<!-- more -->\n\n我想要达到一个效果，将\n\n```python\n'{:.2f}'.format(3.333)\n```\n\n中控制小数后位数的 `2` 进行参数控制，这样就要先对 `{:.2f}` format 一次，我这样写\n\n```python\n'{}:.{}f{}}'.format(2)\n```\n\n显然不对，我以前记录过如果想要显示 `{0}` 需要 &#123;&#123;0&#125;&#125;，而在这里，我想当然的以为将想要转义的部分单独用 `{}` 包起来就行了，愚昧。\n\n真正的转义的方式\n\n- &#123;&#123; 两个左卡括号输出 `{`\n- &#125;&#125; 两个左卡括号输出 `}`\n\n所以上面需求的正解为\n\n```python\n'{{:.{}f}}'.format(2)\n```\n\n知其然，还要知其所以然\n","slug":"python-format-show-big-parantheses","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2afz00k05gqosdw72keu"},{"title":"Flask 重镜像地址","date":"2018-07-31T15:22:16.000Z","_content":"\nflask 中 redirect 方法可以重镜像地址。\n\n<!-- more --><!-- toc -->\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom flask import Flask\nfrom flask import redirect\nfrom flask import url_for\n\napp = Flask(__name__)\n\n@app.route('/baidu')\ndef bd():\n    '''重镜像'''\n    return redirect('http://baidu.com')\n\n@app.route('/')\ndef index():\n    '''获取路由地址，并重镜像'''\n    return redirect(url_for('bd'))\n```\n","source":"_posts/2018-07-31-flask-redirect.md","raw":"---\ntitle: Flask 重镜像地址\ndate: 2018-07-31 15:22:16\ntags: [flask]\n---\n\nflask 中 redirect 方法可以重镜像地址。\n\n<!-- more --><!-- toc -->\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom flask import Flask\nfrom flask import redirect\nfrom flask import url_for\n\napp = Flask(__name__)\n\n@app.route('/baidu')\ndef bd():\n    '''重镜像'''\n    return redirect('http://baidu.com')\n\n@app.route('/')\ndef index():\n    '''获取路由地址，并重镜像'''\n    return redirect(url_for('bd'))\n```\n","slug":"flask-redirect","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ag000k25gqo6kzh7b9d"},{"title":"FlaskLogin 解决 Fetch 不能携带登录信息的问题","date":"2018-08-03T20:35:12.000Z","_content":"\n使用 flask-login 模块时，如果在 controller 中使用 `@login_required` 检查是否登录的话，在使用 fetch 请求接口，就会报没有登录的错误。\n\n<!-- more --><!-- toc -->\n这是因为 fetch 在请求时，默认并没有携带 flask-login 所需要的登录信息，了解这一点就好说了\n\n```javascript\nfetch('/admin_content/save',{\n    credentials: 'include',\n}).then(function(res){\n    return res.json()\n}).then(function(data){\n    console.log(data);\n})\n```\n\n只需要在请求时加上 `credentials: 'include'` 即可\n\n- [Flask-Login, Session Management and AJAX](https://stackoverflow.com/questions/50236564/flask-login-session-management-and-ajax)\n","source":"_posts/2018-08-03-flask-login-fetch.md","raw":"---\ntitle: FlaskLogin 解决 Fetch 不能携带登录信息的问题\ndate: 2018-08-03 20:35:12\ntags: [flask]\n---\n\n使用 flask-login 模块时，如果在 controller 中使用 `@login_required` 检查是否登录的话，在使用 fetch 请求接口，就会报没有登录的错误。\n\n<!-- more --><!-- toc -->\n这是因为 fetch 在请求时，默认并没有携带 flask-login 所需要的登录信息，了解这一点就好说了\n\n```javascript\nfetch('/admin_content/save',{\n    credentials: 'include',\n}).then(function(res){\n    return res.json()\n}).then(function(data){\n    console.log(data);\n})\n```\n\n只需要在请求时加上 `credentials: 'include'` 即可\n\n- [Flask-Login, Session Management and AJAX](https://stackoverflow.com/questions/50236564/flask-login-session-management-and-ajax)\n","slug":"flask-login-fetch","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ag200k45gqoecv5ijly"},{"title":"Javascript 页面刷新的几种方式","date":"2018-08-06T09:59:54.000Z","_content":"\n页面刷新有几种方式\n\n<!-- more --><!-- toc -->\n## reload\n\n```java\nlocation.reload\n```\n\n## replace\n\n```java\nlocation.replace(location.href)\n```\n\n## meta-refresh\n\n五秒钟定时刷新\n\n```html\n<meta http-equiv=\"refresh\" content=\"5\">\n```\n\n五秒后跳转指定页面\n\n```html\n<meta http-equiv=\"refresh\" content=\"5;url=https://wxnacy.com\">\n```\n\n## js 定时刷新\n\n```java\n<script language=\"JavaScript\">\nfunction myrefresh()\n{\n   window.location.reload();\n}\nsetTimeout('myrefresh()',1000); //指定1秒刷新一次\n</script>\n```\n\n- [js 刷新当前页面](https://www.jianshu.com/p/d8176460efc4)\n","source":"_posts/2018-08-06-html-reload.md","raw":"---\ntitle: Javascript 页面刷新的几种方式\ndate: 2018-08-06 09:59:54\ntags: [html, javascript]\n---\n\n页面刷新有几种方式\n\n<!-- more --><!-- toc -->\n## reload\n\n```java\nlocation.reload\n```\n\n## replace\n\n```java\nlocation.replace(location.href)\n```\n\n## meta-refresh\n\n五秒钟定时刷新\n\n```html\n<meta http-equiv=\"refresh\" content=\"5\">\n```\n\n五秒后跳转指定页面\n\n```html\n<meta http-equiv=\"refresh\" content=\"5;url=https://wxnacy.com\">\n```\n\n## js 定时刷新\n\n```java\n<script language=\"JavaScript\">\nfunction myrefresh()\n{\n   window.location.reload();\n}\nsetTimeout('myrefresh()',1000); //指定1秒刷新一次\n</script>\n```\n\n- [js 刷新当前页面](https://www.jianshu.com/p/d8176460efc4)\n","slug":"html-reload","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ag300k65gqo3nghqynj"},{"title":"jQuery addClass removeClass 方法","date":"2018-08-04T11:42:56.000Z","_content":"\n使用 jquery 操作 class 样式非常方便，使用 `addClass, removeClass` 即可进行增加和删除\n\n<!-- more --><!-- toc -->\n\n**addClass**\n\n```java\n$(\"div\").addClass(\"red\")\n$(\"div\").addClass(\"red blue\")\n```\n\n**removeClass**\n\n```java\n$(\"div\").removeClass(\"red\")\n$(\"div\").removeClass(\"red blue\")\n```\n\n该方法不止可以接受字符串，还可以接受一个方法，方法返回样式字符串即可\n\n```javascript\n// index 当前 element 索引\n// currentClass 当前 element class\n$(\"div\").addClass(function(index, currentClass) {\n    if( currentClass != 'red' ){\n        return 'blue';\n    }\n    return '';\n})\n```\n\n[试一试](/run/?id=68719513754)\n\n- [addClass()](https://api.jquery.com/addclass/)\n","source":"_posts/2018-08-04-jquery-addclass.md","raw":"---\ntitle: jQuery addClass removeClass 方法\ndate: 2018-08-04 11:42:56\ntags: [jquery]\n---\n\n使用 jquery 操作 class 样式非常方便，使用 `addClass, removeClass` 即可进行增加和删除\n\n<!-- more --><!-- toc -->\n\n**addClass**\n\n```java\n$(\"div\").addClass(\"red\")\n$(\"div\").addClass(\"red blue\")\n```\n\n**removeClass**\n\n```java\n$(\"div\").removeClass(\"red\")\n$(\"div\").removeClass(\"red blue\")\n```\n\n该方法不止可以接受字符串，还可以接受一个方法，方法返回样式字符串即可\n\n```javascript\n// index 当前 element 索引\n// currentClass 当前 element class\n$(\"div\").addClass(function(index, currentClass) {\n    if( currentClass != 'red' ){\n        return 'blue';\n    }\n    return '';\n})\n```\n\n[试一试](/run/?id=68719513754)\n\n- [addClass()](https://api.jquery.com/addclass/)\n","slug":"jquery-addclass","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ag500k85gqo18z6ghd4"},{"title":"Markdown 如何插入表格","date":"2018-08-08T15:16:10.000Z","_content":"\n用 Markdown 写博客这么久，好像还没好好了解过，表格的输入。\n\n<!-- more --><!-- toc -->\n\n```\n|title|long title|title|\n|------|------|------|\n|short content|short content|a long piece of content|\n|a long piece of content|short content|short content|\n```\n\n通过一些 `|, -` 来组合即可显示如下的效果\n\n|title|long title|title|\n|------|------|------|\n|short content|short content|a long piece of content|\n|a long piece of content|short content|short content|\n\n可以看到它在写法上比较张扬，但不影响美观的显示效果，不过为了美观，我通常这样写\n\n```\n| title                   | long title    | title                   |\n| ----------------------- | ------------- | ----------------------- |\n| short content           | short content | a long piece of content |\n| a long piece of content | short content | short content           |\n\n```\n\n多余出来的空格和 `-` 并不影响最后的输出效果，`-` 至少有一个即可，以上只是一个强迫症的习惯。\n\n在对齐方式上，默认标题居中对齐，内容居左对齐，通过 `:` 可以调整表格列的对齐方式\n\n```\n| title                   | long title    | title                   |\n| :---------------------- | :-----------: | ----------------------: |\n| short content           | short content | a long piece of content |\n| a long piece of content | short content | short content           |\n```\n\n`:-` 为左对齐，`:-:` 为居中对齐、`-:` 为右对齐\n\n| title                   | long title    | title                   |\n| :---------------------- | :-----------: | ----------------------: |\n| short content           | short content | a long piece of content |\n| a long piece of content | short content | short content           |\n\n","source":"_posts/2018-08-08-markdown-table.md","raw":"---\ntitle: Markdown 如何插入表格\ndate: 2018-08-08 15:16:10\ntags: [markdown]\n---\n\n用 Markdown 写博客这么久，好像还没好好了解过，表格的输入。\n\n<!-- more --><!-- toc -->\n\n```\n|title|long title|title|\n|------|------|------|\n|short content|short content|a long piece of content|\n|a long piece of content|short content|short content|\n```\n\n通过一些 `|, -` 来组合即可显示如下的效果\n\n|title|long title|title|\n|------|------|------|\n|short content|short content|a long piece of content|\n|a long piece of content|short content|short content|\n\n可以看到它在写法上比较张扬，但不影响美观的显示效果，不过为了美观，我通常这样写\n\n```\n| title                   | long title    | title                   |\n| ----------------------- | ------------- | ----------------------- |\n| short content           | short content | a long piece of content |\n| a long piece of content | short content | short content           |\n\n```\n\n多余出来的空格和 `-` 并不影响最后的输出效果，`-` 至少有一个即可，以上只是一个强迫症的习惯。\n\n在对齐方式上，默认标题居中对齐，内容居左对齐，通过 `:` 可以调整表格列的对齐方式\n\n```\n| title                   | long title    | title                   |\n| :---------------------- | :-----------: | ----------------------: |\n| short content           | short content | a long piece of content |\n| a long piece of content | short content | short content           |\n```\n\n`:-` 为左对齐，`:-:` 为居中对齐、`-:` 为右对齐\n\n| title                   | long title    | title                   |\n| :---------------------- | :-----------: | ----------------------: |\n| short content           | short content | a long piece of content |\n| a long piece of content | short content | short content           |\n\n","slug":"markdown-table","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ag600ka5gqofivxzsdh"},{"title":"转载 · Python 判断字符串是否由数字组成的几种方法","date":"2018-07-29T14:59:19.000Z","_content":"\nPython 判断字符串是否由数字组成的几种方法\n\n<!-- more --><!-- toc -->\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef is_number(s):\n    try:\n        float(s)\n        return True\n    except ValueError:\n        pass\n\n    try:\n        import unicodedata\n        unicodedata.numeric(s)\n        return True\n    except (TypeError, ValueError):\n        pass\n\n    return False\n\n# 测试字符串和数字\nprint(is_number('foo'))   # False\nprint(is_number('1'))     # True\nprint(is_number('1.3'))   # True\nprint(is_number('-1.37')) # True\nprint(is_number('1e3'))   # True\n\n# 测试 Unicode\n# 阿拉伯语 5\nprint(is_number('٥'))  # True\n# 泰语 2\nprint(is_number('๒'))  # True\n# 中文数字\nprint(is_number('四')) # True\n# 版权号\nprint(is_number('©'))  # False\n```\n\n简单的情况下还可以使用另外两个方法\n- `\"\".isdigit()`\n- `\"\".isnumeric()`\n\n\n- [Python 判断字符串是否为数字](http://www.runoob.com/python3/python3-check-is-number.html)\n- [Python3 isnumeric()方法](http://www.runoob.com/python3/python3-string-isnumeric.html)\n","source":"_posts/2018-07-29-python-is-number.md","raw":"---\ntitle: 转载 · Python 判断字符串是否由数字组成的几种方法\ndate: 2018-07-29 14:59:19\ntags: [python]\n---\n\nPython 判断字符串是否由数字组成的几种方法\n\n<!-- more --><!-- toc -->\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef is_number(s):\n    try:\n        float(s)\n        return True\n    except ValueError:\n        pass\n\n    try:\n        import unicodedata\n        unicodedata.numeric(s)\n        return True\n    except (TypeError, ValueError):\n        pass\n\n    return False\n\n# 测试字符串和数字\nprint(is_number('foo'))   # False\nprint(is_number('1'))     # True\nprint(is_number('1.3'))   # True\nprint(is_number('-1.37')) # True\nprint(is_number('1e3'))   # True\n\n# 测试 Unicode\n# 阿拉伯语 5\nprint(is_number('٥'))  # True\n# 泰语 2\nprint(is_number('๒'))  # True\n# 中文数字\nprint(is_number('四')) # True\n# 版权号\nprint(is_number('©'))  # False\n```\n\n简单的情况下还可以使用另外两个方法\n- `\"\".isdigit()`\n- `\"\".isnumeric()`\n\n\n- [Python 判断字符串是否为数字](http://www.runoob.com/python3/python3-check-is-number.html)\n- [Python3 isnumeric()方法](http://www.runoob.com/python3/python3-string-isnumeric.html)\n","slug":"python-is-number","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ag700kc5gqo39hoaog9"},{"title":"jQuery 监听 element change 事件","date":"2018-08-07T10:30:00.000Z","_content":"\nchange 事件适用于文本域在值变化时触发，我们也可以在非标单元素中通过主动调用 `change()` 方法来触发 change 事件\n\n<!-- more --><!-- toc -->\n```java\n<!DOCTYPE html>\n<html>\n\t<head>\n\t\t<meta charset=\"utf-8\">\n\t\t<title>change事件</title>\n\t\t<style>\n\t\t\t#container {\n\t\t\t\tmin-height: 120px;\n\t\t\t\tborder: 1px solid #aaa;\n\t\t\t}\n\t\t</style>\n\t</head>\n\t<body>\n\t\t<div id=\"container\">\n\n\t\t</div>\n\t\t<button type=\"button\" id=\"btn\">add \"aaa\" for div</button>\n        <button type=\"button\" id=\"attr\">监听属性</button>\n\n <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js\"></script>\n\t\t<script>\n\n\t\t\tfunction changes(){\n\t\t\t\talert(\"changes\");\n\n\t\t\t}\n\n\t\t\t$(\"#btn\").click(function() {\n\t\t\t\t$(\"#container\").append(\"aaa\").change();\n\t\t\t});\n\t\t\t$(\"#attr\").click(function() {\n\t\t\t\t$(\"#container\").attr(\"data-value\", \"test\").change();\n\t\t\t});\n\t\t\t$(\"#container\").bind(\"change\", changes);\n\t\t</script>\n\t</body>\n</html>\n```\n\n[试一试](/run/?id=68719513614)\n\n\n","source":"_posts/2018-08-07-jquery-listen-change.md","raw":"---\ntitle: jQuery 监听 element change 事件\ndate: 2018-08-07 10:30:00\ntags: [jquery]\n---\n\nchange 事件适用于文本域在值变化时触发，我们也可以在非标单元素中通过主动调用 `change()` 方法来触发 change 事件\n\n<!-- more --><!-- toc -->\n```java\n<!DOCTYPE html>\n<html>\n\t<head>\n\t\t<meta charset=\"utf-8\">\n\t\t<title>change事件</title>\n\t\t<style>\n\t\t\t#container {\n\t\t\t\tmin-height: 120px;\n\t\t\t\tborder: 1px solid #aaa;\n\t\t\t}\n\t\t</style>\n\t</head>\n\t<body>\n\t\t<div id=\"container\">\n\n\t\t</div>\n\t\t<button type=\"button\" id=\"btn\">add \"aaa\" for div</button>\n        <button type=\"button\" id=\"attr\">监听属性</button>\n\n <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js\"></script>\n\t\t<script>\n\n\t\t\tfunction changes(){\n\t\t\t\talert(\"changes\");\n\n\t\t\t}\n\n\t\t\t$(\"#btn\").click(function() {\n\t\t\t\t$(\"#container\").append(\"aaa\").change();\n\t\t\t});\n\t\t\t$(\"#attr\").click(function() {\n\t\t\t\t$(\"#container\").attr(\"data-value\", \"test\").change();\n\t\t\t});\n\t\t\t$(\"#container\").bind(\"change\", changes);\n\t\t</script>\n\t</body>\n</html>\n```\n\n[试一试](/run/?id=68719513614)\n\n\n","slug":"jquery-listen-change","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ag800kf5gqo0iwuvkb7"},{"title":"Java 报错：type List does not take parameters","date":"2018-08-09T17:54:54.000Z","_content":"\n在使用 List 类的时候会报一个错误。\n\n<!-- more --><!-- toc -->\n\n```java\nList<String> list = new ArrayList<String>();\n```\n```bash\nerror: type List does not take parameters\n```\n\n这个错误是因为到错了包\n\n```java\nimport java.awt.List;\n```\n\n正确的包为\n\n```java\nimport java.util.List;\n```\n","source":"_posts/2018-08-09-java-error-list1.md","raw":"---\ntitle: Java 报错：type List does not take parameters\ndate: 2018-08-09 17:54:54\ntags: [java]\n---\n\n在使用 List 类的时候会报一个错误。\n\n<!-- more --><!-- toc -->\n\n```java\nList<String> list = new ArrayList<String>();\n```\n```bash\nerror: type List does not take parameters\n```\n\n这个错误是因为到错了包\n\n```java\nimport java.awt.List;\n```\n\n正确的包为\n\n```java\nimport java.util.List;\n```\n","slug":"java-error-list1","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ag900kh5gqoq59s1koc"},{"title":"Go 语法错误：relocation target main.main not defined","date":"2018-08-10T18:15:26.000Z","_content":"\n> relocation target main.main not defined\n\n<!-- more --><!-- toc -->\n该错误是因为在项目中一个 `main()` 方法作为入口，在标有 `package main` 文件下添加该方法即可\n","source":"_posts/2018-08-10-go-main-not-found.md","raw":"---\ntitle: Go 语法错误：relocation target main.main not defined\ndate: 2018-08-10 18:15:26\ntags: [go]\n---\n\n> relocation target main.main not defined\n\n<!-- more --><!-- toc -->\n该错误是因为在项目中一个 `main()` 方法作为入口，在标有 `package main` 文件下添加该方法即可\n","slug":"go-main-not-found","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aga00kj5gqofxpgs1x7"},{"title":"Go 数组 array","date":"2018-08-12T17:08:45.000Z","_content":"\n本章简单了解下 Go 语言的数组（array）。\n\n<!-- more --><!-- toc -->\n\n## 初始化\n\n初始化固定长度的数组，并根据索引赋值\n\n```go\nvar a [2]int\nfmt.Println(a)      // [0 0]\na[0] = 1\nfmt.Println(a)      // [1 0]\n```\n\n初始化固定长度的数组，并直接赋值\n\n```go\na := [2]int{1, 2}\nfmt.Println(a)      // [1 2]\n```\n\n初始化不确定长度的数组\n\n```go\na := [...]int{1, 2}\nfmt.Println(a)      // [1 2]\n\nb := []int{1, 2}\nfmt.Println(b)      // [1 2]\n```\n\n数组一旦确定长度，便不能更改，否则就会报错\n\n```go\na := [2]int{1, 2}\nfmt.Println(a)      // [1 2]\na = [4]int{5, 6, 7, 8}\n// arrays.go|23 col 7| cannot use [4]int literal (type [4]int) as type [2]int in assignment\n```\n\n## 切片\n\n> Go 数组的长度不可改变，在特定场景中这样的集合就不太适用，Go中提供了一种灵活，功能强悍的内置类型切片(\"动态数组\"),与数组相比切片的长度是不固定的，可以追加元素，在追加时可能使切片的容量增大。\n\n切片可以像 Python 一样支持 `[x:y]` 的截取方式，`x` 表示截取开始的索引数字，`y` 表示截取结束的索引数字，截取后返回一个切片\n\n```go\nh := []int{1, 2, 3, 4, 5, 6, 7}\n\nfmt.Println(h[:])           // [1 2 3 4 5 6 7]\nfmt.Println(h[0:])          // [1 2 3 4 5 6 7]\nfmt.Println(h[0:len(h)])    // [1 2 3 4 5 6 7]\nfmt.Println(h[2:4])         // [3 4]\nfmt.Println(h[:4])          // [1 2 3 4]\n```\n\n这要比 Java 不知道简单了多少，可惜不像 Python 那样支持负数索引，不然截取尾部数据会更方便。\n\n此时切片可以任意改变大小\n\n```go\nh = []int{1, 2, 3,4}\nh = []int{1, 2, 3, 4, 5}\n```\n\n**初始化切片**\n\n切片也可以自定义\n\n```go\nvar a = make([]int, len, cap)\n```\n\n`len(), cap()` 可以获取切片的长度和长度最长可以达到多少\n\n```go\nvar m = make([]int, 3, 4)\nfmt.Printf(\"slice %v len %d cap %d\", m, len(m), cap(m))\n// slice [0 0 0] len 3 cap 4\n```\n\n说实话 `cap` 在使用中，并没有起到什么作用，肯定是我还了解的不够，以后明白了在更新上。\n\n\n## 作为函数参数\n\n```go\nfunc Test(a []int) {\n\tfmt.Println(a)\n}\na := []int{1, 2}\nTest(a)     // [1 2]\n```\n\n## 方法\n\n通过 Go 的一些内置方法可以更好的操作数组\n\n**append**\n\n数组长度不可更改，但是我们可以通过 `append` 方法返回一个新数组，并添加上元素。\n\n```go\na := []int{1, 2}\na = append(a, 1)\nfmt.Println(a)      // [1 2]\n\na = append(a, 3, 4)\nfmt.Println(a)      // [1 2 3 4]\n```\n\n当 `append` 的第一个参数为切片时，可以另一个数组或切片的数据整个添加过来。\n\n```go\na := []int{1, 2}\nb := []int{3, 4}\nfmt.Println(append(a[:], b...)) // [1 2 3 4]\n```\n\n**delete**\n\nGo 中貌似是没有数组的删除方法的，不过我们可以利用 `append` 来实现这个功能。\n\n```go\nfunc Remove(slice []int, s int) []int {\n    return append(slice[:s], slice[s+1:]...)\n}\n\na := []int{1, 2}\na = Remove(a, 0)\nfmt.Println(a)      // [2]\n```\n\n**copy**\n\n```go\nvar n = []int{1, 2}\nvar l = make([]int, len(n), cap(n) * 2)\ncopy(l, n)\nfmt.Println(l)  // [1 2]\n```\n\n- [Go 循环语句](/2018/08/24/go-loops/)\n","source":"_posts/2018-08-12-go-array-go.md","raw":"---\ntitle: Go 数组 array\ndate: 2018-08-12 17:08:45\ntags: [go]\n---\n\n本章简单了解下 Go 语言的数组（array）。\n\n<!-- more --><!-- toc -->\n\n## 初始化\n\n初始化固定长度的数组，并根据索引赋值\n\n```go\nvar a [2]int\nfmt.Println(a)      // [0 0]\na[0] = 1\nfmt.Println(a)      // [1 0]\n```\n\n初始化固定长度的数组，并直接赋值\n\n```go\na := [2]int{1, 2}\nfmt.Println(a)      // [1 2]\n```\n\n初始化不确定长度的数组\n\n```go\na := [...]int{1, 2}\nfmt.Println(a)      // [1 2]\n\nb := []int{1, 2}\nfmt.Println(b)      // [1 2]\n```\n\n数组一旦确定长度，便不能更改，否则就会报错\n\n```go\na := [2]int{1, 2}\nfmt.Println(a)      // [1 2]\na = [4]int{5, 6, 7, 8}\n// arrays.go|23 col 7| cannot use [4]int literal (type [4]int) as type [2]int in assignment\n```\n\n## 切片\n\n> Go 数组的长度不可改变，在特定场景中这样的集合就不太适用，Go中提供了一种灵活，功能强悍的内置类型切片(\"动态数组\"),与数组相比切片的长度是不固定的，可以追加元素，在追加时可能使切片的容量增大。\n\n切片可以像 Python 一样支持 `[x:y]` 的截取方式，`x` 表示截取开始的索引数字，`y` 表示截取结束的索引数字，截取后返回一个切片\n\n```go\nh := []int{1, 2, 3, 4, 5, 6, 7}\n\nfmt.Println(h[:])           // [1 2 3 4 5 6 7]\nfmt.Println(h[0:])          // [1 2 3 4 5 6 7]\nfmt.Println(h[0:len(h)])    // [1 2 3 4 5 6 7]\nfmt.Println(h[2:4])         // [3 4]\nfmt.Println(h[:4])          // [1 2 3 4]\n```\n\n这要比 Java 不知道简单了多少，可惜不像 Python 那样支持负数索引，不然截取尾部数据会更方便。\n\n此时切片可以任意改变大小\n\n```go\nh = []int{1, 2, 3,4}\nh = []int{1, 2, 3, 4, 5}\n```\n\n**初始化切片**\n\n切片也可以自定义\n\n```go\nvar a = make([]int, len, cap)\n```\n\n`len(), cap()` 可以获取切片的长度和长度最长可以达到多少\n\n```go\nvar m = make([]int, 3, 4)\nfmt.Printf(\"slice %v len %d cap %d\", m, len(m), cap(m))\n// slice [0 0 0] len 3 cap 4\n```\n\n说实话 `cap` 在使用中，并没有起到什么作用，肯定是我还了解的不够，以后明白了在更新上。\n\n\n## 作为函数参数\n\n```go\nfunc Test(a []int) {\n\tfmt.Println(a)\n}\na := []int{1, 2}\nTest(a)     // [1 2]\n```\n\n## 方法\n\n通过 Go 的一些内置方法可以更好的操作数组\n\n**append**\n\n数组长度不可更改，但是我们可以通过 `append` 方法返回一个新数组，并添加上元素。\n\n```go\na := []int{1, 2}\na = append(a, 1)\nfmt.Println(a)      // [1 2]\n\na = append(a, 3, 4)\nfmt.Println(a)      // [1 2 3 4]\n```\n\n当 `append` 的第一个参数为切片时，可以另一个数组或切片的数据整个添加过来。\n\n```go\na := []int{1, 2}\nb := []int{3, 4}\nfmt.Println(append(a[:], b...)) // [1 2 3 4]\n```\n\n**delete**\n\nGo 中貌似是没有数组的删除方法的，不过我们可以利用 `append` 来实现这个功能。\n\n```go\nfunc Remove(slice []int, s int) []int {\n    return append(slice[:s], slice[s+1:]...)\n}\n\na := []int{1, 2}\na = Remove(a, 0)\nfmt.Println(a)      // [2]\n```\n\n**copy**\n\n```go\nvar n = []int{1, 2}\nvar l = make([]int, len(n), cap(n) * 2)\ncopy(l, n)\nfmt.Println(l)  // [1 2]\n```\n\n- [Go 循环语句](/2018/08/24/go-loops/)\n","slug":"go-array-go","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2agc00kl5gqo4fl9e7ry"},{"title":"Go 字典 map","date":"2018-08-11T18:35:46.000Z","_content":"\nGo 字典的叫法跟 Java 类似为 map。\n\n<!-- more --><!-- toc -->\n\n## 初始化\n\n初始化空 map，并赋值\n```go\nvar m1 = make(map[string]string)\n<!-- var m3 map[string]string -->\nfmt.Println(m1)     // map[]\n\nm1[\"name\"] = \"wxnacy\"\nfmt.Println(m1)     // map[name:wxnacy]\n```\n\n初始化并赋值\n\n```go\nm2 := map[string]string{\"name\": \"wxnacy\"}\nfmt.Println(m2)     // map[name:wxnacy]\n```\n\n## 方法\n\n**delete**\n\n```go\ndelete(m2, \"name\")\nfmt.Println(m2)     // map[]\n```\n\n- [Go 循环语句](/2018/08/24/go-loops/)\n","source":"_posts/2018-08-11-go-map.md","raw":"---\ntitle: Go 字典 map\ndate: 2018-08-11 18:35:46\ntags: [go]\n---\n\nGo 字典的叫法跟 Java 类似为 map。\n\n<!-- more --><!-- toc -->\n\n## 初始化\n\n初始化空 map，并赋值\n```go\nvar m1 = make(map[string]string)\n<!-- var m3 map[string]string -->\nfmt.Println(m1)     // map[]\n\nm1[\"name\"] = \"wxnacy\"\nfmt.Println(m1)     // map[name:wxnacy]\n```\n\n初始化并赋值\n\n```go\nm2 := map[string]string{\"name\": \"wxnacy\"}\nfmt.Println(m2)     // map[name:wxnacy]\n```\n\n## 方法\n\n**delete**\n\n```go\ndelete(m2, \"name\")\nfmt.Println(m2)     // map[]\n```\n\n- [Go 循环语句](/2018/08/24/go-loops/)\n","slug":"go-map","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2agd00ko5gqottj2tw4t"},{"title":"Iframe 父子页面元素调用","date":"2018-08-05T11:08:52.000Z","_content":"\n了解下 iframe 父子页面元素调用的几种方法。\n\n<!-- more --><!-- toc -->\n\n## 获取 iframe 内元素\n\n- **Javascript**\n\n```javascript\n// 方法1\nlet text = document.getElementById(\"iframeId\").contentWindow.document.getElementById(\"iframe 内元素 id\").value;\n// 方法2\nlet text = window.frames['frameName'].document.getElementById(\"iframe 内元素 id\").value;\n```\n\n- **jquery**\n\n```javascript\n// 方法3\nlet text = $(\"#iframeId\").contents().find(\"#iframe 内元素 id\").val();\n// 方法4\nlet text = $(\"#iframe 内元素 id\", window.frames[\"frameName\"].document).val();\n```\n\n## 获取 iframe 外元素\n\n\n```javascript\n// 方法1 javascript\nlet text = window.parent.document.getElementById('iframe 外元素 id').value;\n// 方法2 jquery\nlet text = $('#iframe 外元素 id', parent.document).val();\n```\n\n## 调用 iframe 外方法\n\n```java\nparent.iframeOutFunc()\n```\n","source":"_posts/2018-08-05-iframe-parent-sun.md","raw":"---\ntitle: Iframe 父子页面元素调用\ndate: 2018-08-05 11:08:52\ntags: [javascript, jquery]\n---\n\n了解下 iframe 父子页面元素调用的几种方法。\n\n<!-- more --><!-- toc -->\n\n## 获取 iframe 内元素\n\n- **Javascript**\n\n```javascript\n// 方法1\nlet text = document.getElementById(\"iframeId\").contentWindow.document.getElementById(\"iframe 内元素 id\").value;\n// 方法2\nlet text = window.frames['frameName'].document.getElementById(\"iframe 内元素 id\").value;\n```\n\n- **jquery**\n\n```javascript\n// 方法3\nlet text = $(\"#iframeId\").contents().find(\"#iframe 内元素 id\").val();\n// 方法4\nlet text = $(\"#iframe 内元素 id\", window.frames[\"frameName\"].document).val();\n```\n\n## 获取 iframe 外元素\n\n\n```javascript\n// 方法1 javascript\nlet text = window.parent.document.getElementById('iframe 外元素 id').value;\n// 方法2 jquery\nlet text = $('#iframe 外元素 id', parent.document).val();\n```\n\n## 调用 iframe 外方法\n\n```java\nparent.iframeOutFunc()\n```\n","slug":"iframe-parent-sun","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2agf00kq5gqokrwejqj3"},{"title":"Go 条件语句","date":"2018-08-13T14:55:12.000Z","_content":"\nGo 语言中条件语句和 Java 即为相似，只是少了一对小括号。\n\n<!-- more --><!-- toc -->\n\n## if\n\n```go\na := 1\nif a > 0 {\n    fmt.Println(\"> 0\")\n} else {\n    fmt.Println(\"< 0\")\n}\n```\n\n```go\nif a := 1;a > 0 {\n    fmt.Println(\"> 0\")\n} else {\n    fmt.Println(\"< 0\")\n}\n```\n\n## switch\n\nswitch 语句用于基于不同条件执行不同动作，每一个 case 分支都是唯一的，从上直下逐一测试，直到匹配为止。。\n\nswitch 语句执行的过程从上至下，直到找到匹配项，匹配项后面也不需要再加break\n\n\n```go\na := 1\nvar c string\n\nswitch a {\n    case 1:\n        c = \"1\"\n    case 2:\n        c = \"2\"\n    default:\n        c = \"default\"\n}\nfmt.Println(c)\n```\n\n- [Go 语言条件语句](http://www.runoob.com/go/go-decision-making.html)\n","source":"_posts/2018-08-13-go-decision.md","raw":"---\ntitle: Go 条件语句\ndate: 2018-08-13 14:55:12\ntags: [go]\n---\n\nGo 语言中条件语句和 Java 即为相似，只是少了一对小括号。\n\n<!-- more --><!-- toc -->\n\n## if\n\n```go\na := 1\nif a > 0 {\n    fmt.Println(\"> 0\")\n} else {\n    fmt.Println(\"< 0\")\n}\n```\n\n```go\nif a := 1;a > 0 {\n    fmt.Println(\"> 0\")\n} else {\n    fmt.Println(\"< 0\")\n}\n```\n\n## switch\n\nswitch 语句用于基于不同条件执行不同动作，每一个 case 分支都是唯一的，从上直下逐一测试，直到匹配为止。。\n\nswitch 语句执行的过程从上至下，直到找到匹配项，匹配项后面也不需要再加break\n\n\n```go\na := 1\nvar c string\n\nswitch a {\n    case 1:\n        c = \"1\"\n    case 2:\n        c = \"2\"\n    default:\n        c = \"default\"\n}\nfmt.Println(c)\n```\n\n- [Go 语言条件语句](http://www.runoob.com/go/go-decision-making.html)\n","slug":"go-decision","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2agg00ks5gqo6szemv2h"},{"title":"Javascript 实现复制功能","date":"2018-08-18T13:37:47.000Z","_content":"\n在 Javascript 中使用 `document.execCommand` 方法可以将目标文字复制到剪切板中。\n\n<!-- more --><!-- toc -->\n\n## 复制输入域的数据\n\n```javascript\n<input id=\"demoInput\" value=\"hello world\">\n<button id=\"btn\">点我复制</button><br/>\n<script>\n    const btn = document.querySelector('#btn');\n    btn.addEventListener('click', () => {\n        const input = document.querySelector('#demoInput');\n        input.select();\n        if (document.execCommand('copy')) {\n            document.execCommand('copy');\n            console.log('复制成功');\n        }\n    })\n</script>\n```\n[试一试](/run/?id=68719515008)\n\n## 其他 element 复制\n\n`document.execCommand` 只能复制输入域的内容，如 `input` `textarea`，而其他的 element 内容复制，只能通过借用 input 的方式来完成。\n\n将想要复制的内容添加到一个隐藏的 `input` 中，再次进行上面的步骤即可。\n\n```javascript\n<div id=\"div\" style=\"border-style: solid;\">这次是 div 的内容</div>\n<button id=\"btn1\">点我复制</button>\n<script>\n    const btn1 = document.querySelector('#btn1');\n    btn1.addEventListener('click', () => {\n        const input = document.createElement('input');\n        const div = document.querySelector('#div');\n        input.setAttribute('readonly', 'readonly');\n        input.setAttribute('value', `${div.innerHTML}`);\n        document.body.appendChild(input);\n        input.select();\n        // input.setSelectionRange(0, input.value.length);\n        if (document.execCommand('copy')) {\n            document.execCommand('copy');\n            console.log('复制成功');\n        }\n        document.body.removeChild(input);\n    })\n</script>\n```\n\n[试一试](/run/?id=68719515008)\n\n- [JavaScript复制内容到剪贴板](https://github.com/axuebin/articles/issues/26)\n","source":"_posts/2018-08-18-js-copy.md","raw":"---\ntitle: Javascript 实现复制功能\ndate: 2018-08-18 13:37:47\ntags: [javascript]\n---\n\n在 Javascript 中使用 `document.execCommand` 方法可以将目标文字复制到剪切板中。\n\n<!-- more --><!-- toc -->\n\n## 复制输入域的数据\n\n```javascript\n<input id=\"demoInput\" value=\"hello world\">\n<button id=\"btn\">点我复制</button><br/>\n<script>\n    const btn = document.querySelector('#btn');\n    btn.addEventListener('click', () => {\n        const input = document.querySelector('#demoInput');\n        input.select();\n        if (document.execCommand('copy')) {\n            document.execCommand('copy');\n            console.log('复制成功');\n        }\n    })\n</script>\n```\n[试一试](/run/?id=68719515008)\n\n## 其他 element 复制\n\n`document.execCommand` 只能复制输入域的内容，如 `input` `textarea`，而其他的 element 内容复制，只能通过借用 input 的方式来完成。\n\n将想要复制的内容添加到一个隐藏的 `input` 中，再次进行上面的步骤即可。\n\n```javascript\n<div id=\"div\" style=\"border-style: solid;\">这次是 div 的内容</div>\n<button id=\"btn1\">点我复制</button>\n<script>\n    const btn1 = document.querySelector('#btn1');\n    btn1.addEventListener('click', () => {\n        const input = document.createElement('input');\n        const div = document.querySelector('#div');\n        input.setAttribute('readonly', 'readonly');\n        input.setAttribute('value', `${div.innerHTML}`);\n        document.body.appendChild(input);\n        input.select();\n        // input.setSelectionRange(0, input.value.length);\n        if (document.execCommand('copy')) {\n            document.execCommand('copy');\n            console.log('复制成功');\n        }\n        document.body.removeChild(input);\n    })\n</script>\n```\n\n[试一试](/run/?id=68719515008)\n\n- [JavaScript复制内容到剪贴板](https://github.com/axuebin/articles/issues/26)\n","slug":"js-copy","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2agi00kv5gqoutuelqbf"},{"title":"Go 结构体","date":"2018-08-14T16:41:35.000Z","_content":"\n在 Go 语言中类似 Java 类的概念叫做结构体，使用 `type, struct` 两个关键词修饰\n\n<!-- more --><!-- toc -->\n\n## 开始\n\n### 定义结构体\n```go\ntype User struct {\n    Id int\n    Name String\n}\n```\n\n结构体的属性希望被外部访问则首字母大写，否则小写。\n\n### 实例化\n\n结构体实例化有很多种方式\n\n- **普通实例化**\n\n```go\nvar a User\nfmt.Println(a)              // {0 }\na.Id = 1\nfmt.Println(a)              // {1 }\n```\n\n```go\na := User{1, \"wxnacy\"}\nfmt.Println(a)              // {1 wxnacy}\n```\n\n```go\na := User(Id: 1, Name: \"wxnacy\")\nfmt.Println(a)              // {1 wxnacy}\na = User(Name: \"wxnacy\")\nfmt.Println(a)              // {wxnacy}\n```\n\n- **指针实例化**\n\n使用 `new(T)` 或者 `$T{}` 的方式实例化，并返回指针\n\n```go\na := new(User)\nfmt.Println(a)              // &{0 }\n```\n\n```go\na := &User{1, \"wxnacy\"}\nfmt.Println(a)              // &{1 wxnacy}\n```\n\n### 访问成员变量\n\n```go\na := User{1 \"wxnacy\"}\nfmt.Println(a.Id)           // 1\nfmt.Println(a.Name)         // wxnacy\n```\n\n## 定义结构体方法\n\n结构体的方法不像 Java 一样是写在类内部的，反而像 Javascript 一样是写在外部的。\n\n```go\nfunc (this User) ToString string{\n    return fmt.Sprintf(\"User Id: %d, Name: %s\", u.Id, u.Name)\n}\n```\n\n访问\n\n```go\nu := User{1, \"wxnacy\"}\nfmt.Println(u.ToString())   // User Id: 1, Name: wxnacy\n```\n\n方法名 `ToString` 前面的形参是实例化后的结构体将本身拷贝出一份传入的，所以如果想在方法内修改结构体的属性值，需要将形参改为指针。\n\n```go\nfunc (this *User) SetId(id int){\n    this.Id = id\n}\n```\n\n**即使将结构体实例化为指针，也要这样写，应为传入的拷贝是普通实例化的数据**\n\n## 继承\n\n```go\ntype Human struct {\n    Msg string\n}\n\nfunc (this Human) ToString() string {\n    return this.Msg\n}\n\ntype Man struct {\n    Human\n}\n\n```\n\n结构体 Man 将 Human 作为成员定义在成员列表即可\n\n```go\nh := Human{Msg: \"I am a Human\"}\nfmt.Println(h.ToString())\nm := Man{Human{Msg: \"I am a Man\"}}\nfmt.Println(m.ToString())\n```\n","source":"_posts/2018-08-14-go-struct.md","raw":"---\ntitle: Go 结构体\ndate: 2018-08-14 16:41:35\ntags: [go]\n---\n\n在 Go 语言中类似 Java 类的概念叫做结构体，使用 `type, struct` 两个关键词修饰\n\n<!-- more --><!-- toc -->\n\n## 开始\n\n### 定义结构体\n```go\ntype User struct {\n    Id int\n    Name String\n}\n```\n\n结构体的属性希望被外部访问则首字母大写，否则小写。\n\n### 实例化\n\n结构体实例化有很多种方式\n\n- **普通实例化**\n\n```go\nvar a User\nfmt.Println(a)              // {0 }\na.Id = 1\nfmt.Println(a)              // {1 }\n```\n\n```go\na := User{1, \"wxnacy\"}\nfmt.Println(a)              // {1 wxnacy}\n```\n\n```go\na := User(Id: 1, Name: \"wxnacy\")\nfmt.Println(a)              // {1 wxnacy}\na = User(Name: \"wxnacy\")\nfmt.Println(a)              // {wxnacy}\n```\n\n- **指针实例化**\n\n使用 `new(T)` 或者 `$T{}` 的方式实例化，并返回指针\n\n```go\na := new(User)\nfmt.Println(a)              // &{0 }\n```\n\n```go\na := &User{1, \"wxnacy\"}\nfmt.Println(a)              // &{1 wxnacy}\n```\n\n### 访问成员变量\n\n```go\na := User{1 \"wxnacy\"}\nfmt.Println(a.Id)           // 1\nfmt.Println(a.Name)         // wxnacy\n```\n\n## 定义结构体方法\n\n结构体的方法不像 Java 一样是写在类内部的，反而像 Javascript 一样是写在外部的。\n\n```go\nfunc (this User) ToString string{\n    return fmt.Sprintf(\"User Id: %d, Name: %s\", u.Id, u.Name)\n}\n```\n\n访问\n\n```go\nu := User{1, \"wxnacy\"}\nfmt.Println(u.ToString())   // User Id: 1, Name: wxnacy\n```\n\n方法名 `ToString` 前面的形参是实例化后的结构体将本身拷贝出一份传入的，所以如果想在方法内修改结构体的属性值，需要将形参改为指针。\n\n```go\nfunc (this *User) SetId(id int){\n    this.Id = id\n}\n```\n\n**即使将结构体实例化为指针，也要这样写，应为传入的拷贝是普通实例化的数据**\n\n## 继承\n\n```go\ntype Human struct {\n    Msg string\n}\n\nfunc (this Human) ToString() string {\n    return this.Msg\n}\n\ntype Man struct {\n    Human\n}\n\n```\n\n结构体 Man 将 Human 作为成员定义在成员列表即可\n\n```go\nh := Human{Msg: \"I am a Human\"}\nfmt.Println(h.ToString())\nm := Man{Human{Msg: \"I am a Man\"}}\nfmt.Println(m.ToString())\n```\n","slug":"go-struct","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2agj00kx5gqovteexstg"},{"title":"Go byte 和 string 的相互转换","date":"2018-08-15T15:26:58.000Z","_content":"\n本章简单了解下 Go 语言中 byte 和 string 的相互转换\n\n<!-- more --><!-- toc -->\n\n## 普通字符串\n\n**string to byte**\n\n```go\nb := []byte(s)\n```\n\n**byte to string**\n\n```go\ns := string(b)\n```\n\n## 十六进制字符串\n\n需要引入包\n\n```go\nimport \"encoding/hex\"\n```\n\n**hex string to byte**\n\n```go\nb, err := hex.DecodeString(s)\n```\n\n**byte to hex string**\n\n```go\ns := hex.EncodeToString(b)\n```\n\n另外利用 `fmt` 包的格式化也可以将字节转为十六进制字符串\n\n```go\ns := fmt.Strintf(\"%x\", b)\n```\n\n- [hex](https://golang.org/pkg/encoding/hex/)\n","source":"_posts/2018-08-15-go-byte-string.md","raw":"---\ntitle: Go byte 和 string 的相互转换\ndate: 2018-08-15 15:26:58\ntags: [go]\n---\n\n本章简单了解下 Go 语言中 byte 和 string 的相互转换\n\n<!-- more --><!-- toc -->\n\n## 普通字符串\n\n**string to byte**\n\n```go\nb := []byte(s)\n```\n\n**byte to string**\n\n```go\ns := string(b)\n```\n\n## 十六进制字符串\n\n需要引入包\n\n```go\nimport \"encoding/hex\"\n```\n\n**hex string to byte**\n\n```go\nb, err := hex.DecodeString(s)\n```\n\n**byte to hex string**\n\n```go\ns := hex.EncodeToString(b)\n```\n\n另外利用 `fmt` 包的格式化也可以将字节转为十六进制字符串\n\n```go\ns := fmt.Strintf(\"%x\", b)\n```\n\n- [hex](https://golang.org/pkg/encoding/hex/)\n","slug":"go-byte-string","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2agl00l05gqo4g4ai22x"},{"title":"Go 语法错误：Non-declaration statement outside function body","date":"2018-08-16T15:25:50.000Z","_content":"\n\n编程语言都是相通的，但也很多意想不到的不同，比如今天就碰见一个语法错误。\n\n<!-- more --><!-- toc -->\n运行如下代码会报错误\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n)\n\nb := 1\n\nfunc main() {\n    fmt.Println(b)\n}\n```\n\n```bash\nsyntax error: non-declaration statement outside function body\n```\n\n原因在于 `:=` 只能用于方法内，当定义全局变量时只能通过 `var` 关键字来定义\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n)\n\nvar b = 1\n\nfunc main() {\n    fmt.Println(b)\n}\n```\n\n- [Non-declaration statement outside function body in Go](https://stackoverflow.com/questions/20508356/non-declaration-statement-outside-function-body-in-go)\n","source":"_posts/2018-08-16-go-syntax-error2.md","raw":"---\ntitle: Go 语法错误：Non-declaration statement outside function body\ntags:\n  - go\ndate: 2018-08-16 15:25:50\n---\n\n\n编程语言都是相通的，但也很多意想不到的不同，比如今天就碰见一个语法错误。\n\n<!-- more --><!-- toc -->\n运行如下代码会报错误\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n)\n\nb := 1\n\nfunc main() {\n    fmt.Println(b)\n}\n```\n\n```bash\nsyntax error: non-declaration statement outside function body\n```\n\n原因在于 `:=` 只能用于方法内，当定义全局变量时只能通过 `var` 关键字来定义\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n)\n\nvar b = 1\n\nfunc main() {\n    fmt.Println(b)\n}\n```\n\n- [Non-declaration statement outside function body in Go](https://stackoverflow.com/questions/20508356/non-declaration-statement-outside-function-body-in-go)\n","slug":"go-syntax-error2","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2agm00l25gqogatgh80c"},{"title":"Python 使用 pycrypto 进行 rsa 公私钥加解密和签名验证","date":"2018-08-17T16:43:08.000Z","_content":"\n公私钥加密是现在公认最安全的加密方式。因为普通的对称加密方式，加密和解密是用相同的秘钥来进行的，那不管这个算法多么复杂，只要你需要将秘钥发送给解密方，这个秘钥就一定可能会泄露给第三方，为此我们只能定期更改秘钥来减少加密信息被破解的几率，但这明显不是一个很好的方法。\n\n<!-- more --><!-- toc -->\n如果你的数据需要绝对的保密，那已经要选用公私钥加密的方式，简单来说公私钥的原理为：\n\n- 公钥加密，私钥解密\n- 私钥签名，公钥验证\n\n\n## 生成秘钥\n\n在 Unix 系统中可以很方便的生成公私钥\n\n```bash\n$ ssh-keygen -t rsa -C \"your_email\"\n```\n\n使用你自己的邮箱，一路回车即可生成 `id_rsa, id_rsa.pub` 秘钥对，在目录 `~/.ssh` 中，你也可以根据提示生成自己想要的名字\n\n## 加解密\n\n很多人开始接触非对称加密时，经常分不清公私钥到底谁来加密谁来解密，其实只要搞清楚公私钥由谁来保管就行了。\n\n公钥，顾名思义是可以公之于众的秘钥，理论上谁都可以拿到。如果公钥可以解密的话，那岂不是跟用明文没什么区别了吗？\n\n而私钥，只有我自己可以拥有，那密文也就只有我自己能破解。\n\n假设我老婆要对我说，我爱你，但是她不想让别人听见，所以使用了我给她的公钥对其进行加密，私钥只在我这里，所以即使任何人拿到公钥和密文都不能听到这句话。\n\n在 Python 中使用 `pycrypto` 模块可以进行公私钥的加解密算法。\n\n**下载**\n\n```bash\n$ pip install pycrypto\n```\n\n**代码**\n\npy 版本 3.5+\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom Crypto import Random\nfrom Crypto.Hash import SHA\nfrom Crypto.Cipher import PKCS1_v1_5 as Cipher_pkcs1_v1_5\nfrom Crypto.Signature import PKCS1_v1_5 as Signature_pkcs1_v1_5\nfrom Crypto.PublicKey import RSA\nimport base64\n\n# 伪随机数生成器\nrandom_generator = Random.new().read\n# rsa算法生成实例\nrsa = RSA.generate(1024, random_generator)\n\ndef encrypt(message, pub_rsa_path):\n    '''使用公钥加密'''\n    with open(pub_rsa_path) as f:\n        key = f.read()\n        rsakey = RSA.importKey(key)\n        cipher = Cipher_pkcs1_v1_5.new(rsakey)\n        cipher_text = base64.b64encode(cipher.encrypt(message.encode()))\n        return cipher_text\n\ndef decrypt(secret_message, rsa_path):\n    '''使用私钥解密'''\n    with open(rsa_path) as f:\n        key = f.read()\n        rsakey = RSA.importKey(key)\n        cipher = Cipher_pkcs1_v1_5.new(rsakey)\n        text = cipher.decrypt(base64.b64decode(secret_message), random_generator)\n        return text\n\n\nif __name__ == \"__main__\":\n    plain = 'message'\n    pub_rsa_path = '/Users/wxnacy/.ssh/id_rsa.pub'\n    rsa_path = '/Users/wxnacy/.ssh/id_rsa'\n\n    print('明文：', plain)\n    secret = encrypt(plain, pub_rsa_path)\n    print('加密文：', secret)\n    text = decrypt(secret, rsa_path)\n    print('解密文：', text)\n\n```\n\n## 签名验证\n\n刚才说了，随便有个公钥的人对信息加密，我就能进行解密，那公钥是公开的，我怎么知道解密的明文是我老婆要对我说的话呢，万一是谁朝我借钱怎么办。\n\n这时候我老婆需要对“我爱你”进行签名，我解密出明文后，要对签名进行验证，验证通过后，我就知道这确实是我老婆说的话了。\n\n签名的公私钥顺序跟加密是反过来的，我老婆在自己的机器上也生成一对秘钥，然后将公钥给我，私钥保留，然后她用私钥签名，我用公钥验证，这时候虽然任何人拿到公钥都可以验证，但是不能拿到明文，只是验证明文没有被篡改。\n\n这样我们双方互换公钥，各自保留私钥，加密和签名双管齐下，互发消息都可以做到非常安全。\n\n\n**代码**\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom Crypto import Random\nfrom Crypto.Hash import SHA\nfrom Crypto.Cipher import PKCS1_v1_5 as Cipher_pkcs1_v1_5\nfrom Crypto.Signature import PKCS1_v1_5 as Signature_pkcs1_v1_5\nfrom Crypto.PublicKey import RSA\nimport base64\n\n# 伪随机数生成器\nrandom_generator = Random.new().read\n# rsa算法生成实例\nrsa = RSA.generate(1024, random_generator)\n\ndef signature(message, rsa_path):\n    '''使用私钥签名'''\n    with open(rsa_path) as f:\n        key = f.read()\n        rsakey = RSA.importKey(key)\n        signer = Signature_pkcs1_v1_5.new(rsakey)\n        digest = SHA.new()\n        digest.update(message.encode())\n        sign = signer.sign(digest)\n        signature = base64.b64encode(sign)\n\n        return signature\n\ndef verify_signature(message, signature, pub_rsa_path):\n    '''验证签名'''\n    with open(pub_rsa_path) as f:\n        key = f.read()\n        rsakey = RSA.importKey(key)\n        verifier = Signature_pkcs1_v1_5.new(rsakey)\n        digest = SHA.new()\n        # Assumes the data is base64 encoded to begin with\n        digest.update(message.encode())\n        print(digest)\n        is_verify = verifier.verify(digest, base64.b64decode(signature))\n        return is_verify\n\n\nif __name__ == \"__main__\":\n    plain = 'message'\n\n    sign_pub_rsa_path = '/Users/wxnacy/.ssh/test_gmail_rsa.pub'\n    sign_rsa_path = '/Users/wxnacy/.ssh/test_gmail_rsa'\n\n    sign = signature(plain, sign_rsa_path)\n    print('签名：', sign)\n    flag = verify_signature(plain, sign, sign_pub_rsa_path)\n    print('验证结果：', flag)\n```\n\n[demo](https://github.com/wxnacy/study/blob/master/python/simple/rsa_encrypt.py)\n","source":"_posts/2018-08-17-python-pycrypto-rsa.md","raw":"---\ntitle: Python 使用 pycrypto 进行 rsa 公私钥加解密和签名验证\ndate: 2018-08-17 16:43:08\ntags: [python]\n---\n\n公私钥加密是现在公认最安全的加密方式。因为普通的对称加密方式，加密和解密是用相同的秘钥来进行的，那不管这个算法多么复杂，只要你需要将秘钥发送给解密方，这个秘钥就一定可能会泄露给第三方，为此我们只能定期更改秘钥来减少加密信息被破解的几率，但这明显不是一个很好的方法。\n\n<!-- more --><!-- toc -->\n如果你的数据需要绝对的保密，那已经要选用公私钥加密的方式，简单来说公私钥的原理为：\n\n- 公钥加密，私钥解密\n- 私钥签名，公钥验证\n\n\n## 生成秘钥\n\n在 Unix 系统中可以很方便的生成公私钥\n\n```bash\n$ ssh-keygen -t rsa -C \"your_email\"\n```\n\n使用你自己的邮箱，一路回车即可生成 `id_rsa, id_rsa.pub` 秘钥对，在目录 `~/.ssh` 中，你也可以根据提示生成自己想要的名字\n\n## 加解密\n\n很多人开始接触非对称加密时，经常分不清公私钥到底谁来加密谁来解密，其实只要搞清楚公私钥由谁来保管就行了。\n\n公钥，顾名思义是可以公之于众的秘钥，理论上谁都可以拿到。如果公钥可以解密的话，那岂不是跟用明文没什么区别了吗？\n\n而私钥，只有我自己可以拥有，那密文也就只有我自己能破解。\n\n假设我老婆要对我说，我爱你，但是她不想让别人听见，所以使用了我给她的公钥对其进行加密，私钥只在我这里，所以即使任何人拿到公钥和密文都不能听到这句话。\n\n在 Python 中使用 `pycrypto` 模块可以进行公私钥的加解密算法。\n\n**下载**\n\n```bash\n$ pip install pycrypto\n```\n\n**代码**\n\npy 版本 3.5+\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom Crypto import Random\nfrom Crypto.Hash import SHA\nfrom Crypto.Cipher import PKCS1_v1_5 as Cipher_pkcs1_v1_5\nfrom Crypto.Signature import PKCS1_v1_5 as Signature_pkcs1_v1_5\nfrom Crypto.PublicKey import RSA\nimport base64\n\n# 伪随机数生成器\nrandom_generator = Random.new().read\n# rsa算法生成实例\nrsa = RSA.generate(1024, random_generator)\n\ndef encrypt(message, pub_rsa_path):\n    '''使用公钥加密'''\n    with open(pub_rsa_path) as f:\n        key = f.read()\n        rsakey = RSA.importKey(key)\n        cipher = Cipher_pkcs1_v1_5.new(rsakey)\n        cipher_text = base64.b64encode(cipher.encrypt(message.encode()))\n        return cipher_text\n\ndef decrypt(secret_message, rsa_path):\n    '''使用私钥解密'''\n    with open(rsa_path) as f:\n        key = f.read()\n        rsakey = RSA.importKey(key)\n        cipher = Cipher_pkcs1_v1_5.new(rsakey)\n        text = cipher.decrypt(base64.b64decode(secret_message), random_generator)\n        return text\n\n\nif __name__ == \"__main__\":\n    plain = 'message'\n    pub_rsa_path = '/Users/wxnacy/.ssh/id_rsa.pub'\n    rsa_path = '/Users/wxnacy/.ssh/id_rsa'\n\n    print('明文：', plain)\n    secret = encrypt(plain, pub_rsa_path)\n    print('加密文：', secret)\n    text = decrypt(secret, rsa_path)\n    print('解密文：', text)\n\n```\n\n## 签名验证\n\n刚才说了，随便有个公钥的人对信息加密，我就能进行解密，那公钥是公开的，我怎么知道解密的明文是我老婆要对我说的话呢，万一是谁朝我借钱怎么办。\n\n这时候我老婆需要对“我爱你”进行签名，我解密出明文后，要对签名进行验证，验证通过后，我就知道这确实是我老婆说的话了。\n\n签名的公私钥顺序跟加密是反过来的，我老婆在自己的机器上也生成一对秘钥，然后将公钥给我，私钥保留，然后她用私钥签名，我用公钥验证，这时候虽然任何人拿到公钥都可以验证，但是不能拿到明文，只是验证明文没有被篡改。\n\n这样我们双方互换公钥，各自保留私钥，加密和签名双管齐下，互发消息都可以做到非常安全。\n\n\n**代码**\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom Crypto import Random\nfrom Crypto.Hash import SHA\nfrom Crypto.Cipher import PKCS1_v1_5 as Cipher_pkcs1_v1_5\nfrom Crypto.Signature import PKCS1_v1_5 as Signature_pkcs1_v1_5\nfrom Crypto.PublicKey import RSA\nimport base64\n\n# 伪随机数生成器\nrandom_generator = Random.new().read\n# rsa算法生成实例\nrsa = RSA.generate(1024, random_generator)\n\ndef signature(message, rsa_path):\n    '''使用私钥签名'''\n    with open(rsa_path) as f:\n        key = f.read()\n        rsakey = RSA.importKey(key)\n        signer = Signature_pkcs1_v1_5.new(rsakey)\n        digest = SHA.new()\n        digest.update(message.encode())\n        sign = signer.sign(digest)\n        signature = base64.b64encode(sign)\n\n        return signature\n\ndef verify_signature(message, signature, pub_rsa_path):\n    '''验证签名'''\n    with open(pub_rsa_path) as f:\n        key = f.read()\n        rsakey = RSA.importKey(key)\n        verifier = Signature_pkcs1_v1_5.new(rsakey)\n        digest = SHA.new()\n        # Assumes the data is base64 encoded to begin with\n        digest.update(message.encode())\n        print(digest)\n        is_verify = verifier.verify(digest, base64.b64decode(signature))\n        return is_verify\n\n\nif __name__ == \"__main__\":\n    plain = 'message'\n\n    sign_pub_rsa_path = '/Users/wxnacy/.ssh/test_gmail_rsa.pub'\n    sign_rsa_path = '/Users/wxnacy/.ssh/test_gmail_rsa'\n\n    sign = signature(plain, sign_rsa_path)\n    print('签名：', sign)\n    flag = verify_signature(plain, sign, sign_pub_rsa_path)\n    print('验证结果：', flag)\n```\n\n[demo](https://github.com/wxnacy/study/blob/master/python/simple/rsa_encrypt.py)\n","slug":"python-pycrypto-rsa","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2agn00l45gqoyfcuj55b"},{"title":"Go 结构体、数组、字典和 json 字符串的相互转换","date":"2018-08-19T15:48:33.000Z","_content":"\nGo 语言中 `encoding/json` 包可以很方便的将结构体、数组、字典转换为 json 字符串。\n\n<!-- more --><!-- toc -->\n\n**引用**\n\n```go\nimport \"encoding/json\"\n```\n\n**语法**\n\n- 解析\n\n```go\n// v 传入结构体、数组等实例变量\n// []byte 字节数组\n// error 可能会有的错误\nfunc Marshal(v interface{}) ([]byte, error)\n```\n\n- 反解析\n\n```go\n// []byte 字节数组\n// v 传入结构体、数组等实例变量的指针地址\n// error 可能会有的错误\nfunc Unmarshal(data []byte, v interface{}) error\n```\n\n**代码**\n\n```go\npackage main\n\n// https://golang.org/pkg/encoding/json/\n// https://cloud.tencent.com/developer/section/1141542#stage-100023262\n\nimport (\n    \"fmt\"\n    \"encoding/json\"\n)\n\ntype User struct {\n    Id int `json:\"id\"`\n    Name string `json:\"name\"`\n}\n\nfunc main() {\n    // 字符串解析为结构体\n    s := `{\"id\": 1, \"name\": \"wxnacy\"}`\n\n    var user User\n    // 将字符串反解析为结构体\n    json.Unmarshal([]byte(s), &user)\n    fmt.Println(user)   // {1 wxnacy}\n\n    var d map[string]interface{}\n    // 将字符串反解析为字典\n    json.Unmarshal([]byte(s), &d)\n    fmt.Println(d)      // map[id:1 name:wxnacy]\n\n\n    s = `[1, 2, 3, 4]`\n    var a []int\n    // 将字符串反解析为数组\n    json.Unmarshal([]byte(s), &a)\n    fmt.Println(a)      // [1 2 3 4]\n\n    // 将结构体解析为字符串\n    b, e := json.Marshal(user)\n    fmt.Println(e)\n    fmt.Println(string(b))  // {\"id\":1,\"name\":\"wxnacy\"}\n\n    b, e = json.Marshal(a)\n    fmt.Println(string(b), e)   // [1,2,3,4] <nil>\n\n    b, e = json.Marshal(d)\n    fmt.Println(string(b), e)   // {\"id\":1,\"name\":\"wxnacy\"} <nil>\n}\n```\n\n- [Package json](https://golang.org/pkg/encoding/json/)\n","source":"_posts/2018-08-19-go-struct-to-json.md","raw":"---\ntitle: Go 结构体、数组、字典和 json 字符串的相互转换\ndate: 2018-08-19 15:48:33\ntags: [go]\n---\n\nGo 语言中 `encoding/json` 包可以很方便的将结构体、数组、字典转换为 json 字符串。\n\n<!-- more --><!-- toc -->\n\n**引用**\n\n```go\nimport \"encoding/json\"\n```\n\n**语法**\n\n- 解析\n\n```go\n// v 传入结构体、数组等实例变量\n// []byte 字节数组\n// error 可能会有的错误\nfunc Marshal(v interface{}) ([]byte, error)\n```\n\n- 反解析\n\n```go\n// []byte 字节数组\n// v 传入结构体、数组等实例变量的指针地址\n// error 可能会有的错误\nfunc Unmarshal(data []byte, v interface{}) error\n```\n\n**代码**\n\n```go\npackage main\n\n// https://golang.org/pkg/encoding/json/\n// https://cloud.tencent.com/developer/section/1141542#stage-100023262\n\nimport (\n    \"fmt\"\n    \"encoding/json\"\n)\n\ntype User struct {\n    Id int `json:\"id\"`\n    Name string `json:\"name\"`\n}\n\nfunc main() {\n    // 字符串解析为结构体\n    s := `{\"id\": 1, \"name\": \"wxnacy\"}`\n\n    var user User\n    // 将字符串反解析为结构体\n    json.Unmarshal([]byte(s), &user)\n    fmt.Println(user)   // {1 wxnacy}\n\n    var d map[string]interface{}\n    // 将字符串反解析为字典\n    json.Unmarshal([]byte(s), &d)\n    fmt.Println(d)      // map[id:1 name:wxnacy]\n\n\n    s = `[1, 2, 3, 4]`\n    var a []int\n    // 将字符串反解析为数组\n    json.Unmarshal([]byte(s), &a)\n    fmt.Println(a)      // [1 2 3 4]\n\n    // 将结构体解析为字符串\n    b, e := json.Marshal(user)\n    fmt.Println(e)\n    fmt.Println(string(b))  // {\"id\":1,\"name\":\"wxnacy\"}\n\n    b, e = json.Marshal(a)\n    fmt.Println(string(b), e)   // [1,2,3,4] <nil>\n\n    b, e = json.Marshal(d)\n    fmt.Println(string(b), e)   // {\"id\":1,\"name\":\"wxnacy\"} <nil>\n}\n```\n\n- [Package json](https://golang.org/pkg/encoding/json/)\n","slug":"go-struct-to-json","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ago00l65gqovw119zk4"},{"title":"Go 语法错误：unexpected newline, expecting comma or }","date":"2018-08-20T15:25:46.000Z","_content":"\n\n编程语言都是相通的，但也很多意想不到的不同，比如今天就碰见一个语法错误。\n\n<!-- more --><!-- toc -->\n运行如下代码会报错误\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n)\n\nfunc main() {\n    var a = []int{\n        1\n    }\n    fmt.Println(a)\n}\n```\n\n```bash\nsyntax error: unexpected newline, expecting comma or }\n```\n\n原因在于数组想要进行多行编写时，最后一个元素后面需要加上一个逗号，如下即可\n\n```go\nfunc main() {\n    var a = []int{\n        1,\n    }\n    fmt.Println(a)\n}\n```\n\n- [syntax error: unexpected semicolon or newline, expecting }](https://stackoverflow.com/questions/9637483/syntax-error-unexpected-semicolon-or-newline-expecting)\n","source":"_posts/2018-08-20-go-syntax-error1.md","raw":"---\ntitle: 'Go 语法错误：unexpected newline, expecting comma or }'\ntags:\n  - go\ndate: 2018-08-20 15:25:46\n---\n\n\n编程语言都是相通的，但也很多意想不到的不同，比如今天就碰见一个语法错误。\n\n<!-- more --><!-- toc -->\n运行如下代码会报错误\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n)\n\nfunc main() {\n    var a = []int{\n        1\n    }\n    fmt.Println(a)\n}\n```\n\n```bash\nsyntax error: unexpected newline, expecting comma or }\n```\n\n原因在于数组想要进行多行编写时，最后一个元素后面需要加上一个逗号，如下即可\n\n```go\nfunc main() {\n    var a = []int{\n        1,\n    }\n    fmt.Println(a)\n}\n```\n\n- [syntax error: unexpected semicolon or newline, expecting }](https://stackoverflow.com/questions/9637483/syntax-error-unexpected-semicolon-or-newline-expecting)\n","slug":"go-syntax-error1","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2agp00l85gqo5xpmswds"},{"title":"Go 大小写和访问权限","date":"2018-08-21T15:04:37.000Z","_content":"\n\n在 Go 语言中，变量名，方法名都应该遵循驼峰命名法，不能出现下划线。这不是约定俗成，而是必须，因为这个访问权限息息相关。\n\n<!-- more --><!-- toc -->\n\n变量名首字母的大小写很重要，大写 `Name` 可以被外部访问，小写 `name` 不可被外部访问，即 **大写为公有变量，小写为私有变量**\n\n这是在结构体向 json 结构解析时发现的问题\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n    \"encoding/json\"\n)\n\ntype User struct {\n    Id int `json:\"id\"`\n    Name string `json:\"name\"`\n}\n\nfunc main() {\n    // 字符串解析为结构体\n    s := `{\"id\": 1, \"name\": \"wxnacy\"}`\n\n    var user User\n    json.Unmarshal([]byte(s), &user)\n    fmt.Println(user)   // {1 wxnacy}\n}\n```\n\n如果 `Id` 和 `Name` 变为小写，那 json 将无法将数据反解析 `User` 结构体。\n\n","source":"_posts/2018-08-21-go-daxiaoxie.md","raw":"---\ntitle: Go 大小写和访问权限\ntags:\n  - go\ndate: 2018-08-21 15:04:37\n---\n\n\n在 Go 语言中，变量名，方法名都应该遵循驼峰命名法，不能出现下划线。这不是约定俗成，而是必须，因为这个访问权限息息相关。\n\n<!-- more --><!-- toc -->\n\n变量名首字母的大小写很重要，大写 `Name` 可以被外部访问，小写 `name` 不可被外部访问，即 **大写为公有变量，小写为私有变量**\n\n这是在结构体向 json 结构解析时发现的问题\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n    \"encoding/json\"\n)\n\ntype User struct {\n    Id int `json:\"id\"`\n    Name string `json:\"name\"`\n}\n\nfunc main() {\n    // 字符串解析为结构体\n    s := `{\"id\": 1, \"name\": \"wxnacy\"}`\n\n    var user User\n    json.Unmarshal([]byte(s), &user)\n    fmt.Println(user)   // {1 wxnacy}\n}\n```\n\n如果 `Id` 和 `Name` 变为小写，那 json 将无法将数据反解析 `User` 结构体。\n\n","slug":"go-daxiaoxie","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2agq00la5gqot9at1p35"},{"title":"Go MD5、Hmac 等签名运算","date":"2018-08-22T15:37:33.000Z","_content":"\n\nGo 中签名运算非常简单，`crypto` 的子包可以完成所有功能。\n\n<!-- more --><!-- toc -->\n\n## MD5\n\n**引入包**\n\n```go\nimport \"crypto/md5\"\n```\n\n**字符串**\n\n有两种方式可以对字符串进行 md5 运算\n\n- **方法一**\n\n```go\nimport (\n    \"crypto/md5\"\n    \"fmt\"\n)\n\nfunc MD51(message string) string {\n    res := md5.Sum([]byte(message))\n    return fmt.Sprintf(\"%x\", res)\n}\n```\n\n- **方法二**\n\n```go\nimport (\n    \"crypto/md5\"\n    \"io\"\n    \"fmt\"\n)\n\nfunc MD52(message string) string {\n    h := md5.New()\n    io.WriteString(h, message)\n    return fmt.Sprintf(\"%x\", h.Sum(nil))\n}\n```\n\n**文件**\n\n```go\nimport (\n\t\"crypto/md5\"\n\t\"fmt\"\n    \"io\"\n    \"os\"\n    \"log\"\n)\n\nfunc MD5File(filePath string) string {\n    f, err := os.Open(filePath)\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\tdefer f.Close()\n\n\th := md5.New()\n\tif _, err := io.Copy(h, f); err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n    return fmt.Sprintf(\"%x\", h.Sum(nil))\n}\n```\n\n会了一种计算方式其他的都是这个套路，比如 sha1 只需要引入 `crypto/sha1` 包，然后将 md5 替换为 sha1 即可\n\n## Hmac\n\nHmac 算法在另一个包中可以实现\n\n**引入包**\n\n```go\nimport \"crypto/hmac\"\n```\n\n**HmacMD5算法**\n\nhmac 包需要借助 `md5, sha1` 等包一起实现相应算法\n\n```go\nimport (\n\t\"crypto/md5\"\n\t\"crypto/hmac\"\n\t\"fmt\"\n)\n\nfunc HmacMD5(message string, key string) string {\n    h := hmac.New(md5.New, []byte(key))\n    h.Write([]byte(message))\n    return fmt.Sprintf(\"%x\", h.Sum(nil))\n}\n```\n\n- [md5](https://golang.org/pkg/crypto/md5/)\n- [hmac](https://golang.org/pkg/crypto/hmac/)\n","source":"_posts/2018-08-22-go-md5-hmac.md","raw":"---\ntitle: Go MD5、Hmac 等签名运算\ntags:\n  - go\ndate: 2018-08-22 15:37:33\n---\n\n\nGo 中签名运算非常简单，`crypto` 的子包可以完成所有功能。\n\n<!-- more --><!-- toc -->\n\n## MD5\n\n**引入包**\n\n```go\nimport \"crypto/md5\"\n```\n\n**字符串**\n\n有两种方式可以对字符串进行 md5 运算\n\n- **方法一**\n\n```go\nimport (\n    \"crypto/md5\"\n    \"fmt\"\n)\n\nfunc MD51(message string) string {\n    res := md5.Sum([]byte(message))\n    return fmt.Sprintf(\"%x\", res)\n}\n```\n\n- **方法二**\n\n```go\nimport (\n    \"crypto/md5\"\n    \"io\"\n    \"fmt\"\n)\n\nfunc MD52(message string) string {\n    h := md5.New()\n    io.WriteString(h, message)\n    return fmt.Sprintf(\"%x\", h.Sum(nil))\n}\n```\n\n**文件**\n\n```go\nimport (\n\t\"crypto/md5\"\n\t\"fmt\"\n    \"io\"\n    \"os\"\n    \"log\"\n)\n\nfunc MD5File(filePath string) string {\n    f, err := os.Open(filePath)\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\tdefer f.Close()\n\n\th := md5.New()\n\tif _, err := io.Copy(h, f); err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n    return fmt.Sprintf(\"%x\", h.Sum(nil))\n}\n```\n\n会了一种计算方式其他的都是这个套路，比如 sha1 只需要引入 `crypto/sha1` 包，然后将 md5 替换为 sha1 即可\n\n## Hmac\n\nHmac 算法在另一个包中可以实现\n\n**引入包**\n\n```go\nimport \"crypto/hmac\"\n```\n\n**HmacMD5算法**\n\nhmac 包需要借助 `md5, sha1` 等包一起实现相应算法\n\n```go\nimport (\n\t\"crypto/md5\"\n\t\"crypto/hmac\"\n\t\"fmt\"\n)\n\nfunc HmacMD5(message string, key string) string {\n    h := hmac.New(md5.New, []byte(key))\n    h.Write([]byte(message))\n    return fmt.Sprintf(\"%x\", h.Sum(nil))\n}\n```\n\n- [md5](https://golang.org/pkg/crypto/md5/)\n- [hmac](https://golang.org/pkg/crypto/hmac/)\n","slug":"go-md5-hmac","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ags00lc5gqojg20lagf"},{"title":"Go 语法错误：main redeclared in this block","date":"2018-08-23T15:20:05.000Z","_content":"\n\n在同一个目录中我创建了两个文件\n\n<!-- more --><!-- toc -->\n\n**main.go**\n\n```go\npackage main\n\nimport \"fmt\"\n\nfunc main() {\n    fmt.Println(\"Hello World\")\n}\n```\n\n**test.go**\n\n```go\npackage main\n\nimport \"fmt\"\n\nfunc main() {\n    fmt.Println(\"Hello World\")\n}\n```\n\n单独运行没有问题，但是当安装该包时报错\n\n```bash\n./test.go:10:6: main redeclared in this block\n```\n原因在于在同一个包内不能有多个 `main` 方法，不然程序无法判断程序入口\n","source":"_posts/2018-08-23-go-main-redeclared.md","raw":"---\ntitle: Go 语法错误：main redeclared in this block\ntags:\n  - go\ndate: 2018-08-23 15:20:05\n---\n\n\n在同一个目录中我创建了两个文件\n\n<!-- more --><!-- toc -->\n\n**main.go**\n\n```go\npackage main\n\nimport \"fmt\"\n\nfunc main() {\n    fmt.Println(\"Hello World\")\n}\n```\n\n**test.go**\n\n```go\npackage main\n\nimport \"fmt\"\n\nfunc main() {\n    fmt.Println(\"Hello World\")\n}\n```\n\n单独运行没有问题，但是当安装该包时报错\n\n```bash\n./test.go:10:6: main redeclared in this block\n```\n原因在于在同一个包内不能有多个 `main` 方法，不然程序无法判断程序入口\n","slug":"go-main-redeclared","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2agt00le5gqohfgkcuds"},{"title":"Go 循环语句","date":"2018-08-24T09:51:05.000Z","_content":"\n\nGo 语言中的循环结合了几家语言的优点，使用起来非常全面，方便。\n\n<!-- more --><!-- toc -->\n\n## 普通遍历\n\n```go\nfor i := 0; i < 3; i++ {\n    fmt.Println(i)\n}\n// 0\n// 1\n// 2\n```\n\n```go\ni := 0\nfor i < 3{\n    fmt.Println(i)\n    i++\n}\n// 0\n// 1\n// 2\n```\n\n## 遍历数组\n\n```go\nb := []int{1, 2, 3}\n// 遍历索引\nfor i := range b {\n    fmt.Println(i)\n}\n// 0\n// 1\n// 2\n```\n\n```go\n// 遍历索引和 item\nfor i, v := range b {\n    fmt.Println(i, v)\n}\n// 0 1\n// 1 2\n// 2 3\n```\n\n```go\n// 遍历个数\nfor range b {\n    fmt.Println(\"Hello World \")\n}\n// Hello World\n// Hello World\n// Hello World\n//\n```\n\n## 遍历字典\n\n```go\na := map[string]string{\"name\": \"wxnacy\"}\nfor k, v := range a {\n    fmt.Println(k, v)\n}\n// name wxnacy\n```\n\n## break continue goto\n\n- **break**\n\n```go\nfor i := 0; i < 5; i++ {\n    fmt.Println(i)\n    if i == 3 {\n        break\n    }\n}\n// 0\n// 1\n// 2\n// 3\n```\n\n- **continue**\n\n```go\nfor i := 0; i < 5; i++ {\n    if i == 3 {\n        continue\n    }\n    fmt.Println(i)\n}\n|| 0\n|| 1\n|| 2\n|| 4\n```\n\n- **goto**\n\n```go\nc := 0\nTag: for c < 5 {\n    if c == 3 {\n        c++\n        goto Tag\n    }\n    fmt.Println(c)\n    c++\n}\n// 0\n// 1\n// 2\n// 4\n```\n","source":"_posts/2018-08-24-go-loops.md","raw":"---\ntitle: Go 循环语句\ntags:\n  - go\ndate: 2018-08-24 09:51:05\n---\n\n\nGo 语言中的循环结合了几家语言的优点，使用起来非常全面，方便。\n\n<!-- more --><!-- toc -->\n\n## 普通遍历\n\n```go\nfor i := 0; i < 3; i++ {\n    fmt.Println(i)\n}\n// 0\n// 1\n// 2\n```\n\n```go\ni := 0\nfor i < 3{\n    fmt.Println(i)\n    i++\n}\n// 0\n// 1\n// 2\n```\n\n## 遍历数组\n\n```go\nb := []int{1, 2, 3}\n// 遍历索引\nfor i := range b {\n    fmt.Println(i)\n}\n// 0\n// 1\n// 2\n```\n\n```go\n// 遍历索引和 item\nfor i, v := range b {\n    fmt.Println(i, v)\n}\n// 0 1\n// 1 2\n// 2 3\n```\n\n```go\n// 遍历个数\nfor range b {\n    fmt.Println(\"Hello World \")\n}\n// Hello World\n// Hello World\n// Hello World\n//\n```\n\n## 遍历字典\n\n```go\na := map[string]string{\"name\": \"wxnacy\"}\nfor k, v := range a {\n    fmt.Println(k, v)\n}\n// name wxnacy\n```\n\n## break continue goto\n\n- **break**\n\n```go\nfor i := 0; i < 5; i++ {\n    fmt.Println(i)\n    if i == 3 {\n        break\n    }\n}\n// 0\n// 1\n// 2\n// 3\n```\n\n- **continue**\n\n```go\nfor i := 0; i < 5; i++ {\n    if i == 3 {\n        continue\n    }\n    fmt.Println(i)\n}\n|| 0\n|| 1\n|| 2\n|| 4\n```\n\n- **goto**\n\n```go\nc := 0\nTag: for c < 5 {\n    if c == 3 {\n        c++\n        goto Tag\n    }\n    fmt.Println(c)\n    c++\n}\n// 0\n// 1\n// 2\n// 4\n```\n","slug":"go-loops","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2agu00lg5gqowazq7q4i"},{"title":"Python 安装 PyCrypto 报错","date":"2018-08-25T18:10:32.000Z","_content":"\nPython 中很多加密操作都需要依赖包 PyCrypto，但是在新环境下运行它经常会报莫名其妙的错误，总结起来都是一个类型的错误格式。\n\n<!-- more --><!-- toc -->\n\n```bash\n     from Crypto.XXX import XXX\nImportError: cannot import name 'XXX'\n```\n\n原因在于在现在的新老模块的冲突问题。\n\n```bash\n$ pip3 uninstall pycrypto\n$ pip3 uninstall pycryptodome\n$ pip3 install pycryptodome\n```\n\n卸载掉 Python3 自带的 `pycrypto` 模块，重新安装 `pycryptodome` 即可\n","source":"_posts/2018-08-25-python-PyCrypto-error.md","raw":"---\ntitle: Python 安装 PyCrypto 报错\ndate: 2018-08-25 18:10:32\ntags: [python]\n---\n\nPython 中很多加密操作都需要依赖包 PyCrypto，但是在新环境下运行它经常会报莫名其妙的错误，总结起来都是一个类型的错误格式。\n\n<!-- more --><!-- toc -->\n\n```bash\n     from Crypto.XXX import XXX\nImportError: cannot import name 'XXX'\n```\n\n原因在于在现在的新老模块的冲突问题。\n\n```bash\n$ pip3 uninstall pycrypto\n$ pip3 uninstall pycryptodome\n$ pip3 install pycryptodome\n```\n\n卸载掉 Python3 自带的 `pycrypto` 模块，重新安装 `pycryptodome` 即可\n","slug":"python-PyCrypto-error","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2agv00li5gqojpaxwzzp"},{"title":"Go 命令行参数","date":"2018-08-26T19:24:57.000Z","_content":"\nGo 很适合开发命令行工具，获取命令行参数是关键的一步。\n\n<!-- more --><!-- toc -->\n有两种方式可以获取命令行参数\n\n## os\n\n**引入**\n\n```go\nimport \"os\"\n```\n\n**使用**\n\n```go\nfunc main() {\n    fmt.Prinln(os.Args)\n    // [/var/folders/kz/8syfctw919zdt3shr9w5j8v00000gn/T/go-build512483375/b001/exe/flag -v -name wxnacy -age 2 arg1 arg2]\n}\n```\n\n该方法返回的是参数列表，像 shell 语言一样，数组的第一个参数是运行文件的位置，该方法很简单，但是想要获取 `-` 标示的变量参数就不太够用了。\n\n## flag\n\n`flag` 包时 Go 中专业的解析参数的包。\n\n**引入**\n\n```go\nimport \"flag\"\n```\n\n**语法**\n\n```go\n// xxx 代表参数类型，如：string bool int\n// name 参数名\n// value 默认值\n// usage 使用说明\nfunc Xxx(name string, value xxx, usage string) *xxx\n```\n\n该方法返回的是指定参数类型的指针\n\n```go\n// xxx 代表参数类型，如：string bool int\n// name 参数名\n// value 默认值\n// usage 使用说明\nfunc XxxVar(p *xxx, name string, value xxx, usage string)\n```\n\n该方法传入已定义的参数指针，可以得到相应的技术。\n\nflag 可以解析的参数类型有\n\n```go\n-k v\n-k=v\n--k v\n--k=v\n```\n\n**使用**\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n    \"flag\"\n    \"os\"\n)\n\nvar version bool\nvar name string\nvar age *int\n\nfunc InitArgs() {\n    flag.BoolVar(&version, \"v\", false, \"Get Version\")\n    flag.StringVar(&name, \"name\", \"\", \"Get Name\")\n    age = flag.Int(\"age\", 0, \"Get Age\")\n}\n\nfunc main() {\n    InitArgs()\n\n    flag.Parse()\n\n    fmt.Printf(\"version %t name %s age %d\", version, name, *age)\n    fmt.Println(\"\")\n    fmt.Printf(\"args %s\", flag.Args())\n    fmt.Println(\"\")\n    fmt.Printf(\"args num %d, flag args num %d\", flag.NArg(), flag.NFlag())\n    fmt.Println(\"\")\n    fmt.Printf(\"os.Args %s\", os.Args)\n    fmt.Println(\"\")\n\n\n\n}\n```\n\n```go\n> $ go run src/simple/flag.go -v -name wxnacy -age 2 arg1 arg2\n\nversion true name wxnacy age 2\nargs [arg1 arg2]\nargs num 2, flag args num 3\nos.Args [/var/folders/kz/8syfctw919zdt3shr9w5j8v00000gn/T/go-build512483375/b001/exe/flag -v -name wxnacy -age 2 arg1 arg2]\n```\n\n- [flag](https://golang.org/pkg/flag/)\n","source":"_posts/2018-08-26-go-flag.md","raw":"---\ntitle: Go 命令行参数\ndate: 2018-08-26 19:24:57\ntags: [go]\n---\n\nGo 很适合开发命令行工具，获取命令行参数是关键的一步。\n\n<!-- more --><!-- toc -->\n有两种方式可以获取命令行参数\n\n## os\n\n**引入**\n\n```go\nimport \"os\"\n```\n\n**使用**\n\n```go\nfunc main() {\n    fmt.Prinln(os.Args)\n    // [/var/folders/kz/8syfctw919zdt3shr9w5j8v00000gn/T/go-build512483375/b001/exe/flag -v -name wxnacy -age 2 arg1 arg2]\n}\n```\n\n该方法返回的是参数列表，像 shell 语言一样，数组的第一个参数是运行文件的位置，该方法很简单，但是想要获取 `-` 标示的变量参数就不太够用了。\n\n## flag\n\n`flag` 包时 Go 中专业的解析参数的包。\n\n**引入**\n\n```go\nimport \"flag\"\n```\n\n**语法**\n\n```go\n// xxx 代表参数类型，如：string bool int\n// name 参数名\n// value 默认值\n// usage 使用说明\nfunc Xxx(name string, value xxx, usage string) *xxx\n```\n\n该方法返回的是指定参数类型的指针\n\n```go\n// xxx 代表参数类型，如：string bool int\n// name 参数名\n// value 默认值\n// usage 使用说明\nfunc XxxVar(p *xxx, name string, value xxx, usage string)\n```\n\n该方法传入已定义的参数指针，可以得到相应的技术。\n\nflag 可以解析的参数类型有\n\n```go\n-k v\n-k=v\n--k v\n--k=v\n```\n\n**使用**\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n    \"flag\"\n    \"os\"\n)\n\nvar version bool\nvar name string\nvar age *int\n\nfunc InitArgs() {\n    flag.BoolVar(&version, \"v\", false, \"Get Version\")\n    flag.StringVar(&name, \"name\", \"\", \"Get Name\")\n    age = flag.Int(\"age\", 0, \"Get Age\")\n}\n\nfunc main() {\n    InitArgs()\n\n    flag.Parse()\n\n    fmt.Printf(\"version %t name %s age %d\", version, name, *age)\n    fmt.Println(\"\")\n    fmt.Printf(\"args %s\", flag.Args())\n    fmt.Println(\"\")\n    fmt.Printf(\"args num %d, flag args num %d\", flag.NArg(), flag.NFlag())\n    fmt.Println(\"\")\n    fmt.Printf(\"os.Args %s\", os.Args)\n    fmt.Println(\"\")\n\n\n\n}\n```\n\n```go\n> $ go run src/simple/flag.go -v -name wxnacy -age 2 arg1 arg2\n\nversion true name wxnacy age 2\nargs [arg1 arg2]\nargs num 2, flag args num 3\nos.Args [/var/folders/kz/8syfctw919zdt3shr9w5j8v00000gn/T/go-build512483375/b001/exe/flag -v -name wxnacy -age 2 arg1 arg2]\n```\n\n- [flag](https://golang.org/pkg/flag/)\n","slug":"go-flag","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2agw00lk5gqovtbbh7jh"},{"title":"Go 回调函数","date":"2018-08-28T09:53:18.000Z","_content":"\n\nGo 与 Javascript 有一个相同的特性就是异步，异步程序回调函数是必不可少的，Go 中有两种方式实现回调。\n\n<!-- more --><!-- toc -->\n\n## 直接传入函数\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n)\n\nfunc Func3(a int, call func(b int) int) int {\n    return call(a)\n}\n\nfunc main() {\n\n    res := Func3(1, func(b int) int {\n        return b\n    })\n    fmt.Println(res)    // 1\n\n}\n```\n\n## 先定义后传入\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n)\n\ntype Callback func(a int) int\n\nfunc Func2(b int, callback Callback) int {\n    return callback(b)\n}\n\nfunc main() {\n\n    res := Func2(1, func(a int) int{\n        return a + 2\n    })\n    fmt.Println(res)    // 3\n\n}\n```\n","source":"_posts/2018-08-28-go-callback.md","raw":"---\ntitle: Go 回调函数\ntags:\n  - go\ndate: 2018-08-28 09:53:18\n---\n\n\nGo 与 Javascript 有一个相同的特性就是异步，异步程序回调函数是必不可少的，Go 中有两种方式实现回调。\n\n<!-- more --><!-- toc -->\n\n## 直接传入函数\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n)\n\nfunc Func3(a int, call func(b int) int) int {\n    return call(a)\n}\n\nfunc main() {\n\n    res := Func3(1, func(b int) int {\n        return b\n    })\n    fmt.Println(res)    // 1\n\n}\n```\n\n## 先定义后传入\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n)\n\ntype Callback func(a int) int\n\nfunc Func2(b int, callback Callback) int {\n    return callback(b)\n}\n\nfunc main() {\n\n    res := Func2(1, func(a int) int{\n        return a + 2\n    })\n    fmt.Println(res)    // 3\n\n}\n```\n","slug":"go-callback","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2agy00lm5gqogb02wv2h"},{"title":"Go 时间 time","date":"2018-08-27T13:38:03.000Z","_content":"\n\n本章简单了解下 Go 语言中 `time` 包的使用\n\n<!-- more --><!-- toc -->\n## 创建\n\n**引入包**\n\n```go\nimport (\n    \"time\"\n)\n```\n\n**创建当前本地时间**\n\n```go\nfmt.Println(time.Now())             // 本地时间         2018-08-24 15:06:49.77478074 +0800 CST m=+0.000545907\n```\n\n**创建 Unix 本地时间**\n\n- 语法\n\n```go\n// sec  在 Unix 时间上增加的秒数\n// nsec 在 Unix 时间上增加的纳秒数\nfunc Unix(sec int64, nsec int64) Time\n```\n\n- 使用\n\n```go\nfmt.Println(time.Unix(0, 0))        // 1970-01-01 08:00:00 +0800 CST\nfmt.Println(time.Unix(1, 1))        // 1970-01-01 08:00:01.000000001 +0800 CST\n```\n\n**创建指定时间**\n\n- 语法\n\n```go\nfunc Date(year int, month Month, day, hour, min, sec, nsec int, loc *Location) Time\n```\n\n- 使用\n\n```go\n// 创建 UTC 时间    2018-08-24 12:00:00 +0000 UTC\ndate := time.Date(2018, 8, 24, 12, 0, 0, 0, time.UTC)\n\n// 创建东八区时间   2018-08-24 12:00:00 +0000 CST\nsecondsToUTC := int((time.Hour * 8).Seconds())\nbeijingZone := time.FixedZone(\"CST\", secondsToUTC)\ndate = time.Date(2018, 8, 24, 12, 0, 0, 0, beijingZone)\n```\n\n## 时间属性\n\n```go\nnow := time.Now()\nfmt.Println(now.Unix())             // 1970年至今秒数   1535094409\nfmt.Println(now.UnixNano())         // 1970年至今的纳秒 1535094409774780740\nfmt.Println(now.Year())             // 年份             2018\nfmt.Println(now.YearDay())          // 当年过了的天数   236\nfmt.Println(now.Month())            // 当前月份         August\nfmt.Println(now.Date())             // 当前日期         2018 August 24\nfmt.Println(now.Day())              // 当前日期天数     24\nfmt.Println(now.Hour())             // 当前时间的小时   15\nfmt.Println(now.Minute())           // 当前时间的分钟   6\nfmt.Println(now.Second())           // 当前时间的秒数   49\nfmt.Println(now.Clock())            // 当前的时分秒     15 6 49\n```\n\n## 格式化\n\n**format to string**\n\n```go\ntimeFormat := time.Now().Format(\"2006-01-02 15:04:05 -0700\")\nfmt.Println(timeFormat)             // 格式化   2018-08-24 16:27:16 +0800\n```\n\n这里值得说一下，Go 在时间格式化上真是别（yi）树（duo）一（qi）帜（pa），这颠覆了我以往认知的 `YYYY-mm-dd HH:MM:ss` 格式化模板，原因好像是 Go 是 Google 内部 2006 年立项的，全部数字可以按照 `1234567` 的顺序来记忆，不要告诉我你找不到这几个数字。\n\n更多的格式化符号详见[源码](https://github.com/golang/go/blob/master/src/time/format.go)\n\n**string to date**\n\n```go\nformatTime , _ := time.Parse(\"2006-01-02 15:04:05 -0700\", \"2018-08-24 16:27:16 +0800\")\nfmt.Println(formatTime)             // 解析时间 2018-08-24 16:27:16 +0800 UTC\n```\n\n## 时间差\n\n**获取时间差**\n\n```go\nnow := time.Now()\ndate := time.Date(now.Year(), 8, 24, 20, 0, 0, 0, time.UTC)\ndur := date.Sub(now)\nfmt.Println(dur)                    // 11h2m26.458189482s\n```\n\n**时间差属性**\n\n获取的属性值都是按 100 位换算的\n\n```go\nfmt.Println(dur.Hours())            // 时间差小时数 10.997293793788334\nfmt.Println(dur.Minutes())          // 时间差分钟数 657.4303011169667\nfmt.Println(dur.Seconds())          // 时间差秒数   39507.497402641\n```\n\n**创建时间差**\n\n可使用的标示位 `\"ns\", \"us\" (or \"µs\"), \"ms\", \"s\", \"m\", \"h\".`\n\n```go\nd, _ := time.ParseDuration(\"1h30m\")\nfmt.Println(d)                      // 解析时间差   1h30m0s\n```\n\n**添加时间**\n\n```go\nd, _ := time.ParseDuration(\"1h30m\")\nnow := time.Now()\ndate := now.Add(d)\nfmt.Println(now)                // 2018-08-24 17:12:54.406938412 +0800 CST m=+5400.000626286\nfmt.Println(date)               // 2018-08-24 18:42:54.406938412 +0800 CST m=+5400.000626286\n```\n\n## 比较\n\n```go\n\nnow := time.Now()\nd, _ := time.ParseDuration(\"1h30m\")\ndate := now.Add(d)\n\nfmt.Println(now.Equal(date))    // false\nfmt.Println(now.After(date))    // false\nfmt.Println(now.Before(date))   // true\n```\n\n- [time](https://golang.org/pkg/time/)\n- [Golang神奇的2006-01-02 15:04:05](https://www.jianshu.com/p/c7f7fbb16932)\n","source":"_posts/2018-08-27-go-time.md","raw":"---\ntitle: Go 时间 time\ntags:\n  - go\ndate: 2018-08-27 13:38:03\n---\n\n\n本章简单了解下 Go 语言中 `time` 包的使用\n\n<!-- more --><!-- toc -->\n## 创建\n\n**引入包**\n\n```go\nimport (\n    \"time\"\n)\n```\n\n**创建当前本地时间**\n\n```go\nfmt.Println(time.Now())             // 本地时间         2018-08-24 15:06:49.77478074 +0800 CST m=+0.000545907\n```\n\n**创建 Unix 本地时间**\n\n- 语法\n\n```go\n// sec  在 Unix 时间上增加的秒数\n// nsec 在 Unix 时间上增加的纳秒数\nfunc Unix(sec int64, nsec int64) Time\n```\n\n- 使用\n\n```go\nfmt.Println(time.Unix(0, 0))        // 1970-01-01 08:00:00 +0800 CST\nfmt.Println(time.Unix(1, 1))        // 1970-01-01 08:00:01.000000001 +0800 CST\n```\n\n**创建指定时间**\n\n- 语法\n\n```go\nfunc Date(year int, month Month, day, hour, min, sec, nsec int, loc *Location) Time\n```\n\n- 使用\n\n```go\n// 创建 UTC 时间    2018-08-24 12:00:00 +0000 UTC\ndate := time.Date(2018, 8, 24, 12, 0, 0, 0, time.UTC)\n\n// 创建东八区时间   2018-08-24 12:00:00 +0000 CST\nsecondsToUTC := int((time.Hour * 8).Seconds())\nbeijingZone := time.FixedZone(\"CST\", secondsToUTC)\ndate = time.Date(2018, 8, 24, 12, 0, 0, 0, beijingZone)\n```\n\n## 时间属性\n\n```go\nnow := time.Now()\nfmt.Println(now.Unix())             // 1970年至今秒数   1535094409\nfmt.Println(now.UnixNano())         // 1970年至今的纳秒 1535094409774780740\nfmt.Println(now.Year())             // 年份             2018\nfmt.Println(now.YearDay())          // 当年过了的天数   236\nfmt.Println(now.Month())            // 当前月份         August\nfmt.Println(now.Date())             // 当前日期         2018 August 24\nfmt.Println(now.Day())              // 当前日期天数     24\nfmt.Println(now.Hour())             // 当前时间的小时   15\nfmt.Println(now.Minute())           // 当前时间的分钟   6\nfmt.Println(now.Second())           // 当前时间的秒数   49\nfmt.Println(now.Clock())            // 当前的时分秒     15 6 49\n```\n\n## 格式化\n\n**format to string**\n\n```go\ntimeFormat := time.Now().Format(\"2006-01-02 15:04:05 -0700\")\nfmt.Println(timeFormat)             // 格式化   2018-08-24 16:27:16 +0800\n```\n\n这里值得说一下，Go 在时间格式化上真是别（yi）树（duo）一（qi）帜（pa），这颠覆了我以往认知的 `YYYY-mm-dd HH:MM:ss` 格式化模板，原因好像是 Go 是 Google 内部 2006 年立项的，全部数字可以按照 `1234567` 的顺序来记忆，不要告诉我你找不到这几个数字。\n\n更多的格式化符号详见[源码](https://github.com/golang/go/blob/master/src/time/format.go)\n\n**string to date**\n\n```go\nformatTime , _ := time.Parse(\"2006-01-02 15:04:05 -0700\", \"2018-08-24 16:27:16 +0800\")\nfmt.Println(formatTime)             // 解析时间 2018-08-24 16:27:16 +0800 UTC\n```\n\n## 时间差\n\n**获取时间差**\n\n```go\nnow := time.Now()\ndate := time.Date(now.Year(), 8, 24, 20, 0, 0, 0, time.UTC)\ndur := date.Sub(now)\nfmt.Println(dur)                    // 11h2m26.458189482s\n```\n\n**时间差属性**\n\n获取的属性值都是按 100 位换算的\n\n```go\nfmt.Println(dur.Hours())            // 时间差小时数 10.997293793788334\nfmt.Println(dur.Minutes())          // 时间差分钟数 657.4303011169667\nfmt.Println(dur.Seconds())          // 时间差秒数   39507.497402641\n```\n\n**创建时间差**\n\n可使用的标示位 `\"ns\", \"us\" (or \"µs\"), \"ms\", \"s\", \"m\", \"h\".`\n\n```go\nd, _ := time.ParseDuration(\"1h30m\")\nfmt.Println(d)                      // 解析时间差   1h30m0s\n```\n\n**添加时间**\n\n```go\nd, _ := time.ParseDuration(\"1h30m\")\nnow := time.Now()\ndate := now.Add(d)\nfmt.Println(now)                // 2018-08-24 17:12:54.406938412 +0800 CST m=+5400.000626286\nfmt.Println(date)               // 2018-08-24 18:42:54.406938412 +0800 CST m=+5400.000626286\n```\n\n## 比较\n\n```go\n\nnow := time.Now()\nd, _ := time.ParseDuration(\"1h30m\")\ndate := now.Add(d)\n\nfmt.Println(now.Equal(date))    // false\nfmt.Println(now.After(date))    // false\nfmt.Println(now.Before(date))   // true\n```\n\n- [time](https://golang.org/pkg/time/)\n- [Golang神奇的2006-01-02 15:04:05](https://www.jianshu.com/p/c7f7fbb16932)\n","slug":"go-time","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2agz00lo5gqo4jkoh7wq"},{"title":"Linux 强大的 JSON 数据命令行工具 jq","date":"2018-09-01T14:27:30.000Z","_content":"\n> [jq](http://stedolan.github.io/jq/) 是用 C 语言编写的，没有运行时依赖性，因此应该可以为几乎任何平台构建它。 预构建的二进制文件适用于Linux，OS X和Windows。\n\n<!-- more --><!-- toc -->\n\n## 下载\n\n**MacOS**\n\n```bash\n$ brew install jq\n```\n\n**Ubuntu**\n\n```bash\n$ sudo apt install jq -y\n```\n\n**CentOS**\n\nCentOS 需要将 EPEL 的软件包添加到源列表中\n\n```bash\n$ sudo rpm -ivh http://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\n$ sudo yum repolist\n```\n\n安装\n\n```bash\n$ sudo yum install jq -y\n```\n\n更多安装方式见[文档](https://stedolan.github.io/jq/download/)\n\n## 使用\n\n**输出 json 文件**\n\n```bash\n$ jq '.' test.json\n\n{\n  \"name\": \"wxnacy\"\n}\n```\n\n**管道命令**\n\n```bash\n$ curl -s http://ip-api.com/json | jq\n{\n  \"as\": \"AS22552 eSited Solutions\",\n  \"city\": \"Orlando\",\n  \"country\": \"United States\",\n  \"countryCode\": \"US\",\n  \"isp\": \"eSited Solutions\",\n  \"lat\": 28.5434,\n  \"lon\": -81.2256,\n  \"org\": \"eSited Solutions\",\n  \"query\": \"104.222.246.242\",\n  \"region\": \"FL\",\n  \"regionName\": \"Florida\",\n  \"status\": \"success\",\n  \"timezone\": \"America/New_York\",\n  \"zip\": \"32825\"\n}\n```\n\n## 过滤\n\n**过滤 value**\n\n```bash\n$ echo '{\"name\":\"wxnacy\", \"id\": 1}' | jq '.name'\n\"wxnacy\"\n```\n\n**过滤字段**\n\n```bash\n$ echo '{\"name\":\"wxnacy\", \"id\": 1, \"age\": 23}' | jq '{\"name\", \"id\"}'\n{\n  \"name\": \"wxnacy\",\n  \"id\": 1\n}\n```\n\n**判断空值**\n\n```bash\n$ echo '{\"name\":\"wxnacy\", \"id\": 1, \"age\": 23}' | jq '{\"time\"}?'\n{\n  \"time\": null\n}\n```\n\n```bash\n$ echo '{\"name\":\"wxnacy\", \"id\": 1}' | jq '.time?'\nnull\n```\n\n**截取数组**\n\n```bash\n$ echo '[1, 2, 3, 4]' | jq '.[0]'\n1\n```\n\n```bash\n$ echo '[1, 2, 3, 4]' | jq '.[0:2]'\n[\n  1,\n  2\n]\n```\n\n**获取数组和字典的所有值**\n\n```bash\n$ echo '[1, 2, 3, 4]' | jq '.[]'\n1\n2\n3\n4\n```\n\n```bash\n$ echo '{\"name\":\"wxnacy\", \"id\": 1}' | jq '.[]'                                            ⬡ 8.4.0\n\"wxnacy\"\n1\n```\n\n**使用逗号获取多个值**\n\n```bash\n$ echo '{\"name\":\"wxnacy\", \"id\": 1}' | jq '.name, .id'\n\"wxnacy\"\n1\n```\n\n```bash\n$ echo '[1, 2, 3, 4]' | jq '.[0, 3]'\n1\n4\n```\n\n更多过滤方法见[文档](https://stedolan.github.io/jq/manual/)\n\n## 更多使用实例\n\n**获取列表中某个字段的值**\n\n![eq1](https://raw.githubusercontent.com/wxnacy/image/master/blog/jq-id_620.png)\n\n```bash\n$ curl -s https://raw.githubusercontent.com/wxnacy/file/master/common/V9MiMl2DwA4.json | jq '.data.items[].id' | sed 's/\"//g'\n\nV9MiMl2DwA4\nwQKKZXYx7eg\nNfFnHs67qjY\n826v1-bvSwA\nIAK-IP0Sjic\n```\n","source":"_posts/2018-09-01-linux-jq.md","raw":"---\ntitle: Linux 强大的 JSON 数据命令行工具 jq\ndate: 2018-09-01 14:27:30\ntags: [linux]\n---\n\n> [jq](http://stedolan.github.io/jq/) 是用 C 语言编写的，没有运行时依赖性，因此应该可以为几乎任何平台构建它。 预构建的二进制文件适用于Linux，OS X和Windows。\n\n<!-- more --><!-- toc -->\n\n## 下载\n\n**MacOS**\n\n```bash\n$ brew install jq\n```\n\n**Ubuntu**\n\n```bash\n$ sudo apt install jq -y\n```\n\n**CentOS**\n\nCentOS 需要将 EPEL 的软件包添加到源列表中\n\n```bash\n$ sudo rpm -ivh http://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\n$ sudo yum repolist\n```\n\n安装\n\n```bash\n$ sudo yum install jq -y\n```\n\n更多安装方式见[文档](https://stedolan.github.io/jq/download/)\n\n## 使用\n\n**输出 json 文件**\n\n```bash\n$ jq '.' test.json\n\n{\n  \"name\": \"wxnacy\"\n}\n```\n\n**管道命令**\n\n```bash\n$ curl -s http://ip-api.com/json | jq\n{\n  \"as\": \"AS22552 eSited Solutions\",\n  \"city\": \"Orlando\",\n  \"country\": \"United States\",\n  \"countryCode\": \"US\",\n  \"isp\": \"eSited Solutions\",\n  \"lat\": 28.5434,\n  \"lon\": -81.2256,\n  \"org\": \"eSited Solutions\",\n  \"query\": \"104.222.246.242\",\n  \"region\": \"FL\",\n  \"regionName\": \"Florida\",\n  \"status\": \"success\",\n  \"timezone\": \"America/New_York\",\n  \"zip\": \"32825\"\n}\n```\n\n## 过滤\n\n**过滤 value**\n\n```bash\n$ echo '{\"name\":\"wxnacy\", \"id\": 1}' | jq '.name'\n\"wxnacy\"\n```\n\n**过滤字段**\n\n```bash\n$ echo '{\"name\":\"wxnacy\", \"id\": 1, \"age\": 23}' | jq '{\"name\", \"id\"}'\n{\n  \"name\": \"wxnacy\",\n  \"id\": 1\n}\n```\n\n**判断空值**\n\n```bash\n$ echo '{\"name\":\"wxnacy\", \"id\": 1, \"age\": 23}' | jq '{\"time\"}?'\n{\n  \"time\": null\n}\n```\n\n```bash\n$ echo '{\"name\":\"wxnacy\", \"id\": 1}' | jq '.time?'\nnull\n```\n\n**截取数组**\n\n```bash\n$ echo '[1, 2, 3, 4]' | jq '.[0]'\n1\n```\n\n```bash\n$ echo '[1, 2, 3, 4]' | jq '.[0:2]'\n[\n  1,\n  2\n]\n```\n\n**获取数组和字典的所有值**\n\n```bash\n$ echo '[1, 2, 3, 4]' | jq '.[]'\n1\n2\n3\n4\n```\n\n```bash\n$ echo '{\"name\":\"wxnacy\", \"id\": 1}' | jq '.[]'                                            ⬡ 8.4.0\n\"wxnacy\"\n1\n```\n\n**使用逗号获取多个值**\n\n```bash\n$ echo '{\"name\":\"wxnacy\", \"id\": 1}' | jq '.name, .id'\n\"wxnacy\"\n1\n```\n\n```bash\n$ echo '[1, 2, 3, 4]' | jq '.[0, 3]'\n1\n4\n```\n\n更多过滤方法见[文档](https://stedolan.github.io/jq/manual/)\n\n## 更多使用实例\n\n**获取列表中某个字段的值**\n\n![eq1](https://raw.githubusercontent.com/wxnacy/image/master/blog/jq-id_620.png)\n\n```bash\n$ curl -s https://raw.githubusercontent.com/wxnacy/file/master/common/V9MiMl2DwA4.json | jq '.data.items[].id' | sed 's/\"//g'\n\nV9MiMl2DwA4\nwQKKZXYx7eg\nNfFnHs67qjY\n826v1-bvSwA\nIAK-IP0Sjic\n```\n","slug":"linux-jq","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ah000lq5gqogqikklp5"},{"title":"Python pip 安装模块报错（Expected, end-of-list）","date":"2018-08-29T18:19:46.000Z","_content":"\nPython 新环境中安装项目所需包时，可能会报一个类型的错误\n\n<!-- more --><!-- toc -->\n\n```bash\n    \"Expected ',' or end-of-list in\",line,\"at\",line[p:]\nValueError: (\"Expected ',' or end-of-list in\", \"tornado>=4.2.1,<6.0; python_version < '3.5'\", 'at', \"; python_version < '3.5'\")\n```\n\n这种情况通常是 `setuptools` 版本太老导致的，更新一下版本即可\n\n```bash\n$ pip install --upgrade setuptools\n```\n","source":"_posts/2018-08-29-python-pip-install-error-setuptools-too-old.md","raw":"---\ntitle: Python pip 安装模块报错（Expected, end-of-list）\ndate: 2018-08-29 18:19:46\ntags: [python]\n---\n\nPython 新环境中安装项目所需包时，可能会报一个类型的错误\n\n<!-- more --><!-- toc -->\n\n```bash\n    \"Expected ',' or end-of-list in\",line,\"at\",line[p:]\nValueError: (\"Expected ',' or end-of-list in\", \"tornado>=4.2.1,<6.0; python_version < '3.5'\", 'at', \"; python_version < '3.5'\")\n```\n\n这种情况通常是 `setuptools` 版本太老导致的，更新一下版本即可\n\n```bash\n$ pip install --upgrade setuptools\n```\n","slug":"python-pip-install-error-setuptools-too-old","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ah100ls5gqog3n2n8wx"},{"title":"Linux 管道命令（竖线）和在 Go 语言中的应用","date":"2018-09-02T13:51:46.000Z","_content":"\nLinux 系统中有个很有意思的命令，管道，也就是竖线（|），使用方法为\n\n<!-- more --><!-- toc -->\n```bash\n$ cmd1 | cmd2\n```\n\n| 可以将 cmd1 的运行结果传递给 cmd2，这个命令非常灵活多用。\n\n比如：\n\n```bash\n$ curl http://baidu.com | grep 'bai'\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100    81  100    81    0     0    131      0 --:--:-- --:--:-- --:--:--   131\n<meta http-equiv=\"refresh\" content=\"0;url=http://www.baidu.com/\">\n```\n\n**在 Go 中的应用**\n\n管道的内容，位于 os.Stdin 里，通过 os.Stdin 的 mode 值来判断程序是否通过管道调用，然后通过 bufio 包获取数据\n\n```go\npackage main\n\nimport (\n    \"bufio\"\n    \"fmt\"\n    \"log\"\n    \"os\"\n)\n\nfunc main() {\n    fileInfo, _ := os.Stdin.Stat()\n    fmt.Println(fileInfo.Mode(), os.ModeNamedPipe, os.ModeNamedPipe)\n    if (fileInfo.Mode() & os.ModeNamedPipe) != os.ModeNamedPipe {\n        log.Fatal(\"The command is intended to work with pipes.\")\n    }\n    s := bufio.NewScanner(os.Stdin)\n    for s.Scan() {\n        fmt.Println(s.Text())\n    }\n}\n```\n\n可以对它进行封装\n\n```go\nfunc HasStdin() (string, bool) {\n    fileInfo, _ := os.Stdin.Stat()\n    if (fileInfo.Mode() & os.ModeNamedPipe) != os.ModeNamedPipe {\n        return \"\", false\n    }\n    s := bufio.NewScanner(os.Stdin)\n    resList := make([]string, 0, 0)\n    for s.Scan() {\n        resList = append(resList, s.Text())\n    }\n    result := strings.Join(resList, \"\\n\")\n    return result, true\n}\n```\n\n完整代码见[demo](https://github.com/wxnacy/study/blob/master/goland/src/args/stdin.go)\n","source":"_posts/2018-09-02-linux-pipeline.md","raw":"---\ntitle: Linux 管道命令（竖线）和在 Go 语言中的应用\ndate: 2018-09-02 13:51:46\ntags: [linux, go]\n---\n\nLinux 系统中有个很有意思的命令，管道，也就是竖线（|），使用方法为\n\n<!-- more --><!-- toc -->\n```bash\n$ cmd1 | cmd2\n```\n\n| 可以将 cmd1 的运行结果传递给 cmd2，这个命令非常灵活多用。\n\n比如：\n\n```bash\n$ curl http://baidu.com | grep 'bai'\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100    81  100    81    0     0    131      0 --:--:-- --:--:-- --:--:--   131\n<meta http-equiv=\"refresh\" content=\"0;url=http://www.baidu.com/\">\n```\n\n**在 Go 中的应用**\n\n管道的内容，位于 os.Stdin 里，通过 os.Stdin 的 mode 值来判断程序是否通过管道调用，然后通过 bufio 包获取数据\n\n```go\npackage main\n\nimport (\n    \"bufio\"\n    \"fmt\"\n    \"log\"\n    \"os\"\n)\n\nfunc main() {\n    fileInfo, _ := os.Stdin.Stat()\n    fmt.Println(fileInfo.Mode(), os.ModeNamedPipe, os.ModeNamedPipe)\n    if (fileInfo.Mode() & os.ModeNamedPipe) != os.ModeNamedPipe {\n        log.Fatal(\"The command is intended to work with pipes.\")\n    }\n    s := bufio.NewScanner(os.Stdin)\n    for s.Scan() {\n        fmt.Println(s.Text())\n    }\n}\n```\n\n可以对它进行封装\n\n```go\nfunc HasStdin() (string, bool) {\n    fileInfo, _ := os.Stdin.Stat()\n    if (fileInfo.Mode() & os.ModeNamedPipe) != os.ModeNamedPipe {\n        return \"\", false\n    }\n    s := bufio.NewScanner(os.Stdin)\n    resList := make([]string, 0, 0)\n    for s.Scan() {\n        resList = append(resList, s.Text())\n    }\n    result := strings.Join(resList, \"\\n\")\n    return result, true\n}\n```\n\n完整代码见[demo](https://github.com/wxnacy/study/blob/master/goland/src/args/stdin.go)\n","slug":"linux-pipeline","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ah200lu5gqocsmir8iz"},{"title":"Salt 算法和 Bcrypt 散列函数","date":"2018-08-31T10:37:08.000Z","_content":"\n\n这两天华住数据库密码泄露，导致上亿人的开放记录和用户信息被放到黑市贩卖（机智的我从来不开房），这再次抛弃了大家对信息安全的关注。今天讨论下信息安全中的密码安全。\n\n<!-- more --><!-- toc -->\n\n> MD5 1996年后被证实存在弱点，可以被加以破解，对于需要高度安全性的数据，专家一般建议改用其他算法，如SHA-2。2004年，证实MD5算法无法防止碰撞（collision），因此不适用于安全性认证，如SSL公开密钥认证或是数字签名等用途。\n\n现在基本没有程序员在将密码明文存在数据库了，但是如果只是简单的做 MD5 加密，那跟明文也没什么区别了。\n\nMD5 被破解的原理很简单（首先声明 MD5 的破解不是被解密的，每次提到这个问题，就能想起以前跟我较真的一个同事，想起他一脸严肃的跟我说 MD5 可以解密，我就想笑，一句话就可以反驳，如果 MD5 可以解密，那它就是全世界最牛逼的压缩工具）。MD5 的长度是固定的，无限的数据组合散列出固定长度的密文，就一定会有两个不同的明文可以得到相同的 MD5 值。\n\n```bash\n其他明文：md5(abc)    ==>     xyz\n用户密码：md5(def)    ==>     xyz\n```\n\n这样攻击者将 key（密码明文）和 value（MD5 值）存入数据库，然后用密文反查明文，及时得不到 `def`，使用 `abc` 也是可以通过登录验证的，这样的暴力破解已经非常成熟。\n\n## Salt 算法\n\n为了应对这种情况，我需要在明文上加上一点“佐料”是明文变长，这种算法我们成为加盐算法，也就是 salt 算法这样上述发生的几率就会降低，大大增加了破解的难度。\n\n```bash\n其他明文：md5(abc+salt)    ==>     yyyyy\n用户密码：md5(def+salt)    ==>     xxxxx\n```\n\n因为 `MD5, SHA1` 已经不再安全，我们使用 `SHA512` 来进行加盐算法\n\n```html\nSHA512(SHA512(password), salt)\n```\n\n比较安全的加盐算法应该每个密码的 salt 值都不同，最简单的做法是随机获取 salt 并存入数据库。\n\n存入数据库，那如果被拖库了怎么办？就像这次华住事件，整个库都被人家拿走了，拿到了 salt 岂不是什么都完了。\n\n到也未必，上述公式，只是加盐算法的简单原理，我们可以在 salt 也做散列运算，或者在 salt 上再次加盐，等等复杂的操作都可以提现在代码中，这样即使攻击者拿到 salt 想要暴力破解出用户的原密码，仍然是非常难得。\n\n## bcrypt\n\n而另一种方式则是不将 salt 存在数据库，而是通过加密密码得到，这样每个密码的 salt 也是不同的\n\n```bash\nSHA512(SHA512(password), SHA512(password)[40:60])\n```\n\n这个 salt 的获取方式，是我随意写的，具体实现需要更复杂的加密才行。\n\n而 bcrypt 算法，就是建立在这个原理之上的，它的 salt 获取方式极其复杂，并且每次不同，导致每次对密码的加密结果都是不同的，但是 bcrypt 自己提供了验证上一次加密结果的方法，在散列加密中 bcrypt 被认为是最安全的。\n\n而安全换了的是性能的损失，因为它的复杂性，导致了每次计算的耗时远远大于普通的加盐算法。\n\n在一般的生产开发中加盐算法已经足够做到密码的安全保证，除非涉及绝密信息，并且可以牺牲一定性能时，才有必要考虑 bcrypt 加密\n","source":"_posts/2018-08-31-salt-bcrypt.md","raw":"---\ntitle: Salt 算法和 Bcrypt 散列函数\ntags:\n  - 算法\ndate: 2018-08-31 10:37:08\n---\n\n\n这两天华住数据库密码泄露，导致上亿人的开放记录和用户信息被放到黑市贩卖（机智的我从来不开房），这再次抛弃了大家对信息安全的关注。今天讨论下信息安全中的密码安全。\n\n<!-- more --><!-- toc -->\n\n> MD5 1996年后被证实存在弱点，可以被加以破解，对于需要高度安全性的数据，专家一般建议改用其他算法，如SHA-2。2004年，证实MD5算法无法防止碰撞（collision），因此不适用于安全性认证，如SSL公开密钥认证或是数字签名等用途。\n\n现在基本没有程序员在将密码明文存在数据库了，但是如果只是简单的做 MD5 加密，那跟明文也没什么区别了。\n\nMD5 被破解的原理很简单（首先声明 MD5 的破解不是被解密的，每次提到这个问题，就能想起以前跟我较真的一个同事，想起他一脸严肃的跟我说 MD5 可以解密，我就想笑，一句话就可以反驳，如果 MD5 可以解密，那它就是全世界最牛逼的压缩工具）。MD5 的长度是固定的，无限的数据组合散列出固定长度的密文，就一定会有两个不同的明文可以得到相同的 MD5 值。\n\n```bash\n其他明文：md5(abc)    ==>     xyz\n用户密码：md5(def)    ==>     xyz\n```\n\n这样攻击者将 key（密码明文）和 value（MD5 值）存入数据库，然后用密文反查明文，及时得不到 `def`，使用 `abc` 也是可以通过登录验证的，这样的暴力破解已经非常成熟。\n\n## Salt 算法\n\n为了应对这种情况，我需要在明文上加上一点“佐料”是明文变长，这种算法我们成为加盐算法，也就是 salt 算法这样上述发生的几率就会降低，大大增加了破解的难度。\n\n```bash\n其他明文：md5(abc+salt)    ==>     yyyyy\n用户密码：md5(def+salt)    ==>     xxxxx\n```\n\n因为 `MD5, SHA1` 已经不再安全，我们使用 `SHA512` 来进行加盐算法\n\n```html\nSHA512(SHA512(password), salt)\n```\n\n比较安全的加盐算法应该每个密码的 salt 值都不同，最简单的做法是随机获取 salt 并存入数据库。\n\n存入数据库，那如果被拖库了怎么办？就像这次华住事件，整个库都被人家拿走了，拿到了 salt 岂不是什么都完了。\n\n到也未必，上述公式，只是加盐算法的简单原理，我们可以在 salt 也做散列运算，或者在 salt 上再次加盐，等等复杂的操作都可以提现在代码中，这样即使攻击者拿到 salt 想要暴力破解出用户的原密码，仍然是非常难得。\n\n## bcrypt\n\n而另一种方式则是不将 salt 存在数据库，而是通过加密密码得到，这样每个密码的 salt 也是不同的\n\n```bash\nSHA512(SHA512(password), SHA512(password)[40:60])\n```\n\n这个 salt 的获取方式，是我随意写的，具体实现需要更复杂的加密才行。\n\n而 bcrypt 算法，就是建立在这个原理之上的，它的 salt 获取方式极其复杂，并且每次不同，导致每次对密码的加密结果都是不同的，但是 bcrypt 自己提供了验证上一次加密结果的方法，在散列加密中 bcrypt 被认为是最安全的。\n\n而安全换了的是性能的损失，因为它的复杂性，导致了每次计算的耗时远远大于普通的加盐算法。\n\n在一般的生产开发中加盐算法已经足够做到密码的安全保证，除非涉及绝密信息，并且可以牺牲一定性能时，才有必要考虑 bcrypt 加密\n","slug":"salt-bcrypt","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ah300lw5gqonrwtg6wt"},{"title":"Go 将 map 按 key 排序","date":"2018-09-03T17:24:33.000Z","_content":"\nGo 在给 map 进行 key 排序时，需要做一下转换。\n\n<!-- more --><!-- toc -->\n\n\n```go\nimport \"sort\"\n\nfunc main(){\n    m := map[string]string{\"id\": \"1\", \"name\": \"wxnacy\"}\n    keys := make([]string, 0, len(m))\n    for k, _ := range m {\n        keys = append(keys, k)\n    }\n    sort.Strings(keys)\n}\n```\n","source":"_posts/2018-09-03-sort-map-by-key.md","raw":"---\ntitle: Go 将 map 按 key 排序\ndate: 2018-09-03 17:24:33\ntags: [go]\n---\n\nGo 在给 map 进行 key 排序时，需要做一下转换。\n\n<!-- more --><!-- toc -->\n\n\n```go\nimport \"sort\"\n\nfunc main(){\n    m := map[string]string{\"id\": \"1\", \"name\": \"wxnacy\"}\n    keys := make([]string, 0, len(m))\n    for k, _ := range m {\n        keys = append(keys, k)\n    }\n    sort.Strings(keys)\n}\n```\n","slug":"sort-map-by-key","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ah500ly5gqocupwczwr"},{"title":"HTTP Accept-Ranges 头信息的作用","date":"2018-09-05T17:17:54.000Z","_content":"\n\n最近想写一个断点下载视频的小工具，发现头信息 `Accept-Ranges` 在里面发挥了非常大的作用。\n\n<!-- more --><!-- toc -->\n\n比如请求百度官网\n\n```bash\n$ curl https://www.baiud.com -I\n\nHTTP/1.1 200 OK\nAccept-Ranges: bytes\nCache-Control: private, no-cache, no-store, proxy-revalidate, no-transform\nConnection: Keep-Alive\nContent-Length: 277\nContent-Type: text/html\nDate: Tue, 04 Sep 2018 09:41:52 GMT\nEtag: \"575e1f60-115\"\nLast-Modified: Mon, 13 Jun 2016 02:50:08 GMT\nPragma: no-cache\nServer: bfe/1.0.8.18\n```\n\n其中 `Accept-Ranges` 返回值为 `bytes`，这代表了该服务器可以接受范围请求，这样我们就可以做断点下载的功能了。如果该值为 `none`，则代表不允许范围请求。\n\n我们可以通过请求头 `Range` 来定义获取的字节范围，格式为 `bytes=0-8`\n\n**使用 curl 来请求**\n\n```bash\n$ curl https://www.baidu.com --header \"Range: bytes=0-8\"\n\n<!DOCTYPE%\n```\n\n看到请求回来的数据只有 9 个字节\n\n我们也可以使用更简单的方式请求\n\n```bash\n$ curl https://www.baidu.com -r 0-8\n\n<!DOCTYPE%\n```\n\n利用这个特性，再加上多线程运行，即可写出下载更快的工具。\n\n- [译-实践HTTP206状态:部分内容和范围请求](http://www.cnblogs.com/ziyunfei/archive/2012/11/18/2775499.html)\n- [Accept-Ranges](https://cloud.tencent.com/developer/section/1189892)\n","source":"_posts/2018-09-05-http-accept-ranges.md","raw":"---\ntitle: HTTP Accept-Ranges 头信息的作用\ntags:\n  - http\ndate: 2018-09-05 17:17:54\n---\n\n\n最近想写一个断点下载视频的小工具，发现头信息 `Accept-Ranges` 在里面发挥了非常大的作用。\n\n<!-- more --><!-- toc -->\n\n比如请求百度官网\n\n```bash\n$ curl https://www.baiud.com -I\n\nHTTP/1.1 200 OK\nAccept-Ranges: bytes\nCache-Control: private, no-cache, no-store, proxy-revalidate, no-transform\nConnection: Keep-Alive\nContent-Length: 277\nContent-Type: text/html\nDate: Tue, 04 Sep 2018 09:41:52 GMT\nEtag: \"575e1f60-115\"\nLast-Modified: Mon, 13 Jun 2016 02:50:08 GMT\nPragma: no-cache\nServer: bfe/1.0.8.18\n```\n\n其中 `Accept-Ranges` 返回值为 `bytes`，这代表了该服务器可以接受范围请求，这样我们就可以做断点下载的功能了。如果该值为 `none`，则代表不允许范围请求。\n\n我们可以通过请求头 `Range` 来定义获取的字节范围，格式为 `bytes=0-8`\n\n**使用 curl 来请求**\n\n```bash\n$ curl https://www.baidu.com --header \"Range: bytes=0-8\"\n\n<!DOCTYPE%\n```\n\n看到请求回来的数据只有 9 个字节\n\n我们也可以使用更简单的方式请求\n\n```bash\n$ curl https://www.baidu.com -r 0-8\n\n<!DOCTYPE%\n```\n\n利用这个特性，再加上多线程运行，即可写出下载更快的工具。\n\n- [译-实践HTTP206状态:部分内容和范围请求](http://www.cnblogs.com/ziyunfei/archive/2012/11/18/2775499.html)\n- [Accept-Ranges](https://cloud.tencent.com/developer/section/1189892)\n","slug":"http-accept-ranges","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ah600m05gqopbl422zj"},{"title":"Go 判断文件是否存在","date":"2018-08-30T11:19:48.000Z","_content":"\nGo 判断文件是否存在\n\n<!-- more --><!-- toc -->\n\n```go\n// 判断路径是否存在\nfunc IsExists(path string) (os.FileInfo, bool) {\n\tf, err := os.Stat(path)\n    return f, err == nil || os.IsExist(err)\n}\n```\n\n如果当前用户没有访问该文件的权限时，err 也有值，所以需要使用 `os.IsExist()` 方法加一层判断。\n\n**判断是否文件夹**\n\n```go\n// 判断所给路径是否为文件夹\nfunc IsDir(path string) (os.FileInfo, bool) {\n    f, flag := IsExists(path)\n    return f, flag && f.IsDir()\n}\n```\n\n**判断是否文件**\n\n```go\n// 判断所给路径是否为文件\nfunc IsFile(path string) (os.FileInfo, bool) {\n    f, flag := IsExists(path)\n    return f, flag && !f.IsDir()\n}\n```\n","source":"_posts/2018-08-30-go-exists-file.md","raw":"---\ntitle: Go 判断文件是否存在\ndate: 2018-08-30 11:19:48\ntags: [go]\n---\n\nGo 判断文件是否存在\n\n<!-- more --><!-- toc -->\n\n```go\n// 判断路径是否存在\nfunc IsExists(path string) (os.FileInfo, bool) {\n\tf, err := os.Stat(path)\n    return f, err == nil || os.IsExist(err)\n}\n```\n\n如果当前用户没有访问该文件的权限时，err 也有值，所以需要使用 `os.IsExist()` 方法加一层判断。\n\n**判断是否文件夹**\n\n```go\n// 判断所给路径是否为文件夹\nfunc IsDir(path string) (os.FileInfo, bool) {\n    f, flag := IsExists(path)\n    return f, flag && f.IsDir()\n}\n```\n\n**判断是否文件**\n\n```go\n// 判断所给路径是否为文件\nfunc IsFile(path string) (os.FileInfo, bool) {\n    f, flag := IsExists(path)\n    return f, flag && !f.IsDir()\n}\n```\n","slug":"go-exists-file","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ah700m25gqoi4bqtk4c"},{"title":"迅雷地址解析","date":"2018-09-04T16:55:40.000Z","_content":"\n平常用迅雷比较多，一直对 `thunder://` 开头的地址一直比较好奇，今天有时间来研究下它是怎么加密的。\n\n<!-- more --><!-- toc -->\n\n拿一个地址做例子\n\n```bash\nthunder://QUFodHRwczovL3d3dy53eG5hY3kuY29tWlo=\n```\n\n首先去掉 `thunder://` 只看后面的字符串，通过末尾的 `=` 号，我们很容易联想到这是一个 base64 编码的数据\n\n我们试着将它解码为普通字符串得到如下结果\n\n```bash\nAAhttps://www.wxnacy.comZZ\n```\n\n很明显是一个 http 地址，只是开头结尾加上了 `AA, ZZ`，很简单，随便一个语言就可以很容易写出转换工具。\n\n还有快车、QQ旋风等只要是类似的地址结果都是想通的逻辑，只是地址前后添加的符号各有不同而已，这里不再一一解析。\n","source":"_posts/2018-09-04-thunder-url-parse.md","raw":"---\ntitle: 迅雷地址解析\ndate: 2018-09-04 16:55:40\ntags: [算法]\n---\n\n平常用迅雷比较多，一直对 `thunder://` 开头的地址一直比较好奇，今天有时间来研究下它是怎么加密的。\n\n<!-- more --><!-- toc -->\n\n拿一个地址做例子\n\n```bash\nthunder://QUFodHRwczovL3d3dy53eG5hY3kuY29tWlo=\n```\n\n首先去掉 `thunder://` 只看后面的字符串，通过末尾的 `=` 号，我们很容易联想到这是一个 base64 编码的数据\n\n我们试着将它解码为普通字符串得到如下结果\n\n```bash\nAAhttps://www.wxnacy.comZZ\n```\n\n很明显是一个 http 地址，只是开头结尾加上了 `AA, ZZ`，很简单，随便一个语言就可以很容易写出转换工具。\n\n还有快车、QQ旋风等只要是类似的地址结果都是想通的逻辑，只是地址前后添加的符号各有不同而已，这里不再一一解析。\n","slug":"thunder-url-parse","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ah900m45gqoa33p3ajl"},{"title":"MacOS 中如何使用 md5sum 命令","date":"2018-09-06T10:13:49.000Z","_content":"\nLiunx 中 md5sum 命令非常强大，加密和校对数据的 md5 都非常方便，MacOS 中没有安装该应用，而是默认安装了 md5 命令。\n\n<!-- more --><!-- toc -->\n使用起来非常方便\n\n```bash\n$ md5 wdl.go\nMD5 (wdl.go) = df52858048902988f21479a854bbf617\n```\n\n```bash\n$ md5 -r wdl.go\ndf52858048902988f21479a854bbf617 wdl.go\n```\n\n或者使用 `openssl` 中的 md5 方法\n\n```bash\n$ openssl md5 wdl.go\nMD5(wdl.go)= df52858048902988f21479a854bbf617\n```\n\n也可以用管道命令\n\n```bash\n$ curl http://baidu.com | md5\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100    81  100    81    0     0    794      0 --:--:-- --:--:-- --:--:--   801\na6c4b5d58389762e8e7f67c8a3515d3f\n```\n\n- [md5sum on Mac OS X | check MD5 hashes](https://www.garron.me/en/bits/how-to-md5sum-mac-os-x.html)\n","source":"_posts/2018-09-06-macos-md5sum.md","raw":"---\ntitle: MacOS 中如何使用 md5sum 命令\ndate: 2018-09-06 10:13:49\ntags: [mac]\n---\n\nLiunx 中 md5sum 命令非常强大，加密和校对数据的 md5 都非常方便，MacOS 中没有安装该应用，而是默认安装了 md5 命令。\n\n<!-- more --><!-- toc -->\n使用起来非常方便\n\n```bash\n$ md5 wdl.go\nMD5 (wdl.go) = df52858048902988f21479a854bbf617\n```\n\n```bash\n$ md5 -r wdl.go\ndf52858048902988f21479a854bbf617 wdl.go\n```\n\n或者使用 `openssl` 中的 md5 方法\n\n```bash\n$ openssl md5 wdl.go\nMD5(wdl.go)= df52858048902988f21479a854bbf617\n```\n\n也可以用管道命令\n\n```bash\n$ curl http://baidu.com | md5\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100    81  100    81    0     0    794      0 --:--:-- --:--:-- --:--:--   801\na6c4b5d58389762e8e7f67c8a3515d3f\n```\n\n- [md5sum on Mac OS X | check MD5 hashes](https://www.garron.me/en/bits/how-to-md5sum-mac-os-x.html)\n","slug":"macos-md5sum","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aha00m65gqo6gpbu4gw"},{"title":"Go 使用 chan + select 实现简单的多进程任务","date":"2018-09-09T16:08:23.000Z","_content":"\n在 Go 中使用 go 来执行一个函数即可生成一个线程，比如\n\n<!-- more --><!-- toc -->\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n)\n\nfunc PrintNum(a int) {\n    fmt.Println(a)\n}\n\nfunc main() {\n    go PrintNum(1)\n    go PrintNum(2)\n\n    fmt.Println(\"Done\")\n}\n```\n\n运行结果可能为\n\n```bash\n1\nDone\n```\n\n`2` 并没有被打印，因为主线程不会去等待子线程执行完才结束，能执行多少就多少，所以 `PrintNum(2)` 就可能没有被执行。\n\n这种情况我们需要让主线程等待一下子线程，比如一秒钟\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\nfunc PrintNum(a int) {\n    fmt.Println(a)\n}\n\nfunc main() {\n    go PrintNum(1)\n    go PrintNum(2)\n\n    time.Sleep(1 * time.Second)\n    fmt.Println(\"Done\")\n}\n```\n\n```bash\n1\n2\nDone\n```\n\n这次正常运行结果。\n\n不过实际开发中，子线程的个数和所需要的时间一定是不确定的，我们不可能去指定一个固定时间来等待子线程，比如\n\n```go\nfor i := 0; i < 10; i++ {\n    go func() {\n        time.Sleep(1 * time.Second)\n        PrintNum(i)\n    }()\n}\n```\n\n这时候我们需要使用 select 来进行判断，像这样\n\n```go\nt := time.NewTicker(200 * time.Millisecond)\ndefer t.Stop()\n\nLoop:\nfor true{\n    select {\n        case <-t.C: {\n            fmt.Println(\"inprogress\")\n        }\n        case <- c: {\n            fmt.Println(\"Done\")\n            break Loop\n        }\n    }\n}\n```\n\n将 select 嵌套在死循环中，通过管道来判断子线程的任务是否执行完毕，如果 c 管道没有值，那么将一直进行 `t.C` 的操作\n\n然后在认定子线程完成时，给管道 c 传入值\n\n```go\nc := make(chan int, 1)\nif i = 4 {\n    c <- 1\n}\n```\n\n完整代码见[github](https://github.com/wxnacy/study/blob/master/goland/src/multithread/chan_select.go)\n\n运行结果如下\n\n```bash\n0\n1\n2\n3\n4\nDone\n```\n","source":"_posts/2018-09-09-go-chan-select.md","raw":"---\ntitle: Go 使用 chan + select 实现简单的多进程任务\ndate: 2018-09-09 16:08:23\ntags: [go]\n---\n\n在 Go 中使用 go 来执行一个函数即可生成一个线程，比如\n\n<!-- more --><!-- toc -->\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n)\n\nfunc PrintNum(a int) {\n    fmt.Println(a)\n}\n\nfunc main() {\n    go PrintNum(1)\n    go PrintNum(2)\n\n    fmt.Println(\"Done\")\n}\n```\n\n运行结果可能为\n\n```bash\n1\nDone\n```\n\n`2` 并没有被打印，因为主线程不会去等待子线程执行完才结束，能执行多少就多少，所以 `PrintNum(2)` 就可能没有被执行。\n\n这种情况我们需要让主线程等待一下子线程，比如一秒钟\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\nfunc PrintNum(a int) {\n    fmt.Println(a)\n}\n\nfunc main() {\n    go PrintNum(1)\n    go PrintNum(2)\n\n    time.Sleep(1 * time.Second)\n    fmt.Println(\"Done\")\n}\n```\n\n```bash\n1\n2\nDone\n```\n\n这次正常运行结果。\n\n不过实际开发中，子线程的个数和所需要的时间一定是不确定的，我们不可能去指定一个固定时间来等待子线程，比如\n\n```go\nfor i := 0; i < 10; i++ {\n    go func() {\n        time.Sleep(1 * time.Second)\n        PrintNum(i)\n    }()\n}\n```\n\n这时候我们需要使用 select 来进行判断，像这样\n\n```go\nt := time.NewTicker(200 * time.Millisecond)\ndefer t.Stop()\n\nLoop:\nfor true{\n    select {\n        case <-t.C: {\n            fmt.Println(\"inprogress\")\n        }\n        case <- c: {\n            fmt.Println(\"Done\")\n            break Loop\n        }\n    }\n}\n```\n\n将 select 嵌套在死循环中，通过管道来判断子线程的任务是否执行完毕，如果 c 管道没有值，那么将一直进行 `t.C` 的操作\n\n然后在认定子线程完成时，给管道 c 传入值\n\n```go\nc := make(chan int, 1)\nif i = 4 {\n    c <- 1\n}\n```\n\n完整代码见[github](https://github.com/wxnacy/study/blob/master/goland/src/multithread/chan_select.go)\n\n运行结果如下\n\n```bash\n0\n1\n2\n3\n4\nDone\n```\n","slug":"go-chan-select","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ahb00m85gqoywp68n5k"},{"title":"Go 如何给屏幕打印信息加上颜色","date":"2018-09-07T11:13:45.000Z","_content":"\nGo 语言可以很简单的给屏幕打印信息加上颜色。\n\n<!-- more -->\n\n![color1](https://raw.githubusercontent.com/wxnacy/image/master/blog/output-color.png)\n\n```go\nconf := 0   // 配置、终端默认设置\nbg   := 0   // 背景色、终端默认设置\ntext := 31  // 前景色、红色\nfmt.Printf(\"\\n %c[%d;%d;%dm%s%c[0m\\n\\n\", 0x1B, conf, bg, text, \"testPrintColor\", 0x1B)\n```\n\n颜色和配置的取值范围\n\n```bash\n// 前景 背景 颜色\n// ---------------------------------------\n// 30  40  黑色\n// 31  41  红色\n// 32  42  绿色\n// 33  43  黄色\n// 34  44  蓝色\n// 35  45  紫红色\n// 36  46  青蓝色\n// 37  47  白色\n//\n// 代码 意义\n// -------------------------\n//  0  终端默认设置\n//  1  高亮显示\n//  4  使用下划线\n//  5  闪烁\n//  7  反白显示\n//  8  不可见\n```\n\n[Go语言在Linux环境下输出彩色字符](https://www.cnblogs.com/journeyonmyway/p/4317108.html) 这篇文章遍历打印了每种颜色的组合。\n\n我们可以将该方法封装了起来供程序使用\n\n```go\nfunc SetColor(msg string, conf, bg, text int) string {\n    return fmt.Sprintf(\"%c[%d;%d;%dm%s%c[0m\", 0x1B, conf, bg, text, msg, 0x1B)\n}\n```\n\n将颜色定义为常量，比如\n\n```go\nconst (\n\tTextBlack = iota + 30\n\tTextRed\n\tTextGreen\n\tTextYellow\n\tTextBlue\n\tTextMagenta\n\tTextCyan\n\tTextWhite\n)\n```\n\n完整代码见 [demo](https://github.com/wxnacy/study/blob/master/goland/src/color/main.go)\n","source":"_posts/2018-09-07-go-fmt-color.md","raw":"---\ntitle: Go 如何给屏幕打印信息加上颜色\ntags:\n  - go\ndate: 2018-09-07 11:13:45\n---\n\nGo 语言可以很简单的给屏幕打印信息加上颜色。\n\n<!-- more -->\n\n![color1](https://raw.githubusercontent.com/wxnacy/image/master/blog/output-color.png)\n\n```go\nconf := 0   // 配置、终端默认设置\nbg   := 0   // 背景色、终端默认设置\ntext := 31  // 前景色、红色\nfmt.Printf(\"\\n %c[%d;%d;%dm%s%c[0m\\n\\n\", 0x1B, conf, bg, text, \"testPrintColor\", 0x1B)\n```\n\n颜色和配置的取值范围\n\n```bash\n// 前景 背景 颜色\n// ---------------------------------------\n// 30  40  黑色\n// 31  41  红色\n// 32  42  绿色\n// 33  43  黄色\n// 34  44  蓝色\n// 35  45  紫红色\n// 36  46  青蓝色\n// 37  47  白色\n//\n// 代码 意义\n// -------------------------\n//  0  终端默认设置\n//  1  高亮显示\n//  4  使用下划线\n//  5  闪烁\n//  7  反白显示\n//  8  不可见\n```\n\n[Go语言在Linux环境下输出彩色字符](https://www.cnblogs.com/journeyonmyway/p/4317108.html) 这篇文章遍历打印了每种颜色的组合。\n\n我们可以将该方法封装了起来供程序使用\n\n```go\nfunc SetColor(msg string, conf, bg, text int) string {\n    return fmt.Sprintf(\"%c[%d;%d;%dm%s%c[0m\", 0x1B, conf, bg, text, msg, 0x1B)\n}\n```\n\n将颜色定义为常量，比如\n\n```go\nconst (\n\tTextBlack = iota + 30\n\tTextRed\n\tTextGreen\n\tTextYellow\n\tTextBlue\n\tTextMagenta\n\tTextCyan\n\tTextWhite\n)\n```\n\n完整代码见 [demo](https://github.com/wxnacy/study/blob/master/goland/src/color/main.go)\n","slug":"go-fmt-color","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ahd00ma5gqombp2557e"},{"title":"Go 如何操作 Mysql 数据库","date":"2018-09-08T18:30:23.000Z","_content":"\nGo 中提供了 `database/sql` 包来操作数据库，不过需要下载相应的数据库驱动才可以使用。\n\n<!-- more --><!-- toc -->\n\n**下载 Mysql 驱动**\n\n```bash\n$ go get github.com/go-sql-driver/mysql\n```\n\n**引入包**\n\n```go\nimport (\n    \"fmt\"\n    \"database/sql\"\n\n    _ \"github.com/go-sql-driver/mysql\"\n)\n```\n\n因为驱动我们并没有在代码中直接使用，所以使用 `_` 导入方式\n\n**创建连接**\n\n```go\nconst (\n    User = \"root\"\n    Passwd = \"wxnacy\"\n    Host = \"127.0.0.1\"\n    Port = 3306\n    Database = \"study\"\n)\n\nfunc Connect() (*sql.DB, error) {\n    url := fmt.Sprintf(\"%s:%s@tcp(%s:%d)/%s?charset=utf8mb4\", User, Passwd, Host, Port, Database)\n    DB, err := sql.Open(\"mysql\", url) //第一个参数为驱动名\n    if err != nil {\n        return nil, err\n    }\n    //设置数据库最大连接数\n    DB.SetConnMaxLifetime(100)\n    //设置上数据库最大闲置连接数\n    DB.SetMaxIdleConns(10)\n    //验证连接\n    if err := DB.Ping(); err != nil{\n        fmt.Println(\"Connect fail\")\n        return nil, err\n    }\n    fmt.Println(\"Connect success\")\n    return DB, nil\n}\n```\n\n**插入数据**\n\n```go\nfunc Insert(db *sql.DB, name string) (int64, error){\n    // 准备 sql 语句\n    stmt, err := db.Prepare(\"insert into book (name) values (?)\")\n    defer stmt.Close()\n    if err != nil {\n        return 0, err\n    }\n    // 插入参数并执行语句\n    res, err := stmt.Exec(name)\n    if err != nil {\n        return 0, err\n    }\n    // 最后插入的 id\n    id, err := res.LastInsertId()\n    if err != nil {\n        return 0, err\n    }\n    return id, nil\n}\n```\n\n**使用事务**\n\n```go\nfunc InsertTx(db *sql.DB, name string) (int64, error){\n    // 开启事务\n    tx, err := db.Begin()\n    if err != nil {\n        return 0, err\n    }\n    // 准备 sql 语句\n    stmt, err := tx.Prepare(\"insert into book (name) values (?)\")\n    defer stmt.Close()\n    if err != nil {\n        return 0, err\n    }\n    // 插入参数并执行语句\n    res, err := stmt.Exec(name)\n    if err != nil {\n        // 出错时回滚\n        if rollbackErr := tx.Rollback(); rollbackErr != nil {\n            return 0, rollbackErr\n        }\n        return 0, err\n    }\n    // 提交\n    if commitErr := tx.Commit(); commitErr != nil {\n        return 0, commitErr\n    }\n    // 最后插入的 id\n    id, err := res.LastInsertId()\n    if err != nil {\n        return 0, err\n    }\n    return id, nil\n}\n```\n\n**查询**\n\n```go\ntype Book struct {\n    Id int64\n    Name string\n}\n\nfunc QueryById(db *sql.DB, id int64) {\n    var b Book\n    err := db.QueryRow(\"select * from book where id = ?\", id).Scan(&b.Id, &b.Name)\n    checkErr(err)\n    fmt.Println(b.Id, b.Name)\n\n}\n\nfunc Query(db *sql.DB) {\n    rows, err := db.Query(\"select * from book\")\n    checkErr(err)\n    defer rows.Close()\n\n    books := make([]Book, 0)\n    for rows.Next() {\n        var b Book\n        rows.Scan(&b.Id, &b.Name)\n        books = append(books, b)\n    }\n    fmt.Println(books)\n}\n```\n\n**修改**\n\n```go\nfunc Update(db *sql.DB, id int64) error {\n    stmt, err := db.Prepare(\"update book set name = ? where id = ?\")\n    defer stmt.Close()\n    if err != nil {\n        return err\n    }\n    _, err = stmt.Exec(\"update-name\", id)\n    if err != nil {\n        return err\n    }\n    return nil\n}\n```\n\n**删除**\n\n```go\nfunc DeleteById(db *sql.DB, id int64) error {\n    stmt, err := db.Prepare(\"delete from book where id = ?\")\n    defer stmt.Close()\n    if err != nil {\n        return err\n    }\n    _, err = stmt.Exec(id)\n    if err != nil {\n        return err\n    }\n    return nil\n}\n```\n\n完整代码见[demo](https://github.com/wxnacy/study/blob/master/goland/src/db/mysql.go)\n\n- [Package sql](https://golang.org/pkg/database/sql/)\n","source":"_posts/2018-09-08-go-mysql.md","raw":"---\ntitle: Go 如何操作 Mysql 数据库\ndate: 2018-09-08 18:30:23\ntags: [go]\n---\n\nGo 中提供了 `database/sql` 包来操作数据库，不过需要下载相应的数据库驱动才可以使用。\n\n<!-- more --><!-- toc -->\n\n**下载 Mysql 驱动**\n\n```bash\n$ go get github.com/go-sql-driver/mysql\n```\n\n**引入包**\n\n```go\nimport (\n    \"fmt\"\n    \"database/sql\"\n\n    _ \"github.com/go-sql-driver/mysql\"\n)\n```\n\n因为驱动我们并没有在代码中直接使用，所以使用 `_` 导入方式\n\n**创建连接**\n\n```go\nconst (\n    User = \"root\"\n    Passwd = \"wxnacy\"\n    Host = \"127.0.0.1\"\n    Port = 3306\n    Database = \"study\"\n)\n\nfunc Connect() (*sql.DB, error) {\n    url := fmt.Sprintf(\"%s:%s@tcp(%s:%d)/%s?charset=utf8mb4\", User, Passwd, Host, Port, Database)\n    DB, err := sql.Open(\"mysql\", url) //第一个参数为驱动名\n    if err != nil {\n        return nil, err\n    }\n    //设置数据库最大连接数\n    DB.SetConnMaxLifetime(100)\n    //设置上数据库最大闲置连接数\n    DB.SetMaxIdleConns(10)\n    //验证连接\n    if err := DB.Ping(); err != nil{\n        fmt.Println(\"Connect fail\")\n        return nil, err\n    }\n    fmt.Println(\"Connect success\")\n    return DB, nil\n}\n```\n\n**插入数据**\n\n```go\nfunc Insert(db *sql.DB, name string) (int64, error){\n    // 准备 sql 语句\n    stmt, err := db.Prepare(\"insert into book (name) values (?)\")\n    defer stmt.Close()\n    if err != nil {\n        return 0, err\n    }\n    // 插入参数并执行语句\n    res, err := stmt.Exec(name)\n    if err != nil {\n        return 0, err\n    }\n    // 最后插入的 id\n    id, err := res.LastInsertId()\n    if err != nil {\n        return 0, err\n    }\n    return id, nil\n}\n```\n\n**使用事务**\n\n```go\nfunc InsertTx(db *sql.DB, name string) (int64, error){\n    // 开启事务\n    tx, err := db.Begin()\n    if err != nil {\n        return 0, err\n    }\n    // 准备 sql 语句\n    stmt, err := tx.Prepare(\"insert into book (name) values (?)\")\n    defer stmt.Close()\n    if err != nil {\n        return 0, err\n    }\n    // 插入参数并执行语句\n    res, err := stmt.Exec(name)\n    if err != nil {\n        // 出错时回滚\n        if rollbackErr := tx.Rollback(); rollbackErr != nil {\n            return 0, rollbackErr\n        }\n        return 0, err\n    }\n    // 提交\n    if commitErr := tx.Commit(); commitErr != nil {\n        return 0, commitErr\n    }\n    // 最后插入的 id\n    id, err := res.LastInsertId()\n    if err != nil {\n        return 0, err\n    }\n    return id, nil\n}\n```\n\n**查询**\n\n```go\ntype Book struct {\n    Id int64\n    Name string\n}\n\nfunc QueryById(db *sql.DB, id int64) {\n    var b Book\n    err := db.QueryRow(\"select * from book where id = ?\", id).Scan(&b.Id, &b.Name)\n    checkErr(err)\n    fmt.Println(b.Id, b.Name)\n\n}\n\nfunc Query(db *sql.DB) {\n    rows, err := db.Query(\"select * from book\")\n    checkErr(err)\n    defer rows.Close()\n\n    books := make([]Book, 0)\n    for rows.Next() {\n        var b Book\n        rows.Scan(&b.Id, &b.Name)\n        books = append(books, b)\n    }\n    fmt.Println(books)\n}\n```\n\n**修改**\n\n```go\nfunc Update(db *sql.DB, id int64) error {\n    stmt, err := db.Prepare(\"update book set name = ? where id = ?\")\n    defer stmt.Close()\n    if err != nil {\n        return err\n    }\n    _, err = stmt.Exec(\"update-name\", id)\n    if err != nil {\n        return err\n    }\n    return nil\n}\n```\n\n**删除**\n\n```go\nfunc DeleteById(db *sql.DB, id int64) error {\n    stmt, err := db.Prepare(\"delete from book where id = ?\")\n    defer stmt.Close()\n    if err != nil {\n        return err\n    }\n    _, err = stmt.Exec(id)\n    if err != nil {\n        return err\n    }\n    return nil\n}\n```\n\n完整代码见[demo](https://github.com/wxnacy/study/blob/master/goland/src/db/mysql.go)\n\n- [Package sql](https://golang.org/pkg/database/sql/)\n","slug":"go-mysql","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ahe00mc5gqosubb5gqt"},{"title":"Wcrypto md5、sha1 加密命令行工具","date":"2018-09-10T15:26:04.000Z","_content":"\n[wcrypto](https://github.com/wxnacy/wcrypto) 是一款类似 md5sum 进行 md5、sha1 等多种模式加密的学习作品。\n\n<!-- more --><!-- toc -->\n\n## 安装\n\n### by go\n\n```bash\n$ go get github.com/wxnacy/wcrypto\n$ go install github.com/wxnacy/wcrypto/cmd/wcrypto\n```\n\n### by wget\n\n```bash\n$ wget https://raw.githubusercontent.com/wxnacy/wcrypto/master/bin/wcrypto\n$ sudo cp wcrypto /usr/bin\n```\n\n## 使用\n\n**语法**\n\n```bash\n$ wcrypto <mode> <string|file>...\n```\n\n**例子**\n\n```bash\n$ wcrypto md5 wxnacy\n1f806eb48b670c40af49a3f764ba086f wxnacy\n```\n\n```bash\n$ wcrypto md5 wxnacy README.md\n1f806eb48b670c40af49a3f764ba086f wxnacy\n114fcca532346c70863ab8deb6c1271c README.md\n```\n\n```bash\n$ curl -s http://baidu.com | wcrypto md5\na6c4b5d58389762e8e7f67c8a3515d3f\n```\n\n**mode**\n\nmode 取值为：`md5, sha1, sha256, sha512`\n\n","source":"_posts/2018-09-10-wcrypto.md","raw":"---\ntitle: Wcrypto md5、sha1 加密命令行工具\ndate: 2018-09-10 15:26:04\ntags: [go, 工具]\n---\n\n[wcrypto](https://github.com/wxnacy/wcrypto) 是一款类似 md5sum 进行 md5、sha1 等多种模式加密的学习作品。\n\n<!-- more --><!-- toc -->\n\n## 安装\n\n### by go\n\n```bash\n$ go get github.com/wxnacy/wcrypto\n$ go install github.com/wxnacy/wcrypto/cmd/wcrypto\n```\n\n### by wget\n\n```bash\n$ wget https://raw.githubusercontent.com/wxnacy/wcrypto/master/bin/wcrypto\n$ sudo cp wcrypto /usr/bin\n```\n\n## 使用\n\n**语法**\n\n```bash\n$ wcrypto <mode> <string|file>...\n```\n\n**例子**\n\n```bash\n$ wcrypto md5 wxnacy\n1f806eb48b670c40af49a3f764ba086f wxnacy\n```\n\n```bash\n$ wcrypto md5 wxnacy README.md\n1f806eb48b670c40af49a3f764ba086f wxnacy\n114fcca532346c70863ab8deb6c1271c README.md\n```\n\n```bash\n$ curl -s http://baidu.com | wcrypto md5\na6c4b5d58389762e8e7f67c8a3515d3f\n```\n\n**mode**\n\nmode 取值为：`md5, sha1, sha256, sha512`\n\n","slug":"wcrypto","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ahg00me5gqowi3khdha"},{"title":"Linux awk 文本处理神器","date":"2018-09-13T11:12:10.000Z","_content":"\n\nAWK是一种处理文本文件的语言，是一个强大的文本分析工具。\n\n<!-- more -->\n<!-- toc -->\n\nawk 的使用体系非常庞大，甚至可以当做一门语言来对待，本章只是作为入门，简单的了解这个命令行的厉害之处。\n\n## 开始\n\n首先准备测试类似的测试文本 `awktest`\n\n```bash\n$ cat > awktest << EOF\n281    sterapiserver    72.1.5.17:5051    tmrd    Sleep    291        NULL\n301    sterapiserver    72.1.5.17:5055    tmrd    Sleep    251        NULL\n303    sterapiserver    72.1.5.17:5055    tmrd    Sleep    254        NULL\n352    sterapiserver    72.1.9.13:3826    tmrd    Sleep    19        NULL\n354    sterapiserver    72.1.9.13:3827    tmrd    Sleep    16        NULL\n385    sterapi    72.1.5.17:5069    tmrd    Sleep    129        NULL\n386    sterapi    72.1.5.17:5069    tmrd    Sleep    126        NULL\n389    sterapi    72.1.5.17:5069    tmrd    Sleep    24        NULL\n391    sterapi    72.1.5.17:5070    tmrd    Sleep    117        NULL\n392    sterapi    72.1.5.17:5070    tmrd    Sleep    117        NULL\n393    sterapi    72.1.5.17:5071    tmte    Sleep    4        NULL\n395    sterapi    72.1.5.17:5071    tmte    Sleep    3        NULL\n396    sterapi    72.1.5.17:5071    tmte    Sleep    4        NULL\n397    sterapi    72.1.5.17:5072    tmte    Sleep    3        NULL\n398    sterapi    71.1.5.17:5072    tmte    Sleep    2        NULL\n399    sterapi    71.1.5.17:5072    tmte    Sleep    1        NULL\n400    sterapi    71.1.5.17:5072    tmrd    Sleep    4        NULL\n401    sterapi    71.1.9.13:3833    tmrd    Sleep    12        NULL\n402    sterapi    71.1.5.17:5072    tmrd    Sleep    4        NULL\n403    sterapi    72.1.5.17:5073    tmrd    Sleep    1        NULL\n404    sterapi    72.1.5.17:5073    tmrd    Sleep    5        NULL\n405    sterapiserver    72.1.5.17:5073    tmrd    Sleep    0        NULL\n406    sterapiserver    72.1.5.17:5074    tmrd    Sleep    2        NULL\n407    sterapiserver    72.1.5.17:5074    tmrd    Sleep    1        NULL\nEOF\n```\n\nawk 默认使用空格为分隔符，将文本分割为对应的列数，我们先来输出两列\n\n```bash\n$ awk '{print $1,$2}' awktest\n281 sterapiserver\n301 sterapiserver\n303 sterapiserver\n352 sterapiserver\n354 sterapiserver\n385 sterapi\n386 sterapi\n389 sterapi\n391 sterapi\n392 sterapi\n393 sterapi\n395 sterapi\n396 sterapi\n397 sterapi\n398 sterapi\n399 sterapi\n400 sterapi\n401 sterapi\n402 sterapi\n403 sterapi\n404 sterapi\n405 sterapiserver\n406 sterapiserver\n407 sterapiserver\n```\n\nawk 默认输出也是用空格为分隔符，需要注意的是 awk 语句只能用单引号包裹\n\n**根据条件语句输出**\n\n```bash\n$ awk '$1 < 392 && $2 == \"sterapi\" {print $1,$2}' awktest\n385 sterapi\n386 sterapi\n389 sterapi\n391 sterapi\n```\n\n运算符可以使用 `!=, >, <, >=, <=`\n\n**格式化输出**\n\n```bash\n$ awk '$1 < 392 {printf \"%s %-13s %s\\n\", $1,$2,$3}' awktest\n281 sterapiserver 72.1.5.17:5051\n301 sterapiserver 72.1.5.17:5055\n303 sterapiserver 72.1.5.17:5055\n352 sterapiserver 72.1.9.13:3826\n354 sterapiserver 72.1.9.13:3827\n385 sterapi       72.1.5.17:5069\n386 sterapi       72.1.5.17:5069\n389 sterapi       72.1.5.17:5069\n391 sterapi       72.1.5.17:5070\n```\n\n像大部分编程语言的格式化格式\n\n## 查找\n\nawk 可以像 grep 那样匹配数据，比如\n\n```bash\n$ awk '/301/' awktest\n301    sterapiserver    72.1.5.17:5055    tmrd    Sleep    251        NULL\n```\n\n`//` 中是正则表达式\n\n**匹配多个**\n\n```bash\n$ awk '/301|392/' awktest\n301    sterapiserver    72.1.5.17:5055    tmrd    Sleep    251        NULL\n392    sterapi    72.1.5.17:5070    tmrd    Sleep    117        NULL\n```\n\n**某个变量匹配**\n\n```bash\n$ awk '$1 ~ /38/' awktest\n385    sterapi    72.1.5.17:5069    tmrd    Sleep    129        NULL\n386    sterapi    72.1.5.17:5069    tmrd    Sleep    126        NULL\n389    sterapi    72.1.5.17:5069    tmrd    Sleep    24        NULL\n```\n\n**取反**\n\n```bash\n$ awk '!/38/' awktest\n```\n\n## 变量\n\n### 内置变量\n\n`$1, $2` 都是 awk 的内置变量，它还有这些变量\n\n- $n\t当前记录的第n个字段，字段间由FS分隔\n- $0\t完整的输入记录\n- ARGC\t命令行参数的数目\n- ARGIND\t命令行中当前文件的位置(从0开始算)\n- ARGV\t包含命令行参数的数组\n- CONVFMT\t数字转换格式(默认值为%.6g)ENVIRON环境变量关联数组\n- ERRNO\t最后一个系统错误的描述\n- FIELDWIDTHS\t字段宽度列表(用空格键分隔)\n- FILENAME\t当前文件名\n- FNR\t各文件分别计数的行号\n- FS\t字段分隔符(默认是任何空格)\n- IGNORECASE\t如果为真，则进行忽略大小写的匹配\n- NF\t一条记录的字段的数目\n- NR\t已经读出的记录数，就是行号，从1开始\n- OFMT\t数字的输出格式(默认值是%.6g)\n- OFS\t输出记录分隔符（输出换行符），输出时用指定的符号代替换行符\n- ORS\t输出记录分隔符(默认值是一个换行符)\n- RLENGTH\t由match函数所匹配的字符串的长度\n- RS\t记录分隔符(默认是一个换行符)\n- RSTART\t由match函数所匹配的字符串的第一个位置\n- SUBSEP\t数组下标分隔符(默认值是/034)\n\n**输出行号**\n\n```bash\n$ awk 'NR > 7 && NR < 12 {printf \"%02d %s %s %s\\n\", NR, $1, $2, $3}' awktest\n08 389 sterapi 72.1.5.17:5069\n09 391 sterapi 72.1.5.17:5070\n10 392 sterapi 72.1.5.17:5070\n11 393 sterapi 72.1.5.17:5071\n```\n\n### 自定义\n\n```bash\n$ awk -v x=$a 'NR < 5 {print $1 + x}' awktest\n282\n302\n304\n353\n```\n\n### 环境变量\n\n```bash\n$ export b=2\n$ awk 'NR < 5 {print $1 + ENVIRON[\"b\"]}' awktest\n283\n303\n305\n354\n```\n\n## 分隔符\n\n### 输入分隔符\n\nawk 默认的输入分隔符是空格，我们可以通过改变 FS 变量来更改分隔符\n\n**方法一**\n\n```bash\n$ awk 'BEGIN{FS=\".\"} NR < 5 {print $1,$2}' awktest\n281    sterapiserver    72 1\n301    sterapiserver    72 1\n303    sterapiserver    72 1\n352    sterapiserver    72 1\n```\n\n**方法二**\n\n```bash\n$ awk -v FS=. ' NR < 5 {print $1,$2}' awktest\n281    sterapiserver    72 1\n301    sterapiserver    72 1\n303    sterapiserver    72 1\n352    sterapiserver    72 1\n```\n\n**方法三**\n\n还可以通过 `-F` 参数来实现\n\n```bash\n$ awk -F. ' NR < 5 {print $1,$2}' awktest\n281    sterapiserver    72 1\n301    sterapiserver    72 1\n303    sterapiserver    72 1\n352    sterapiserver    72 1\n```\n\n### 输出分隔符\n\n默认的输出分隔符为空格，并且输出变量需要使用逗号分割，不然就不会使用分隔符\n\n```bash\n$ awk ' NR < 5 {print $1 $2}' awktest\n281sterapiserver\n301sterapiserver\n303sterapiserver\n352sterapiserver\n```\n\n同样我们可以给内置变量 OFS 赋值来进行改变\n\n```bash\n$ awk -v OFS='--' ' NR < 5 {print $1, $2}' awktest\n281--sterapiserver\n301--sterapiserver\n303--sterapiserver\n352--sterapiserver\n```\n\n## 代码块\n\n上面修改输入分隔符出现了 `BEGIN{}` 样式的语句，在 awk 中有三种代码块\n\n- `BEGIN{}` 执行前的语句\n- `{}` 处理每一行时执行的语句\n- `END{}` 处理完每一行后执行的语句\n\n一个简单的例子\n\n```bash\n$ awk 'BEGIN { total=0; print \"------------------\" } NR < 5 {   total += $1; print $1 } END { print \"------------------\"; printf \"Total %d\\n\", total}' awktest\n------------------\n281\n301\n303\n352\n------------------\nTotal 1237\n```\n\n## 编写脚本\n\n加上 `BEGIN, END` 再在命令行中使用就太复杂了，并且可读性还很差，awk 支持将语法写到文件中，使用 `-f` 参数调用\n\n**创建脚本**\n\n```bash\n$ touch awkconf\n$ vim awkconf\n\n#!/usr/bin/env awk -f\n\nBEGIN {\n    total = 0\n    print \"--------\"\n}\n\n{\n    if (NR < 5) {\n        total += $1\n        print $1\n    }\n}\n\nEND {\n    print \"--------\"\n    printf \"Total %d\\n\", total\n}\n```\n\n**运行**\n\n```bash\n$ awk -f awkconf awktest\n```\n\n**执行脚本**\n\n我们也可能直接执行脚本，但首先要给文件添加执行权限\n\n```bash\n$ chmod +x awkconf\n$ ./awkconf awktest\n```\n\n\n## 参考文章\n\n- [Linux awk 命令](http://www.runoob.com/linux/linux-comm-awk.html)\n- [AWK 简明教程](https://coolshell.cn/articles/9070.html)\n","source":"_posts/2018-09-13-linux-awk.md","raw":"---\ntitle: Linux awk 文本处理神器\ntags:\n  - linux\n  - awk\ndate: 2018-09-13 11:12:10\n---\n\n\nAWK是一种处理文本文件的语言，是一个强大的文本分析工具。\n\n<!-- more -->\n<!-- toc -->\n\nawk 的使用体系非常庞大，甚至可以当做一门语言来对待，本章只是作为入门，简单的了解这个命令行的厉害之处。\n\n## 开始\n\n首先准备测试类似的测试文本 `awktest`\n\n```bash\n$ cat > awktest << EOF\n281    sterapiserver    72.1.5.17:5051    tmrd    Sleep    291        NULL\n301    sterapiserver    72.1.5.17:5055    tmrd    Sleep    251        NULL\n303    sterapiserver    72.1.5.17:5055    tmrd    Sleep    254        NULL\n352    sterapiserver    72.1.9.13:3826    tmrd    Sleep    19        NULL\n354    sterapiserver    72.1.9.13:3827    tmrd    Sleep    16        NULL\n385    sterapi    72.1.5.17:5069    tmrd    Sleep    129        NULL\n386    sterapi    72.1.5.17:5069    tmrd    Sleep    126        NULL\n389    sterapi    72.1.5.17:5069    tmrd    Sleep    24        NULL\n391    sterapi    72.1.5.17:5070    tmrd    Sleep    117        NULL\n392    sterapi    72.1.5.17:5070    tmrd    Sleep    117        NULL\n393    sterapi    72.1.5.17:5071    tmte    Sleep    4        NULL\n395    sterapi    72.1.5.17:5071    tmte    Sleep    3        NULL\n396    sterapi    72.1.5.17:5071    tmte    Sleep    4        NULL\n397    sterapi    72.1.5.17:5072    tmte    Sleep    3        NULL\n398    sterapi    71.1.5.17:5072    tmte    Sleep    2        NULL\n399    sterapi    71.1.5.17:5072    tmte    Sleep    1        NULL\n400    sterapi    71.1.5.17:5072    tmrd    Sleep    4        NULL\n401    sterapi    71.1.9.13:3833    tmrd    Sleep    12        NULL\n402    sterapi    71.1.5.17:5072    tmrd    Sleep    4        NULL\n403    sterapi    72.1.5.17:5073    tmrd    Sleep    1        NULL\n404    sterapi    72.1.5.17:5073    tmrd    Sleep    5        NULL\n405    sterapiserver    72.1.5.17:5073    tmrd    Sleep    0        NULL\n406    sterapiserver    72.1.5.17:5074    tmrd    Sleep    2        NULL\n407    sterapiserver    72.1.5.17:5074    tmrd    Sleep    1        NULL\nEOF\n```\n\nawk 默认使用空格为分隔符，将文本分割为对应的列数，我们先来输出两列\n\n```bash\n$ awk '{print $1,$2}' awktest\n281 sterapiserver\n301 sterapiserver\n303 sterapiserver\n352 sterapiserver\n354 sterapiserver\n385 sterapi\n386 sterapi\n389 sterapi\n391 sterapi\n392 sterapi\n393 sterapi\n395 sterapi\n396 sterapi\n397 sterapi\n398 sterapi\n399 sterapi\n400 sterapi\n401 sterapi\n402 sterapi\n403 sterapi\n404 sterapi\n405 sterapiserver\n406 sterapiserver\n407 sterapiserver\n```\n\nawk 默认输出也是用空格为分隔符，需要注意的是 awk 语句只能用单引号包裹\n\n**根据条件语句输出**\n\n```bash\n$ awk '$1 < 392 && $2 == \"sterapi\" {print $1,$2}' awktest\n385 sterapi\n386 sterapi\n389 sterapi\n391 sterapi\n```\n\n运算符可以使用 `!=, >, <, >=, <=`\n\n**格式化输出**\n\n```bash\n$ awk '$1 < 392 {printf \"%s %-13s %s\\n\", $1,$2,$3}' awktest\n281 sterapiserver 72.1.5.17:5051\n301 sterapiserver 72.1.5.17:5055\n303 sterapiserver 72.1.5.17:5055\n352 sterapiserver 72.1.9.13:3826\n354 sterapiserver 72.1.9.13:3827\n385 sterapi       72.1.5.17:5069\n386 sterapi       72.1.5.17:5069\n389 sterapi       72.1.5.17:5069\n391 sterapi       72.1.5.17:5070\n```\n\n像大部分编程语言的格式化格式\n\n## 查找\n\nawk 可以像 grep 那样匹配数据，比如\n\n```bash\n$ awk '/301/' awktest\n301    sterapiserver    72.1.5.17:5055    tmrd    Sleep    251        NULL\n```\n\n`//` 中是正则表达式\n\n**匹配多个**\n\n```bash\n$ awk '/301|392/' awktest\n301    sterapiserver    72.1.5.17:5055    tmrd    Sleep    251        NULL\n392    sterapi    72.1.5.17:5070    tmrd    Sleep    117        NULL\n```\n\n**某个变量匹配**\n\n```bash\n$ awk '$1 ~ /38/' awktest\n385    sterapi    72.1.5.17:5069    tmrd    Sleep    129        NULL\n386    sterapi    72.1.5.17:5069    tmrd    Sleep    126        NULL\n389    sterapi    72.1.5.17:5069    tmrd    Sleep    24        NULL\n```\n\n**取反**\n\n```bash\n$ awk '!/38/' awktest\n```\n\n## 变量\n\n### 内置变量\n\n`$1, $2` 都是 awk 的内置变量，它还有这些变量\n\n- $n\t当前记录的第n个字段，字段间由FS分隔\n- $0\t完整的输入记录\n- ARGC\t命令行参数的数目\n- ARGIND\t命令行中当前文件的位置(从0开始算)\n- ARGV\t包含命令行参数的数组\n- CONVFMT\t数字转换格式(默认值为%.6g)ENVIRON环境变量关联数组\n- ERRNO\t最后一个系统错误的描述\n- FIELDWIDTHS\t字段宽度列表(用空格键分隔)\n- FILENAME\t当前文件名\n- FNR\t各文件分别计数的行号\n- FS\t字段分隔符(默认是任何空格)\n- IGNORECASE\t如果为真，则进行忽略大小写的匹配\n- NF\t一条记录的字段的数目\n- NR\t已经读出的记录数，就是行号，从1开始\n- OFMT\t数字的输出格式(默认值是%.6g)\n- OFS\t输出记录分隔符（输出换行符），输出时用指定的符号代替换行符\n- ORS\t输出记录分隔符(默认值是一个换行符)\n- RLENGTH\t由match函数所匹配的字符串的长度\n- RS\t记录分隔符(默认是一个换行符)\n- RSTART\t由match函数所匹配的字符串的第一个位置\n- SUBSEP\t数组下标分隔符(默认值是/034)\n\n**输出行号**\n\n```bash\n$ awk 'NR > 7 && NR < 12 {printf \"%02d %s %s %s\\n\", NR, $1, $2, $3}' awktest\n08 389 sterapi 72.1.5.17:5069\n09 391 sterapi 72.1.5.17:5070\n10 392 sterapi 72.1.5.17:5070\n11 393 sterapi 72.1.5.17:5071\n```\n\n### 自定义\n\n```bash\n$ awk -v x=$a 'NR < 5 {print $1 + x}' awktest\n282\n302\n304\n353\n```\n\n### 环境变量\n\n```bash\n$ export b=2\n$ awk 'NR < 5 {print $1 + ENVIRON[\"b\"]}' awktest\n283\n303\n305\n354\n```\n\n## 分隔符\n\n### 输入分隔符\n\nawk 默认的输入分隔符是空格，我们可以通过改变 FS 变量来更改分隔符\n\n**方法一**\n\n```bash\n$ awk 'BEGIN{FS=\".\"} NR < 5 {print $1,$2}' awktest\n281    sterapiserver    72 1\n301    sterapiserver    72 1\n303    sterapiserver    72 1\n352    sterapiserver    72 1\n```\n\n**方法二**\n\n```bash\n$ awk -v FS=. ' NR < 5 {print $1,$2}' awktest\n281    sterapiserver    72 1\n301    sterapiserver    72 1\n303    sterapiserver    72 1\n352    sterapiserver    72 1\n```\n\n**方法三**\n\n还可以通过 `-F` 参数来实现\n\n```bash\n$ awk -F. ' NR < 5 {print $1,$2}' awktest\n281    sterapiserver    72 1\n301    sterapiserver    72 1\n303    sterapiserver    72 1\n352    sterapiserver    72 1\n```\n\n### 输出分隔符\n\n默认的输出分隔符为空格，并且输出变量需要使用逗号分割，不然就不会使用分隔符\n\n```bash\n$ awk ' NR < 5 {print $1 $2}' awktest\n281sterapiserver\n301sterapiserver\n303sterapiserver\n352sterapiserver\n```\n\n同样我们可以给内置变量 OFS 赋值来进行改变\n\n```bash\n$ awk -v OFS='--' ' NR < 5 {print $1, $2}' awktest\n281--sterapiserver\n301--sterapiserver\n303--sterapiserver\n352--sterapiserver\n```\n\n## 代码块\n\n上面修改输入分隔符出现了 `BEGIN{}` 样式的语句，在 awk 中有三种代码块\n\n- `BEGIN{}` 执行前的语句\n- `{}` 处理每一行时执行的语句\n- `END{}` 处理完每一行后执行的语句\n\n一个简单的例子\n\n```bash\n$ awk 'BEGIN { total=0; print \"------------------\" } NR < 5 {   total += $1; print $1 } END { print \"------------------\"; printf \"Total %d\\n\", total}' awktest\n------------------\n281\n301\n303\n352\n------------------\nTotal 1237\n```\n\n## 编写脚本\n\n加上 `BEGIN, END` 再在命令行中使用就太复杂了，并且可读性还很差，awk 支持将语法写到文件中，使用 `-f` 参数调用\n\n**创建脚本**\n\n```bash\n$ touch awkconf\n$ vim awkconf\n\n#!/usr/bin/env awk -f\n\nBEGIN {\n    total = 0\n    print \"--------\"\n}\n\n{\n    if (NR < 5) {\n        total += $1\n        print $1\n    }\n}\n\nEND {\n    print \"--------\"\n    printf \"Total %d\\n\", total\n}\n```\n\n**运行**\n\n```bash\n$ awk -f awkconf awktest\n```\n\n**执行脚本**\n\n我们也可能直接执行脚本，但首先要给文件添加执行权限\n\n```bash\n$ chmod +x awkconf\n$ ./awkconf awktest\n```\n\n\n## 参考文章\n\n- [Linux awk 命令](http://www.runoob.com/linux/linux-comm-awk.html)\n- [AWK 简明教程](https://coolshell.cn/articles/9070.html)\n","slug":"linux-awk","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ahh00mg5gqo68i4zzof"},{"title":"Linux 神级流编辑器命令工具 sed","date":"2018-09-11T17:24:12.000Z","_content":"\n\n> sed（意为流编辑器，源自英语“stream editor”的缩写）是Unix常见的命令行程序。sed用来把文档或字符串里面的文字经过一系列编辑命令转换为另一种格式输出。sed通常用来匹配一个或多个正则表达式的文本进行处理。\n\n<!-- more --><!-- toc -->\n我们先简单了解下 sed\n\n## 开始\n\n**准备数据**\n\n```bash\n$ cat > test << \"EOF\"\nThis is my cat\n  my cat's name is betty\nThis is my dog\n  my dog's name is frank\nThis is my fish\n  my fish's name is george\nThis is my goat\n  my goat's name is adam\nEOF\n```\n\n**替换**\n\n```bash\n$ sed 's/This/That/g' test\nThat is my cat\n  my cat's name is betty\nThat is my dog\n  my dog's name is frank\nThat is my fish\n  my fish's name is george\nThat is my goat\n  my goat's name is adam\n```\n\n我们将每行输出的 `This` 替换为 `That`，sed 默认输出是将修改的文件输出到屏幕上，如果想要修改原文件，则需要加上 `-i` 参数\n\n```bash\n$ sed -i 's/This/That/g' test\n```\n\n修改原文件的命令需要在 Linux 中运行，Mac 中略有不同。\n\n原则上这个操作习惯并不好，安全的方式是将输出的结果通过管道输入到另一个文件中\n\n```bash\n$ sed 's/This/That/g' test > test1\n```\n\n## 动作\n\n从上面的简单例子，可以得到 sed 的语法为\n\n```bash\n$ sed [参数] <动作> [file]\n```\n\n动作规则为：`n1,n2 action args`\n\n`n1,n2` 为执行动作的行数范围，不是必传\n\naction 取值为：\n\n- a：新增，a 的后面可以接字符串，而这些字符串会在新的一行出现（目前的下一行）。\n- c：替换，c 的后面可以接字符串，这些字符串可以替换n1，n2之间的行！\n- d：删除，因为是删除，所以 d 后面通常不接任何参数。\n- i：插入，i 的后面可以接字符串，而这些字符串会在新的一行出现（目前的上一行）。\n- p：打印，也就是将某个选择的数据打印出来，通常 p 会与参数 sed -n 一起运行。\n- s：替换，可以直接进行替换工作。通常这个 s 的动作可以匹配正则表达式！\n\n### s 替换\n\ns 刚才有过例子，它支持正则匹配的方式对文本进行替换，先了解一点正则的知识\n\n- ^ 表示一行的开头。如：/^#/ 以#开头的匹配。\n- $ 表示一行的结尾。如：/}$/ 以}结尾的匹配。\n- \\< 表示词首。 如：\\<abc 表示以 abc 为首的詞。\n- \\> 表示词尾。 如：abc\\> 表示以 abc 結尾的詞。\n- `.` 表示任何单个字符。\n- `*` 表示某个字符出现了0次或多次。\n- `[ ]` 字符集合。 如：[abc] 表示匹配a或b或c，还有 [a-zA-Z] 表示匹配所有的26个字符。如果其中有^表示反，如 [^a] 表示非a的字符\n\n举几个最常用的例子\n\n**行开头添加字符**\n\n```bash\n$ sed 's/^/# /g' test\n\n# This is my cat\n#   my cat's name is betty\n# This is my dog\n#   my dog's name is frank\n# This is my fish\n#   my fish's name is george\n# This is my goat\n#   my goat's name is adam\n```\n\n**行尾添加字符**\n\n```bash\n$ sed 's/$/  ----/g' test\n\nThis is my cat  ----\n  my cat's name is betty  ----\nThis is my dog  ----\n  my dog's name is frank  ----\nThis is my fish  ----\n  my fish's name is george  ----\nThis is my goat  ----\n  my goat's name is adam  ----\n```\n\n**替换指定行**\n\n```bash\n$ sed '3s/my/your/g' test\n\nThis is my cat\n  my cat's name is betty\nThis is your dog\n  my dog's name is frank\nThis is my fish\n  my fish's name is george\nThis is my goat\n  my goat's name is adam\n```\n\n**替换范围行**\n\n```bash\n$ sed  '3,5s/my/your/g'  test\n\nThis is my cat\n  my cat's name is betty\nThis is your dog\n  your dog's name is frank\nThis is your fish\n  my fish's name is george\nThis is my goat\n  my goat's name is adam\n```\n\n**替换每行的第 n 个匹配项**\n\n```bash\n$ sed  's/s/S/2'  test\n\nThis iS my cat\n  my cat's name iS betty\nThis iS my dog\n  my dog's name iS frank\nThis iS my fish\n  my fish'S name is george\nThis iS my goat\n  my goat's name iS adam\n```\n\n**替换多个匹配规则**\n\n```bash\n$ sed  's/my/your/g; s/is/Is/g'  test\n\nThIs Is your cat\n  your cat's name Is betty\nThIs Is your dog\n  your dog's name Is frank\nThIs Is your fIsh\n  your fIsh's name Is george\nThIs Is your goat\n  your goat's name Is adam\n```\n\n或者使用参数 `-e`\n\n```bash\n$ sed -e 's/my/your/g' -e 's/is/Is/g'  test\n```\n\n**匹配项作为变量**\n\n使用 `&` 作为匹配项的变量，可以在变量旁边加上符号等\n\n```bash\n$ sed 's/my/[&]/g'  test\n\nThis is [my] cat\n  [my] cat's name is betty\nThis is [my] dog\n  [my] dog's name is frank\nThis is [my] fish\n  [my] fish's name is george\nThis is [my] goat\n  [my] goat's name is adam\n```\n\n**奇数行替换**\n\n```bash\n$ sed 'N;s/my/your/' test\n\nThis is your cat\n  my cat's name is betty\nThis is your dog\n  my dog's name is frank\nThis is your fish\n  my fish's name is george\nThis is your goat\n  my goat's name is adam\n```\n\n```bash\n$ sed 'N;s/\\n/,/' test\nThis is my cat,  my cat's name is betty\nThis is my dog,  my dog's name is frank\nThis is my fish,  my fish's name is george\nThis is my goat,  my goat's name is adam\n```\n\n### i 插入\n\ni 可以在某一行前面插入数据\n\n**在第二行前加入**\n\n```bash\n$ sed  '2 i ---------------' test\n\nThis is my cat\n---------------\n  my cat's name is betty\nThis is my dog\n  my dog's name is frank\nThis is my fish\n  my fish's name is george\nThis is my goat\n  my goat's name is adam\n```\n\n**在第一和第二行插入**\n\n```bash\n$ sed  '1,2 i ---------------' test\n---------------\nThis is my cat\n---------------\n  my cat's name is betty\nThis is my dog\n  my dog's name is frank\nThis is my fish\n  my fish's name is george\nThis is my goat\n  my goat's name is adam\n```\n\n**匹配指定字符行插入**\n\n```bash\n$ sed '/my/ i -------' test\n\n-------\nThis is my cat\n-------\n  my cat's name is betty\n-------\nThis is my dog\n-------\n  my dog's name is frank\n-------\nThis is my fish\n-------\n  my fish's name is george\n-------\nThis is my goat\n-------\n  my goat's name is adam\n```\n\n### a 新增\n\na 在某一行后面新增数据\n\n```bash\n$ sed  '2 a ---------------' test\n\nThis is my cat\n  my cat's name is betty\n---------------\nThis is my dog\n  my dog's name is frank\nThis is my fish\n  my fish's name is george\nThis is my goat\n  my goat's name is adam\n```\n\n### c 替换\n\nc 的替换是正行的替换\n\n```bash\n$ sed  '2 c My name is wxnacy' test\n\nThis is my cat\nMy name is wxnacy\nThis is my dog\n  my dog's name is frank\nThis is my fish\n  my fish's name is george\nThis is my goat\n  my goat's name is adam\n```\n\n在运行该命令时，结果可能会不明显，因为 sed 默认是将最终的文本全部输出，我们也可以加上 `-n` 参数只输出修改行\n\n```bash\n$ sed -n '2 c My name is wxnacy' test\nMy name is wxnacy\n```\n\n### d 删除\n\nd 可以删除指定或匹配行\n\n```bash\n$ sed '1 d' test\n\n  my cat's name is betty\nThis is my dog\n  my dog's name is frank\nThis is my fish\n  my fish's name is george\nThis is my goat\n  my goat's name is adam\n```\n\n```bash\n$ sed '/dog/ d' test\nThis is my cat\n  my cat's name is betty\nThis is my fish\n  my fish's name is george\nThis is my goat\n  my goat's name is adam\n```\n\n```bash\n$ sed '3,$ d' test\nThis is my cat\n  my cat's name is betty\n```\n\n### p 打印\n\np 可以将匹配行打印出来，可以理解为 grep 命令\n\n```bash\n$ sed -n '2 p' test\n  my cat's name is betty\n```\n\n```bash\n$ sed -n '2,/goat/ p' test\n  my cat's name is betty\nThis is my dog\n  my dog's name is frank\nThis is my fish\n  my fish's name is george\nThis is my goat\n```\n\n**参数文章**\n\n- [SED 简明教程](https://coolshell.cn/articles/9104.html)\n- [sed, a stream editor](https://www.gnu.org/software/sed/manual/sed.html)\n- [玩转Linux - 神级工具 sed & awk](https://segmentfault.com/a/1190000005720358)\n- [详解流编辑器 sed 和 编程语言 awk](https://blog.csdn.net/jnu_simba/article/details/19501853)\n- [sed命令](http://man.linuxde.net/sed)\n","source":"_posts/2018-09-11-linux-sed.md","raw":"---\ntitle: Linux 神级流编辑器命令工具 sed\ntags:\n  - linux\ndate: 2018-09-11 17:24:12\n---\n\n\n> sed（意为流编辑器，源自英语“stream editor”的缩写）是Unix常见的命令行程序。sed用来把文档或字符串里面的文字经过一系列编辑命令转换为另一种格式输出。sed通常用来匹配一个或多个正则表达式的文本进行处理。\n\n<!-- more --><!-- toc -->\n我们先简单了解下 sed\n\n## 开始\n\n**准备数据**\n\n```bash\n$ cat > test << \"EOF\"\nThis is my cat\n  my cat's name is betty\nThis is my dog\n  my dog's name is frank\nThis is my fish\n  my fish's name is george\nThis is my goat\n  my goat's name is adam\nEOF\n```\n\n**替换**\n\n```bash\n$ sed 's/This/That/g' test\nThat is my cat\n  my cat's name is betty\nThat is my dog\n  my dog's name is frank\nThat is my fish\n  my fish's name is george\nThat is my goat\n  my goat's name is adam\n```\n\n我们将每行输出的 `This` 替换为 `That`，sed 默认输出是将修改的文件输出到屏幕上，如果想要修改原文件，则需要加上 `-i` 参数\n\n```bash\n$ sed -i 's/This/That/g' test\n```\n\n修改原文件的命令需要在 Linux 中运行，Mac 中略有不同。\n\n原则上这个操作习惯并不好，安全的方式是将输出的结果通过管道输入到另一个文件中\n\n```bash\n$ sed 's/This/That/g' test > test1\n```\n\n## 动作\n\n从上面的简单例子，可以得到 sed 的语法为\n\n```bash\n$ sed [参数] <动作> [file]\n```\n\n动作规则为：`n1,n2 action args`\n\n`n1,n2` 为执行动作的行数范围，不是必传\n\naction 取值为：\n\n- a：新增，a 的后面可以接字符串，而这些字符串会在新的一行出现（目前的下一行）。\n- c：替换，c 的后面可以接字符串，这些字符串可以替换n1，n2之间的行！\n- d：删除，因为是删除，所以 d 后面通常不接任何参数。\n- i：插入，i 的后面可以接字符串，而这些字符串会在新的一行出现（目前的上一行）。\n- p：打印，也就是将某个选择的数据打印出来，通常 p 会与参数 sed -n 一起运行。\n- s：替换，可以直接进行替换工作。通常这个 s 的动作可以匹配正则表达式！\n\n### s 替换\n\ns 刚才有过例子，它支持正则匹配的方式对文本进行替换，先了解一点正则的知识\n\n- ^ 表示一行的开头。如：/^#/ 以#开头的匹配。\n- $ 表示一行的结尾。如：/}$/ 以}结尾的匹配。\n- \\< 表示词首。 如：\\<abc 表示以 abc 为首的詞。\n- \\> 表示词尾。 如：abc\\> 表示以 abc 結尾的詞。\n- `.` 表示任何单个字符。\n- `*` 表示某个字符出现了0次或多次。\n- `[ ]` 字符集合。 如：[abc] 表示匹配a或b或c，还有 [a-zA-Z] 表示匹配所有的26个字符。如果其中有^表示反，如 [^a] 表示非a的字符\n\n举几个最常用的例子\n\n**行开头添加字符**\n\n```bash\n$ sed 's/^/# /g' test\n\n# This is my cat\n#   my cat's name is betty\n# This is my dog\n#   my dog's name is frank\n# This is my fish\n#   my fish's name is george\n# This is my goat\n#   my goat's name is adam\n```\n\n**行尾添加字符**\n\n```bash\n$ sed 's/$/  ----/g' test\n\nThis is my cat  ----\n  my cat's name is betty  ----\nThis is my dog  ----\n  my dog's name is frank  ----\nThis is my fish  ----\n  my fish's name is george  ----\nThis is my goat  ----\n  my goat's name is adam  ----\n```\n\n**替换指定行**\n\n```bash\n$ sed '3s/my/your/g' test\n\nThis is my cat\n  my cat's name is betty\nThis is your dog\n  my dog's name is frank\nThis is my fish\n  my fish's name is george\nThis is my goat\n  my goat's name is adam\n```\n\n**替换范围行**\n\n```bash\n$ sed  '3,5s/my/your/g'  test\n\nThis is my cat\n  my cat's name is betty\nThis is your dog\n  your dog's name is frank\nThis is your fish\n  my fish's name is george\nThis is my goat\n  my goat's name is adam\n```\n\n**替换每行的第 n 个匹配项**\n\n```bash\n$ sed  's/s/S/2'  test\n\nThis iS my cat\n  my cat's name iS betty\nThis iS my dog\n  my dog's name iS frank\nThis iS my fish\n  my fish'S name is george\nThis iS my goat\n  my goat's name iS adam\n```\n\n**替换多个匹配规则**\n\n```bash\n$ sed  's/my/your/g; s/is/Is/g'  test\n\nThIs Is your cat\n  your cat's name Is betty\nThIs Is your dog\n  your dog's name Is frank\nThIs Is your fIsh\n  your fIsh's name Is george\nThIs Is your goat\n  your goat's name Is adam\n```\n\n或者使用参数 `-e`\n\n```bash\n$ sed -e 's/my/your/g' -e 's/is/Is/g'  test\n```\n\n**匹配项作为变量**\n\n使用 `&` 作为匹配项的变量，可以在变量旁边加上符号等\n\n```bash\n$ sed 's/my/[&]/g'  test\n\nThis is [my] cat\n  [my] cat's name is betty\nThis is [my] dog\n  [my] dog's name is frank\nThis is [my] fish\n  [my] fish's name is george\nThis is [my] goat\n  [my] goat's name is adam\n```\n\n**奇数行替换**\n\n```bash\n$ sed 'N;s/my/your/' test\n\nThis is your cat\n  my cat's name is betty\nThis is your dog\n  my dog's name is frank\nThis is your fish\n  my fish's name is george\nThis is your goat\n  my goat's name is adam\n```\n\n```bash\n$ sed 'N;s/\\n/,/' test\nThis is my cat,  my cat's name is betty\nThis is my dog,  my dog's name is frank\nThis is my fish,  my fish's name is george\nThis is my goat,  my goat's name is adam\n```\n\n### i 插入\n\ni 可以在某一行前面插入数据\n\n**在第二行前加入**\n\n```bash\n$ sed  '2 i ---------------' test\n\nThis is my cat\n---------------\n  my cat's name is betty\nThis is my dog\n  my dog's name is frank\nThis is my fish\n  my fish's name is george\nThis is my goat\n  my goat's name is adam\n```\n\n**在第一和第二行插入**\n\n```bash\n$ sed  '1,2 i ---------------' test\n---------------\nThis is my cat\n---------------\n  my cat's name is betty\nThis is my dog\n  my dog's name is frank\nThis is my fish\n  my fish's name is george\nThis is my goat\n  my goat's name is adam\n```\n\n**匹配指定字符行插入**\n\n```bash\n$ sed '/my/ i -------' test\n\n-------\nThis is my cat\n-------\n  my cat's name is betty\n-------\nThis is my dog\n-------\n  my dog's name is frank\n-------\nThis is my fish\n-------\n  my fish's name is george\n-------\nThis is my goat\n-------\n  my goat's name is adam\n```\n\n### a 新增\n\na 在某一行后面新增数据\n\n```bash\n$ sed  '2 a ---------------' test\n\nThis is my cat\n  my cat's name is betty\n---------------\nThis is my dog\n  my dog's name is frank\nThis is my fish\n  my fish's name is george\nThis is my goat\n  my goat's name is adam\n```\n\n### c 替换\n\nc 的替换是正行的替换\n\n```bash\n$ sed  '2 c My name is wxnacy' test\n\nThis is my cat\nMy name is wxnacy\nThis is my dog\n  my dog's name is frank\nThis is my fish\n  my fish's name is george\nThis is my goat\n  my goat's name is adam\n```\n\n在运行该命令时，结果可能会不明显，因为 sed 默认是将最终的文本全部输出，我们也可以加上 `-n` 参数只输出修改行\n\n```bash\n$ sed -n '2 c My name is wxnacy' test\nMy name is wxnacy\n```\n\n### d 删除\n\nd 可以删除指定或匹配行\n\n```bash\n$ sed '1 d' test\n\n  my cat's name is betty\nThis is my dog\n  my dog's name is frank\nThis is my fish\n  my fish's name is george\nThis is my goat\n  my goat's name is adam\n```\n\n```bash\n$ sed '/dog/ d' test\nThis is my cat\n  my cat's name is betty\nThis is my fish\n  my fish's name is george\nThis is my goat\n  my goat's name is adam\n```\n\n```bash\n$ sed '3,$ d' test\nThis is my cat\n  my cat's name is betty\n```\n\n### p 打印\n\np 可以将匹配行打印出来，可以理解为 grep 命令\n\n```bash\n$ sed -n '2 p' test\n  my cat's name is betty\n```\n\n```bash\n$ sed -n '2,/goat/ p' test\n  my cat's name is betty\nThis is my dog\n  my dog's name is frank\nThis is my fish\n  my fish's name is george\nThis is my goat\n```\n\n**参数文章**\n\n- [SED 简明教程](https://coolshell.cn/articles/9104.html)\n- [sed, a stream editor](https://www.gnu.org/software/sed/manual/sed.html)\n- [玩转Linux - 神级工具 sed & awk](https://segmentfault.com/a/1190000005720358)\n- [详解流编辑器 sed 和 编程语言 awk](https://blog.csdn.net/jnu_simba/article/details/19501853)\n- [sed命令](http://man.linuxde.net/sed)\n","slug":"linux-sed","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ahi00mi5gqoexhlmlj2"},{"title":"Linux seq 命令行工具","date":"2018-09-12T14:47:23.000Z","_content":"\n\nLinux seq 命令可以输出一个范围内的所有整数\n\n<!-- more --><!-- toc -->\n\n## 开始\n\n从 1 开始输出指定个数的数字\n\n```bash\n$ seq 3\n1\n2\n3\n```\n\n输出 n1 到 n2 的数字\n\n```bash\n$ seq 3 5\n3\n4\n5\n```\n\n脚本中使用\n\n```bash\n#!/bin/bash\n\nfor i in `seq 10`;\ndo\necho $i;\ndone\n```\n\n或者\n\n```bash\nfor i in $(seq 10)\n```\n\n## 语法\n\n```bash\n$ seq [-fsw] n1 [n2]\n```\n\n### 参数\n\n- `-f` 格式化输出结果，默认 `%g`\n\n**输出 3 位**\n\n```bash\n$ seq -f '%3g' 8 10\n  8\n  9\n 10\n```\n\n**使用 0 补全**\n\n```bash\n$ seq -f '%03g' 8 10\n008\n009\n010\n```\n\n**增加前后缀**\n\n```bash\n$ seq -f 'test %03g test' 8 10\ntest 008 test\ntest 009 test\ntest 010 test\n```\n\n- `-s` 指定分隔符，默认为回车符\n\n**指定空格**\n\n```bash\n$ seq -s ' ' 3\n1 2 3\n```\n\n**指定 \\t 制表格**\n\n```bash\n$ seq -s \"`echo -e \"\\t\"`\" 3\n1\t2\t3\n```\n\n- `-w` 对输出使用相同宽度，不够的补 0\n\n```bash\n$ seq -w 8 10\n08\n09\n10\n```\n","source":"_posts/2018-09-12-linux-seq.md","raw":"---\ntitle: Linux seq 命令行工具\ntags:\n  - linux\ndate: 2018-09-12 14:47:23\n---\n\n\nLinux seq 命令可以输出一个范围内的所有整数\n\n<!-- more --><!-- toc -->\n\n## 开始\n\n从 1 开始输出指定个数的数字\n\n```bash\n$ seq 3\n1\n2\n3\n```\n\n输出 n1 到 n2 的数字\n\n```bash\n$ seq 3 5\n3\n4\n5\n```\n\n脚本中使用\n\n```bash\n#!/bin/bash\n\nfor i in `seq 10`;\ndo\necho $i;\ndone\n```\n\n或者\n\n```bash\nfor i in $(seq 10)\n```\n\n## 语法\n\n```bash\n$ seq [-fsw] n1 [n2]\n```\n\n### 参数\n\n- `-f` 格式化输出结果，默认 `%g`\n\n**输出 3 位**\n\n```bash\n$ seq -f '%3g' 8 10\n  8\n  9\n 10\n```\n\n**使用 0 补全**\n\n```bash\n$ seq -f '%03g' 8 10\n008\n009\n010\n```\n\n**增加前后缀**\n\n```bash\n$ seq -f 'test %03g test' 8 10\ntest 008 test\ntest 009 test\ntest 010 test\n```\n\n- `-s` 指定分隔符，默认为回车符\n\n**指定空格**\n\n```bash\n$ seq -s ' ' 3\n1 2 3\n```\n\n**指定 \\t 制表格**\n\n```bash\n$ seq -s \"`echo -e \"\\t\"`\" 3\n1\t2\t3\n```\n\n- `-w` 对输出使用相同宽度，不够的补 0\n\n```bash\n$ seq -w 8 10\n08\n09\n10\n```\n","slug":"linux-seq","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ahj00ml5gqohfsndopg"},{"title":"Go Linux、Mac、Windows 平台交叉编译安装","date":"2018-09-14T10:26:42.000Z","_content":"\n\nGo 支持交叉编译，在可以一个平台上生成多个平台的执行文件。\n\n<!-- more --><!-- toc -->\n\n假设有一个项目结构如下\n\n```bash\n$GOPATH--/bin\n      |\n      |--/src/test/main.go\n```\n\n**Mac**\n\n```bash\n$ CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go install test\n$ CGO_ENABLED=0 GOOS=windows GOARCH=amd64 go install test\n```\n\n这样将会在 bin 目录下生成 `linux_amd64, windows_amd64` 两个相应的目录其中包含了各自的二进制文件\n\n**参数**\n\n- GOOS：目标平台的操作系统（darwin、freebsd、linux、windows）\n- GOARCH：目标平台的体系架构（386、amd64、arm）\n- CGO：交叉编译不支持 CGO 所以要禁用它\n\n**Linux**\n\n```bash\n$ CGO_ENABLED=0 GOOS=darwin GOARCH=amd64 go install test\n$ CGO_ENABLED=0 GOOS=windows GOARCH=amd64 go install test\n```\n\n**Windows**\n\n```bash\n$ SET CGO_ENABLED=0 SET GOOS=darwin SET GOARCH=amd64 go install test\n$ SET CGO_ENABLED=0 SET GOOS=windows SET GOARCH=amd64 go install test\n```\n","source":"_posts/2018-09-14-go-multi-install.md","raw":"---\ntitle: Go Linux、Mac、Windows 平台交叉编译安装\ntags:\n  - go\ndate: 2018-09-14 10:26:42\n---\n\n\nGo 支持交叉编译，在可以一个平台上生成多个平台的执行文件。\n\n<!-- more --><!-- toc -->\n\n假设有一个项目结构如下\n\n```bash\n$GOPATH--/bin\n      |\n      |--/src/test/main.go\n```\n\n**Mac**\n\n```bash\n$ CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go install test\n$ CGO_ENABLED=0 GOOS=windows GOARCH=amd64 go install test\n```\n\n这样将会在 bin 目录下生成 `linux_amd64, windows_amd64` 两个相应的目录其中包含了各自的二进制文件\n\n**参数**\n\n- GOOS：目标平台的操作系统（darwin、freebsd、linux、windows）\n- GOARCH：目标平台的体系架构（386、amd64、arm）\n- CGO：交叉编译不支持 CGO 所以要禁用它\n\n**Linux**\n\n```bash\n$ CGO_ENABLED=0 GOOS=darwin GOARCH=amd64 go install test\n$ CGO_ENABLED=0 GOOS=windows GOARCH=amd64 go install test\n```\n\n**Windows**\n\n```bash\n$ SET CGO_ENABLED=0 SET GOOS=darwin SET GOARCH=amd64 go install test\n$ SET CGO_ENABLED=0 SET GOOS=windows SET GOARCH=amd64 go install test\n```\n","slug":"go-multi-install","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ahk00mn5gqouvaq3r4h"},{"title":"Idea Note 类闪念胶囊便签工具","date":"2018-09-16T16:38:31.000Z","_content":"\n[IDEA NOTE](https://www.ideanote.cc/) 非常优秀的便签工具，跟锤子的闪念胶囊非常相似，对于不想买坚果手机但是又想用该功能的人是个福音。\n\n<!-- more --><!-- toc -->\n\n![ideanote](/images/ideanote.png)\n\n从界面就可以看到跟闪念胶囊几乎一模一样，给他开机自启的权限和悬浮框的权限后，手机右上角就可以出现一个悬浮框，点击即可快速打开便签，可以文字和语音输入。\n\n具体功能如下：\n- 点击或左滑工具条，在任意地方打开我\n- 语音输入大大提高你的输入效率，节约你的时间\n- 长按 Home 和快捷方式唤醒，多种唤醒方式\n- 语音文件自动保存，你可以随时重听\n- 你可以随时编辑和修改你的笔记\n- 四种类型标签，丰富你的笔记\n- 普通类笔记，使用蓝色标签\n- 重要类笔记，使用红色标签\n- 任务类笔记，使用黄色标签\n- 灵感类笔记，使用紫色标签\n\n**下载**\n\n- [官网](https://www.ideanote.cc/)\n- [Google Play](https://play.google.com/store/apps/details?id=com.goyourfly.bigidea)\n","source":"_posts/2018-09-16-ideanote.md","raw":"---\ntitle: Idea Note 类闪念胶囊便签工具\ndate: 2018-09-16 16:38:31\ntags: [工具]\n---\n\n[IDEA NOTE](https://www.ideanote.cc/) 非常优秀的便签工具，跟锤子的闪念胶囊非常相似，对于不想买坚果手机但是又想用该功能的人是个福音。\n\n<!-- more --><!-- toc -->\n\n![ideanote](/images/ideanote.png)\n\n从界面就可以看到跟闪念胶囊几乎一模一样，给他开机自启的权限和悬浮框的权限后，手机右上角就可以出现一个悬浮框，点击即可快速打开便签，可以文字和语音输入。\n\n具体功能如下：\n- 点击或左滑工具条，在任意地方打开我\n- 语音输入大大提高你的输入效率，节约你的时间\n- 长按 Home 和快捷方式唤醒，多种唤醒方式\n- 语音文件自动保存，你可以随时重听\n- 你可以随时编辑和修改你的笔记\n- 四种类型标签，丰富你的笔记\n- 普通类笔记，使用蓝色标签\n- 重要类笔记，使用红色标签\n- 任务类笔记，使用黄色标签\n- 灵感类笔记，使用紫色标签\n\n**下载**\n\n- [官网](https://www.ideanote.cc/)\n- [Google Play](https://play.google.com/store/apps/details?id=com.goyourfly.bigidea)\n","slug":"ideanote","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ahl00mp5gqouc67qsnv"},{"title":"Mysql 时间戳格式化","date":"2018-09-15T17:26:18.000Z","_content":"\nMysql 使用 `unix_timestamp, from_unixtime` 可以实现 `timestamp` 和 `date` 类型的转换。\n\n<!-- more --><!-- toc -->\n\n## unix_timestamp\n\n```mysql\n> select unix_timestamp();\n1537003150\n\n> select unix_timestamp('2018-09-15 17:19:10');\n1537003150\n```\n\n## from_unixtime\n\n```mysql\n> select from_unixtime(1537003150);\n2018-09-15 17:19:10\n\n> select from_unixtime(1537003150,'%Y-%m-%d %H:%i:%s');\n2018-09-15 17:19:10\n```\n\n**format 格式说明：**\n\n- %M 月名字(January～December)\n- %W 星期名字(Sunday～Saturday)\n- %D 有英语前缀的月份的日期(1st, 2nd, 3rd, 等等。）\n- %Y 年, 数字, 4 位\n- %y 年, 数字, 2 位\n- %a 缩写的星期名字(Sun～Sat)\n- %d 月份中的天数, 数字(00～31)\n- %e 月份中的天数, 数字(0～31)\n- %m 月, 数字(01～12)\n- %c 月, 数字(1～12)\n- %b 缩写的月份名字(Jan～Dec)\n- %j 一年中的天数(001～366)\n- %H 小时(00～23)\n- %k 小时(0～23)\n- %h 小时(01～12)\n- %I 小时(01～12)\n- %l 小时(1～12)\n- %i 分钟, 数字(00～59)\n- %r 时间,12 小时(hh:mm:ss [AP]M)\n- %T 时间,24 小时(hh:mm:ss)\n- %S 秒(00～59)\n- %s 秒(00～59)\n- %p AM或PM\n- %w 一个星期中的天数(0=Sunday ～6=Saturday ）\n- %U 星期(0～52), 这里星期天是星期的第一天\n- %u 星期(0～52), 这里星期一是星期的第一天\n- %% 一个文字%\n\n","source":"_posts/2018-09-15-mysql-timestamp-format.md","raw":"---\ntitle: Mysql 时间戳格式化\ndate: 2018-09-15 17:26:18\ntags: [mysql]\n---\n\nMysql 使用 `unix_timestamp, from_unixtime` 可以实现 `timestamp` 和 `date` 类型的转换。\n\n<!-- more --><!-- toc -->\n\n## unix_timestamp\n\n```mysql\n> select unix_timestamp();\n1537003150\n\n> select unix_timestamp('2018-09-15 17:19:10');\n1537003150\n```\n\n## from_unixtime\n\n```mysql\n> select from_unixtime(1537003150);\n2018-09-15 17:19:10\n\n> select from_unixtime(1537003150,'%Y-%m-%d %H:%i:%s');\n2018-09-15 17:19:10\n```\n\n**format 格式说明：**\n\n- %M 月名字(January～December)\n- %W 星期名字(Sunday～Saturday)\n- %D 有英语前缀的月份的日期(1st, 2nd, 3rd, 等等。）\n- %Y 年, 数字, 4 位\n- %y 年, 数字, 2 位\n- %a 缩写的星期名字(Sun～Sat)\n- %d 月份中的天数, 数字(00～31)\n- %e 月份中的天数, 数字(0～31)\n- %m 月, 数字(01～12)\n- %c 月, 数字(1～12)\n- %b 缩写的月份名字(Jan～Dec)\n- %j 一年中的天数(001～366)\n- %H 小时(00～23)\n- %k 小时(0～23)\n- %h 小时(01～12)\n- %I 小时(01～12)\n- %l 小时(1～12)\n- %i 分钟, 数字(00～59)\n- %r 时间,12 小时(hh:mm:ss [AP]M)\n- %T 时间,24 小时(hh:mm:ss)\n- %S 秒(00～59)\n- %s 秒(00～59)\n- %p AM或PM\n- %w 一个星期中的天数(0=Sunday ～6=Saturday ）\n- %U 星期(0～52), 这里星期天是星期的第一天\n- %u 星期(0～52), 这里星期一是星期的第一天\n- %% 一个文字%\n\n","slug":"mysql-timestamp-format","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ahn00mr5gqo90y8mhqh"},{"title":"Vim 插件 gocode：Go 代码补全","date":"2018-09-17T18:12:42.000Z","_content":"\n\n[专辑：Vim 练级手册](/vim)\n\n[gocode](https://github.com/nsf/gocode) 可以在 Vim 中实现 Go 语言的代码补全提示。\n\n<!-- more --><!-- toc -->\n\n## 预览\n![vim-gocode.gif](/images/vim-gocode.gif)\n\n## 安装\n\n安装方式很简单\n\n**下载源码**\n\n```bash\n$ go get -u github.com/nsf/gocode\n```\n\n**执行脚本**\n\n进入根目录 `${GOPATH}/src/github.com/nsf/gocode`\n\n如果你使用 pathogen 管理项目可以执行\n\n```bash\n$ ./pathogen_update.sh\n```\n\n除此之外可以选择执行下面两个中任意一个\n\n**软连接**\n\n```bash\n$ ./symlink.sh\n```\n\n**直接复制**\n\n```bash\n$ ./update.sh\n```\n\ngocode 的安装工作已经完成了，但是这时如果你的环境还是不工作，那么可能因为没有安装 YouCompleteMe，我的测试是需要基于它才能工作的，这部分的安装可以看我的文章[Vim 插件 YouCompleteMe 代码自动补全](/2017/09/22/vim-plugin-youcompleteme/)\n","source":"_posts/2018-09-17-vim-plugin-gocode.md","raw":"---\ntitle: Vim 插件 gocode：Go 代码补全\ntags:\n  - vim\n  - go\ndate: 2018-09-17 18:12:42\n---\n\n\n[专辑：Vim 练级手册](/vim)\n\n[gocode](https://github.com/nsf/gocode) 可以在 Vim 中实现 Go 语言的代码补全提示。\n\n<!-- more --><!-- toc -->\n\n## 预览\n![vim-gocode.gif](/images/vim-gocode.gif)\n\n## 安装\n\n安装方式很简单\n\n**下载源码**\n\n```bash\n$ go get -u github.com/nsf/gocode\n```\n\n**执行脚本**\n\n进入根目录 `${GOPATH}/src/github.com/nsf/gocode`\n\n如果你使用 pathogen 管理项目可以执行\n\n```bash\n$ ./pathogen_update.sh\n```\n\n除此之外可以选择执行下面两个中任意一个\n\n**软连接**\n\n```bash\n$ ./symlink.sh\n```\n\n**直接复制**\n\n```bash\n$ ./update.sh\n```\n\ngocode 的安装工作已经完成了，但是这时如果你的环境还是不工作，那么可能因为没有安装 YouCompleteMe，我的测试是需要基于它才能工作的，这部分的安装可以看我的文章[Vim 插件 YouCompleteMe 代码自动补全](/2017/09/22/vim-plugin-youcompleteme/)\n","slug":"vim-plugin-gocode","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aho00mt5gqo17b8dc04"},{"title":"Mac 使用 sed","date":"2018-09-18T11:41:51.000Z","_content":"\n在 Mac 中使用 sed 有很多问题。\n\n<!-- more --><!-- toc -->\n```bash\ncommand i expects \\ followed by text.\n```\n\n等错误都是 Mac 系统和 Linux 系统某些不同导致的\n\n每个不适用的命令都可以有相应的解决办法，但是这样未免太过麻烦，有个可以一次解决的方法，借助 `brew` 即可完成。\n\n安装 `gnu-sed`\n\n```bash\n$ brew install gnu-sed\n```\n\n安装后可以使用 `gsed` 命令进行 sed 的全部操作\n\n如果不想使用 `gsed` 命令，在安装的时候可以使用参数 `--with-default-names` 来制定命令名\n\n- [SED command error on MACOS X](https://stackoverflow.com/questions/14846304/sed-command-error-on-macos-x)\n- [mac环境使用sed修改文件出错的解决方法](https://blog.csdn.net/fdipzone/article/details/51253955)\n","source":"_posts/2018-09-18-mac-use-sed.md","raw":"---\ntitle: Mac 使用 sed\ndate: 2018-09-18 11:41:51\ntags: [mac]\n---\n\n在 Mac 中使用 sed 有很多问题。\n\n<!-- more --><!-- toc -->\n```bash\ncommand i expects \\ followed by text.\n```\n\n等错误都是 Mac 系统和 Linux 系统某些不同导致的\n\n每个不适用的命令都可以有相应的解决办法，但是这样未免太过麻烦，有个可以一次解决的方法，借助 `brew` 即可完成。\n\n安装 `gnu-sed`\n\n```bash\n$ brew install gnu-sed\n```\n\n安装后可以使用 `gsed` 命令进行 sed 的全部操作\n\n如果不想使用 `gsed` 命令，在安装的时候可以使用参数 `--with-default-names` 来制定命令名\n\n- [SED command error on MACOS X](https://stackoverflow.com/questions/14846304/sed-command-error-on-macos-x)\n- [mac环境使用sed修改文件出错的解决方法](https://blog.csdn.net/fdipzone/article/details/51253955)\n","slug":"mac-use-sed","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ahp00mv5gqonssbgwiy"},{"title":"Linux zip 和 unzip 命令","date":"2018-09-19T13:55:15.000Z","_content":"\nLinux 使用 zip 和 unzip 来解压和解压文件。\n\n<!-- more --><!-- toc -->\n\n## zip\n\n**压缩**\n\n```bash\n$ zip file.zip file\n```\n\n**压缩文件夹**\n\n普通压缩文件夹，并不会一起压缩文件夹中的文件，需要加上参数 `-r`\n```bash\n$ zip -r file.zip file\n```\n\n**带密码压缩**\n\n```bash\n$ zip -e file.zip file              # 根据提示输入密码\n$ zip -P password file.zip file     # 命令行中加上密码 password\n```\n\n**压缩后删除原文件**\n\n```bash\n$ zip -m file.zip file\n```\n\n## unzip\n\n**解压**\n\n```bash\n$ unzip file.zip\n```\n\n**解压到文件夹中**\n\n```bash\n$ unzip file.zip -d dir\n```\n\n**使用密码解压**\n\n```bash\n$ unzip -P password file.zip\n```\n\n**查看压缩包的文件**\n\n```bash\n$ unzip -l file.zip\n```\n\n## 应用\n\n**批量压缩目录下的文件（包括文件夹）**\n\n```bash\nfor f in `ls`\ndo\n    test -f $f && zip $f.zip $f || zip -r $f.zip $f\ndone\n```\n\n## 参考\n- [Linux zip命令](http://www.runoob.com/linux/linux-comm-zip.html)\n- [Linux unzip命令](http://www.runoob.com/linux/linux-comm-unzip.html)\n","source":"_posts/2018-09-19-zip-unzip.md","raw":"---\ntitle: Linux zip 和 unzip 命令\ndate: 2018-09-19 13:55:15\ntags: [linux]\n---\n\nLinux 使用 zip 和 unzip 来解压和解压文件。\n\n<!-- more --><!-- toc -->\n\n## zip\n\n**压缩**\n\n```bash\n$ zip file.zip file\n```\n\n**压缩文件夹**\n\n普通压缩文件夹，并不会一起压缩文件夹中的文件，需要加上参数 `-r`\n```bash\n$ zip -r file.zip file\n```\n\n**带密码压缩**\n\n```bash\n$ zip -e file.zip file              # 根据提示输入密码\n$ zip -P password file.zip file     # 命令行中加上密码 password\n```\n\n**压缩后删除原文件**\n\n```bash\n$ zip -m file.zip file\n```\n\n## unzip\n\n**解压**\n\n```bash\n$ unzip file.zip\n```\n\n**解压到文件夹中**\n\n```bash\n$ unzip file.zip -d dir\n```\n\n**使用密码解压**\n\n```bash\n$ unzip -P password file.zip\n```\n\n**查看压缩包的文件**\n\n```bash\n$ unzip -l file.zip\n```\n\n## 应用\n\n**批量压缩目录下的文件（包括文件夹）**\n\n```bash\nfor f in `ls`\ndo\n    test -f $f && zip $f.zip $f || zip -r $f.zip $f\ndone\n```\n\n## 参考\n- [Linux zip命令](http://www.runoob.com/linux/linux-comm-zip.html)\n- [Linux unzip命令](http://www.runoob.com/linux/linux-comm-unzip.html)\n","slug":"zip-unzip","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ahq00mx5gqoghmk85yd"},{"title":"Mysql 使用变量","date":"2018-09-20T10:58:58.000Z","_content":"\nMysql 虽不像其他语言一样灵活，但是也可以使用简单的变量。\n\n<!-- more --><!-- toc -->\n\n**使用 set**\n\n```mysql\n> set @id = 1;\n> select * from user where id = @id;\n```\n\n```mysql\n> set @count = (select count(0) from user);\n> select @count;\n```\n\n**使用 select**\n\n```mysql\n> select count(0) into @count from user;\n> select @count;\n```\n\n```mysql\n> select max(status), avg(status) into @max, @avg from user;\n> select @max, @avg;\n```\n\n**存储过程**\n\n```mysql\ndrop procedure IF EXISTS test;\ndelimiter //\ncreate procedure test()\nbegin\n\tDECLARE cnt INT DEFAULT 0;\n\tselect count(*) into cnt from user;\n\tselect cnt;\nend\n//\ndelimiter ;\n\ncall test();\n```\n","source":"_posts/2018-09-20-mysql-var.md","raw":"---\ntitle: Mysql 使用变量\ndate: 2018-09-20 10:58:58\ntags: [mysql]\n---\n\nMysql 虽不像其他语言一样灵活，但是也可以使用简单的变量。\n\n<!-- more --><!-- toc -->\n\n**使用 set**\n\n```mysql\n> set @id = 1;\n> select * from user where id = @id;\n```\n\n```mysql\n> set @count = (select count(0) from user);\n> select @count;\n```\n\n**使用 select**\n\n```mysql\n> select count(0) into @count from user;\n> select @count;\n```\n\n```mysql\n> select max(status), avg(status) into @max, @avg from user;\n> select @max, @avg;\n```\n\n**存储过程**\n\n```mysql\ndrop procedure IF EXISTS test;\ndelimiter //\ncreate procedure test()\nbegin\n\tDECLARE cnt INT DEFAULT 0;\n\tselect count(*) into cnt from user;\n\tselect cnt;\nend\n//\ndelimiter ;\n\ncall test();\n```\n","slug":"mysql-var","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ahr00mz5gqokcrd0c4n"},{"title":"Go time Sleep 实现延时","date":"2018-09-22T14:42:43.000Z","_content":"\nGo 中 time.Sleep 不能传入数字来实现延时，而是传入 `time.Duration`\n\n<!-- more --><!-- toc -->\n\n```go\ntime.Sleep(time.Duration(200) * time.Millisecond)\n```\n```go\ntime.Sleep(1 * time.Second)\n```\n\n","source":"_posts/2018-09-22-go-time-sleep.md","raw":"---\ntitle: Go time Sleep 实现延时\ndate: 2018-09-22 14:42:43\ntags: [go]\n---\n\nGo 中 time.Sleep 不能传入数字来实现延时，而是传入 `time.Duration`\n\n<!-- more --><!-- toc -->\n\n```go\ntime.Sleep(time.Duration(200) * time.Millisecond)\n```\n```go\ntime.Sleep(1 * time.Second)\n```\n\n","slug":"go-time-sleep","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aht00n15gqoj7k4vaqy"},{"title":"Go 如何判断变量类型","date":"2018-09-21T17:38:03.000Z","_content":"\nGo 中判断变量的类型不是太方便。\n\n<!-- more --><!-- toc -->\n\n## var.(type)\n\n通过 `var.(type)` 可以判断变量类型，不过必须在 switch 中使用\n\n```go\nfunc Type(i interface{}) {\n\n    switch i.(type) {\n    case string:\n        fmt.Println(\"string\")\n    case int:\n        fmt.Println(\"int\")\n    case bool:\n        fmt.Println(\"bool\")\n    default:\n        fmt.Println(\"default\")\n    }\n\n}\n```\n\n## reflect\n\n也可以通过反射的方式来获取变量类型\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n    \"reflect\"\n)\n\nfunc main() {\n\n    t := reflect.TypeOf(\"Hello World\")\n    fmt.Println(t)\n}\n```\n\n完整代码见 [demo](https://github.com/wxnacy/study/blob/master/goland/src/simple/type.go)\n","source":"_posts/2018-09-21-go-type.md","raw":"---\ntitle: Go 如何判断变量类型\ndate: 2018-09-21 17:38:03\ntags: [go]\n---\n\nGo 中判断变量的类型不是太方便。\n\n<!-- more --><!-- toc -->\n\n## var.(type)\n\n通过 `var.(type)` 可以判断变量类型，不过必须在 switch 中使用\n\n```go\nfunc Type(i interface{}) {\n\n    switch i.(type) {\n    case string:\n        fmt.Println(\"string\")\n    case int:\n        fmt.Println(\"int\")\n    case bool:\n        fmt.Println(\"bool\")\n    default:\n        fmt.Println(\"default\")\n    }\n\n}\n```\n\n## reflect\n\n也可以通过反射的方式来获取变量类型\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n    \"reflect\"\n)\n\nfunc main() {\n\n    t := reflect.TypeOf(\"Hello World\")\n    fmt.Println(t)\n}\n```\n\n完整代码见 [demo](https://github.com/wxnacy/study/blob/master/goland/src/simple/type.go)\n","slug":"go-type","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ahu00n35gqoccorzkuk"},{"title":"Go 截取字符串","date":"2018-09-23T09:57:02.000Z","_content":"\n学的语言多了，难免会搞混，Go 在编写习惯上跟 Java 很像，在截取 string 时习惯用了 `substring`，很显然不成功。\n\n<!-- more --><!-- toc -->\n在截取字符串和数组上 Go 跟 Python 很像，直接用索引截取即可\n\n```go\ns[0:3]\n```\n","source":"_posts/2018-09-23-go-string-substr.md","raw":"---\ntitle: Go 截取字符串\ndate: 2018-09-23 09:57:02\ntags: [go]\n---\n\n学的语言多了，难免会搞混，Go 在编写习惯上跟 Java 很像，在截取 string 时习惯用了 `substring`，很显然不成功。\n\n<!-- more --><!-- toc -->\n在截取字符串和数组上 Go 跟 Python 很像，直接用索引截取即可\n\n```go\ns[0:3]\n```\n","slug":"go-string-substr","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ahv00n55gqo18e0yw5v"},{"title":"Redis 命令行登陆","date":"2018-09-24T11:24:40.000Z","_content":"\n因为 Redis 本身的安全限制，很多服务器提供的 Redis 都不会提供外网访问，那使用命令行访问数据库内容就不可避免。\n\n<!-- more --><!-- toc -->\n\n`redis-cli` 为 Redis 登录基本命令\n\n```bash\n$ redis-cli\nredis 127.0.0.1:6379>\n```\n\n访问远程服务\n\n```bash\n$ redis-cli -h host -p port -a password\n```\n\n加上 `--raw` 可以避免中文乱码\n\n```bash\n$ redis-cli --raw\n```\n\n- [Redis 命令](https://www.runoob.com/redis/redis-commands.html)\n","source":"_posts/2018-09-24-redis-cli-login.md","raw":"---\ntitle: Redis 命令行登陆\ndate: 2018-09-24 11:24:40\ntags: [redis]\n---\n\n因为 Redis 本身的安全限制，很多服务器提供的 Redis 都不会提供外网访问，那使用命令行访问数据库内容就不可避免。\n\n<!-- more --><!-- toc -->\n\n`redis-cli` 为 Redis 登录基本命令\n\n```bash\n$ redis-cli\nredis 127.0.0.1:6379>\n```\n\n访问远程服务\n\n```bash\n$ redis-cli -h host -p port -a password\n```\n\n加上 `--raw` 可以避免中文乱码\n\n```bash\n$ redis-cli --raw\n```\n\n- [Redis 命令](https://www.runoob.com/redis/redis-commands.html)\n","slug":"redis-cli-login","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ahx00n75gqo646svlhq"},{"title":"MySql 报错 Column count doesn't match value count at row 6540","date":"2018-09-26T11:16:29.000Z","_content":"\n> Column count doesn't match value count at row 1\n\n<!-- more --><!-- toc -->\n该错误是在插入语句时报的，在 6540 行会看到在处理数据时，该条目的 values 数据与需要插入的列数目不同，这也是该问题的原因，将插入数据改变后，插入正常。\n","source":"_posts/2018-09-26-mysql-error-match-value.md","raw":"---\ntitle: MySql 报错 Column count doesn't match value count at row 6540\ndate: 2018-09-26 11:16:29\ntags: [mysql]\n---\n\n> Column count doesn't match value count at row 1\n\n<!-- more --><!-- toc -->\n该错误是在插入语句时报的，在 6540 行会看到在处理数据时，该条目的 values 数据与需要插入的列数目不同，这也是该问题的原因，将插入数据改变后，插入正常。\n","slug":"mysql-error-match-value","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ahy00n95gqoy0f6v356"},{"title":"Python 实时翻译模块 googletrans","date":"2018-09-27T16:44:00.000Z","_content":"\nGoogle 为 Python 提供了可以实时翻译的模块 googletrans，使用非常简单。\n\n<!-- more --><!-- toc -->\n## 下载\n\n```bash\n$ pip install googletrans\n```\n\n## 使用\n\n**翻译英文**\n\n```python\nfrom googletrans import Translator\n\ntranslate = Translator()\nresult = translate.translate('中国')\nprint(result.text)\n# China\n```\n\n默认翻译为英文，也可以指定想要的语言\n\n**翻译中文**\n\n```bash\nfrom googletrans import Translator\n\ntranslate = Translator()\nresult = translate.translate('China', dest='zh-CN')\nprint(result.text)\n# 中国\n```\n\n## 灵活使用\n\n模块虽好，但也有不完善的地方，比如当有连字符的时候就有可能翻译不出来，比如\n\n```bash\nAmerica/Argentina/Jujuy\n```\n\n这时候只能原样返回，但是用 Google 的翻译工具是可以出结果的，那只能想想办法，比\n如把练习替换为空格\n\n```python\nresult = translate.translate('America/Argentina/Jujuy'.replace(\"/\", \" \"), dest='zh-CN')\n# 美国阿根廷胡胡伊\n```\n\n这样就能得到想要的结果了\n\n有一个问题，它是实时请求的 Google API，所以速度上不是很快，更适合一次性写入库的翻译操作。\n\n可选的翻译种类有\n```bash\nLANGUAGES = {\n    'af': 'afrikaans',\n    'sq': 'albanian',\n    'ar': 'arabic',\n    'be': 'belarusian',\n    'bg': 'bulgarian',\n    'ca': 'catalan',\n    'zh-CN': 'chinese_simplified',\n    'zh-TW': 'chinese_traditional',\n    'hr': 'croatian',\n    'cs': 'czech',\n    'da': 'danish',\n    'nl': 'dutch',\n    'en': 'english',\n    'eo': 'esperanto',\n    'et': 'estonian',\n    'tl': 'filipino',\n    'fi': 'finnish',\n    'fr': 'french',\n    'gl': 'galician',\n    'de': 'german',\n    'el': 'greek',\n    'iw': 'hebrew',\n    'hi': 'hindi',\n    'hu': 'hungarian',\n    'is': 'icelandic',\n    'id': 'indonesian',\n    'ga': 'irish',\n    'it': 'italian',\n    'ja': 'japanese',\n    'ko': 'korean',\n    'la': 'latin',\n    'lv': 'latvian',\n    'lt': 'lithuanian',\n    'mk': 'macedonian',\n    'ms': 'malay',\n    'mt': 'maltese',\n    'no': 'norwegian',\n    'fa': 'persian',\n    'pl': 'polish',\n    'pt': 'portuguese',\n    'ro': 'romanian',\n    'ru': 'russian',\n    'sr': 'serbian',\n    'sk': 'slovak',\n    'sl': 'slovenian',\n    'es': 'spanish',\n    'sw': 'swahili',\n    'sv': 'swedish',\n    'th': 'thai',\n    'tr': 'turkish',\n    'uk': 'ukrainian',\n    'vi': 'vietnamese',\n    'cy': 'welsh',\n    'yi': 'yiddish',\n  }\n```\n\n- [Python 免费翻译API](https://blog.csdn.net/u010856630/article/details/75357991)\n","source":"_posts/2018-09-27-python-googletrans.md","raw":"---\ntitle: Python 实时翻译模块 googletrans\ndate: 2018-09-27 16:44:00\ntags: [python]\n---\n\nGoogle 为 Python 提供了可以实时翻译的模块 googletrans，使用非常简单。\n\n<!-- more --><!-- toc -->\n## 下载\n\n```bash\n$ pip install googletrans\n```\n\n## 使用\n\n**翻译英文**\n\n```python\nfrom googletrans import Translator\n\ntranslate = Translator()\nresult = translate.translate('中国')\nprint(result.text)\n# China\n```\n\n默认翻译为英文，也可以指定想要的语言\n\n**翻译中文**\n\n```bash\nfrom googletrans import Translator\n\ntranslate = Translator()\nresult = translate.translate('China', dest='zh-CN')\nprint(result.text)\n# 中国\n```\n\n## 灵活使用\n\n模块虽好，但也有不完善的地方，比如当有连字符的时候就有可能翻译不出来，比如\n\n```bash\nAmerica/Argentina/Jujuy\n```\n\n这时候只能原样返回，但是用 Google 的翻译工具是可以出结果的，那只能想想办法，比\n如把练习替换为空格\n\n```python\nresult = translate.translate('America/Argentina/Jujuy'.replace(\"/\", \" \"), dest='zh-CN')\n# 美国阿根廷胡胡伊\n```\n\n这样就能得到想要的结果了\n\n有一个问题，它是实时请求的 Google API，所以速度上不是很快，更适合一次性写入库的翻译操作。\n\n可选的翻译种类有\n```bash\nLANGUAGES = {\n    'af': 'afrikaans',\n    'sq': 'albanian',\n    'ar': 'arabic',\n    'be': 'belarusian',\n    'bg': 'bulgarian',\n    'ca': 'catalan',\n    'zh-CN': 'chinese_simplified',\n    'zh-TW': 'chinese_traditional',\n    'hr': 'croatian',\n    'cs': 'czech',\n    'da': 'danish',\n    'nl': 'dutch',\n    'en': 'english',\n    'eo': 'esperanto',\n    'et': 'estonian',\n    'tl': 'filipino',\n    'fi': 'finnish',\n    'fr': 'french',\n    'gl': 'galician',\n    'de': 'german',\n    'el': 'greek',\n    'iw': 'hebrew',\n    'hi': 'hindi',\n    'hu': 'hungarian',\n    'is': 'icelandic',\n    'id': 'indonesian',\n    'ga': 'irish',\n    'it': 'italian',\n    'ja': 'japanese',\n    'ko': 'korean',\n    'la': 'latin',\n    'lv': 'latvian',\n    'lt': 'lithuanian',\n    'mk': 'macedonian',\n    'ms': 'malay',\n    'mt': 'maltese',\n    'no': 'norwegian',\n    'fa': 'persian',\n    'pl': 'polish',\n    'pt': 'portuguese',\n    'ro': 'romanian',\n    'ru': 'russian',\n    'sr': 'serbian',\n    'sk': 'slovak',\n    'sl': 'slovenian',\n    'es': 'spanish',\n    'sw': 'swahili',\n    'sv': 'swedish',\n    'th': 'thai',\n    'tr': 'turkish',\n    'uk': 'ukrainian',\n    'vi': 'vietnamese',\n    'cy': 'welsh',\n    'yi': 'yiddish',\n  }\n```\n\n- [Python 免费翻译API](https://blog.csdn.net/u010856630/article/details/75357991)\n","slug":"python-googletrans","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ahz00nc5gqo2ak8o0bk"},{"title":"sed 在结尾插入数据失败的原因","date":"2018-09-25T11:22:16.000Z","_content":"\n在使用 sed 在文档结尾添加数据时发现总是不成功，思来想去觉得可能是文档有某些隐藏字符，变查询怎么查看文档的隐藏字符。\n\n<!-- more --><!-- toc -->\n使用 cat 可以很方便的查看隐藏字符\n\n```bash\n$ cat -t\n```\n\n查看结尾符\n\n```bash\n$ cat -e\n```\n\n发现文档结尾 `^M` 字符，可见该文件是在 Windows 创建的，各个系统的换行符为\n\n- windows系统行尾符是CR LF——对应的正则表达式是\\r\\n\n- mac系统是CR——对应的正则表达式是\\r\n- unix系统是LF——对应的正则表达式是\\n\n\nWindows 文件在 unix 系统中打开，换行符就会变成 `^M`，我们首先需要去掉该字符\n\n```bash\n$ sed 's/^M//g' test.txt\n```\n\n注意 `^M` 不是手打的，而是 `<ctrl>v + <ctrl>m` 生成的\n\n随后再次插入行尾数据即可成功\n\n```bash\n$ sed 's/$/--/g' test.txt\n```\n","source":"_posts/2018-09-27-linux-cat-hide-char.md","raw":"---\ntitle: sed 在结尾插入数据失败的原因\ndate: 2018-09-25 11:22:16\ntags: [linux]\n---\n\n在使用 sed 在文档结尾添加数据时发现总是不成功，思来想去觉得可能是文档有某些隐藏字符，变查询怎么查看文档的隐藏字符。\n\n<!-- more --><!-- toc -->\n使用 cat 可以很方便的查看隐藏字符\n\n```bash\n$ cat -t\n```\n\n查看结尾符\n\n```bash\n$ cat -e\n```\n\n发现文档结尾 `^M` 字符，可见该文件是在 Windows 创建的，各个系统的换行符为\n\n- windows系统行尾符是CR LF——对应的正则表达式是\\r\\n\n- mac系统是CR——对应的正则表达式是\\r\n- unix系统是LF——对应的正则表达式是\\n\n\nWindows 文件在 unix 系统中打开，换行符就会变成 `^M`，我们首先需要去掉该字符\n\n```bash\n$ sed 's/^M//g' test.txt\n```\n\n注意 `^M` 不是手打的，而是 `<ctrl>v + <ctrl>m` 生成的\n\n随后再次插入行尾数据即可成功\n\n```bash\n$ sed 's/$/--/g' test.txt\n```\n","slug":"linux-cat-hide-char","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ai100ne5gqoikyvaukt"},{"title":"Python 获取时区的偏移量","date":"2018-09-29T14:57:34.000Z","_content":"\nPython 中想要获取计算时区相关的问题，可以借助 `pytz` 模块。\n\n<!-- more --><!-- toc -->\n\n**下载**\n\n```bash\n$ pip install pytz\n```\n\n比如想要通过时区名获取对应的小时偏移量可以这样。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom pytz import timezone\nfrom datetime import datetime\ntz = timezone(\"America/New_York\")\nres = datetime.now(tz).utcoffset().total_seconds()/60/60\nprint(res)\n# -5.0\n```\n","source":"_posts/2018-09-29-python-timezone-offset.md","raw":"---\ntitle: Python 获取时区的偏移量\ndate: 2018-09-29 14:57:34\ntags: [python]\n---\n\nPython 中想要获取计算时区相关的问题，可以借助 `pytz` 模块。\n\n<!-- more --><!-- toc -->\n\n**下载**\n\n```bash\n$ pip install pytz\n```\n\n比如想要通过时区名获取对应的小时偏移量可以这样。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom pytz import timezone\nfrom datetime import datetime\ntz = timezone(\"America/New_York\")\nres = datetime.now(tz).utcoffset().total_seconds()/60/60\nprint(res)\n# -5.0\n```\n","slug":"python-timezone-offset","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ai200ng5gqofiu51oet"},{"title":"Git 修改默认编辑器","date":"2018-09-30T10:31:01.000Z","_content":"\n最近升级了 MacOS 新系统到 10.14.2 版本，新系统还真不是盖的，上来就好多不兼容的地方，比如 Vim。\n\n<!-- more --><!-- toc -->\n正常开发本来并没有问题，但是在处理 `git merge` 时，它调用默认编辑器 Vim 就会报错。\n\n```bash\nVim: Caught deadly signal SEGV\n```\n\n从网上查询说是 ycm 插件导致的，需要在新系统下重新编译安装一遍才行。不过既然正常开发并没有收到影响，我何必多此一举呢，想着让 Git 不调用这个插件就得了。\n\n```bash\n$ vim -u NONE\n```\n\n该命令可以在不使用任何插件的情况下打开 Vim 编辑器，OK，我就需要这个。\n\n**修改默认编辑器**\n\n```bash\n$ git config --global core.editor \"vim -u NONE\"\n```\n\n**查看**\n\n```bash\n$ git config --list\n...\ncore.editor=vim -u NONE\n...\n```\n\n再试着运行 `git merge`，在纯净的 Vim 环境打开了合并信息，完美。\n","source":"_posts/2018-09-30-git-update-editor.md","raw":"---\ntitle: Git 修改默认编辑器\ndate: 2018-09-30 10:31:01\ntags: [git]\n---\n\n最近升级了 MacOS 新系统到 10.14.2 版本，新系统还真不是盖的，上来就好多不兼容的地方，比如 Vim。\n\n<!-- more --><!-- toc -->\n正常开发本来并没有问题，但是在处理 `git merge` 时，它调用默认编辑器 Vim 就会报错。\n\n```bash\nVim: Caught deadly signal SEGV\n```\n\n从网上查询说是 ycm 插件导致的，需要在新系统下重新编译安装一遍才行。不过既然正常开发并没有收到影响，我何必多此一举呢，想着让 Git 不调用这个插件就得了。\n\n```bash\n$ vim -u NONE\n```\n\n该命令可以在不使用任何插件的情况下打开 Vim 编辑器，OK，我就需要这个。\n\n**修改默认编辑器**\n\n```bash\n$ git config --global core.editor \"vim -u NONE\"\n```\n\n**查看**\n\n```bash\n$ git config --list\n...\ncore.editor=vim -u NONE\n...\n```\n\n再试着运行 `git merge`，在纯净的 Vim 环境打开了合并信息，完美。\n","slug":"git-update-editor","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ai300ni5gqo19ndh2oj"},{"title":"Mysql 模糊搜索不识别下划线的问题","date":"2018-09-28T17:02:23.000Z","_content":"\n使用 Mysql 进行模糊查询，使用下划线作为关键词，结果检索出了全部内容。\n\n<!-- more --><!-- toc -->\n\n```mysql\n> select * from user where name like '%_%'\n```\n\n我很自然的想到了**转义**，然后试了下常用的转义字符 `\\`\n\n```mysql\n> select * from user where name like '%\\_%';\n```\n\n生效，所以如果碰见特殊字符不工作时，可以试试转义，比如 `%\\%%`\n","source":"_posts/2018-09-28-mysql-like-Underline.md","raw":"---\ntitle: Mysql 模糊搜索不识别下划线的问题\ndate: 2018-09-28 17:02:23\ntags: [mysql]\n---\n\n使用 Mysql 进行模糊查询，使用下划线作为关键词，结果检索出了全部内容。\n\n<!-- more --><!-- toc -->\n\n```mysql\n> select * from user where name like '%_%'\n```\n\n我很自然的想到了**转义**，然后试了下常用的转义字符 `\\`\n\n```mysql\n> select * from user where name like '%\\_%';\n```\n\n生效，所以如果碰见特殊字符不工作时，可以试试转义，比如 `%\\%%`\n","slug":"mysql-like-Underline","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ai400nk5gqo55eed0d3"},{"title":"Python 使用 open() 函数操作文件","date":"2018-10-01T13:59:57.000Z","_content":"\npython open() 函数用于打开一个文件，创建一个 file 对象，相关的方法才可以调用它进行读写。\n\n<!-- more --><!-- toc -->\n\n## 语法\n\n```bash\nopen(name[, mode[, buffering]])\n# name : 一个包含了你要访问的文件名称的字符串值。\n\n# mode : mode 决定了打开文件的模式：只读，写入，追加等。所有可取值见如下的完全列表。这个参数是非强制的，默认文件访问模式为只读(r)。\n\n# buffering : 如果 buffering 的值被设为 0，就不会有寄存。如果 buffering 的值取 1，访问文件时会寄存行。如果将 buffering 的值设为大于 1 的整数，表明了这就是的寄存区的缓冲大小。如果取负值，寄存区的缓冲大小则为系统默认。\n```\n\n可用 mode 列表\n\n- r\t以只读方式打开文件。文件的指针将会放在文件的开头。这是默认模式。\n- rb\t以二进制格式打开一个文件用于只读。文件指针将会放在文件的开头。这是默认模式。\n- r+\t打开一个文件用于读写。文件指针将会放在文件的开头。\n- rb+\t以二进制格式打开一个文件用于读写。文件指针将会放在文件的开头。\n- w\t打开一个文件只用于写入。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。\n- wb\t以二进制格式打开一个文件只用于写入。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。\n- w+\t打开一个文件用于读写。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。\n- wb+\t以二进制格式打开一个文件用于读写。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。\n- a\t打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。\n- ab\t以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。\n- a+\t打开一个文件用于读写。如果该文件已存在，文件指针将会放在文件的结尾。文件打开时会是追加模式。如果该文件不存在，创建新文件用于读写。\n- ab+\t以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。如果该文件不存在，创建新文件用于读写。\n\n## file 对象方法\n\n```bash\nfile.read([size])：size 未指定则返回整个文件，如果文件大小 >2 倍内存则有问题，f.read()读到文件尾时返回\"\"(空字串)。\n\nfile.readline()：返回一行。\n\nfile.readlines([size]) ：返回包含size行的列表, size 未指定则返回全部行。\n\nfor line in f: print line ：通过迭代器访问。\n\nf.write(\"hello\\n\")：如果要写入字符串以外的数据,先将他转换为字符串。\n\nf.write([\"hello\", \"world\"])：可以写入字符串列表\n\nf.tell()：返回一个整数,表示当前文件指针的位置(就是到文件头的比特数)。\n\nf.seek(偏移量,[起始位置])：用来移动文件指针。\n    偏移量: 单位为比特，可正可负\n    起始位置: 0 - 文件头, 默认值; 1 - 当前位置; 2 - 文件尾\n\nf.close() 关闭文件\n```\n\n**读取文件**\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nf = open('test.txt')\nt = f.read()\nf.close()\n```\n\n**写入文件**\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nf = open('test.txt', 'w+')\nf.write(\"Hello World\")\nf.close()\n```\n\n- [Python open() 函数](http://www.runoob.com/python/python-func-open.html)\n","source":"_posts/2018-10-01-python-file.md","raw":"---\ntitle: Python 使用 open() 函数操作文件\ndate: 2018-10-01 13:59:57\ntags: [python]\n---\n\npython open() 函数用于打开一个文件，创建一个 file 对象，相关的方法才可以调用它进行读写。\n\n<!-- more --><!-- toc -->\n\n## 语法\n\n```bash\nopen(name[, mode[, buffering]])\n# name : 一个包含了你要访问的文件名称的字符串值。\n\n# mode : mode 决定了打开文件的模式：只读，写入，追加等。所有可取值见如下的完全列表。这个参数是非强制的，默认文件访问模式为只读(r)。\n\n# buffering : 如果 buffering 的值被设为 0，就不会有寄存。如果 buffering 的值取 1，访问文件时会寄存行。如果将 buffering 的值设为大于 1 的整数，表明了这就是的寄存区的缓冲大小。如果取负值，寄存区的缓冲大小则为系统默认。\n```\n\n可用 mode 列表\n\n- r\t以只读方式打开文件。文件的指针将会放在文件的开头。这是默认模式。\n- rb\t以二进制格式打开一个文件用于只读。文件指针将会放在文件的开头。这是默认模式。\n- r+\t打开一个文件用于读写。文件指针将会放在文件的开头。\n- rb+\t以二进制格式打开一个文件用于读写。文件指针将会放在文件的开头。\n- w\t打开一个文件只用于写入。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。\n- wb\t以二进制格式打开一个文件只用于写入。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。\n- w+\t打开一个文件用于读写。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。\n- wb+\t以二进制格式打开一个文件用于读写。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。\n- a\t打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。\n- ab\t以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。\n- a+\t打开一个文件用于读写。如果该文件已存在，文件指针将会放在文件的结尾。文件打开时会是追加模式。如果该文件不存在，创建新文件用于读写。\n- ab+\t以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。如果该文件不存在，创建新文件用于读写。\n\n## file 对象方法\n\n```bash\nfile.read([size])：size 未指定则返回整个文件，如果文件大小 >2 倍内存则有问题，f.read()读到文件尾时返回\"\"(空字串)。\n\nfile.readline()：返回一行。\n\nfile.readlines([size]) ：返回包含size行的列表, size 未指定则返回全部行。\n\nfor line in f: print line ：通过迭代器访问。\n\nf.write(\"hello\\n\")：如果要写入字符串以外的数据,先将他转换为字符串。\n\nf.write([\"hello\", \"world\"])：可以写入字符串列表\n\nf.tell()：返回一个整数,表示当前文件指针的位置(就是到文件头的比特数)。\n\nf.seek(偏移量,[起始位置])：用来移动文件指针。\n    偏移量: 单位为比特，可正可负\n    起始位置: 0 - 文件头, 默认值; 1 - 当前位置; 2 - 文件尾\n\nf.close() 关闭文件\n```\n\n**读取文件**\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nf = open('test.txt')\nt = f.read()\nf.close()\n```\n\n**写入文件**\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nf = open('test.txt', 'w+')\nf.write(\"Hello World\")\nf.close()\n```\n\n- [Python open() 函数](http://www.runoob.com/python/python-func-open.html)\n","slug":"python-file","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ai500nm5gqouk4mdra0"},{"title":"Python2 和 Python3 处理 urlencode 和 urldecode 的区别","date":"2018-10-02T13:58:56.000Z","_content":"\nPython2 和 Python3 对于处理 urlencode 有些区别\n\n<!-- more --><!-- toc -->\n\n## Python2\n\n```python\n>>> import urllib\n>>> f = { 'eventName' : 'myEvent', 'eventDescription' : '中国'}\n>>> urllib.urlencode(f)\n'eventName=myEvent&eventDescription=%E4%B8%AD%E5%9B%BD'\n>>> urllib.quote(\"中国 北京\")\n'%E4%B8%AD%E5%9B%BD%20%E5%8C%97%E4%BA%AC'\n>>> urllib.unquote('%E4%B8%AD%E5%9B%BD%20%E5%8C%97%E4%BA%AC')\n'\\xe4\\xb8\\xad\\xe5\\x9b\\xbd \\xe5\\x8c\\x97\\xe4\\xba\\xac'\n# 需要手动转为 unicode\n>>> urllib.unquote('%E4%B8%AD%E5%9B%BD%20%E5%8C%97%E4%BA%AC').decode('utf8')\nu'\\u4e2d\\u56fd \\u5317\\u4eac'\n```\n\n## Python3\n\n```python\n>>> from urllib.parse import urlencode\n>>> f = { 'eventName' : 'myEvent', 'eventDescription' : '中国'}\n>>> urlencode(f)\n'eventName=myEvent&eventDescription=%E4%B8%AD%E5%9B%BD'\n>>> from urllib.parse import quote\n>>> quote(\"中国\")\n'%E4%B8%AD%E5%9B%BD'\n>>> from urllib.parse import unquote\n>>> unquote('%E4%B8%AD%E5%9B%BD')\n'中国'\n```\n\n对字符串的转码上除了 `quote` 还有 `quote_plus` 方法，他们的区别在于，前者会把空格转为 `%20`，后者转为 `+`\n\n- [quote_plus](https://docs.python.org/2/library/urllib.html#urllib.quote_plus)\n","source":"_posts/2018-10-02-python2-3-urlencode-urldecode.md","raw":"---\ntitle: Python2 和 Python3 处理 urlencode 和 urldecode 的区别\ndate: 2018-10-02 13:58:56\ntags: [python]\n---\n\nPython2 和 Python3 对于处理 urlencode 有些区别\n\n<!-- more --><!-- toc -->\n\n## Python2\n\n```python\n>>> import urllib\n>>> f = { 'eventName' : 'myEvent', 'eventDescription' : '中国'}\n>>> urllib.urlencode(f)\n'eventName=myEvent&eventDescription=%E4%B8%AD%E5%9B%BD'\n>>> urllib.quote(\"中国 北京\")\n'%E4%B8%AD%E5%9B%BD%20%E5%8C%97%E4%BA%AC'\n>>> urllib.unquote('%E4%B8%AD%E5%9B%BD%20%E5%8C%97%E4%BA%AC')\n'\\xe4\\xb8\\xad\\xe5\\x9b\\xbd \\xe5\\x8c\\x97\\xe4\\xba\\xac'\n# 需要手动转为 unicode\n>>> urllib.unquote('%E4%B8%AD%E5%9B%BD%20%E5%8C%97%E4%BA%AC').decode('utf8')\nu'\\u4e2d\\u56fd \\u5317\\u4eac'\n```\n\n## Python3\n\n```python\n>>> from urllib.parse import urlencode\n>>> f = { 'eventName' : 'myEvent', 'eventDescription' : '中国'}\n>>> urlencode(f)\n'eventName=myEvent&eventDescription=%E4%B8%AD%E5%9B%BD'\n>>> from urllib.parse import quote\n>>> quote(\"中国\")\n'%E4%B8%AD%E5%9B%BD'\n>>> from urllib.parse import unquote\n>>> unquote('%E4%B8%AD%E5%9B%BD')\n'中国'\n```\n\n对字符串的转码上除了 `quote` 还有 `quote_plus` 方法，他们的区别在于，前者会把空格转为 `%20`，后者转为 `+`\n\n- [quote_plus](https://docs.python.org/2/library/urllib.html#urllib.quote_plus)\n","slug":"python2-3-urlencode-urldecode","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ai900no5gqo6ofisty2"},{"title":"Python 压缩图片","date":"2018-10-03T16:44:08.000Z","_content":"\nPython 可以使用 Pillow 模块操作图片。\n\n<!-- more --><!-- toc -->\n\n安装详见文档 [https://pillow.readthedocs.io/en/stable/installation.html](https://pillow.readthedocs.io/en/stable/installation.html)\n\n```python\nfrom PIL import Image\n\ndef thumbnail(path, savefile='', q=50):\n    '''压缩并保存到文件'''\n    img = Image.open(path)\n    w, h = img.size\n    width, height = w * q // 100, h * q // 100\n    img.thumbnail((width, height))\n    if not savefile:\n        savefile = '{}_{}x{}.{}'.format(\n            path, width, height, img.format.lower())\n    img.save(savefile, img.format)\n\ndef thumbnail_to_bytes(cls, path, q=50):\n    '''压缩并返回字节数据'''\n    img = Image.open(path)\n    w, h = img.size\n    width, height = w * q // 100, h * q // 100\n    img.thumbnail((width, height))\n    img_bytes = io.BytesIO()\n    img.save(img_bytes, img.format)\n    return img_bytes.getvalue()\n\nthumbnail('test.png', 'new_test.png')\nthumbnail_to_bytes('test.png')\n```\n","source":"_posts/2018-10-03-python-thumbnail-image.md","raw":"---\ntitle: Python 压缩图片\ndate: 2018-10-03 16:44:08\ntags: [python]\n---\n\nPython 可以使用 Pillow 模块操作图片。\n\n<!-- more --><!-- toc -->\n\n安装详见文档 [https://pillow.readthedocs.io/en/stable/installation.html](https://pillow.readthedocs.io/en/stable/installation.html)\n\n```python\nfrom PIL import Image\n\ndef thumbnail(path, savefile='', q=50):\n    '''压缩并保存到文件'''\n    img = Image.open(path)\n    w, h = img.size\n    width, height = w * q // 100, h * q // 100\n    img.thumbnail((width, height))\n    if not savefile:\n        savefile = '{}_{}x{}.{}'.format(\n            path, width, height, img.format.lower())\n    img.save(savefile, img.format)\n\ndef thumbnail_to_bytes(cls, path, q=50):\n    '''压缩并返回字节数据'''\n    img = Image.open(path)\n    w, h = img.size\n    width, height = w * q // 100, h * q // 100\n    img.thumbnail((width, height))\n    img_bytes = io.BytesIO()\n    img.save(img_bytes, img.format)\n    return img_bytes.getvalue()\n\nthumbnail('test.png', 'new_test.png')\nthumbnail_to_bytes('test.png')\n```\n","slug":"python-thumbnail-image","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aia00nq5gqojt5e2niz"},{"title":"Python 使用 type() 动态创建 class","date":"2018-10-04T14:26:52.000Z","_content":"\n动态语言比静态语言有一个很方便的地方，就是可以动态创建类和函数，这在很多逻辑实现上会很方便，有些批量代码也可以通过这个特性实现，省去了程序员的手上功夫。\n\n<!-- more --><!-- toc -->\n\n我们先来看一下静态创建的类的类型\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nclass User():\n    def get(self):\n        print(\"user\")\n\nu = User()\nprint(type(User))\nprint(type(u))\n# <class 'type'>\n# <class '__main__.User'>\n```\n\n从这里可以看到，静态创建的 class 也是 type 类型。\n\n下面我们来动态创建\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef get(self):\n    print('user')\n\nClass = type('User', (object,), {\n    'get': get\n})\n\nu = Class()\nprint(type(Class))\nprint(type(u))\n# <class 'type'>\n# <class '__main__.User'>\n```\n\n从结果看动态创建的 class 跟静态创建的完全一样\n\n```bash\ntype(classname [, super [, func]])\n```\n\ntype 函数的三个参数分别为\n- class 名称，字符串形式\n- 需要继承的父类，元组形式，如果只有一个需要注意在最后加上逗号\n- 需要绑定的函数，字典形式\n","source":"_posts/2018-10-04-python-type-create-class.md","raw":"---\ntitle: Python 使用 type() 动态创建 class\ndate: 2018-10-04 14:26:52\ntags: [python]\n---\n\n动态语言比静态语言有一个很方便的地方，就是可以动态创建类和函数，这在很多逻辑实现上会很方便，有些批量代码也可以通过这个特性实现，省去了程序员的手上功夫。\n\n<!-- more --><!-- toc -->\n\n我们先来看一下静态创建的类的类型\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nclass User():\n    def get(self):\n        print(\"user\")\n\nu = User()\nprint(type(User))\nprint(type(u))\n# <class 'type'>\n# <class '__main__.User'>\n```\n\n从这里可以看到，静态创建的 class 也是 type 类型。\n\n下面我们来动态创建\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef get(self):\n    print('user')\n\nClass = type('User', (object,), {\n    'get': get\n})\n\nu = Class()\nprint(type(Class))\nprint(type(u))\n# <class 'type'>\n# <class '__main__.User'>\n```\n\n从结果看动态创建的 class 跟静态创建的完全一样\n\n```bash\ntype(classname [, super [, func]])\n```\n\ntype 函数的三个参数分别为\n- class 名称，字符串形式\n- 需要继承的父类，元组形式，如果只有一个需要注意在最后加上逗号\n- 需要绑定的函数，字典形式\n","slug":"python-type-create-class","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aib00ns5gqomu8axmu5"},{"title":"Python 日期输出星期信息","date":"2018-10-05T14:26:24.000Z","_content":"\nPython `datetime.date` 模块是可以输出星期天数的，不过是从 0 开始的数字\n\n<!-- more --><!-- toc -->\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\n>>> from datetime import date\n>>> today = date.today()\n>>> today.weekday()\n4\n```\n\n4 即为今天是周五，我们可以使用一个 JSON 常量来格式化输出。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom datetime import date\n\nWEEK = {\n    0: '周一',\n    1: '周二',\n    2: '周三',\n    3: '周四',\n    4: '周五',\n    5: '周六',\n    6: '周日',\n}\n\ntoday = date.today()\n\nprint(WEEK[today.weekday()])\n# 周五\n```\n","source":"_posts/2018-10-05-python-date-week.md","raw":"---\ntitle: Python 日期输出星期信息\ndate: 2018-10-05 14:26:24\ntags: [python]\n---\n\nPython `datetime.date` 模块是可以输出星期天数的，不过是从 0 开始的数字\n\n<!-- more --><!-- toc -->\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\n>>> from datetime import date\n>>> today = date.today()\n>>> today.weekday()\n4\n```\n\n4 即为今天是周五，我们可以使用一个 JSON 常量来格式化输出。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom datetime import date\n\nWEEK = {\n    0: '周一',\n    1: '周二',\n    2: '周三',\n    3: '周四',\n    4: '周五',\n    5: '周六',\n    6: '周日',\n}\n\ntoday = date.today()\n\nprint(WEEK[today.weekday()])\n# 周五\n```\n","slug":"python-date-week","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aic00nu5gqoqy8r43q5"},{"title":"算法题：整数翻转（难度：简单）","date":"2018-10-06T10:18:24.000Z","_content":"\n\n> 《算法题》是个系列文章，题主要来自 [LeetCode](https://leetcode-cn.com/problemset/all/)，每道题我尽量使用两种以上的方法来解决，一种是好理解，但是可能性能差，一种需要花点功夫理解，但是性能好，所以题均由 Python 实现\n\n<!-- more -->\n\n先看下题目要求\n\n> 给出一个 32 位的有符号整数，你需要将这个整数中每位上的数字进行反转。\n>\n> 示例 1: `输入: 123 输出: 321`\n> 示例 2: `输入: -123 输出: -321`\n> 示例 3: `输入: 120 输出: 21`\n>\n> 注意: 假设我们的环境只能存储得下 32 位的有符号整数，则其数值范围为 [−231,  231 − 1]。请根据这个假设，如果反转后整数溢出那么就返回 0。\n\n### 使用字符串\n\n提到翻转，我们第一反应是使用字符串，因为是探讨算法，我们不使用语言的特性，比如 `a[::-1]` 就直接可以实现字符串翻转。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nMAX = 2 ** 31 - 1\nMIN = -2 ** 31\n\ndef reverse1(x):\n    \"\"\"\n    :type x: int\n    :rtype: int\n    \"\"\"\n    if x == 0:\n        return 0\n    y = \"\"\n    r = 0\n    a = str(x)\n    length = len(a)\n    for i in range(length):\n        index = length - 1 - i\n        if not y and a[index] == \"0\":\n            continue\n        y += a[index]\n    if y[-1] == \"-\":\n        r = -int(y[0:-1])\n        if r < MIN:\n            return 0\n        return r\n    r = int(y)\n    if r > MAX:\n        return 0\n    return r\n```\n\n这个算法看上去并不简洁，因为题目的限制，逻辑上显得比较复杂，我们再看一下使用数学的方式翻转。\n\n### 数学运算\n\n这个算法的思路还是像字符串一样，将 `x` 的最后一位推出，并推到 `r` 的前边。\n\n**推出**最后一位，我们使用取余的方式。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nMAX_R = (MAX - 7) // 10\nMIN_R = (MIN - -8) // 10\n\ndef reverse2(x):\n    \"\"\"\n    使用取余的方式，弹出 x 的最后一位，并推到 r 的后面，并如此往复，直到 x = 0\n    :type x: int\n    :rtype: int\n    \"\"\"\n    r = 0\n    while x != 0:\n        chu = 10\n        if x < 0:           # 根据整数的正负，使用相应的取余除数\n            chu = -10\n        pre = x % chu       # 弹出 x 的最后一位\n        x = (x - pre) // 10 # 取余完毕后，整数减去一位\n        if r > MAX_R or (r == MAX_R and pre == 7):\n            # MAX_R = 2147483640\n            # 此处防止后续推入 pre 时，整数溢出\n            return 0\n        if r < MIN_R or (r == MIN_R and pre == -8):\n            # MIN_R = -2147483648\n            # 此处防止后续推入 pre 时，整数溢出\n            return 0\n        r = r * 10 + pre    # 将弹出的最后一位，推到 r 的后面\n    return r\n```\n\n再看这次代码，现在逻辑简洁了很多，我们使用测试用例测试结果\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\nimport unittest\n\nclass TestMain(unittest.TestCase):\n\n    def test_reverse1(self):\n        self.assertEqual(reverse1(123), 321)\n        self.assertEqual(reverse1(-123), -321)\n        self.assertEqual(reverse1(-12300), -321)\n        self.assertEqual(reverse1(1534236469), 0)\n        self.assertEqual(reverse1(-1563847412), 0)\n        self.assertEqual(reverse1(0), 0)\n\n    def test_reverse2(self):\n        self.assertEqual(reverse2(123), 321)\n        self.assertEqual(reverse2(-123), -321)\n        self.assertEqual(reverse2(-12300), -321)\n        self.assertEqual(reverse2(1534236469), 0)\n        self.assertEqual(reverse2(-1563847412), 0)\n        self.assertEqual(reverse2(0), 0)\n\nif __name__ == \"__main__\":\n    unittest.main()\n```\n\n```bash\n$ python 7_reverse_integer.py\n\n..\n----------------------------------------------------------------------\nRan 2 tests in 0.000s\n\nOK\n```\n\n我们再来测试下他们的运行速度\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport time\n\ndef print_func_run_time(count, func, **kw):\n    b = time.clock()\n    for i in range(count):\n        func(**kw)\n    print(func.__name__, 'run {} times used {}s'.format(count, time.clock() -b ))\n\nprint_func_run_time(count, reverse1, x=1534236469)\nprint_func_run_time(count, reverse2, x=1534236469)\n```\n\n```bash\n$ python 7_reverse_integer.py\n\nreverse1 run 10000 times used 0.02178899999999999s\nreverse2 run 10000 times used 0.025115s\n```\n\n运行了，发现有点奇怪，理论上 `reverse2` 时间复杂度要更小，但结果并不是这样，可能是我测试的方式不对。\n\n即使时间有差距，但也不大，还是更推荐第二种算法，因为逻辑更简单，也不容易出错。\n\n完整代码地址：https://github.com/wxnacy/study/blob/master/python/leetcode/7_reverse_integer.py\n\n\n该题来自 [LeetCode](https://leetcode-cn.com/problems/reverse-integer/)\n","source":"_posts/2018-10-06-algorithm-integer-reverse.md","raw":"---\ntitle: 算法题：整数翻转（难度：简单）\ndate: 2018-10-06 10:18:24\ntags: [算法]\n---\n\n\n> 《算法题》是个系列文章，题主要来自 [LeetCode](https://leetcode-cn.com/problemset/all/)，每道题我尽量使用两种以上的方法来解决，一种是好理解，但是可能性能差，一种需要花点功夫理解，但是性能好，所以题均由 Python 实现\n\n<!-- more -->\n\n先看下题目要求\n\n> 给出一个 32 位的有符号整数，你需要将这个整数中每位上的数字进行反转。\n>\n> 示例 1: `输入: 123 输出: 321`\n> 示例 2: `输入: -123 输出: -321`\n> 示例 3: `输入: 120 输出: 21`\n>\n> 注意: 假设我们的环境只能存储得下 32 位的有符号整数，则其数值范围为 [−231,  231 − 1]。请根据这个假设，如果反转后整数溢出那么就返回 0。\n\n### 使用字符串\n\n提到翻转，我们第一反应是使用字符串，因为是探讨算法，我们不使用语言的特性，比如 `a[::-1]` 就直接可以实现字符串翻转。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nMAX = 2 ** 31 - 1\nMIN = -2 ** 31\n\ndef reverse1(x):\n    \"\"\"\n    :type x: int\n    :rtype: int\n    \"\"\"\n    if x == 0:\n        return 0\n    y = \"\"\n    r = 0\n    a = str(x)\n    length = len(a)\n    for i in range(length):\n        index = length - 1 - i\n        if not y and a[index] == \"0\":\n            continue\n        y += a[index]\n    if y[-1] == \"-\":\n        r = -int(y[0:-1])\n        if r < MIN:\n            return 0\n        return r\n    r = int(y)\n    if r > MAX:\n        return 0\n    return r\n```\n\n这个算法看上去并不简洁，因为题目的限制，逻辑上显得比较复杂，我们再看一下使用数学的方式翻转。\n\n### 数学运算\n\n这个算法的思路还是像字符串一样，将 `x` 的最后一位推出，并推到 `r` 的前边。\n\n**推出**最后一位，我们使用取余的方式。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nMAX_R = (MAX - 7) // 10\nMIN_R = (MIN - -8) // 10\n\ndef reverse2(x):\n    \"\"\"\n    使用取余的方式，弹出 x 的最后一位，并推到 r 的后面，并如此往复，直到 x = 0\n    :type x: int\n    :rtype: int\n    \"\"\"\n    r = 0\n    while x != 0:\n        chu = 10\n        if x < 0:           # 根据整数的正负，使用相应的取余除数\n            chu = -10\n        pre = x % chu       # 弹出 x 的最后一位\n        x = (x - pre) // 10 # 取余完毕后，整数减去一位\n        if r > MAX_R or (r == MAX_R and pre == 7):\n            # MAX_R = 2147483640\n            # 此处防止后续推入 pre 时，整数溢出\n            return 0\n        if r < MIN_R or (r == MIN_R and pre == -8):\n            # MIN_R = -2147483648\n            # 此处防止后续推入 pre 时，整数溢出\n            return 0\n        r = r * 10 + pre    # 将弹出的最后一位，推到 r 的后面\n    return r\n```\n\n再看这次代码，现在逻辑简洁了很多，我们使用测试用例测试结果\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\nimport unittest\n\nclass TestMain(unittest.TestCase):\n\n    def test_reverse1(self):\n        self.assertEqual(reverse1(123), 321)\n        self.assertEqual(reverse1(-123), -321)\n        self.assertEqual(reverse1(-12300), -321)\n        self.assertEqual(reverse1(1534236469), 0)\n        self.assertEqual(reverse1(-1563847412), 0)\n        self.assertEqual(reverse1(0), 0)\n\n    def test_reverse2(self):\n        self.assertEqual(reverse2(123), 321)\n        self.assertEqual(reverse2(-123), -321)\n        self.assertEqual(reverse2(-12300), -321)\n        self.assertEqual(reverse2(1534236469), 0)\n        self.assertEqual(reverse2(-1563847412), 0)\n        self.assertEqual(reverse2(0), 0)\n\nif __name__ == \"__main__\":\n    unittest.main()\n```\n\n```bash\n$ python 7_reverse_integer.py\n\n..\n----------------------------------------------------------------------\nRan 2 tests in 0.000s\n\nOK\n```\n\n我们再来测试下他们的运行速度\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport time\n\ndef print_func_run_time(count, func, **kw):\n    b = time.clock()\n    for i in range(count):\n        func(**kw)\n    print(func.__name__, 'run {} times used {}s'.format(count, time.clock() -b ))\n\nprint_func_run_time(count, reverse1, x=1534236469)\nprint_func_run_time(count, reverse2, x=1534236469)\n```\n\n```bash\n$ python 7_reverse_integer.py\n\nreverse1 run 10000 times used 0.02178899999999999s\nreverse2 run 10000 times used 0.025115s\n```\n\n运行了，发现有点奇怪，理论上 `reverse2` 时间复杂度要更小，但结果并不是这样，可能是我测试的方式不对。\n\n即使时间有差距，但也不大，还是更推荐第二种算法，因为逻辑更简单，也不容易出错。\n\n完整代码地址：https://github.com/wxnacy/study/blob/master/python/leetcode/7_reverse_integer.py\n\n\n该题来自 [LeetCode](https://leetcode-cn.com/problems/reverse-integer/)\n","slug":"algorithm-integer-reverse","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aid00nw5gqofy6um8z7"},{"title":"Mysql 截取字符串的函数","date":"2018-10-09T17:06:04.000Z","_content":"\nMySQL 字符串截取函数：left(), right(), substring(), substring_index()\n\n<!-- more --><!-- toc -->\n\n## left()\n\n截取字符串左侧部分\n\n```mysql\n> select left(\"wxnacy.com\", 6);\nwxnacy\n```\n\n## right()\n\n截取字符串右侧部分\n\n```mysql\n> select right(\"wxnacy.com\", 4);\n.com\n```\n\n## substring()\n\n从第 4 个字符开始截取\n\n```mysql\n> select substring(\"wxnacy.com\", 4);\nacy.com\n```\n\n从第 4 个字符开始截取 3 个字符\n\n```mysql\n> select substring(\"wxnacy.com\", 4, 3);\nacy\n```\n\n\n从倒数第 4 个字符开始截取\n\n```mysql\n> select substring(\"wxnacy.com\", -4);\n.com\n```\n\n从第 3 个字符开始截取 2 个字符\n\n```mysql\n> select substring(\"wxnacy.com\", -3, 2);\nco\n```\n\n## substring_index()\n\n截取到第一个 `.` 符号的位置\n\n```mysql\n> select substring_index(\"www.wxnacy.com\", \".\", 1);\nwww\n```\n\n截取倒数第一个 `.` 符号之后的部分\n\n```mysql\n> select substring_index(\"www.wxnacy.com\", \".\", -1);\ncom\n```\n\n如果好不到指定的字符，返回整个字符串\n","source":"_posts/2018-10-09-mysql-substring.md","raw":"---\ntitle: Mysql 截取字符串的函数\ndate: 2018-10-09 17:06:04\ntags: [mysql]\n---\n\nMySQL 字符串截取函数：left(), right(), substring(), substring_index()\n\n<!-- more --><!-- toc -->\n\n## left()\n\n截取字符串左侧部分\n\n```mysql\n> select left(\"wxnacy.com\", 6);\nwxnacy\n```\n\n## right()\n\n截取字符串右侧部分\n\n```mysql\n> select right(\"wxnacy.com\", 4);\n.com\n```\n\n## substring()\n\n从第 4 个字符开始截取\n\n```mysql\n> select substring(\"wxnacy.com\", 4);\nacy.com\n```\n\n从第 4 个字符开始截取 3 个字符\n\n```mysql\n> select substring(\"wxnacy.com\", 4, 3);\nacy\n```\n\n\n从倒数第 4 个字符开始截取\n\n```mysql\n> select substring(\"wxnacy.com\", -4);\n.com\n```\n\n从第 3 个字符开始截取 2 个字符\n\n```mysql\n> select substring(\"wxnacy.com\", -3, 2);\nco\n```\n\n## substring_index()\n\n截取到第一个 `.` 符号的位置\n\n```mysql\n> select substring_index(\"www.wxnacy.com\", \".\", 1);\nwww\n```\n\n截取倒数第一个 `.` 符号之后的部分\n\n```mysql\n> select substring_index(\"www.wxnacy.com\", \".\", -1);\ncom\n```\n\n如果好不到指定的字符，返回整个字符串\n","slug":"mysql-substring","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aie00ny5gqo32f7w8p6"},{"title":"算法题：两数相加（难度：中等）","date":"2018-10-07T22:01:28.000Z","_content":"\n> 《算法题》是个系列文章，题主要来自 [LeetCode](https://leetcode-cn.com/problemset/all/)，每道题我尽量使用两种以上的方法来解决，一种是好理解，但是可能性能差，一种需要花点功夫理解，但是性能好，所以题均由 Python 实现\n\n<!-- more -->\n\n先看下题目要求\n\n> 给出两个 非空 的链表用来表示两个非负的整数。其中，它们各自的位数是按照 逆序 的方式存储的，并且它们的每个节点只能存储 一位 数字。\n> 如果，我们将这两个数相加起来，则会返回一个新的链表来表示它们的和。\n>\n> 您可以假设除了数字 0 之外，这两个数都不会以 0 开头。\n>\n> 示例：\n>\n> 输入：(2 -> 4 -> 3) + (5 -> 6 -> 4)\n> 输出：7 -> 0 -> 8\n> 原因：342 + 465 = 807\n\n先看下如何构建链表\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nclass ListNode():\n    def __init__(self, x):\n        self.val = x\n        self.next = None\n\ndef makeListNode(arr: list):\n    '''使用数组构建链表'''\n    ln = ListNode(0)\n    l = ln\n    for i in arr:\n        l.next = ListNode(i)\n        l = l.next\n    return ln.next\n\ndef listNodeToArray(l: ListNode):\n    '''链表转为数组'''\n    arr = []\n    while l:\n        arr.append(l.val)\n        l = l.next\n    return arr\n```\n\n这道题，我们同样有两种方式。\n\n### 先计算链表代表的数字，再计算并转为链表\n\n从题目的说明，我们很容易得到计算逻辑，先计算链表代表的数字，相加，并转为链表\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef addTwoNumbers1(l1, l2):\n    \"\"\"\n    先计算链表代表的数字，再相加，并转为链表\n    :type l1: ListNode\n    :type l2: ListNode\n    :rtype: ListNode\n    \"\"\"\n    n1 = 0\n    n2 = 0\n    n = 0\n    while l1 or l2:\n        n1 += l1.val * ( 10 ** n ) if l1 else 0     # 计算链表代表的数字\n        n2 += l2.val * ( 10 ** n ) if l2 else 0\n        l1 = l1.next if l1 else None\n        l2 = l2.next if l2 else None\n        n += 1\n    n3 = n1 + n2                                    # 数字相加\n    l3 = ListNode(0)\n    l4 = l3\n    while n3 >= 0:\n        pre = n3 % 10                               # 末尾取余并构建链表\n        n3 = ( n3 - pre ) // 10\n        l4.next = ListNode(pre)\n        l4 = l4.next\n        if n3 == 0:\n            n3 = -1\n    return l3.next\n```\n\n不过这个方法，有两次 `while` 循环，时间复杂度 `O(n**2)`，我们看看是否有更好的写法。\n\n### 直接计算并输出链表\n\n再看下题目，发现结果链表的每位，都是传参的两个链表的每位相加得到的，比如\n\n```bash\n输入：(2 -> 4 -> 3) + (5 -> 6 -> 4)\n2 + 5 = 7\n4 + 6 = 10 -> 0     # 1 进位\n3 + 4 + 1 = 8       # 加上 1 进位\n输出：7 -> 0 -> 8\n```\n\n由此可以使用一次循环，直接计算每位数字并输出到链表\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef addTwoNumbers2(l1, l2):\n    \"\"\"\n    再看下题目，发现结果链表的每位，都是传参的两个链表的每位相加得到的\n    由此可以使用一次循环，直接计算每位数字并输出到链表\n    :type l1: ListNode\n    :type l2: ListNode\n    :rtype: ListNode\n    \"\"\"\n    next_n = 0\n    l3 = ListNode(0)\n    temp = l3\n    while l1 or l2 or next_n:           # l1、l2 循环后，如果有进位，在执行一次\n        n1 = l1.val if l1 else 0\n        n2 = l2.val if l2 else 0\n        n = n1 + n2 + next_n            # 链表数字相加，并加上一个链表的进位\n        pre = n % 10                    # 取余数，并构建该层链表\n        next_n = 1 if n >= 10 else 0    # 判断是否有进位\n        temp.next = ListNode(pre)\n        temp = temp.next\n        l1 = l1.next if l1 else None\n        l2 = l2.next if l2 else None\n    return l3.next\n```\n\n很显然，逻辑更简单，时间复杂度为 `O(n)`，测试下时间\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport unittest\n\nclass TestMain(unittest.TestCase):\n\n    def setUp(self):\n        '''before each test function'''\n        pass\n\n    def tearDown(self):\n        '''after each test function'''\n        pass\n\n    def test_addTwoNumbers1(self):\n        l3 = addTwoNumbers1(makeListNode([2, 4, 3]), makeListNode([5, 6, 4]))\n        self.assertEqual(listNodeToArray(l3), [7, 0, 8])\n\n        l3 = addTwoNumbers1(makeListNode([0]), makeListNode([0]))\n        self.assertEqual(listNodeToArray(l3), [0])\n\n        l3 = addTwoNumbers1(makeListNode([1, 8]), makeListNode([0]))\n        self.assertEqual(listNodeToArray(l3), [1, 8])\n\n        l3 = addTwoNumbers1(makeListNode([5]), makeListNode([5]))\n        self.assertEqual(listNodeToArray(l3), [0, 1])\n\n    def test_addTwoNumbers2(self):\n        l3 = addTwoNumbers2(makeListNode([2, 4, 3]), makeListNode([5, 6, 4]))\n        self.assertEqual(listNodeToArray(l3), [7, 0, 8])\n\n        l3 = addTwoNumbers2(makeListNode([0]), makeListNode([0]))\n        self.assertEqual(listNodeToArray(l3), [0])\n\n        l3 = addTwoNumbers2(makeListNode([1, 8]), makeListNode([0]))\n        self.assertEqual(listNodeToArray(l3), [1, 8])\n\n        l3 = addTwoNumbers2(makeListNode([5]), makeListNode([5]))\n        self.assertEqual(listNodeToArray(l3), [0, 1])\n\nif __name__ == \"__main__\":\n    count = 10000\n    utils.print_func_run_time(count, addTwoNumbers1,\n        l1 = makeListNode([2, 4, 3]), l2 = makeListNode([5, 6, 4]))\n    utils.print_func_run_time(count, addTwoNumbers2,\n        l1 = makeListNode([2, 4, 3]), l2 = makeListNode([5, 6, 4]))\n    unittest.main()\n```\n\n```bash\n$ python 2_add_two_numbers.py\n..\n----------------------------------------------------------------------\nRan 2 tests in 0.000s\n\nOK\naddTwoNumbers1 run 10000 times used 0.05263000000000001s\naddTwoNumbers2 run 10000 times used 0.03459499999999999s\n```\n\n很显然，`addTwoNumbers2` 的运行速度更快\n\n完整代码地址：https://github.com/wxnacy/study/blob/master/python/leetcode/2_add_two_numbers.py\n\n该题来自 [LeetCode](https://leetcode-cn.com/problems/add-two-numbers/)\n","source":"_posts/2018-10-07-algorithm-add-two-numbers.md","raw":"---\ntitle: 算法题：两数相加（难度：中等）\ndate: 2018-10-07 22:01:28\ntags: [算法]\n---\n\n> 《算法题》是个系列文章，题主要来自 [LeetCode](https://leetcode-cn.com/problemset/all/)，每道题我尽量使用两种以上的方法来解决，一种是好理解，但是可能性能差，一种需要花点功夫理解，但是性能好，所以题均由 Python 实现\n\n<!-- more -->\n\n先看下题目要求\n\n> 给出两个 非空 的链表用来表示两个非负的整数。其中，它们各自的位数是按照 逆序 的方式存储的，并且它们的每个节点只能存储 一位 数字。\n> 如果，我们将这两个数相加起来，则会返回一个新的链表来表示它们的和。\n>\n> 您可以假设除了数字 0 之外，这两个数都不会以 0 开头。\n>\n> 示例：\n>\n> 输入：(2 -> 4 -> 3) + (5 -> 6 -> 4)\n> 输出：7 -> 0 -> 8\n> 原因：342 + 465 = 807\n\n先看下如何构建链表\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nclass ListNode():\n    def __init__(self, x):\n        self.val = x\n        self.next = None\n\ndef makeListNode(arr: list):\n    '''使用数组构建链表'''\n    ln = ListNode(0)\n    l = ln\n    for i in arr:\n        l.next = ListNode(i)\n        l = l.next\n    return ln.next\n\ndef listNodeToArray(l: ListNode):\n    '''链表转为数组'''\n    arr = []\n    while l:\n        arr.append(l.val)\n        l = l.next\n    return arr\n```\n\n这道题，我们同样有两种方式。\n\n### 先计算链表代表的数字，再计算并转为链表\n\n从题目的说明，我们很容易得到计算逻辑，先计算链表代表的数字，相加，并转为链表\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef addTwoNumbers1(l1, l2):\n    \"\"\"\n    先计算链表代表的数字，再相加，并转为链表\n    :type l1: ListNode\n    :type l2: ListNode\n    :rtype: ListNode\n    \"\"\"\n    n1 = 0\n    n2 = 0\n    n = 0\n    while l1 or l2:\n        n1 += l1.val * ( 10 ** n ) if l1 else 0     # 计算链表代表的数字\n        n2 += l2.val * ( 10 ** n ) if l2 else 0\n        l1 = l1.next if l1 else None\n        l2 = l2.next if l2 else None\n        n += 1\n    n3 = n1 + n2                                    # 数字相加\n    l3 = ListNode(0)\n    l4 = l3\n    while n3 >= 0:\n        pre = n3 % 10                               # 末尾取余并构建链表\n        n3 = ( n3 - pre ) // 10\n        l4.next = ListNode(pre)\n        l4 = l4.next\n        if n3 == 0:\n            n3 = -1\n    return l3.next\n```\n\n不过这个方法，有两次 `while` 循环，时间复杂度 `O(n**2)`，我们看看是否有更好的写法。\n\n### 直接计算并输出链表\n\n再看下题目，发现结果链表的每位，都是传参的两个链表的每位相加得到的，比如\n\n```bash\n输入：(2 -> 4 -> 3) + (5 -> 6 -> 4)\n2 + 5 = 7\n4 + 6 = 10 -> 0     # 1 进位\n3 + 4 + 1 = 8       # 加上 1 进位\n输出：7 -> 0 -> 8\n```\n\n由此可以使用一次循环，直接计算每位数字并输出到链表\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef addTwoNumbers2(l1, l2):\n    \"\"\"\n    再看下题目，发现结果链表的每位，都是传参的两个链表的每位相加得到的\n    由此可以使用一次循环，直接计算每位数字并输出到链表\n    :type l1: ListNode\n    :type l2: ListNode\n    :rtype: ListNode\n    \"\"\"\n    next_n = 0\n    l3 = ListNode(0)\n    temp = l3\n    while l1 or l2 or next_n:           # l1、l2 循环后，如果有进位，在执行一次\n        n1 = l1.val if l1 else 0\n        n2 = l2.val if l2 else 0\n        n = n1 + n2 + next_n            # 链表数字相加，并加上一个链表的进位\n        pre = n % 10                    # 取余数，并构建该层链表\n        next_n = 1 if n >= 10 else 0    # 判断是否有进位\n        temp.next = ListNode(pre)\n        temp = temp.next\n        l1 = l1.next if l1 else None\n        l2 = l2.next if l2 else None\n    return l3.next\n```\n\n很显然，逻辑更简单，时间复杂度为 `O(n)`，测试下时间\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport unittest\n\nclass TestMain(unittest.TestCase):\n\n    def setUp(self):\n        '''before each test function'''\n        pass\n\n    def tearDown(self):\n        '''after each test function'''\n        pass\n\n    def test_addTwoNumbers1(self):\n        l3 = addTwoNumbers1(makeListNode([2, 4, 3]), makeListNode([5, 6, 4]))\n        self.assertEqual(listNodeToArray(l3), [7, 0, 8])\n\n        l3 = addTwoNumbers1(makeListNode([0]), makeListNode([0]))\n        self.assertEqual(listNodeToArray(l3), [0])\n\n        l3 = addTwoNumbers1(makeListNode([1, 8]), makeListNode([0]))\n        self.assertEqual(listNodeToArray(l3), [1, 8])\n\n        l3 = addTwoNumbers1(makeListNode([5]), makeListNode([5]))\n        self.assertEqual(listNodeToArray(l3), [0, 1])\n\n    def test_addTwoNumbers2(self):\n        l3 = addTwoNumbers2(makeListNode([2, 4, 3]), makeListNode([5, 6, 4]))\n        self.assertEqual(listNodeToArray(l3), [7, 0, 8])\n\n        l3 = addTwoNumbers2(makeListNode([0]), makeListNode([0]))\n        self.assertEqual(listNodeToArray(l3), [0])\n\n        l3 = addTwoNumbers2(makeListNode([1, 8]), makeListNode([0]))\n        self.assertEqual(listNodeToArray(l3), [1, 8])\n\n        l3 = addTwoNumbers2(makeListNode([5]), makeListNode([5]))\n        self.assertEqual(listNodeToArray(l3), [0, 1])\n\nif __name__ == \"__main__\":\n    count = 10000\n    utils.print_func_run_time(count, addTwoNumbers1,\n        l1 = makeListNode([2, 4, 3]), l2 = makeListNode([5, 6, 4]))\n    utils.print_func_run_time(count, addTwoNumbers2,\n        l1 = makeListNode([2, 4, 3]), l2 = makeListNode([5, 6, 4]))\n    unittest.main()\n```\n\n```bash\n$ python 2_add_two_numbers.py\n..\n----------------------------------------------------------------------\nRan 2 tests in 0.000s\n\nOK\naddTwoNumbers1 run 10000 times used 0.05263000000000001s\naddTwoNumbers2 run 10000 times used 0.03459499999999999s\n```\n\n很显然，`addTwoNumbers2` 的运行速度更快\n\n完整代码地址：https://github.com/wxnacy/study/blob/master/python/leetcode/2_add_two_numbers.py\n\n该题来自 [LeetCode](https://leetcode-cn.com/problems/add-two-numbers/)\n","slug":"algorithm-add-two-numbers","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aig00o05gqostnwxezj"},{"title":"Python 最常用的网络请求模块 Requests","date":"2018-10-10T15:49:06.000Z","_content":"\n> Requests是一个优雅而简单的Python HTTP库，专为人类而构建。\n\n<!-- more --><!-- toc -->\n## 安装\n\n```bash\n$ pip install requests\n```\n\n## Request\n\n```python\n>>> import requests\n\n>>> r = requests.get('https://httpbin.org/get', params= {'key': 'value'})\n>>> r = requests.put('https://httpbin.org/put', data = {'key':'value'})\n>>> r = requests.delete('https://httpbin.org/delete', headers={'key': 'value'})\n>>> r = requests.head('https://httpbin.org/get', cookies={'key': 'value'})\n>>> r = requests.options('https://httpbin.org/get', timeout=0.01)\n```\n\n### Cookies\n\n```python\n>>> url = 'https://httpbin.org/cookies'\n>>> cookies = dict(cookies_are='working')\n\n>>> r = requests.get(url, cookies=cookies)\n>>> r.text\n'{\"cookies\": {\"cookies_are\": \"working\"}}'\n```\n\n```python\n>>> jar = requests.cookies.RequestsCookieJar()\n>>> jar.set('tasty_cookie', 'yum', domain='httpbin.org', path='/cookies')\n>>> jar.set('gross_cookie', 'blech', domain='httpbin.org', path='/elsewhere')\n>>> url = 'https://httpbin.org/cookies'\n>>> r = requests.get(url, cookies=jar)\n>>> r.text\n'{\"cookies\": {\"tasty_cookie\": \"yum\"}}'\n```\n\n### 上传文件\n\n```python\n>>> url = 'https://httpbin.org/post'\n>>> files = {'file': open('report.xls', 'rb')}\n\n>>> r = requests.post(url, files=files)\n>>> r.text\n{\n  ...\n  \"files\": {\n    \"file\": \"<censored...binary...data>\"\n  },\n  ...\n}\n```\n\n```python\n>>> url = 'https://httpbin.org/post'\n>>> files = {'file': ('report.xls', open('report.xls', 'rb'), 'application/vnd.ms-excel', {'Expires': '0'})}\n\n>>> r = requests.post(url, files=files)\n>>> r.text\n{\n  ...\n  \"files\": {\n    \"file\": \"<censored...binary...data>\"\n  },\n  ...\n}\n```\n\n```python\n>>> url = 'https://httpbin.org/post'\n>>> files = {'file': ('report.csv', 'some,data,to,send\\nanother,row,to,send\\n')}\n\n>>> r = requests.post(url, files=files)\n>>> r.text\n{\n  ...\n  \"files\": {\n    \"file\": \"some,data,to,send\\\\nanother,row,to,send\\\\n\"\n  },\n  ...\n}\n```\n\n## Response\n\n```python\n>>> import requests\n\n>>> r = requests.get('https://api.github.com/events')\n>>> r.status_code\n200\n\n>>> r.url\n'https://api.github.com/events'\n\n>>> r.text\nu'[{\"repository\":{\"open_issues\":0,\"url\":\"https://github.com/...\n\n>>> r.encoding\n'utf-8'\n\n>>> r.content\nb'[{\"repository\":{\"open_issues\":0,\"url\":\"https://github.com/...\n\n>>> r.json()\n[{u'repository': {u'open_issues': 0, u'url': 'https://github.com/...\n\n>>> r.raw\n<urllib3.response.HTTPResponse object at 0x101194810>\n\n>>> r.raw.read(10)\n'\\x1f\\x8b\\x08\\x00\\x00\\x00\\x00\\x00\\x00\\x03'\n```\n\n### 头信息\n\n```python\n>>> r.headers\n{\n    'content-encoding': 'gzip',\n    'transfer-encoding': 'chunked',\n    'connection': 'close',\n    'server': 'nginx/1.0.4',\n    'x-runtime': '148ms',\n    'etag': '\"e1ca502697e5c9317743dc078f67693f\"',\n    'content-type': 'application/json'\n}\n\n>>> r.headers['Content-Type']\n'application/json'\n\n>>> r.headers.get('content-type')\n'application/json'\n```\n\n### Cookies\n\n```python\n>>> url = 'http://example.com/some/cookie/setting/url'\n>>> r = requests.get(url)\n\n>>> r.cookies['example_cookie_name']\n'example_cookie_value'\n```\n\n- [Requests](http://docs.python-requests.org/en/master/user/quickstart/)\n","source":"_posts/2018-10-10-python-requests.md","raw":"---\ntitle: Python 最常用的网络请求模块 Requests\ndate: 2018-10-10 15:49:06\ntags: [python]\n---\n\n> Requests是一个优雅而简单的Python HTTP库，专为人类而构建。\n\n<!-- more --><!-- toc -->\n## 安装\n\n```bash\n$ pip install requests\n```\n\n## Request\n\n```python\n>>> import requests\n\n>>> r = requests.get('https://httpbin.org/get', params= {'key': 'value'})\n>>> r = requests.put('https://httpbin.org/put', data = {'key':'value'})\n>>> r = requests.delete('https://httpbin.org/delete', headers={'key': 'value'})\n>>> r = requests.head('https://httpbin.org/get', cookies={'key': 'value'})\n>>> r = requests.options('https://httpbin.org/get', timeout=0.01)\n```\n\n### Cookies\n\n```python\n>>> url = 'https://httpbin.org/cookies'\n>>> cookies = dict(cookies_are='working')\n\n>>> r = requests.get(url, cookies=cookies)\n>>> r.text\n'{\"cookies\": {\"cookies_are\": \"working\"}}'\n```\n\n```python\n>>> jar = requests.cookies.RequestsCookieJar()\n>>> jar.set('tasty_cookie', 'yum', domain='httpbin.org', path='/cookies')\n>>> jar.set('gross_cookie', 'blech', domain='httpbin.org', path='/elsewhere')\n>>> url = 'https://httpbin.org/cookies'\n>>> r = requests.get(url, cookies=jar)\n>>> r.text\n'{\"cookies\": {\"tasty_cookie\": \"yum\"}}'\n```\n\n### 上传文件\n\n```python\n>>> url = 'https://httpbin.org/post'\n>>> files = {'file': open('report.xls', 'rb')}\n\n>>> r = requests.post(url, files=files)\n>>> r.text\n{\n  ...\n  \"files\": {\n    \"file\": \"<censored...binary...data>\"\n  },\n  ...\n}\n```\n\n```python\n>>> url = 'https://httpbin.org/post'\n>>> files = {'file': ('report.xls', open('report.xls', 'rb'), 'application/vnd.ms-excel', {'Expires': '0'})}\n\n>>> r = requests.post(url, files=files)\n>>> r.text\n{\n  ...\n  \"files\": {\n    \"file\": \"<censored...binary...data>\"\n  },\n  ...\n}\n```\n\n```python\n>>> url = 'https://httpbin.org/post'\n>>> files = {'file': ('report.csv', 'some,data,to,send\\nanother,row,to,send\\n')}\n\n>>> r = requests.post(url, files=files)\n>>> r.text\n{\n  ...\n  \"files\": {\n    \"file\": \"some,data,to,send\\\\nanother,row,to,send\\\\n\"\n  },\n  ...\n}\n```\n\n## Response\n\n```python\n>>> import requests\n\n>>> r = requests.get('https://api.github.com/events')\n>>> r.status_code\n200\n\n>>> r.url\n'https://api.github.com/events'\n\n>>> r.text\nu'[{\"repository\":{\"open_issues\":0,\"url\":\"https://github.com/...\n\n>>> r.encoding\n'utf-8'\n\n>>> r.content\nb'[{\"repository\":{\"open_issues\":0,\"url\":\"https://github.com/...\n\n>>> r.json()\n[{u'repository': {u'open_issues': 0, u'url': 'https://github.com/...\n\n>>> r.raw\n<urllib3.response.HTTPResponse object at 0x101194810>\n\n>>> r.raw.read(10)\n'\\x1f\\x8b\\x08\\x00\\x00\\x00\\x00\\x00\\x00\\x03'\n```\n\n### 头信息\n\n```python\n>>> r.headers\n{\n    'content-encoding': 'gzip',\n    'transfer-encoding': 'chunked',\n    'connection': 'close',\n    'server': 'nginx/1.0.4',\n    'x-runtime': '148ms',\n    'etag': '\"e1ca502697e5c9317743dc078f67693f\"',\n    'content-type': 'application/json'\n}\n\n>>> r.headers['Content-Type']\n'application/json'\n\n>>> r.headers.get('content-type')\n'application/json'\n```\n\n### Cookies\n\n```python\n>>> url = 'http://example.com/some/cookie/setting/url'\n>>> r = requests.get(url)\n\n>>> r.cookies['example_cookie_name']\n'example_cookie_value'\n```\n\n- [Requests](http://docs.python-requests.org/en/master/user/quickstart/)\n","slug":"python-requests","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aih00o25gqo7q9c0red"},{"title":"Ubuntu 18.04 安装 Mysql","date":"2018-10-11T16:57:37.000Z","_content":"\n本章介绍在 `Ubuntu 18.04` 版本中安装 Mysql\n\n<!-- more --><!-- toc -->\n\n**安装**\n\n```bash\n$ sudo apt update -y\n$ sudo apt install -y mysql-server\n```\n\n与 `ubuntu 16.04` 版本不同，安装过程中不会提示输入密码，需要后续的设置完成。\n\n**设置**\n\n```bash\n$ sudo mysql_secure_installation\n```\n\n执行该命令可以修改 Mysql 密码强度并修改密码。\n\nMysql 默认启动，并且状态为开机自启\n\n如果没有启动可以手动启动\n\n```bash\n$ systemctl start mysql\n```\n\n在 `mysql_secure_installation` 的设置中，有一项默认设置为禁止 root 账户使用密码登录，而是使用 `auth_socket` 插件进行身份验证，这样提高了安全性，但是远程连接 mysql 将变得非常麻烦。\n\n**登录 Mysql**\n\n```bash\n$ sudo mysql\n```\n\n**检查每个用户的验证方式**\n\n```bash\n> SELECT user，authentication_string，plugin，host FROM mysql.user;\n\n+------------------+-------------------------------------------+-----------------------+-----------+\n| user             | authentication_string                     | plugin                | host      |\n+------------------+-------------------------------------------+-----------------------+-----------+\n| root             |                                           | auth_socket           | localhost |\n| mysql.session    | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE | mysql_native_password | localhost |\n| mysql.sys        | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE | mysql_native_password | localhost |\n| debian-sys-maint | *82BAC2D99C04DC4A272F86365C7704C18576CAA8 | mysql_native_password | localhost |\n+------------------+-------------------------------------------+-----------------------+-----------+\n4 rows in set (0.00 sec)\n```\n\n**将 root 用户改为密码验证**\n\n```bash\n> ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'password';\n```\n\n**重新加载授权表使更改生效**\n\n```bash\n> FLUSH PRIVILEGES;\n```\n\n退出 Mysql 后，再次使用密码即可登录\n\n```bash\n$ mysql -uroot -p\n```\n\n**查看版本信息**\n\n```bash\n$ mysqladmin -p -u root version\n\nEnter password:\nmysqladmin  Ver 8.42 Distrib 5.7.22, for Linux on x86_64\nCopyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nServer version          5.7.22-0ubuntu0.16.04.1\nProtocol version        10\nConnection              Localhost via UNIX socket\nUNIX socket             /var/run/mysqld/mysqld.sock\nUptime:                 18 min 33 sec\n\nThreads: 1  Questions: 18  Slow queries: 0  Opens: 115  Flush tables: 1  Open tables: 34  Queries per second avg: 0.016\n```\n\n**修改密码**\n\n```mysql\n> set password=password('wxnacy');\n```\n\n因为 mysql 的安全策略，密码的最低长度为 8 位，所以这个命令会报错，想要修改它的安全策略可以参见[配置](/2018/06/10/centos7-install-mysql/#pei-zhi)\n\n## 对外开放\n\n**打开防火墙 3306 端口**\n\n```bash\n$ sudo ufw allow 3306\n$ sudo ufw disable\n$ sudo ufw enable\n```\n\n**注释绑定 ip**\n\n```bash\n$ sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf\n\n# bind-address      = 127.0.0.1\n```\n\n**允许所有ip访问**\n\n```mysql\n> GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'wxnacy' WITH GRANT OPTION;\n```\n\n**重启 Mysql**\n\n```bash\n$ sudo systemctl restart mysql\n```\n\n- [A Quick Guide to Using the MySQL APT Repository](https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/)\n- [How To Install MySQL on Ubuntu 18.04](https://www.digitalocean.com/community/tutorials/how-to-install-mysql-on-ubuntu-18-04)\n- [CentOS 7 安装 Mysql](/2018/06/10/centos7-install-mysql/)\n","source":"_posts/2018-10-11-ubuntu1804-install-mysql.md","raw":"---\ntitle: Ubuntu 18.04 安装 Mysql\ndate: 2018-10-11 16:57:37\ntags: [linux, mysql]\n---\n\n本章介绍在 `Ubuntu 18.04` 版本中安装 Mysql\n\n<!-- more --><!-- toc -->\n\n**安装**\n\n```bash\n$ sudo apt update -y\n$ sudo apt install -y mysql-server\n```\n\n与 `ubuntu 16.04` 版本不同，安装过程中不会提示输入密码，需要后续的设置完成。\n\n**设置**\n\n```bash\n$ sudo mysql_secure_installation\n```\n\n执行该命令可以修改 Mysql 密码强度并修改密码。\n\nMysql 默认启动，并且状态为开机自启\n\n如果没有启动可以手动启动\n\n```bash\n$ systemctl start mysql\n```\n\n在 `mysql_secure_installation` 的设置中，有一项默认设置为禁止 root 账户使用密码登录，而是使用 `auth_socket` 插件进行身份验证，这样提高了安全性，但是远程连接 mysql 将变得非常麻烦。\n\n**登录 Mysql**\n\n```bash\n$ sudo mysql\n```\n\n**检查每个用户的验证方式**\n\n```bash\n> SELECT user，authentication_string，plugin，host FROM mysql.user;\n\n+------------------+-------------------------------------------+-----------------------+-----------+\n| user             | authentication_string                     | plugin                | host      |\n+------------------+-------------------------------------------+-----------------------+-----------+\n| root             |                                           | auth_socket           | localhost |\n| mysql.session    | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE | mysql_native_password | localhost |\n| mysql.sys        | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE | mysql_native_password | localhost |\n| debian-sys-maint | *82BAC2D99C04DC4A272F86365C7704C18576CAA8 | mysql_native_password | localhost |\n+------------------+-------------------------------------------+-----------------------+-----------+\n4 rows in set (0.00 sec)\n```\n\n**将 root 用户改为密码验证**\n\n```bash\n> ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'password';\n```\n\n**重新加载授权表使更改生效**\n\n```bash\n> FLUSH PRIVILEGES;\n```\n\n退出 Mysql 后，再次使用密码即可登录\n\n```bash\n$ mysql -uroot -p\n```\n\n**查看版本信息**\n\n```bash\n$ mysqladmin -p -u root version\n\nEnter password:\nmysqladmin  Ver 8.42 Distrib 5.7.22, for Linux on x86_64\nCopyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nServer version          5.7.22-0ubuntu0.16.04.1\nProtocol version        10\nConnection              Localhost via UNIX socket\nUNIX socket             /var/run/mysqld/mysqld.sock\nUptime:                 18 min 33 sec\n\nThreads: 1  Questions: 18  Slow queries: 0  Opens: 115  Flush tables: 1  Open tables: 34  Queries per second avg: 0.016\n```\n\n**修改密码**\n\n```mysql\n> set password=password('wxnacy');\n```\n\n因为 mysql 的安全策略，密码的最低长度为 8 位，所以这个命令会报错，想要修改它的安全策略可以参见[配置](/2018/06/10/centos7-install-mysql/#pei-zhi)\n\n## 对外开放\n\n**打开防火墙 3306 端口**\n\n```bash\n$ sudo ufw allow 3306\n$ sudo ufw disable\n$ sudo ufw enable\n```\n\n**注释绑定 ip**\n\n```bash\n$ sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf\n\n# bind-address      = 127.0.0.1\n```\n\n**允许所有ip访问**\n\n```mysql\n> GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'wxnacy' WITH GRANT OPTION;\n```\n\n**重启 Mysql**\n\n```bash\n$ sudo systemctl restart mysql\n```\n\n- [A Quick Guide to Using the MySQL APT Repository](https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/)\n- [How To Install MySQL on Ubuntu 18.04](https://www.digitalocean.com/community/tutorials/how-to-install-mysql-on-ubuntu-18-04)\n- [CentOS 7 安装 Mysql](/2018/06/10/centos7-install-mysql/)\n","slug":"ubuntu1804-install-mysql","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aii00o45gqouv41p12g"},{"title":"Zsh 配置文件加载顺序","date":"2018-10-08T15:33:42.000Z","_content":"\nZsh 中我们最常用到的配置文件为 `~/.zshrc`，但其实它完整的生命周期还有很多配置文件。\n\n<!-- more -->\n\n它们是\n\n```bash\n/etc/zshenv\n/etc/zprofile\n/etc/zshrc\n/etc/zlogin\n/etc/zlogout\n~/.zshenv\n~/.zprofile\n~/.zshrc\n~/.zlogin\n~/.zlogout\n```\n\n它们的加载顺序为\n\n```bash\n/etc/zshenv\n~/.zshenv\n/etc/zprofile\n~/.zprofile\n/etc/zshrc\n~/.zshrc\n/etc/zlogin\n~/.zlogin\n~/.zlogout\n/etc/zlogout\n```\n\n`/etc` 下的配置文件我们通常不会去修改，我们更关心当前用户的 Zsh 生命周期。\n\n我们可以分别在 `~/.zshenv` `~/.zprofile` `~/.zshrc` `~/.zlogin` `~/.zlogout` 中添加相应名字的打印信息，比如：\n\n```bash\necho '.zshrc' >> /tmp/zsh_startups\n```\n\n我们先打开一个 Terminal 监听该文件的变化\n\n```bash\n$ tail -f /tmp/zsh_startups\n```\n\n然后再打开一个 Terminal，可以看到日志变化\n\n```bash\n.zshenv\n.zprofile\n.zshrc\n.zlogin\n```\n\n当关闭该 Terminal，则会在打印一次 `~/.zlogout`\n\n这次我们打开 Terminal 后，重新切换 Zsh 环境\n\n```bash\n$ zsh\n```\n\n这次的加载顺序为\n\n```bash\n.zshenv\n.zshrc\n```\n\n从这里我们可以得知，打开新的 Terminal 和切换 Zsh 配置的加载区别。\n\n这样我们可以得到一个信息，那就是把耗时长，并且不经常变动的的配置信息放到 `~/.zprofile` 中，这样大部分的耗时只发生在打开 Terminal 时，从而提高执行 `source ~/.zshrc` 的速度。\n\n- [Startup/Shutdown Files](http://zsh.sourceforge.net/Doc/Release/Files.html#Startup_002fShutdown-Files)\n","source":"_posts/2018-10-08-zsh-startup-files.md","raw":"---\ntitle: Zsh 配置文件加载顺序\ndate: 2018-10-08 15:33:42\ntags: [zsh]\n---\n\nZsh 中我们最常用到的配置文件为 `~/.zshrc`，但其实它完整的生命周期还有很多配置文件。\n\n<!-- more -->\n\n它们是\n\n```bash\n/etc/zshenv\n/etc/zprofile\n/etc/zshrc\n/etc/zlogin\n/etc/zlogout\n~/.zshenv\n~/.zprofile\n~/.zshrc\n~/.zlogin\n~/.zlogout\n```\n\n它们的加载顺序为\n\n```bash\n/etc/zshenv\n~/.zshenv\n/etc/zprofile\n~/.zprofile\n/etc/zshrc\n~/.zshrc\n/etc/zlogin\n~/.zlogin\n~/.zlogout\n/etc/zlogout\n```\n\n`/etc` 下的配置文件我们通常不会去修改，我们更关心当前用户的 Zsh 生命周期。\n\n我们可以分别在 `~/.zshenv` `~/.zprofile` `~/.zshrc` `~/.zlogin` `~/.zlogout` 中添加相应名字的打印信息，比如：\n\n```bash\necho '.zshrc' >> /tmp/zsh_startups\n```\n\n我们先打开一个 Terminal 监听该文件的变化\n\n```bash\n$ tail -f /tmp/zsh_startups\n```\n\n然后再打开一个 Terminal，可以看到日志变化\n\n```bash\n.zshenv\n.zprofile\n.zshrc\n.zlogin\n```\n\n当关闭该 Terminal，则会在打印一次 `~/.zlogout`\n\n这次我们打开 Terminal 后，重新切换 Zsh 环境\n\n```bash\n$ zsh\n```\n\n这次的加载顺序为\n\n```bash\n.zshenv\n.zshrc\n```\n\n从这里我们可以得知，打开新的 Terminal 和切换 Zsh 配置的加载区别。\n\n这样我们可以得到一个信息，那就是把耗时长，并且不经常变动的的配置信息放到 `~/.zprofile` 中，这样大部分的耗时只发生在打开 Terminal 时，从而提高执行 `source ~/.zshrc` 的速度。\n\n- [Startup/Shutdown Files](http://zsh.sourceforge.net/Doc/Release/Files.html#Startup_002fShutdown-Files)\n","slug":"zsh-startup-files","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aij00o65gqo1ne5ma8x"},{"title":"Go 报错 invalid memory address or nil pointer dereference","date":"2018-10-12T11:10:56.000Z","_content":"\n在写 Go 程序时报了一个莫名的错误，如标题。\n\n<!-- more --><!-- toc -->\n仔细排查后发现问题出在这个块代码\n\n```go\nrows, err := db.Query(query, args...)\ndefer rows.Close()\nif err != nil {\n    return nil, err\n}\n```\n\n经过 Google 后发现，`defer` 的位置不正确\n\n> The defer only defers the function call. The field and method are accessed immediately.\n\n修改后即可\n\n```go\nrows, err := db.Query(query, args...)\nif err != nil {\n    return nil, err\n}\ndefer rows.Close()\n```\n\n- [Go: panic: runtime error: invalid memory address or nil pointer dereference](https://stackoverflow.com/questions/16280176/go-panic-runtime-error-invalid-memory-address-or-nil-pointer-dereference)\n","source":"_posts/2018-10-12-go-invalid-memory.md","raw":"---\ntitle: Go 报错 invalid memory address or nil pointer dereference\ndate: 2018-10-12 11:10:56\ntags: [go]\n---\n\n在写 Go 程序时报了一个莫名的错误，如标题。\n\n<!-- more --><!-- toc -->\n仔细排查后发现问题出在这个块代码\n\n```go\nrows, err := db.Query(query, args...)\ndefer rows.Close()\nif err != nil {\n    return nil, err\n}\n```\n\n经过 Google 后发现，`defer` 的位置不正确\n\n> The defer only defers the function call. The field and method are accessed immediately.\n\n修改后即可\n\n```go\nrows, err := db.Query(query, args...)\nif err != nil {\n    return nil, err\n}\ndefer rows.Close()\n```\n\n- [Go: panic: runtime error: invalid memory address or nil pointer dereference](https://stackoverflow.com/questions/16280176/go-panic-runtime-error-invalid-memory-address-or-nil-pointer-dereference)\n","slug":"go-invalid-memory","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ail00o85gqok4bo27ij"},{"title":"LeetCode 刷题集：2. 两数相加","date":"2018-10-14T09:31:33.000Z","_content":"\n这是一个系列，记录了我在刷 [LeetCode](https://leetcode-cn.com/problemset/all/) 题时的推导过程，全部记录地址为：[https://wxnacy.com/leetcode/](https://wxnacy.com/leetcode/)\n\n<!-- more -->\n<!-- toc -->\n\n本文仅作引导使用，如果页面没有自动跳转，请点击 [LeetCode 刷题集：2. 两数相加](/leetcode/problems/2-add-two-numbers/)\n\n{% raw %}\n<script language=\"javascript\" type=\"text/javascript\">\n       window.location.href='/leetcode/problems/2-add-two-numbers/'\n</script>\n{% endraw %}\n","source":"_posts/2018-10-14-leetcode-2-add-two-numbers.md","raw":"---\ntitle: LeetCode 刷题集：2. 两数相加\ndate: 2018-10-14 09:31:33\ntags: [leetcode, 算法]\n---\n\n这是一个系列，记录了我在刷 [LeetCode](https://leetcode-cn.com/problemset/all/) 题时的推导过程，全部记录地址为：[https://wxnacy.com/leetcode/](https://wxnacy.com/leetcode/)\n\n<!-- more -->\n<!-- toc -->\n\n本文仅作引导使用，如果页面没有自动跳转，请点击 [LeetCode 刷题集：2. 两数相加](/leetcode/problems/2-add-two-numbers/)\n\n{% raw %}\n<script language=\"javascript\" type=\"text/javascript\">\n       window.location.href='/leetcode/problems/2-add-two-numbers/'\n</script>\n{% endraw %}\n","slug":"leetcode-2-add-two-numbers","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aim00ob5gqoqinrzjls"},{"title":"LeetCode 刷题集：7. 整数反转","date":"2018-10-16T16:59:48.000Z","_content":"\n这是一个系列，记录了我在刷 [LeetCode](https://leetcode-cn.com/problemset/all/) 题时的推导过程，全部记录地址为：[https://wxnacy.com/leetcode/](https://wxnacy.com/leetcode/)\n\n<!-- more -->\n<!-- toc -->\n\n本文仅作引导使用，如果页面没有自动跳转，请点击 [LeetCode 刷题集：7. 整数反转](/leetcode/problems/7-reverse-integer/)\n\n{% raw %}\n<script language=\"javascript\" type=\"text/javascript\">\n       window.location.href='/leetcode/problems/7-reverse-integer/'\n</script>\n{% endraw %}\n","source":"_posts/2018-10-16-leetcode-7-reverse-integer.md","raw":"---\ntitle: LeetCode 刷题集：7. 整数反转\ndate: 2018-10-16 16:59:48\ntags: [leetcode, 算法]\n---\n\n这是一个系列，记录了我在刷 [LeetCode](https://leetcode-cn.com/problemset/all/) 题时的推导过程，全部记录地址为：[https://wxnacy.com/leetcode/](https://wxnacy.com/leetcode/)\n\n<!-- more -->\n<!-- toc -->\n\n本文仅作引导使用，如果页面没有自动跳转，请点击 [LeetCode 刷题集：7. 整数反转](/leetcode/problems/7-reverse-integer/)\n\n{% raw %}\n<script language=\"javascript\" type=\"text/javascript\">\n       window.location.href='/leetcode/problems/7-reverse-integer/'\n</script>\n{% endraw %}\n","slug":"leetcode-7-reverse-integer","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ain00od5gqoef2w25e4"},{"title":"LeetCode 刷题集：3. 无重复字符的最长子串","date":"2018-10-15T09:51:05.000Z","_content":"\n这是一个系列，记录了我在刷 [LeetCode](https://leetcode-cn.com/problemset/all/) 题时的推导过程，全部记录地址为：[https://wxnacy.com/leetcode/](https://wxnacy.com/leetcode/)\n\n<!-- more -->\n<!-- toc -->\n\n本文仅作引导使用，如果页面没有自动跳转，请点击 [LeetCode 刷题集：3. 无重复字符的最长子串](/leetcode/problems/3-longest-substring-without-repeating-characters/)\n\n{% raw %}\n<script language=\"javascript\" type=\"text/javascript\">\n       window.location.href='/leetcode/problems/3-longest-substring-without-repeating-characters/'\n</script>\n{% endraw %}\n","source":"_posts/2018-10-15-leetcode-3-longest-substring-without-repeating-characters.md","raw":"---\ntitle: LeetCode 刷题集：3. 无重复字符的最长子串\ndate: 2018-10-15 09:51:05\ntags: [leetcode, 算法]\n---\n\n这是一个系列，记录了我在刷 [LeetCode](https://leetcode-cn.com/problemset/all/) 题时的推导过程，全部记录地址为：[https://wxnacy.com/leetcode/](https://wxnacy.com/leetcode/)\n\n<!-- more -->\n<!-- toc -->\n\n本文仅作引导使用，如果页面没有自动跳转，请点击 [LeetCode 刷题集：3. 无重复字符的最长子串](/leetcode/problems/3-longest-substring-without-repeating-characters/)\n\n{% raw %}\n<script language=\"javascript\" type=\"text/javascript\">\n       window.location.href='/leetcode/problems/3-longest-substring-without-repeating-characters/'\n</script>\n{% endraw %}\n","slug":"leetcode-3-longest-substring-without-repeating-characters","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aio00of5gqoic8gw1hi"},{"title":"LeetCode 刷题集：1. 两数之和","date":"2018-10-13T09:18:07.000Z","_content":"\n这是一个系列，记录了我在刷 [LeetCode](https://leetcode-cn.com/problemset/all/) 题时的推导过程，全部记录地址为：[https://wxnacy.com/leetcode/](https://wxnacy.com/leetcode/)\n\n<!-- more -->\n<!-- toc -->\n\n本文仅作引导使用，如果页面没有自动跳转，请点击 [LeetCode 刷题集：1. 两数之和](/leetcode/problems/1-two-sum/)\n\n{% raw %}\n<script language=\"javascript\" type=\"text/javascript\">\n       window.location.href='/leetcode/problems/1-two-sum/'\n</script>\n{% endraw %}\n","source":"_posts/2018-10-13-leetcode-1-two-sum.md","raw":"---\ntitle: LeetCode 刷题集：1. 两数之和\ndate: 2018-10-13 09:18:07\ntags: [leetcode, 算法]\n---\n\n这是一个系列，记录了我在刷 [LeetCode](https://leetcode-cn.com/problemset/all/) 题时的推导过程，全部记录地址为：[https://wxnacy.com/leetcode/](https://wxnacy.com/leetcode/)\n\n<!-- more -->\n<!-- toc -->\n\n本文仅作引导使用，如果页面没有自动跳转，请点击 [LeetCode 刷题集：1. 两数之和](/leetcode/problems/1-two-sum/)\n\n{% raw %}\n<script language=\"javascript\" type=\"text/javascript\">\n       window.location.href='/leetcode/problems/1-two-sum/'\n</script>\n{% endraw %}\n","slug":"leetcode-1-two-sum","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aiq00oi5gqoga6n5n9y"},{"title":"Ubuntu 报错：Could not get lock /var/lib/dpkg/lock","date":"2018-10-17T15:10:54.000Z","_content":"\n在 Ubuntu 中使用 `apt` 下载软件时报了错误\n\n<!-- more --><!-- toc -->\n```bash\nE: Could not get lock /var/lib/dpkg/lock - open (11 Resource temporarily unavailable)\nE: Unable to lock the administration directory (/var/lib/dpkg/) is another process using it?\n```\n\n最后几个单词提示 `dpkg` 当前有其他进程在使用，可以通过两种方式解决\n\n```bash\n$ sudo rm /var/lib/dpkg/lock\n```\n\n或杀掉进程\n\n```bash\n$ ps aux | grep apt\n$ kill -9 processNum\n```\n\n- [Unable to lock the administration directory (/var/lib/dpkg/) is another process using it?](https://askubuntu.com/questions/15433/unable-to-lock-the-administration-directory-var-lib-dpkg-is-another-process)\n","source":"_posts/2018-10-17-ubuntu-error-could-not-get-lock.md","raw":"---\ntitle: Ubuntu 报错：Could not get lock /var/lib/dpkg/lock\ndate: 2018-10-17 15:10:54\ntags: [linux]\n---\n\n在 Ubuntu 中使用 `apt` 下载软件时报了错误\n\n<!-- more --><!-- toc -->\n```bash\nE: Could not get lock /var/lib/dpkg/lock - open (11 Resource temporarily unavailable)\nE: Unable to lock the administration directory (/var/lib/dpkg/) is another process using it?\n```\n\n最后几个单词提示 `dpkg` 当前有其他进程在使用，可以通过两种方式解决\n\n```bash\n$ sudo rm /var/lib/dpkg/lock\n```\n\n或杀掉进程\n\n```bash\n$ ps aux | grep apt\n$ kill -9 processNum\n```\n\n- [Unable to lock the administration directory (/var/lib/dpkg/) is another process using it?](https://askubuntu.com/questions/15433/unable-to-lock-the-administration-directory-var-lib-dpkg-is-another-process)\n","slug":"ubuntu-error-could-not-get-lock","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2air00ok5gqomm9e1c7o"},{"title":"LeetCode 刷题集：136. 只出现一次的数字","date":"2018-10-18T13:52:02.000Z","_content":"\n这是一个系列，记录了我在刷 [LeetCode](https://leetcode-cn.com/problemset/all/) 题时的推导过程，全部记录地址为：[https://wxnacy.com/leetcode/](https://wxnacy.com/leetcode/)\n\n<!-- more -->\n<!-- toc -->\n\n本文仅作引导使用，如果页面没有自动跳转，请点击 [LeetCode 刷题集：136. 只出现一次的数字](/leetcode/problems/136-single-number/)\n\n{% raw %}\n<script language=\"javascript\" type=\"text/javascript\">\n       window.location.href='/leetcode/problems/136-single-number/'\n</script>\n{% endraw %}\n","source":"_posts/2018-10-18-leetcode-136-single-number.md","raw":"---\ntitle: LeetCode 刷题集：136. 只出现一次的数字\ndate: 2018-10-18 13:52:02\ntags: [leetcode, 算法]\n---\n\n这是一个系列，记录了我在刷 [LeetCode](https://leetcode-cn.com/problemset/all/) 题时的推导过程，全部记录地址为：[https://wxnacy.com/leetcode/](https://wxnacy.com/leetcode/)\n\n<!-- more -->\n<!-- toc -->\n\n本文仅作引导使用，如果页面没有自动跳转，请点击 [LeetCode 刷题集：136. 只出现一次的数字](/leetcode/problems/136-single-number/)\n\n{% raw %}\n<script language=\"javascript\" type=\"text/javascript\">\n       window.location.href='/leetcode/problems/136-single-number/'\n</script>\n{% endraw %}\n","slug":"leetcode-136-single-number","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ais00on5gqosl3zhj1i"},{"title":"Mac 上“磁盘工具”中可用的文件系统格式","date":"2018-10-19T21:09:57.000Z","_content":"\n\nMac 上的“磁盘工具”支持多种文件系统格式：\n\n- Apple 文件系统 (APFS)：macOS 10.13 或后续版本使用的文件系统。\n- Mac OS 扩展：macOS 10.12 或之前版本使用的文件系统。\n- MS-DOS (FAT) 和 ExFAT： 与 Windows 兼容的文件系统。\n\n<!-- more -->\n\n## Apple 文件系统 (APFS)\n\nApple 文件系统 (APFS) 是运行 macOS 10.13 或后续版本的 Mac 电脑所使用的默认文件系统，它具有强加密、空间共享、磁盘快照、快速目录大小统计等特性，以及改进的文件系统基础。虽然 APFS 最适合于新款 Mac 电脑中所用的闪存/SSD 储存，它也可以与使用传统硬盘驱动器 (HDD) 和外置直连储存设备的低版本系统配合使用。macOS 10.13 或后续版本支持 APFS 用于可引导启动的宗卷和数据宗卷。\n\nAPFS 按照需求分配容器中的磁盘空间。磁盘的可用空间会共享，并且可按需分配到容器中任意单独的宗卷。如果需要，您可以指定每个宗卷的保留大小和配额大小。每个宗卷仅使用整体容器的一部分，这样一来，可用空间即容器的总大小减去该容器中所有宗卷的大小。\n\n为运行 macOS 10.13 或后续版本的 Mac 电脑选取以下其中一种 APFS 文件系统格式。\n\n- APFS：使用 APFS 格式。\n- APFS（加密）：使用 APFS 格式且加密宗卷。\n- APFS（区分大小写）：使用 APFS 格式并区分文件和文件夹名称的大小写。例如，名称为“Homework”和“HOMEWORK”的文件夹是两个不同的文件夹。\n- APFS（区分大小写，加密）：使用 APFS 格式，区分文件和文件夹名称的大小写且加密宗卷。例如，名称为“Homework”和“HOMEWORK”的文件夹是两个不同的文件夹。\n\n您可以轻松[将宗卷添加到 APFS 容器](https://support.apple.com/zh-cn/guide/disk-utility/dskutl14027/18.0/mac/10.14)。APFS 容器中的每个宗卷都可以拥有其 APFS 格式：APFS、APFS（加密）、APFS（区分大小写）或 APFS（区分大小写，加密）。\n\n## Mac OS 扩展\n\n为兼容运行 macOS 10.12 或之前版本的 Mac 电脑选取以下其中一种 Mac OS 扩展文件系统格式。\n\n- Mac OS 扩展（日志式）：使用 Mac 格式（日志式 HFS Plus）来保护分层文件系统的完整性。\n- Mac OS 扩展（日志式，加密）：使用 Mac 格式，要求密码，并加密分区。\n- Mac OS 扩展（区分大小写，日志式）：使用 Mac 格式并区分文件夹名称的大小写。例如，名称为“Homework”和“HOMEWORK”的文件夹是两个不同的文件夹。\n- Mac OS 扩展（区分大小写，日志式，加密）：使用 Mac 格式，区分文件夹名称的大小写，要求密码，并加密分区。\n\n## Windows 兼容格式\n\n如果格式化磁盘以配合 Windows 使用，请选取以下其中一种兼容 Windows 的文件系统格式。\n\n- MS-DOS (FAT)：用于 Windows 宗卷且大小为 32 GB 或不足 32 GB。\n\n- ExFAT：用于 Windows 宗卷且大小超过 32 GB。\n\n[Mac 上“磁盘工具”中可用的文件系统格式](https://support.apple.com/zh-cn/guide/disk-utility/dsku19ed921c/mac)\n\n","source":"_posts/2018-10-19-mac-disk-utility.md","raw":"---\ntitle: Mac 上“磁盘工具”中可用的文件系统格式\ndate: 2018-10-19 21:09:57\ntags: [mac]\n---\n\n\nMac 上的“磁盘工具”支持多种文件系统格式：\n\n- Apple 文件系统 (APFS)：macOS 10.13 或后续版本使用的文件系统。\n- Mac OS 扩展：macOS 10.12 或之前版本使用的文件系统。\n- MS-DOS (FAT) 和 ExFAT： 与 Windows 兼容的文件系统。\n\n<!-- more -->\n\n## Apple 文件系统 (APFS)\n\nApple 文件系统 (APFS) 是运行 macOS 10.13 或后续版本的 Mac 电脑所使用的默认文件系统，它具有强加密、空间共享、磁盘快照、快速目录大小统计等特性，以及改进的文件系统基础。虽然 APFS 最适合于新款 Mac 电脑中所用的闪存/SSD 储存，它也可以与使用传统硬盘驱动器 (HDD) 和外置直连储存设备的低版本系统配合使用。macOS 10.13 或后续版本支持 APFS 用于可引导启动的宗卷和数据宗卷。\n\nAPFS 按照需求分配容器中的磁盘空间。磁盘的可用空间会共享，并且可按需分配到容器中任意单独的宗卷。如果需要，您可以指定每个宗卷的保留大小和配额大小。每个宗卷仅使用整体容器的一部分，这样一来，可用空间即容器的总大小减去该容器中所有宗卷的大小。\n\n为运行 macOS 10.13 或后续版本的 Mac 电脑选取以下其中一种 APFS 文件系统格式。\n\n- APFS：使用 APFS 格式。\n- APFS（加密）：使用 APFS 格式且加密宗卷。\n- APFS（区分大小写）：使用 APFS 格式并区分文件和文件夹名称的大小写。例如，名称为“Homework”和“HOMEWORK”的文件夹是两个不同的文件夹。\n- APFS（区分大小写，加密）：使用 APFS 格式，区分文件和文件夹名称的大小写且加密宗卷。例如，名称为“Homework”和“HOMEWORK”的文件夹是两个不同的文件夹。\n\n您可以轻松[将宗卷添加到 APFS 容器](https://support.apple.com/zh-cn/guide/disk-utility/dskutl14027/18.0/mac/10.14)。APFS 容器中的每个宗卷都可以拥有其 APFS 格式：APFS、APFS（加密）、APFS（区分大小写）或 APFS（区分大小写，加密）。\n\n## Mac OS 扩展\n\n为兼容运行 macOS 10.12 或之前版本的 Mac 电脑选取以下其中一种 Mac OS 扩展文件系统格式。\n\n- Mac OS 扩展（日志式）：使用 Mac 格式（日志式 HFS Plus）来保护分层文件系统的完整性。\n- Mac OS 扩展（日志式，加密）：使用 Mac 格式，要求密码，并加密分区。\n- Mac OS 扩展（区分大小写，日志式）：使用 Mac 格式并区分文件夹名称的大小写。例如，名称为“Homework”和“HOMEWORK”的文件夹是两个不同的文件夹。\n- Mac OS 扩展（区分大小写，日志式，加密）：使用 Mac 格式，区分文件夹名称的大小写，要求密码，并加密分区。\n\n## Windows 兼容格式\n\n如果格式化磁盘以配合 Windows 使用，请选取以下其中一种兼容 Windows 的文件系统格式。\n\n- MS-DOS (FAT)：用于 Windows 宗卷且大小为 32 GB 或不足 32 GB。\n\n- ExFAT：用于 Windows 宗卷且大小超过 32 GB。\n\n[Mac 上“磁盘工具”中可用的文件系统格式](https://support.apple.com/zh-cn/guide/disk-utility/dsku19ed921c/mac)\n\n","slug":"mac-disk-utility","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aiu00op5gqoc2v5dxbc"},{"title":"可能会用到的 Linux 组合命令","date":"2018-10-22T18:21:07.000Z","_content":"\n记录一些可能会用到的组合命令\n\n<!-- more --><!-- toc -->\n\n**删除当前目录下 0 字节文件**\n\n```bash\n$ rm `ls -l | awk '$5 == \"0\" {print $9}'`\n```\n\n**MacOS 系统查看本机 ip**\n\n```bash\n$ ifconfig en0 | grep inet | grep -v inet6 | awk '{print $2}'\n```\n\n**CentOS 系统查看本机 ip**\n\n```bash\n$ ifconfig eth0 | grep inet | grep -v inet6 | awk '{print $2}'\n```\n\n**Ubuntu 系统查看本机 ip**\n\n```bash\n$ ifconfig eth0 | grep inet | grep -v inet6 | awk '{print $2}' | awk -v FS=\":\" '{print $2}'\n```\n","source":"_posts/2018-10-22-common-linux-command.md","raw":"---\ntitle: 可能会用到的 Linux 组合命令\ndate: 2018-10-22 18:21:07\ntags: [linux]\n---\n\n记录一些可能会用到的组合命令\n\n<!-- more --><!-- toc -->\n\n**删除当前目录下 0 字节文件**\n\n```bash\n$ rm `ls -l | awk '$5 == \"0\" {print $9}'`\n```\n\n**MacOS 系统查看本机 ip**\n\n```bash\n$ ifconfig en0 | grep inet | grep -v inet6 | awk '{print $2}'\n```\n\n**CentOS 系统查看本机 ip**\n\n```bash\n$ ifconfig eth0 | grep inet | grep -v inet6 | awk '{print $2}'\n```\n\n**Ubuntu 系统查看本机 ip**\n\n```bash\n$ ifconfig eth0 | grep inet | grep -v inet6 | awk '{print $2}' | awk -v FS=\":\" '{print $2}'\n```\n","slug":"common-linux-command","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aiw00os5gqogv8owpk6"},{"title":"Python frozenset() 函数","date":"2018-10-20T17:28:27.000Z","_content":"\n\n`frozenset()` 返回一个冻结的集合，冻结后集合不能再添加或删除任何元素。\n\n<!-- more -->\n<!-- toc -->\n\n参数为一个可迭代的对象，比如列表、字典、元组等等。\n\n```python\n>>> a = frozenset()\n>>> a\nfrozenset()\n>>> a['s']=1\nTraceback (most recent call last):\n  File \"<input>\", line 1, in <module>\n    a['s']=1\nTypeError: 'frozenset' object does not support item assignment\n>>> frozenset({1:2, 3:4})\nfrozenset({1, 3})\n>>> frozenset([1, 2, 3])\nfrozenset({1, 2, 3})\n>>> frozenset((1, 2, 3))\nfrozenset({1, 2, 3})\n```\n","source":"_posts/2018-10-20-Python-frozenset.md","raw":"---\ntitle: Python frozenset() 函数\ntags:\n  - python\ndate: 2018-10-20 17:28:27\n---\n\n\n`frozenset()` 返回一个冻结的集合，冻结后集合不能再添加或删除任何元素。\n\n<!-- more -->\n<!-- toc -->\n\n参数为一个可迭代的对象，比如列表、字典、元组等等。\n\n```python\n>>> a = frozenset()\n>>> a\nfrozenset()\n>>> a['s']=1\nTraceback (most recent call last):\n  File \"<input>\", line 1, in <module>\n    a['s']=1\nTypeError: 'frozenset' object does not support item assignment\n>>> frozenset({1:2, 3:4})\nfrozenset({1, 3})\n>>> frozenset([1, 2, 3])\nfrozenset({1, 2, 3})\n>>> frozenset((1, 2, 3))\nfrozenset({1, 2, 3})\n```\n","slug":"Python-frozenset","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aix00ou5gqo27ieg0ni"},{"title":"Linux 使用 ifconfig 查看本机 ip","date":"2018-10-23T09:59:54.000Z","_content":"\n在终端中使用 `ifconfig` 可以查看本地 ip\n\n<!-- more --><!-- toc -->\n\n在终端中输入 `ifconfig` 可以看到很多的信息，其中包含了本机的 ip，但是信息过多，及时你知道从哪查找，每次看也会头晕，我们需要的精确找到本机 ip 的方法。\n\n在 Linux 中使用命令\n\n```bash\n$ ifconfig eth0\neth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500\n        inet 172.17.8.241  netmask 255.255.240.0  broadcast 172.17.15.255\n        ether 00:16:3e:0c:ec:10  txqueuelen 1000  (Ethernet)\n        RX packets 215013189  bytes 59080762287 (55.0 GiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 125960779  bytes 124345275246 (115.8 GiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n```\n\n第二行的第一个 ip 就是本机 ip `172.17.8.241`\n\n在 MaxOS 中稍有不同，命令为\n\n```bash\n$ ifconfig en0\n```\n\n接下来我们使用 `grep awk` 来进行精准获取\n\n**CentOS**\n\n```bash\n$ ifconfig eth0 | grep inet | grep -v inet6 | awk '{print $2}'\n```\n\n**Ubuntu**\n\n```bash\n$ ifconfig eth0 | grep inet | grep -v inet6 | awk '{print $2}' | awk -v FS=\":\" '{print $2}'\n```\n\n**MacOS**\n\n```bash\n$ ifconfig en0 | grep inet | grep -v inet6 | awk '{print $2}'\n```\n","source":"_posts/2018-10-23-ifconfig-ip.md","raw":"---\ntitle: Linux 使用 ifconfig 查看本机 ip\ndate: 2018-10-23 09:59:54\ntags: [linux]\n---\n\n在终端中使用 `ifconfig` 可以查看本地 ip\n\n<!-- more --><!-- toc -->\n\n在终端中输入 `ifconfig` 可以看到很多的信息，其中包含了本机的 ip，但是信息过多，及时你知道从哪查找，每次看也会头晕，我们需要的精确找到本机 ip 的方法。\n\n在 Linux 中使用命令\n\n```bash\n$ ifconfig eth0\neth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500\n        inet 172.17.8.241  netmask 255.255.240.0  broadcast 172.17.15.255\n        ether 00:16:3e:0c:ec:10  txqueuelen 1000  (Ethernet)\n        RX packets 215013189  bytes 59080762287 (55.0 GiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 125960779  bytes 124345275246 (115.8 GiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n```\n\n第二行的第一个 ip 就是本机 ip `172.17.8.241`\n\n在 MaxOS 中稍有不同，命令为\n\n```bash\n$ ifconfig en0\n```\n\n接下来我们使用 `grep awk` 来进行精准获取\n\n**CentOS**\n\n```bash\n$ ifconfig eth0 | grep inet | grep -v inet6 | awk '{print $2}'\n```\n\n**Ubuntu**\n\n```bash\n$ ifconfig eth0 | grep inet | grep -v inet6 | awk '{print $2}' | awk -v FS=\":\" '{print $2}'\n```\n\n**MacOS**\n\n```bash\n$ ifconfig en0 | grep inet | grep -v inet6 | awk '{print $2}'\n```\n","slug":"ifconfig-ip","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aiz00ow5gqo7io7tbwg"},{"title":"Go 如何实现不换行进度条","date":"2018-10-24T10:01:48.000Z","_content":"\n在 Go 中实现不换行进度条，可以通过几行原理代码实现。\n\n<!-- more --><!-- toc -->\n```go\nfmt.Printf(\"%s \\033[K\\n\", \"--\")     // 输出一行结果\nfmt.Printf(\"\\033[%dA\\033[K\", 1)     // 将光标向上移动一行\nfmt.Printf(\"%s \\033[K\\n\", \"=-\")     // 输出第二行结果\n```\n\n如此往复即可实现不换行进度条\n\n完整代码见 [single.go](https://github.com/wxnacy/study/blob/master/goland/src/progress/single.go)\n\n输出屏幕带有屏幕的原理可见 [Go 如何给屏幕打印信息加上颜色](/2018/09/07/go-fmt-color/)\n\n带颜色的进度条完整代码见 [color.go](https://github.com/wxnacy/study/blob/master/goland/src/progress/color.go)\n\n如果同时有多个进度条同时运行，那原理在于将最上边的进度条使用 `fmt.Printf(\"\\033[%dA\\033[K\", n)` 上移一定的行数，其余进度条顺序打印即可。\n\n多个进度条完整代码见 [multi.go](https://github.com/wxnacy/study/blob/master/goland/src/progress/multi.go)\n","source":"_posts/2018-10-24-go-progress.md","raw":"---\ntitle: Go 如何实现不换行进度条\ndate: 2018-10-24 10:01:48\ntags: [go]\n---\n\n在 Go 中实现不换行进度条，可以通过几行原理代码实现。\n\n<!-- more --><!-- toc -->\n```go\nfmt.Printf(\"%s \\033[K\\n\", \"--\")     // 输出一行结果\nfmt.Printf(\"\\033[%dA\\033[K\", 1)     // 将光标向上移动一行\nfmt.Printf(\"%s \\033[K\\n\", \"=-\")     // 输出第二行结果\n```\n\n如此往复即可实现不换行进度条\n\n完整代码见 [single.go](https://github.com/wxnacy/study/blob/master/goland/src/progress/single.go)\n\n输出屏幕带有屏幕的原理可见 [Go 如何给屏幕打印信息加上颜色](/2018/09/07/go-fmt-color/)\n\n带颜色的进度条完整代码见 [color.go](https://github.com/wxnacy/study/blob/master/goland/src/progress/color.go)\n\n如果同时有多个进度条同时运行，那原理在于将最上边的进度条使用 `fmt.Printf(\"\\033[%dA\\033[K\", n)` 上移一定的行数，其余进度条顺序打印即可。\n\n多个进度条完整代码见 [multi.go](https://github.com/wxnacy/study/blob/master/goland/src/progress/multi.go)\n","slug":"go-progress","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aj000oy5gqoxpg4btku"},{"title":"Deepin 交换 CapsLock 和 Control 键位","date":"2018-10-25T10:05:19.000Z","_content":"\n对于程序员来说，`CapsLock` 键位基本是没用的，但是它又占着一个黄金位置，将它换成 `Control` 键，在各个终端命令中作为 Leader 键是非常合适的，在 Mac 中可以直接从设置面板中修改，在 Deepin 中稍微费点事。\n\n<!-- more --><!-- toc -->\n\n**打开 Terminal**\n\n使用 `ctrl + alt + t` 键快速打开一个 Terminal。\n\n**创建配置文件**\n\n在用户当前目录 `~` 下创建 `.xmodmap` 文件，如果有，直接编辑。\n\n```bash\n$ cd ~\n$ touch .xmodmap\n$ vim .xmodmap\n```\n\n将如下配置复制进文件，然后保存退出\n\n```bash\nremove Lock = Caps_Lock\nremove Control = Control_L\nkeysym Control_L = Caps_Lock\nkeysym Caps_Lock = Control_L\nadd Lock = Caps_Lock\nadd Control = Control_L\n```\n\n使用文件生效\n\n```bash\n$ xmodmap .xmodmap\n```\n\n如果执行后没有报错，此时两个键位已经交换成功\n\n**参考**\n\n- [deepin linux下怎么交换ctrl和capslock键](https://jingyan.baidu.com/article/a24b33cd2bb8e019fe002bb6.html)\n","source":"_posts/2018-10-25-deepin-capslock-control.md","raw":"---\ntitle: Deepin 交换 CapsLock 和 Control 键位\ndate: 2018-10-25 10:05:19\ntags: [linux]\n---\n\n对于程序员来说，`CapsLock` 键位基本是没用的，但是它又占着一个黄金位置，将它换成 `Control` 键，在各个终端命令中作为 Leader 键是非常合适的，在 Mac 中可以直接从设置面板中修改，在 Deepin 中稍微费点事。\n\n<!-- more --><!-- toc -->\n\n**打开 Terminal**\n\n使用 `ctrl + alt + t` 键快速打开一个 Terminal。\n\n**创建配置文件**\n\n在用户当前目录 `~` 下创建 `.xmodmap` 文件，如果有，直接编辑。\n\n```bash\n$ cd ~\n$ touch .xmodmap\n$ vim .xmodmap\n```\n\n将如下配置复制进文件，然后保存退出\n\n```bash\nremove Lock = Caps_Lock\nremove Control = Control_L\nkeysym Control_L = Caps_Lock\nkeysym Caps_Lock = Control_L\nadd Lock = Caps_Lock\nadd Control = Control_L\n```\n\n使用文件生效\n\n```bash\n$ xmodmap .xmodmap\n```\n\n如果执行后没有报错，此时两个键位已经交换成功\n\n**参考**\n\n- [deepin linux下怎么交换ctrl和capslock键](https://jingyan.baidu.com/article/a24b33cd2bb8e019fe002bb6.html)\n","slug":"deepin-capslock-control","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aj100p05gqobujfll3v"},{"title":"Expect 脚本参数传递","date":"2018-10-27T10:44:20.000Z","_content":"\n\nExpect 脚本同 Shell 脚本一样可以通过外部传递参数。\n\n<!-- more --><!-- toc -->\n\n`argc` 代表参数个数，`argv` 代表参数列表\n\n```expect\nputs $argc\nputs $argv\n```\n\n```bash\n$ ./test.exp wxnacy wxn\n2\nwxnacy wxn\n```\n\n设置变量\n\n```expect\nset name [lindex $argv 0]\nputs $name\n```\n\n```bash\n./test.exp wxnacy wxn\nwxnacy\n```\n","source":"_posts/2018-10-27-expect-args.md","raw":"---\ntitle: Expect 脚本参数传递\ntags:\n  - expect\ndate: 2018-10-27 10:44:20\n---\n\n\nExpect 脚本同 Shell 脚本一样可以通过外部传递参数。\n\n<!-- more --><!-- toc -->\n\n`argc` 代表参数个数，`argv` 代表参数列表\n\n```expect\nputs $argc\nputs $argv\n```\n\n```bash\n$ ./test.exp wxnacy wxn\n2\nwxnacy wxn\n```\n\n设置变量\n\n```expect\nset name [lindex $argv 0]\nputs $name\n```\n\n```bash\n./test.exp wxnacy wxn\nwxnacy\n```\n","slug":"expect-args","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aj200p25gqo4jtct685"},{"title":"Git 将用户名密码储存在本机，避免每次输入","date":"2018-10-26T11:33:53.000Z","_content":"\n新机器上使用 Git，每次推送都需要使用密码，为了避免这种情况，需要将密码储存在本地。\n\n<!-- more --><!-- toc -->\n\n在提交文件之前使用命令\n\n```bash\n$ git config --global credential.helper store\n```\n\n随后再输入用户名和密码后会在根目录 `~` 中生成一个文件 `.git-credentials`\n\n文件内容为\n\n```bash\nhttps://user:password@github.com\n```\n\n以后再次提交内容则不用在输入密码，也可以手动添加该文件。\n\nMac 中可以使用 `osxkeychain` 模式将密码加密储存。\n\n```bash\n$ git config --global credential.helper osxkeychain\n```\n\n**参考**\n\n- [Git 工具 - 凭证存储](https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%87%AD%E8%AF%81%E5%AD%98%E5%82%A8)\n","source":"_posts/2018-10-26-git-store-password.md","raw":"---\ntitle: Git 将用户名密码储存在本机，避免每次输入\ndate: 2018-10-26 11:33:53\ntags: [git]\n---\n\n新机器上使用 Git，每次推送都需要使用密码，为了避免这种情况，需要将密码储存在本地。\n\n<!-- more --><!-- toc -->\n\n在提交文件之前使用命令\n\n```bash\n$ git config --global credential.helper store\n```\n\n随后再输入用户名和密码后会在根目录 `~` 中生成一个文件 `.git-credentials`\n\n文件内容为\n\n```bash\nhttps://user:password@github.com\n```\n\n以后再次提交内容则不用在输入密码，也可以手动添加该文件。\n\nMac 中可以使用 `osxkeychain` 模式将密码加密储存。\n\n```bash\n$ git config --global credential.helper osxkeychain\n```\n\n**参考**\n\n- [Git 工具 - 凭证存储](https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%87%AD%E8%AF%81%E5%AD%98%E5%82%A8)\n","slug":"git-store-password","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aj300p45gqov4jto60g"},{"title":"HTTP 返回状态码","date":"2018-10-21T17:49:03.000Z","_content":"\n总结下常见的 HTTP 返回状态码\n\n<!-- more -->\n<!-- toc -->\n\n## 2XX 成功\n\n- `200 OK` 请求成功\n- `201 Created` 资源创建成功，通常在 POST 请求返回\n- `204 No Content` 请求成功，但是没有返回内容\n\n## 4XX 客户端请求错误\n\n- `400 Bad Request` 请求参数有误，或语义无法被服务端理解\n- `401 Unauthorized` 用户验证没通过\n- `403 Forbidden` 服务器已经理解请求，但是拒绝执行它。\n- `404` 找不到页面\n- `405 Method Not Allowed` 使用了错误的请求方式来请求资源。比如 POST 资源使用 GET 方式请求。\n- `413 Request Entity Too Large` 该请求提交的实体数据大小超过了服务器愿意或者能够处理的范围。\n- `414 Request-URI Too Long` 请求的 URI 长度超过了服务器能够解释的长度\n- `429 Too Many Requests` 用户在给定的时间内发送了太多的请求。旨在用于网络限速。\n\n\n## 5XX 服务器处理错误\n\n- `500 Internal Server Error` 通用错误消息，服务器遇到了一个未曾预料的状况，导致了它无法完成对请求的处理。没有给出具体错误信息。\n- `502 Bad Gateway` 作为网关或者代理工作的服务器尝试执行请求时，从上游服务器接收到无效的响应。\n- `504 Gateway Timeout` 作为网关或者代理工作的服务器尝试执行请求时，未能及时从上游服务器（URI标识出的服务器，例如HTTP、FTP、LDAP）或者辅助服务器（例如DNS）收到响应。\n\n\n- [HTTP 响应代码](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status)\n- [HTTP 状态码](https://zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81)\n","source":"_posts/2018-10-21-http-status-code.md","raw":"---\ntitle: HTTP 返回状态码\ntags:\n  - http\ndate: 2018-10-21 17:49:03\n---\n\n总结下常见的 HTTP 返回状态码\n\n<!-- more -->\n<!-- toc -->\n\n## 2XX 成功\n\n- `200 OK` 请求成功\n- `201 Created` 资源创建成功，通常在 POST 请求返回\n- `204 No Content` 请求成功，但是没有返回内容\n\n## 4XX 客户端请求错误\n\n- `400 Bad Request` 请求参数有误，或语义无法被服务端理解\n- `401 Unauthorized` 用户验证没通过\n- `403 Forbidden` 服务器已经理解请求，但是拒绝执行它。\n- `404` 找不到页面\n- `405 Method Not Allowed` 使用了错误的请求方式来请求资源。比如 POST 资源使用 GET 方式请求。\n- `413 Request Entity Too Large` 该请求提交的实体数据大小超过了服务器愿意或者能够处理的范围。\n- `414 Request-URI Too Long` 请求的 URI 长度超过了服务器能够解释的长度\n- `429 Too Many Requests` 用户在给定的时间内发送了太多的请求。旨在用于网络限速。\n\n\n## 5XX 服务器处理错误\n\n- `500 Internal Server Error` 通用错误消息，服务器遇到了一个未曾预料的状况，导致了它无法完成对请求的处理。没有给出具体错误信息。\n- `502 Bad Gateway` 作为网关或者代理工作的服务器尝试执行请求时，从上游服务器接收到无效的响应。\n- `504 Gateway Timeout` 作为网关或者代理工作的服务器尝试执行请求时，未能及时从上游服务器（URI标识出的服务器，例如HTTP、FTP、LDAP）或者辅助服务器（例如DNS）收到响应。\n\n\n- [HTTP 响应代码](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status)\n- [HTTP 状态码](https://zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81)\n","slug":"http-status-code","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aj400p65gqoskw3inqc"},{"title":"Go 构建 web 项目怎样使用热启动","date":"2018-10-29T14:02:13.000Z","_content":"\nGo 语言官方框架并没有提供热启动的模块，导致编写 web 应用非常麻烦。\n\n<!-- more --><!-- toc -->\n经过 google 发现第三方包 [fresh](https://github.com/pilu/fresh) 可以使用该功能。\n\n**下载**\n\n```bash\n$ go get github.com/pilu/fresh\n```\n\n然后在项目根目录下启动命令即可\n\n```bash\n$ fresh\n```\n\n它会默认去找 `main` 方法来执行。\n\n更多的设置可见文档 [Usage](https://github.com/pilu/fresh)\n","source":"_posts/2018-10-29-go-fresh.md","raw":"---\ntitle: Go 构建 web 项目怎样使用热启动\ndate: 2018-10-29 14:02:13\ntags: [go]\n---\n\nGo 语言官方框架并没有提供热启动的模块，导致编写 web 应用非常麻烦。\n\n<!-- more --><!-- toc -->\n经过 google 发现第三方包 [fresh](https://github.com/pilu/fresh) 可以使用该功能。\n\n**下载**\n\n```bash\n$ go get github.com/pilu/fresh\n```\n\n然后在项目根目录下启动命令即可\n\n```bash\n$ fresh\n```\n\n它会默认去找 `main` 方法来执行。\n\n更多的设置可见文档 [Usage](https://github.com/pilu/fresh)\n","slug":"go-fresh","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aj500p85gqod2p3t007"},{"title":"Go 将 error 转换为 string","date":"2018-11-02T10:01:51.000Z","_content":"\n在 Go 中打印 error 可以直接使用 `fmt.Println(err)`，那么如何将 error 转换为 string 呢。\n\n<!-- more --><!-- toc -->\n\n`toString()` ?，这个是在 java 中，Go 并没有一个统一的方法来转换 string。\n\n`error` 有一个接口\n\n```go\ntype error interface {\n    Error() string\n}\n```\n\n我们可以使用 `err.Error()` 方法来转换 string\n\n- [error](https://golang.org/pkg/builtin/#error)\n","source":"_posts/2018-11-02-go-error-to-string.md","raw":"---\ntitle: Go 将 error 转换为 string\ndate: 2018-11-02 10:01:51\ntags: [go]\n---\n\n在 Go 中打印 error 可以直接使用 `fmt.Println(err)`，那么如何将 error 转换为 string 呢。\n\n<!-- more --><!-- toc -->\n\n`toString()` ?，这个是在 java 中，Go 并没有一个统一的方法来转换 string。\n\n`error` 有一个接口\n\n```go\ntype error interface {\n    Error() string\n}\n```\n\n我们可以使用 `err.Error()` 方法来转换 string\n\n- [error](https://golang.org/pkg/builtin/#error)\n","slug":"go-error-to-string","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aj700pa5gqozbq5tihh"},{"title":"Shell 使用 read 创建交互模式脚本","date":"2018-10-28T10:47:58.000Z","_content":"\n\nShell 脚本中可以使用 read 来实现交互模式。\n\n<!-- more --><!-- toc -->\n\n## echo 和 read\n\n```bash\n#!/usr/bin/env bash\n\necho -n \"What is your name: \"\n# echo -e \"What is your name: \\c\"\nread\necho \"$REPLY\"\n```\n\n执行该脚本，根据提示输入名字即可完成一次交互，echo 的 `-n` 参数可以使屏幕输出后不换行，键盘输入的内容默认使用变量 `REPLY`\n\n## 直接用 read\n\n```bash\nread -p \"What is your name: \" name\necho \"My name is $name\"\n```\n\n可以实现跟上边相同的效果，`-p` 为提示信息，`name` 为传入参数变量\n\n**不可见**\n\n普通输入文字都是明文显示，如果想要输入密码类的内容，可以使用 `-s` 参数使内容不显示\n\n```bash\nread -p \"What is your name: \" -s name\n```\n\n**限制个数**\n\n使用 `-n` 显示参数个数，再输入参数跟回车一个效果\n\n```bash\nread -n 1 -p \"Are you sure delete[Y|n]: \" flag\n```\n\n**读取管道数据**\n\n```bash\nwhile read line\ndo\n    echo $line\ndone\n```\n\n```bash\n$ ll | test.sh\n```\n\n**更多参数**\n\n```bash\n-a ：将内容读入到数组中\n-d ：表示delimiter，即定界符，一般情况下是以IFS为参数的间隔，但是通过-d，我们可以定义一直读到出现执行的字符位置。例如read –d madfds value，读到有m的字符的时候就不在继续向后读，例如输入为 hello m，有效值为“hello”，请注意m前面的空格等会被删除。这种方式可以输入多个字符串，例如定义“.”作为结符号等等。\n-e ：只用于互相交互的脚本，它将readline用于收集输入行。读到这几句话不太明白什么意思，先跳过。\n-n ：用于限定最多可以有多少字符可以作为有效读入。例如echo –n 4 value1 value2，如果我们试图输入12 34，则只有前面有效的12 3，作为输入，实际上在你输入第4个字符‘3’后，就自动结束输入。这里结果是value为12，value2为3。\n-p ：用于给出提示符，在前面的例子中我们使用了echo –n “…“来给出提示符，可以使用read –p ‘… my promt?’value的方式只需一个语句来表示。\n-r ：在参数输入中，我们可以使用’/’表示没有输入完，换行继续输入，如果我们需要行最后的’/’作为有效的字符，可以通过-r来进行。此外在输入字符中，我们希望/n这类特殊字符生效，也应采用-r选项。\n-s ：隐藏输入内容，比如密码\n-t ：用于表示等待输入的时间，单位为秒，等待时间超过，将继续执行后面的脚本，注意不作为null输入，参数将保留原有的值\n```\n\n**参考**\n\n- [shell的read命令](http://gohom.win/2015/08/20/shell-read/)\n- [Shell中read的选项及用法](https://www.cnblogs.com/nwf5d/archive/2011/11/20/2255702.html)\n","source":"_posts/2018-10-28-shell-read.md","raw":"---\ntitle: Shell 使用 read 创建交互模式脚本\ntags:\n  - shell\ndate: 2018-10-28 10:47:58\n---\n\n\nShell 脚本中可以使用 read 来实现交互模式。\n\n<!-- more --><!-- toc -->\n\n## echo 和 read\n\n```bash\n#!/usr/bin/env bash\n\necho -n \"What is your name: \"\n# echo -e \"What is your name: \\c\"\nread\necho \"$REPLY\"\n```\n\n执行该脚本，根据提示输入名字即可完成一次交互，echo 的 `-n` 参数可以使屏幕输出后不换行，键盘输入的内容默认使用变量 `REPLY`\n\n## 直接用 read\n\n```bash\nread -p \"What is your name: \" name\necho \"My name is $name\"\n```\n\n可以实现跟上边相同的效果，`-p` 为提示信息，`name` 为传入参数变量\n\n**不可见**\n\n普通输入文字都是明文显示，如果想要输入密码类的内容，可以使用 `-s` 参数使内容不显示\n\n```bash\nread -p \"What is your name: \" -s name\n```\n\n**限制个数**\n\n使用 `-n` 显示参数个数，再输入参数跟回车一个效果\n\n```bash\nread -n 1 -p \"Are you sure delete[Y|n]: \" flag\n```\n\n**读取管道数据**\n\n```bash\nwhile read line\ndo\n    echo $line\ndone\n```\n\n```bash\n$ ll | test.sh\n```\n\n**更多参数**\n\n```bash\n-a ：将内容读入到数组中\n-d ：表示delimiter，即定界符，一般情况下是以IFS为参数的间隔，但是通过-d，我们可以定义一直读到出现执行的字符位置。例如read –d madfds value，读到有m的字符的时候就不在继续向后读，例如输入为 hello m，有效值为“hello”，请注意m前面的空格等会被删除。这种方式可以输入多个字符串，例如定义“.”作为结符号等等。\n-e ：只用于互相交互的脚本，它将readline用于收集输入行。读到这几句话不太明白什么意思，先跳过。\n-n ：用于限定最多可以有多少字符可以作为有效读入。例如echo –n 4 value1 value2，如果我们试图输入12 34，则只有前面有效的12 3，作为输入，实际上在你输入第4个字符‘3’后，就自动结束输入。这里结果是value为12，value2为3。\n-p ：用于给出提示符，在前面的例子中我们使用了echo –n “…“来给出提示符，可以使用read –p ‘… my promt?’value的方式只需一个语句来表示。\n-r ：在参数输入中，我们可以使用’/’表示没有输入完，换行继续输入，如果我们需要行最后的’/’作为有效的字符，可以通过-r来进行。此外在输入字符中，我们希望/n这类特殊字符生效，也应采用-r选项。\n-s ：隐藏输入内容，比如密码\n-t ：用于表示等待输入的时间，单位为秒，等待时间超过，将继续执行后面的脚本，注意不作为null输入，参数将保留原有的值\n```\n\n**参考**\n\n- [shell的read命令](http://gohom.win/2015/08/20/shell-read/)\n- [Shell中read的选项及用法](https://www.cnblogs.com/nwf5d/archive/2011/11/20/2255702.html)\n","slug":"shell-read","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aj800pc5gqo38rh22xo"},{"title":"Go 将 rune 转换为 string","date":"2018-11-07T09:41:13.000Z","_content":"\n在 Go 中有几种方式将 rune 类型转换为 string\n\n<!-- more --><!-- toc -->\n\n```go\nstring('c')\n// string(rune('c'))\n```\n\n```bash\nc\n```\n\n或者借助 `strconv` 包\n\n```go\nstrconv.QuoteRune('c')\n```\n\n```bash\n'c'\n```\n\n这种方式会将单引号也打印出来\n","source":"_posts/2018-11-07-go-rune-string.md","raw":"---\ntitle: Go 将 rune 转换为 string\ndate: 2018-11-07 09:41:13\ntags: [go]\n---\n\n在 Go 中有几种方式将 rune 类型转换为 string\n\n<!-- more --><!-- toc -->\n\n```go\nstring('c')\n// string(rune('c'))\n```\n\n```bash\nc\n```\n\n或者借助 `strconv` 包\n\n```go\nstrconv.QuoteRune('c')\n```\n\n```bash\n'c'\n```\n\n这种方式会将单引号也打印出来\n","slug":"go-rune-string","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aja00pe5gqocittq3xq"},{"title":"斯坦李，Excelsior","date":"2018-11-13T13:45:02.000Z","_content":"\n> 当地时间2018年11月12日，美国漫画界元老级人物斯坦·李在好莱坞一家医疗中心去世，享年95岁。\n\n<!-- more --><!-- toc -->\n早上挤公交时老婆给我发了斯坦李去世的消息，突然一阵眩晕，卧槽，脱口而出一句以后就再也不知道该说什么了。\n\n所有的系列作品，只有漫威宇宙可以让我这么为之着迷，每部漫威作品我都看过不知道多少遍，不知道看什么的时候，他们和周星驰系列是我的必看系列。\n\n今年真是的灾难年啊，这么多名人去世，还有很多的不好的事情发生。\n\n2019 赶快来吧\n\n![Excelsior](https://pbs.twimg.com/media/Dr1CjYpU0AALfYY.jpg)\n","source":"_posts/2018-11-13-marvel-disaster-day.md","raw":"---\ntitle: 斯坦李，Excelsior\ndate: 2018-11-13 13:45:02\ntags: [漫威, 杂谈]\n---\n\n> 当地时间2018年11月12日，美国漫画界元老级人物斯坦·李在好莱坞一家医疗中心去世，享年95岁。\n\n<!-- more --><!-- toc -->\n早上挤公交时老婆给我发了斯坦李去世的消息，突然一阵眩晕，卧槽，脱口而出一句以后就再也不知道该说什么了。\n\n所有的系列作品，只有漫威宇宙可以让我这么为之着迷，每部漫威作品我都看过不知道多少遍，不知道看什么的时候，他们和周星驰系列是我的必看系列。\n\n今年真是的灾难年啊，这么多名人去世，还有很多的不好的事情发生。\n\n2019 赶快来吧\n\n![Excelsior](https://pbs.twimg.com/media/Dr1CjYpU0AALfYY.jpg)\n","slug":"marvel-disaster-day","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ajb00pg5gqo9f9hxc8n"},{"title":"Go 计算程序运行时间","date":"2018-11-09T10:24:50.000Z","_content":"\n在开发时计算各个程序组件的运行时间是必不可少的，在 Java、Python 中习惯了用结束时间减去开始时间，在 Go 中开始也是这样的，但总感觉哪里不对。\n\n<!-- more --><!-- toc -->\nGoogle 后发现有更好的方法\n\n```go\nbegin := time.Now()\n// work\nfmt.Println(\"time: \" + time.Since(begin))\n```\n\n`Since()` 函数帮我们完成了时间的计算，并且换算了相应的时间单位\n","source":"_posts/2018-11-09-go-since.md","raw":"---\ntitle: Go 计算程序运行时间\ndate: 2018-11-09 10:24:50\ntags: [go]\n---\n\n在开发时计算各个程序组件的运行时间是必不可少的，在 Java、Python 中习惯了用结束时间减去开始时间，在 Go 中开始也是这样的，但总感觉哪里不对。\n\n<!-- more --><!-- toc -->\nGoogle 后发现有更好的方法\n\n```go\nbegin := time.Now()\n// work\nfmt.Println(\"time: \" + time.Since(begin))\n```\n\n`Since()` 函数帮我们完成了时间的计算，并且换算了相应的时间单位\n","slug":"go-since","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ajc00pi5gqo1du9wjst"},{"title":"CDN 测试网站","date":"2018-11-15T17:12:17.000Z","_content":"\n收集几个测试 CDN 的网站\n\n<!-- more --><!-- toc -->\n\n- [dotcom-tools](https://www.dotcom-tools.com/website-speed-test.aspx)\n- [site24x7](https://www.site24x7.com/web-page-analyzer.html)\n","source":"_posts/2018-11-15-cdn-test.md","raw":"---\ntitle: CDN 测试网站\ndate: 2018-11-15 17:12:17\ntags: [工具]\n---\n\n收集几个测试 CDN 的网站\n\n<!-- more --><!-- toc -->\n\n- [dotcom-tools](https://www.dotcom-tools.com/website-speed-test.aspx)\n- [site24x7](https://www.site24x7.com/web-page-analyzer.html)\n","slug":"cdn-test","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ajd00pl5gqog8w3d8n9"},{"title":"Go JSON 数据格式化输出","date":"2018-11-19T11:13:00.000Z","_content":"\nGo 中 `encoding/json` 包提供了格式化输出 JSON 数据的方法。\n\n<!-- more --><!-- toc -->\n\n```go\n\nimport \"encoding/json\"\n\nvar data = map[string]string{\"name\": \"wxnacy\"}\n\njson.MarshalIndent(data, \"\", \"    \")\n\n```\n\n```json\n{\n    \"name\": \"wxnacy\"\n}\n```\n\n使用制表格来缩进可以使用\n\n```go\njson.MarshalIndent(data, \"\", \"/t\")\n```\n","source":"_posts/2018-11-19-go-json-fmt-print.md","raw":"---\ntitle: Go JSON 数据格式化输出\ndate: 2018-11-19 11:13:00\ntags: [go]\n---\n\nGo 中 `encoding/json` 包提供了格式化输出 JSON 数据的方法。\n\n<!-- more --><!-- toc -->\n\n```go\n\nimport \"encoding/json\"\n\nvar data = map[string]string{\"name\": \"wxnacy\"}\n\njson.MarshalIndent(data, \"\", \"    \")\n\n```\n\n```json\n{\n    \"name\": \"wxnacy\"\n}\n```\n\n使用制表格来缩进可以使用\n\n```go\njson.MarshalIndent(data, \"\", \"/t\")\n```\n","slug":"go-json-fmt-print","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aje00pn5gqo449o8bs5"},{"title":"Go 判断数组中是否包含某个 item","date":"2018-11-20T17:50:48.000Z","_content":"\nGo 中不像 Python 那样可以通过 `a in []` 判断数组是否包含某个 item，项目中只能自己编写该方法。\n\n<!-- more -->\n<!-- toc -->\n\n刚入门时第一个想到的方法就是对某个类型的数组进行遍历，再逐个对比，但这样有个最大的问题就是我们只能对一种类型的数组进行对比，不能灵活的应对各种类型。\n\n## reflect\n\n在 stackexchange 中看到一个方法，充分的利用了 `reflect` 包对 `interface{}` 进行判断，如下\n\n```go\npackage main\n\nimport \"reflect\"\n\nfunc Contains(array interface{}, val interface{}) (index int) {\n    index = -1\n    switch reflect.TypeOf(array).Kind() {\n        case reflect.Slice: {\n            s := reflect.ValueOf(array)\n            for i := 0; i < s.Len(); i++ {\n                if reflect.DeepEqual(val, s.Index(i).Interface()) {\n                    index = i\n                    return\n                }\n            }\n        }\n    }\n    return\n}\n\n```\n\n## 一次遍历\n\n**2019-03-21 更新：**\n\n今天才从网上看到一个说法，Go 中 `reflect` 很慢，尽量不要使用，我心里咯噔一下，赶紧来测试下\n\n对比下强类型遍历的方法\n\n```go\nfunc StringsContains(array []string, val string) (index int) {\n    index = -1\n    for i := 0; i < len(array); i++ {\n        if array[i] == val {\n            index = i\n            return\n        }\n    }\n    return\n}\n```\n\n使用 `testing` 包来测试性能\n\n```go\nimport \"testing\"\n\nfunc BenchmarkContains(b *testing.B) {\n    sa := []string{\"q\", \"w\", \"e\", \"r\", \"t\"}\n    b.ResetTimer()\n    for n := 0; n < b.N; n++ {\n        Contains(sa, \"r\")\n    }\n}\n\nfunc BenchmarkStringsContains(b *testing.B) {\n    sa := []string{\"q\", \"w\", \"e\", \"r\", \"t\"}\n    b.ResetTimer()\n    for n := 0; n < b.N; n++ {\n        StringsContains(sa, \"r\")\n    }\n}\n\n```\n\n运行\n\n```bash\n$ go test -bench=.\n\ngoos: darwin\ngoarch: amd64\npkg: github.com/wxnacy/wgo/arrays\nBenchmarkContains-8              2000000               635 ns/op\nBenchmarkStringsContains-8      100000000               20.3 ns/op\nPASS\nok      github.com/wxnacy/wgo/arrays    4.027s\n```\n\n结果非常明显，`Contains` 方法平均每次 `635 ns`，`StringsContains` 方法平均每次 `20.3 ns`\n\n嗯，我得先缓一下，为什么 `reflect` 这么慢呢，[reflect为什么慢](http://legendtkl.com/2016/08/06/reflect-inside/)这篇文章给了很好的解释，总结下来有两点\n\n- 涉及到内存分配以后GC\n- reflect实现里面有大量的枚举\n\n不管怎样，`reflect` 耗时长是不争的事实，又浏览了下其他的文章，大多观点都视它如“猛虎”，避之不及。\n\n但是静下心来想想，大可不必。慢，也是相对的。毕竟这个例子很简单，为了追求性能，当然可以使用强类型比较，那如果是更复杂的映射操作呢，Go 是强类型语言啊，你不用 `reflect` 用啥。反射就不能用，你让 SpringMVC 咋办。\n\n## wgo\n\n在官方完美解决这个问题前，我们只能在项目中自己写方法，或者使用第三方包 [wgo](https://github.com/wxnacy/wgo)\n\nwgo 是类似 Python 交互命令的脚本化运行工具。\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/wgo1.gif)\n\n该包本身包含一些开发中常用但是 Go 不具备的方法和工具。\n\n**安装**\n\n```bash\n$ go get -u github.com/wxnacy/wgo\n```\n\n**导入**\n\n```go\nimport \"github.com/wxnacy/wgo/arrays\"\n```\n\n**常用 Contains 方法**\n\n```go\n// Contains Returns the index position of the val in array\nfunc Contains(array interface{}, val interface{}) (index int)\n```\n\n```go\n// ContainsString Returns the index position of the string val in array\nfunc ContainsString(array []string, val string) (index int)\n```\n\n```go\n// ContainsInt Returns the index position of the int64 val in array\nfunc ContainsInt(array []int64, val int64) (index int)\n```\n\n```go\n// ContainsFloat Returns the index position of the float64 val in array\nfunc ContainsFloat(array []float64, val float64) (index int)\n```\n\n```go\n// ContainsBool Returns the index position of the bool val in array\nfunc ContainsBool(array []bool, val bool) (index int)\n```\n\n**demo**\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n    \"github.com/wxnacy/wgo/arrays\"\n)\n\nfunc main() {\n    var arr = []int64{1, 3, 4, 8, 12, 4, 9}\n    var i int\n    i = arrays.ContainsInt(arr, 8)\n    fmt.Println(i)      // 3\n\n    i = arrays.Contains(arr, int64(12))\n    fmt.Println(i)      // 4\n}\n```\n\n\n- [in_array() in Go](https://codereview.stackexchange.com/questions/60074/in-array-in-go)\n","source":"_posts/2018-11-20-go-in-array.md","raw":"---\ntitle: Go 判断数组中是否包含某个 item\ndate: 2018-11-20 17:50:48\ntags: [go]\n---\n\nGo 中不像 Python 那样可以通过 `a in []` 判断数组是否包含某个 item，项目中只能自己编写该方法。\n\n<!-- more -->\n<!-- toc -->\n\n刚入门时第一个想到的方法就是对某个类型的数组进行遍历，再逐个对比，但这样有个最大的问题就是我们只能对一种类型的数组进行对比，不能灵活的应对各种类型。\n\n## reflect\n\n在 stackexchange 中看到一个方法，充分的利用了 `reflect` 包对 `interface{}` 进行判断，如下\n\n```go\npackage main\n\nimport \"reflect\"\n\nfunc Contains(array interface{}, val interface{}) (index int) {\n    index = -1\n    switch reflect.TypeOf(array).Kind() {\n        case reflect.Slice: {\n            s := reflect.ValueOf(array)\n            for i := 0; i < s.Len(); i++ {\n                if reflect.DeepEqual(val, s.Index(i).Interface()) {\n                    index = i\n                    return\n                }\n            }\n        }\n    }\n    return\n}\n\n```\n\n## 一次遍历\n\n**2019-03-21 更新：**\n\n今天才从网上看到一个说法，Go 中 `reflect` 很慢，尽量不要使用，我心里咯噔一下，赶紧来测试下\n\n对比下强类型遍历的方法\n\n```go\nfunc StringsContains(array []string, val string) (index int) {\n    index = -1\n    for i := 0; i < len(array); i++ {\n        if array[i] == val {\n            index = i\n            return\n        }\n    }\n    return\n}\n```\n\n使用 `testing` 包来测试性能\n\n```go\nimport \"testing\"\n\nfunc BenchmarkContains(b *testing.B) {\n    sa := []string{\"q\", \"w\", \"e\", \"r\", \"t\"}\n    b.ResetTimer()\n    for n := 0; n < b.N; n++ {\n        Contains(sa, \"r\")\n    }\n}\n\nfunc BenchmarkStringsContains(b *testing.B) {\n    sa := []string{\"q\", \"w\", \"e\", \"r\", \"t\"}\n    b.ResetTimer()\n    for n := 0; n < b.N; n++ {\n        StringsContains(sa, \"r\")\n    }\n}\n\n```\n\n运行\n\n```bash\n$ go test -bench=.\n\ngoos: darwin\ngoarch: amd64\npkg: github.com/wxnacy/wgo/arrays\nBenchmarkContains-8              2000000               635 ns/op\nBenchmarkStringsContains-8      100000000               20.3 ns/op\nPASS\nok      github.com/wxnacy/wgo/arrays    4.027s\n```\n\n结果非常明显，`Contains` 方法平均每次 `635 ns`，`StringsContains` 方法平均每次 `20.3 ns`\n\n嗯，我得先缓一下，为什么 `reflect` 这么慢呢，[reflect为什么慢](http://legendtkl.com/2016/08/06/reflect-inside/)这篇文章给了很好的解释，总结下来有两点\n\n- 涉及到内存分配以后GC\n- reflect实现里面有大量的枚举\n\n不管怎样，`reflect` 耗时长是不争的事实，又浏览了下其他的文章，大多观点都视它如“猛虎”，避之不及。\n\n但是静下心来想想，大可不必。慢，也是相对的。毕竟这个例子很简单，为了追求性能，当然可以使用强类型比较，那如果是更复杂的映射操作呢，Go 是强类型语言啊，你不用 `reflect` 用啥。反射就不能用，你让 SpringMVC 咋办。\n\n## wgo\n\n在官方完美解决这个问题前，我们只能在项目中自己写方法，或者使用第三方包 [wgo](https://github.com/wxnacy/wgo)\n\nwgo 是类似 Python 交互命令的脚本化运行工具。\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/wgo1.gif)\n\n该包本身包含一些开发中常用但是 Go 不具备的方法和工具。\n\n**安装**\n\n```bash\n$ go get -u github.com/wxnacy/wgo\n```\n\n**导入**\n\n```go\nimport \"github.com/wxnacy/wgo/arrays\"\n```\n\n**常用 Contains 方法**\n\n```go\n// Contains Returns the index position of the val in array\nfunc Contains(array interface{}, val interface{}) (index int)\n```\n\n```go\n// ContainsString Returns the index position of the string val in array\nfunc ContainsString(array []string, val string) (index int)\n```\n\n```go\n// ContainsInt Returns the index position of the int64 val in array\nfunc ContainsInt(array []int64, val int64) (index int)\n```\n\n```go\n// ContainsFloat Returns the index position of the float64 val in array\nfunc ContainsFloat(array []float64, val float64) (index int)\n```\n\n```go\n// ContainsBool Returns the index position of the bool val in array\nfunc ContainsBool(array []bool, val bool) (index int)\n```\n\n**demo**\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n    \"github.com/wxnacy/wgo/arrays\"\n)\n\nfunc main() {\n    var arr = []int64{1, 3, 4, 8, 12, 4, 9}\n    var i int\n    i = arrays.ContainsInt(arr, 8)\n    fmt.Println(i)      // 3\n\n    i = arrays.Contains(arr, int64(12))\n    fmt.Println(i)      // 4\n}\n```\n\n\n- [in_array() in Go](https://codereview.stackexchange.com/questions/60074/in-array-in-go)\n","slug":"go-in-array","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ajf00pp5gqobxipexwo"},{"title":"Node 运行 Linux 命令","date":"2018-11-28T17:54:47.000Z","_content":"\n在 Node 中可以使用 [child_process.exec](https://nodejs.org/docs/v8.1.4/api/child_process.html#child_process_child_process_exec_command_options_callback) 方法来实现\n\n<!-- more --><!-- toc -->\n\n```javascript\nconst { exec } = require('child_process');\nexec('ls', (err, stdout, stderr) => {\n  if (err) {\n    // node couldn't execute the command\n    return;\n  }\n\n  // the *entire* stdout and stderr (buffered)\n  console.log(`stdout: ${stdout}`);\n  console.log(`stderr: ${stderr}`);\n});\n```\n","source":"_posts/2018-11-28-node-rune-command.md","raw":"---\ntitle: Node 运行 Linux 命令\ndate: 2018-11-28 17:54:47\ntags: [node]\n---\n\n在 Node 中可以使用 [child_process.exec](https://nodejs.org/docs/v8.1.4/api/child_process.html#child_process_child_process_exec_command_options_callback) 方法来实现\n\n<!-- more --><!-- toc -->\n\n```javascript\nconst { exec } = require('child_process');\nexec('ls', (err, stdout, stderr) => {\n  if (err) {\n    // node couldn't execute the command\n    return;\n  }\n\n  // the *entire* stdout and stderr (buffered)\n  console.log(`stdout: ${stdout}`);\n  console.log(`stderr: ${stderr}`);\n});\n```\n","slug":"node-rune-command","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ajh00pr5gqotcktk6zo"},{"title":"小宝贝，6 个月，第一次叫爸爸","date":"2018-12-06T22:49:25.000Z","_content":"\n最近几天欣欣又不好好睡觉了，每天晚上都是一个小时一醒，昨天晚上忘了几点，哭醒以后赶紧抱起来走走，迷迷糊糊的把她放下，突然听见一声\n\n“爸爸”\n\n<!-- more --><!-- toc -->\n\n我心里一惊，动作瞬间僵住，生怕是听错了，再一听。\n\n“啪啪…唔…啪”\n\n声音并不清晰，却是这几个月来第一次发出这类的声音。\n\n我抬起头看向欣妈，虽然屋里只有很暗的夜灯，但我还是看到了她脸上跟我一样的难以置信。\n\n“不是喊爸爸，只是类似呼气的声音”\n\n过了一会儿，欣妈这样“安慰”我。\n\n或许真的是巧合，加上实在是太困，我俩没一会儿就睡下了。\n\n白天醒后想着要不要跟妈妈说这事，她每天乐于发现小孙女一些细微的成长，但是我也感觉可能是个巧合，还是算了。\n\n等晚上回家，欣妈还在哄孩子睡觉，白天带她去体检反而有点感冒，没办法，今天太冷了。\n\n吃完饭孩子也醒了，一看到我，欣欣开心的一笑，每天我回家欣欣都这样对我笑，我照例进行每天的功课。\n\n“我是谁，我是爸爸，欣欣叫爸爸”\n\n如此对着她重复，欣妈对我不屑一顾。\n\n“啪啪”\n\n又是一声，我心里又是一颤，赶紧趁热打铁。\n\n“爸爸，我是爸爸，叫爸爸”\n\n“啪…爸爸”\n\n越来越清晰，现在可以确认，欣欣真的叫爸爸了，虽然还是太清晰，但是这已经不是偶尔蹦出一个词了。欣妈也傻眼了，赶紧拿出手机录下了这个时刻。\n\n“嘿，眼看她妈马上生日了，她来了句爸爸”\n\n得，欣妈吃上醋了，边往外走着，打算让爸妈也看看视频，嘴里还不歇着。\n\n“嘿，成天不在家的，第一个还喊了爸爸”\n\n老妈看了几遍，确认了是叫了“爸爸”，这才一脸惊喜的找着原因。\n\n“可不嘛，天天晚上回来都逗孩子，让喊爸爸”\n\n可不是，不这样逗，谁生下来会叫人啊，嘿，我一脸得意的看着他们，我的方法奏效了，就得天天冲她说才行。\n\n欣妈一脸嫉妒的看着我俩，哼！\n\n“跟爸爸这么亲，让爸爸哄睡觉吧，让爸爸擦屁股吧”\n\n“我说你这是嫉妒啊”\n\n“我这是羡慕嫉妒恨！”\n\n我笑着出了屋，临关上门听见欣妈冲着欣欣\n\n“欣欣，我是妈妈，叫妈妈”\n\n过了一会儿，回来给孩子做好睡前工作，妈妈推门进来半个身子，看见欣欣一笑，欣欣还以微笑，然后关门之前来了句\n\n“欣欣，叫奶奶”\n\n得，嫉妒的还不是一人。\n\n过了一会儿，出门坐会儿，听见爸爸在沙发算着，今天叫爸爸，明天叫妈妈，后天叫奶奶，然后叫爷爷。\n\n………\n","source":"_posts/2018-12-06-baby-first-baba.md","raw":"---\ntitle: 小宝贝，6 个月，第一次叫爸爸\ndate: 2018-12-06 22:49:25\ntags: [宝贝]\n---\n\n最近几天欣欣又不好好睡觉了，每天晚上都是一个小时一醒，昨天晚上忘了几点，哭醒以后赶紧抱起来走走，迷迷糊糊的把她放下，突然听见一声\n\n“爸爸”\n\n<!-- more --><!-- toc -->\n\n我心里一惊，动作瞬间僵住，生怕是听错了，再一听。\n\n“啪啪…唔…啪”\n\n声音并不清晰，却是这几个月来第一次发出这类的声音。\n\n我抬起头看向欣妈，虽然屋里只有很暗的夜灯，但我还是看到了她脸上跟我一样的难以置信。\n\n“不是喊爸爸，只是类似呼气的声音”\n\n过了一会儿，欣妈这样“安慰”我。\n\n或许真的是巧合，加上实在是太困，我俩没一会儿就睡下了。\n\n白天醒后想着要不要跟妈妈说这事，她每天乐于发现小孙女一些细微的成长，但是我也感觉可能是个巧合，还是算了。\n\n等晚上回家，欣妈还在哄孩子睡觉，白天带她去体检反而有点感冒，没办法，今天太冷了。\n\n吃完饭孩子也醒了，一看到我，欣欣开心的一笑，每天我回家欣欣都这样对我笑，我照例进行每天的功课。\n\n“我是谁，我是爸爸，欣欣叫爸爸”\n\n如此对着她重复，欣妈对我不屑一顾。\n\n“啪啪”\n\n又是一声，我心里又是一颤，赶紧趁热打铁。\n\n“爸爸，我是爸爸，叫爸爸”\n\n“啪…爸爸”\n\n越来越清晰，现在可以确认，欣欣真的叫爸爸了，虽然还是太清晰，但是这已经不是偶尔蹦出一个词了。欣妈也傻眼了，赶紧拿出手机录下了这个时刻。\n\n“嘿，眼看她妈马上生日了，她来了句爸爸”\n\n得，欣妈吃上醋了，边往外走着，打算让爸妈也看看视频，嘴里还不歇着。\n\n“嘿，成天不在家的，第一个还喊了爸爸”\n\n老妈看了几遍，确认了是叫了“爸爸”，这才一脸惊喜的找着原因。\n\n“可不嘛，天天晚上回来都逗孩子，让喊爸爸”\n\n可不是，不这样逗，谁生下来会叫人啊，嘿，我一脸得意的看着他们，我的方法奏效了，就得天天冲她说才行。\n\n欣妈一脸嫉妒的看着我俩，哼！\n\n“跟爸爸这么亲，让爸爸哄睡觉吧，让爸爸擦屁股吧”\n\n“我说你这是嫉妒啊”\n\n“我这是羡慕嫉妒恨！”\n\n我笑着出了屋，临关上门听见欣妈冲着欣欣\n\n“欣欣，我是妈妈，叫妈妈”\n\n过了一会儿，回来给孩子做好睡前工作，妈妈推门进来半个身子，看见欣欣一笑，欣欣还以微笑，然后关门之前来了句\n\n“欣欣，叫奶奶”\n\n得，嫉妒的还不是一人。\n\n过了一会儿，出门坐会儿，听见爸爸在沙发算着，今天叫爸爸，明天叫妈妈，后天叫奶奶，然后叫爷爷。\n\n………\n","slug":"baby-first-baba","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aji00pt5gqovxb168cz"},{"title":"Linux 安装 ffmpeg","date":"2018-11-27T17:30:25.000Z","_content":"\n> [ffmpeg](http://ffmpeg.org/) 是一个很强大的音视频处理工具，它是一个完整的、跨平台的解决方案，可以记录、转换和传输音频和视频。ffmpeg 既可以播放视频，也提供命令行工具来处理视频，另外还有强大的视频处理库用于开发\n\n<!-- more --><!-- toc -->\n\n## Ubuntu\n\nUbuntu 中安装比较简单，直接使用 `apt` 安装即可\n\n```bash\n$ sudo apt install -y ffmpeg\n```\n\n## CentOS\n\nCentOS 中则比较麻烦，需要使用源码安装\n\n**下载并解压**\n\n```bash\n$ wget https://ffmpeg.org/releases/ffmpeg-4.1.tar.bz2\n$ tar -xjvf ffmpeg-4.1.tar.bz2\n$ cd ffmpeg-4.1\n```\n\n**编译**\n\n```bash\n$ ./configure\nnasm/yasm not found or too old. Use --disable-x86asm for a crippled build.\n```\n\n可以使用 `--disable-x86asm` 参数略过该配置或者直接安装\n\n```bash\n$ sudo yum install -y yasm\n```\n\n也可以从[官网](http://yasm.tortall.net/Download.html)下载源码安装\n\n随后再次编译安装即可\n\n```bash\n$ ./configure\n$ sudo make && sudo make install\n```\n","source":"_posts/2018-11-27-linux-install-ffmpeg.md","raw":"---\ntitle: Linux 安装 ffmpeg\ndate: 2018-11-27 17:30:25\ntags: [linux]\n---\n\n> [ffmpeg](http://ffmpeg.org/) 是一个很强大的音视频处理工具，它是一个完整的、跨平台的解决方案，可以记录、转换和传输音频和视频。ffmpeg 既可以播放视频，也提供命令行工具来处理视频，另外还有强大的视频处理库用于开发\n\n<!-- more --><!-- toc -->\n\n## Ubuntu\n\nUbuntu 中安装比较简单，直接使用 `apt` 安装即可\n\n```bash\n$ sudo apt install -y ffmpeg\n```\n\n## CentOS\n\nCentOS 中则比较麻烦，需要使用源码安装\n\n**下载并解压**\n\n```bash\n$ wget https://ffmpeg.org/releases/ffmpeg-4.1.tar.bz2\n$ tar -xjvf ffmpeg-4.1.tar.bz2\n$ cd ffmpeg-4.1\n```\n\n**编译**\n\n```bash\n$ ./configure\nnasm/yasm not found or too old. Use --disable-x86asm for a crippled build.\n```\n\n可以使用 `--disable-x86asm` 参数略过该配置或者直接安装\n\n```bash\n$ sudo yum install -y yasm\n```\n\n也可以从[官网](http://yasm.tortall.net/Download.html)下载源码安装\n\n随后再次编译安装即可\n\n```bash\n$ ./configure\n$ sudo make && sudo make install\n```\n","slug":"linux-install-ffmpeg","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ajj00pv5gqocr6hz41x"},{"title":"Supervisord 启动报错","date":"2018-12-10T17:04:38.000Z","_content":"\n> error: <class 'socket.error'>, [Errno 2] No such file or directory: file: /usr/lib/python2.7/socket.py line: 224\n\n<!-- more --><!-- toc -->\n如上，如果 supervisord 正常启动过，突然报这个错误，则有可能是非正常关闭导致的。\n\n此时，需要强行关闭后，再正常启动即可。\n\n关闭\n\n```bash\n$ sudo kill -9 `ps aux | grep supervisord | aws '{print $2}'`\n```\n\n启动\n\n```bash\n$ sudo /bin/supervisord -c /etc/supervisord/supervisord.conf\n```\n","source":"_posts/2018-12-10-supervisord-start-error.md","raw":"---\ntitle: Supervisord 启动报错\ndate: 2018-12-10 17:04:38\ntags: [python]\n---\n\n> error: <class 'socket.error'>, [Errno 2] No such file or directory: file: /usr/lib/python2.7/socket.py line: 224\n\n<!-- more --><!-- toc -->\n如上，如果 supervisord 正常启动过，突然报这个错误，则有可能是非正常关闭导致的。\n\n此时，需要强行关闭后，再正常启动即可。\n\n关闭\n\n```bash\n$ sudo kill -9 `ps aux | grep supervisord | aws '{print $2}'`\n```\n\n启动\n\n```bash\n$ sudo /bin/supervisord -c /etc/supervisord/supervisord.conf\n```\n","slug":"supervisord-start-error","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ajk00px5gqon866krfc"},{"title":"Mac 系统实时显示键位操作软件：KeyCastr","date":"2018-12-11T11:51:58.000Z","_content":"\n最近想做一些 Vim 教程的视频，在屏幕上显示键位操作是很有必要的，网上找了下发现 KeyCastr 软件非常好用。\n\n<!-- more --><!-- toc -->\n\n## 预览\n![key4](/images/KeyCastr4.gif)\n\n## 安装\nKeyCastr 是开源软件完全免费，源码可以在 [Github](https://github.com/keycastr/keycastr) 中找到，Mac 中安装非常方便\n\n```bash\n$ brew cask install keycastr\n```\n\n也可以从[下载](https://github.com/keycastr/keycastr/releases)页面下载最新版安装\n\n## 配置\n第一次使用时需要打开系统的辅助功能\n\n![KeyCastr6](/images/KeyCastr6.png)\n\n配置完成后再次打开，即可像预览中一样在屏幕左下角显示键位操作。\n\n同时在顶部状态栏可以显示 KeyCastr 的图标，用于更多配置\n\n![KeyCastr2](/images/KeyCastr2.png)\n\n通过 Preferences -> General 配置可以修改图标展示在顶部或底部状态栏\n\n![KeyCastr1](/images/KeyCastr1.png)\n\n通过 Preferences -> Display 配置可以扩展显示区域，将 ⌘（Command）、⌥（Option）符号展示出来，很多人（包括我）经常会分不清楚他们对应的键位。\n\n![KeyCastr5](/images/KeyCastr5.gif)\n\n如下图，将显示模式改为 Svelte 即可\n\n![KeyCastr3](/images/KeyCastr3.png)\n\n默认情况下，该模式只显示四个特殊键位，勾选上 [Display all keystrokes] 即可显示全部键位\n","source":"_posts/2018-12-11-mac-KeyCastr.md","raw":"---\ntitle: Mac 系统实时显示键位操作软件：KeyCastr\ndate: 2018-12-11 11:51:58\ntags: [mac]\n---\n\n最近想做一些 Vim 教程的视频，在屏幕上显示键位操作是很有必要的，网上找了下发现 KeyCastr 软件非常好用。\n\n<!-- more --><!-- toc -->\n\n## 预览\n![key4](/images/KeyCastr4.gif)\n\n## 安装\nKeyCastr 是开源软件完全免费，源码可以在 [Github](https://github.com/keycastr/keycastr) 中找到，Mac 中安装非常方便\n\n```bash\n$ brew cask install keycastr\n```\n\n也可以从[下载](https://github.com/keycastr/keycastr/releases)页面下载最新版安装\n\n## 配置\n第一次使用时需要打开系统的辅助功能\n\n![KeyCastr6](/images/KeyCastr6.png)\n\n配置完成后再次打开，即可像预览中一样在屏幕左下角显示键位操作。\n\n同时在顶部状态栏可以显示 KeyCastr 的图标，用于更多配置\n\n![KeyCastr2](/images/KeyCastr2.png)\n\n通过 Preferences -> General 配置可以修改图标展示在顶部或底部状态栏\n\n![KeyCastr1](/images/KeyCastr1.png)\n\n通过 Preferences -> Display 配置可以扩展显示区域，将 ⌘（Command）、⌥（Option）符号展示出来，很多人（包括我）经常会分不清楚他们对应的键位。\n\n![KeyCastr5](/images/KeyCastr5.gif)\n\n如下图，将显示模式改为 Svelte 即可\n\n![KeyCastr3](/images/KeyCastr3.png)\n\n默认情况下，该模式只显示四个特殊键位，勾选上 [Display all keystrokes] 即可显示全部键位\n","slug":"mac-KeyCastr","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ajl00pz5gqop62nehmh"},{"title":"Redis 常用命令","date":"2018-12-13T15:22:47.000Z","_content":"\n现在公司里或多或少总是要用到 Redis 来处理缓存数据，虽然有 Redis Manageer 这样的客户端工具，但是现在 AWS、Aliyun 提供的服务都是内网访问的，显然客户端就用不到了，那么熟记几个简单的命令行工具就显得尤为重要。\n\n<!-- more --><!-- toc -->\n\n## 命令行\n\n```bash\n$ redis-cli get name\n\"10\"\n```\n\n`redis-cli` 是 Redis 的基础命令脚本，后续跟上必要参数进行缓存的操作，不过一般情况下，我们先登录数据库后在进行操作。\n\n```bash\n$ redis-cli\n127.0.0.1:6379>\n```\n\n加上 `--raw` 可以避免中文乱码\n\n```bash\n$ redis-cli --raw\n```\n\n指定端口和地址登录\n\n```bash\n$ redis-cli -h redis_host -p redis_port -a redis_password\n```\n\n试想这种情况下，每次都跟上 `get name` 查询，简直不敢想象\n\n\n```bash\n$ redis-cli ping\nPONG\n```\n\n这种情况下，代表可以 ping 通，及可以登录。\n\n## set 数据\n\n登录后我们开始设置数据\n\n```bash\nSET key value [EX seconds] [PX milliseconds] [NX|XX]\n# EX second ：设置键的过期时间为 second 秒。 SET key value EX second 效果等同于 SETEX key second value 。\n# PX millisecond ：设置键的过期时间为 millisecond 毫秒。 SET key value PX millisecond 效果等同于 PSETEX key millisecond value 。\n# NX ：只在键不存在时，才对键进行设置操作。 SET key value NX 效果等同于 SETNX key value 。\n# XX ：只在键已经存在时，才对键进行设置操作。\n```\n\n设置键值对\n\n```bash\n> set name wxnacy\nOK\n```\n\n设置键值对，并设置 10 秒有效期\n\n```bash\n> set name wxnacy ex 10\nOK\n```\n\n只在不存在 name 键时才设置数据\n\n```bash\n> set name wxnacy\nOK\n> set name wxnacy nx\n(nil)\n# (nil) 表示没有设置成功\n```\n\n## 获取信息\n\n获取值\n\n```bash\n> get name\n\"wxnacy\"\n```\n\n获取键还有几秒的有效期\n\n```bash\n> set name wxnacy ex 10\nOK\n> ttl name\n(integer) 8\n```\n\n查询 key 列表\n\n```bash\nKEY pattern\n# 查找所有符合给定模式 pattern 的 key 。\n#\n# KEYS * 匹配数据库中所有 key 。\n# KEYS h?llo 匹配 hello ， hallo 和 hxllo 等。\n# KEYS h*llo 匹配 hllo 和 heeeeello 等。\n# KEYS h[ae]llo 匹配 hello 和 hallo ，但不匹配 hillo 。\n# 特殊符号用 \\ 隔开\n ```\n\n模糊查询\n\n```bash\n> set id:1 wxnacy\nOK\n> set id:1 wxnacy\nOK\n> set name:1 wxnacy\nOK\n> keys id*\n1) \"id:1\"\n2) \"id:2\"\n```\n\n\n## 删除键\n\n删除一个 key\n\n```bash\n> set name wxnacy\nOK\n> del name\n(integer) 1\n```\n\n删除多个 key\n\n```bash\n> set name wxnacy\nOK\n> set age 0\nOK\n> del name age\n(integer) 2\n```\n\n## 自增自减\n\n```bash\nINCR key\n\n# 将 key 中储存的数字值增一。\n# 如果 key 不存在，那么 key 的值会先被初始化为 0 ，然后再执行 INCR 操作。\n\nDECR key\n\n# 将 KEY 中储存的数字值减一。\n# 如果 KEY 不存在，那么 KEY 的值会先被初始化为 0 ，然后再执行 DECR 操作。\n# 如果值包含错误的类型，或字符串类型的值不能表示为数字，那么返回一个错误。\n# 本操作的值限制在 64 位(BIT)有符号数字表示之内。\n```\n\n自增\n\n```bash\n> incr id\n(integer) 1\n> set ids 20\nOK\n> incr ids\n(integer) 21\n```\n\n自减\n\n```bash\n> decr id\n(integer) -1\n> set ids 20\nOK\n> decr ids\n(integer) 19\n```\n\nRedis 的功能非常强大，还有很多有用的命令，不过我想如果不是重度使用 Redis，没必要也记不住这么多的命令，有这几个键位，我们已经可以完成很多常用功能，再多的就使用的时候再查询文档吧。\n- [Redis 命令参考](http://redisdoc.com/index.html)\n","source":"_posts/2018-12-13-redis-cli.md","raw":"---\ntitle: Redis 常用命令\ndate: 2018-12-13 15:22:47\ntags: [redis]\n---\n\n现在公司里或多或少总是要用到 Redis 来处理缓存数据，虽然有 Redis Manageer 这样的客户端工具，但是现在 AWS、Aliyun 提供的服务都是内网访问的，显然客户端就用不到了，那么熟记几个简单的命令行工具就显得尤为重要。\n\n<!-- more --><!-- toc -->\n\n## 命令行\n\n```bash\n$ redis-cli get name\n\"10\"\n```\n\n`redis-cli` 是 Redis 的基础命令脚本，后续跟上必要参数进行缓存的操作，不过一般情况下，我们先登录数据库后在进行操作。\n\n```bash\n$ redis-cli\n127.0.0.1:6379>\n```\n\n加上 `--raw` 可以避免中文乱码\n\n```bash\n$ redis-cli --raw\n```\n\n指定端口和地址登录\n\n```bash\n$ redis-cli -h redis_host -p redis_port -a redis_password\n```\n\n试想这种情况下，每次都跟上 `get name` 查询，简直不敢想象\n\n\n```bash\n$ redis-cli ping\nPONG\n```\n\n这种情况下，代表可以 ping 通，及可以登录。\n\n## set 数据\n\n登录后我们开始设置数据\n\n```bash\nSET key value [EX seconds] [PX milliseconds] [NX|XX]\n# EX second ：设置键的过期时间为 second 秒。 SET key value EX second 效果等同于 SETEX key second value 。\n# PX millisecond ：设置键的过期时间为 millisecond 毫秒。 SET key value PX millisecond 效果等同于 PSETEX key millisecond value 。\n# NX ：只在键不存在时，才对键进行设置操作。 SET key value NX 效果等同于 SETNX key value 。\n# XX ：只在键已经存在时，才对键进行设置操作。\n```\n\n设置键值对\n\n```bash\n> set name wxnacy\nOK\n```\n\n设置键值对，并设置 10 秒有效期\n\n```bash\n> set name wxnacy ex 10\nOK\n```\n\n只在不存在 name 键时才设置数据\n\n```bash\n> set name wxnacy\nOK\n> set name wxnacy nx\n(nil)\n# (nil) 表示没有设置成功\n```\n\n## 获取信息\n\n获取值\n\n```bash\n> get name\n\"wxnacy\"\n```\n\n获取键还有几秒的有效期\n\n```bash\n> set name wxnacy ex 10\nOK\n> ttl name\n(integer) 8\n```\n\n查询 key 列表\n\n```bash\nKEY pattern\n# 查找所有符合给定模式 pattern 的 key 。\n#\n# KEYS * 匹配数据库中所有 key 。\n# KEYS h?llo 匹配 hello ， hallo 和 hxllo 等。\n# KEYS h*llo 匹配 hllo 和 heeeeello 等。\n# KEYS h[ae]llo 匹配 hello 和 hallo ，但不匹配 hillo 。\n# 特殊符号用 \\ 隔开\n ```\n\n模糊查询\n\n```bash\n> set id:1 wxnacy\nOK\n> set id:1 wxnacy\nOK\n> set name:1 wxnacy\nOK\n> keys id*\n1) \"id:1\"\n2) \"id:2\"\n```\n\n\n## 删除键\n\n删除一个 key\n\n```bash\n> set name wxnacy\nOK\n> del name\n(integer) 1\n```\n\n删除多个 key\n\n```bash\n> set name wxnacy\nOK\n> set age 0\nOK\n> del name age\n(integer) 2\n```\n\n## 自增自减\n\n```bash\nINCR key\n\n# 将 key 中储存的数字值增一。\n# 如果 key 不存在，那么 key 的值会先被初始化为 0 ，然后再执行 INCR 操作。\n\nDECR key\n\n# 将 KEY 中储存的数字值减一。\n# 如果 KEY 不存在，那么 KEY 的值会先被初始化为 0 ，然后再执行 DECR 操作。\n# 如果值包含错误的类型，或字符串类型的值不能表示为数字，那么返回一个错误。\n# 本操作的值限制在 64 位(BIT)有符号数字表示之内。\n```\n\n自增\n\n```bash\n> incr id\n(integer) 1\n> set ids 20\nOK\n> incr ids\n(integer) 21\n```\n\n自减\n\n```bash\n> decr id\n(integer) -1\n> set ids 20\nOK\n> decr ids\n(integer) 19\n```\n\nRedis 的功能非常强大，还有很多有用的命令，不过我想如果不是重度使用 Redis，没必要也记不住这么多的命令，有这几个键位，我们已经可以完成很多常用功能，再多的就使用的时候再查询文档吧。\n- [Redis 命令参考](http://redisdoc.com/index.html)\n","slug":"redis-cli","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ajm00q15gqodddnqmtr"},{"title":"玩儿","date":"2018-12-17T18:08:46.000Z","_content":"\n看于谦的《玩儿》真的很有意思，这是一部表面极为不正经，其实蕴含很多人生道理，看完让人回味无穷的书。\n\n<!-- more --><!-- toc -->\n\n你说玩儿就玩儿吧，干嘛非得学什么大道理，话是这么说，但是如果你好好玩儿，认真玩儿，还真就能在玩儿的时候就把道理给学了。\n\n知道于谦，是从郭德纲相声开始的，抽烟喝酒烫头是几乎所有人都知道的梗，但郭德纲也早就说过，于大娘主业是玩儿，相声只是他玩儿的一部分。\n\n玩儿简单，也难。简单之处无需多言，可难就难在两个字，认真。玩儿的认真，以前只对这句话有个模糊的概念，为什么呢？因为什么事认真起来都难呗！\n\n从下面这段就能看出来。\n\n> 七哥从水中捞起那团麻，挤干了水，用一小片羊肉裹住，让鹰吞了下去，“这个行话叫‘下轴’，鹰有一个习性，在野外捕到鸡、兔时，皮毛骨肉一起吞下，遇有消化不了的东西，会在胃中团成一个椭圆状的球形吐出来。咱们就利用它这个特点，给它喂下一团麻。麻，鹰是消化不了的，下肚以后，麻粗糙的纤维会刮下鹰肚中的膛油，带着油脂被鹰吐出来。这样，双管齐下，里外结合，用不了几天，它就会俯首帖耳。”\n    听了这番话，我当时的反应就是：人真是太聪明了，可也够损的。这主意是怎么想出来的呢？就这么折腾，甭说鹰，搁人也受不了。\n> 天渐渐黑了下来，七嫂又摆上了一桌子的菜，七哥说：“来吧，都坐，喝酒，吃饭，鹰先不遛了。这遛是让它熟悉人多的环境，现在晩上人也少了，它也看不见了，咱就不出去了，但在家喝酒可也不能闲着。”七哥边说边慢慢来回转动左臂，臂上的黄鹰站立不稳，被动地来回倒着脚步，“看见没有？这叫倒拳儿，为的是不让它睡觉，老得让它活动着。这鹰肚里没食，要靠睡觉来补充体力，不让它睡觉也是消耗它的一个重要手段。之所以叫熬鹰，说的就是这个。但是鹰有一个与众不同之处，你如果只是盯着它不让睡，它会闭一只眼睛睡觉。你看到的这只眼睛总是睁着的，其实是一个假象，也许背面你看不到的那只眼睛已经闭上睡觉了，你很难发现。所以只能这样来回倒拳儿让它总是站不稳，它就无法入睡。”\n> 听七哥说完，我随口一句：“这人是真够缺德的，不给饭吃，从肚子里往外刮油，再不让睡觉，这也太狠了吧？”\n> 七哥听我说完，反倒像逮着理了似的，马上说：“哎！就得狠！老话讲善不赢人，说的就是这个道理。你要不这么狠，你但凡心疼它一点儿，它永远也驯不出来，那咱们就输了手艺了！那咱就不如不养。这道理跟人一样，你想学点儿东西，你不下功夫不吃苦能学会吗？你要想出好成绩，所下的功夫必须要超过常人。这就叫吃得苦中苦，方为人上人呀！\n\n这是讲“熬鹰”的一个片段，咋一听是挺渗人的，也挺长见识的。想想被影视作品里只会睁着眼“瞪鹰”骗了这么多年，还挺可笑的。\n\n你要是动物保护协会的，这会肯定蹦起来要去抵制这种做法。还好我不是，我更关注的最后一句话。\n\n这道理跟人一样，你想学点儿东西，你不下功夫不吃苦能学会吗？你要想出好成绩，所下的功夫必须要超过常人。这就叫吃得苦中苦，方为人上人呀！\n\n看到这话真的是感触良多，我虽然不是多爱学习的人，但也确实为了几件事真的拼过，个中滋味也只有经历过才能了解。\n\n你身边一定一两个这样的人，回看他们的人生，异样的精彩。几乎每过段时间，就可以看到他们专注在某一件事上，并且付出远高于我们的努力。\n\n所以你看到他们顺利的考取了几个证书，学习了几门一辈子都学不会的语言，连玩“杀人游戏”你都不一定能赢过他。这些“比我们优秀还比我们努力的人”，或许只是做每件事的时候都比我们认真一些。\n\n提到“玩儿”，更多人第一反应就是不务正业，我读完整本书，还是这么觉得。但事情的发展就在于，我们现在所处的时代，不管什么事情，认真的做，做到极致，都能挣到钱。能挣到钱，那就不是不务正业。\n\n果然于大娘最后真的将自己的马场进行了开放，完成了“从玩儿到商业再到更好的玩儿”的闭环，这时候不管前边你再怎么不理解，这时候你都得承认人家比你强，为什么？因为人家连玩儿都比你认真。\n","source":"_posts/2018-12-17-waner.md","raw":"---\ntitle: 玩儿\ndate: 2018-12-17 18:08:46\ntags: [杂谈]\n---\n\n看于谦的《玩儿》真的很有意思，这是一部表面极为不正经，其实蕴含很多人生道理，看完让人回味无穷的书。\n\n<!-- more --><!-- toc -->\n\n你说玩儿就玩儿吧，干嘛非得学什么大道理，话是这么说，但是如果你好好玩儿，认真玩儿，还真就能在玩儿的时候就把道理给学了。\n\n知道于谦，是从郭德纲相声开始的，抽烟喝酒烫头是几乎所有人都知道的梗，但郭德纲也早就说过，于大娘主业是玩儿，相声只是他玩儿的一部分。\n\n玩儿简单，也难。简单之处无需多言，可难就难在两个字，认真。玩儿的认真，以前只对这句话有个模糊的概念，为什么呢？因为什么事认真起来都难呗！\n\n从下面这段就能看出来。\n\n> 七哥从水中捞起那团麻，挤干了水，用一小片羊肉裹住，让鹰吞了下去，“这个行话叫‘下轴’，鹰有一个习性，在野外捕到鸡、兔时，皮毛骨肉一起吞下，遇有消化不了的东西，会在胃中团成一个椭圆状的球形吐出来。咱们就利用它这个特点，给它喂下一团麻。麻，鹰是消化不了的，下肚以后，麻粗糙的纤维会刮下鹰肚中的膛油，带着油脂被鹰吐出来。这样，双管齐下，里外结合，用不了几天，它就会俯首帖耳。”\n    听了这番话，我当时的反应就是：人真是太聪明了，可也够损的。这主意是怎么想出来的呢？就这么折腾，甭说鹰，搁人也受不了。\n> 天渐渐黑了下来，七嫂又摆上了一桌子的菜，七哥说：“来吧，都坐，喝酒，吃饭，鹰先不遛了。这遛是让它熟悉人多的环境，现在晩上人也少了，它也看不见了，咱就不出去了，但在家喝酒可也不能闲着。”七哥边说边慢慢来回转动左臂，臂上的黄鹰站立不稳，被动地来回倒着脚步，“看见没有？这叫倒拳儿，为的是不让它睡觉，老得让它活动着。这鹰肚里没食，要靠睡觉来补充体力，不让它睡觉也是消耗它的一个重要手段。之所以叫熬鹰，说的就是这个。但是鹰有一个与众不同之处，你如果只是盯着它不让睡，它会闭一只眼睛睡觉。你看到的这只眼睛总是睁着的，其实是一个假象，也许背面你看不到的那只眼睛已经闭上睡觉了，你很难发现。所以只能这样来回倒拳儿让它总是站不稳，它就无法入睡。”\n> 听七哥说完，我随口一句：“这人是真够缺德的，不给饭吃，从肚子里往外刮油，再不让睡觉，这也太狠了吧？”\n> 七哥听我说完，反倒像逮着理了似的，马上说：“哎！就得狠！老话讲善不赢人，说的就是这个道理。你要不这么狠，你但凡心疼它一点儿，它永远也驯不出来，那咱们就输了手艺了！那咱就不如不养。这道理跟人一样，你想学点儿东西，你不下功夫不吃苦能学会吗？你要想出好成绩，所下的功夫必须要超过常人。这就叫吃得苦中苦，方为人上人呀！\n\n这是讲“熬鹰”的一个片段，咋一听是挺渗人的，也挺长见识的。想想被影视作品里只会睁着眼“瞪鹰”骗了这么多年，还挺可笑的。\n\n你要是动物保护协会的，这会肯定蹦起来要去抵制这种做法。还好我不是，我更关注的最后一句话。\n\n这道理跟人一样，你想学点儿东西，你不下功夫不吃苦能学会吗？你要想出好成绩，所下的功夫必须要超过常人。这就叫吃得苦中苦，方为人上人呀！\n\n看到这话真的是感触良多，我虽然不是多爱学习的人，但也确实为了几件事真的拼过，个中滋味也只有经历过才能了解。\n\n你身边一定一两个这样的人，回看他们的人生，异样的精彩。几乎每过段时间，就可以看到他们专注在某一件事上，并且付出远高于我们的努力。\n\n所以你看到他们顺利的考取了几个证书，学习了几门一辈子都学不会的语言，连玩“杀人游戏”你都不一定能赢过他。这些“比我们优秀还比我们努力的人”，或许只是做每件事的时候都比我们认真一些。\n\n提到“玩儿”，更多人第一反应就是不务正业，我读完整本书，还是这么觉得。但事情的发展就在于，我们现在所处的时代，不管什么事情，认真的做，做到极致，都能挣到钱。能挣到钱，那就不是不务正业。\n\n果然于大娘最后真的将自己的马场进行了开放，完成了“从玩儿到商业再到更好的玩儿”的闭环，这时候不管前边你再怎么不理解，这时候你都得承认人家比你强，为什么？因为人家连玩儿都比你认真。\n","slug":"waner","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ajn00q35gqonst5k31p"},{"title":"Java 11 新特性：String 增强","date":"2018-12-24T11:51:01.000Z","_content":"\n虽然现在很少使用 Java 进行开发，但是仍然时不时的关注着它的动态，最近发现 Java 11 发布了，并且带来了很多新特性，关键它是 Java8 以后又一长期维护版本，可以在生产环境使用，这又增加了我关注它的动力，今天先介绍一个新特性：String 增强\n\n<!-- more --><!-- toc -->\n我们来看这段代码\n\n```java\npublic class StringExample{\n    public static void main(String args[]){\n        Java11Upgrade();\n    }\n\n    public static void Java11Upgrade() {\n        // 判断字符串是否为空白\n        System.out.println(\" \".isBlank());              // true\n        // 去除首尾空格\n        System.out.println(\" Java \".strip());           // Java\n        // 去除首部空格\n        System.out.println(\" Java\".stripLeading());     // Java\n        // 去除尾部空格\n        System.out.println(\"Java \".stripTrailing());    // Java\n        // 重复字符串\n        System.out.println(\"Java\".repeat(2));           // JavaJava\n        // 获取字符串中的行数\n        System.out.println(\"A\\nB\\nC\".lines().count());  // 3\n    }\n}\n```\n\n还是一些其他语言早就有的特性，不过很高兴 Java 在逐渐补足这些东西，这也是让 Java 保持霸主地位的必要操作。\n","source":"_posts/2018-12-24-java-11-new-string.md","raw":"---\ntitle: Java 11 新特性：String 增强\ndate: 2018-12-24 11:51:01\ntags: [java]\n---\n\n虽然现在很少使用 Java 进行开发，但是仍然时不时的关注着它的动态，最近发现 Java 11 发布了，并且带来了很多新特性，关键它是 Java8 以后又一长期维护版本，可以在生产环境使用，这又增加了我关注它的动力，今天先介绍一个新特性：String 增强\n\n<!-- more --><!-- toc -->\n我们来看这段代码\n\n```java\npublic class StringExample{\n    public static void main(String args[]){\n        Java11Upgrade();\n    }\n\n    public static void Java11Upgrade() {\n        // 判断字符串是否为空白\n        System.out.println(\" \".isBlank());              // true\n        // 去除首尾空格\n        System.out.println(\" Java \".strip());           // Java\n        // 去除首部空格\n        System.out.println(\" Java\".stripLeading());     // Java\n        // 去除尾部空格\n        System.out.println(\"Java \".stripTrailing());    // Java\n        // 重复字符串\n        System.out.println(\"Java\".repeat(2));           // JavaJava\n        // 获取字符串中的行数\n        System.out.println(\"A\\nB\\nC\".lines().count());  // 3\n    }\n}\n```\n\n还是一些其他语言早就有的特性，不过很高兴 Java 在逐渐补足这些东西，这也是让 Java 保持霸主地位的必要操作。\n","slug":"java-11-new-string","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ajo00q55gqo372ahqad"},{"title":"dig 写一条最简单的查询 DNS 命令","date":"2018-12-18T18:24:31.000Z","_content":"\ndig（域信息搜索器）命令是一个用于询问 DNS 域名服务器的灵活的工具。它执行 DNS 查询，显示从已查询名称服务器返回的应答。\n\n<!-- more --><!-- toc -->\ndig 的功能非常强大，我们这篇不展开讨论，只看最简单的查询域名的 DNS 映射。\n\n```bash\n$ dig baidu.com\n\n; <<>> DiG 9.8.3-P1 <<>> baidu.com\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 28439\n;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 0\n\n;; QUESTION SECTION:\n;baidu.com.\t\t\tIN\tA\n\n;; ANSWER SECTION:\nbaidu.com.\t\t110\tIN\tA\t220.181.57.216\nbaidu.com.\t\t110\tIN\tA\t123.125.115.110\n\n;; Query time: 198 msec\n;; SERVER: 1.1.1.1#53(1.1.1.1)\n;; WHEN: Tue Dec 18 18:25:21 2018\n;; MSG SIZE  rcvd: 59\n```\n\n我们取关键的应答部分\n\n```bash\n;; ANSWER SECTION:\nbaidu.com.\t\t110\tIN\tA\t220.181.57.216\nbaidu.com.\t\t110\tIN\tA\t123.125.115.110\n```\n\n从这里我们可以看到目前 `baidu.com` 域名映射了两个 ip 地址。\n\n这虽然是非常简单的命令行，但却是非常好用的检测工具。如果你不是专业的运维，了解到这个命令，就已经在工作中帮了大忙。\n","source":"_posts/2018-12-18-dig-simple.md","raw":"---\ntitle: dig 写一条最简单的查询 DNS 命令\ndate: 2018-12-18 18:24:31\ntags: [linux]\n---\n\ndig（域信息搜索器）命令是一个用于询问 DNS 域名服务器的灵活的工具。它执行 DNS 查询，显示从已查询名称服务器返回的应答。\n\n<!-- more --><!-- toc -->\ndig 的功能非常强大，我们这篇不展开讨论，只看最简单的查询域名的 DNS 映射。\n\n```bash\n$ dig baidu.com\n\n; <<>> DiG 9.8.3-P1 <<>> baidu.com\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 28439\n;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 0\n\n;; QUESTION SECTION:\n;baidu.com.\t\t\tIN\tA\n\n;; ANSWER SECTION:\nbaidu.com.\t\t110\tIN\tA\t220.181.57.216\nbaidu.com.\t\t110\tIN\tA\t123.125.115.110\n\n;; Query time: 198 msec\n;; SERVER: 1.1.1.1#53(1.1.1.1)\n;; WHEN: Tue Dec 18 18:25:21 2018\n;; MSG SIZE  rcvd: 59\n```\n\n我们取关键的应答部分\n\n```bash\n;; ANSWER SECTION:\nbaidu.com.\t\t110\tIN\tA\t220.181.57.216\nbaidu.com.\t\t110\tIN\tA\t123.125.115.110\n```\n\n从这里我们可以看到目前 `baidu.com` 域名映射了两个 ip 地址。\n\n这虽然是非常简单的命令行，但却是非常好用的检测工具。如果你不是专业的运维，了解到这个命令，就已经在工作中帮了大忙。\n","slug":"dig-simple","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ajq00q75gqoncsyxnzu"},{"title":"Ubuntu 如何安装 Java 11","date":"2018-12-26T10:56:36.000Z","_content":"\n\n几个月前我写过文章 [Ubuntu 16.04 安装 JDK](/2018/06/19/ubuntu-install-jdk/) ，当时是以 JDK 8 为例子，现在 Java 11 出来了，相应的更新一版。\n\n<!-- more --><!-- toc -->\n\n我们首选使用 apt 来进行安装管理\n\n## Oracle JDK\n\n首先添加 LinuxUprising Java PPA 仓库到软件源中，并下载 Oracle Java 11\n\n```bash\n$ sudo add-apt-repository ppa:linuxuprising/java\n$ sudo apt update\n$ sudo apt install oracle-java11-installer\n```\n\n```bash\n$ java -version\njava version \"11.0.1\" 2018-10-16 LTS\nJava(TM) SE Runtime Environment 18.9 (build 11.0.1+13-LTS)\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.1+13-LTS, mixed mode)\n```\n\n## OpenJDK\n\n### 18.04 LTS\n\n首先我们使用 `apt` 进行搜索\n\n```bash\n$ sudo apt search openjdk\n```\n\n如果你的系统版本足够新，比如 18.04 LTS，那么很有可能搜索出这样的条目\n\n```bash\nopenjdk-11-jdk/bionic-updates,bionic-security,now 10.0.2+13-1ubuntu0.18.04.4 amd64 [installed,automatic]\n  OpenJDK Development Kit (JDK)\n```\n\n这代表软件源已经更新了 Java 11，这样直接安装默认版本即可\n\n```bash\n$ sudo apt install -y default-jdk\n```\n\n### 更老版本\n\n如果是更早的版本，那么很大程度上并没有更新该源，那么这时候我们需要使用 tar 包进行安装\n\n```bash\n$ wget https://download.java.net/java/GA/jdk11/28/GPL/openjdk-11+28_linux-x64_bin.tar.gz -O /tmp/openjdk-11+28_linux-x64_bin.tar.gz\n$ sudo tar xfvz /tmp/openjdk-11+28_linux-x64_bin.tar.gz --directory /usr/lib/jvm\n$ rm -f /tmp/openjdk-11+28_linux-x64_bin.tar.gz\n```\n\n使用 `update-alternatives` 对它进行管理\n\n```bash\n$ sudo sh -c 'for bin in /usr/lib/jvm/jdk-11/bin/*; do update-alternatives --install /usr/bin/$(basename $bin) $(basename $bin) $bin 100; done'\n$ sudo sh -c 'for bin in /usr/lib/jvm/jdk-11/bin/*; do update-alternatives --set $(basename $bin) $bin; done'\n```\n\n最后查看 java 版本\n\n```bash\n$ java -version\nopenjdk version \"10.0.2\" 2018-07-17\nOpenJDK Runtime Environment (build 10.0.2+13-Ubuntu-1ubuntu0.18.04.4)\nOpenJDK 64-Bit Server VM (build 10.0.2+13-Ubuntu-1ubuntu0.18.04.4, mixed mode)\n```\n\n## 切换版本\n\n现在我们已经有两个版本的 Java，我们可以通过 `update-alternatives` 来选择一个作为默认版本\n\n```bash\n$ sudo update-alternatives --config java\nThere are 2 choices for the alternative java (providing /usr/bin/java).\n\n  Selection    Path                                  Priority   Status\n------------------------------------------------------------\n  0            /usr/lib/jvm/java-11-oracle/bin/java   1091      auto mode\n* 1            /usr/lib/jvm/java-11-oracle/bin/java   1091      manual mode\n  2            /usr/lib/jvm/jdk-11/bin/java           100       manual mode\n\nPress <enter> to keep the current choice[*], or type selection number:\n```\n\n随后输入 `Selection` 对应的数字即可完成切换\n\n- [Java SE Development Kit 11 Downloads](https://www.oracle.com/technetwork/java/javase/downloads/jdk11-downloads-5066655.html)\n- [Installing OpenJDK 11 on Ubuntu 18.04](https://dzone.com/articles/installing-openjdk-11-on-ubuntu-1804-for-real)\n- [How To Install Oracle Java 11 In Ubuntu, Linux Mint Or Debian (From PPA Repository)](https://www.linuxuprising.com/2018/10/how-to-install-oracle-java-11-in-ubuntu.html)\n","source":"_posts/2018-12-26-ubuntu-install-jdk11.md","raw":"---\ntitle: Ubuntu 如何安装 Java 11\ntags:\n  - java\ndate: 2018-12-26 10:56:36\n---\n\n\n几个月前我写过文章 [Ubuntu 16.04 安装 JDK](/2018/06/19/ubuntu-install-jdk/) ，当时是以 JDK 8 为例子，现在 Java 11 出来了，相应的更新一版。\n\n<!-- more --><!-- toc -->\n\n我们首选使用 apt 来进行安装管理\n\n## Oracle JDK\n\n首先添加 LinuxUprising Java PPA 仓库到软件源中，并下载 Oracle Java 11\n\n```bash\n$ sudo add-apt-repository ppa:linuxuprising/java\n$ sudo apt update\n$ sudo apt install oracle-java11-installer\n```\n\n```bash\n$ java -version\njava version \"11.0.1\" 2018-10-16 LTS\nJava(TM) SE Runtime Environment 18.9 (build 11.0.1+13-LTS)\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.1+13-LTS, mixed mode)\n```\n\n## OpenJDK\n\n### 18.04 LTS\n\n首先我们使用 `apt` 进行搜索\n\n```bash\n$ sudo apt search openjdk\n```\n\n如果你的系统版本足够新，比如 18.04 LTS，那么很有可能搜索出这样的条目\n\n```bash\nopenjdk-11-jdk/bionic-updates,bionic-security,now 10.0.2+13-1ubuntu0.18.04.4 amd64 [installed,automatic]\n  OpenJDK Development Kit (JDK)\n```\n\n这代表软件源已经更新了 Java 11，这样直接安装默认版本即可\n\n```bash\n$ sudo apt install -y default-jdk\n```\n\n### 更老版本\n\n如果是更早的版本，那么很大程度上并没有更新该源，那么这时候我们需要使用 tar 包进行安装\n\n```bash\n$ wget https://download.java.net/java/GA/jdk11/28/GPL/openjdk-11+28_linux-x64_bin.tar.gz -O /tmp/openjdk-11+28_linux-x64_bin.tar.gz\n$ sudo tar xfvz /tmp/openjdk-11+28_linux-x64_bin.tar.gz --directory /usr/lib/jvm\n$ rm -f /tmp/openjdk-11+28_linux-x64_bin.tar.gz\n```\n\n使用 `update-alternatives` 对它进行管理\n\n```bash\n$ sudo sh -c 'for bin in /usr/lib/jvm/jdk-11/bin/*; do update-alternatives --install /usr/bin/$(basename $bin) $(basename $bin) $bin 100; done'\n$ sudo sh -c 'for bin in /usr/lib/jvm/jdk-11/bin/*; do update-alternatives --set $(basename $bin) $bin; done'\n```\n\n最后查看 java 版本\n\n```bash\n$ java -version\nopenjdk version \"10.0.2\" 2018-07-17\nOpenJDK Runtime Environment (build 10.0.2+13-Ubuntu-1ubuntu0.18.04.4)\nOpenJDK 64-Bit Server VM (build 10.0.2+13-Ubuntu-1ubuntu0.18.04.4, mixed mode)\n```\n\n## 切换版本\n\n现在我们已经有两个版本的 Java，我们可以通过 `update-alternatives` 来选择一个作为默认版本\n\n```bash\n$ sudo update-alternatives --config java\nThere are 2 choices for the alternative java (providing /usr/bin/java).\n\n  Selection    Path                                  Priority   Status\n------------------------------------------------------------\n  0            /usr/lib/jvm/java-11-oracle/bin/java   1091      auto mode\n* 1            /usr/lib/jvm/java-11-oracle/bin/java   1091      manual mode\n  2            /usr/lib/jvm/jdk-11/bin/java           100       manual mode\n\nPress <enter> to keep the current choice[*], or type selection number:\n```\n\n随后输入 `Selection` 对应的数字即可完成切换\n\n- [Java SE Development Kit 11 Downloads](https://www.oracle.com/technetwork/java/javase/downloads/jdk11-downloads-5066655.html)\n- [Installing OpenJDK 11 on Ubuntu 18.04](https://dzone.com/articles/installing-openjdk-11-on-ubuntu-1804-for-real)\n- [How To Install Oracle Java 11 In Ubuntu, Linux Mint Or Debian (From PPA Repository)](https://www.linuxuprising.com/2018/10/how-to-install-oracle-java-11-in-ubuntu.html)\n","slug":"ubuntu-install-jdk11","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ajr00q95gqov5ifm3b6"},{"title":"Java 11 新特性：java 命令直接运行单文件","date":"2018-12-25T10:47:43.000Z","_content":"\n本文视频源：\nYoutube：https://youtu.be/Trw_jqRWKlc\nYouku：https://v.youku.com/v_show/id_XNDA4NTI1NjA4OA==.html\n\n虽然现在很少使用 Java 进行开发，但是仍然时不时的关注着它的动态，最近发现 Java 11 发布了，并且带来了很多新特性，关键它是 Java8 以后又一长期维护版本，可以在生产环境使用，这又增加了我关注它的动力，今天先介绍一个新特性：java 命令可以直接运行单文件。\n\n<!-- more --><!-- toc -->\n\n## 运行单文件\n\n举个例子，写一个类文件 `HelloWorld.java`\n\n```java\npublic class HelloWorld{\n    public static void main(String args[]){\n        System.out.println(\"Hello World\");\n    }\n}\n```\n\n以前需要这样运行\n\n```bash\n$ javac HelloWorld.java\n$ java HelloWorld\nHello World\n```\n\n现在只需要这样\n\n```bash\n$ java HelloWorld.java\nHello World\n```\n\n嗯，Python 你闭嘴，还有你 Go。呵呵\n\n## 为什么？\n\n其他介绍 Java 11 新特性的文章，到这里也就点到为止了，但是我总觉得这事不是这么简单。\n\nJava 为什么要这么做，真的是想用 `java` 取代 `javac` 吗，很显然不是，你可以做些实验，再多文件打包运行时，我们仍然需要 `javac` 来进行编译，也就是说 `java` 有其他的用途。\n\n这几年 Java 一直在追赶脚本语言（如：Python、NodeJS）的脚步，比如 lambda 函数、服务器组件、轻量级的 JSON 组件，还有 Java 11 才增加的 Http Client Api。这无疑都在想让自己往脚本语言方向发展，并且现在已经越来越像了。\n\n我们来做一些对比，拿入门的打印 `Hello World` 来举例，在 Python 中我们这样\n\n```python\n#!/usr/bin/env python\nprint(\"Hello World\")\n# python Hello.py\n```\n\nJava 中这样\n\n```java\npublic class Hello{\n    public static void main(String args[]){\n        System.out.println(\"Hello World\");\n    }\n}\n\n// javac Hello.java\n// java Hello\n```\n\n好了，先不要笑，也先不要管 `public, static, void` 是个什么东西，Java 一直都很臃肿，你又不是不知道，至少现在它已经把 `javac Hello.java` 干掉了。\n\n### 脚本运行\n\n脚本语言的特性是可以在文件第一行以 `#!` 开头，并指定运行命令，然后可以直接在终端中运行，比如 Python\n\n```bash\n$ chmod +x hello.py\n$ ./hello.py\nHello World\n```\n\n那 Java 呢，因为本身的特性，`.java` 后缀的文件不运行出现 `#!`，所以我们首先需要改一下名字，听到这里，你是不是已经开始心跳加速了。\n\n```bash\n$ mv Hello.java hello.sh\n$ chmod +x hello.sh\n```\n\n然后修改文件\n\n```bash\n#!/usr/bin/env java --source 11\n\npublic class HelloWorld{\n    public static void main(String args[]){\n        System.out.println(\"Hello World\");\n    }\n}\n```\n\n然后执行该文件\n\n```bash\n$ ./hello.sh\nHello World\n```\n\n啊！我看到了什么，这真的是 Java 吗？\n\nOK，现在为止，已经挑战了我的认知，这有悖于我们多年以来的认知。\n\n当然文件还可以使用 java 运行\n\n```bash\n$ java -Dtrace=true --source 11 hello.sh\n```\n\n### 同一个文件多个公共类\n\n我们刚才已经知道了两个有悖“常识”的知识点***Java 可以作为脚本运行***和***文件名可以和第一个公共类名不相同***\n\n看到第二点，我有个大胆的想法。\n\n```java\npublic class HelloWorld{\n    public static void main(String args[]){\n        System.out.println(\"Hello World\");\n        User u = new User();\n        u.id = 1;\n        System.out.println(u.id);\n\n    }\n}\npublic class User{\n    public int id;\n    public static void main(String args[]){\n        System.out.println(\"User\");\n    }\n}\n```\n\n这样的写法，如果放在几个月以前，是会被别人破口大骂的，因为只学过几天的菜鸟也知道，一个类中不能出现两个公共类，它会报这个错误。\n\n```bash\nerror: class User is public, should be declared in a file named User.java\n```\n\n你把 `User` 类前边的 `public` 去掉就行了，那在 Java 11 中呢\n\n```bash\n$ java hello.java\nHello World\n1\n```\n\n现在 Java 11 会正常运行该文件，并直接第一个公共类的 `main` 函数。\n\n好吧，这确实颠覆了 20 几年来 Java 固守的东西，还有对于新手来说，这真的是一个痛苦的过程。\n\n最后我们再来总结一下，在单文件运行的情况下 Java 11 做了哪些改变\n\n- ***Java 11 可以将单文件作为脚本来运行***\n- ***文件名不在需要跟第一个公共类名相同***\n- ***同一个文件下可以存在多个公共类***\n- ***单文件下不再需要 class 文件***\n\n参考：\n- [New Java 11 Feature: Launch Single-File Source-Code Programs](https://medium.com/the-java-report/new-java-11-feature-launch-single-file-source-code-programs-fadd698abf54)\n\n\n\n\n\n","source":"_posts/2018-12-25-java-11-new1.md","raw":"---\ntitle: Java 11 新特性：java 命令直接运行单文件\ndate: 2018-12-25 10:47:43\ntags: [java]\n---\n\n本文视频源：\nYoutube：https://youtu.be/Trw_jqRWKlc\nYouku：https://v.youku.com/v_show/id_XNDA4NTI1NjA4OA==.html\n\n虽然现在很少使用 Java 进行开发，但是仍然时不时的关注着它的动态，最近发现 Java 11 发布了，并且带来了很多新特性，关键它是 Java8 以后又一长期维护版本，可以在生产环境使用，这又增加了我关注它的动力，今天先介绍一个新特性：java 命令可以直接运行单文件。\n\n<!-- more --><!-- toc -->\n\n## 运行单文件\n\n举个例子，写一个类文件 `HelloWorld.java`\n\n```java\npublic class HelloWorld{\n    public static void main(String args[]){\n        System.out.println(\"Hello World\");\n    }\n}\n```\n\n以前需要这样运行\n\n```bash\n$ javac HelloWorld.java\n$ java HelloWorld\nHello World\n```\n\n现在只需要这样\n\n```bash\n$ java HelloWorld.java\nHello World\n```\n\n嗯，Python 你闭嘴，还有你 Go。呵呵\n\n## 为什么？\n\n其他介绍 Java 11 新特性的文章，到这里也就点到为止了，但是我总觉得这事不是这么简单。\n\nJava 为什么要这么做，真的是想用 `java` 取代 `javac` 吗，很显然不是，你可以做些实验，再多文件打包运行时，我们仍然需要 `javac` 来进行编译，也就是说 `java` 有其他的用途。\n\n这几年 Java 一直在追赶脚本语言（如：Python、NodeJS）的脚步，比如 lambda 函数、服务器组件、轻量级的 JSON 组件，还有 Java 11 才增加的 Http Client Api。这无疑都在想让自己往脚本语言方向发展，并且现在已经越来越像了。\n\n我们来做一些对比，拿入门的打印 `Hello World` 来举例，在 Python 中我们这样\n\n```python\n#!/usr/bin/env python\nprint(\"Hello World\")\n# python Hello.py\n```\n\nJava 中这样\n\n```java\npublic class Hello{\n    public static void main(String args[]){\n        System.out.println(\"Hello World\");\n    }\n}\n\n// javac Hello.java\n// java Hello\n```\n\n好了，先不要笑，也先不要管 `public, static, void` 是个什么东西，Java 一直都很臃肿，你又不是不知道，至少现在它已经把 `javac Hello.java` 干掉了。\n\n### 脚本运行\n\n脚本语言的特性是可以在文件第一行以 `#!` 开头，并指定运行命令，然后可以直接在终端中运行，比如 Python\n\n```bash\n$ chmod +x hello.py\n$ ./hello.py\nHello World\n```\n\n那 Java 呢，因为本身的特性，`.java` 后缀的文件不运行出现 `#!`，所以我们首先需要改一下名字，听到这里，你是不是已经开始心跳加速了。\n\n```bash\n$ mv Hello.java hello.sh\n$ chmod +x hello.sh\n```\n\n然后修改文件\n\n```bash\n#!/usr/bin/env java --source 11\n\npublic class HelloWorld{\n    public static void main(String args[]){\n        System.out.println(\"Hello World\");\n    }\n}\n```\n\n然后执行该文件\n\n```bash\n$ ./hello.sh\nHello World\n```\n\n啊！我看到了什么，这真的是 Java 吗？\n\nOK，现在为止，已经挑战了我的认知，这有悖于我们多年以来的认知。\n\n当然文件还可以使用 java 运行\n\n```bash\n$ java -Dtrace=true --source 11 hello.sh\n```\n\n### 同一个文件多个公共类\n\n我们刚才已经知道了两个有悖“常识”的知识点***Java 可以作为脚本运行***和***文件名可以和第一个公共类名不相同***\n\n看到第二点，我有个大胆的想法。\n\n```java\npublic class HelloWorld{\n    public static void main(String args[]){\n        System.out.println(\"Hello World\");\n        User u = new User();\n        u.id = 1;\n        System.out.println(u.id);\n\n    }\n}\npublic class User{\n    public int id;\n    public static void main(String args[]){\n        System.out.println(\"User\");\n    }\n}\n```\n\n这样的写法，如果放在几个月以前，是会被别人破口大骂的，因为只学过几天的菜鸟也知道，一个类中不能出现两个公共类，它会报这个错误。\n\n```bash\nerror: class User is public, should be declared in a file named User.java\n```\n\n你把 `User` 类前边的 `public` 去掉就行了，那在 Java 11 中呢\n\n```bash\n$ java hello.java\nHello World\n1\n```\n\n现在 Java 11 会正常运行该文件，并直接第一个公共类的 `main` 函数。\n\n好吧，这确实颠覆了 20 几年来 Java 固守的东西，还有对于新手来说，这真的是一个痛苦的过程。\n\n最后我们再来总结一下，在单文件运行的情况下 Java 11 做了哪些改变\n\n- ***Java 11 可以将单文件作为脚本来运行***\n- ***文件名不在需要跟第一个公共类名相同***\n- ***同一个文件下可以存在多个公共类***\n- ***单文件下不再需要 class 文件***\n\n参考：\n- [New Java 11 Feature: Launch Single-File Source-Code Programs](https://medium.com/the-java-report/new-java-11-feature-launch-single-file-source-code-programs-fadd698abf54)\n\n\n\n\n\n","slug":"java-11-new1","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ajs00qb5gqo9f1ye9bw"},{"title":"Python 统计字符串中某个字符串出现的次数","date":"2018-12-28T15:04:13.000Z","_content":"\n\nPython 的字符串函数还是很方便的，只需要调用 `count()` 方法即可。\n\n<!-- more --><!-- toc -->\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nprint('Hello World'.count('o'))\n# 2\n```\n","source":"_posts/2018-12-28-python-str-count.md","raw":"---\ntitle: Python 统计字符串中某个字符串出现的次数\ntags:\n  - python\ndate: 2018-12-28 15:04:13\n---\n\n\nPython 的字符串函数还是很方便的，只需要调用 `count()` 方法即可。\n\n<!-- more --><!-- toc -->\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nprint('Hello World'.count('o'))\n# 2\n```\n","slug":"python-str-count","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ajt00qd5gqof5ehshhi"},{"title":"CentOS 7 如何安装 Java 11","date":"2018-12-27T09:26:01.000Z","_content":"\n\n几个月前我写过文章 [CentOS 安装 JDK](/2018/06/15/centos-install-jdk/) ，当时是以 JDK 8 为例子，现在 Java 11 出来了，相应的更新一版。\n\n<!-- more --><!-- toc -->\n\n## OpenJDK\n\n首先搜索可安装的 JDK\n\n```bash\n$ sudo yum search java-11\n```\n\n从结果中我们可以找出两个条目\n\n```bash\njava-11-openjdk.x86_64 : OpenJDK Runtime Environment 11\njava-11-openjdk-devel.x86_64 : OpenJDK Development Environment 11\n```\n\n他们分别是 JRE 和 JDK，根据你的需求安装即可，比如安装 JRE\n\n```bash\n$ sudo yum install java-11-openjdk -y\n```\n\n安装目录为\n\n```bash\n/usr/lib/jvm/java-11-openjdk-11.0.1.13-3.el7_6.x86_64\n```\n\n查看版本\n\n```bash\n$ java -version\n\nopenjdk version \"11.0.1\" 2018-10-16 LTS\nOpenJDK Runtime Environment 18.9 (build 11.0.1+13-LTS)\nOpenJDK 64-Bit Server VM 18.9 (build 11.0.1+13-LTS, mixed mode, sharing)\n```\n\n## Oracle\n\nOracle 的 JDK 安装要稍微麻烦点，首先获取[官网](https://www.oracle.com/technetwork/java/javase/downloads/jdk11-downloads-5066655.html)的 JDK RPM 地址\n\n```bash\nhttps://download.oracle.com/otn-pub/java/jdk/11.0.1+13/90cf5d8f270a4347a95050320eef3fb7/jdk-11.0.1_linux-x64_bin.rpm\n```\n\n下载到服务器\n\n```bash\n$ wget --no-cookies --no-check-certificate --header \"Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com%2F; oraclelicense=accept-securebackup-cookie\" https://download.oracle.com/otn-pub/java/jdk/11.0.1+13/90cf5d8f270a4347a95050320eef3fb7/jdk-11.0.1_linux-x64_bin.rpm\n```\n\n安装\n\n```bash\n$ sudo yum -y localinstall jdk-11.0.1_linux-x64_bin.rpm\n```\n\n安装目录为\n\n```bash\n/usr/java/jdk-11.0.1\n```\n\n\n## 选择版本\n\n查看所有本机 JDK 版本\n\n```bash\n$ sudo alternatives --config java\n\nThere are 2 programs which provide 'java'.\n\n  Selection    Command\n-----------------------------------------------\n + 1           java-11-openjdk.x86_64 (/usr/lib/jvm/java-11-openjdk-11.0.1.13-3.el7_6.x86_64/bin/java)\n*  2           /usr/java/jdk-11.0.1/bin/java\n\nEnter to keep the current selection[+], or type selection number: 2\n```\n\n`*+` 代表当前使用的版本，该命令下输入版本对应的数字即可更改版本，我们输入 2 更\n改为 oracle 版本，然后查看版本\n\n```bash\n$ java -version\njava version \"11.0.1\" 2018-10-16 LTS\nJava(TM) SE Runtime Environment 18.9 (build 11.0.1+13-LTS)\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.1+13-LTS, mixed mode)\n```\n\n","source":"_posts/2018-12-27-centos7-install-java11.md","raw":"---\ntitle: CentOS 7 如何安装 Java 11\ntags:\n  - java\ndate: 2018-12-27 09:26:01\n---\n\n\n几个月前我写过文章 [CentOS 安装 JDK](/2018/06/15/centos-install-jdk/) ，当时是以 JDK 8 为例子，现在 Java 11 出来了，相应的更新一版。\n\n<!-- more --><!-- toc -->\n\n## OpenJDK\n\n首先搜索可安装的 JDK\n\n```bash\n$ sudo yum search java-11\n```\n\n从结果中我们可以找出两个条目\n\n```bash\njava-11-openjdk.x86_64 : OpenJDK Runtime Environment 11\njava-11-openjdk-devel.x86_64 : OpenJDK Development Environment 11\n```\n\n他们分别是 JRE 和 JDK，根据你的需求安装即可，比如安装 JRE\n\n```bash\n$ sudo yum install java-11-openjdk -y\n```\n\n安装目录为\n\n```bash\n/usr/lib/jvm/java-11-openjdk-11.0.1.13-3.el7_6.x86_64\n```\n\n查看版本\n\n```bash\n$ java -version\n\nopenjdk version \"11.0.1\" 2018-10-16 LTS\nOpenJDK Runtime Environment 18.9 (build 11.0.1+13-LTS)\nOpenJDK 64-Bit Server VM 18.9 (build 11.0.1+13-LTS, mixed mode, sharing)\n```\n\n## Oracle\n\nOracle 的 JDK 安装要稍微麻烦点，首先获取[官网](https://www.oracle.com/technetwork/java/javase/downloads/jdk11-downloads-5066655.html)的 JDK RPM 地址\n\n```bash\nhttps://download.oracle.com/otn-pub/java/jdk/11.0.1+13/90cf5d8f270a4347a95050320eef3fb7/jdk-11.0.1_linux-x64_bin.rpm\n```\n\n下载到服务器\n\n```bash\n$ wget --no-cookies --no-check-certificate --header \"Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com%2F; oraclelicense=accept-securebackup-cookie\" https://download.oracle.com/otn-pub/java/jdk/11.0.1+13/90cf5d8f270a4347a95050320eef3fb7/jdk-11.0.1_linux-x64_bin.rpm\n```\n\n安装\n\n```bash\n$ sudo yum -y localinstall jdk-11.0.1_linux-x64_bin.rpm\n```\n\n安装目录为\n\n```bash\n/usr/java/jdk-11.0.1\n```\n\n\n## 选择版本\n\n查看所有本机 JDK 版本\n\n```bash\n$ sudo alternatives --config java\n\nThere are 2 programs which provide 'java'.\n\n  Selection    Command\n-----------------------------------------------\n + 1           java-11-openjdk.x86_64 (/usr/lib/jvm/java-11-openjdk-11.0.1.13-3.el7_6.x86_64/bin/java)\n*  2           /usr/java/jdk-11.0.1/bin/java\n\nEnter to keep the current selection[+], or type selection number: 2\n```\n\n`*+` 代表当前使用的版本，该命令下输入版本对应的数字即可更改版本，我们输入 2 更\n改为 oracle 版本，然后查看版本\n\n```bash\n$ java -version\njava version \"11.0.1\" 2018-10-16 LTS\nJava(TM) SE Runtime Environment 18.9 (build 11.0.1+13-LTS)\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.1+13-LTS, mixed mode)\n```\n\n","slug":"centos7-install-java11","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ajv00qf5gqo70uuc0hc"},{"title":"重新学 Java 系列：public private protected friendly 的区别","date":"2018-12-30T22:28:56.000Z","_content":"\n\n> 这个是一个系列阅读，关于为什么重新学习，我在文章 [重新学 Java 系列：新系列、新开始](/2018/12/29/java-renew-why/)(https://wxnacy.com/2018/12/29/java-renew-why/) 中有提到，这个系列是在有 Java 基础的情况下，重新学习讨论一下以前可能忽略掉，或者没理解的知识细节，我想要永远在学习的路上。\n\n<!-- more --><!-- toc -->\nJava 共有四种修饰：`public, private, protected, friendly`，（默认为：friendly）\n\n可能调用他们修饰变量和函数的有的作用域有：当前类、当前包、子类、外部类\n\n从网上找他们的对应的调用权限，很多是各种摘抄，并且存在各种错误，所以我认真对他们进行了实验，得到如下结论\n\n\n| 对比      | 当前类 | 当前包 | 子类 | 外部类 |\n| --------- | ------ | ------ | ---- | ------ |\n| public    | √      | √      | √    | √      |\n| private   | √      | ×      | ×    | ×      |\n| protected | √      | √      | √    | ×      |\n| friendly  | √      | √      | √    | ×      |\n\n如表格，简单总结如下\n\n- `public`: 所有地方都可以调用。\n- `private`: 只有当前类可以调用。\n- `protected`: 只有外部类不可调用。\n- `friendly`: 与 `protected` 完全相同。\n\n下载 demo [https://github.com/wxnacy/study/tree/master/java/modification](https://github.com/wxnacy/study/tree/master/java/modification) 到电脑中，确保电脑中有 Java 运行环境，可以执行跟目下的 `./run.sh` 脚本。\n\n```bash\n$ ./run.sh\n        public  private protected       friendly\n当前类  √       √       √               √\n当前包  √       ×       √               √\n子类    √       ×       √               √\n外部类  √       ×       ×               ×\n```\n","source":"_posts/2018-12-30-java-renew-modification.md","raw":"---\ntitle: 重新学 Java 系列：public private protected friendly 的区别\ntags:\n  - java\ndate: 2018-12-30 22:28:56\n---\n\n\n> 这个是一个系列阅读，关于为什么重新学习，我在文章 [重新学 Java 系列：新系列、新开始](/2018/12/29/java-renew-why/)(https://wxnacy.com/2018/12/29/java-renew-why/) 中有提到，这个系列是在有 Java 基础的情况下，重新学习讨论一下以前可能忽略掉，或者没理解的知识细节，我想要永远在学习的路上。\n\n<!-- more --><!-- toc -->\nJava 共有四种修饰：`public, private, protected, friendly`，（默认为：friendly）\n\n可能调用他们修饰变量和函数的有的作用域有：当前类、当前包、子类、外部类\n\n从网上找他们的对应的调用权限，很多是各种摘抄，并且存在各种错误，所以我认真对他们进行了实验，得到如下结论\n\n\n| 对比      | 当前类 | 当前包 | 子类 | 外部类 |\n| --------- | ------ | ------ | ---- | ------ |\n| public    | √      | √      | √    | √      |\n| private   | √      | ×      | ×    | ×      |\n| protected | √      | √      | √    | ×      |\n| friendly  | √      | √      | √    | ×      |\n\n如表格，简单总结如下\n\n- `public`: 所有地方都可以调用。\n- `private`: 只有当前类可以调用。\n- `protected`: 只有外部类不可调用。\n- `friendly`: 与 `protected` 完全相同。\n\n下载 demo [https://github.com/wxnacy/study/tree/master/java/modification](https://github.com/wxnacy/study/tree/master/java/modification) 到电脑中，确保电脑中有 Java 运行环境，可以执行跟目下的 `./run.sh` 脚本。\n\n```bash\n$ ./run.sh\n        public  private protected       friendly\n当前类  √       √       √               √\n当前包  √       ×       √               √\n子类    √       ×       √               √\n外部类  √       ×       ×               ×\n```\n","slug":"java-renew-modification","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ajw00qh5gqovk5garza"},{"title":"重新学 Java 系列：新系列、新开始","date":"2018-12-29T16:09:17.000Z","_content":"\n\n我经常自诩是个 Java 出身的程序员，虽然实际情况确实如此，但随着时间推移，说这句话越来越没了底气。\n\n<!-- more --><!-- toc -->\n以前作为 Java 程序员，我是很自豪的，原因呢？可能只是因为 Java 本身的市场占比。\n\n后来因为工作原因接触了 Python，并逐渐成为主力语言，Java 就慢慢从我的开发生活中淡出了，这次的原因呢？好吧，我已经不想在用打印 `Hello World` 这个玩笑来自嘲了。\n\n在这个过程中，我接触了 Ruby、NodeJS、Go。他们每个都比 Java 简洁，比 Java 更有效率。我沉醉于吸收新语言，觉得这是在给自己修炼各种劳作工具，免得遇到各种问题都只能想到 Java 这一把“锤子”来解决问题。\n\n那是什么时候出现问题了呢？大概是从面对 Java 代码越来越陌生开始的吧。\n\n还记得两年前，我还会关注 Java 8 新特性，一位前辈看到后说，还看什么 Java 啊，开发语言发展到现在，Java 跟其他相比，只是在浪费你的工作时间和拖慢你的电脑。我当时还义正言辞的说，虽然不常用了，但必须要多关注动态。\n\n不过好像也就是说说而已，此后无数次的想要用 Java 写点东西，都被它的繁琐累赘所阻挠，是啊，有了更简洁的语言，为什么还要浪费时间用 Java 来写呢。\n\n导致的结果就是，现在越来越不会写 Java 了，每次重整旗鼓，都会被包的导入这种小事情纠结半天。真的是因为太久不写了吗？\n\n最近我常常在想这个问题，从 Python 开始，我每次接触新语言就会非常重视基础，因为当初学 Java 时就是这样的，我坚信不管学什么东西，基础都是最重要的。\n\n我不断的回忆学 Java 的一些细节，我逐渐发现当时的基础其实并没有学好，我只是以为学好了而已，因为在以前，我从来没有深究过编译整个项目时 `javac` 的编译逻辑，我也没有深究过 `public` 明明已经可以像其它语言一样可以对参数赋值读取，却还要使用 `private` 再配上 `set, get` 方法。\n\n我只是跟网上很多人一样，这是规范，这样用就好了，反正有 IDE，他就帮你编译打包了，你关注业务逻辑就行了。\n\n所以我不断的练习 `System.out.println(\"Hello World\")` 的编写，我不断的重复 `set, get` 的熟练度，我告诉自己熟能生巧，这样就对了。\n\n所以我既没有把这些知识搞明明白白后存在大脑，也没有把它记录在博客上供以后查阅，我只把它交给了肌肉记忆。\n\n重新燃起学习 Java 的欲望，是因为最近 Java 11 更新了，很多新特性，一个免编译运行单文件的新特性，更是让它显得不那么 Java 了，并且它是继 Java 8 后又一个长期维护版本，文章最后一句话是“如果你要入门 Java，这会是个不错的版本”。\n\n好吧，我想我是属于那个重新入门 Java 的的老鸟了。\n\n这次我不在借助 IDE，而是用 Vim 一点一点弄懂它的编译逻辑。\n\n这次我会弄清楚更多的基础内容并把它记录在博客里，存在大脑里。\n\n这次我希望在跟别人说，我是 Java 出身时，显得更有底气。\n\n\n","source":"_posts/2018-12-29-java-renew-why.md","raw":"---\ntitle: 重新学 Java 系列：新系列、新开始\ntags:\n  - java\ndate: 2018-12-29 16:09:17\n---\n\n\n我经常自诩是个 Java 出身的程序员，虽然实际情况确实如此，但随着时间推移，说这句话越来越没了底气。\n\n<!-- more --><!-- toc -->\n以前作为 Java 程序员，我是很自豪的，原因呢？可能只是因为 Java 本身的市场占比。\n\n后来因为工作原因接触了 Python，并逐渐成为主力语言，Java 就慢慢从我的开发生活中淡出了，这次的原因呢？好吧，我已经不想在用打印 `Hello World` 这个玩笑来自嘲了。\n\n在这个过程中，我接触了 Ruby、NodeJS、Go。他们每个都比 Java 简洁，比 Java 更有效率。我沉醉于吸收新语言，觉得这是在给自己修炼各种劳作工具，免得遇到各种问题都只能想到 Java 这一把“锤子”来解决问题。\n\n那是什么时候出现问题了呢？大概是从面对 Java 代码越来越陌生开始的吧。\n\n还记得两年前，我还会关注 Java 8 新特性，一位前辈看到后说，还看什么 Java 啊，开发语言发展到现在，Java 跟其他相比，只是在浪费你的工作时间和拖慢你的电脑。我当时还义正言辞的说，虽然不常用了，但必须要多关注动态。\n\n不过好像也就是说说而已，此后无数次的想要用 Java 写点东西，都被它的繁琐累赘所阻挠，是啊，有了更简洁的语言，为什么还要浪费时间用 Java 来写呢。\n\n导致的结果就是，现在越来越不会写 Java 了，每次重整旗鼓，都会被包的导入这种小事情纠结半天。真的是因为太久不写了吗？\n\n最近我常常在想这个问题，从 Python 开始，我每次接触新语言就会非常重视基础，因为当初学 Java 时就是这样的，我坚信不管学什么东西，基础都是最重要的。\n\n我不断的回忆学 Java 的一些细节，我逐渐发现当时的基础其实并没有学好，我只是以为学好了而已，因为在以前，我从来没有深究过编译整个项目时 `javac` 的编译逻辑，我也没有深究过 `public` 明明已经可以像其它语言一样可以对参数赋值读取，却还要使用 `private` 再配上 `set, get` 方法。\n\n我只是跟网上很多人一样，这是规范，这样用就好了，反正有 IDE，他就帮你编译打包了，你关注业务逻辑就行了。\n\n所以我不断的练习 `System.out.println(\"Hello World\")` 的编写，我不断的重复 `set, get` 的熟练度，我告诉自己熟能生巧，这样就对了。\n\n所以我既没有把这些知识搞明明白白后存在大脑，也没有把它记录在博客上供以后查阅，我只把它交给了肌肉记忆。\n\n重新燃起学习 Java 的欲望，是因为最近 Java 11 更新了，很多新特性，一个免编译运行单文件的新特性，更是让它显得不那么 Java 了，并且它是继 Java 8 后又一个长期维护版本，文章最后一句话是“如果你要入门 Java，这会是个不错的版本”。\n\n好吧，我想我是属于那个重新入门 Java 的的老鸟了。\n\n这次我不在借助 IDE，而是用 Vim 一点一点弄懂它的编译逻辑。\n\n这次我会弄清楚更多的基础内容并把它记录在博客里，存在大脑里。\n\n这次我希望在跟别人说，我是 Java 出身时，显得更有底气。\n\n\n","slug":"java-renew-why","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ajx00qj5gqos1s8n9t9"},{"title":"2018 年，总结","date":"2018-12-31T16:56:45.000Z","_content":"\n2018 年最后一天，来总结一下这一年的表现\n\n<!-- more --><!-- toc -->\n\n## 孩子\n\n今年如果要用到一个关键词，那就是孩子。\n\n6 月 6 日凌晨，我的宝贝儿欣欣出生了，我断定我娃以后必定 666。\n\n就这样，以 6 月为中轴，我们今年的生活被分成了两个部分，孕期和产期。\n\n最辛苦的还是我的老婆大人，6 月 5 号凌晨感觉宫缩，中午去医院，下午就住院，准备开指，晚上孩子就出生了。在旁人来看，整个过程干净利索，然而那天最痛苦的就是老婆了，可以用疼一天来形容，晚上疼的都吃不下饭，最后还要靠着自身的力气生下了大胖欣。而我只能守在产区外面，准备吃的和随时报喜是我唯一能做的。\n\n从这以后，老婆就再也没睡过一个整觉了，这半年来，我俩每天都要面对的都是孩子晚上睡觉的问题，现在更是几乎每个小时都醒，老婆说打死都不要二胎了，我说嗯嗯嗯。\n\n有了孩子，以后的日子都要围着孩子转了，老婆说现在我俩唯一约会的机会，就是周末趁着老人看孩子能出来逛下超市，连电影也看不了了，因为时间太长孩子就要闹了。\n\n女人的伟大，在于身份的不断转变。从公主到女朋友到老婆，再到母亲，她们的心在越来越坚强，越来越让我离不开。\n\n老婆，我爱你 ლ(′◉❥◉｀ლ)\n\n## 博客\n\n博客是去年正式开始写的，今年初定的目标是每天一篇，女儿出生前都履行的很好，但是后来就有点力不从心，有时候几天都没时间写，不过这不代表就落下了，以前欠下的我仍然会补上，这就好比欠了钱，不管过了多久，都要还上。\n\n## 读书\n\n这一项应该是目前执行最好的一项了，年初定了每周 5 小时，一年 30 本的目标。最后一共读完了 50 本，共 460 多个小时，大大的超出了目标，不过这也是因为目标定的并不高，明年要更上一层楼。\n\n## 学习\n\n学习也是一直没用拉下的一项，今年趁着有时间，学习 GO 语言，我相信这是未来几年一个很有前途的语言，同时也因此又让我有了重新学习 Java 的想法。\n\n另外我还开始了写一本关于 Vim 教程的书，叫 [《Vim 练级手册》](https://vim.wxnacy.com/)(https://vim.wxnacy.com/)，这是我想着手普及 Vim 的一个起点，不过自从女儿出生以后就搁浅了，只写了基础篇的几个章节，明年要把它加到计划里。\n\n## 总结\n\n年初时，我对自己做了一个一年要求，[2018 年，对自己的要求](https://wxnacy.com/2018/01/01/2018-begin/)(https://wxnacy.com/2018/01/01/2018-begin/)\n\n下面一一列举是否完成\n\n**每天任务**\n\n下面这些周期性的任务都现在正在进行的，接下来只是继续坚持而已。\n- 复习／背单词一共至少 100 个（未完成，明年的计划需要针对调整）\n- 每周读书至少 5 小时（完成，部分周的读书时长不够，但都会在次周补上）\n- 每天写一篇博客（未完成，女儿出生后就时不时会有断裂，不过都会补上）\n- 每天记录微博（未完成，后期放弃使用微博）\n\n**总量目标**\n- 全年读书至少 30 本（完成，一共读了 50 本）\n- 争取写一个自己的 Hexo 主题（未完成）\n- 对 Python 更加精进（完成）\n- 在 Vim 做到开发 Java 可以称心如意（未完成，同样是明年的目标）\n\n一晃又是一年，这一年相比以往有些坎坷，不过我还是在一点一点的进步着，我相信量变一定会转变为质变，加油，老温。\n\n","source":"_posts/2018-12-31-2018-end.md","raw":"---\ntitle: 2018 年，总结\ndate: 2018-12-31 16:56:45\ntags: [杂谈]\n---\n\n2018 年最后一天，来总结一下这一年的表现\n\n<!-- more --><!-- toc -->\n\n## 孩子\n\n今年如果要用到一个关键词，那就是孩子。\n\n6 月 6 日凌晨，我的宝贝儿欣欣出生了，我断定我娃以后必定 666。\n\n就这样，以 6 月为中轴，我们今年的生活被分成了两个部分，孕期和产期。\n\n最辛苦的还是我的老婆大人，6 月 5 号凌晨感觉宫缩，中午去医院，下午就住院，准备开指，晚上孩子就出生了。在旁人来看，整个过程干净利索，然而那天最痛苦的就是老婆了，可以用疼一天来形容，晚上疼的都吃不下饭，最后还要靠着自身的力气生下了大胖欣。而我只能守在产区外面，准备吃的和随时报喜是我唯一能做的。\n\n从这以后，老婆就再也没睡过一个整觉了，这半年来，我俩每天都要面对的都是孩子晚上睡觉的问题，现在更是几乎每个小时都醒，老婆说打死都不要二胎了，我说嗯嗯嗯。\n\n有了孩子，以后的日子都要围着孩子转了，老婆说现在我俩唯一约会的机会，就是周末趁着老人看孩子能出来逛下超市，连电影也看不了了，因为时间太长孩子就要闹了。\n\n女人的伟大，在于身份的不断转变。从公主到女朋友到老婆，再到母亲，她们的心在越来越坚强，越来越让我离不开。\n\n老婆，我爱你 ლ(′◉❥◉｀ლ)\n\n## 博客\n\n博客是去年正式开始写的，今年初定的目标是每天一篇，女儿出生前都履行的很好，但是后来就有点力不从心，有时候几天都没时间写，不过这不代表就落下了，以前欠下的我仍然会补上，这就好比欠了钱，不管过了多久，都要还上。\n\n## 读书\n\n这一项应该是目前执行最好的一项了，年初定了每周 5 小时，一年 30 本的目标。最后一共读完了 50 本，共 460 多个小时，大大的超出了目标，不过这也是因为目标定的并不高，明年要更上一层楼。\n\n## 学习\n\n学习也是一直没用拉下的一项，今年趁着有时间，学习 GO 语言，我相信这是未来几年一个很有前途的语言，同时也因此又让我有了重新学习 Java 的想法。\n\n另外我还开始了写一本关于 Vim 教程的书，叫 [《Vim 练级手册》](https://vim.wxnacy.com/)(https://vim.wxnacy.com/)，这是我想着手普及 Vim 的一个起点，不过自从女儿出生以后就搁浅了，只写了基础篇的几个章节，明年要把它加到计划里。\n\n## 总结\n\n年初时，我对自己做了一个一年要求，[2018 年，对自己的要求](https://wxnacy.com/2018/01/01/2018-begin/)(https://wxnacy.com/2018/01/01/2018-begin/)\n\n下面一一列举是否完成\n\n**每天任务**\n\n下面这些周期性的任务都现在正在进行的，接下来只是继续坚持而已。\n- 复习／背单词一共至少 100 个（未完成，明年的计划需要针对调整）\n- 每周读书至少 5 小时（完成，部分周的读书时长不够，但都会在次周补上）\n- 每天写一篇博客（未完成，女儿出生后就时不时会有断裂，不过都会补上）\n- 每天记录微博（未完成，后期放弃使用微博）\n\n**总量目标**\n- 全年读书至少 30 本（完成，一共读了 50 本）\n- 争取写一个自己的 Hexo 主题（未完成）\n- 对 Python 更加精进（完成）\n- 在 Vim 做到开发 Java 可以称心如意（未完成，同样是明年的目标）\n\n一晃又是一年，这一年相比以往有些坎坷，不过我还是在一点一点的进步着，我相信量变一定会转变为质变，加油，老温。\n\n","slug":"2018-end","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ajy00ql5gqoc3nbut3i"},{"title":"2019 年，对自己的要求","date":"2019-01-01T16:42:15.000Z","_content":"\n每年的元旦，我都会做一个年度计划，会在去年的基础上做一些调整，适当增加或减少\n\n<!-- more --><!-- toc -->\n## 定期任务\n\n- 每天至少听一个英文电影原声\n- 每周 100 个新增英语单词量\n- 每天一篇博客\n- 每周至少 8 小时的读书时长\n\n## 总量任务\n\n- 完成 [Vim 练级手册](https://vim.wxnacy.com/)的编写\n- 重学 Java，至可以进行项目开发\n- 对 Go 语言更加精进\n\n今年的目标是在去年的基础上做了些调整，希望坚持完成，加油\n","source":"_posts/2019-01-01-2019-begin.md","raw":"---\ntitle: 2019 年，对自己的要求\ndate: 2019-01-01 16:42:15\ntags: [杂谈]\n---\n\n每年的元旦，我都会做一个年度计划，会在去年的基础上做一些调整，适当增加或减少\n\n<!-- more --><!-- toc -->\n## 定期任务\n\n- 每天至少听一个英文电影原声\n- 每周 100 个新增英语单词量\n- 每天一篇博客\n- 每周至少 8 小时的读书时长\n\n## 总量任务\n\n- 完成 [Vim 练级手册](https://vim.wxnacy.com/)的编写\n- 重学 Java，至可以进行项目开发\n- 对 Go 语言更加精进\n\n今年的目标是在去年的基础上做了些调整，希望坚持完成，加油\n","slug":"2019-begin","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ajz00qn5gqok1ktveh9"},{"title":"2019 年读书目录","date":"2019-01-07T13:45:40.000Z","_content":"\n本章记录 2019 年读书情况\n\n新的记录位置[book](https://github.com/wxnacy/book)\n\n<!-- more -->\n\n## 目标\n2019 年每周要至少读够 8 小时书，一年至少读完 40 本书\n\n## 正在读\n《肖申克的救赎》\n《别独自用餐》\n《囚徒健身2》\n《算法图解》\n\n## 读完的\n\n- 2019-01-18 09:31:48 读完《武动乾坤》                                             花费 36 小时 48 分钟\n- 2019-01-23 13:08:00 读完《古董局中局》                                           花费 30 小时 30 分钟\n- 2019-02-08 20:54:00 读完《三国机密》                                             花费 17 小时 41 分钟\n- 2019-03-29 08:34:00 读完《坏蛋2》第 N 遍                                         花费 58 小时 00 分钟\n- 2019-03-30 18:29:00 读完《坏蛋番外》                                             花费 05 小时 12 分钟\n- 2019-04-29 13:19:00 读完《欺诈游戏》\n- 2019-04-30 12:26:00 读完《为什么精英都是时间控》                                 花费 03 小时 05 分钟\n- 2019-05-02 16:00:00 读完《一个人的巴黎》                                         花费 02 小时 24 分钟\n- 2019-05-02 20:00:00 读完《赌博默示录》\n- 2019-05-04 17:00:00 读完《赌博破戒录》\n- 2019-05-05 13:30:00 读完《赌博坠天录》\n- 2019-06-18 09:30:00 读完《紧闭的门扉》\n- 2019-06-21 19:55:00 读完《美国陷阱》\n- 2019-06-25 20:00:00 读完《进击的巨人》到 26 卷\n- 2019-06-27 22:00:00 读完《跃进》\n- 2019-07-02 20:22:00 读完《钢之炼金术师》第 N 遍\n\n总共 13 本\n\n## 时间\n\n2019 年第一周读书   12.31 - 01.06 32小时13分钟\n2019 年第二周读书   01.07 - 01.13 20小时55分钟\n2019 年第三周读书   01.14 - 01.20 16小时12分钟\n2019 年第四周读书   01.21 - 01.27 21小时41分钟\n2019 年第五周读书   01.28 - 02.03 19小时07分钟\n2019 年第六周读书   02.04 - 02.10 15小时04分钟\n2019 年第七周读书   02.11 - 02.17 18小时56分钟\n2019 年第八周读书   02.18 - 02.24 15小时01分钟\n2019 年第九周读书   02.25 - 03.03 10小时04分钟\n2019 年第十周读书   03.04 - 03.10 07小时01分钟（未完成）\n2019 年十一周读书   03.11 - 03.17 10小时48分钟\n2019 年十二周读书   03.18 - 03.24 06小时48分钟（未完成）\n2019 年十三周读书   03.25 - 03.31 11小时32分钟\n2019 年十四周读书   04.01 - 04.07 03小时37分钟（未完成）\n2019 年十五周读书   04.08 - 04.14 12小时22分钟\n2019 年十六周读书   04.15 - 04.21 03小时19分钟（未完成）\n2019 年十七周读书   04.22 - 04.28 07小时32分钟（未完成）\n2019-06-17 开始使用 kindle 所以无法记录阅读时间，以后只记录读过的书\n\n\n总共 232 小时 12 分钟\n\n\n## 想读的\n\n《人类简史》\n《悟空传》\n《未来简史》\n《神经浪游者》\n","source":"_posts/2019-01-07-2019-books.md","raw":"---\ntitle: 2019 年读书目录\ndate: 2019-01-07 13:45:40\ntags: [杂谈]\n---\n\n本章记录 2019 年读书情况\n\n新的记录位置[book](https://github.com/wxnacy/book)\n\n<!-- more -->\n\n## 目标\n2019 年每周要至少读够 8 小时书，一年至少读完 40 本书\n\n## 正在读\n《肖申克的救赎》\n《别独自用餐》\n《囚徒健身2》\n《算法图解》\n\n## 读完的\n\n- 2019-01-18 09:31:48 读完《武动乾坤》                                             花费 36 小时 48 分钟\n- 2019-01-23 13:08:00 读完《古董局中局》                                           花费 30 小时 30 分钟\n- 2019-02-08 20:54:00 读完《三国机密》                                             花费 17 小时 41 分钟\n- 2019-03-29 08:34:00 读完《坏蛋2》第 N 遍                                         花费 58 小时 00 分钟\n- 2019-03-30 18:29:00 读完《坏蛋番外》                                             花费 05 小时 12 分钟\n- 2019-04-29 13:19:00 读完《欺诈游戏》\n- 2019-04-30 12:26:00 读完《为什么精英都是时间控》                                 花费 03 小时 05 分钟\n- 2019-05-02 16:00:00 读完《一个人的巴黎》                                         花费 02 小时 24 分钟\n- 2019-05-02 20:00:00 读完《赌博默示录》\n- 2019-05-04 17:00:00 读完《赌博破戒录》\n- 2019-05-05 13:30:00 读完《赌博坠天录》\n- 2019-06-18 09:30:00 读完《紧闭的门扉》\n- 2019-06-21 19:55:00 读完《美国陷阱》\n- 2019-06-25 20:00:00 读完《进击的巨人》到 26 卷\n- 2019-06-27 22:00:00 读完《跃进》\n- 2019-07-02 20:22:00 读完《钢之炼金术师》第 N 遍\n\n总共 13 本\n\n## 时间\n\n2019 年第一周读书   12.31 - 01.06 32小时13分钟\n2019 年第二周读书   01.07 - 01.13 20小时55分钟\n2019 年第三周读书   01.14 - 01.20 16小时12分钟\n2019 年第四周读书   01.21 - 01.27 21小时41分钟\n2019 年第五周读书   01.28 - 02.03 19小时07分钟\n2019 年第六周读书   02.04 - 02.10 15小时04分钟\n2019 年第七周读书   02.11 - 02.17 18小时56分钟\n2019 年第八周读书   02.18 - 02.24 15小时01分钟\n2019 年第九周读书   02.25 - 03.03 10小时04分钟\n2019 年第十周读书   03.04 - 03.10 07小时01分钟（未完成）\n2019 年十一周读书   03.11 - 03.17 10小时48分钟\n2019 年十二周读书   03.18 - 03.24 06小时48分钟（未完成）\n2019 年十三周读书   03.25 - 03.31 11小时32分钟\n2019 年十四周读书   04.01 - 04.07 03小时37分钟（未完成）\n2019 年十五周读书   04.08 - 04.14 12小时22分钟\n2019 年十六周读书   04.15 - 04.21 03小时19分钟（未完成）\n2019 年十七周读书   04.22 - 04.28 07小时32分钟（未完成）\n2019-06-17 开始使用 kindle 所以无法记录阅读时间，以后只记录读过的书\n\n\n总共 232 小时 12 分钟\n\n\n## 想读的\n\n《人类简史》\n《悟空传》\n《未来简史》\n《神经浪游者》\n","slug":"2019-books","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ak000qp5gqoxvge2zmh"},{"title":"重新学 Java 系列：为什么要用 set、get 方法","date":"2019-01-03T16:52:13.000Z","_content":"\n\n> 这个是一个系列阅读，关于为什么重新学习，我在文章 [重新学 Java 系列：新系列、新开始](/2018/12/29/java-renew-why/)(https://wxnacy.com/2018/12/29/java-renew-why/) 中有提到，这个系列是在有 Java 基础的情况下，重新学习讨论一下以前可能忽略掉，或者没理解的知识细节，我想要永远在学习的路上。\n\n<!-- more --><!-- toc -->\n\n`set, get` 方法，是 Java 开发者最常见的两个方法，从初学的手敲，到各种 IED 的自动生成，说它是一个项目里最多的方法名也不为过。\n\n还记得几年前，一位开发 IOS 的同事问我，为什么你们 Java 非要用 `set, get` 方法操作变量，难道就不直接对变量进行赋值吗，就算不能赋值，还不能直接读取吗？我赶紧写了个类试了一下，哎，可以啊，那为啥呢，想了半天，不知道该怎么回答，憋了一句，这是规范。同事“哦”了一声，“好可怜的规范”。\n\n大家都很忙的，晚上还要加班呢，谁有空在去深究为什么，大家都这么写嘛，规范嘛。\n\n既然要重新学习，那自然要搞明白为什么。\n\n首先我们先来弄清楚变量的作用域，详情可以看我的这篇文章[重新学 Java 系列：public private protected friendly 的区别](/2018/12/30/java-renew-modification/)(https://wxnacy.com/2018/12/30/java-renew-modification/)\n\n我们用到最多的两个修饰符为 `public, private`，它们的区别在于\n\n- `public`: 所有地方都可以调用。\n- `private`: 只有当前类可以调用。\n\n通常当修饰符为 `private` 时才需要用到 `set, get` 方法，因为该修饰符不能像 `public` 一样被外部方法和修改，那为什么我们不直接用 `public` 修饰呢。\n\n真正的原因在于，作为一个类，我的变量想让你访问和修改，但我不希望你随便修改，而是按照我的方式来访问修改。\n\n比如\n\n```java\npublic void setName(String name) {\n    this.name = \"wxnacy_\" + name\n}\n\npublic String getAge() {\n    return this.age + 10\n}\n```\n\n两个方法都不是将原数据传入和传出，都经过了类的独特修改才进行的相应操作。\n\n所以平常我们觉得它们多余，只是很多时候用不到这个特点而已。\n\n","source":"_posts/2019-01-03-java-renew-why-set-get.md","raw":"---\ntitle: 重新学 Java 系列：为什么要用 set、get 方法\ntags:\n  - java\ndate: 2019-01-03 16:52:13\n---\n\n\n> 这个是一个系列阅读，关于为什么重新学习，我在文章 [重新学 Java 系列：新系列、新开始](/2018/12/29/java-renew-why/)(https://wxnacy.com/2018/12/29/java-renew-why/) 中有提到，这个系列是在有 Java 基础的情况下，重新学习讨论一下以前可能忽略掉，或者没理解的知识细节，我想要永远在学习的路上。\n\n<!-- more --><!-- toc -->\n\n`set, get` 方法，是 Java 开发者最常见的两个方法，从初学的手敲，到各种 IED 的自动生成，说它是一个项目里最多的方法名也不为过。\n\n还记得几年前，一位开发 IOS 的同事问我，为什么你们 Java 非要用 `set, get` 方法操作变量，难道就不直接对变量进行赋值吗，就算不能赋值，还不能直接读取吗？我赶紧写了个类试了一下，哎，可以啊，那为啥呢，想了半天，不知道该怎么回答，憋了一句，这是规范。同事“哦”了一声，“好可怜的规范”。\n\n大家都很忙的，晚上还要加班呢，谁有空在去深究为什么，大家都这么写嘛，规范嘛。\n\n既然要重新学习，那自然要搞明白为什么。\n\n首先我们先来弄清楚变量的作用域，详情可以看我的这篇文章[重新学 Java 系列：public private protected friendly 的区别](/2018/12/30/java-renew-modification/)(https://wxnacy.com/2018/12/30/java-renew-modification/)\n\n我们用到最多的两个修饰符为 `public, private`，它们的区别在于\n\n- `public`: 所有地方都可以调用。\n- `private`: 只有当前类可以调用。\n\n通常当修饰符为 `private` 时才需要用到 `set, get` 方法，因为该修饰符不能像 `public` 一样被外部方法和修改，那为什么我们不直接用 `public` 修饰呢。\n\n真正的原因在于，作为一个类，我的变量想让你访问和修改，但我不希望你随便修改，而是按照我的方式来访问修改。\n\n比如\n\n```java\npublic void setName(String name) {\n    this.name = \"wxnacy_\" + name\n}\n\npublic String getAge() {\n    return this.age + 10\n}\n```\n\n两个方法都不是将原数据传入和传出，都经过了类的独特修改才进行的相应操作。\n\n所以平常我们觉得它们多余，只是很多时候用不到这个特点而已。\n\n","slug":"java-renew-why-set-get","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ak100qr5gqohalwp37q"},{"title":"Linux ab 压力测试","date":"2019-01-06T10:06:23.000Z","_content":"\nab 是 Apache 附带的接口压力测试功能，非常简单易用。在测试服务端程序自身运行时长和跨区测试接口反馈时长时非常有用。\n\n<!-- more --><!-- toc -->\n## 下载\n\nCentOS\n\n```bash\n$ sudo yum install -y httpd\n```\n\nUbuntu\n\n```bash\n$ sudo apt install -y apache2-utils\n```\n\n## 使用\n\n```bash\n$ ab -c 10 -n 100 http://ip-api.com/json\n```\n\n**参数**\n\n- `-c`: 表示并发数\n- `-n`: 表示请求总数\n\n**结果**\n\n```bash\n> $ ab -c 10 -n 100 http://ip-api.com/json\nThis is ApacheBench, Version 2.3 <$Revision: 1807734 $>\nCopyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/\nLicensed to The Apache Software Foundation, http://www.apache.org/\n\nBenchmarking ip-api.com (be patient).....done\n\n\nServer Software:\nServer Hostname:        ip-api.com\nServer Port:            80\n\nDocument Path:          /json\nDocument Length:        306 bytes\n\nConcurrency Level:      10\nTime taken for tests:   6.184 seconds\nComplete requests:      100\nFailed requests:        0\nTotal transferred:      46200 bytes\nHTML transferred:       30600 bytes\nRequests per second:    16.17 [#/sec] (mean)\nTime per request:       618.369 [ms] (mean)\nTime per request:       61.837 [ms] (mean, across all concurrent requests)\nTransfer rate:          7.30 [Kbytes/sec] received\n\nConnection Times (ms)\n              min  mean[+/-sd] median   max\nConnect:        1    3   1.1      3       6\nProcessing:   528  572  58.4    550     889\nWaiting:      528  571  58.7    549     888\nTotal:        531  575  58.3    552     891\n\nPercentage of the requests served within a certain time (ms)\n  50%    552\n  66%    565\n  75%    574\n  80%    600\n  90%    635\n  95%    656\n  98%    890\n  99%    891\n 100%    891 (longest request)\n```\n\n**结果详解**\n\n```bash\nServer Software:        web服务器软件及版本\nServer Hostname:        请求的地址\nServer Port:            请求的端口\n\nDocument Path:          请求的页面路径\nDocument Length:        页面大小\n\nConcurrency Level:      并发数\nTime taken for tests:   测试总共花费的时间\nComplete requests:      完成的请求数\nFailed requests:        失败的请求数\nWrite errors:           写入错误\nTotal transferred:      总共传输字节数，包含http的头信息等\nHTML transferred:       html字节数，实际的页面传递字节数\nRequests per second:    每秒处理的请求数，服务器的吞吐量（重要）\nTime per request:       平均数，用户平均请求等待时间\nTime per request:       服务器平均处理时间\nTransfer rate:          平均传输速率（每秒收到的速率）\n```\n\n`Time per request` 是我们测试接口时长时非常关键的字段。\n\n- [linux下web压力测试工具ab使用及详解](http://blog.51cto.com/zhangdiandong/1166557)\n","source":"_posts/2019-01-06-linux-ab.md","raw":"---\ntitle: Linux ab 压力测试\ndate: 2019-01-06 10:06:23\ntags: [linux]\n---\n\nab 是 Apache 附带的接口压力测试功能，非常简单易用。在测试服务端程序自身运行时长和跨区测试接口反馈时长时非常有用。\n\n<!-- more --><!-- toc -->\n## 下载\n\nCentOS\n\n```bash\n$ sudo yum install -y httpd\n```\n\nUbuntu\n\n```bash\n$ sudo apt install -y apache2-utils\n```\n\n## 使用\n\n```bash\n$ ab -c 10 -n 100 http://ip-api.com/json\n```\n\n**参数**\n\n- `-c`: 表示并发数\n- `-n`: 表示请求总数\n\n**结果**\n\n```bash\n> $ ab -c 10 -n 100 http://ip-api.com/json\nThis is ApacheBench, Version 2.3 <$Revision: 1807734 $>\nCopyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/\nLicensed to The Apache Software Foundation, http://www.apache.org/\n\nBenchmarking ip-api.com (be patient).....done\n\n\nServer Software:\nServer Hostname:        ip-api.com\nServer Port:            80\n\nDocument Path:          /json\nDocument Length:        306 bytes\n\nConcurrency Level:      10\nTime taken for tests:   6.184 seconds\nComplete requests:      100\nFailed requests:        0\nTotal transferred:      46200 bytes\nHTML transferred:       30600 bytes\nRequests per second:    16.17 [#/sec] (mean)\nTime per request:       618.369 [ms] (mean)\nTime per request:       61.837 [ms] (mean, across all concurrent requests)\nTransfer rate:          7.30 [Kbytes/sec] received\n\nConnection Times (ms)\n              min  mean[+/-sd] median   max\nConnect:        1    3   1.1      3       6\nProcessing:   528  572  58.4    550     889\nWaiting:      528  571  58.7    549     888\nTotal:        531  575  58.3    552     891\n\nPercentage of the requests served within a certain time (ms)\n  50%    552\n  66%    565\n  75%    574\n  80%    600\n  90%    635\n  95%    656\n  98%    890\n  99%    891\n 100%    891 (longest request)\n```\n\n**结果详解**\n\n```bash\nServer Software:        web服务器软件及版本\nServer Hostname:        请求的地址\nServer Port:            请求的端口\n\nDocument Path:          请求的页面路径\nDocument Length:        页面大小\n\nConcurrency Level:      并发数\nTime taken for tests:   测试总共花费的时间\nComplete requests:      完成的请求数\nFailed requests:        失败的请求数\nWrite errors:           写入错误\nTotal transferred:      总共传输字节数，包含http的头信息等\nHTML transferred:       html字节数，实际的页面传递字节数\nRequests per second:    每秒处理的请求数，服务器的吞吐量（重要）\nTime per request:       平均数，用户平均请求等待时间\nTime per request:       服务器平均处理时间\nTransfer rate:          平均传输速率（每秒收到的速率）\n```\n\n`Time per request` 是我们测试接口时长时非常关键的字段。\n\n- [linux下web压力测试工具ab使用及详解](http://blog.51cto.com/zhangdiandong/1166557)\n","slug":"linux-ab","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ak300qt5gqox5gjkxu9"},{"title":"重新学 Java 系列：获取 jar 包中类名列表","date":"2019-01-08T14:55:53.000Z","_content":"\n> 这个是一个系列阅读，关于为什么重新学习，我在文章 [重新学 Java 系列：新系列、新开始](/2018/12/29/java-renew-why/)(https://wxnacy.com/2018/12/29/java-renew-why/) 中有提到，这个系列是在有 Java 基础的情况下，重新学习讨论一下以前可能忽略掉，或者没理解的知识细节，我想要永远在学习的路上。\n\n<!-- more --><!-- toc -->\n最近想要自己写一下 Vim 中 Java 代码的自动补全，涉及到 `import` 部分的自动导入，记录下关键步骤。\n\n想要做自动导入，首先需要知道依赖包中类名的列表，也就是需要反解出 jar 中 class 列表。\n\n这里需要 `java.util.jar` 包中的几个类，直接上代码\n\n```java\nimport java.util.ArrayList;\nimport java.util.Enumeration;\nimport java.util.List;\nimport java.util.jar.JarEntry;\nimport java.util.jar.JarFile;\n\n/**\n * Created by wxnacy\n */\npublic class ClassList {\n\n    public static void main(String args[]) {\n\n        List<String> list = new ArrayList<String>();\n        try {\n            JarFile jarFile = new JarFile(\"/Users/wxnacy/.m2/repository/com/alibaba/fastjson/1.1.34/fastjson-1.1.34.jar\");\n            Enumeration enu = jarFile.entries();\n            while (enu.hasMoreElements()) {\n                JarEntry jarEntry = (JarEntry) enu.nextElement();\n                String name = jarEntry.getName();\n                // 过滤出 class 文件\n                if (name.endsWith(\".class\") && name.indexOf(\"$\") == -1 ) {\n                    // 重新格式化文件名\n                    name = name.substring(0, name.indexOf(\".class\"));\n                    name = name.replaceAll(\"/\", \".\");\n                    System.out.println(name);\n                    list.add(name);\n                }\n\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        System.out.println(\"list length \" + list.size());\n\n    }\n\n\n}\n```\n\n\n\n","source":"_posts/2019-01-08-java-jar-class-list.md","raw":"---\ntitle: 重新学 Java 系列：获取 jar 包中类名列表\ntags:\n  - java\ndate: 2019-01-08 14:55:53\n---\n\n> 这个是一个系列阅读，关于为什么重新学习，我在文章 [重新学 Java 系列：新系列、新开始](/2018/12/29/java-renew-why/)(https://wxnacy.com/2018/12/29/java-renew-why/) 中有提到，这个系列是在有 Java 基础的情况下，重新学习讨论一下以前可能忽略掉，或者没理解的知识细节，我想要永远在学习的路上。\n\n<!-- more --><!-- toc -->\n最近想要自己写一下 Vim 中 Java 代码的自动补全，涉及到 `import` 部分的自动导入，记录下关键步骤。\n\n想要做自动导入，首先需要知道依赖包中类名的列表，也就是需要反解出 jar 中 class 列表。\n\n这里需要 `java.util.jar` 包中的几个类，直接上代码\n\n```java\nimport java.util.ArrayList;\nimport java.util.Enumeration;\nimport java.util.List;\nimport java.util.jar.JarEntry;\nimport java.util.jar.JarFile;\n\n/**\n * Created by wxnacy\n */\npublic class ClassList {\n\n    public static void main(String args[]) {\n\n        List<String> list = new ArrayList<String>();\n        try {\n            JarFile jarFile = new JarFile(\"/Users/wxnacy/.m2/repository/com/alibaba/fastjson/1.1.34/fastjson-1.1.34.jar\");\n            Enumeration enu = jarFile.entries();\n            while (enu.hasMoreElements()) {\n                JarEntry jarEntry = (JarEntry) enu.nextElement();\n                String name = jarEntry.getName();\n                // 过滤出 class 文件\n                if (name.endsWith(\".class\") && name.indexOf(\"$\") == -1 ) {\n                    // 重新格式化文件名\n                    name = name.substring(0, name.indexOf(\".class\"));\n                    name = name.replaceAll(\"/\", \".\");\n                    System.out.println(name);\n                    list.add(name);\n                }\n\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        System.out.println(\"list length \" + list.size());\n\n    }\n\n\n}\n```\n\n\n\n","slug":"java-jar-class-list","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ak400qv5gqoaqj1b2uz"},{"title":"重新学 Java 系列：简单解析 xml 文件的方式","date":"2019-01-09T14:19:07.000Z","_content":"\n> 这个是一个系列阅读，关于为什么重新学习，我在文章 [重新学 Java 系列：新系列、新开始](/2018/12/29/java-renew-why/)(https://wxnacy.com/2018/12/29/java-renew-why/) 中有提到，这个系列是在有 Java 基础的情况下，重新学习讨论一下以前可能忽略掉，或者没理解的知识细节，我想要永远在学习的路上。\n\n<!-- more --><!-- toc -->\n现在公认的最好的文本解析格式为 JSON，XML 已经是过时的标准，但是不可避免的一些历史悠久的项目还在用，比如微信的部分 api，比如 Maven 的 pom.xml 文件。\n\nJava 有很多解析 XML 格式的包，不过我想关注的是最简单的原生方式。\n\n优先准备一个文件 `Stocks.xml`\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<stocks>\n       <stock>\n              <symbol>Citibank</symbol>\n              <price>100</price>\n              <quantity>1000</quantity>\n       </stock>\n       <stock>\n              <symbol>Axis bank</symbol>\n              <price>90</price>\n              <quantity>2000</quantity>\n       </stock>\n</stocks>\n```\n\n**必备包**\n\n```java\nimport java.io.File;\nimport javax.xml.parsers.DocumentBuilder;\nimport javax.xml.parsers.DocumentBuilderFactory;\nimport org.w3c.dom.Document;\nimport org.w3c.dom.Element;\nimport org.w3c.dom.Node;\nimport org.w3c.dom.NodeList;\n```\n\n**解析 DOM**\n\n```java\nFile stocks = new File(\"Stocks.xml\");\nDocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();\nDocumentBuilder dBuilder = dbFactory.newDocumentBuilder();\nDocument doc = dBuilder.parse(stocks);\ndoc.getDocumentElement().normalize();\n```\n\n**获取根节点名**\n\n```java\ndoc.getDocumentElement().getNodeName();\n```\n\n**获取节点列表**\n\n```java\nNodeList nodes = doc.getElementsByTagName(\"stock\");\n```\n\n**遍历节点**\n\n```java\nfor (int i = 0; i < nodes.getLength(); i++) {\n    Node node = nodes.item(i);\n}\n```\n\n**获取原件内容**\n\n```java\nif (node.getNodeType() == Node.ELEMENT_NODE) {\n    Element element = (Element) node;\n    NodeList nodes = element.getElementsByTagName(\"symbol\").item(0).getChildNodes();\n    Node node = (Node) nodes.item(0);\n    System.out.println(node.getNodeValue());\n}\n```\n\n**完整代码**\n\n```java\nimport java.io.File;\nimport javax.xml.parsers.DocumentBuilder;\nimport javax.xml.parsers.DocumentBuilderFactory;\nimport org.w3c.dom.Document;\nimport org.w3c.dom.Element;\nimport org.w3c.dom.Node;\nimport org.w3c.dom.NodeList;\n\npublic class DOMExampleJava {\n\n    public static void main(String args[]) {\n        try {\n\n            File stocks = new File(\"Stocks.xml\");\n            DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();\n            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();\n            Document doc = dBuilder.parse(stocks);\n            doc.getDocumentElement().normalize();\n\n                System.out.println(\"root of xml file \" + doc.getDocumentElement().getNodeName());\n            NodeList nodes = doc.getElementsByTagName(\"stock\");\n            System.out.println(\"==========================\");\n\n            for (int i = 0; i < nodes.getLength(); i++) {\n                Node node = nodes.item(i);\n\n                if (node.getNodeType() == Node.ELEMENT_NODE) {\n                    Element element = (Element) node;\n                    System.out.println(\"Stock Symbol: \" + getValue(\"symbol\", element));\n                    System.out.println(\"Stock Price: \" + getValue(\"price\", element));\n                    System.out.println(\"Stock Quantity: \" + getValue(\"quantity\", element));\n                }\n            }\n        } catch (Exception ex) {\n            ex.printStackTrace();\n        }\n    }\n\n    private static String getValue(String tag, Element element) {\n        NodeList nodes = element.getElementsByTagName(tag).item(0).getChildNodes();\n        Node node = (Node) nodes.item(0);\n        return node.getNodeValue();\n    }\n}\n```\n\n- [How to Parse or Read XML File in Java >> XML Tutorial Example](https://javarevisited.blogspot.com/2011/12/parse-xml-file-in-java-example-tutorial.html)\n","source":"_posts/2019-01-09-java-renew-parse-xml.md","raw":"---\ntitle: 重新学 Java 系列：简单解析 xml 文件的方式\ndate: 2019-01-09 14:19:07\ntags: [java]\n---\n\n> 这个是一个系列阅读，关于为什么重新学习，我在文章 [重新学 Java 系列：新系列、新开始](/2018/12/29/java-renew-why/)(https://wxnacy.com/2018/12/29/java-renew-why/) 中有提到，这个系列是在有 Java 基础的情况下，重新学习讨论一下以前可能忽略掉，或者没理解的知识细节，我想要永远在学习的路上。\n\n<!-- more --><!-- toc -->\n现在公认的最好的文本解析格式为 JSON，XML 已经是过时的标准，但是不可避免的一些历史悠久的项目还在用，比如微信的部分 api，比如 Maven 的 pom.xml 文件。\n\nJava 有很多解析 XML 格式的包，不过我想关注的是最简单的原生方式。\n\n优先准备一个文件 `Stocks.xml`\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<stocks>\n       <stock>\n              <symbol>Citibank</symbol>\n              <price>100</price>\n              <quantity>1000</quantity>\n       </stock>\n       <stock>\n              <symbol>Axis bank</symbol>\n              <price>90</price>\n              <quantity>2000</quantity>\n       </stock>\n</stocks>\n```\n\n**必备包**\n\n```java\nimport java.io.File;\nimport javax.xml.parsers.DocumentBuilder;\nimport javax.xml.parsers.DocumentBuilderFactory;\nimport org.w3c.dom.Document;\nimport org.w3c.dom.Element;\nimport org.w3c.dom.Node;\nimport org.w3c.dom.NodeList;\n```\n\n**解析 DOM**\n\n```java\nFile stocks = new File(\"Stocks.xml\");\nDocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();\nDocumentBuilder dBuilder = dbFactory.newDocumentBuilder();\nDocument doc = dBuilder.parse(stocks);\ndoc.getDocumentElement().normalize();\n```\n\n**获取根节点名**\n\n```java\ndoc.getDocumentElement().getNodeName();\n```\n\n**获取节点列表**\n\n```java\nNodeList nodes = doc.getElementsByTagName(\"stock\");\n```\n\n**遍历节点**\n\n```java\nfor (int i = 0; i < nodes.getLength(); i++) {\n    Node node = nodes.item(i);\n}\n```\n\n**获取原件内容**\n\n```java\nif (node.getNodeType() == Node.ELEMENT_NODE) {\n    Element element = (Element) node;\n    NodeList nodes = element.getElementsByTagName(\"symbol\").item(0).getChildNodes();\n    Node node = (Node) nodes.item(0);\n    System.out.println(node.getNodeValue());\n}\n```\n\n**完整代码**\n\n```java\nimport java.io.File;\nimport javax.xml.parsers.DocumentBuilder;\nimport javax.xml.parsers.DocumentBuilderFactory;\nimport org.w3c.dom.Document;\nimport org.w3c.dom.Element;\nimport org.w3c.dom.Node;\nimport org.w3c.dom.NodeList;\n\npublic class DOMExampleJava {\n\n    public static void main(String args[]) {\n        try {\n\n            File stocks = new File(\"Stocks.xml\");\n            DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();\n            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();\n            Document doc = dBuilder.parse(stocks);\n            doc.getDocumentElement().normalize();\n\n                System.out.println(\"root of xml file \" + doc.getDocumentElement().getNodeName());\n            NodeList nodes = doc.getElementsByTagName(\"stock\");\n            System.out.println(\"==========================\");\n\n            for (int i = 0; i < nodes.getLength(); i++) {\n                Node node = nodes.item(i);\n\n                if (node.getNodeType() == Node.ELEMENT_NODE) {\n                    Element element = (Element) node;\n                    System.out.println(\"Stock Symbol: \" + getValue(\"symbol\", element));\n                    System.out.println(\"Stock Price: \" + getValue(\"price\", element));\n                    System.out.println(\"Stock Quantity: \" + getValue(\"quantity\", element));\n                }\n            }\n        } catch (Exception ex) {\n            ex.printStackTrace();\n        }\n    }\n\n    private static String getValue(String tag, Element element) {\n        NodeList nodes = element.getElementsByTagName(tag).item(0).getChildNodes();\n        Node node = (Node) nodes.item(0);\n        return node.getNodeValue();\n    }\n}\n```\n\n- [How to Parse or Read XML File in Java >> XML Tutorial Example](https://javarevisited.blogspot.com/2011/12/parse-xml-file-in-java-example-tutorial.html)\n","slug":"java-renew-parse-xml","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ak500qx5gqo3gbi2noj"},{"title":"重新学 Java 系列：Maven 下载的 jar 包去哪了","date":"2019-01-11T18:18:45.000Z","_content":"\n\n> 这个是一个系列阅读，关于为什么重新学习，我在文章 [重新学 Java 系列：新系列、新开始](/2018/12/29/java-renew-why/)(https://wxnacy.com/2018/12/29/java-renew-why/) 中有提到，这个系列是在有 Java 基础的情况下，重新学习讨论一下以前可能忽略掉，或者没理解的知识细节，我想要永远在学习的路上。\n\n<!-- more --><!-- toc -->\n## 本地仓库\n在 Maven 项目中，`pom.xml` 文件中的 `dependencies` 节点为项目需要的数据包，那编\n译运行时 jar 包都下载到哪里呢？\n\nMaven 有本地的仓库，地址默认为 `~/.m2/repository`\n\n进入目录会发现，本地所以项目的依赖包都以包名加版本号的形式存放在里边，例如\n\n```bash\n$ cd ~/.m2/repository/org/jdom/jdom/1.1\n$ tree\n.\n├── _remote.repositories\n├── jdom-1.1.jar\n├── jdom-1.1.jar.sha1\n├── jdom-1.1.pom\n└── jdom-1.1.pom.sha1\n\n0 directories, 5 files\n```\n\n本地仓库的位置可以通过配置文件修改\n\n```bash\n$ vim /usr/local/Cellar/maven/3.6.0/libexec/conf/settings.xml\n```\n\n```bash\n<localRepository>/path/to/local/repo</localRepository>\n```\n\n## 安装本地项目到仓库\n\n假如我们写完一个项目，希望它可以像其他 jar 包一样，可以在其他项目中使用，首先我们可以先安装到本地仓库。\n\n根目录下执行安装命令即可\n\n```bash\n$ mvn install\n```\n\n","source":"_posts/2019-01-11-java-renew-maven-where-jar.md","raw":"---\ntitle: 重新学 Java 系列：Maven 下载的 jar 包去哪了\ntags:\n  - java\ndate: 2019-01-11 18:18:45\n---\n\n\n> 这个是一个系列阅读，关于为什么重新学习，我在文章 [重新学 Java 系列：新系列、新开始](/2018/12/29/java-renew-why/)(https://wxnacy.com/2018/12/29/java-renew-why/) 中有提到，这个系列是在有 Java 基础的情况下，重新学习讨论一下以前可能忽略掉，或者没理解的知识细节，我想要永远在学习的路上。\n\n<!-- more --><!-- toc -->\n## 本地仓库\n在 Maven 项目中，`pom.xml` 文件中的 `dependencies` 节点为项目需要的数据包，那编\n译运行时 jar 包都下载到哪里呢？\n\nMaven 有本地的仓库，地址默认为 `~/.m2/repository`\n\n进入目录会发现，本地所以项目的依赖包都以包名加版本号的形式存放在里边，例如\n\n```bash\n$ cd ~/.m2/repository/org/jdom/jdom/1.1\n$ tree\n.\n├── _remote.repositories\n├── jdom-1.1.jar\n├── jdom-1.1.jar.sha1\n├── jdom-1.1.pom\n└── jdom-1.1.pom.sha1\n\n0 directories, 5 files\n```\n\n本地仓库的位置可以通过配置文件修改\n\n```bash\n$ vim /usr/local/Cellar/maven/3.6.0/libexec/conf/settings.xml\n```\n\n```bash\n<localRepository>/path/to/local/repo</localRepository>\n```\n\n## 安装本地项目到仓库\n\n假如我们写完一个项目，希望它可以像其他 jar 包一样，可以在其他项目中使用，首先我们可以先安装到本地仓库。\n\n根目录下执行安装命令即可\n\n```bash\n$ mvn install\n```\n\n","slug":"java-renew-maven-where-jar","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ak600qz5gqobld0ctau"},{"title":"重新学 Java 系列：Maven 快速入门","date":"2019-01-10T10:24:40.000Z","_content":"\n> 这个是一个系列阅读，关于为什么重新学习，我在文章 [重新学 Java 系列：新系列、新开始](/2018/12/29/java-renew-why/)(https://wxnacy.com/2018/12/29/java-renew-why/) 中有提到，这个系列是在有 Java 基础的情况下，重新学习讨论一下以前可能忽略掉，或者没理解的知识细节，我想要永远在学习的路上。\n\n<!-- more -->\n<!-- toc -->\n\n如果早几年，可能还会有公司不用 Maven 管理项目，还会有人不知道 Maven。但是现在如果你还不知道 Maven，那你跟门外汉差不多了。\n\nMaven 是 Java 最好的项目管理软件，就像 npm 对于 Node 一样重要。\n\n我们先来快速了解下，如何使用 Maven 快速创建一个项目。\n\n## 下载\n\n**MacOS**\n\n```bash\n$ brew install Maven\n```\n\n***需要：Java >= 1.7***\n\n安装好后查看版本\n\n```bash\n$ mvn --version\nApache Maven 3.6.0 (97c98ec64a1fdfee7767ce5ffb20918da4f719f3; 2018-10-25T02:41:47+08:00)\nMaven home: /usr/local/Cellar/maven/3.6.0/libexec\nJava version: 11.0.1, vendor: Oracle Corporation, runtime: /Library/Java/JavaVirtualMachines/jdk-11.0.1.jdk/Contents/Home\nDefault locale: zh_US_#Hans, platform encoding: UTF-8\nOS name: \"mac os x\", version: \"10.14.2\", arch: \"x86_64\", family: \"mac\"\n```\n\n## 创建项目\n\n```bash\n$ mvn archetype:generate \\\n    -DgroupId=com.wxnacy.app \\\n    -DartifactId=test-app \\\n    -DarchetypeArtifactId=maven-archetype-quickstart \\\n    -DarchetypeVersion=1.4 \\\n    -DinteractiveMode=false \\\n```\n\n如果你的电脑第一次运行该命令，可能需要一些时间，因为要下载一些必要包。\n\n创建完成后，会出现一个目录 `test-app`，即为项目目录。\n\n进入目录\n\n```bash\n$ cd test-app\n```\n\n**查看项目结构**\n\n```bash\n$ tree\n.\n├── pom.xml\n└── src\n    ├── main\n    │   └── java\n    │       └── com\n    │           └── wxnacy\n    │               └── app\n    │                   └── App.java\n    └── test\n        └── java\n            └── com\n                └── wxnacy\n                    └── app\n                        └── AppTest.java\n\n11 directories, 3 files\n```\n\n`src/main/java` 目录中存放源代码，`src/test/java` 目录中存在测试代码，`pom.xml` 文件为项目数据模型。具体内容如下：\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n  <modelVersion>4.0.0</modelVersion>\n\n  <groupId>com.wxnacy.app</groupId>\n  <artifactId>test-app</artifactId>\n  <version>1.0-SNAPSHOT</version>\n\n  <name>test-app</name>\n  <!-- FIXME change it to the project's website -->\n  <url>http://www.example.com</url>\n\n  <properties>\n    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n    <maven.compiler.source>1.7</maven.compiler.source>\n    <maven.compiler.target>1.7</maven.compiler.target>\n  </properties>\n\n  <dependencies>\n    <dependency>\n      <groupId>junit</groupId>\n      <artifactId>junit</artifactId>\n      <version>4.11</version>\n      <scope>test</scope>\n    </dependency>\n  </dependencies>\n\n  <build>\n    <pluginManagement><!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) -->\n      <plugins>\n        <!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle -->\n        <plugin>\n          <artifactId>maven-clean-plugin</artifactId>\n          <version>3.1.0</version>\n        </plugin>\n        <!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging -->\n        <plugin>\n          <artifactId>maven-resources-plugin</artifactId>\n          <version>3.0.2</version>\n        </plugin>\n        <plugin>\n          <artifactId>maven-compiler-plugin</artifactId>\n          <version>3.8.0</version>\n        </plugin>\n        <plugin>\n          <artifactId>maven-surefire-plugin</artifactId>\n          <version>2.22.1</version>\n        </plugin>\n        <plugin>\n          <artifactId>maven-jar-plugin</artifactId>\n          <version>3.0.2</version>\n        </plugin>\n        <plugin>\n          <artifactId>maven-install-plugin</artifactId>\n          <version>2.5.2</version>\n        </plugin>\n        <plugin>\n          <artifactId>maven-deploy-plugin</artifactId>\n          <version>2.8.2</version>\n        </plugin>\n        <!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle -->\n        <plugin>\n          <artifactId>maven-site-plugin</artifactId>\n          <version>3.7.1</version>\n        </plugin>\n        <plugin>\n          <artifactId>maven-project-info-reports-plugin</artifactId>\n          <version>3.0.0</version>\n        </plugin>\n      </plugins>\n    </pluginManagement>\n  </build>\n</project>\n```\n\n内容很多，其实很简单，默认状态下，`pluginManagement` 节点中的内容为默认插件，已经集成在父 pom 中，所以删除掉也不影响。`dependencies` 节点为项目需要的数据包。\n\n## 运行\n\n**编译**\n\n```bash\n$ mvn compile\n```\n\n随后根目录下会生成 `target` 文件夹，class 文件都存放在 `target/classes` 文件夹中\n\n**运行**\n\n```bash\n$ java -cp target/classes com.wxnacy.app.App\nHello World\n```\n\n**打包**\n\n```bash\n$ mvn package\n```\n\n随后会在 `target` 文件夹中生成 `test-app-1.0-SNAPSHOT.jar` 文件。\n\n**运行**\n\n```bash\n$ java -cp target/test-app-1.0-SNAPSHOT.jar com.wxnacy.app.App\nHello World\n```\n\n- [Maven in 5 Minutes](https://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)\n","source":"_posts/2019-01-10-java-renew-maven-start.md","raw":"---\ntitle: 重新学 Java 系列：Maven 快速入门\ntags:\n  - java\ndate: 2019-01-10 10:24:40\n---\n\n> 这个是一个系列阅读，关于为什么重新学习，我在文章 [重新学 Java 系列：新系列、新开始](/2018/12/29/java-renew-why/)(https://wxnacy.com/2018/12/29/java-renew-why/) 中有提到，这个系列是在有 Java 基础的情况下，重新学习讨论一下以前可能忽略掉，或者没理解的知识细节，我想要永远在学习的路上。\n\n<!-- more -->\n<!-- toc -->\n\n如果早几年，可能还会有公司不用 Maven 管理项目，还会有人不知道 Maven。但是现在如果你还不知道 Maven，那你跟门外汉差不多了。\n\nMaven 是 Java 最好的项目管理软件，就像 npm 对于 Node 一样重要。\n\n我们先来快速了解下，如何使用 Maven 快速创建一个项目。\n\n## 下载\n\n**MacOS**\n\n```bash\n$ brew install Maven\n```\n\n***需要：Java >= 1.7***\n\n安装好后查看版本\n\n```bash\n$ mvn --version\nApache Maven 3.6.0 (97c98ec64a1fdfee7767ce5ffb20918da4f719f3; 2018-10-25T02:41:47+08:00)\nMaven home: /usr/local/Cellar/maven/3.6.0/libexec\nJava version: 11.0.1, vendor: Oracle Corporation, runtime: /Library/Java/JavaVirtualMachines/jdk-11.0.1.jdk/Contents/Home\nDefault locale: zh_US_#Hans, platform encoding: UTF-8\nOS name: \"mac os x\", version: \"10.14.2\", arch: \"x86_64\", family: \"mac\"\n```\n\n## 创建项目\n\n```bash\n$ mvn archetype:generate \\\n    -DgroupId=com.wxnacy.app \\\n    -DartifactId=test-app \\\n    -DarchetypeArtifactId=maven-archetype-quickstart \\\n    -DarchetypeVersion=1.4 \\\n    -DinteractiveMode=false \\\n```\n\n如果你的电脑第一次运行该命令，可能需要一些时间，因为要下载一些必要包。\n\n创建完成后，会出现一个目录 `test-app`，即为项目目录。\n\n进入目录\n\n```bash\n$ cd test-app\n```\n\n**查看项目结构**\n\n```bash\n$ tree\n.\n├── pom.xml\n└── src\n    ├── main\n    │   └── java\n    │       └── com\n    │           └── wxnacy\n    │               └── app\n    │                   └── App.java\n    └── test\n        └── java\n            └── com\n                └── wxnacy\n                    └── app\n                        └── AppTest.java\n\n11 directories, 3 files\n```\n\n`src/main/java` 目录中存放源代码，`src/test/java` 目录中存在测试代码，`pom.xml` 文件为项目数据模型。具体内容如下：\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n  <modelVersion>4.0.0</modelVersion>\n\n  <groupId>com.wxnacy.app</groupId>\n  <artifactId>test-app</artifactId>\n  <version>1.0-SNAPSHOT</version>\n\n  <name>test-app</name>\n  <!-- FIXME change it to the project's website -->\n  <url>http://www.example.com</url>\n\n  <properties>\n    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n    <maven.compiler.source>1.7</maven.compiler.source>\n    <maven.compiler.target>1.7</maven.compiler.target>\n  </properties>\n\n  <dependencies>\n    <dependency>\n      <groupId>junit</groupId>\n      <artifactId>junit</artifactId>\n      <version>4.11</version>\n      <scope>test</scope>\n    </dependency>\n  </dependencies>\n\n  <build>\n    <pluginManagement><!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) -->\n      <plugins>\n        <!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle -->\n        <plugin>\n          <artifactId>maven-clean-plugin</artifactId>\n          <version>3.1.0</version>\n        </plugin>\n        <!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging -->\n        <plugin>\n          <artifactId>maven-resources-plugin</artifactId>\n          <version>3.0.2</version>\n        </plugin>\n        <plugin>\n          <artifactId>maven-compiler-plugin</artifactId>\n          <version>3.8.0</version>\n        </plugin>\n        <plugin>\n          <artifactId>maven-surefire-plugin</artifactId>\n          <version>2.22.1</version>\n        </plugin>\n        <plugin>\n          <artifactId>maven-jar-plugin</artifactId>\n          <version>3.0.2</version>\n        </plugin>\n        <plugin>\n          <artifactId>maven-install-plugin</artifactId>\n          <version>2.5.2</version>\n        </plugin>\n        <plugin>\n          <artifactId>maven-deploy-plugin</artifactId>\n          <version>2.8.2</version>\n        </plugin>\n        <!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle -->\n        <plugin>\n          <artifactId>maven-site-plugin</artifactId>\n          <version>3.7.1</version>\n        </plugin>\n        <plugin>\n          <artifactId>maven-project-info-reports-plugin</artifactId>\n          <version>3.0.0</version>\n        </plugin>\n      </plugins>\n    </pluginManagement>\n  </build>\n</project>\n```\n\n内容很多，其实很简单，默认状态下，`pluginManagement` 节点中的内容为默认插件，已经集成在父 pom 中，所以删除掉也不影响。`dependencies` 节点为项目需要的数据包。\n\n## 运行\n\n**编译**\n\n```bash\n$ mvn compile\n```\n\n随后根目录下会生成 `target` 文件夹，class 文件都存放在 `target/classes` 文件夹中\n\n**运行**\n\n```bash\n$ java -cp target/classes com.wxnacy.app.App\nHello World\n```\n\n**打包**\n\n```bash\n$ mvn package\n```\n\n随后会在 `target` 文件夹中生成 `test-app-1.0-SNAPSHOT.jar` 文件。\n\n**运行**\n\n```bash\n$ java -cp target/test-app-1.0-SNAPSHOT.jar com.wxnacy.app.App\nHello World\n```\n\n- [Maven in 5 Minutes](https://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)\n","slug":"java-renew-maven-start","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ak800r15gqoe7bmxso7"},{"title":"Linux ab 使用 localhost 报错","date":"2019-01-14T15:34:36.000Z","_content":"\n使用 ab 测试本地接口时报错\n\n<!-- more --><!-- toc -->\n```bash\nThis is ApacheBench, Version 2.3 <$Revision: 1826891 $>\nCopyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/\nLicensed to The Apache Software Foundation, http://www.apache.org/\n\nBenchmarking localhost (be patient)...\nTest aborted after 10 failures\n\napr_socket_connect(): Invalid argument (22)\n```\n\n原因在于它无法识别 `localhost` 地址替换为 `127.0.0.1` 即可\n","source":"_posts/2019-01-14-ab-lh-error.md","raw":"---\ntitle: Linux ab 使用 localhost 报错\ndate: 2019-01-14 15:34:36\ntags: [linux]\n---\n\n使用 ab 测试本地接口时报错\n\n<!-- more --><!-- toc -->\n```bash\nThis is ApacheBench, Version 2.3 <$Revision: 1826891 $>\nCopyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/\nLicensed to The Apache Software Foundation, http://www.apache.org/\n\nBenchmarking localhost (be patient)...\nTest aborted after 10 failures\n\napr_socket_connect(): Invalid argument (22)\n```\n\n原因在于它无法识别 `localhost` 地址替换为 `127.0.0.1` 即可\n","slug":"ab-lh-error","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ak900r35gqoozbsa582"},{"title":"Golang 图片压缩","date":"2019-01-15T17:22:56.000Z","_content":"\nGolang 图片压缩可以直接使用第三方包 [resize](https://github.com/nfnt/resize)\n\n<!-- more --><!-- toc -->\n\n## 安装\n\n```bash\n$ go get github.com/nfnt/resize\n```\n\n## 使用\n\n**导入**\n\n```go\nimport \"github.com/nfnt/resize\"\n```\n\n**语法**\n\n`resize` 有两个方法 `Resize` `Thumbnail`\n\n```go\nresize.Resize(width, height uint, img image.Image, interp resize.InterpolationFunction) image.Image\n// resize.Resize 使用插值函数interp创建具有新尺寸（宽度，高度）的缩放图像。 如果宽度或高度设置为0，则将其设置为保留宽高比值。\n```\n\n```go\nresize.Thumbnail(maxWidth, maxHeight uint, img image.Image, interp resize.InterpolationFunction) image.Image\n// resize.Thumbnail 缩小图像，将其纵横比保持为最大尺寸（maxWidth，maxHeight）。 如果原始尺寸小于提供的尺寸，它将返回原始图像。\n```\n\n**简单使用**\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n    \"github.com/nfnt/resize\"\n    \"image/png\"\n    \"os\"\n    \"log\"\n)\n\nfunc main() {\n    file_path := \"/Users/wxnacy/Downloads/react-app1.png\"\n\n    fmt.Println(\"Hello World\")\n    file, err := os.Open(file_path)\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\t// decode jpeg into image.Image\n\timg, err := png.Decode(file)\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\tfile.Close()\n\n\t// resize to width 1000 using Lanczos resampling\n\t// and preserve aspect ratio\n    m := resize.Resize(800, 0, img, resize.NearestNeighbor)\n\n\tout, err := os.Create(\"react.NearestNeighbor.png\")\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\tdefer out.Close()\n\n\t// write new image to file\n\tpng.Encode(out, m)\n}\n```\n\n这里边需要关注的是参数 `resize.InterpolationFunction`，它有几个值\n- NearestNeighbor: [Nearest-neighbor interpolation](https://en.wikipedia.org/wiki/Nearest-neighbor_interpolation)\n- [Bilinear: Bilinear interpolation](https://en.wikipedia.org/wiki/Bilinear_interpolation)\n- Bicubic: [Bicubic interpolation](https://en.wikipedia.org/wiki/Bicubic_interpolation)\n- MitchellNetravali: [Mitchell-Netravali interpolation](https://dl.acm.org/citation.cfm?id=378514)\n- Lanczos2: [Lanczos resampling](https://en.wikipedia.org/wiki/Lanczos_resampling) with a=2\n- Lanczos3: [Lanczos resampling](https://en.wikipedia.org/wiki/Lanczos_resampling) with a=3\n\n这个压缩方式的展示效果可以从这里看到 https://github.com/nfnt/resize#downsizing-samples\n\n我挨个点连接进行，发现实在不想去纠结他们的具体原理，我只想比较压缩后的文件大小\n\n我依次按照集中格式进行了压缩，我们对比下文件大小\n\n```bash\n-rw-r--r--@  1 wxnacy  staff  64633 Jan 18 18:01 react-app1.png\n-rw-r--r--@  1 wxnacy  staff  19857 Jan 19 17:13 react.NearestNeighbor.png\n-rw-r--r--   1 wxnacy  staff  23336 Jan 19 17:12 react.Bilinear.png\n-rw-r--r--   1 wxnacy  staff  25966 Jan 19 17:12 react.MitchellNetravali.png\n-rw-r--r--@  1 wxnacy  staff  27241 Jan 19 17:12 react.Lanczos2.png\n-rw-r--r--   1 wxnacy  staff  27356 Jan 19 17:12 react.Bicubic.png\n-rw-r--r--@  1 wxnacy  staff  31222 Jan 19 17:09 react.Lanczos3.png\n```\n\n经过对比，`Lanczos3` 算法文件最大，图片最清晰，`NearestNeighbor` 最差\n\nok，这样我们就知道了，如果你追求清晰的或者文件大小该选什么类型了\n","source":"_posts/2019-01-15-go-nfnt-resize.md","raw":"---\ntitle: Golang 图片压缩\ndate: 2019-01-15 17:22:56\ntags: [go]\n---\n\nGolang 图片压缩可以直接使用第三方包 [resize](https://github.com/nfnt/resize)\n\n<!-- more --><!-- toc -->\n\n## 安装\n\n```bash\n$ go get github.com/nfnt/resize\n```\n\n## 使用\n\n**导入**\n\n```go\nimport \"github.com/nfnt/resize\"\n```\n\n**语法**\n\n`resize` 有两个方法 `Resize` `Thumbnail`\n\n```go\nresize.Resize(width, height uint, img image.Image, interp resize.InterpolationFunction) image.Image\n// resize.Resize 使用插值函数interp创建具有新尺寸（宽度，高度）的缩放图像。 如果宽度或高度设置为0，则将其设置为保留宽高比值。\n```\n\n```go\nresize.Thumbnail(maxWidth, maxHeight uint, img image.Image, interp resize.InterpolationFunction) image.Image\n// resize.Thumbnail 缩小图像，将其纵横比保持为最大尺寸（maxWidth，maxHeight）。 如果原始尺寸小于提供的尺寸，它将返回原始图像。\n```\n\n**简单使用**\n\n```go\npackage main\n\nimport (\n    \"fmt\"\n    \"github.com/nfnt/resize\"\n    \"image/png\"\n    \"os\"\n    \"log\"\n)\n\nfunc main() {\n    file_path := \"/Users/wxnacy/Downloads/react-app1.png\"\n\n    fmt.Println(\"Hello World\")\n    file, err := os.Open(file_path)\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\t// decode jpeg into image.Image\n\timg, err := png.Decode(file)\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\tfile.Close()\n\n\t// resize to width 1000 using Lanczos resampling\n\t// and preserve aspect ratio\n    m := resize.Resize(800, 0, img, resize.NearestNeighbor)\n\n\tout, err := os.Create(\"react.NearestNeighbor.png\")\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\tdefer out.Close()\n\n\t// write new image to file\n\tpng.Encode(out, m)\n}\n```\n\n这里边需要关注的是参数 `resize.InterpolationFunction`，它有几个值\n- NearestNeighbor: [Nearest-neighbor interpolation](https://en.wikipedia.org/wiki/Nearest-neighbor_interpolation)\n- [Bilinear: Bilinear interpolation](https://en.wikipedia.org/wiki/Bilinear_interpolation)\n- Bicubic: [Bicubic interpolation](https://en.wikipedia.org/wiki/Bicubic_interpolation)\n- MitchellNetravali: [Mitchell-Netravali interpolation](https://dl.acm.org/citation.cfm?id=378514)\n- Lanczos2: [Lanczos resampling](https://en.wikipedia.org/wiki/Lanczos_resampling) with a=2\n- Lanczos3: [Lanczos resampling](https://en.wikipedia.org/wiki/Lanczos_resampling) with a=3\n\n这个压缩方式的展示效果可以从这里看到 https://github.com/nfnt/resize#downsizing-samples\n\n我挨个点连接进行，发现实在不想去纠结他们的具体原理，我只想比较压缩后的文件大小\n\n我依次按照集中格式进行了压缩，我们对比下文件大小\n\n```bash\n-rw-r--r--@  1 wxnacy  staff  64633 Jan 18 18:01 react-app1.png\n-rw-r--r--@  1 wxnacy  staff  19857 Jan 19 17:13 react.NearestNeighbor.png\n-rw-r--r--   1 wxnacy  staff  23336 Jan 19 17:12 react.Bilinear.png\n-rw-r--r--   1 wxnacy  staff  25966 Jan 19 17:12 react.MitchellNetravali.png\n-rw-r--r--@  1 wxnacy  staff  27241 Jan 19 17:12 react.Lanczos2.png\n-rw-r--r--   1 wxnacy  staff  27356 Jan 19 17:12 react.Bicubic.png\n-rw-r--r--@  1 wxnacy  staff  31222 Jan 19 17:09 react.Lanczos3.png\n```\n\n经过对比，`Lanczos3` 算法文件最大，图片最清晰，`NearestNeighbor` 最差\n\nok，这样我们就知道了，如果你追求清晰的或者文件大小该选什么类型了\n","slug":"go-nfnt-resize","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2akb00r55gqot3ywpurh"},{"title":"React 通过入门项目 create-react-app 了解其语法","date":"2019-01-18T14:26:20.000Z","_content":"\n[create-react-app](https://github.com/facebook/create-react-app) 是 React 的入门项目，通过它可以窥见 React 项目的简单构成和基本语法。\n\n<!-- more --><!-- toc -->\n\n## 安装\n\n三种方法\n\n```bash\n$ npx create-react-app my-app\n```\n\nnpx 来自 npm 5.2+ 或更高版本自带软件。\n\n```bash\n$ npm init react-app my-app\n```\n\n```bash\n$ yarn create react-app my-app\n```\n\n**启动**\n\n```bash\n$ cd my-app\n$ yarn start\n```\n\n随后会启动 `3000` 端口服务，并自动在浏览器中打开地址 `http://localhost:300`，如图\n\n![react-app](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/blog/react.png)\n\n为什么使用 `yarn start` 命令可以启动，原因在于 `package.json` 中的关键代码\n\n```json\n\"scripts\": {\n    \"start\": \"react-scripts start\",\n    \"build\": \"react-scripts build\",\n    \"test\": \"react-scripts test\",\n    \"eject\": \"react-scripts eject\"\n}\n```\n\n不管是 `npm` 还是 `yarn`，相应的命令都会在 `scripts` 字段中转换为相应的 `react-scripts` 命令\n\n## 启动流程\n\n以下为 React 项目简单结构\n\n```bash\nmy-app\n├── README.md\n├── node_modules\n├── package.json\n├── .gitignore\n├── public\n│   ├── favicon.ico\n│   ├── index.html\n│   └── manifest.json\n└── src\n    ├── App.css\n    ├── App.js\n    ├── App.test.js\n    ├── index.css\n    ├── index.js\n    ├── logo.svg\n    └── serviceWorker.js\n```\n\n通过项目结构，我们慢慢了解下，React 的启动流程。\n\n**启动程序**\n\n首先这是一个 Node 项目，所以默认的启动程序为 `src/index.js` 文件。\n\n通过文件中的关键代码\n\n```java\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n```\n\n可以看到，`ReactDOM` 将 `<App />` 渲染到 `document.getElementById('root')` 中，`root` 是从 `public/index.html` 获取的。\n\n**渲染程序**\n\n查看 `App.js` 文件\n\n```java\nimport React, { Component } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          <p>\n            Edit <code>src/App.js</code> and save to reload.\n          </p>\n          <a\n            className=\"App-link\"\n            href=\"https://reactjs.org\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Learn React\n          </a>\n        </header>\n      </div>\n    );\n  }\n}\n\nexport default App;\n```\n\n`class App` 是渲染页面组件，在类中可以通过各种内置或自己写的 JS 方法，对页面进行处理，并通过 `render()` 方法渲染页面，在这个方法内返回的是由 JSX 语法编写的代码，该语法我认为就是由 `js/html/css` 组合而成，所以 React 也是经常被认为是大逆不道将 三种语言写在同一个文件里。\n\n## 构建静态页面\n\n虽然是 Node 项目，但是作为前端页面，我们总要将它构建成静态页面，才能发布到服务中。\n\n```bash\n$ yarn build\n```\n\n运行后，会在根目录生成 `build` 文件夹，构建后的静态内容都在其中，结构如下\n\n```bash\nbuild\n├── asset-manifest.json\n├── favicon.ico\n├── index.html\n├── manifest.json\n├── precache-manifest.3351d163fa29e67b0b41ea8c711c59df.js\n├── service-worker.js\n└── static\n    ├── css\n    │   ├── main.27a53a32.chunk.css\n    │   └── main.27a53a32.chunk.css.map\n    ├── js\n    │   ├── 1.fa92c112.chunk.js\n    │   ├── 1.fa92c112.chunk.js.map\n    │   ├── main.881217d8.chunk.js\n    │   ├── main.881217d8.chunk.js.map\n    │   ├── runtime~main.229c360f.js\n    │   └── runtime~main.229c360f.js.map\n    └── media\n        └── logo.5d5d9eef.svg\n\n4 directories, 15 files\n```\n\n页面入口为 `index.html`，静态文件在 `static` 文件夹中。\n\n不过整个文件夹为什么只有一个 `index.html`，如果有多个页面，它可以完成任务吗？\n\n## 为什么入口只有 index.html\n\n首先回答上面那个问题，React 项目只需要一个 `index.html` 就可以访问所有页面。\n\n为什么呢？要回答这个问题需要看下源码。\n\n上边我们说到 `index.js` 加载了 `App.js` 渲染的页面，那么我们可以写多个类似 `App.js` 的“页面”，而 `index.js` 中可以通过访问地址来决定渲染那个页面。\n\n当然这需要借助其他依赖包，不在我们本次讨论返回内。\n","source":"_posts/2019-01-18-create-react-app.md","raw":"---\ntitle: React 通过入门项目 create-react-app 了解其语法\ndate: 2019-01-18 14:26:20\ntags: [react]\n---\n\n[create-react-app](https://github.com/facebook/create-react-app) 是 React 的入门项目，通过它可以窥见 React 项目的简单构成和基本语法。\n\n<!-- more --><!-- toc -->\n\n## 安装\n\n三种方法\n\n```bash\n$ npx create-react-app my-app\n```\n\nnpx 来自 npm 5.2+ 或更高版本自带软件。\n\n```bash\n$ npm init react-app my-app\n```\n\n```bash\n$ yarn create react-app my-app\n```\n\n**启动**\n\n```bash\n$ cd my-app\n$ yarn start\n```\n\n随后会启动 `3000` 端口服务，并自动在浏览器中打开地址 `http://localhost:300`，如图\n\n![react-app](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/blog/react.png)\n\n为什么使用 `yarn start` 命令可以启动，原因在于 `package.json` 中的关键代码\n\n```json\n\"scripts\": {\n    \"start\": \"react-scripts start\",\n    \"build\": \"react-scripts build\",\n    \"test\": \"react-scripts test\",\n    \"eject\": \"react-scripts eject\"\n}\n```\n\n不管是 `npm` 还是 `yarn`，相应的命令都会在 `scripts` 字段中转换为相应的 `react-scripts` 命令\n\n## 启动流程\n\n以下为 React 项目简单结构\n\n```bash\nmy-app\n├── README.md\n├── node_modules\n├── package.json\n├── .gitignore\n├── public\n│   ├── favicon.ico\n│   ├── index.html\n│   └── manifest.json\n└── src\n    ├── App.css\n    ├── App.js\n    ├── App.test.js\n    ├── index.css\n    ├── index.js\n    ├── logo.svg\n    └── serviceWorker.js\n```\n\n通过项目结构，我们慢慢了解下，React 的启动流程。\n\n**启动程序**\n\n首先这是一个 Node 项目，所以默认的启动程序为 `src/index.js` 文件。\n\n通过文件中的关键代码\n\n```java\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n```\n\n可以看到，`ReactDOM` 将 `<App />` 渲染到 `document.getElementById('root')` 中，`root` 是从 `public/index.html` 获取的。\n\n**渲染程序**\n\n查看 `App.js` 文件\n\n```java\nimport React, { Component } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          <p>\n            Edit <code>src/App.js</code> and save to reload.\n          </p>\n          <a\n            className=\"App-link\"\n            href=\"https://reactjs.org\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Learn React\n          </a>\n        </header>\n      </div>\n    );\n  }\n}\n\nexport default App;\n```\n\n`class App` 是渲染页面组件，在类中可以通过各种内置或自己写的 JS 方法，对页面进行处理，并通过 `render()` 方法渲染页面，在这个方法内返回的是由 JSX 语法编写的代码，该语法我认为就是由 `js/html/css` 组合而成，所以 React 也是经常被认为是大逆不道将 三种语言写在同一个文件里。\n\n## 构建静态页面\n\n虽然是 Node 项目，但是作为前端页面，我们总要将它构建成静态页面，才能发布到服务中。\n\n```bash\n$ yarn build\n```\n\n运行后，会在根目录生成 `build` 文件夹，构建后的静态内容都在其中，结构如下\n\n```bash\nbuild\n├── asset-manifest.json\n├── favicon.ico\n├── index.html\n├── manifest.json\n├── precache-manifest.3351d163fa29e67b0b41ea8c711c59df.js\n├── service-worker.js\n└── static\n    ├── css\n    │   ├── main.27a53a32.chunk.css\n    │   └── main.27a53a32.chunk.css.map\n    ├── js\n    │   ├── 1.fa92c112.chunk.js\n    │   ├── 1.fa92c112.chunk.js.map\n    │   ├── main.881217d8.chunk.js\n    │   ├── main.881217d8.chunk.js.map\n    │   ├── runtime~main.229c360f.js\n    │   └── runtime~main.229c360f.js.map\n    └── media\n        └── logo.5d5d9eef.svg\n\n4 directories, 15 files\n```\n\n页面入口为 `index.html`，静态文件在 `static` 文件夹中。\n\n不过整个文件夹为什么只有一个 `index.html`，如果有多个页面，它可以完成任务吗？\n\n## 为什么入口只有 index.html\n\n首先回答上面那个问题，React 项目只需要一个 `index.html` 就可以访问所有页面。\n\n为什么呢？要回答这个问题需要看下源码。\n\n上边我们说到 `index.js` 加载了 `App.js` 渲染的页面，那么我们可以写多个类似 `App.js` 的“页面”，而 `index.js` 中可以通过访问地址来决定渲染那个页面。\n\n当然这需要借助其他依赖包，不在我们本次讨论返回内。\n","slug":"create-react-app","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2akc00r75gqocsubaiug"},{"title":"CentOS 7 安装 PyAudio 出错","date":"2019-01-22T16:19:08.000Z","_content":"\nCentOS 7 系统下安装 PyAudio 总是报错，关键信息如下\n\n<!-- more --><!-- toc -->\n\n```bash\n...\n#include \"portaudio.h\"\n...\nerror: Setup script exited with error: command 'gcc' failed with exit status 1\n```\n\n错误原因在于缺少 `portaudio.h` 头文件，安装 portaudio 即可\n\n访问下载页面 http://portaudio.com/download.html 下载 `pa_stable_v190600_20161030.tgz` 或更高版本，并解压安装\n\n```bash\n$ wget http://portaudio.com/archives/pa_stable_v190600_20161030.tgz\n$ var -xvf pa_stable_v190600_20161030.tgz\n$ cd portaudio\n$ ./configure\n$ sudo make && sudo make install\n```\n\n随后再次下载 PyAudio 即可\n\n```bash\n$ sudo pip install PyAudio\n```\n\n或者\n\n```bash\n$ sudo easy_install PyAudio\n```\n","source":"_posts/2019-01-22-centos7-install-pyaudio-error.md","raw":"---\ntitle: CentOS 7 安装 PyAudio 出错\ndate: 2019-01-22 16:19:08\ntags: [python]\n---\n\nCentOS 7 系统下安装 PyAudio 总是报错，关键信息如下\n\n<!-- more --><!-- toc -->\n\n```bash\n...\n#include \"portaudio.h\"\n...\nerror: Setup script exited with error: command 'gcc' failed with exit status 1\n```\n\n错误原因在于缺少 `portaudio.h` 头文件，安装 portaudio 即可\n\n访问下载页面 http://portaudio.com/download.html 下载 `pa_stable_v190600_20161030.tgz` 或更高版本，并解压安装\n\n```bash\n$ wget http://portaudio.com/archives/pa_stable_v190600_20161030.tgz\n$ var -xvf pa_stable_v190600_20161030.tgz\n$ cd portaudio\n$ ./configure\n$ sudo make && sudo make install\n```\n\n随后再次下载 PyAudio 即可\n\n```bash\n$ sudo pip install PyAudio\n```\n\n或者\n\n```bash\n$ sudo easy_install PyAudio\n```\n","slug":"centos7-install-pyaudio-error","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2akd00r95gqogo4hif1i"},{"title":"Hexo 解决升级版本后渲染 Markdown TOC 不生效","date":"2019-01-19T13:57:46.000Z","_content":"\n这两天因为升级 Node 环境到 `10.15.0` 版本，导致 Hexo 也做了升级，结果发生了意外。\n\n<!-- more --><!-- toc -->\n\n原来的很多文章，渲染 Markdown 文件都出现了问题，并没有渲染成相应的 `html` 代码，然而另一部分却正常。\n\n开始以为是某些库的问题，进行了各种清除缓存重新下载的操作，依然有问题。\n\n愁了好长时间，将没有问题的文章和有问题的一一对比，并且逐渐尝试，终于，终于找到了问题。\n\n问题出在了 &#60;&#33;&#45;&#45; toc &#45;&#45;&#62; 上，在文章的开头我需要使用这个符号进行目录转义。\n\n```bash\n这两天因为升级 Node 环境到 `10.15.0` 版本，导致 Hexo 也做了升级，结果发生了意外。\n\n<!-- more --><!-- toc -->\n```\n\n如果去掉中间的空行，那么就会解析错误，我认为这是 hexo 插件的 bug，不过显然我等不到它来解决了，只能手动加上了空行。\n\n不过我查看了，我的文章中有 300 多个有问题的，额，作为一个程序猿，怎么可能手动去改呢，写个程序，将这些全部都刷上空行，搞定。\n\n经过了这次，也算是一个小教训，以后更加需要关注的是写作规范，每行间手动加上空格，也是一个良好的编写习惯。\n\n哎！我也只能这样安慰自己。\n","source":"_posts/2019-01-19-hexo-render-toc-error.md","raw":"---\ntitle: Hexo 解决升级版本后渲染 Markdown TOC 不生效\ndate: 2019-01-19 13:57:46\ntags: [hexo]\n---\n\n这两天因为升级 Node 环境到 `10.15.0` 版本，导致 Hexo 也做了升级，结果发生了意外。\n\n<!-- more --><!-- toc -->\n\n原来的很多文章，渲染 Markdown 文件都出现了问题，并没有渲染成相应的 `html` 代码，然而另一部分却正常。\n\n开始以为是某些库的问题，进行了各种清除缓存重新下载的操作，依然有问题。\n\n愁了好长时间，将没有问题的文章和有问题的一一对比，并且逐渐尝试，终于，终于找到了问题。\n\n问题出在了 &#60;&#33;&#45;&#45; toc &#45;&#45;&#62; 上，在文章的开头我需要使用这个符号进行目录转义。\n\n```bash\n这两天因为升级 Node 环境到 `10.15.0` 版本，导致 Hexo 也做了升级，结果发生了意外。\n\n<!-- more --><!-- toc -->\n```\n\n如果去掉中间的空行，那么就会解析错误，我认为这是 hexo 插件的 bug，不过显然我等不到它来解决了，只能手动加上了空行。\n\n不过我查看了，我的文章中有 300 多个有问题的，额，作为一个程序猿，怎么可能手动去改呢，写个程序，将这些全部都刷上空行，搞定。\n\n经过了这次，也算是一个小教训，以后更加需要关注的是写作规范，每行间手动加上空格，也是一个良好的编写习惯。\n\n哎！我也只能这样安慰自己。\n","slug":"hexo-render-toc-error","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ake00rb5gqo1b8yu3kp"},{"title":"docker-compose 启动报错","date":"2019-01-23T11:01:41.000Z","_content":"\n```bash\nERROR: Couldn't connect to Docker daemon at http+docker://localunixsocket - is it running?\n\nIf it's at a non-standard location, specify the URL with the DOCKER_HOST environment variable.\n```\n\n<!-- more --><!-- toc -->\n\n```bash\n$ docker-compose up -d\n```\n\n`docker-compose` 启动时报了如上错误，本身对该命令不太熟悉，所以开始一直在纠结 `http+docker://localunixsocket` 和 `DOCKER_HOST`，后来搜索下发现很简单。\n\n`docker` 和 `sudo docker` 在机器里会有两个启动的可能，`docker-compose` 也要跟他相对应\n\n```bash\n$ sudo docker-compose up -d\n```\n","source":"_posts/2019-01-23-docker-compose-up-error.md","raw":"---\ntitle: docker-compose 启动报错\ndate: 2019-01-23 11:01:41\ntags: [docker]\n---\n\n```bash\nERROR: Couldn't connect to Docker daemon at http+docker://localunixsocket - is it running?\n\nIf it's at a non-standard location, specify the URL with the DOCKER_HOST environment variable.\n```\n\n<!-- more --><!-- toc -->\n\n```bash\n$ docker-compose up -d\n```\n\n`docker-compose` 启动时报了如上错误，本身对该命令不太熟悉，所以开始一直在纠结 `http+docker://localunixsocket` 和 `DOCKER_HOST`，后来搜索下发现很简单。\n\n`docker` 和 `sudo docker` 在机器里会有两个启动的可能，`docker-compose` 也要跟他相对应\n\n```bash\n$ sudo docker-compose up -d\n```\n","slug":"docker-compose-up-error","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2akf00rd5gqonjerixbl"},{"title":"Mysql 查询 JSON 结果的相关函数","date":"2019-01-26T17:25:23.000Z","_content":"\nJSON 格式字段是 Mysql 5.7 新加的属性，不够它本质上以字符串性质保存在库中的，刚接触时我只了解 `$.xx` 查询字段的方法，因为大部分时间，有这个就够了，其他交给程序就行了，但是最近一些操作需要更复杂的查询操作，所以赶紧了解下更多的方法。\n\n<!-- more --><!-- toc -->\n\n## JSON_EXTRACT(json_doc [,path])\n\n查询字段\n\n\n```mysql\nmysql> set @j = '{\"name\":\"wxnacy\"}';\nmysql> select JSON_EXTRACT(@j, '$.name');\n+----------------------------+\n| JSON_EXTRACT(@j, '$.name') |\n+----------------------------+\n| \"wxnacy\"                   |\n+----------------------------+\n```\n\n还有一种更简洁的方式，但是只能在查询表时使用\n\n```mysql\nmysql> select ext -> '$.name' from test;\n+-----------------+\n| ext -> '$.name' |\n+-----------------+\n| \"wxnacy\"        |\n+-----------------+\n```\n\n在 `$.` 后可以正常的使用 JSON 格式获取数据方式，比如数组\n\n```mysql\nmysql> set @j = '{\"a\": [1, 2]}';\nmysql> select JSON_EXTRACT(@j, '$.a[0]');\n+----------------------------+\n| JSON_EXTRACT(@j, '$.a[0]') |\n+----------------------------+\n| 1                          |\n+----------------------------+\n```\n\n## JSON_DEPTH(json_doc)\n\n计算 JSON 深度，计算方式 `{} []` 有一个符号即为一层，符号下有数据增加一层，复杂 JSON 算到最深的一次为止，官方文档说 `null` 值深度为 0，但是实际效果并非如此，列举几个例子\n\n![json_depth](http://wxnacy-img.oss-cn-beijing.aliyuncs.com/blog/json_depth_360.png)\n\n## JSON_LENGTH(json_doc [, path])\n\n计算 JSON 最外层或者指定 path 的长度，标量的长度为1。数组的长度是数组元素的数量，对象的长度是对象成员的数量。\n\n```mysql\nmysql> SELECT JSON_LENGTH('[1, 2, {\"a\": 3}]');\n+---------------------------------+\n| JSON_LENGTH('[1, 2, {\"a\": 3}]') |\n+---------------------------------+\n|                               3 |\n+---------------------------------+\nmysql> SELECT JSON_LENGTH('{\"a\": 1, \"b\": {\"c\": 30}}');\n+-----------------------------------------+\n| JSON_LENGTH('{\"a\": 1, \"b\": {\"c\": 30}}') |\n+-----------------------------------------+\n|                                       2 |\n+-----------------------------------------+\nmysql> SELECT JSON_LENGTH('{\"a\": 1, \"b\": {\"c\": 30}}', '$.b');\n+------------------------------------------------+\n| JSON_LENGTH('{\"a\": 1, \"b\": {\"c\": 30}}', '$.b') |\n+------------------------------------------------+\n|                                              1 |\n+------------------------------------------------+\n```\n\n## JSON_TYPE(json_doc)\n\n返回一个utf8mb4字符串，指示JSON值的类型。 这可以是对象，数组或标量类型，如下所示：\n\n```mysql\nmysql> SET @j = '{\"a\": [10, true]}';\nmysql> SELECT JSON_TYPE(@j);\n+---------------+\n| JSON_TYPE(@j) |\n+---------------+\n| OBJECT        |\n+---------------+\nmysql> SELECT JSON_TYPE(JSON_EXTRACT(@j, '$.a'));\n+------------------------------------+\n| JSON_TYPE(JSON_EXTRACT(@j, '$.a')) |\n+------------------------------------+\n| ARRAY                              |\n+------------------------------------+\nmysql> SELECT JSON_TYPE(JSON_EXTRACT(@j, '$.a[0]'));\n+---------------------------------------+\n| JSON_TYPE(JSON_EXTRACT(@j, '$.a[0]')) |\n+---------------------------------------+\n| INTEGER                               |\n+---------------------------------------+\nmysql> SELECT JSON_TYPE(JSON_EXTRACT(@j, '$.a[1]'));\n+---------------------------------------+\n| JSON_TYPE(JSON_EXTRACT(@j, '$.a[1]')) |\n+---------------------------------------+\n| BOOLEAN                               |\n+---------------------------------------+\n```\n\n可能的返回类型\n\n- 纯JSON类型：\n  - OBJECT：JSON对象\n  - ARRAY：JSON数组\n  - BOOLEAN：JSON真假文字\n  - NULL：JSON null文字\n- 数字类型：\n  - INTEGER：MySQL TINYINT，SMALLINT，MEDIUMINT以及INT和BIGINT标量\n  - DOUBLE：MySQL DOUBLE FLOAT标量\n  - DECIMAL：MySQL DECIMAL和NUMERIC标量\n- 时间类型：\n  - DATETIME：MySQL DATETIME和TIMESTAMP标量\n  - 日期：MySQL DATE标量\n  - TIME：MySQL TIME标量\n- 字符串类型：\n  - STRING：MySQL utf8字符类型标量：CHAR，VARCHAR，TEXT，ENUM和SET\n- 二进制类型：\n  - BLOB：MySQL二进制类型标量，包括BINARY，VARBINARY，BLOB和BIT\n所有其他类型：\nOPAQUE（原始位）\n\n## JSON_VALID\n\n返回0或1以指示值是否为有效JSON。 如果参数为NULL，则返回NULL。\n\n```mysql\nmysql> SELECT JSON_VALID('{\"a\": 1}');\n+------------------------+\n| JSON_VALID('{\"a\": 1}') |\n+------------------------+\n|                      1 |\n+------------------------+\nmysql> SELECT JSON_VALID('hello'), JSON_VALID('\"hello\"');\n+---------------------+-----------------------+\n| JSON_VALID('hello') | JSON_VALID('\"hello\"') |\n+---------------------+-----------------------+\n|                   0 |                     1 |\n+---------------------+-----------------------+\n```\n\n- [Functions That Return JSON Value Attributes](https://dev.mysql.com/doc/refman/8.0/en/json-attribute-functions.html)\n","source":"_posts/2019-01-26-mysql-json-functions.md","raw":"---\ntitle: Mysql 查询 JSON 结果的相关函数\ndate: 2019-01-26 17:25:23\ntags: [mysql]\n---\n\nJSON 格式字段是 Mysql 5.7 新加的属性，不够它本质上以字符串性质保存在库中的，刚接触时我只了解 `$.xx` 查询字段的方法，因为大部分时间，有这个就够了，其他交给程序就行了，但是最近一些操作需要更复杂的查询操作，所以赶紧了解下更多的方法。\n\n<!-- more --><!-- toc -->\n\n## JSON_EXTRACT(json_doc [,path])\n\n查询字段\n\n\n```mysql\nmysql> set @j = '{\"name\":\"wxnacy\"}';\nmysql> select JSON_EXTRACT(@j, '$.name');\n+----------------------------+\n| JSON_EXTRACT(@j, '$.name') |\n+----------------------------+\n| \"wxnacy\"                   |\n+----------------------------+\n```\n\n还有一种更简洁的方式，但是只能在查询表时使用\n\n```mysql\nmysql> select ext -> '$.name' from test;\n+-----------------+\n| ext -> '$.name' |\n+-----------------+\n| \"wxnacy\"        |\n+-----------------+\n```\n\n在 `$.` 后可以正常的使用 JSON 格式获取数据方式，比如数组\n\n```mysql\nmysql> set @j = '{\"a\": [1, 2]}';\nmysql> select JSON_EXTRACT(@j, '$.a[0]');\n+----------------------------+\n| JSON_EXTRACT(@j, '$.a[0]') |\n+----------------------------+\n| 1                          |\n+----------------------------+\n```\n\n## JSON_DEPTH(json_doc)\n\n计算 JSON 深度，计算方式 `{} []` 有一个符号即为一层，符号下有数据增加一层，复杂 JSON 算到最深的一次为止，官方文档说 `null` 值深度为 0，但是实际效果并非如此，列举几个例子\n\n![json_depth](http://wxnacy-img.oss-cn-beijing.aliyuncs.com/blog/json_depth_360.png)\n\n## JSON_LENGTH(json_doc [, path])\n\n计算 JSON 最外层或者指定 path 的长度，标量的长度为1。数组的长度是数组元素的数量，对象的长度是对象成员的数量。\n\n```mysql\nmysql> SELECT JSON_LENGTH('[1, 2, {\"a\": 3}]');\n+---------------------------------+\n| JSON_LENGTH('[1, 2, {\"a\": 3}]') |\n+---------------------------------+\n|                               3 |\n+---------------------------------+\nmysql> SELECT JSON_LENGTH('{\"a\": 1, \"b\": {\"c\": 30}}');\n+-----------------------------------------+\n| JSON_LENGTH('{\"a\": 1, \"b\": {\"c\": 30}}') |\n+-----------------------------------------+\n|                                       2 |\n+-----------------------------------------+\nmysql> SELECT JSON_LENGTH('{\"a\": 1, \"b\": {\"c\": 30}}', '$.b');\n+------------------------------------------------+\n| JSON_LENGTH('{\"a\": 1, \"b\": {\"c\": 30}}', '$.b') |\n+------------------------------------------------+\n|                                              1 |\n+------------------------------------------------+\n```\n\n## JSON_TYPE(json_doc)\n\n返回一个utf8mb4字符串，指示JSON值的类型。 这可以是对象，数组或标量类型，如下所示：\n\n```mysql\nmysql> SET @j = '{\"a\": [10, true]}';\nmysql> SELECT JSON_TYPE(@j);\n+---------------+\n| JSON_TYPE(@j) |\n+---------------+\n| OBJECT        |\n+---------------+\nmysql> SELECT JSON_TYPE(JSON_EXTRACT(@j, '$.a'));\n+------------------------------------+\n| JSON_TYPE(JSON_EXTRACT(@j, '$.a')) |\n+------------------------------------+\n| ARRAY                              |\n+------------------------------------+\nmysql> SELECT JSON_TYPE(JSON_EXTRACT(@j, '$.a[0]'));\n+---------------------------------------+\n| JSON_TYPE(JSON_EXTRACT(@j, '$.a[0]')) |\n+---------------------------------------+\n| INTEGER                               |\n+---------------------------------------+\nmysql> SELECT JSON_TYPE(JSON_EXTRACT(@j, '$.a[1]'));\n+---------------------------------------+\n| JSON_TYPE(JSON_EXTRACT(@j, '$.a[1]')) |\n+---------------------------------------+\n| BOOLEAN                               |\n+---------------------------------------+\n```\n\n可能的返回类型\n\n- 纯JSON类型：\n  - OBJECT：JSON对象\n  - ARRAY：JSON数组\n  - BOOLEAN：JSON真假文字\n  - NULL：JSON null文字\n- 数字类型：\n  - INTEGER：MySQL TINYINT，SMALLINT，MEDIUMINT以及INT和BIGINT标量\n  - DOUBLE：MySQL DOUBLE FLOAT标量\n  - DECIMAL：MySQL DECIMAL和NUMERIC标量\n- 时间类型：\n  - DATETIME：MySQL DATETIME和TIMESTAMP标量\n  - 日期：MySQL DATE标量\n  - TIME：MySQL TIME标量\n- 字符串类型：\n  - STRING：MySQL utf8字符类型标量：CHAR，VARCHAR，TEXT，ENUM和SET\n- 二进制类型：\n  - BLOB：MySQL二进制类型标量，包括BINARY，VARBINARY，BLOB和BIT\n所有其他类型：\nOPAQUE（原始位）\n\n## JSON_VALID\n\n返回0或1以指示值是否为有效JSON。 如果参数为NULL，则返回NULL。\n\n```mysql\nmysql> SELECT JSON_VALID('{\"a\": 1}');\n+------------------------+\n| JSON_VALID('{\"a\": 1}') |\n+------------------------+\n|                      1 |\n+------------------------+\nmysql> SELECT JSON_VALID('hello'), JSON_VALID('\"hello\"');\n+---------------------+-----------------------+\n| JSON_VALID('hello') | JSON_VALID('\"hello\"') |\n+---------------------+-----------------------+\n|                   0 |                     1 |\n+---------------------+-----------------------+\n```\n\n- [Functions That Return JSON Value Attributes](https://dev.mysql.com/doc/refman/8.0/en/json-attribute-functions.html)\n","slug":"mysql-json-functions","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2akg00rf5gqog8n45g80"},{"title":"Python 实现 Mysql hash 分表的增删改查","date":"2019-02-02T13:59:44.000Z","_content":"\nMysql 水平分表方式中，比较适合频繁操作全部数据的方式为 hash 取模，比如用户表，所有数据都会频繁使用，使用 hash 取模的方式可以平均的将数据分配到各个表中。\n\n<!-- more --><!-- toc -->\n\n理解起来并不难，但是在写代码时需要讲究一些方法，如果有 10 个表，我们总不能写 10 个 Model 进行查询操作吧。\n\n好在 Python 中可以利用 `type()` 方法动态创建 `class`，我们可以根据 id 来生成相应的 Model。\n\n先来创建两个表\n\n```mysql\nCREATE TABLE `test_1` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `name` varchar(32) NOT NULL DEFAULT '' COMMENT '名字',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4 COMMENT='测试';\n```\n\n```mysql\nCREATE TABLE `test_0` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `name` varchar(32) NOT NULL DEFAULT '' COMMENT '名字',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4 COMMENT='测试';\n```\n\n我们使用 `flask-sqlalchemy` 模块来进行 ORM 操作，正常的写法应该是\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nclass Test(db.Model):\n    __tablename__ = 'test_0'\n    id = db.Column(db.Integer, primary_key=True)\n    name = db.Column(db.String, default='')\n\n# 插入数据\n\nt = Test()\nt.id = 1\nt.name  = 'test'\ndb.session.add(t)\ndb.session.commit()\n\n# 查询\n\nTest.query.filter_by(id=1).first()\n```\n\n我说过我不想在写一个 `Test1` 来对应 `test_1` 表了，所以我需要对 `Test` 做一些修改\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nclass Test():\n    _model = {}\n\n    @staticmethod\n    def model(test_id):\n        # 通过取余的方式将数据平均分配到两个表中\n        index = test_id % 2\n        tablename = 'test_{}'.format(index)\n        classname = 'Test_{}'.format(index)\n\n        Model = Test._model.get(classname)\n        if not Model:\n            Model = type(classname, (BaseModel, db.Model), {\n                '__module__': __name__,\n                '__name__': classname,\n                '__tablename__': tablename,\n\n                'id' : db.Column(db.BIGINT, primary_key=True),\n                'name' : db.Column(db.String, default=\"\", doc=\"\"),\n            })\n            Test._model[classname] = Model\n        return Model\n\n# 插入数据\n\nT = Test.model(1)\nt = T()\nt.id = 1\nt.name = 'test'\ndb.session.add(t)\ndb.session.commit()\n\n# 查询\n\nT.query.filter_by(id=1).first()\n```\n","source":"_posts/2019-02-02-python-mysql-hash-split-table.md","raw":"---\ntitle: Python 实现 Mysql hash 分表的增删改查\ndate: 2019-02-02 13:59:44\ntags: [python, mysql]\n---\n\nMysql 水平分表方式中，比较适合频繁操作全部数据的方式为 hash 取模，比如用户表，所有数据都会频繁使用，使用 hash 取模的方式可以平均的将数据分配到各个表中。\n\n<!-- more --><!-- toc -->\n\n理解起来并不难，但是在写代码时需要讲究一些方法，如果有 10 个表，我们总不能写 10 个 Model 进行查询操作吧。\n\n好在 Python 中可以利用 `type()` 方法动态创建 `class`，我们可以根据 id 来生成相应的 Model。\n\n先来创建两个表\n\n```mysql\nCREATE TABLE `test_1` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `name` varchar(32) NOT NULL DEFAULT '' COMMENT '名字',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4 COMMENT='测试';\n```\n\n```mysql\nCREATE TABLE `test_0` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `name` varchar(32) NOT NULL DEFAULT '' COMMENT '名字',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4 COMMENT='测试';\n```\n\n我们使用 `flask-sqlalchemy` 模块来进行 ORM 操作，正常的写法应该是\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nclass Test(db.Model):\n    __tablename__ = 'test_0'\n    id = db.Column(db.Integer, primary_key=True)\n    name = db.Column(db.String, default='')\n\n# 插入数据\n\nt = Test()\nt.id = 1\nt.name  = 'test'\ndb.session.add(t)\ndb.session.commit()\n\n# 查询\n\nTest.query.filter_by(id=1).first()\n```\n\n我说过我不想在写一个 `Test1` 来对应 `test_1` 表了，所以我需要对 `Test` 做一些修改\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nclass Test():\n    _model = {}\n\n    @staticmethod\n    def model(test_id):\n        # 通过取余的方式将数据平均分配到两个表中\n        index = test_id % 2\n        tablename = 'test_{}'.format(index)\n        classname = 'Test_{}'.format(index)\n\n        Model = Test._model.get(classname)\n        if not Model:\n            Model = type(classname, (BaseModel, db.Model), {\n                '__module__': __name__,\n                '__name__': classname,\n                '__tablename__': tablename,\n\n                'id' : db.Column(db.BIGINT, primary_key=True),\n                'name' : db.Column(db.String, default=\"\", doc=\"\"),\n            })\n            Test._model[classname] = Model\n        return Model\n\n# 插入数据\n\nT = Test.model(1)\nt = T()\nt.id = 1\nt.name = 'test'\ndb.session.add(t)\ndb.session.commit()\n\n# 查询\n\nT.query.filter_by(id=1).first()\n```\n","slug":"python-mysql-hash-split-table","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aki00rh5gqomky5kr64"},{"title":"Linux wc 命令：计算行数、字数、字节数","date":"2019-02-01T11:56:30.000Z","_content":"\nwc 命令用于查看文件的行数、字数、字节数\n\n<!-- more --><!-- toc -->\n\n## 快速使用\n\n```bash\n$ wc wsh.log\n   901    3226   13803 wsh.log\n```\n\n查询的三个数字分别为行数、单词数、字节数\n\n## 更多参数\n\n使用 `man` 命令可以查看 wc 的完整文档、还有如下参数\n\n- `-c`: 查看字节数\n- `-m`: 查看字符数\n- `-w`: 查看单词数\n- `-l`: 查看行数\nmacOS 没有下面的命令\n- `-L`: 查看最长行的长度\n- `--help`: 查看在线帮助\n- `--version`: 查看版本\n\n## 延伸使用\n\nwc 也可以接受管道信息，我们可以查看当前目录文件数\n\n```bash\n$ ls | wc -l\n```\n\n这是包含文件夹的，如果只想要查看文件数，可以借助 `grep` 命令\n\n```bash\n$ ll | grep ^- | wc -l\n```\n","source":"_posts/2019-02-01-linux-wc.md","raw":"---\ntitle: Linux wc 命令：计算行数、字数、字节数\ndate: 2019-02-01 11:56:30\ntags: [linux]\n---\n\nwc 命令用于查看文件的行数、字数、字节数\n\n<!-- more --><!-- toc -->\n\n## 快速使用\n\n```bash\n$ wc wsh.log\n   901    3226   13803 wsh.log\n```\n\n查询的三个数字分别为行数、单词数、字节数\n\n## 更多参数\n\n使用 `man` 命令可以查看 wc 的完整文档、还有如下参数\n\n- `-c`: 查看字节数\n- `-m`: 查看字符数\n- `-w`: 查看单词数\n- `-l`: 查看行数\nmacOS 没有下面的命令\n- `-L`: 查看最长行的长度\n- `--help`: 查看在线帮助\n- `--version`: 查看版本\n\n## 延伸使用\n\nwc 也可以接受管道信息，我们可以查看当前目录文件数\n\n```bash\n$ ls | wc -l\n```\n\n这是包含文件夹的，如果只想要查看文件数，可以借助 `grep` 命令\n\n```bash\n$ ll | grep ^- | wc -l\n```\n","slug":"linux-wc","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2akj00rj5gqotmf4r3be"},{"title":"Go GOPATH 的作用","date":"2019-02-03T14:11:22.000Z","_content":"\n`GOPATH` 是开发 Go 时必须设置的一个环境变量，通常在安装完 Go 以后就要在 `.bash_profile` 中进行配置。\n\n<!-- more --><!-- toc -->\n\n```bash\n...\nexport GOPATH=${HOME}/project\n...\n```\n\n使配置生效后，可以使用命令 `go env` 查看\n\n```bash\n$ source ~/.bash_profile\n$ go env\n...\nGOPATH=/Users/wxnacy/project\n```\n\n这样你就可以开发 Go 项目了。\n\n`GOPATH` 的作用是什么呢？该目录下可能会包含三个文件夹\n\n名称|描述\n----|------\nsrc | 需要编译的代码和使用 `go get` 安装的外部依赖代码存放位置\nbin | 编译代码生成的二进制文件存放位置\npkg | 编译生成的lib文件存储的地方\n\n`src` 需要手动创建，`bin` 和 `pkg` 则是编译时自动生成的。\n\n`src` 很像 Python 的 site-packages 目录，用来存放依赖包，不过 Go 比较随性，你开发的代码也放在这个目录下，不然编译就会报错。\n\n我们第一次设置了 `GOPATH` 后，也不用拘泥于每次将代码都 copy 到 `${GOPATH}/src` 中，我们只需要将当前代码放在 src 目录下，并将 src 的所在目录临时设置为 `GOPATH` 即可。\n\n\n","source":"_posts/2019-02-03-go-gopath.md","raw":"---\ntitle: Go GOPATH 的作用\ndate: 2019-02-03 14:11:22\ntags: [go]\n---\n\n`GOPATH` 是开发 Go 时必须设置的一个环境变量，通常在安装完 Go 以后就要在 `.bash_profile` 中进行配置。\n\n<!-- more --><!-- toc -->\n\n```bash\n...\nexport GOPATH=${HOME}/project\n...\n```\n\n使配置生效后，可以使用命令 `go env` 查看\n\n```bash\n$ source ~/.bash_profile\n$ go env\n...\nGOPATH=/Users/wxnacy/project\n```\n\n这样你就可以开发 Go 项目了。\n\n`GOPATH` 的作用是什么呢？该目录下可能会包含三个文件夹\n\n名称|描述\n----|------\nsrc | 需要编译的代码和使用 `go get` 安装的外部依赖代码存放位置\nbin | 编译代码生成的二进制文件存放位置\npkg | 编译生成的lib文件存储的地方\n\n`src` 需要手动创建，`bin` 和 `pkg` 则是编译时自动生成的。\n\n`src` 很像 Python 的 site-packages 目录，用来存放依赖包，不过 Go 比较随性，你开发的代码也放在这个目录下，不然编译就会报错。\n\n我们第一次设置了 `GOPATH` 后，也不用拘泥于每次将代码都 copy 到 `${GOPATH}/src` 中，我们只需要将当前代码放在 src 目录下，并将 src 的所在目录临时设置为 `GOPATH` 即可。\n\n\n","slug":"go-gopath","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2akn00rl5gqobpce8ba0"},{"title":"Python 报错：local variable 'count' referenced before assignment","date":"2018-12-20T16:06:16.000Z","_content":"\n使用 Python 很久了，仍然会碰到一些莫名其妙的错误。\n\n<!-- more --><!-- toc -->\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ncount = 0\n\na = [1, 2, 3]\n\ndef fmt(i):\n    count += i\n\n[fmt(o) for o in a]\nprint(count)\n```\n\n我的本意是想在 `fmt` 方法中对 `count` 进行累加，但是会报错\n\n```bash\nlocal variable 'count' referenced before assignment\n```\n\ngoogle 后发现\n\n```python\ncount = 0\n```\n\n定义为全局变量\n\n```python\ndef fmt(i):\n    count += i\n```\n\n方法中只能对局部变量进行修改，***如果想要修改全局变量，需要在方法内使用 global 对变量进行修改***\n\n```python\ndef fmt(i):\n    global count\n    count += i\n```\n\n完整代码如下\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ncount = 0\n\na = [1, 2, 3]\n\ndef fmt(i):\n    global count\n    count += i\n\n[fmt(o) for o in a]\nprint(count)\n```\n","source":"_posts/2018-12-20-python-error-loca-variable.md","raw":"---\ntitle: Python 报错：local variable 'count' referenced before assignment\ndate: 2018-12-20 16:06:16\ntags: [python]\n---\n\n使用 Python 很久了，仍然会碰到一些莫名其妙的错误。\n\n<!-- more --><!-- toc -->\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ncount = 0\n\na = [1, 2, 3]\n\ndef fmt(i):\n    count += i\n\n[fmt(o) for o in a]\nprint(count)\n```\n\n我的本意是想在 `fmt` 方法中对 `count` 进行累加，但是会报错\n\n```bash\nlocal variable 'count' referenced before assignment\n```\n\ngoogle 后发现\n\n```python\ncount = 0\n```\n\n定义为全局变量\n\n```python\ndef fmt(i):\n    count += i\n```\n\n方法中只能对局部变量进行修改，***如果想要修改全局变量，需要在方法内使用 global 对变量进行修改***\n\n```python\ndef fmt(i):\n    global count\n    count += i\n```\n\n完整代码如下\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ncount = 0\n\na = [1, 2, 3]\n\ndef fmt(i):\n    global count\n    count += i\n\n[fmt(o) for o in a]\nprint(count)\n```\n","slug":"python-error-loca-variable","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ako00rn5gqois45w3o3"},{"title":"如何给 Hexo 博客添加 RSS 订阅功能","date":"2018-12-12T18:09:28.000Z","_content":"\n\n写这个博客有一年多了，一直都没有增加像样的订阅功能，因为觉得暂时还不会有人想专门看我的博客，也就把更多的精力放在写博客本身上了。\n\n<!-- more --><!-- toc -->\n最近收到一位网友的邮件，说希望我可以增加 RSS 订阅功能，这才想到可能有人，已经开始想更多的了解我的内容了。\n\n那我一定是要加一下这个功能的，这样订阅功能也就加的更有目的性，更有意义了。\n\n本篇就介绍下用 Hexo 构建的博客，如何添加 RSS 订阅功能。\n\n首先添加功能插件，在 hexo 项目根目录下执行该命令\n\n```bash\n$ yarn add hexo-generator-feed\n```\n\n然后在 hexo 根目录下的 `_config.yml` 文件中添加配置\n\n```bash\nfeed:\n    type: atom\n    path: atom.xml\n    limit: 20\n```\n\n配置含义：\n- `type`: RSS的类型(atom/rss2)\n- `path`: 文件路径，默认是 atom.xml/rss2.xml\n- `limit`: 展示文章的数量,使用 0 或则 false 代表展示全部\n- `hub`: URL of the PubSubHubbub hubs (如果使用不到可以为空)\n- `content`: （可选）设置 `true` 可以在 RSS 文件中包含文章全部内容，默认：false\n- `content_limit`: （可选）摘要中使用的帖子内容的默认长度。 仅在内容设置为false且未显示自定义帖子描述时才使用。\n- `content_limit_delim`: （可选）If content_limit is used to shorten post contents, only cut at the last occurrence of this delimiter before reaching the character limit. Not used by default.\n- `order_by`: 订阅内容的顺序. (默认: -date)\n（后面几个选项一般用不到，有两个也没找到比较准确的翻译，所以感觉放上原文，如果你知道一定要告诉我）\n\n然后在 theme 目录下的 `_config.yml` 文件中添加配置\n\n```bash\nrss: /atom.xml\n```\n\n随后重新生成博客静态文件\n\n```bash\n$ hexo clean && hexo g\n```\n\n在 `public` 文件夹中就会生成 `atom.xml` 文件，部署后直接在根目录中访问该文件即可\n\n```bash\nhttps://wxnacy.com/atom.xml\n```\n\n我使用的是 yilia 皮肤，在 `_config.yml` 中添加配置\n\n```bash\nsubnav:\n    rss: \"atom.xml\"\n```\n\n即可在导航栏生成 RSS 图标\n\n![rss](/images/rss.png)\n","source":"_posts/2018-12-12-hexo-add-rss.md","raw":"---\ntitle: 如何给 Hexo 博客添加 RSS 订阅功能\ntags:\n  - hexo\ndate: 2018-12-12 18:09:28\n---\n\n\n写这个博客有一年多了，一直都没有增加像样的订阅功能，因为觉得暂时还不会有人想专门看我的博客，也就把更多的精力放在写博客本身上了。\n\n<!-- more --><!-- toc -->\n最近收到一位网友的邮件，说希望我可以增加 RSS 订阅功能，这才想到可能有人，已经开始想更多的了解我的内容了。\n\n那我一定是要加一下这个功能的，这样订阅功能也就加的更有目的性，更有意义了。\n\n本篇就介绍下用 Hexo 构建的博客，如何添加 RSS 订阅功能。\n\n首先添加功能插件，在 hexo 项目根目录下执行该命令\n\n```bash\n$ yarn add hexo-generator-feed\n```\n\n然后在 hexo 根目录下的 `_config.yml` 文件中添加配置\n\n```bash\nfeed:\n    type: atom\n    path: atom.xml\n    limit: 20\n```\n\n配置含义：\n- `type`: RSS的类型(atom/rss2)\n- `path`: 文件路径，默认是 atom.xml/rss2.xml\n- `limit`: 展示文章的数量,使用 0 或则 false 代表展示全部\n- `hub`: URL of the PubSubHubbub hubs (如果使用不到可以为空)\n- `content`: （可选）设置 `true` 可以在 RSS 文件中包含文章全部内容，默认：false\n- `content_limit`: （可选）摘要中使用的帖子内容的默认长度。 仅在内容设置为false且未显示自定义帖子描述时才使用。\n- `content_limit_delim`: （可选）If content_limit is used to shorten post contents, only cut at the last occurrence of this delimiter before reaching the character limit. Not used by default.\n- `order_by`: 订阅内容的顺序. (默认: -date)\n（后面几个选项一般用不到，有两个也没找到比较准确的翻译，所以感觉放上原文，如果你知道一定要告诉我）\n\n然后在 theme 目录下的 `_config.yml` 文件中添加配置\n\n```bash\nrss: /atom.xml\n```\n\n随后重新生成博客静态文件\n\n```bash\n$ hexo clean && hexo g\n```\n\n在 `public` 文件夹中就会生成 `atom.xml` 文件，部署后直接在根目录中访问该文件即可\n\n```bash\nhttps://wxnacy.com/atom.xml\n```\n\n我使用的是 yilia 皮肤，在 `_config.yml` 中添加配置\n\n```bash\nsubnav:\n    rss: \"atom.xml\"\n```\n\n即可在导航栏生成 RSS 图标\n\n![rss](/images/rss.png)\n","slug":"hexo-add-rss","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2akq00rp5gqocgmfgs6h"},{"title":"Vim 查看环境信息","date":"2019-02-04T10:37:59.000Z","_content":"\nVim 可以直接在命令行模式查看很多环境信息。\n\n<!-- more --><!-- toc -->\n\n## Vim 信息\n\n```vim\n:version            \" 版本信息和加载 vimrc 顺序等信息\"\n:scriptnames        \" 查看 script 脚本的加载顺序\"\n:messages           \" 查看 echom 打印信息\"\n:function           \" 查看加载的 function 列表\"\n:set all            \" 查看 Vim 所有变量\"\n:set                \" 查看 Vim 所有与系统不同的变量\"\n:set variable?      \" 显示指定 Vim 变量的当前值\n:set runtimepath?   \" 显示 script 搜索路径\n```\n\n## 环境变量\n\n```vim\n:echo $HOME         \" 用户根目录\"\n:echo $VIM          \" Vim 程序安装目录\"\n:echo $VIMRUNTIME   \" Vim 程序位置\"\n:echo $MYVIMRC      \" .vimrc 文件位置\"\n```\n","source":"_posts/2019-02-04-vim-show-message.md","raw":"---\ntitle: Vim 查看环境信息\ndate: 2019-02-04 10:37:59\ntags: [vim]\n---\n\nVim 可以直接在命令行模式查看很多环境信息。\n\n<!-- more --><!-- toc -->\n\n## Vim 信息\n\n```vim\n:version            \" 版本信息和加载 vimrc 顺序等信息\"\n:scriptnames        \" 查看 script 脚本的加载顺序\"\n:messages           \" 查看 echom 打印信息\"\n:function           \" 查看加载的 function 列表\"\n:set all            \" 查看 Vim 所有变量\"\n:set                \" 查看 Vim 所有与系统不同的变量\"\n:set variable?      \" 显示指定 Vim 变量的当前值\n:set runtimepath?   \" 显示 script 搜索路径\n```\n\n## 环境变量\n\n```vim\n:echo $HOME         \" 用户根目录\"\n:echo $VIM          \" Vim 程序安装目录\"\n:echo $VIMRUNTIME   \" Vim 程序位置\"\n:echo $MYVIMRC      \" .vimrc 文件位置\"\n```\n","slug":"vim-show-message","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2akr00rr5gqonlfiw8xo"},{"title":"Vagrant 常用命令","date":"2019-02-05T22:33:10.000Z","_content":"\n记录些 Vagrant 经常用到的命令\n\n<!-- more -->\n<!-- toc -->\n\n## 工作目录中\n\n```bash\n$ vagrant init centos/7             # 初始化系统\"\n$ vagrant up                        # 启动虚拟机\"\n$ vagrant ssh                       # 登陆虚拟机\"\n$ vagrant halt                      # 登陆虚拟机\"\n$ vagrant destroy                   # 销毁虚拟机\"\n$ vagrant destroy -f                # 销毁虚拟机，并对询问回答 yes\"\n$ vagrant package                   # 打包 box\"\n$ vagrant package --ouput box-name  # 打包 box，并指定包名\"\n$ vagrant box update                # 更新 box 版本\"\n$ vagrant status                    # 当前虚拟机状态\n$ vagrant reload                    # 重新加载虚拟机配置\n```\n\n## 全局命令\n\n查看所有虚拟机状态\n\n```bash\n$ vagrant global-status\n\nid       name    provider   state        directory\n-----------------------------------------------------------------------------------------\n2ed1547  default virtualbox running      /Users/wxnacy/VagrantProjects/centos7-wshell\n1a7c506  default virtualbox inaccessible /Users/wxnacy/VagrantProjects/wxnacy-centos7\na980255  default virtualbox inaccessible /Users/wxnacy/VagrantProjects/centos6\nd6edb01  default virtualbox running      /Users/wxnacy/VagrantProjects/wxnacy-ubuntu1604\n908baa1  default virtualbox running      /Users/wxnacy/VagrantProjects/xenial64\nda8e118  default virtualbox running      /Users/wxnacy/VagrantProjects/bionic64\n7a1fc36  default virtualbox poweroff     /Users/wxnacy/VagrantProjects/ubuntu1804\n40aa16f  default virtualbox running      /Users/wxnacy/VagrantProjects/centos7\n```\n\n销毁指定虚拟机\n\n```bash\n$ vagrant destroy name|id\n```\n\n查看所有 box 列表\n\n```bash\n$ vagrant box list\n\ncentos/7          (virtualbox, 1811.02)\ndebian/jessie64   (virtualbox, 8.11.0)\nubuntu/bionic64   (virtualbox, 20190212.1.0)\nwxnacy/ubuntu1804 (virtualbox, 0)\n```\n\n添加本地 box 到仓库\n\n```bash\n$ vagrant box add my-box-name box-path\n```\n\n删除 box\n\n```bash\n$ vagrant box remove my-box-name\n$ vagrant box remove my-box-name --box-version <version>    # 指定版本\n```\n\n更新 box\n\n```bash\n$ vagrant box update --box <box-name>\n```\n\n- [Command-Line Interface](https://www.vagrantup.com/docs/cli/)\n","source":"_posts/2019-02-05-vagrant-commands.md","raw":"---\ntitle: Vagrant 常用命令\ndate: 2019-02-05 22:33:10\ntags: [vagrant]\n---\n\n记录些 Vagrant 经常用到的命令\n\n<!-- more -->\n<!-- toc -->\n\n## 工作目录中\n\n```bash\n$ vagrant init centos/7             # 初始化系统\"\n$ vagrant up                        # 启动虚拟机\"\n$ vagrant ssh                       # 登陆虚拟机\"\n$ vagrant halt                      # 登陆虚拟机\"\n$ vagrant destroy                   # 销毁虚拟机\"\n$ vagrant destroy -f                # 销毁虚拟机，并对询问回答 yes\"\n$ vagrant package                   # 打包 box\"\n$ vagrant package --ouput box-name  # 打包 box，并指定包名\"\n$ vagrant box update                # 更新 box 版本\"\n$ vagrant status                    # 当前虚拟机状态\n$ vagrant reload                    # 重新加载虚拟机配置\n```\n\n## 全局命令\n\n查看所有虚拟机状态\n\n```bash\n$ vagrant global-status\n\nid       name    provider   state        directory\n-----------------------------------------------------------------------------------------\n2ed1547  default virtualbox running      /Users/wxnacy/VagrantProjects/centos7-wshell\n1a7c506  default virtualbox inaccessible /Users/wxnacy/VagrantProjects/wxnacy-centos7\na980255  default virtualbox inaccessible /Users/wxnacy/VagrantProjects/centos6\nd6edb01  default virtualbox running      /Users/wxnacy/VagrantProjects/wxnacy-ubuntu1604\n908baa1  default virtualbox running      /Users/wxnacy/VagrantProjects/xenial64\nda8e118  default virtualbox running      /Users/wxnacy/VagrantProjects/bionic64\n7a1fc36  default virtualbox poweroff     /Users/wxnacy/VagrantProjects/ubuntu1804\n40aa16f  default virtualbox running      /Users/wxnacy/VagrantProjects/centos7\n```\n\n销毁指定虚拟机\n\n```bash\n$ vagrant destroy name|id\n```\n\n查看所有 box 列表\n\n```bash\n$ vagrant box list\n\ncentos/7          (virtualbox, 1811.02)\ndebian/jessie64   (virtualbox, 8.11.0)\nubuntu/bionic64   (virtualbox, 20190212.1.0)\nwxnacy/ubuntu1804 (virtualbox, 0)\n```\n\n添加本地 box 到仓库\n\n```bash\n$ vagrant box add my-box-name box-path\n```\n\n删除 box\n\n```bash\n$ vagrant box remove my-box-name\n$ vagrant box remove my-box-name --box-version <version>    # 指定版本\n```\n\n更新 box\n\n```bash\n$ vagrant box update --box <box-name>\n```\n\n- [Command-Line Interface](https://www.vagrantup.com/docs/cli/)\n","slug":"vagrant-commands","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aks00rt5gqohpgty5pj"},{"title":"CentOS 6 搭建 SS 服务器（自动脚本）","date":"2019-02-07T12:27:33.000Z","_content":"\n以 [自建ss服务器教程](https://github.com/Alvin9999/new-pac/wiki/%E8%87%AA%E5%BB%BAss%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%95%99%E7%A8%8B) 为教程，使用 expect 编写了自动部署脚本。\n\n<!-- more --><!-- toc -->\n\n直接安装\n\n```bash\n$ wget -N --no-check-certificate https://raw.githubusercontent.com/wxnacy/wshell/master/bin/ssr/centos_install_ssr\n$ bash centos_install_ssr\n```\n\n执行完后服务器自动重启，稍后登陆执行命令，完成锐速加速\n\n```bash\n$ bash serverspeeder-all.sh\n```\n\n或者使用 [wshell](https://github.com/wxnacy/wshell) 进行安装\n\n\n原理：\n- 选用 CentOS6 系统\n- 安装 SSR 客户端\n- 使用锐速加速器\n\n使用 vultr 购买 CentOS 6 服务器，教程有很详细的讲解，不再赘述。\n\n## 安装 SSR\n\n```bash\n$ sudo yum install -y wget expect\n$ wget -N --no-check-certificate https://raw.githubusercontent.com/ToyoDAdoubi/doubi/master/ssr.sh && chmod +x ssr.sh\n```\n\n创建自动部署脚本 `install_ssr`\n\n```expect\n#!/usr/bin/env expect\n\nspawn sh -c \"bash ssr.sh\"\nexpect \"*1-15*\"\n# 安装\nsend \"1\\r\"\nexpect \"(默认: 2333):\"\nsend \"\\r\"\nexpect \"(默认: doub.io)\"\nsend \"\\r\"\nexpect \"(默认: 5. aes-128-ctr):\"\nsend \"10\\r\"\nexpect \"(默认: 2. auth_sha1_v4):\"\nsend \"\\r\"\nexpect \"*Y*n\"\nsend \"y\\r\"\nexpect \"(默认: 1. plain):\"\nsend \"\\r\"\nexpect \"(默认: 无限):\"\nsend \"\\r\"\nexpect \"(默认: 无限):\"\nsend \"\\r\"\nexpect \"(默认: 无限):\"\nsend \"\\r\"\nexpect \"*y*N*\"\nsend \"y\\r\"\nexpect \"*y*N*\"\nsend \"y\\r\"\ninteract\n```\n\n使用 expect 运行脚本\n\n```bash\n$ chmod +x install_ssr\n$ expect install_ssr\n```\n\n随后会使用教程使用的默认参数进行自动安装\n\n## 安装锐速\n\n```bash\n$ wget --no-check-certificate https://blog.asuhu.com/sh/ruisu.sh\n$ wget -N --no-check-certificate https://raw.githubusercontent.com/91yun/serverspeeder/master/serverspeeder-all.sh\n$ bash ruisu.sh\n```\n\n执行时间会有点长，完毕后机器会自动重启，稍后登陆在进行加速操作\n\n```bash\n$ bash serverspeeder-all.sh\n```\n","source":"_posts/2019-02-07-linux-install-ssr.md","raw":"---\ntitle: CentOS 6 搭建 SS 服务器（自动脚本）\ndate: 2019-02-07 12:27:33\ntags: [linux, ssr]\n---\n\n以 [自建ss服务器教程](https://github.com/Alvin9999/new-pac/wiki/%E8%87%AA%E5%BB%BAss%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%95%99%E7%A8%8B) 为教程，使用 expect 编写了自动部署脚本。\n\n<!-- more --><!-- toc -->\n\n直接安装\n\n```bash\n$ wget -N --no-check-certificate https://raw.githubusercontent.com/wxnacy/wshell/master/bin/ssr/centos_install_ssr\n$ bash centos_install_ssr\n```\n\n执行完后服务器自动重启，稍后登陆执行命令，完成锐速加速\n\n```bash\n$ bash serverspeeder-all.sh\n```\n\n或者使用 [wshell](https://github.com/wxnacy/wshell) 进行安装\n\n\n原理：\n- 选用 CentOS6 系统\n- 安装 SSR 客户端\n- 使用锐速加速器\n\n使用 vultr 购买 CentOS 6 服务器，教程有很详细的讲解，不再赘述。\n\n## 安装 SSR\n\n```bash\n$ sudo yum install -y wget expect\n$ wget -N --no-check-certificate https://raw.githubusercontent.com/ToyoDAdoubi/doubi/master/ssr.sh && chmod +x ssr.sh\n```\n\n创建自动部署脚本 `install_ssr`\n\n```expect\n#!/usr/bin/env expect\n\nspawn sh -c \"bash ssr.sh\"\nexpect \"*1-15*\"\n# 安装\nsend \"1\\r\"\nexpect \"(默认: 2333):\"\nsend \"\\r\"\nexpect \"(默认: doub.io)\"\nsend \"\\r\"\nexpect \"(默认: 5. aes-128-ctr):\"\nsend \"10\\r\"\nexpect \"(默认: 2. auth_sha1_v4):\"\nsend \"\\r\"\nexpect \"*Y*n\"\nsend \"y\\r\"\nexpect \"(默认: 1. plain):\"\nsend \"\\r\"\nexpect \"(默认: 无限):\"\nsend \"\\r\"\nexpect \"(默认: 无限):\"\nsend \"\\r\"\nexpect \"(默认: 无限):\"\nsend \"\\r\"\nexpect \"*y*N*\"\nsend \"y\\r\"\nexpect \"*y*N*\"\nsend \"y\\r\"\ninteract\n```\n\n使用 expect 运行脚本\n\n```bash\n$ chmod +x install_ssr\n$ expect install_ssr\n```\n\n随后会使用教程使用的默认参数进行自动安装\n\n## 安装锐速\n\n```bash\n$ wget --no-check-certificate https://blog.asuhu.com/sh/ruisu.sh\n$ wget -N --no-check-certificate https://raw.githubusercontent.com/91yun/serverspeeder/master/serverspeeder-all.sh\n$ bash ruisu.sh\n```\n\n执行时间会有点长，完毕后机器会自动重启，稍后登陆在进行加速操作\n\n```bash\n$ bash serverspeeder-all.sh\n```\n","slug":"linux-install-ssr","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2akt00rv5gqoap9kkpno"},{"title":"Golang 获取当前机器用户信息","date":"2019-02-17T16:58:09.000Z","_content":"\n在 Golang 语言中使用 `os/user` 包可以获取当前机器的用户信息。\n\n<!-- more --><!-- toc -->\n\n使用\n\n```go\npackage main\n\nimport (\n     \"fmt\"\n     \"os/user\"\n)\n\nfunc handleErr(err error){\n    if err != nil {\n        fmt.Println(err)\n    }\n}\n\nfunc main() {\n    u, err := user.Current()\n    handleErr(err)\n    fmt.Println(\"当前用户\")\n    fmt.Printf(\"Gid %s\\n\", u.Gid)\n    fmt.Printf(\"Uid %s\\n\", u.Uid)\n    fmt.Printf(\"Username %s\\n\", u.Username)\n    fmt.Printf(\"Name %s\\n\", u.Name)\n    fmt.Printf(\"HomeDir %s\\n\", u.HomeDir)\n    fmt.Println(\"\")\n\n\n    // 当前用户\n    // Gid 20\n    // Uid 501\n    // Username wxnacy\n    // Name wxnacy\n    // HomeDir /Users/wxnacy\n\n}\n```\n\nUser 结构体\n\n```go\ntype User struct {\n    Uid      string  // 用户的 ID\n    Gid      string  // 用户所属组的 ID，如果属于多个组，那么此 ID 为主组的 ID\n    Username string  // 用户名\n    Name     string  // 属组名称，如果属于多个组，那么此名称为主组的名称\n    HomeDir  string  // 用户的宿主目录\n}\n```\n\n**当前用户**\n\n```go\nfunc Current() (*User, error)\n```\n\n**通过 Uid 获取用户**\n\n```go\nfunc LookupId(uid string) (*User, error)\n```\n\n**通过 Username 获取用户**\n\n```go\nfunc Lookup(username string) (*User, error)\n```\n\n验证代码地址：https://github.com/wxnacy/study/blob/master/goland/src/simple/os_user.go\n","source":"_posts/2019-02-17-go-os-user.md","raw":"---\ntitle: Golang 获取当前机器用户信息\ndate: 2019-02-17 16:58:09\ntags: [go]\n---\n\n在 Golang 语言中使用 `os/user` 包可以获取当前机器的用户信息。\n\n<!-- more --><!-- toc -->\n\n使用\n\n```go\npackage main\n\nimport (\n     \"fmt\"\n     \"os/user\"\n)\n\nfunc handleErr(err error){\n    if err != nil {\n        fmt.Println(err)\n    }\n}\n\nfunc main() {\n    u, err := user.Current()\n    handleErr(err)\n    fmt.Println(\"当前用户\")\n    fmt.Printf(\"Gid %s\\n\", u.Gid)\n    fmt.Printf(\"Uid %s\\n\", u.Uid)\n    fmt.Printf(\"Username %s\\n\", u.Username)\n    fmt.Printf(\"Name %s\\n\", u.Name)\n    fmt.Printf(\"HomeDir %s\\n\", u.HomeDir)\n    fmt.Println(\"\")\n\n\n    // 当前用户\n    // Gid 20\n    // Uid 501\n    // Username wxnacy\n    // Name wxnacy\n    // HomeDir /Users/wxnacy\n\n}\n```\n\nUser 结构体\n\n```go\ntype User struct {\n    Uid      string  // 用户的 ID\n    Gid      string  // 用户所属组的 ID，如果属于多个组，那么此 ID 为主组的 ID\n    Username string  // 用户名\n    Name     string  // 属组名称，如果属于多个组，那么此名称为主组的名称\n    HomeDir  string  // 用户的宿主目录\n}\n```\n\n**当前用户**\n\n```go\nfunc Current() (*User, error)\n```\n\n**通过 Uid 获取用户**\n\n```go\nfunc LookupId(uid string) (*User, error)\n```\n\n**通过 Username 获取用户**\n\n```go\nfunc Lookup(username string) (*User, error)\n```\n\n验证代码地址：https://github.com/wxnacy/study/blob/master/goland/src/simple/os_user.go\n","slug":"go-os-user","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aku00rx5gqoyhjwwkvf"},{"title":"Go 简单了解 interface","date":"2019-02-19T15:08:51.000Z","_content":"\n在 Java 中 interface 是很常用的，因为父类单继承的特性，interface 可以让类的实现更加灵活。\n\n而同样在强类型的 GO 中，interface 也是必不可少的。\n\n<!-- more --><!-- toc -->\n\n## interface 的实现\n\n```go\ntype I interface {\n\n}\n```\n\ninterface 是一种**类型**，可以包含 0 或更多的方法，如果一个类型实现了一个 interface 的所有方法，则它实现了该 interface，比如：\n\n```go\npackage main\n// interface 的实现\n\nimport (\n     \"fmt\"\n)\n\ntype IUser interface {\n    SetName(string)\n    GetName() string\n}\n\ntype User struct {\n    name string\n}\n\n\nfunc (self User) GetName() string {\n    return self.name\n}\n\nfunc (self *User) SetName(name string) {\n    self.name = name\n}\n\nfunc main() {\n\n    var i IUser\n    i = &User{}\n    i.SetName(\"wxnacy\")\n    fmt.Println(i.GetName())\n    // wxnacy\n\n}\n```\n\n可以看到，因为 `SetName` 方法是在指针中实现的，所有 `i` 需要储存指针才可以实现 `struct` 中的所有方法\n\n## 判断 interface 存储值的类型\n\n使用 `i.(T)` 或 `i.(type)` 可以判断 interface 中储存的值，后者只能在 `switch` 中使用。\n\ni 是 interface 类型的变量，T 代表要断言的类型，value 是 interface 变量存储的值，ok 是 bool 类型表示是否为该断言的类型 T\n\n```go\nif t, ok := i.(*User); ok {\n    fmt.Println(t)\n}\n// &{User}\n```\n\n```go\nswitch t := m.(type) {\n    case Man: {\n        fmt.Println(\"m is \", t)\n    }\n    default: {\n        fmt.Println(\"m is default\")\n    }\n}\n\n// m is  {Man}\n```\n\n## 使用 interface 实现泛型\n\n强类型语言可以实现类似 Java 的泛型是必不可少的，在 Go 中可以使用 interface 来实现。\n\n```go\nfunc InArray(val interface{}, array interface{}) (index int){\n\n}\n```\n\n避免通过编写重复代码实现方法的多态，我们可以使用 `interface{}` 来传入任意类型，\n并使用 `reflect` 反射包来实现具体方法。\n\n我们使用该特性，实现一个判断数组中是否包含某值的方法\n\n```go\n// 利用 reflect 反射方法判断 val 是否包含在 array 中，如果包含返回索引位置\nfunc InArray(val interface{}, array interface{}) (index int) {\n    index = -1\n    switch reflect.TypeOf(array).Kind() {\n        case reflect.Slice: {\n            arr := reflect.ValueOf(array)\n            for i := 0; i < arr.Len(); i++ {\n                if reflect.DeepEqual(val, arr.Index(i).Interface()) {\n                    index = i\n                    return\n                }\n            }\n        }\n    }\n    return\n}\nvar arr = []int{1,2,3,4}\nfmt.Println(InArray(3, arr))\n// 2\n```\n\n- [reflact](https://golang.org/pkg/reflect)\n\nDemo 地址：https://github.com/wxnacy/study/tree/master/goland/src/interfaces\n","source":"_posts/2019-02-19-go-interface.md","raw":"---\ntitle: Go 简单了解 interface\ndate: 2019-02-19 15:08:51\ntags: [go]\n---\n\n在 Java 中 interface 是很常用的，因为父类单继承的特性，interface 可以让类的实现更加灵活。\n\n而同样在强类型的 GO 中，interface 也是必不可少的。\n\n<!-- more --><!-- toc -->\n\n## interface 的实现\n\n```go\ntype I interface {\n\n}\n```\n\ninterface 是一种**类型**，可以包含 0 或更多的方法，如果一个类型实现了一个 interface 的所有方法，则它实现了该 interface，比如：\n\n```go\npackage main\n// interface 的实现\n\nimport (\n     \"fmt\"\n)\n\ntype IUser interface {\n    SetName(string)\n    GetName() string\n}\n\ntype User struct {\n    name string\n}\n\n\nfunc (self User) GetName() string {\n    return self.name\n}\n\nfunc (self *User) SetName(name string) {\n    self.name = name\n}\n\nfunc main() {\n\n    var i IUser\n    i = &User{}\n    i.SetName(\"wxnacy\")\n    fmt.Println(i.GetName())\n    // wxnacy\n\n}\n```\n\n可以看到，因为 `SetName` 方法是在指针中实现的，所有 `i` 需要储存指针才可以实现 `struct` 中的所有方法\n\n## 判断 interface 存储值的类型\n\n使用 `i.(T)` 或 `i.(type)` 可以判断 interface 中储存的值，后者只能在 `switch` 中使用。\n\ni 是 interface 类型的变量，T 代表要断言的类型，value 是 interface 变量存储的值，ok 是 bool 类型表示是否为该断言的类型 T\n\n```go\nif t, ok := i.(*User); ok {\n    fmt.Println(t)\n}\n// &{User}\n```\n\n```go\nswitch t := m.(type) {\n    case Man: {\n        fmt.Println(\"m is \", t)\n    }\n    default: {\n        fmt.Println(\"m is default\")\n    }\n}\n\n// m is  {Man}\n```\n\n## 使用 interface 实现泛型\n\n强类型语言可以实现类似 Java 的泛型是必不可少的，在 Go 中可以使用 interface 来实现。\n\n```go\nfunc InArray(val interface{}, array interface{}) (index int){\n\n}\n```\n\n避免通过编写重复代码实现方法的多态，我们可以使用 `interface{}` 来传入任意类型，\n并使用 `reflect` 反射包来实现具体方法。\n\n我们使用该特性，实现一个判断数组中是否包含某值的方法\n\n```go\n// 利用 reflect 反射方法判断 val 是否包含在 array 中，如果包含返回索引位置\nfunc InArray(val interface{}, array interface{}) (index int) {\n    index = -1\n    switch reflect.TypeOf(array).Kind() {\n        case reflect.Slice: {\n            arr := reflect.ValueOf(array)\n            for i := 0; i < arr.Len(); i++ {\n                if reflect.DeepEqual(val, arr.Index(i).Interface()) {\n                    index = i\n                    return\n                }\n            }\n        }\n    }\n    return\n}\nvar arr = []int{1,2,3,4}\nfmt.Println(InArray(3, arr))\n// 2\n```\n\n- [reflact](https://golang.org/pkg/reflect)\n\nDemo 地址：https://github.com/wxnacy/study/tree/master/goland/src/interfaces\n","slug":"go-interface","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2akw00s05gqoi08ewicn"},{"title":"Python 单例的四种实现方式","date":"2019-02-18T16:21:49.000Z","_content":"\n设计模式中，单例模式是很常见的，今天总结下 Python 的几种实现方式。\n\n<!-- more --><!-- toc -->\n\n## 使用 import\n\n`import` 是 Python 中的天然单例模式，我最先推荐这种方式。\n\n创建两个文件 `signletion.py` `signletion_import.py`，文件内容如下\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description: import 需要的部分\n\nclass User():\n    def __new__(cls, *args, **kw):\n        print(\"new instance\")\n        return super().__new__(cls, *args, **kw)\n\n    def get(self):\n        print(\"get class\")\n\n\nu = User()\nu.get()\n```\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description: import 模式\n\nfrom singletion import u\n\nu.get()\n\n# 输出结果：\n# new instance\n# get class\n# get class\n```\n\n运行结果只输出一次 `new instance`，代表只生成一个实例，创建单例成功，后续我们都用这种验证方式。\n\n## 使用 __new__ 方法\n\n直接修改 `__new__` 方法，类似 Java 的实现方式，实际开发中，我们可以在父类中实现方法，并继承\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description: 使用 __new__ 方法\n\nclass Singletion():\n    def __new__(cls, *args, **kw):\n        if not hasattr(cls, '_instance'):\n            print(\"new instance\")\n            cls._instance = super().__new__(cls, *args, **kw)\n        return cls._instance\n\nclass SingClass(Singletion):\n    def get(self):\n        print(\"get class\")\n\nc = SingClass()\nc.get()\n\nc1 = SingClass()\nc1.get()\n\n# 输出结果：\n# new instance\n# get class\n# get class\n```\n\n## 使用装饰器\n\n装饰器是比较 Python 的方式，内部实现跟 `__new__` 很像，判断已经有实例则不再生成。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description: 装饰器模式\n\ndef singletion(cls):\n    instance = {}\n    def get_instance(*args, **kw):\n        if cls not in instance:\n            print(\"new instance\")\n            instance[cls] = cls(*args, **kw)\n        return instance[cls]\n    return get_instance\n\n@singletion\nclass User():\n    def get(self):\n        print(\"get class\")\n\nu = User()\nu.get()\nu1 = User()\nu1.get()\n\n# 输出结果：\n# new instance\n# get class\n# get class\n```\n\n## 使用元类\n\n元类同样是 Python 特有的，不过并不常用，我们可以利用它的特性来实现单例\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description: 使用元类\n\nclass Singleton(type):\n    _instances = {}\n    def __call__(cls, *args, **kwargs):\n        if cls not in cls._instances:\n            print(\"new instance\")\n            cls._instances[cls] = super().__call__(*args, **kwargs)\n        return cls._instances[cls]\n\nclass SingClass(metaclass=Singleton):\n    def get(self):\n        print(\"get class\")\n\nc = SingClass()\nc.get()\n\nc1 = SingClass()\nc1.get()\n\n# 输出结果：\n# new instance\n# get class\n# get class\n```\n\n完整 demo 地址：https://github.com/wxnacy/study/tree/master/python/singletion\n","source":"_posts/2019-02-18-python-signletion.md","raw":"---\ntitle: Python 单例的四种实现方式\ndate: 2019-02-18 16:21:49\ntags: [python]\n---\n\n设计模式中，单例模式是很常见的，今天总结下 Python 的几种实现方式。\n\n<!-- more --><!-- toc -->\n\n## 使用 import\n\n`import` 是 Python 中的天然单例模式，我最先推荐这种方式。\n\n创建两个文件 `signletion.py` `signletion_import.py`，文件内容如下\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description: import 需要的部分\n\nclass User():\n    def __new__(cls, *args, **kw):\n        print(\"new instance\")\n        return super().__new__(cls, *args, **kw)\n\n    def get(self):\n        print(\"get class\")\n\n\nu = User()\nu.get()\n```\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description: import 模式\n\nfrom singletion import u\n\nu.get()\n\n# 输出结果：\n# new instance\n# get class\n# get class\n```\n\n运行结果只输出一次 `new instance`，代表只生成一个实例，创建单例成功，后续我们都用这种验证方式。\n\n## 使用 __new__ 方法\n\n直接修改 `__new__` 方法，类似 Java 的实现方式，实际开发中，我们可以在父类中实现方法，并继承\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description: 使用 __new__ 方法\n\nclass Singletion():\n    def __new__(cls, *args, **kw):\n        if not hasattr(cls, '_instance'):\n            print(\"new instance\")\n            cls._instance = super().__new__(cls, *args, **kw)\n        return cls._instance\n\nclass SingClass(Singletion):\n    def get(self):\n        print(\"get class\")\n\nc = SingClass()\nc.get()\n\nc1 = SingClass()\nc1.get()\n\n# 输出结果：\n# new instance\n# get class\n# get class\n```\n\n## 使用装饰器\n\n装饰器是比较 Python 的方式，内部实现跟 `__new__` 很像，判断已经有实例则不再生成。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description: 装饰器模式\n\ndef singletion(cls):\n    instance = {}\n    def get_instance(*args, **kw):\n        if cls not in instance:\n            print(\"new instance\")\n            instance[cls] = cls(*args, **kw)\n        return instance[cls]\n    return get_instance\n\n@singletion\nclass User():\n    def get(self):\n        print(\"get class\")\n\nu = User()\nu.get()\nu1 = User()\nu1.get()\n\n# 输出结果：\n# new instance\n# get class\n# get class\n```\n\n## 使用元类\n\n元类同样是 Python 特有的，不过并不常用，我们可以利用它的特性来实现单例\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description: 使用元类\n\nclass Singleton(type):\n    _instances = {}\n    def __call__(cls, *args, **kwargs):\n        if cls not in cls._instances:\n            print(\"new instance\")\n            cls._instances[cls] = super().__call__(*args, **kwargs)\n        return cls._instances[cls]\n\nclass SingClass(metaclass=Singleton):\n    def get(self):\n        print(\"get class\")\n\nc = SingClass()\nc.get()\n\nc1 = SingClass()\nc1.get()\n\n# 输出结果：\n# new instance\n# get class\n# get class\n```\n\n完整 demo 地址：https://github.com/wxnacy/study/tree/master/python/singletion\n","slug":"python-signletion","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2akx00s25gqo4wqiasz8"},{"title":"Vimscript 判断文件是否存在","date":"2019-02-21T18:28:52.000Z","_content":"\n在 `~/.vimrc` 我希望可以通过判断当前环境是否含有某插件，再加载相应的参数配置，此时可以通过判断文件是否存在来完成。\n\n<!-- more --><!-- toc -->\n\n```vim\nif filereadable('test.txt')    \" 判断文件是否存在\"\n    echo 'file is exists'\nendif\n```\n\n文件路径可以加上环境变量，用 `.` 链接\n\n```vim\n$HOME . '/.vim/bundle/jedi-vim/Makefile'\n```\n\n或者使用 `expand()` 函数\n\n```vim\nexpand(\"$HOME/.vim/bundle/jedi-vim/Makefile\")\n```\n\n完整代码\n\n```vim\nif filereadable(expand(\"$HOME/.vim/bundle/jedi-vim/Makefile\"))    \" 判断文件是否存在\"\n    echo 'jedi-vim is exists'\nendif\n```\n","source":"_posts/2019-02-21-vimscript-file-exists.md","raw":"---\ntitle: Vimscript 判断文件是否存在\ndate: 2019-02-21 18:28:52\ntags: [vim]\n---\n\n在 `~/.vimrc` 我希望可以通过判断当前环境是否含有某插件，再加载相应的参数配置，此时可以通过判断文件是否存在来完成。\n\n<!-- more --><!-- toc -->\n\n```vim\nif filereadable('test.txt')    \" 判断文件是否存在\"\n    echo 'file is exists'\nendif\n```\n\n文件路径可以加上环境变量，用 `.` 链接\n\n```vim\n$HOME . '/.vim/bundle/jedi-vim/Makefile'\n```\n\n或者使用 `expand()` 函数\n\n```vim\nexpand(\"$HOME/.vim/bundle/jedi-vim/Makefile\")\n```\n\n完整代码\n\n```vim\nif filereadable(expand(\"$HOME/.vim/bundle/jedi-vim/Makefile\"))    \" 判断文件是否存在\"\n    echo 'jedi-vim is exists'\nendif\n```\n","slug":"vimscript-file-exists","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aky00s45gqokl0pnnqm"},{"title":"Vim8 内置插件管理方案","date":"2019-02-26T17:42:43.000Z","_content":"\nVim8，更新到这个版本，Vim 终于有自己的插件管理方案，引入了 `packages` 的概念。\n\n<!-- more --><!-- toc -->\n\n如果你对 [pathogen](/2017/09/20/vim-plugin-pathogen/) 了解的话，应该会很喜欢这种方案，跟它一样，你只需要将插件扔到指定的目录下，Vim 会自动加载这个插件。\n\n假如你有插件 `nerdtree`，现在只需要在放在 `~/.vim/pack/vendor/start/` 目录下即可。\n\nVim8 会自动加载 \n\n```bash\n~/.vim/pack/*/start/\n```\n\n目录下的插件，换句话说我也可以把它放在 `~/.vim/pack/foo/start/` 下，`*` 所代表的目录是任意值。\n\n而那些我们不想自动加载的插件可以放到 `opt` 目录下\n\n```bash\n~/.vim/pack/*/opt\n```\n\n随后在 `~/.vimrc` 中使用 `packadd` 来手动加载插件，有应用场景如下\n\n```vim\nif foo_compiler_version > 34\n    packadd foo_new\nelse\n    packadd foo_old\nendif\n```\n\n我们可以根据某个编译版本来选择使用插件的版本。\n\n查看文档 `:h packages` 获取更多信息。\n","source":"_posts/2019-02-26-vim8-pack.md","raw":"---\ntitle: Vim8 内置插件管理方案\ndate: 2019-02-26 17:42:43\ntags: [vim]\n---\n\nVim8，更新到这个版本，Vim 终于有自己的插件管理方案，引入了 `packages` 的概念。\n\n<!-- more --><!-- toc -->\n\n如果你对 [pathogen](/2017/09/20/vim-plugin-pathogen/) 了解的话，应该会很喜欢这种方案，跟它一样，你只需要将插件扔到指定的目录下，Vim 会自动加载这个插件。\n\n假如你有插件 `nerdtree`，现在只需要在放在 `~/.vim/pack/vendor/start/` 目录下即可。\n\nVim8 会自动加载 \n\n```bash\n~/.vim/pack/*/start/\n```\n\n目录下的插件，换句话说我也可以把它放在 `~/.vim/pack/foo/start/` 下，`*` 所代表的目录是任意值。\n\n而那些我们不想自动加载的插件可以放到 `opt` 目录下\n\n```bash\n~/.vim/pack/*/opt\n```\n\n随后在 `~/.vimrc` 中使用 `packadd` 来手动加载插件，有应用场景如下\n\n```vim\nif foo_compiler_version > 34\n    packadd foo_new\nelse\n    packadd foo_old\nendif\n```\n\n我们可以根据某个编译版本来选择使用插件的版本。\n\n查看文档 `:h packages` 获取更多信息。\n","slug":"vim8-pack","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2al000s65gqojyf56tol"},{"title":"简单理解时间复杂度","date":"2019-02-20T15:01:12.000Z","_content":"\n\n时间复杂度是一个及基础又重要，但却不那么显性的概念。对于很多程序员来说仿佛只会出现在面试题里，因为不了解它好像也不影响我开发程序。\n\n时间复杂度是算法的一个重要概念，但并不是一句重要就可以逼着别人去学习的，首先我们要提出三问。\n\n<!-- more --><!-- toc -->\n\n## 第一问，为什么要使用时间复杂度\n\n一个算法在证明**数学正确性**后，我们要关心它的运行时间，这是一个程序性能的重要指标。\n\n算法的时间可以通过实际运行得到，但有两个缺点\n\n- 复杂的算法通过开发到运行后在又优化，流程会很长，整体操作时间长，很不方便\n- 运行时间受硬件、软件的影响，这对我们评估算法本身存在影响\n\n我们更希望可以在运行前，或者在编写前就预估出可能执行的“时间”。\n\n所以引入了**时间复杂度**的概念，时间复杂度不是计算算法运行时间，而是估算出算法的复杂度，是个量级的概念。我们可以通过可能出现的时间复杂度，来选择可以接受的算法。\n\n## 第二问，什么是时间复杂度\n\n> **时间频度** 一个算法执行所耗费的时间，从理论上是不能算出来的，必须上机运行测试才能知道。但我们不可能也没有必要对每个算法都上机测试，只需知道哪个算法花费的时间多，哪个算法花费的时间少就可以了。并且一个算法花费的时间与算法中语句的执行次数成正比例，哪个算法中语句执行次数多，它花费时间就多。一个算法中的语句执行次数称为语句频度或时间频度。记为T(n)。\n\n> **时间复杂度** 在刚才提到的时间频度中，n称为问题的规模，当n不断变化时，时间频度T(n)也会不断变化。但有时我们想知道它变化时呈现什么规律。为此，我们引入时间复杂度概念。 一般情况下，算法中基本操作重复执行的次数是问题规模n的某个函数，用T(n)表示，若有某个辅助函数f(n),使得当n趋近于无穷大时，T(n)/f(n)的极限值为不等于零的常数，则称f(n)是T(n)的同数量级函数。记作T(n)=Ｏ(f(n)),称Ｏ(f(n)) 为算法的渐进时间复杂度，简称时间复杂度。\n\n简单总结为\n\n- `n` 为算法使用者可以传入的变量，通常时间复杂度受该参数影响。\n- `T(n)` 算法的运行次数，次数随着 n 的变化，而变化。\n- `O(f(n))` 算法运行次数变化的规律，也就是时间复杂度，以大写的 O 为符号标记。\n- `f(n)` 时间复杂度的值，是个近似值。\n\n举个例子\n\n```java\nconsole.log(\"Hello World\");\n```\n\n执行一次 `Hello World` 语句，我们称为一次运算，这个算法的时间复杂度就是 `O(1)`，也称为常数阶。\n\n```java\nfor(var i = 0; i < n; i++){\n    console.log(i);\n}\n```\n\n在这个算法里，`console.log(i);` 的执行次数，随着参数 `n` 的变化而变化，那么这个算法的时间复杂度为 `O(n)`，也称为线性阶。\n\n```java\nfor(var i = 0; i < n; i++){\n    for(var j = 0; j < n; j++){\n        console.log(i + j);\n    }\n}\n```\n\n在这个算法里，`console.log(i + j);` 的执行次数为 `n * n`，那么时间复杂度就是 `O(n^2)`，也成为平方阶。\n\n在后续的描述中，***`^` 符号代表后面跟的是上角标，`_` 符号代表后面跟着下角标。***\n\n通过这几个例子，我们可以得到计算时间复杂度的三个步骤\n\n- 找出算法的基本运行语句\n- 计算运行次数的量级\n- 使用 O 将其标记起来\n\n## 第三问，如何计算时间复杂度\n\n计算时间复杂度也就是计算函数 `f(n)` 的值，是一个**量级**，在复杂算法中，时间复杂度关心的是最大的量级。\n\n计算方式有如下规则\n\n- 不受参数 `n` 影响的运算次数，我们用常量 `C` 表示，当算法有参数 `n` 时，`C` 可以忽略不计，否则用 `1` 代替。(常数变1，然后去常数，去常参)\n- 不受 `for` 循环影响的运算次数，使用加减法计算，否则使用乘法计算。\n- 在最后的计算公式中，我们使用最大量级的值，来代表整个算法的时间复杂度。（去低阶）\n\n举几个例子\n\n**常量变 1**\n\n```java\nconsole.log(\"Hello World\");     // 1\nconsole.log(\"Hello World\");     // 1\nconsole.log(\"Hello World\");     // 1\n```\n\n可以推导出\n\n```bash\nf(n) = Θ(1 + 1 + 1) = 1 # Θ 表示常量变1、去常数、去常参、去低阶\nT(n) = O(f(n)) = O(1)\n```\n\n**去常数**\n\n```java\nconsole.log(\"Hello World\");     // 1\nconsole.log(\"Hello World\");     // 1\nfor(var i = 0; i < n; i++){     // n\n    console.log(\"Hello World\"); // 1\n}\n```\n\n推导公式\n\n```bash\nf(n) = Θ(1 + 1 + n * 1) = Θ(2 + n) = n\nT(n) = O(f(n)) = O(n)\n```\n\n**为什么可以去掉常量？**，当 `n` 趋近无穷大时，所以的常量都可以忽略不计，时间复杂度只关心最大的量级，所以可以去掉常量。\n\n**去常参**\n\n```java\nconsole.log(\"Hello World\");         // 1\nfor(var i = 0; i < n; i++){         // n\n    console.log(\"Hello World \");    // 1\n}\nfor(var i = 0; i < n; i++){         // n\n    console.log(\"Hello World \");    // 1\n}\n```\n\n推导公式\n\n```bash\nf(n) = Θ(1 + n * 1 + n * 1) = Θ(1 + 2n) = n\nT(n) = O(f(n)) = O(n)\n```\n\n**去低阶**\n\n```java\nfor(var i = 0; i < n; i++){         // n\n    console.log(\"Hello World \");    // 1\n}\nfor(var i = 1; i < n; i++){         // n - 1\n    for(var j = 1; j < n; j++){     // n - 1\n        console.log(\"Hello World \");// 1\n    }\n}\n```\n\n推导公式\n\n```bash\nf(n) = Θ(n * 1 + (n - 1) * (n - 1) * 1) = Θ(n + n * n) = Θ(n + n^2) = n^2\nT(n) = O(f(n)) = O(n)\n```\n\n**为什么可以去低阶?**，同样的道理，当 `n` 趋近无穷时，`n` 在 `n^2` 的量级面前不止一提，所以我们可以去低阶。\n\n## 更多的时间复杂度\n\n前面我提到了三种时间复杂度，分别为常数阶 `O(1)`、线性阶 `O(n)`、平方阶 `O(n^2)`\n\n常用的时间复杂度还有：对数阶 `O(log_2n)`、线性对数阶 `O(nlog_2n)`、立方阶 `O(n^3)`、k 次方阶 `O(n^k)`、指数阶 `O(2^n)/O(n!)`\n\n**对数阶例子**\n\n```java\nvar i = 1\nwhile(1 <= n) {\n    i = i * 2\n}\n```\n\n推导公式需要使用到对数，假设 `while` 运行的次数为 `k`\n\n```bash\nn = 2^(k-1)\nk = log_2n + 1\nf(n) = Θ(1 + log_2n + 1) = log_2n\nT(n) = O(f(n)) = O(log_2n)\n```\n\n**O(n!) 例子**\n\n```bash\nvoid nFacRuntimeFunc(int n) {\n  for(int i=0; i<n; i++) {\n    nFacRuntimeFunc(n-1);\n  }\n}\n```\n\n常见的算法时间复杂度由小到大依次为：`Ο(1)＜Ο(log_2n)＜Ο(n)＜Ο(nlog_2n)＜Ο(n^2)＜Ο(n^3)＜…＜Ο(2^n)＜Ο(n!)`\n\n- 常数阶算法不包含任务循环语句和回调函数，我们不用担心此类算法的运算时间\n- 对数阶、线性阶和次方阶，称为多项时间。通常包含循环语句，此类算法归为 **P（Polynomial,多项式）类问题**\n- 指数阶，称为指数时间。通常包含回调函数，此类算法归为 **NP（Non-Deterministic Polynomial, 非确定多项式）问题**\n\n一般我们认为常数阶、对数阶、线性阶是可以接收的时间复杂度，因为次方阶和指数阶 `n` 的变量稍微变大，运行时间就成指数增加，让程序无法动弹。\n\n通过这篇文章应该可以简单的了解时间复杂度，并可以计算常见的算法时间复杂度，但是仍需要不断的练习才可以熟练掌握。\n\n参考资料\n\n- [（数据结构）十分钟搞定时间复杂度（算法的时间复杂度）](https://www.jianshu.com/p/f4cca5ce055a)\n- [算法的时间复杂度和空间复杂度-总结](https://blog.csdn.net/zolalad/article/details/11848739)\n","source":"_posts/2019-02-20-time-complexity.md","raw":"---\ntitle: 简单理解时间复杂度\ntags:\n  - 算法\ndate: 2019-02-20 15:01:12\n---\n\n\n时间复杂度是一个及基础又重要，但却不那么显性的概念。对于很多程序员来说仿佛只会出现在面试题里，因为不了解它好像也不影响我开发程序。\n\n时间复杂度是算法的一个重要概念，但并不是一句重要就可以逼着别人去学习的，首先我们要提出三问。\n\n<!-- more --><!-- toc -->\n\n## 第一问，为什么要使用时间复杂度\n\n一个算法在证明**数学正确性**后，我们要关心它的运行时间，这是一个程序性能的重要指标。\n\n算法的时间可以通过实际运行得到，但有两个缺点\n\n- 复杂的算法通过开发到运行后在又优化，流程会很长，整体操作时间长，很不方便\n- 运行时间受硬件、软件的影响，这对我们评估算法本身存在影响\n\n我们更希望可以在运行前，或者在编写前就预估出可能执行的“时间”。\n\n所以引入了**时间复杂度**的概念，时间复杂度不是计算算法运行时间，而是估算出算法的复杂度，是个量级的概念。我们可以通过可能出现的时间复杂度，来选择可以接受的算法。\n\n## 第二问，什么是时间复杂度\n\n> **时间频度** 一个算法执行所耗费的时间，从理论上是不能算出来的，必须上机运行测试才能知道。但我们不可能也没有必要对每个算法都上机测试，只需知道哪个算法花费的时间多，哪个算法花费的时间少就可以了。并且一个算法花费的时间与算法中语句的执行次数成正比例，哪个算法中语句执行次数多，它花费时间就多。一个算法中的语句执行次数称为语句频度或时间频度。记为T(n)。\n\n> **时间复杂度** 在刚才提到的时间频度中，n称为问题的规模，当n不断变化时，时间频度T(n)也会不断变化。但有时我们想知道它变化时呈现什么规律。为此，我们引入时间复杂度概念。 一般情况下，算法中基本操作重复执行的次数是问题规模n的某个函数，用T(n)表示，若有某个辅助函数f(n),使得当n趋近于无穷大时，T(n)/f(n)的极限值为不等于零的常数，则称f(n)是T(n)的同数量级函数。记作T(n)=Ｏ(f(n)),称Ｏ(f(n)) 为算法的渐进时间复杂度，简称时间复杂度。\n\n简单总结为\n\n- `n` 为算法使用者可以传入的变量，通常时间复杂度受该参数影响。\n- `T(n)` 算法的运行次数，次数随着 n 的变化，而变化。\n- `O(f(n))` 算法运行次数变化的规律，也就是时间复杂度，以大写的 O 为符号标记。\n- `f(n)` 时间复杂度的值，是个近似值。\n\n举个例子\n\n```java\nconsole.log(\"Hello World\");\n```\n\n执行一次 `Hello World` 语句，我们称为一次运算，这个算法的时间复杂度就是 `O(1)`，也称为常数阶。\n\n```java\nfor(var i = 0; i < n; i++){\n    console.log(i);\n}\n```\n\n在这个算法里，`console.log(i);` 的执行次数，随着参数 `n` 的变化而变化，那么这个算法的时间复杂度为 `O(n)`，也称为线性阶。\n\n```java\nfor(var i = 0; i < n; i++){\n    for(var j = 0; j < n; j++){\n        console.log(i + j);\n    }\n}\n```\n\n在这个算法里，`console.log(i + j);` 的执行次数为 `n * n`，那么时间复杂度就是 `O(n^2)`，也成为平方阶。\n\n在后续的描述中，***`^` 符号代表后面跟的是上角标，`_` 符号代表后面跟着下角标。***\n\n通过这几个例子，我们可以得到计算时间复杂度的三个步骤\n\n- 找出算法的基本运行语句\n- 计算运行次数的量级\n- 使用 O 将其标记起来\n\n## 第三问，如何计算时间复杂度\n\n计算时间复杂度也就是计算函数 `f(n)` 的值，是一个**量级**，在复杂算法中，时间复杂度关心的是最大的量级。\n\n计算方式有如下规则\n\n- 不受参数 `n` 影响的运算次数，我们用常量 `C` 表示，当算法有参数 `n` 时，`C` 可以忽略不计，否则用 `1` 代替。(常数变1，然后去常数，去常参)\n- 不受 `for` 循环影响的运算次数，使用加减法计算，否则使用乘法计算。\n- 在最后的计算公式中，我们使用最大量级的值，来代表整个算法的时间复杂度。（去低阶）\n\n举几个例子\n\n**常量变 1**\n\n```java\nconsole.log(\"Hello World\");     // 1\nconsole.log(\"Hello World\");     // 1\nconsole.log(\"Hello World\");     // 1\n```\n\n可以推导出\n\n```bash\nf(n) = Θ(1 + 1 + 1) = 1 # Θ 表示常量变1、去常数、去常参、去低阶\nT(n) = O(f(n)) = O(1)\n```\n\n**去常数**\n\n```java\nconsole.log(\"Hello World\");     // 1\nconsole.log(\"Hello World\");     // 1\nfor(var i = 0; i < n; i++){     // n\n    console.log(\"Hello World\"); // 1\n}\n```\n\n推导公式\n\n```bash\nf(n) = Θ(1 + 1 + n * 1) = Θ(2 + n) = n\nT(n) = O(f(n)) = O(n)\n```\n\n**为什么可以去掉常量？**，当 `n` 趋近无穷大时，所以的常量都可以忽略不计，时间复杂度只关心最大的量级，所以可以去掉常量。\n\n**去常参**\n\n```java\nconsole.log(\"Hello World\");         // 1\nfor(var i = 0; i < n; i++){         // n\n    console.log(\"Hello World \");    // 1\n}\nfor(var i = 0; i < n; i++){         // n\n    console.log(\"Hello World \");    // 1\n}\n```\n\n推导公式\n\n```bash\nf(n) = Θ(1 + n * 1 + n * 1) = Θ(1 + 2n) = n\nT(n) = O(f(n)) = O(n)\n```\n\n**去低阶**\n\n```java\nfor(var i = 0; i < n; i++){         // n\n    console.log(\"Hello World \");    // 1\n}\nfor(var i = 1; i < n; i++){         // n - 1\n    for(var j = 1; j < n; j++){     // n - 1\n        console.log(\"Hello World \");// 1\n    }\n}\n```\n\n推导公式\n\n```bash\nf(n) = Θ(n * 1 + (n - 1) * (n - 1) * 1) = Θ(n + n * n) = Θ(n + n^2) = n^2\nT(n) = O(f(n)) = O(n)\n```\n\n**为什么可以去低阶?**，同样的道理，当 `n` 趋近无穷时，`n` 在 `n^2` 的量级面前不止一提，所以我们可以去低阶。\n\n## 更多的时间复杂度\n\n前面我提到了三种时间复杂度，分别为常数阶 `O(1)`、线性阶 `O(n)`、平方阶 `O(n^2)`\n\n常用的时间复杂度还有：对数阶 `O(log_2n)`、线性对数阶 `O(nlog_2n)`、立方阶 `O(n^3)`、k 次方阶 `O(n^k)`、指数阶 `O(2^n)/O(n!)`\n\n**对数阶例子**\n\n```java\nvar i = 1\nwhile(1 <= n) {\n    i = i * 2\n}\n```\n\n推导公式需要使用到对数，假设 `while` 运行的次数为 `k`\n\n```bash\nn = 2^(k-1)\nk = log_2n + 1\nf(n) = Θ(1 + log_2n + 1) = log_2n\nT(n) = O(f(n)) = O(log_2n)\n```\n\n**O(n!) 例子**\n\n```bash\nvoid nFacRuntimeFunc(int n) {\n  for(int i=0; i<n; i++) {\n    nFacRuntimeFunc(n-1);\n  }\n}\n```\n\n常见的算法时间复杂度由小到大依次为：`Ο(1)＜Ο(log_2n)＜Ο(n)＜Ο(nlog_2n)＜Ο(n^2)＜Ο(n^3)＜…＜Ο(2^n)＜Ο(n!)`\n\n- 常数阶算法不包含任务循环语句和回调函数，我们不用担心此类算法的运算时间\n- 对数阶、线性阶和次方阶，称为多项时间。通常包含循环语句，此类算法归为 **P（Polynomial,多项式）类问题**\n- 指数阶，称为指数时间。通常包含回调函数，此类算法归为 **NP（Non-Deterministic Polynomial, 非确定多项式）问题**\n\n一般我们认为常数阶、对数阶、线性阶是可以接收的时间复杂度，因为次方阶和指数阶 `n` 的变量稍微变大，运行时间就成指数增加，让程序无法动弹。\n\n通过这篇文章应该可以简单的了解时间复杂度，并可以计算常见的算法时间复杂度，但是仍需要不断的练习才可以熟练掌握。\n\n参考资料\n\n- [（数据结构）十分钟搞定时间复杂度（算法的时间复杂度）](https://www.jianshu.com/p/f4cca5ce055a)\n- [算法的时间复杂度和空间复杂度-总结](https://blog.csdn.net/zolalad/article/details/11848739)\n","slug":"time-complexity","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2al100s85gqo2qid6nr2"},{"title":"Mysql insert ... on duplicate key update 的用法及在 SQLAlchemy 中的使用","date":"2019-02-24T12:09:12.000Z","_content":"\n在项目高并发时，很容易出现数据库插入相同数据的情况，虽然可以使用唯一索引避免插入相同数据，但是不断的程序报错也是我们也避免的。\n\n<!-- more --><!-- toc -->\n\n## 语法\n\n使用 `insert ... on duplicate key update ..` 语法可以避免这种情况，举个例子\n\n```mysql\ndrop table if exists `test`;\ncreate table `test` (\n\t`id` int(11) not null AUTO_INCREMENT,\n\t`name` varchar(32) not null default '',\n\t`update_ts` timestamp not null default current_timestamp(),\n\tprimary key (`id`)\n) engine=InnoDB default charset=utf8mb4;\n```\n\n主键 `id` 是天然的唯一索引，我们插入重复数据时会报错\n\n```mysql\n> INSERT INTO test (id, name) VALUES (1, 'wxnacy');\n> INSERT INTO test (id, name) VALUES (1, 'wxnacy');\nError 1062: Duplicate entry '1' for key 'PRIMARY'\n```\n\n查看数据\n\n```mysql\n> SELECT * FROM `test`;\n| id | name   | update_ts           |\n|------------------------------------\n| 1  | wxnacy | 2019-02-24 12:26:58 |\n```\n\n下面我们来换个语句\n\n```mysql\n> insert into test (id, name) values (1, 'wxnacy') on duplicate key update update_ts = current_timestamp();\n> SELECT * FROM `test`;\n\n+----+--------+---------------------+\n| id | name   | update_ts           |\n+----+--------+---------------------+\n|  1 | wxnacy | 2019-02-24 12:31:49 |\n+----+--------+---------------------+\n```\n\n`on duplicate key update` 前面是正常的插入语句，其后跟着的是当唯一索引冲突时，想要更新的数据。\n\n再换个使用场景，如果我想让数据库中用户名是唯一的，则可以先建立唯一索引，在使用该语法。\n\n```mysql\n> alter table test add unique index_name (name);\n> insert into test (name) values ('wenn') on duplicate key update update_ts = current_timestamp();\n> SELECT * FROM `test`;\n+----+--------+---------------------+\n| id | name   | update_ts           |\n+----+--------+---------------------+\n|  1 | wxnacy | 2019-02-24 12:31:49 |\n|  2 | wenn   | 2019-02-24 12:39:25 |\n+----+--------+---------------------+\n\n> insert into test (name) values ('wenn') on duplicate key update update_ts = current_timestamp();\n> SELECT * FROM `test`;\n\n+----+--------+---------------------+\n| id | name   | update_ts           |\n+----+--------+---------------------+\n|  1 | wxnacy | 2019-02-24 12:31:49 |\n|  2 | wenn   | 2019-02-24 12:40:15 |\n+----+--------+---------------------+\n```\n\n这样及保证了避免插入重复数据，同时程序也没有报错，我还可以根据 `update` 的数据来分析问题的根源。\n\n## SQLAlchemy 中的使用\n\n这个功能需要 SQLAlchemy 1.2 版本以上才支持，官方的例子\n\n```python\nfrom sqlalchemy.dialects.mysql import insert\n\ninsert_stmt = insert(my_table). \\\n    values(id='some_id', data='some data to insert')\n\non_conflict_stmt = insert_stmt.on_duplicate_key_update(\n    data=insert_stmt.inserted.data,\n    status='U'\n)\n\nconn.execute(on_conflict_stmt)\n```\n\n析出的 sql 语句为\n\n```mysql\nINSERT INTO my_table (id, data)\nVALUES (:id, :data)\nON DUPLICATE KEY UPDATE data=VALUES(data), status=:status_1\n```\n\n参考资料\n\n- [INSERT ... ON DUPLICATE KEY UPDATE Syntax](https://dev.mysql.com/doc/refman/8.0/en/insert-on-duplicate.html)\n- [Support for INSERT..ON DUPLICATE KEY UPDATE](https://docs.sqlalchemy.org/en/latest/changelog/migration_12.html#support-for-insert-on-duplicate-key-update)\n","source":"_posts/2019-02-24-mysql-insert-on-duplicate-key-update.md","raw":"---\ntitle: Mysql insert ... on duplicate key update 的用法及在 SQLAlchemy 中的使用\ndate: 2019-02-24 12:09:12\ntags: [mysql, sqlalchemy]\n---\n\n在项目高并发时，很容易出现数据库插入相同数据的情况，虽然可以使用唯一索引避免插入相同数据，但是不断的程序报错也是我们也避免的。\n\n<!-- more --><!-- toc -->\n\n## 语法\n\n使用 `insert ... on duplicate key update ..` 语法可以避免这种情况，举个例子\n\n```mysql\ndrop table if exists `test`;\ncreate table `test` (\n\t`id` int(11) not null AUTO_INCREMENT,\n\t`name` varchar(32) not null default '',\n\t`update_ts` timestamp not null default current_timestamp(),\n\tprimary key (`id`)\n) engine=InnoDB default charset=utf8mb4;\n```\n\n主键 `id` 是天然的唯一索引，我们插入重复数据时会报错\n\n```mysql\n> INSERT INTO test (id, name) VALUES (1, 'wxnacy');\n> INSERT INTO test (id, name) VALUES (1, 'wxnacy');\nError 1062: Duplicate entry '1' for key 'PRIMARY'\n```\n\n查看数据\n\n```mysql\n> SELECT * FROM `test`;\n| id | name   | update_ts           |\n|------------------------------------\n| 1  | wxnacy | 2019-02-24 12:26:58 |\n```\n\n下面我们来换个语句\n\n```mysql\n> insert into test (id, name) values (1, 'wxnacy') on duplicate key update update_ts = current_timestamp();\n> SELECT * FROM `test`;\n\n+----+--------+---------------------+\n| id | name   | update_ts           |\n+----+--------+---------------------+\n|  1 | wxnacy | 2019-02-24 12:31:49 |\n+----+--------+---------------------+\n```\n\n`on duplicate key update` 前面是正常的插入语句，其后跟着的是当唯一索引冲突时，想要更新的数据。\n\n再换个使用场景，如果我想让数据库中用户名是唯一的，则可以先建立唯一索引，在使用该语法。\n\n```mysql\n> alter table test add unique index_name (name);\n> insert into test (name) values ('wenn') on duplicate key update update_ts = current_timestamp();\n> SELECT * FROM `test`;\n+----+--------+---------------------+\n| id | name   | update_ts           |\n+----+--------+---------------------+\n|  1 | wxnacy | 2019-02-24 12:31:49 |\n|  2 | wenn   | 2019-02-24 12:39:25 |\n+----+--------+---------------------+\n\n> insert into test (name) values ('wenn') on duplicate key update update_ts = current_timestamp();\n> SELECT * FROM `test`;\n\n+----+--------+---------------------+\n| id | name   | update_ts           |\n+----+--------+---------------------+\n|  1 | wxnacy | 2019-02-24 12:31:49 |\n|  2 | wenn   | 2019-02-24 12:40:15 |\n+----+--------+---------------------+\n```\n\n这样及保证了避免插入重复数据，同时程序也没有报错，我还可以根据 `update` 的数据来分析问题的根源。\n\n## SQLAlchemy 中的使用\n\n这个功能需要 SQLAlchemy 1.2 版本以上才支持，官方的例子\n\n```python\nfrom sqlalchemy.dialects.mysql import insert\n\ninsert_stmt = insert(my_table). \\\n    values(id='some_id', data='some data to insert')\n\non_conflict_stmt = insert_stmt.on_duplicate_key_update(\n    data=insert_stmt.inserted.data,\n    status='U'\n)\n\nconn.execute(on_conflict_stmt)\n```\n\n析出的 sql 语句为\n\n```mysql\nINSERT INTO my_table (id, data)\nVALUES (:id, :data)\nON DUPLICATE KEY UPDATE data=VALUES(data), status=:status_1\n```\n\n参考资料\n\n- [INSERT ... ON DUPLICATE KEY UPDATE Syntax](https://dev.mysql.com/doc/refman/8.0/en/insert-on-duplicate.html)\n- [Support for INSERT..ON DUPLICATE KEY UPDATE](https://docs.sqlalchemy.org/en/latest/changelog/migration_12.html#support-for-insert-on-duplicate-key-update)\n","slug":"mysql-insert-on-duplicate-key-update","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2al200sa5gqoy8iirevo"},{"title":"Linux Tab 命令提示时忽略大小写","date":"2019-02-27T09:56:39.000Z","_content":"\nLinux 环境如何不装 `zsh` 等更加智能的 bash 工具，通常在 Tab 键提示命令时都会区分大小写，这样很不方便，我们可以做点简单修改让它忽略大小写。\n\n<!-- more --><!-- toc -->\n\n默认情况下 `~` 目录下是没有 `.inputrc` 文件的，手动创建并赋值\n\n```bash\n$ echo 'set completion-ignore-case on' >> .inputrc\n```\n\n然后退出终端，重新进入，这时命令行已经忽略大小写了。\n","source":"_posts/2019-02-27-linux-caseignore.md","raw":"---\ntitle: Linux Tab 命令提示时忽略大小写\ndate: 2019-02-27 09:56:39\ntags: [linux]\n---\n\nLinux 环境如何不装 `zsh` 等更加智能的 bash 工具，通常在 Tab 键提示命令时都会区分大小写，这样很不方便，我们可以做点简单修改让它忽略大小写。\n\n<!-- more --><!-- toc -->\n\n默认情况下 `~` 目录下是没有 `.inputrc` 文件的，手动创建并赋值\n\n```bash\n$ echo 'set completion-ignore-case on' >> .inputrc\n```\n\n然后退出终端，重新进入，这时命令行已经忽略大小写了。\n","slug":"linux-caseignore","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2al300sc5gqo635589ws"},{"title":"简单了解非对称加密算法","date":"2019-02-28T10:01:48.000Z","_content":"\n\n今天我们要讲的是非对称加密算法。\n\n<!-- more --><!-- toc -->\n\n课程分三个步骤\n- 为什么要用到非对称加密算法(why)\n- 什么是非对称加密算法(what)\n- 如何用 Python 实现加密算法(how)\n\n## why\n\n非对称加密提供了数据加密和数字签名两个功能。\n\n而这两个功能分别有更简单的实现方式对称加密和散列运算。\n\n那为什么还需要非对称加密呢？\n\n先来看一个例子。\n\n小明和小红是一对恋人，他们分居上海和北京，路途遥远不便见面，只能通过网络联系，这种方式快捷方便，开始两人并没有觉得不妥。\n\n有一天两人到了谈婚论嫁的年纪，开始讨论结婚事宜，说到了彩礼的事情。\n\n小明很有安全意识，他觉得涉及到钱的问题，应该小心翼翼，网络并不安全，如果谈的是 5 万，结果在网络中被人篡改了，变成 10 万怎么办？他想到了使用数字签名的方式，将数据进行 MD5 加密，并将加密过的签名，一起发给小红，并让小红对数据再次使用 MD5 加密，并将自己计算的结果跟小明发过来的进行对比，一致则数据没有被篡改。\n\n在这个方案下，两人安全的将结婚事宜谈妥，小红很高兴，想对小明说些悄悄话，但是她又不想让网络中其他人听到她说的是什么。她想到了数据加密的方式，她先将要说的话使用 AES 算法做对称加密，然后将加密后密文和加密使用的秘钥发给小明，然后小明使用秘钥对密文进行解密，即可看到小红要说的话。\n\n然而事情真的像他们想的这么安全吗？\n\n小明的签名算法必须是公开的，小红才能用相同的算法验证，只要是公开的，别人就可以使用相同的算法，先将明文篡改，再对新明文进行签名再发给小红，这样小红验证到的只是被篡改的数据。\n\n同样的道理，小红的对称加密算法，想要让小明对其进行解密，必须将加密用的秘钥公开出来。这样小明可以解密，别人也可以解密。\n\n那怎么解决呢？你会想不公开不就行了吗，小明自己写一个签名算法偷偷告诉小红，小红将加密的秘钥偷偷告诉小明。说起来简单，做起来难，怎么偷偷告诉？小明先坐飞机到北京告诉小红，然后每次发现算法有漏洞，修改算法后在坐飞机到北京？\n\n没有必要，此时非对称加密可以出场了。\n\n## what\n\n什么是非对称加密？\n\n对称加密是用相同的秘钥对数据进行加解密，那非对称加密顾名思义就是用不同的秘钥对数据进行加解密。\n\n非对称加密算法有两个秘钥，公有秘钥和私有秘钥，两个秘钥是一对。每个人都可以生成属于自己的公私钥，公钥可以公布给任何人知道，所以它也叫公开密钥算法，私钥只能自己保留，不能泄露。\n\n现在我们再来看小明的问题，小明使用非对称加密算法做数字签名，他先使用私钥将明文做签名，然后将明文、签名和公钥一起发给小红，小红可以使用公钥对签名进行验证。此时其他及时拿到了公钥也无济于事，因为***签名只能使用私钥***。\n\n而小红的问题也很简单，她可以使用小明的公钥对明文进行加密，再将密文发给小明，小明使用自己的私钥对数据进行解密，即可拿到明文。此时其他人及时拿到公钥和密文也无济于事，因为***公钥加密的密文只能用对应的秘钥进行解密***\n\n然后小红再生成自己的公私钥，双方互换公钥，各自保留私钥，加密和签名双管齐下，互发消息都可以做到非常安全。\n\n\n总结一下\n\n公钥用来加密，对应秘钥解密\n私钥用来签名，对应公钥验证\n\n## how\n\n下面我们来看看如何使用 Python 实现加密算法\n\n**生成公私钥**\n\n```bash\n$ ssh-keygen -t rsa -C your_email\n```\n\n**安装依赖**\n\n```bash\n$ pip install pycrypto\n```\n\n**代码**\n\n- [加解密](https://github.com/wxnacy/study/blob/master/python/crypto_demo/rsa_cipher.py)\n- [签名验证](https://github.com/wxnacy/study/blob/master/python/crypto_demo/rsa_signature.py)\n\n\n**youtube 视频**\n\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/OKIfTOEo7P0\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n\n**youku 视频**\n\n<iframe height=498 width=510 src='http://player.youku.com/embed/XNDA2Nzg3NTY4MA==' frameborder=0 'allowfullscreen'></iframe>\n","source":"_posts/2019-02-28-asymmetric-encryption.md","raw":"---\ntitle: 简单了解非对称加密算法\ntags:\n  - 算法\ndate: 2019-02-28 10:01:48\n---\n\n\n今天我们要讲的是非对称加密算法。\n\n<!-- more --><!-- toc -->\n\n课程分三个步骤\n- 为什么要用到非对称加密算法(why)\n- 什么是非对称加密算法(what)\n- 如何用 Python 实现加密算法(how)\n\n## why\n\n非对称加密提供了数据加密和数字签名两个功能。\n\n而这两个功能分别有更简单的实现方式对称加密和散列运算。\n\n那为什么还需要非对称加密呢？\n\n先来看一个例子。\n\n小明和小红是一对恋人，他们分居上海和北京，路途遥远不便见面，只能通过网络联系，这种方式快捷方便，开始两人并没有觉得不妥。\n\n有一天两人到了谈婚论嫁的年纪，开始讨论结婚事宜，说到了彩礼的事情。\n\n小明很有安全意识，他觉得涉及到钱的问题，应该小心翼翼，网络并不安全，如果谈的是 5 万，结果在网络中被人篡改了，变成 10 万怎么办？他想到了使用数字签名的方式，将数据进行 MD5 加密，并将加密过的签名，一起发给小红，并让小红对数据再次使用 MD5 加密，并将自己计算的结果跟小明发过来的进行对比，一致则数据没有被篡改。\n\n在这个方案下，两人安全的将结婚事宜谈妥，小红很高兴，想对小明说些悄悄话，但是她又不想让网络中其他人听到她说的是什么。她想到了数据加密的方式，她先将要说的话使用 AES 算法做对称加密，然后将加密后密文和加密使用的秘钥发给小明，然后小明使用秘钥对密文进行解密，即可看到小红要说的话。\n\n然而事情真的像他们想的这么安全吗？\n\n小明的签名算法必须是公开的，小红才能用相同的算法验证，只要是公开的，别人就可以使用相同的算法，先将明文篡改，再对新明文进行签名再发给小红，这样小红验证到的只是被篡改的数据。\n\n同样的道理，小红的对称加密算法，想要让小明对其进行解密，必须将加密用的秘钥公开出来。这样小明可以解密，别人也可以解密。\n\n那怎么解决呢？你会想不公开不就行了吗，小明自己写一个签名算法偷偷告诉小红，小红将加密的秘钥偷偷告诉小明。说起来简单，做起来难，怎么偷偷告诉？小明先坐飞机到北京告诉小红，然后每次发现算法有漏洞，修改算法后在坐飞机到北京？\n\n没有必要，此时非对称加密可以出场了。\n\n## what\n\n什么是非对称加密？\n\n对称加密是用相同的秘钥对数据进行加解密，那非对称加密顾名思义就是用不同的秘钥对数据进行加解密。\n\n非对称加密算法有两个秘钥，公有秘钥和私有秘钥，两个秘钥是一对。每个人都可以生成属于自己的公私钥，公钥可以公布给任何人知道，所以它也叫公开密钥算法，私钥只能自己保留，不能泄露。\n\n现在我们再来看小明的问题，小明使用非对称加密算法做数字签名，他先使用私钥将明文做签名，然后将明文、签名和公钥一起发给小红，小红可以使用公钥对签名进行验证。此时其他及时拿到了公钥也无济于事，因为***签名只能使用私钥***。\n\n而小红的问题也很简单，她可以使用小明的公钥对明文进行加密，再将密文发给小明，小明使用自己的私钥对数据进行解密，即可拿到明文。此时其他人及时拿到公钥和密文也无济于事，因为***公钥加密的密文只能用对应的秘钥进行解密***\n\n然后小红再生成自己的公私钥，双方互换公钥，各自保留私钥，加密和签名双管齐下，互发消息都可以做到非常安全。\n\n\n总结一下\n\n公钥用来加密，对应秘钥解密\n私钥用来签名，对应公钥验证\n\n## how\n\n下面我们来看看如何使用 Python 实现加密算法\n\n**生成公私钥**\n\n```bash\n$ ssh-keygen -t rsa -C your_email\n```\n\n**安装依赖**\n\n```bash\n$ pip install pycrypto\n```\n\n**代码**\n\n- [加解密](https://github.com/wxnacy/study/blob/master/python/crypto_demo/rsa_cipher.py)\n- [签名验证](https://github.com/wxnacy/study/blob/master/python/crypto_demo/rsa_signature.py)\n\n\n**youtube 视频**\n\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/OKIfTOEo7P0\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n\n**youku 视频**\n\n<iframe height=498 width=510 src='http://player.youku.com/embed/XNDA2Nzg3NTY4MA==' frameborder=0 'allowfullscreen'></iframe>\n","slug":"asymmetric-encryption","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2al500se5gqofnr0j11h"},{"title":"Go 自动打开系统默认浏览器","date":"2019-03-04T13:48:03.000Z","_content":"\n\n因为 Go 可以编译 `Windows` `Darwin` `Linux` 三个平台的二进制文件，如果编写一个 Web 项目，启动后可以自动打开浏览器，那就非常方便了。\n\n<!-- more --><!-- toc -->\n\n首先看下三个平台打开浏览器的命令\n\n**Darwin**\n\n```bash\n$ open http://baidu.com\n```\n\n**Windows**\n\n```bash\n$ start http://baidu.com\n```\n\n**Linux**\n\n```bash\n$ xdg-open http://baidu.com\n```\n\n接下来需要 Go 能区分平台，这里需要 `runtime` 包。\n\n```bash\nimport \"runtime\"\nplatform := runtime.GOOS\n// darwin windows linux\n```\n\n好接下来就可以写代码了\n\n```go\npackage main\n// 打开系统默认浏览器\n\nimport (\n    \"fmt\"\n    \"os/exec\"\n    \"runtime\"\n)\n\nvar commands = map[string]string{\n    \"windows\": \"start\",\n    \"darwin\":  \"open\",\n    \"linux\":   \"xdg-open\",\n}\n\nfunc Open(uri string) error {\n    run, ok := commands[runtime.GOOS]\n    if !ok {\n        return fmt.Errorf(\"don't know how to open things on %s platform\", runtime.GOOS)\n    }\n\n    cmd := exec.Command(run, uri)\n    return cmd.Start()\n}\n\nfunc main() {\n    Open(\"http://baidu.com\")\n}\n```\n","source":"_posts/2019-03-04-go-open-brower.md","raw":"---\ntitle: Go 自动打开系统默认浏览器\ntags:\n  - go\ndate: 2019-03-04 13:48:03\n---\n\n\n因为 Go 可以编译 `Windows` `Darwin` `Linux` 三个平台的二进制文件，如果编写一个 Web 项目，启动后可以自动打开浏览器，那就非常方便了。\n\n<!-- more --><!-- toc -->\n\n首先看下三个平台打开浏览器的命令\n\n**Darwin**\n\n```bash\n$ open http://baidu.com\n```\n\n**Windows**\n\n```bash\n$ start http://baidu.com\n```\n\n**Linux**\n\n```bash\n$ xdg-open http://baidu.com\n```\n\n接下来需要 Go 能区分平台，这里需要 `runtime` 包。\n\n```bash\nimport \"runtime\"\nplatform := runtime.GOOS\n// darwin windows linux\n```\n\n好接下来就可以写代码了\n\n```go\npackage main\n// 打开系统默认浏览器\n\nimport (\n    \"fmt\"\n    \"os/exec\"\n    \"runtime\"\n)\n\nvar commands = map[string]string{\n    \"windows\": \"start\",\n    \"darwin\":  \"open\",\n    \"linux\":   \"xdg-open\",\n}\n\nfunc Open(uri string) error {\n    run, ok := commands[runtime.GOOS]\n    if !ok {\n        return fmt.Errorf(\"don't know how to open things on %s platform\", runtime.GOOS)\n    }\n\n    cmd := exec.Command(run, uri)\n    return cmd.Start()\n}\n\nfunc main() {\n    Open(\"http://baidu.com\")\n}\n```\n","slug":"go-open-brower","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2al600sg5gqos5udm3bg"},{"title":"Go Web 框架 iris 简单入门","date":"2019-03-01T17:22:15.000Z","_content":"\n\n作为后端开发，初识一门语言时，选一款合适的 Web 框架是很有必要的。\n\n<!-- more --><!-- toc -->\n\n经过这篇文章 [6 款最棒的 Go 语言 Web 框架简介](https://studygolang.com/articles/11897?fr=sidebar)的介绍，有理由相信 [iris](https://github.com/kataras/iris) 是目前最优秀的 Web 框架，今天简单了解下这个框架的使用。\n\n## 下载\n\n```bash\n$ go get -u github.com/kataras/iris\n```\n\n## Hello World\n\n```go\npackage main\n\nimport (\n    \"github.com/kataras/iris\"\n)\n\nvar app *iris.Application\n\nfunc main() {\n    app = iris.Default()\n    app.Get(\"/hello\", func(ctx iris.Context) {\n        ctx.JSON(iris.Map{\n            \"message\": \"Hello World\",\n        })\n    })\n    // listen and serve on http://0.0.0.0:8080.\n    app.Run(iris.Addr(\":8080\"))\n}\n```\n\n初始化和路由配置都很简单\n\n```bash\n$ go run main.go\n$ http :8080/hello\n\nHTTP/1.1 200 OK\nContent-Length: 25\nContent-Type: application/json; charset=UTF-8\nDate: Thu, 28 Feb 2019 07:25:00 GMT\n\n{\n    \"message\": \"Hello World\"\n}\n```\n\n## 日志输出\n\n```go\npackage main\n\nimport (\n    \"github.com/kataras/iris\"\n    \"github.com/kataras/iris/middleware/logger\"\n)\n\nvar app *iris.Application\n\nfunc main() {\n    app = iris.Default()\n    app.Use(logger.New())\n    app.Logger().SetLevel(\"debug\")\n    app.Get(\"/hello\", func(ctx iris.Context) {\n        app.Logger().Debug(\"Hello World\")\n        app.Logger().Info(\"Hello World\")\n        app.Logger().Error(\"Hello World\")\n        ctx.JSON(iris.Map{\n            \"message\": \"Hello World\",\n        })\n    })\n    // listen and serve on http://0.0.0.0:8080.\n    app.Run(iris.Addr(\":8080\"))\n}\n```\n\n## template 使用\n\n使项目目录结构如下\n\n```bash\n.\n├── README.md\n├── main.go\n├── static\n│   └── hello.js\n└── templates\n    └── index.html\n```\n\n注册 template 目录和匹配文件\n\n```go\napp.RegisterView(iris.HTML(\"./templates\", \".html\"))\n```\n\n初始化静态文件目录\n\n```go\napp.StaticWeb(\"static\", \"./static\")\n```\n\n传递 template 变量，并显示页面\n\n```go\napp.Get(\"/index\", func(ctx iris.Context) {\n    ctx.ViewData(\"name\", \"wxnacy\")\n    ctx.View(\"index.html\")\n})\n```\n\n运行\n\n```bash\n$ go run main.go\n$ http :8080/index\n\nHTTP/1.1 200 OK\nContent-Length: 129\nContent-Type: text/html; charset=UTF-8\nDate: Thu, 28 Feb 2019 07:56:57 GMT\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title></title>\n</head>\n<body>\n  Hello wxnacy\n</body>\n</html>\n\n$ http :8080/static/hello.js\n\nHTTP/1.1 200 OK\nAccept-Ranges: bytes\nContent-Length: 51\nContent-Type: application/javascript; charset=UTF-8\nDate: Thu, 28 Feb 2019 07:57:33 GMT\nLast-Modified: Thu, Feb 28 2019 07:47:22 GMT\n\nfunction hello(){\n  console.log(\"Hello World\");\n};\n```\n\n完整代码地址：https://github.com/wxnacy/study/tree/master/goland/src/iris_examples/mvc-templates\n\n## 更多的 method\n\n```go\napp.Post(\"/\", func(ctx iris.Context){}) -> for POST http method.\napp.Put(\"/\", func(ctx iris.Context){})-> for \"PUT\" http method.\napp.Delete(\"/\", func(ctx iris.Context){})-> for \"DELETE\" http method.\napp.Options(\"/\", func(ctx iris.Context){})-> for \"OPTIONS\" http method.\napp.Trace(\"/\", func(ctx iris.Context){})-> for \"TRACE\" http method.\napp.Head(\"/\", func(ctx iris.Context){})-> for \"HEAD\" http method.\napp.Connect(\"/\", func(ctx iris.Context){})-> for \"CONNECT\" http method.\napp.Patch(\"/\", func(ctx iris.Context){})-> for \"PATCH\" http method.\napp.Any(\"/\", func(ctx iris.Context){}) for all http methods.\n```\n\n[更多例子](https://github.com/iris-contrib/examples)\n","source":"_posts/2019-03-01-go-iris-simple.md","raw":"---\ntitle: Go Web 框架 iris 简单入门\ntags:\n  - go\ndate: 2019-03-01 17:22:15\n---\n\n\n作为后端开发，初识一门语言时，选一款合适的 Web 框架是很有必要的。\n\n<!-- more --><!-- toc -->\n\n经过这篇文章 [6 款最棒的 Go 语言 Web 框架简介](https://studygolang.com/articles/11897?fr=sidebar)的介绍，有理由相信 [iris](https://github.com/kataras/iris) 是目前最优秀的 Web 框架，今天简单了解下这个框架的使用。\n\n## 下载\n\n```bash\n$ go get -u github.com/kataras/iris\n```\n\n## Hello World\n\n```go\npackage main\n\nimport (\n    \"github.com/kataras/iris\"\n)\n\nvar app *iris.Application\n\nfunc main() {\n    app = iris.Default()\n    app.Get(\"/hello\", func(ctx iris.Context) {\n        ctx.JSON(iris.Map{\n            \"message\": \"Hello World\",\n        })\n    })\n    // listen and serve on http://0.0.0.0:8080.\n    app.Run(iris.Addr(\":8080\"))\n}\n```\n\n初始化和路由配置都很简单\n\n```bash\n$ go run main.go\n$ http :8080/hello\n\nHTTP/1.1 200 OK\nContent-Length: 25\nContent-Type: application/json; charset=UTF-8\nDate: Thu, 28 Feb 2019 07:25:00 GMT\n\n{\n    \"message\": \"Hello World\"\n}\n```\n\n## 日志输出\n\n```go\npackage main\n\nimport (\n    \"github.com/kataras/iris\"\n    \"github.com/kataras/iris/middleware/logger\"\n)\n\nvar app *iris.Application\n\nfunc main() {\n    app = iris.Default()\n    app.Use(logger.New())\n    app.Logger().SetLevel(\"debug\")\n    app.Get(\"/hello\", func(ctx iris.Context) {\n        app.Logger().Debug(\"Hello World\")\n        app.Logger().Info(\"Hello World\")\n        app.Logger().Error(\"Hello World\")\n        ctx.JSON(iris.Map{\n            \"message\": \"Hello World\",\n        })\n    })\n    // listen and serve on http://0.0.0.0:8080.\n    app.Run(iris.Addr(\":8080\"))\n}\n```\n\n## template 使用\n\n使项目目录结构如下\n\n```bash\n.\n├── README.md\n├── main.go\n├── static\n│   └── hello.js\n└── templates\n    └── index.html\n```\n\n注册 template 目录和匹配文件\n\n```go\napp.RegisterView(iris.HTML(\"./templates\", \".html\"))\n```\n\n初始化静态文件目录\n\n```go\napp.StaticWeb(\"static\", \"./static\")\n```\n\n传递 template 变量，并显示页面\n\n```go\napp.Get(\"/index\", func(ctx iris.Context) {\n    ctx.ViewData(\"name\", \"wxnacy\")\n    ctx.View(\"index.html\")\n})\n```\n\n运行\n\n```bash\n$ go run main.go\n$ http :8080/index\n\nHTTP/1.1 200 OK\nContent-Length: 129\nContent-Type: text/html; charset=UTF-8\nDate: Thu, 28 Feb 2019 07:56:57 GMT\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title></title>\n</head>\n<body>\n  Hello wxnacy\n</body>\n</html>\n\n$ http :8080/static/hello.js\n\nHTTP/1.1 200 OK\nAccept-Ranges: bytes\nContent-Length: 51\nContent-Type: application/javascript; charset=UTF-8\nDate: Thu, 28 Feb 2019 07:57:33 GMT\nLast-Modified: Thu, Feb 28 2019 07:47:22 GMT\n\nfunction hello(){\n  console.log(\"Hello World\");\n};\n```\n\n完整代码地址：https://github.com/wxnacy/study/tree/master/goland/src/iris_examples/mvc-templates\n\n## 更多的 method\n\n```go\napp.Post(\"/\", func(ctx iris.Context){}) -> for POST http method.\napp.Put(\"/\", func(ctx iris.Context){})-> for \"PUT\" http method.\napp.Delete(\"/\", func(ctx iris.Context){})-> for \"DELETE\" http method.\napp.Options(\"/\", func(ctx iris.Context){})-> for \"OPTIONS\" http method.\napp.Trace(\"/\", func(ctx iris.Context){})-> for \"TRACE\" http method.\napp.Head(\"/\", func(ctx iris.Context){})-> for \"HEAD\" http method.\napp.Connect(\"/\", func(ctx iris.Context){})-> for \"CONNECT\" http method.\napp.Patch(\"/\", func(ctx iris.Context){})-> for \"PATCH\" http method.\napp.Any(\"/\", func(ctx iris.Context){}) for all http methods.\n```\n\n[更多例子](https://github.com/iris-contrib/examples)\n","slug":"go-iris-simple","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2al700si5gqoqdj48p81"},{"title":"Python 列表的交集、并集、差集","date":"2019-03-12T16:12:57.000Z","_content":"\nPython 中列表的交集、并集、差集可以有两种方式，列表解析和 set 的函数\n\n<!-- more --><!-- toc -->\n\n直接上代码\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description: 列表的交集、并集、差集\n\nimport random\n\ndef rand_int_arr(length):\n    arr = []\n    for i in range(length):\n        r = random.randrange(19)\n        arr.append(r)\n    return arr\n\ndef intersection1(a, b):\n    '''交集：使用列表解析'''\n    return list(set([i for i in a if i in b]))\n\ndef intersection2(a, b):\n    '''交集：使用自带函数'''\n    return list(set(a).intersection(set(b)))\n\ndef union1(a, b):\n    '''并集：使用列表相加'''\n    return list(set(a + b))\n\ndef union2(a, b):\n    '''并集：使用自带函数'''\n    return list(set(a).union(set(b)))\n\ndef difference1(a, b):\n    '''差集：使用列表解析'''\n    return list(set([i for i in a if i not in b]))\n\ndef difference2(a, b):\n    '''差集：使用自带函数'''\n    return list(set(a).difference(set(b)))\n\n\nif __name__ == \"__main__\":\n    a = rand_int_arr(10)\n    b = rand_int_arr(10)\n    print(a)\n    print(b)\n    r1 = intersection1(a, b)\n    print('交集：使用列表解析', r1)\n    r2 = intersection2(a, b)\n    print('交集：使用自带函数', r2)\n    r3 = union1(a, b)\n    print('并集：使用列表相加', r3)\n    r4 = union2(a, b)\n    print('并集：使用自带函数', r4)\n    r5 = difference1(a, b)\n    print('差集：使用列表解析', r5)\n    r6 = difference2(a, b)\n    print('差集：使用自带函数', r6)\n\n    # [5, 8, 13, 0, 7, 16, 13, 2, 2, 7]\n    # [11, 10, 6, 17, 7, 13, 2, 16, 10, 13]\n    # 交集：使用列表解析 [16, 2, 13, 7]\n    # 交集：使用自带函数 [16, 2, 13, 7]\n    # 并集：使用列表相加 [0, 2, 5, 6, 7, 8, 10, 11, 13, 16, 17]\n    # 并集：使用自带函数 [0, 2, 5, 6, 7, 8, 10, 11, 13, 16, 17]\n    # 差集：使用列表解析 [8, 0, 5]\n    # 差集：使用自带函数 [0, 8, 5]\n```\n\n除了并集可以通过列表相加实现，其他的如果不用函数就需要用到列表解析，下面我们来对比下速度\n\n\n将 a 和 b 的长度改为 10000，将随机数的幅度也改了 10000，运行以下程序\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description: 列表的交集、并集、差集\n\nimport random\nimport time\n\ndef rand_int_arr(length):\n    arr = []\n    for i in range(length):\n        r = random.randrange(10000)\n        arr.append(r)\n    return arr\n\ndef intersection1(a, b):\n    '''交集：使用列表解析'''\n    return list(set([i for i in a if i in b]))\n\ndef intersection2(a, b):\n    '''交集：使用自带函数'''\n    return list(set(a).intersection(set(b)))\n\ndef union1(a, b):\n    '''并集：使用列表相加'''\n    return list(set(a + b))\n\ndef union2(a, b):\n    '''并集：使用自带函数'''\n    return list(set(a).union(set(b)))\n\ndef difference1(a, b):\n    '''差集：使用列表解析'''\n    return list(set([i for i in a if i not in b]))\n\ndef difference2(a, b):\n    '''差集：使用自带函数'''\n    return list(set(a).difference(set(b)))\n\n\nif __name__ == \"__main__\":\n    a = rand_int_arr(10000)\n    b = rand_int_arr(10000)\n    begin = time.clock()\n    r1 = intersection1(a, b)\n    print('交集：使用列表解析', time.clock() - begin)\n    begin = time.clock()\n    r2 = intersection2(a, b)\n    print('交集：使用自带函数', time.clock() - begin)\n    begin = time.clock()\n    r3 = union1(a, b)\n    print('并集：使用列表相加', time.clock() - begin)\n    begin = time.clock()\n    r4 = union2(a, b)\n    print('并集：使用自带函数', time.clock() - begin)\n    begin = time.clock()\n    r5 = difference1(a, b)\n    print('差集：使用列表解析', time.clock() - begin)\n    begin = time.clock()\n    r6 = difference2(a, b)\n    print('差集：使用自带函数', time.clock() - begin)\n\n#  交集：使用列表解析 0.9532590000000001\n#  交集：使用自带函数 0.002062999999999926\n#  并集：使用列表相加 0.0010879999999999779\n#  并集：使用自带函数 0.0022370000000000445\n#  差集：使用列表解析 0.9966799999999998\n#  差集：使用自带函数 0.0014449999999999186\n```\n\n通过这个结果看，列表解析和函数相比，还是函数的速度快很多，并且不是一个量级的，而在并集中列表相加则比函数要快一些，但是幅度并不大。\n","source":"_posts/2019-03-12-python-list-diff-inter.md","raw":"---\ntitle: Python 列表的交集、并集、差集\ndate: 2019-03-12 16:12:57\ntags: [python]\n---\n\nPython 中列表的交集、并集、差集可以有两种方式，列表解析和 set 的函数\n\n<!-- more --><!-- toc -->\n\n直接上代码\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description: 列表的交集、并集、差集\n\nimport random\n\ndef rand_int_arr(length):\n    arr = []\n    for i in range(length):\n        r = random.randrange(19)\n        arr.append(r)\n    return arr\n\ndef intersection1(a, b):\n    '''交集：使用列表解析'''\n    return list(set([i for i in a if i in b]))\n\ndef intersection2(a, b):\n    '''交集：使用自带函数'''\n    return list(set(a).intersection(set(b)))\n\ndef union1(a, b):\n    '''并集：使用列表相加'''\n    return list(set(a + b))\n\ndef union2(a, b):\n    '''并集：使用自带函数'''\n    return list(set(a).union(set(b)))\n\ndef difference1(a, b):\n    '''差集：使用列表解析'''\n    return list(set([i for i in a if i not in b]))\n\ndef difference2(a, b):\n    '''差集：使用自带函数'''\n    return list(set(a).difference(set(b)))\n\n\nif __name__ == \"__main__\":\n    a = rand_int_arr(10)\n    b = rand_int_arr(10)\n    print(a)\n    print(b)\n    r1 = intersection1(a, b)\n    print('交集：使用列表解析', r1)\n    r2 = intersection2(a, b)\n    print('交集：使用自带函数', r2)\n    r3 = union1(a, b)\n    print('并集：使用列表相加', r3)\n    r4 = union2(a, b)\n    print('并集：使用自带函数', r4)\n    r5 = difference1(a, b)\n    print('差集：使用列表解析', r5)\n    r6 = difference2(a, b)\n    print('差集：使用自带函数', r6)\n\n    # [5, 8, 13, 0, 7, 16, 13, 2, 2, 7]\n    # [11, 10, 6, 17, 7, 13, 2, 16, 10, 13]\n    # 交集：使用列表解析 [16, 2, 13, 7]\n    # 交集：使用自带函数 [16, 2, 13, 7]\n    # 并集：使用列表相加 [0, 2, 5, 6, 7, 8, 10, 11, 13, 16, 17]\n    # 并集：使用自带函数 [0, 2, 5, 6, 7, 8, 10, 11, 13, 16, 17]\n    # 差集：使用列表解析 [8, 0, 5]\n    # 差集：使用自带函数 [0, 8, 5]\n```\n\n除了并集可以通过列表相加实现，其他的如果不用函数就需要用到列表解析，下面我们来对比下速度\n\n\n将 a 和 b 的长度改为 10000，将随机数的幅度也改了 10000，运行以下程序\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description: 列表的交集、并集、差集\n\nimport random\nimport time\n\ndef rand_int_arr(length):\n    arr = []\n    for i in range(length):\n        r = random.randrange(10000)\n        arr.append(r)\n    return arr\n\ndef intersection1(a, b):\n    '''交集：使用列表解析'''\n    return list(set([i for i in a if i in b]))\n\ndef intersection2(a, b):\n    '''交集：使用自带函数'''\n    return list(set(a).intersection(set(b)))\n\ndef union1(a, b):\n    '''并集：使用列表相加'''\n    return list(set(a + b))\n\ndef union2(a, b):\n    '''并集：使用自带函数'''\n    return list(set(a).union(set(b)))\n\ndef difference1(a, b):\n    '''差集：使用列表解析'''\n    return list(set([i for i in a if i not in b]))\n\ndef difference2(a, b):\n    '''差集：使用自带函数'''\n    return list(set(a).difference(set(b)))\n\n\nif __name__ == \"__main__\":\n    a = rand_int_arr(10000)\n    b = rand_int_arr(10000)\n    begin = time.clock()\n    r1 = intersection1(a, b)\n    print('交集：使用列表解析', time.clock() - begin)\n    begin = time.clock()\n    r2 = intersection2(a, b)\n    print('交集：使用自带函数', time.clock() - begin)\n    begin = time.clock()\n    r3 = union1(a, b)\n    print('并集：使用列表相加', time.clock() - begin)\n    begin = time.clock()\n    r4 = union2(a, b)\n    print('并集：使用自带函数', time.clock() - begin)\n    begin = time.clock()\n    r5 = difference1(a, b)\n    print('差集：使用列表解析', time.clock() - begin)\n    begin = time.clock()\n    r6 = difference2(a, b)\n    print('差集：使用自带函数', time.clock() - begin)\n\n#  交集：使用列表解析 0.9532590000000001\n#  交集：使用自带函数 0.002062999999999926\n#  并集：使用列表相加 0.0010879999999999779\n#  并集：使用自带函数 0.0022370000000000445\n#  差集：使用列表解析 0.9966799999999998\n#  差集：使用自带函数 0.0014449999999999186\n```\n\n通过这个结果看，列表解析和函数相比，还是函数的速度快很多，并且不是一个量级的，而在并集中列表相加则比函数要快一些，但是幅度并不大。\n","slug":"python-list-diff-inter","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2al800sk5gqofcoa4bei"},{"title":"Android 远程调试命令 adb","date":"2019-03-11T16:28:59.000Z","_content":"\nadb 是 Android 的远程调试命令，在 Android 打开 USB 调试模式或直接打开 ADB 功能，就可以用 shell 命令来控制系统。\n\n<!-- more --><!-- toc -->\n\n## Android 打开 USB 调试\n\n打开 Android 系统的开发者模式的通用模式。\n\n```bash\n1.打开“设置”应用，然后滚动到底部。\n2.如果它没有“开发者选项”设置，请点击“关于手机”（或“关于平板电脑”），滚动到底部，然后点击内置版本号7次。\n3.返回并点击开发者选项。\n4.启用 USB 调试。\n```\n\n## 安装 adb\n\n### Mac OS X\n\n使用 brew 可以很简单的安装\n\n```bash\n$ brew cask install android-platform-tools\n$ adb devices\n```\n\n随后就可以使用 adb 命令，不需要在配置各种环境变量\n\n其他安装方式见 [Set up adb on Mac OS X](https://stackoverflow.com/questions/17901692/set-up-adb-on-mac-os-x)\n\n## 链接设备\n\n**启动服务**\n\n```bash\n$ adb start-server\n```\n\n**查看设备列表**\n\n```bash\n$ adb devices\n\nList of devices attached\nemulator-5554   device\n```\n\n**关闭服务**\n\n```bash\n$ adb kill-server\n```\n\n**链接设备**\n\n当设备没有出现在设备列表中时，我们可以手动链接设备\n\n```bash\n$ adb connect <ip>:5555\n```\n\nAndroid 的 uiautomator 模块默认使用了 5555 端口号\n\n链接成功后，设备会出现在设备列表中\n\n```bash\n$ adb devices\n\nList of devices attached\n10.0.2.1:5555   device\nemulator-5554   device\n```\n\n## 使用 shell 命令\n\n```bash\n$ adb shell\nroot@x86:/ #\n```\n\n当有一个设备时，默认链接，如果有多个设备，需要指定设备\n\n```bash\n$ adb -s 10.0.2.1:5555 shell\nroot@x86:/ #\n```\n\n如果不想每次都手动指定，可以设置环境变量\n\n```bash\nexport ANDROID_SERIAL=\"DC886B75\"\n```\n\nshell 登陆后即可使用常见的脚本命令，比如 `ls`\n\n```bash\n$ adb shell\nroot@x86:/ # ls\nmnt\nlib\n...\n```\n\n如果只是执行简单的命令，我们也可以直接在本地执行\n\n```bash\n$ adb shell ls\nmnt\nlib\n...\n```\n\n## 包管理\n\n**安装**\n\n```bash\n$ adb install test.apk\n$ adb install -l test.apk     # forward lock application\n$ adb install -r test.apk     # replace existing application\n$ adb install -t test.apk     # allow test packages\n$ adb install -s test.apk     # install application on sdcard\n$ adb install -d test.apk     # allow version code downgrade\n$ adb install -p test.apk     # partial application install\n```\n\n**卸载**\n\n```bash\n$ adb uninstall com.test.app\n$ adb uninstall -k com.test.app # Keep the data and cache directories around after package removal.\n```\n\n**查看包安装列表**\n\n```bash\n$ adb shell pm list packages\n$ adb shell pm list packages -f   # See their associated file.\n$ adb shell pm list packages -d   # Filter to only show disabled packages.\n$ adb shell pm list packages -e   # Filter to only show enabled packages.\n$ adb shell pm list packages -s   # Filter to only show system packages.\n$ adb shell pm list packages -3   # Filter to only show third party packages.\n$ adb shell pm list packages -i   # See the installer for the packages.\n$ adb shell pm list packages -u   # Also include uninstalled packages.\n$ adb shell pm list packages --user <USER_ID> # The user space to query.\n```\n\n**包路径**\n\n```bash\n$ adb shell pm path com.android.phone\npackage:/system/priv-app/TeleService/TeleService.apk\n```\n\n**清除数据和缓存**\n\n```bash\n$ adb shell pm clear com.test.abc\n```\n\n## 进程管理\n\n**启动应用**\n\n```bash\n$ adb shell 进入 Android\n$ am start -n <package-name>/<package-name>.<activity-name>\n```\n\n或者直接运行\n\n```bash\n$ adb shell am start -n <package-name>/<package-name>.<activity-name>\n```\n\n一些系统应用打开方式\n\n```bash\n# 设置\n$ am start -n com.android.settings/com.android.settings.Settings\n# 日历\n$ am start -n com.android.calendar/com.android.calendar.LaunchActivity\n# 闹钟\n$ am start -n com.android.alarmclock/com.android.alarmclock.AlarmClock\n# 音乐和视频\n$ am start -n com.android.music/com.android.music.MusicBrowserActivity\n$ am start -n com.android.music/com.android.music.VideoBrowserActivity\n$ am start -n com.android.music/com.android.music.MediaPlaybackActivity\n# 照相机\n$ am start -n com.android.camera/com.android.camera.Camera\n# 浏览器\n$ am start -n com.android.browser/com.android.browser.BrowserActivity\n# 打开网址\n$ am start -a android.intent.action.VIEW -d  http://www.google.cn/\n# 拨打电话\n$ am start -a android.intent.action.CALL -d tel:10086\n```\n\n这里有个问题，我们可以通过 `pm` 命令查到 apk 的包名，但是 `activity` 就不方便知道了，我们希望只通过包名就能启动应用，从网上查到这个方法\n\n```bash\n$ am start -a android.intent.action.MAIN -n <package-name>\n```\n\n但是这种方式，我在模拟器中只可以打开系统应用，第三方应用会报错，再次查找发现可以使用 `monkey` 命令来启动应用\n\n```bash\n$ monkey -p <package-name> -c android.intent.category.LAUNCHER 1\n```\n\n经过测试，这种方式是比较方便打开各种应用\n\n**杀掉应用**\n\n```bash\n$ am force-stop <package-name>\n```\n\n**杀掉所有后台进程**\n\n```bash\n$ am kill-all\n```\n\n## 更多命令\n\n**推送文件到设备**\n\n```bash\n$ adb push test.apk /data\n```\n\n**拉取设备的文件到本地**\n\n```bash\n$ adb pull /data/test.apk\n$ adb pull /data/test.apk ~/Downloads\n```\n\n**查看设备 SSN 号**\n\n```bash\n$ adb shell getprop | grep ro.boot.serialno\n```\n\n**参考**\n- [adb](http://adbshell.com/commands)\n- [Android使用ADB启动应用程序](https://blog.csdn.net/u012041204/article/details/53957664)\n","source":"_posts/2019-03-11-adb.md","raw":"---\ntitle: Android 远程调试命令 adb\ndate: 2019-03-11 16:28:59\ntags: [android]\n---\n\nadb 是 Android 的远程调试命令，在 Android 打开 USB 调试模式或直接打开 ADB 功能，就可以用 shell 命令来控制系统。\n\n<!-- more --><!-- toc -->\n\n## Android 打开 USB 调试\n\n打开 Android 系统的开发者模式的通用模式。\n\n```bash\n1.打开“设置”应用，然后滚动到底部。\n2.如果它没有“开发者选项”设置，请点击“关于手机”（或“关于平板电脑”），滚动到底部，然后点击内置版本号7次。\n3.返回并点击开发者选项。\n4.启用 USB 调试。\n```\n\n## 安装 adb\n\n### Mac OS X\n\n使用 brew 可以很简单的安装\n\n```bash\n$ brew cask install android-platform-tools\n$ adb devices\n```\n\n随后就可以使用 adb 命令，不需要在配置各种环境变量\n\n其他安装方式见 [Set up adb on Mac OS X](https://stackoverflow.com/questions/17901692/set-up-adb-on-mac-os-x)\n\n## 链接设备\n\n**启动服务**\n\n```bash\n$ adb start-server\n```\n\n**查看设备列表**\n\n```bash\n$ adb devices\n\nList of devices attached\nemulator-5554   device\n```\n\n**关闭服务**\n\n```bash\n$ adb kill-server\n```\n\n**链接设备**\n\n当设备没有出现在设备列表中时，我们可以手动链接设备\n\n```bash\n$ adb connect <ip>:5555\n```\n\nAndroid 的 uiautomator 模块默认使用了 5555 端口号\n\n链接成功后，设备会出现在设备列表中\n\n```bash\n$ adb devices\n\nList of devices attached\n10.0.2.1:5555   device\nemulator-5554   device\n```\n\n## 使用 shell 命令\n\n```bash\n$ adb shell\nroot@x86:/ #\n```\n\n当有一个设备时，默认链接，如果有多个设备，需要指定设备\n\n```bash\n$ adb -s 10.0.2.1:5555 shell\nroot@x86:/ #\n```\n\n如果不想每次都手动指定，可以设置环境变量\n\n```bash\nexport ANDROID_SERIAL=\"DC886B75\"\n```\n\nshell 登陆后即可使用常见的脚本命令，比如 `ls`\n\n```bash\n$ adb shell\nroot@x86:/ # ls\nmnt\nlib\n...\n```\n\n如果只是执行简单的命令，我们也可以直接在本地执行\n\n```bash\n$ adb shell ls\nmnt\nlib\n...\n```\n\n## 包管理\n\n**安装**\n\n```bash\n$ adb install test.apk\n$ adb install -l test.apk     # forward lock application\n$ adb install -r test.apk     # replace existing application\n$ adb install -t test.apk     # allow test packages\n$ adb install -s test.apk     # install application on sdcard\n$ adb install -d test.apk     # allow version code downgrade\n$ adb install -p test.apk     # partial application install\n```\n\n**卸载**\n\n```bash\n$ adb uninstall com.test.app\n$ adb uninstall -k com.test.app # Keep the data and cache directories around after package removal.\n```\n\n**查看包安装列表**\n\n```bash\n$ adb shell pm list packages\n$ adb shell pm list packages -f   # See their associated file.\n$ adb shell pm list packages -d   # Filter to only show disabled packages.\n$ adb shell pm list packages -e   # Filter to only show enabled packages.\n$ adb shell pm list packages -s   # Filter to only show system packages.\n$ adb shell pm list packages -3   # Filter to only show third party packages.\n$ adb shell pm list packages -i   # See the installer for the packages.\n$ adb shell pm list packages -u   # Also include uninstalled packages.\n$ adb shell pm list packages --user <USER_ID> # The user space to query.\n```\n\n**包路径**\n\n```bash\n$ adb shell pm path com.android.phone\npackage:/system/priv-app/TeleService/TeleService.apk\n```\n\n**清除数据和缓存**\n\n```bash\n$ adb shell pm clear com.test.abc\n```\n\n## 进程管理\n\n**启动应用**\n\n```bash\n$ adb shell 进入 Android\n$ am start -n <package-name>/<package-name>.<activity-name>\n```\n\n或者直接运行\n\n```bash\n$ adb shell am start -n <package-name>/<package-name>.<activity-name>\n```\n\n一些系统应用打开方式\n\n```bash\n# 设置\n$ am start -n com.android.settings/com.android.settings.Settings\n# 日历\n$ am start -n com.android.calendar/com.android.calendar.LaunchActivity\n# 闹钟\n$ am start -n com.android.alarmclock/com.android.alarmclock.AlarmClock\n# 音乐和视频\n$ am start -n com.android.music/com.android.music.MusicBrowserActivity\n$ am start -n com.android.music/com.android.music.VideoBrowserActivity\n$ am start -n com.android.music/com.android.music.MediaPlaybackActivity\n# 照相机\n$ am start -n com.android.camera/com.android.camera.Camera\n# 浏览器\n$ am start -n com.android.browser/com.android.browser.BrowserActivity\n# 打开网址\n$ am start -a android.intent.action.VIEW -d  http://www.google.cn/\n# 拨打电话\n$ am start -a android.intent.action.CALL -d tel:10086\n```\n\n这里有个问题，我们可以通过 `pm` 命令查到 apk 的包名，但是 `activity` 就不方便知道了，我们希望只通过包名就能启动应用，从网上查到这个方法\n\n```bash\n$ am start -a android.intent.action.MAIN -n <package-name>\n```\n\n但是这种方式，我在模拟器中只可以打开系统应用，第三方应用会报错，再次查找发现可以使用 `monkey` 命令来启动应用\n\n```bash\n$ monkey -p <package-name> -c android.intent.category.LAUNCHER 1\n```\n\n经过测试，这种方式是比较方便打开各种应用\n\n**杀掉应用**\n\n```bash\n$ am force-stop <package-name>\n```\n\n**杀掉所有后台进程**\n\n```bash\n$ am kill-all\n```\n\n## 更多命令\n\n**推送文件到设备**\n\n```bash\n$ adb push test.apk /data\n```\n\n**拉取设备的文件到本地**\n\n```bash\n$ adb pull /data/test.apk\n$ adb pull /data/test.apk ~/Downloads\n```\n\n**查看设备 SSN 号**\n\n```bash\n$ adb shell getprop | grep ro.boot.serialno\n```\n\n**参考**\n- [adb](http://adbshell.com/commands)\n- [Android使用ADB启动应用程序](https://blog.csdn.net/u012041204/article/details/53957664)\n","slug":"adb","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2al900sm5gqollw7qs2d"},{"title":"Vim 报错：Caught deadly signal SEGV","date":"2019-03-15T10:15:35.000Z","_content":"\nMac 系统大版本的升级总是会引来一些灾难，这次升级到 macOS Mojave 就有很多软件都用不了了，Vim 就是其中一个。\n\n<!-- more --><!-- toc -->\n\n```bash\nVim: Caught deadly signal SEGV\nError detected while processing function 81_PollServerReady[7]..81_Pyeval:Vim: Finished.\n\nline 4:\nException MemoryError: MemoryError() in <module 'threading' from '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.pyc'> ignored\n```\n\n这不，每次启动都报这个错误，然后闪退程序。这就很尴尬了，我现在的开发工作都是在 Vim 中进行，用不了可咋整，网上的说法是因为 YouCompleteMe 插件导致的，需要重新安装 Vim 并使之支持 lua。\n\n我使用 `vim --version` 查看，发现果然当前不支持\n\n```bash\n$ vim --version\n...\n-lua\n...\n```\n\n按照网上教程安装\n\n```bash\n$ brew install vim --with-lua --with-override-system-vi\n...\nError: invalid option: --with-lua\n```\n\n结果报错，无效的参数？？？但是翻遍了 Google 给出的都是这个教程，继续搜索，发现现在新版本的 brew 认为 `--` 会让使用者困惑，所以慢慢去掉了这些参数，去的真及时，那你倒是把新的方法贴出来啊。\n\n我只能暂时退而求其次把 YouCompleteMe 插件删掉好了，结果果然正常了，反正是能用了，就是补全功能差劲点，别扭点就别扭点吧，还要工作呢。\n\n勉强用了一天，觉得还是不行，已经被 YouCompleteMe 惯出毛病了，转了一圈，发现只输入点后自动提示补全和写入文字自动补全时忽略大小写这两点，就没有一个插件可以代替，无奈还是要想办法解决这个问题。\n\n既然 brew 不能带这些参数，那去掉试试好了。\n\n```bash\n$ brew install vim\n```\n\n再次运行 `vim` 还是不行，我试着查看了下 vim 的位置\n\n```bash\n$ which vim\n/usr/bin/vim\n```\n\n隐约觉得事情不太对，通常 brew 安装的软件二进制文件是在 `/usr/local/bin` 中的，查看了下发现果然没有链接过去，再次链接\n\n```bash\n$ sudo chown $(whoami):wheel /usr/local/share/man/de/man1\n$ brew link vim\n```\n\n再次查看\n\n```bash\n$ which vim\n/usr/bin/vim\n```\n\n还是不行，查看环境变量发现 `$PATH` 中，`/usr/bin` 靠后，会覆盖的 `/usr/local/bin` 中的命令，再次调整\n\n```bash\n$ vim .bash_profile\nexport $PATH=$PATH:/usr/local/bin\n$ source .bash_profile\n```\n\n再次查看\n\n```bash\n$ which vim\n/usr/local/bin/vim\n```\n\n搞定，查看版本\n\n```bash\n$ vim --version\n...\n+lua\n...\n```\n\n好像有戏了，我怀着忐忑的心情，再次安装上 YouCompleteMe，打开 Vim，一切正常。\n\n![vim](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/blog/vim1_1440_720.png)\n\n***有些时候就是这样，事情总会得到解决，我们可以逃避过去，也可以休息一下，然后重新挑战。***\n\n- [#3165](https://github.com/Valloric/YouCompleteMe/issues/3165)\n- [brew - Error: invalid option](https://blog.csdn.net/weixin_39569611/article/details/87278729)\n","source":"_posts/2019-03-15-vim-error-caught-deadly-signal-segv.md","raw":"---\ntitle: Vim 报错：Caught deadly signal SEGV\ndate: 2019-03-15 10:15:35\ntags: [vim]\n---\n\nMac 系统大版本的升级总是会引来一些灾难，这次升级到 macOS Mojave 就有很多软件都用不了了，Vim 就是其中一个。\n\n<!-- more --><!-- toc -->\n\n```bash\nVim: Caught deadly signal SEGV\nError detected while processing function 81_PollServerReady[7]..81_Pyeval:Vim: Finished.\n\nline 4:\nException MemoryError: MemoryError() in <module 'threading' from '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.pyc'> ignored\n```\n\n这不，每次启动都报这个错误，然后闪退程序。这就很尴尬了，我现在的开发工作都是在 Vim 中进行，用不了可咋整，网上的说法是因为 YouCompleteMe 插件导致的，需要重新安装 Vim 并使之支持 lua。\n\n我使用 `vim --version` 查看，发现果然当前不支持\n\n```bash\n$ vim --version\n...\n-lua\n...\n```\n\n按照网上教程安装\n\n```bash\n$ brew install vim --with-lua --with-override-system-vi\n...\nError: invalid option: --with-lua\n```\n\n结果报错，无效的参数？？？但是翻遍了 Google 给出的都是这个教程，继续搜索，发现现在新版本的 brew 认为 `--` 会让使用者困惑，所以慢慢去掉了这些参数，去的真及时，那你倒是把新的方法贴出来啊。\n\n我只能暂时退而求其次把 YouCompleteMe 插件删掉好了，结果果然正常了，反正是能用了，就是补全功能差劲点，别扭点就别扭点吧，还要工作呢。\n\n勉强用了一天，觉得还是不行，已经被 YouCompleteMe 惯出毛病了，转了一圈，发现只输入点后自动提示补全和写入文字自动补全时忽略大小写这两点，就没有一个插件可以代替，无奈还是要想办法解决这个问题。\n\n既然 brew 不能带这些参数，那去掉试试好了。\n\n```bash\n$ brew install vim\n```\n\n再次运行 `vim` 还是不行，我试着查看了下 vim 的位置\n\n```bash\n$ which vim\n/usr/bin/vim\n```\n\n隐约觉得事情不太对，通常 brew 安装的软件二进制文件是在 `/usr/local/bin` 中的，查看了下发现果然没有链接过去，再次链接\n\n```bash\n$ sudo chown $(whoami):wheel /usr/local/share/man/de/man1\n$ brew link vim\n```\n\n再次查看\n\n```bash\n$ which vim\n/usr/bin/vim\n```\n\n还是不行，查看环境变量发现 `$PATH` 中，`/usr/bin` 靠后，会覆盖的 `/usr/local/bin` 中的命令，再次调整\n\n```bash\n$ vim .bash_profile\nexport $PATH=$PATH:/usr/local/bin\n$ source .bash_profile\n```\n\n再次查看\n\n```bash\n$ which vim\n/usr/local/bin/vim\n```\n\n搞定，查看版本\n\n```bash\n$ vim --version\n...\n+lua\n...\n```\n\n好像有戏了，我怀着忐忑的心情，再次安装上 YouCompleteMe，打开 Vim，一切正常。\n\n![vim](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/blog/vim1_1440_720.png)\n\n***有些时候就是这样，事情总会得到解决，我们可以逃避过去，也可以休息一下，然后重新挑战。***\n\n- [#3165](https://github.com/Valloric/YouCompleteMe/issues/3165)\n- [brew - Error: invalid option](https://blog.csdn.net/weixin_39569611/article/details/87278729)\n","slug":"vim-error-caught-deadly-signal-segv","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2alb00so5gqorcqfjfs7"},{"title":"Shell 几种算术运算方式","date":"2019-03-16T16:40:29.000Z","_content":"\n\nShell 脚本中，我们可以使用几种方式来实现算数运算。\n\n<!-- more --><!-- toc -->\n\n## expr\n\nexpr 本身是一个算数运算命令，Shell 可以直接拿到它的执行结果\n\n```bash\n$ echo `expr 1 + 2`\n3\n```\n\nexpr 有很多缺点，比如：只能运算整数、数字和符号之间必须都有空格、`*` 号需要转义、无法使用次方运算\n\n```bash\n$ expr 1+2\n1+2\n\n$ expr 1 +2\nexpr: syntax error\n\n$ expr 1 \\* 2\n2\n\n$ expr 1 + 2.3\nexpr: not a decimal number: '2.3'\n```\n\n## 小括号\n\n下面我们来看 shell 本身的计算方式，第一个是小括号，这种方式需要把运算表达式用两层小括号包裹起来\n\n```bash\n$ echo $((1+2))\n3\n\n$ ((i=1+2))\n\n$ echo $i\n3\n\n$ echo $((1 + 2.3))\n3.2999999999999998\n\n$ echo $((2 ** 3))  # 计算三次方\n8\n```\n\n通过例子可以看到，这种方式比 `expr` 写起来更好更舒服，就是在计算浮点数字时会有精度损失。\n\n## 中括号\n\n中括号的方式必须加上 `$` 前缀，并不支持像小括号一样，在括号内赋值，其他与小括号无异。\n\n```bash\n$ echo $[1 + 2]\n3\n\n$ echo $[2 ** 3]\n8\n```\n\n## let\n\nlet 用来指示运算表达式，也可以达到效果，但是同样的有很多缺点，比如运算符和数字不能有空格、不支持次方运算、浮点运算会忽略小数点部分、`*` 需要转义\n\n```bash\n> $ let i = 1 + 2\nzsh: bad math expression: operand expected at =\n\n> $ let i=1+2\n> $ echo $i\n3\n\n> $ let i=1+2.3\n> $ echo $i\n3\n\n> $ let i=2**3\nzsh: no matches found: i=2**3\n\n> $ let i=1+2.6\n> $ echo $i\n3\n\n> $ let i=2\\*3\n> $ echo $i\n6\n```\n\n经过对比可以发现，小括号和中括号的方式最好，两者只是书写存在细微差异，其他两个不建议使用。\n\n- [SHELL脚本--expr命令全解](https://www.cnblogs.com/f-ck-need-u/p/7231832.html)\n","source":"_posts/2019-03-16-shell-calculation.md","raw":"---\ntitle: Shell 几种算术运算方式\ntags:\n  - shell\ndate: 2019-03-16 16:40:29\n---\n\n\nShell 脚本中，我们可以使用几种方式来实现算数运算。\n\n<!-- more --><!-- toc -->\n\n## expr\n\nexpr 本身是一个算数运算命令，Shell 可以直接拿到它的执行结果\n\n```bash\n$ echo `expr 1 + 2`\n3\n```\n\nexpr 有很多缺点，比如：只能运算整数、数字和符号之间必须都有空格、`*` 号需要转义、无法使用次方运算\n\n```bash\n$ expr 1+2\n1+2\n\n$ expr 1 +2\nexpr: syntax error\n\n$ expr 1 \\* 2\n2\n\n$ expr 1 + 2.3\nexpr: not a decimal number: '2.3'\n```\n\n## 小括号\n\n下面我们来看 shell 本身的计算方式，第一个是小括号，这种方式需要把运算表达式用两层小括号包裹起来\n\n```bash\n$ echo $((1+2))\n3\n\n$ ((i=1+2))\n\n$ echo $i\n3\n\n$ echo $((1 + 2.3))\n3.2999999999999998\n\n$ echo $((2 ** 3))  # 计算三次方\n8\n```\n\n通过例子可以看到，这种方式比 `expr` 写起来更好更舒服，就是在计算浮点数字时会有精度损失。\n\n## 中括号\n\n中括号的方式必须加上 `$` 前缀，并不支持像小括号一样，在括号内赋值，其他与小括号无异。\n\n```bash\n$ echo $[1 + 2]\n3\n\n$ echo $[2 ** 3]\n8\n```\n\n## let\n\nlet 用来指示运算表达式，也可以达到效果，但是同样的有很多缺点，比如运算符和数字不能有空格、不支持次方运算、浮点运算会忽略小数点部分、`*` 需要转义\n\n```bash\n> $ let i = 1 + 2\nzsh: bad math expression: operand expected at =\n\n> $ let i=1+2\n> $ echo $i\n3\n\n> $ let i=1+2.3\n> $ echo $i\n3\n\n> $ let i=2**3\nzsh: no matches found: i=2**3\n\n> $ let i=1+2.6\n> $ echo $i\n3\n\n> $ let i=2\\*3\n> $ echo $i\n6\n```\n\n经过对比可以发现，小括号和中括号的方式最好，两者只是书写存在细微差异，其他两个不建议使用。\n\n- [SHELL脚本--expr命令全解](https://www.cnblogs.com/f-ck-need-u/p/7231832.html)\n","slug":"shell-calculation","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2alc00sr5gqolam7l3gx"},{"title":"adb 如何连接夜神模拟器","date":"2019-03-25T15:16:27.000Z","_content":"\n夜神模拟器无法自动出现在 `adb devices` 列表中，需要先打开开发者模式\n\n<!-- more -->\n\n步骤如下：\n\n- 点击`设置` -》`关于平板电脑` -》连续点击 5 次版本号，进入开发者模式\n- 重新进入设置，滑到最下边，进入开发者模式，并打开 USB 调试模式\n- 链接\n\n```bash\n$ adb connect 127.0.0.1:62001\n```\n\n- 查看\n\n```bash\n$ adb devices\n```\n\n\n","source":"_posts/2019-03-25-adb-connect-yeshen.md","raw":"---\ntitle: adb 如何连接夜神模拟器\ndate: 2019-03-25 15:16:27\ntags: [android]\n---\n\n夜神模拟器无法自动出现在 `adb devices` 列表中，需要先打开开发者模式\n\n<!-- more -->\n\n步骤如下：\n\n- 点击`设置` -》`关于平板电脑` -》连续点击 5 次版本号，进入开发者模式\n- 重新进入设置，滑到最下边，进入开发者模式，并打开 USB 调试模式\n- 链接\n\n```bash\n$ adb connect 127.0.0.1:62001\n```\n\n- 查看\n\n```bash\n$ adb devices\n```\n\n\n","slug":"adb-connect-yeshen","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ald00st5gqo40gv8kbm"},{"title":"Python 使用 Redis watch 完成秒杀活动防止超卖 demo","date":"2019-03-17T10:49:48.000Z","_content":"\n\n在做类似抢购活动的程序，我们通常会使用“乐观锁”思路，既保证库存不会超卖，也能够应付大并发的情况，Redis 中 watch 就可以实现“乐观锁”。\n\n<!-- more --><!-- toc -->\n\nRedis 中的事务 `multi/exec` 可以保证数据的原子性，但不能像 Mysql 那样在事务中出错回滚数据，而用 `watch` 来监听数据，就可以实现类似的功能。\n\n先用 `watch` 监听后，在接下来事务的过程，如果数据被修改，则在执行 `exec` 时，则会报错，我们可以根据业务选择重试和返回结果。\n\nPython 中通过管道 Pipeline 来实现 Redis 事务相关操作。\n\n**初始化线程池**\n\n```python\nimport redis\n\n# 创建连接池\npool = redis.ConnectionPool(host = '127.0.0.1', port=6379, db=0)\n# 初始化 redis\nr = redis.Redis(connection_pool = pool)\n```\n\n**初始化管道**\n\n```python\npipe = r.pipeline()\n```\n\n**使用事务**\n\n```python\nKEY = 'count'\ntry:\n    pipe.watch(KEY)         # 监听库存\n    pipe.multi()            # 开始事务\n    pipe.set(KEY, 2)        # 执行操作\n    pipe.execute()          # 执行事务\nexcept Exception as e:\n    # 事务执行过程中，如果数据被修改，则抛出异常，程序可以选择重试或退出\n    pass\nfinally:\n    pipe.reset()            # 重置管道，为重试做准备\n```\n\n通过这些操作，我们可以先实现一个防止商品超卖的 demo。\n\n代码位置 [watch_demo.py](https://github.com/wxnacy/study/blob/master/python/redis_demo/watch_demo.py)\n\n**运行**\n\n```bash\n$ python watch_demo.py\n用户 0 抢购成功，商品剩余 9\n用户 1 抢购成功，商品剩余 8\n用户 2 抢购失败，重试一次\n用户 3 抢购成功，商品剩余 7\n用户 5 抢购失败，重试一次\n用户 4 抢购失败，重试一次\n用户 2 抢购失败，重试一次\n用户 6 抢购失败，重试一次\n用户 7 抢购失败，重试一次\n用户 9 抢购失败，重试一次\n用户 8 抢购成功，商品剩余 6\n用户 10 抢购成功，商品剩余 5\n用户 5 抢购成功，商品剩余 4\n用户 12 抢购失败，重试一次\n用户 6 抢购失败，重试一次\n用户 13 抢购成功，商品剩余 3\n用户 11 抢购失败，重试一次\n用户 14 抢购失败，重试一次\n用户 2 抢购失败，重试一次\n用户 4 抢购失败，重试一次\n用户 9 抢购成功，商品剩余 2\n用户 7 抢购失败，重试一次\n用户 12 抢购成功，商品剩余 1\n用户 2 抢购停止，商品卖完\n用户 6 抢购失败，重试一次\n用户 14 抢购失败，重试一次\n用户 4 抢购停止，商品卖完\n用户 11 抢购成功，商品剩余 0\n用户 7 抢购停止，商品卖完\n用户 6 抢购停止，商品卖完\n用户 14 抢购停止，商品卖完\n```\n","source":"_posts/2019-03-17-python-redis-watch.md","raw":"---\ntitle: Python 使用 Redis watch 完成秒杀活动防止超卖 demo\ntags:\n  - python\n  - redis\ndate: 2019-03-17 10:49:48\n---\n\n\n在做类似抢购活动的程序，我们通常会使用“乐观锁”思路，既保证库存不会超卖，也能够应付大并发的情况，Redis 中 watch 就可以实现“乐观锁”。\n\n<!-- more --><!-- toc -->\n\nRedis 中的事务 `multi/exec` 可以保证数据的原子性，但不能像 Mysql 那样在事务中出错回滚数据，而用 `watch` 来监听数据，就可以实现类似的功能。\n\n先用 `watch` 监听后，在接下来事务的过程，如果数据被修改，则在执行 `exec` 时，则会报错，我们可以根据业务选择重试和返回结果。\n\nPython 中通过管道 Pipeline 来实现 Redis 事务相关操作。\n\n**初始化线程池**\n\n```python\nimport redis\n\n# 创建连接池\npool = redis.ConnectionPool(host = '127.0.0.1', port=6379, db=0)\n# 初始化 redis\nr = redis.Redis(connection_pool = pool)\n```\n\n**初始化管道**\n\n```python\npipe = r.pipeline()\n```\n\n**使用事务**\n\n```python\nKEY = 'count'\ntry:\n    pipe.watch(KEY)         # 监听库存\n    pipe.multi()            # 开始事务\n    pipe.set(KEY, 2)        # 执行操作\n    pipe.execute()          # 执行事务\nexcept Exception as e:\n    # 事务执行过程中，如果数据被修改，则抛出异常，程序可以选择重试或退出\n    pass\nfinally:\n    pipe.reset()            # 重置管道，为重试做准备\n```\n\n通过这些操作，我们可以先实现一个防止商品超卖的 demo。\n\n代码位置 [watch_demo.py](https://github.com/wxnacy/study/blob/master/python/redis_demo/watch_demo.py)\n\n**运行**\n\n```bash\n$ python watch_demo.py\n用户 0 抢购成功，商品剩余 9\n用户 1 抢购成功，商品剩余 8\n用户 2 抢购失败，重试一次\n用户 3 抢购成功，商品剩余 7\n用户 5 抢购失败，重试一次\n用户 4 抢购失败，重试一次\n用户 2 抢购失败，重试一次\n用户 6 抢购失败，重试一次\n用户 7 抢购失败，重试一次\n用户 9 抢购失败，重试一次\n用户 8 抢购成功，商品剩余 6\n用户 10 抢购成功，商品剩余 5\n用户 5 抢购成功，商品剩余 4\n用户 12 抢购失败，重试一次\n用户 6 抢购失败，重试一次\n用户 13 抢购成功，商品剩余 3\n用户 11 抢购失败，重试一次\n用户 14 抢购失败，重试一次\n用户 2 抢购失败，重试一次\n用户 4 抢购失败，重试一次\n用户 9 抢购成功，商品剩余 2\n用户 7 抢购失败，重试一次\n用户 12 抢购成功，商品剩余 1\n用户 2 抢购停止，商品卖完\n用户 6 抢购失败，重试一次\n用户 14 抢购失败，重试一次\n用户 4 抢购停止，商品卖完\n用户 11 抢购成功，商品剩余 0\n用户 7 抢购停止，商品卖完\n用户 6 抢购停止，商品卖完\n用户 14 抢购停止，商品卖完\n```\n","slug":"python-redis-watch","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2alf00sv5gqolb0661qa"},{"title":"Python 计时器 timeit","date":"2019-03-26T22:10:02.000Z","_content":"\n\n网上很多帖子讨论 Python 中计时用 `time.clock()` 还是用 `time.time()`。\n\n<!-- more --><!-- toc -->\n\n## time.clock() vs time.time()\n- `time.clock()` 计算的是 CPU 的时间，在 windows 平台上精度比较高\n- `time.time()` 计算的是程序的运行时间，会受到机器负载的影响，除了 windows 以外的平台精度比较高\n\n所以我们可以按照平台来使用不同的方法\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport time\nimport sys\n\nif sys.platform == \"win32\":\n    # On Windows, the best timer is time.clock()\n    default_timer = time.clock\nelse:\n    # On most other platforms the best timer is time.time()\n    default_timer = time.time\n```\n\n或者呢，直接使用 `timeit` 模块\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport timeit\n\nb = timeit.default_timer()\n# to some\ne = timeit.default_timer()\nprint(e - b)\n```\n\n`timeit.default_timer()` 可以自动选择当前平台适合的计时器，因为它的源代码就是上面那段判断代码。\n\n下面我们重点来介绍下 `timeit` 模块\n\n`timeit` 模块提供了一种简单的方法来计算一小段Python代码。 它既有命令行界面，也有可调用界面。 它避免了许多用于测量执行时间的常见陷阱。\n\n## timeit\n\n**命令行使用**\n\n```python\n$ python -m timeit '\"-\".join(str(n) for n in range(100))'\n10000 loops, best of 3: 40.3 usec per loop\n```\n\n默认情况下，命令行对小段代码，重复执行三个循环，每个循环执行 10000 次，其中最好的用了 40.3 秒\n\n**代码块中使用**\n\n```python\n>>> import timeit\n>>> # attribute is missing\n>>> s = \"\"\"\\\n... try:\n...     str.__nonzero__\n... except AttributeError:\n...     pass\n... \"\"\"\n>>> timeit.timeit(s)\n0.5832341330096824\n>>> timeit.timeit(s, number=1000)\n0.000628526002401486\n```\n\n`number` 不指定时，默认为 `default_number = 1000000`\n\n```python\n>>> timeit.repeat(s)\n[0.5949273270089179, 0.6405833000026178, 0.5868908820120851]\n>>> timeit.repeat(s, repeat=4)\n[0.5963048749981681, 0.5834796829876723, 0.5749933830084046, 0.5814367970015155]\n```\n\n增加重复次数，使用 `repeat()` 方法，不指定 `repeat` 时，默认 `default_repeat = 3`\n\n## 命令行语法\n\n```bash\npython -m timeit [-n N] [-r N] [-s S] [-t] [-c] [-h] [statement ...]\n```\n- `-n N, --number=N` 执行 `statement` 的次数\n- `-r N, --repeat=N` 循环的重复次数，默认：3\n- `-s S, --setup=S` 最初要执行的语句，默认：pass\n- `-t, --time` 使用 `time.time()` 计时，在 windows 以外平台默认使用该模式\n- `-c, --clock` 使用 `time.clock()` 计时，在 windows 平台默认使用该模式\n- `-v, --verbose` 打印原始计时结果，得到更多数字精度\n- `-h, --help` 帮助信息\n\n当 `-n` 不指定时，程序会自动执行 10 的倍数，使执行时间不少于 0.2 秒\n\n`-s` 可以执行一段前置代码，这在很多场景是很有用的\n\n**命令行中使用**\n\n```bash\n$ python -m timeit -s 'text = \"sample string\"; char = \"g\"'  'char in text'\n10000000 loops, best of 3: 0.0877 usec per loop\n```\n\n**代码块中使用**\n\n在代码快中，这个参数更有用处，我们不必把代码都写在字符串中\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef test():\n    \"\"\"Stupid test function\"\"\"\n    L = []\n    for i in range(100):\n        L.append(i)\n\nif __name__ == '__main__':\n    import timeit\n    print(timeit.timeit(\"test()\", setup=\"from __main__ import test\"))\n```\n\n- 文档：https://docs.python.org/2/library/timeit.html\n- 源代码：https://github.com/python/cpython/blob/2.7/Lib/timeit.py\n\n","source":"_posts/2019-03-26-python-timeit.md","raw":"---\ntitle: Python 计时器 timeit\ntags:\n  - python\ndate: 2019-03-26 22:10:02\n---\n\n\n网上很多帖子讨论 Python 中计时用 `time.clock()` 还是用 `time.time()`。\n\n<!-- more --><!-- toc -->\n\n## time.clock() vs time.time()\n- `time.clock()` 计算的是 CPU 的时间，在 windows 平台上精度比较高\n- `time.time()` 计算的是程序的运行时间，会受到机器负载的影响，除了 windows 以外的平台精度比较高\n\n所以我们可以按照平台来使用不同的方法\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport time\nimport sys\n\nif sys.platform == \"win32\":\n    # On Windows, the best timer is time.clock()\n    default_timer = time.clock\nelse:\n    # On most other platforms the best timer is time.time()\n    default_timer = time.time\n```\n\n或者呢，直接使用 `timeit` 模块\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport timeit\n\nb = timeit.default_timer()\n# to some\ne = timeit.default_timer()\nprint(e - b)\n```\n\n`timeit.default_timer()` 可以自动选择当前平台适合的计时器，因为它的源代码就是上面那段判断代码。\n\n下面我们重点来介绍下 `timeit` 模块\n\n`timeit` 模块提供了一种简单的方法来计算一小段Python代码。 它既有命令行界面，也有可调用界面。 它避免了许多用于测量执行时间的常见陷阱。\n\n## timeit\n\n**命令行使用**\n\n```python\n$ python -m timeit '\"-\".join(str(n) for n in range(100))'\n10000 loops, best of 3: 40.3 usec per loop\n```\n\n默认情况下，命令行对小段代码，重复执行三个循环，每个循环执行 10000 次，其中最好的用了 40.3 秒\n\n**代码块中使用**\n\n```python\n>>> import timeit\n>>> # attribute is missing\n>>> s = \"\"\"\\\n... try:\n...     str.__nonzero__\n... except AttributeError:\n...     pass\n... \"\"\"\n>>> timeit.timeit(s)\n0.5832341330096824\n>>> timeit.timeit(s, number=1000)\n0.000628526002401486\n```\n\n`number` 不指定时，默认为 `default_number = 1000000`\n\n```python\n>>> timeit.repeat(s)\n[0.5949273270089179, 0.6405833000026178, 0.5868908820120851]\n>>> timeit.repeat(s, repeat=4)\n[0.5963048749981681, 0.5834796829876723, 0.5749933830084046, 0.5814367970015155]\n```\n\n增加重复次数，使用 `repeat()` 方法，不指定 `repeat` 时，默认 `default_repeat = 3`\n\n## 命令行语法\n\n```bash\npython -m timeit [-n N] [-r N] [-s S] [-t] [-c] [-h] [statement ...]\n```\n- `-n N, --number=N` 执行 `statement` 的次数\n- `-r N, --repeat=N` 循环的重复次数，默认：3\n- `-s S, --setup=S` 最初要执行的语句，默认：pass\n- `-t, --time` 使用 `time.time()` 计时，在 windows 以外平台默认使用该模式\n- `-c, --clock` 使用 `time.clock()` 计时，在 windows 平台默认使用该模式\n- `-v, --verbose` 打印原始计时结果，得到更多数字精度\n- `-h, --help` 帮助信息\n\n当 `-n` 不指定时，程序会自动执行 10 的倍数，使执行时间不少于 0.2 秒\n\n`-s` 可以执行一段前置代码，这在很多场景是很有用的\n\n**命令行中使用**\n\n```bash\n$ python -m timeit -s 'text = \"sample string\"; char = \"g\"'  'char in text'\n10000000 loops, best of 3: 0.0877 usec per loop\n```\n\n**代码块中使用**\n\n在代码快中，这个参数更有用处，我们不必把代码都写在字符串中\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef test():\n    \"\"\"Stupid test function\"\"\"\n    L = []\n    for i in range(100):\n        L.append(i)\n\nif __name__ == '__main__':\n    import timeit\n    print(timeit.timeit(\"test()\", setup=\"from __main__ import test\"))\n```\n\n- 文档：https://docs.python.org/2/library/timeit.html\n- 源代码：https://github.com/python/cpython/blob/2.7/Lib/timeit.py\n\n","slug":"python-timeit","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2alg00sx5gqorgdy2iit"},{"title":"Python 访问中文文档","date":"2019-03-27T14:42:32.000Z","_content":"\n今天使用中文 Google 时，以外发现了 Python 的中文文档，地址： https://docs.python.org/zh-cn\n\n<!-- more -->\n\n它会默认跳转到 Python 3.7 的文档\n\n![python](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/blog/python-doc-zh_1411_705.png)\n\n有意思的是，如果使用地址：https://docs.python.org 打开文档，左上角是看不到 `zh-cn` 选项的，大概是官方认为还没到直接开发的地步，因为确实很多东西还没做好。\n\n比如搜索功能，现在还是只能搜索英文，如何的中文信息都搜索不到。\n\n很多文档也还保留了大量的英文内容。\n\n不过这不影响，一些基础模块的查看，毕竟有和没有是两个概念，这对很多初学者也是很重要的。\n\n<!-- 现在文档有 `2.7` `3.5` `3.6` `3.7` `3.8` 多个版本 -->\n\n文档左侧可以跳转其他版本，但是有个坑，直接点过去依然进入的是英文页面，我们需要\n修改下地址，比如：\n\n```bash\nhttps://docs.python.org/3.6/\n```\n\n```bash\nhttps://docs.python.org/zh-cn/3.6/\n```\n\n但是 `3.5` 版本修改后是 404，说明官方还完全没有开始这个版本的翻译工作，这里也是希望官方可以尽快完善。\n","source":"_posts/2019-03-27-python-doc-zh.md","raw":"---\ntitle: Python 访问中文文档\ndate: 2019-03-27 14:42:32\ntags: [python]\n---\n\n今天使用中文 Google 时，以外发现了 Python 的中文文档，地址： https://docs.python.org/zh-cn\n\n<!-- more -->\n\n它会默认跳转到 Python 3.7 的文档\n\n![python](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/blog/python-doc-zh_1411_705.png)\n\n有意思的是，如果使用地址：https://docs.python.org 打开文档，左上角是看不到 `zh-cn` 选项的，大概是官方认为还没到直接开发的地步，因为确实很多东西还没做好。\n\n比如搜索功能，现在还是只能搜索英文，如何的中文信息都搜索不到。\n\n很多文档也还保留了大量的英文内容。\n\n不过这不影响，一些基础模块的查看，毕竟有和没有是两个概念，这对很多初学者也是很重要的。\n\n<!-- 现在文档有 `2.7` `3.5` `3.6` `3.7` `3.8` 多个版本 -->\n\n文档左侧可以跳转其他版本，但是有个坑，直接点过去依然进入的是英文页面，我们需要\n修改下地址，比如：\n\n```bash\nhttps://docs.python.org/3.6/\n```\n\n```bash\nhttps://docs.python.org/zh-cn/3.6/\n```\n\n但是 `3.5` 版本修改后是 404，说明官方还完全没有开始这个版本的翻译工作，这里也是希望官方可以尽快完善。\n","slug":"python-doc-zh","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2alh00sz5gqocf3ztno8"},{"title":"Python 协程库 gevent","date":"2019-03-28T00:01:35.000Z","_content":"\n> [gevent](https://github.com/gevent/gevent) 是一个基于 libev 的并发库。它为各种并发和网络相关的任务提供了整洁的API。\n\n<!-- more --><!-- toc -->\n\nPython 中多线程的性能极差，替代它的另一种“并发”方式是协程。\n\nPython 版本中协程一直在不断的进化\n- `yeild` python2.x\n- `asynico + yield from` python3.4\n- `asynico + await` python3.5\n\n而这个过程中，一直可以拿来就用的三方库就是 gevent\n\n在gevent中用到的主要模式是Greenlet, 它是以C扩展模块形式接入Python的轻量级协程。 Greenlet全部运行在主程序操作系统进程的内部，但它们被协作式地调度。\n\n> 在任何时刻，只有一个协程在运行。\n\n换句话说，协程并不会切换线程或进程（所以性能会比多线程高很多），而是在 IO 阻塞时，可以切换到其他的 Greenlet，等到适当时机再切换回来，这样减少阻塞浪费的时间，使其看起来像是在并发。所以协程可以解决 IO 密集的性能问题，而 CPU 密集则无能为力。\n\n## 异步执行\n\n首先安装 gevent\n\n```bash\n$ pip install gevent\n```\n\n我们来模拟程序的阻塞，使用 `gevent.sleep(0)` 主动让程序交出执行权。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nimport gevent\n\nimport os\nimport threading\nimport time\n\ndef print_func_progress():\n    print('[{}] Greenlet {} Process {} - Thread {}'.format(\n        time.time(), gevent.getcurrent(), os.getpid(), threading.current_thread().ident))\n\ndef foo():\n    print_func_progress()\n    print('Running in foo')\n    gevent.sleep(0)\n    print('Explicit context switch to foo again')\n\ndef bar():\n    print_func_progress()\n    print('Explicit context to bar')\n    gevent.sleep(0)\n    print('Implicit context switch back to bar')\n\nif __name__ == \"__main__\":\n    gevent.joinall([\n        gevent.spawn(foo),\n        gevent.spawn(bar),\n    ])\n\n# [1553694796.1719072] Greenlet <Greenlet at 0x10e9a4930: foo> Process 2022 - Thread 4683818432\n# Running in foo\n# [1553694796.171974] Greenlet <Greenlet at 0x10e9a4a60: bar> Process 2022 - Thread 4683818432\n# Explicit context to bar\n# Explicit context switch to foo again\n# Implicit context switch back to bar\n```\n\n从打印结果中，可以看到无论是进程 `Process`，还是线程 `Thread`，整个过程都是没有变化的，所以再次确定了协程是单线程运行的。并且在运行过程中，协程在两个方法间切换，以减少阻塞浪费的时间。\n\n## 隐形交出执行权\n\n当我们的程序受限于网络的 IO 阻塞时，gevent 才能真正发挥实力，它提供了方法，可以隐形的交出上下文执行权，这样我们可以在不改变程序结构的情况下来实现协程。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nimport gevent.monkey\ngevent.monkey.patch_socket()\n\nimport gevent\nimport requests\n\nimport timeit\n\ndef print_func_run_time(count, func, **kw):\n    b = timeit.default_timer()\n    for i in range(count):\n        func(**kw)\n    print(func.__name__, 'run {} times used {}s'.format(count,\n        timeit.default_timer() -b ))\n\ndef fetch(pid):\n    print('pid {} begin request url', pid)\n    response = requests.get('http://baidu.com')\n    print('pid {} get response status {}', pid, response.status_code)\n\ndef synchronous():\n    for i in range(0,5):\n        fetch(i)\n\ndef asynchronous():\n    threads = []\n    for i in range(0,5):\n        threads.append(gevent.spawn(fetch, i))\n    gevent.joinall(threads)\n\nprint('Synchronous:')\nprint_func_run_time(1, synchronous)\n\nprint('Asynchronous:')\nprint_func_run_time(1, asynchronous)\n\n# Synchronous:\n# pid {} begin request url 0\n# pid {} get response status {} 0 200\n# pid {} begin request url 1\n# pid {} get response status {} 1 200\n# pid {} begin request url 2\n# pid {} get response status {} 2 200\n# pid {} begin request url 3\n# pid {} get response status {} 3 200\n# pid {} begin request url 4\n# pid {} get response status {} 4 200\n# synchronous run 1 times used 0.13507633499102667s\n# Asynchronous:\n# pid {} begin request url 0\n# pid {} begin request url 1\n# pid {} begin request url 2\n# pid {} begin request url 3\n# pid {} begin request url 4\n# pid {} get response status {} 0 200\n# pid {} get response status {} 4 200\n# pid {} get response status {} 3 200\n# pid {} get response status {} 1 200\n# pid {} get response status {} 2 200\n# asynchronous run 1 times used 0.03902721201302484s\n```\n\n从结果中我们可以看到，使用 gevent 执行的程序，性能比顺序执行好了很多倍，而在功能函数中，我们也并没有主动交出执行权，这一些都归功于猴子补丁 `gevent.monkey`\n\n## 猴子补丁\n\n猴子补丁(monkey patching) 得以让 gevent 变得更加强大。上面的代码中我们用到了 `gevent.monkey.patch_socket()`，它修改了 Python 的 socket 标准库。\n\n```python\n>>> import socket\n>>> socket.socket\n<class 'socket.socket'>\n>>> from gevent import monkey\n>>> monkey.patch_socket()\n>>> socket.socket\n<class 'gevent._socket3.socket'>\n```\n\nPython的运行环境允许我们在运行时修改大部分的对象，包括模块，类甚至函数。所以猴子补丁的实现原理很简单，比如：\n\n```python\n>>> import json\n>>> json.__name__\n'json'\n>>> def patch_json():\n...     json.__name__ = 'wjson'\n...\n>>> patch_json()\n>>> json.__name__\n'wjson'\n```\n\n在这种情况下，gevent能够 修改标准库里面大部分的阻塞式系统调用，包括socket、ssl、threading和 select等模块，而变为协作式运行。通常情况下我们只需要调用 `gevent.monkey.patch_all()`，它可以修改所有可以兼容的模块\n\n`patch_all()` 方法语法如下\n\n```python\ndef patch_all(socket=True, dns=True, time=True, select=True, thread=True, os=True, ssl=True,\n              httplib=False, # Deprecated, to be removed.\n              subprocess=True, sys=False, aggressive=True, Event=True,\n              builtins=True, signal=True,\n              queue=True,\n              **kwargs):\n```\n\n如果不想修改某个模块，直接传参即可，比如\n\n```python\npatch_all(socket=False)\n```\n\n或者在该方法之后导入，让原始模块覆盖掉 monkey 的修改即可\n\n```python\n>>> monkey.patch_all()\n>>> import select\n>>> select.select\n<function select at 0x100e40f28>\n```\n\n## gevent without code\n\n猴子补丁如此厉害，好像可以不用主动写 gevent 代码就可以实现。其实真的可以不用任何 gevent 代码，就可以让程序实现协程，只需要使用可以调用 gevent 的容器来启动程序即可。\n\n我们来使用 gunicorn 来启动一个 Flask 程序。\n\n如果你不了解 gunicorn，可以看我的这篇文章[使用 gunicorn 启动你的项目](/2017/08/15/python-2017-08-15-gunicorn-run/)\n\n安装模块\n\n```bash\n$ pip install gunicorn\n$ pip install flask\n```\n\n编辑文件\n\n```bash\n$ touch gevent_without_code.py\n$ vim gevent_without_code.py\n```\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nimport time\nimport socket\nfrom flask import Flask\napp = Flask(__name__)\n\nprint(socket.socket)\n\n@app.route('/for')\ndef get():\n    time.sleep(4)\n    return \"for\"\n\n@app.route('/bar')\ndef get2():\n    return \"bar\"\n```\n\n不使用 gevent 启动\n\n```bash\n$ gunicorn gevent_without_code:app\n\n[2019-03-27 23:06:53 +0800] [53872] [INFO] Starting gunicorn 19.7.1\n[2019-03-27 23:06:53 +0800] [53872] [INFO] Listening at: http://127.0.0.1:8000 (53872)\n[2019-03-27 23:06:53 +0800] [53872] [INFO] Using worker: sync\n[2019-03-27 23:06:53 +0800] [53932] [INFO] Booting worker with pid: 53932\n<class 'socket.socket'>\n[2019-03-27 23:06:56 +0800] [53872] [INFO] Handling signal: winch\n```\n\ngunicorn 默认启动一个 8000 端口的 web 程序，我们有两个接口 `/for` 强制睡眠 4 秒钟，`/bar` 直接返回结果\n\n这时候我们先访问 `/for` 在访问 `/bar` 会发生阻塞\n\n![gevent1](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/blog/gevent1.gif)\n\n`/bar` 需要等待 `/for` 返回结果后才能执行，这显然不是一个健康的程序。我们试试使用 gevent。\n\n`<ctrl> + c` 停掉程序，重新启动\n\n```bash\n$ gunicorn gevent_without_code:app -k gevent\n[2019-03-27 23:16:41 +0800] [63766] [INFO] Starting gunicorn 19.7.1\n[2019-03-27 23:16:41 +0800] [63766] [INFO] Listening at: http://127.0.0.1:8000 (63766)\n[2019-03-27 23:16:41 +0800] [63766] [INFO] Using worker: gevent\n[2019-03-27 23:16:41 +0800] [63826] [INFO] Booting worker with pid: 63826\n<class 'gevent._socket3.socket'>\n```\n\n再次访问两个接口，效果非常明显\n\n![gevent2](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/blog/gevent2.gif)\n\n当 `/for` 阻塞时，gevent 直接跳过执行 `/bar`，等阻塞过后，在继续执行 `/for`。\n\n这里我们一句 gevent 代码都没写，那它是什么实现的呢？\n\n如果你留意刚才的启动日志，会发现我们代码有句 `print(socket.socket)`，在使用 gevent 前后是有不同的。\n\n```bash\n...\n<class 'socket.socket'>\n...\n\n...\n<class 'gevent._socket3.socket'>\n...\n```\n\n就像我们上面讲到的那样，gevent 在这里隐形的调用了 `gevent.monkey.patch_all()` 方法，使得相关的程序都自动变成了协程可调用的状态。\n\n不管你代码写的怎么样，用 gevent 来启动你的项目吧，一定会让你觉得物有所值。\n\n- [本文 demo 源码](https://github.com/wxnacy/study/tree/master/python/gevent_demo)\n- [gevent 源码](https://github.com/gevent/gevent)\n- [gevent 程序员指南](http://hhkbp2.github.io/gevent-tutorial/)\n","source":"_posts/2019-03-28-gevent.md","raw":"---\ntitle: Python 协程库 gevent\ntags:\n  - python\ndate: 2019-03-28 00:01:35\n---\n\n> [gevent](https://github.com/gevent/gevent) 是一个基于 libev 的并发库。它为各种并发和网络相关的任务提供了整洁的API。\n\n<!-- more --><!-- toc -->\n\nPython 中多线程的性能极差，替代它的另一种“并发”方式是协程。\n\nPython 版本中协程一直在不断的进化\n- `yeild` python2.x\n- `asynico + yield from` python3.4\n- `asynico + await` python3.5\n\n而这个过程中，一直可以拿来就用的三方库就是 gevent\n\n在gevent中用到的主要模式是Greenlet, 它是以C扩展模块形式接入Python的轻量级协程。 Greenlet全部运行在主程序操作系统进程的内部，但它们被协作式地调度。\n\n> 在任何时刻，只有一个协程在运行。\n\n换句话说，协程并不会切换线程或进程（所以性能会比多线程高很多），而是在 IO 阻塞时，可以切换到其他的 Greenlet，等到适当时机再切换回来，这样减少阻塞浪费的时间，使其看起来像是在并发。所以协程可以解决 IO 密集的性能问题，而 CPU 密集则无能为力。\n\n## 异步执行\n\n首先安装 gevent\n\n```bash\n$ pip install gevent\n```\n\n我们来模拟程序的阻塞，使用 `gevent.sleep(0)` 主动让程序交出执行权。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nimport gevent\n\nimport os\nimport threading\nimport time\n\ndef print_func_progress():\n    print('[{}] Greenlet {} Process {} - Thread {}'.format(\n        time.time(), gevent.getcurrent(), os.getpid(), threading.current_thread().ident))\n\ndef foo():\n    print_func_progress()\n    print('Running in foo')\n    gevent.sleep(0)\n    print('Explicit context switch to foo again')\n\ndef bar():\n    print_func_progress()\n    print('Explicit context to bar')\n    gevent.sleep(0)\n    print('Implicit context switch back to bar')\n\nif __name__ == \"__main__\":\n    gevent.joinall([\n        gevent.spawn(foo),\n        gevent.spawn(bar),\n    ])\n\n# [1553694796.1719072] Greenlet <Greenlet at 0x10e9a4930: foo> Process 2022 - Thread 4683818432\n# Running in foo\n# [1553694796.171974] Greenlet <Greenlet at 0x10e9a4a60: bar> Process 2022 - Thread 4683818432\n# Explicit context to bar\n# Explicit context switch to foo again\n# Implicit context switch back to bar\n```\n\n从打印结果中，可以看到无论是进程 `Process`，还是线程 `Thread`，整个过程都是没有变化的，所以再次确定了协程是单线程运行的。并且在运行过程中，协程在两个方法间切换，以减少阻塞浪费的时间。\n\n## 隐形交出执行权\n\n当我们的程序受限于网络的 IO 阻塞时，gevent 才能真正发挥实力，它提供了方法，可以隐形的交出上下文执行权，这样我们可以在不改变程序结构的情况下来实现协程。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nimport gevent.monkey\ngevent.monkey.patch_socket()\n\nimport gevent\nimport requests\n\nimport timeit\n\ndef print_func_run_time(count, func, **kw):\n    b = timeit.default_timer()\n    for i in range(count):\n        func(**kw)\n    print(func.__name__, 'run {} times used {}s'.format(count,\n        timeit.default_timer() -b ))\n\ndef fetch(pid):\n    print('pid {} begin request url', pid)\n    response = requests.get('http://baidu.com')\n    print('pid {} get response status {}', pid, response.status_code)\n\ndef synchronous():\n    for i in range(0,5):\n        fetch(i)\n\ndef asynchronous():\n    threads = []\n    for i in range(0,5):\n        threads.append(gevent.spawn(fetch, i))\n    gevent.joinall(threads)\n\nprint('Synchronous:')\nprint_func_run_time(1, synchronous)\n\nprint('Asynchronous:')\nprint_func_run_time(1, asynchronous)\n\n# Synchronous:\n# pid {} begin request url 0\n# pid {} get response status {} 0 200\n# pid {} begin request url 1\n# pid {} get response status {} 1 200\n# pid {} begin request url 2\n# pid {} get response status {} 2 200\n# pid {} begin request url 3\n# pid {} get response status {} 3 200\n# pid {} begin request url 4\n# pid {} get response status {} 4 200\n# synchronous run 1 times used 0.13507633499102667s\n# Asynchronous:\n# pid {} begin request url 0\n# pid {} begin request url 1\n# pid {} begin request url 2\n# pid {} begin request url 3\n# pid {} begin request url 4\n# pid {} get response status {} 0 200\n# pid {} get response status {} 4 200\n# pid {} get response status {} 3 200\n# pid {} get response status {} 1 200\n# pid {} get response status {} 2 200\n# asynchronous run 1 times used 0.03902721201302484s\n```\n\n从结果中我们可以看到，使用 gevent 执行的程序，性能比顺序执行好了很多倍，而在功能函数中，我们也并没有主动交出执行权，这一些都归功于猴子补丁 `gevent.monkey`\n\n## 猴子补丁\n\n猴子补丁(monkey patching) 得以让 gevent 变得更加强大。上面的代码中我们用到了 `gevent.monkey.patch_socket()`，它修改了 Python 的 socket 标准库。\n\n```python\n>>> import socket\n>>> socket.socket\n<class 'socket.socket'>\n>>> from gevent import monkey\n>>> monkey.patch_socket()\n>>> socket.socket\n<class 'gevent._socket3.socket'>\n```\n\nPython的运行环境允许我们在运行时修改大部分的对象，包括模块，类甚至函数。所以猴子补丁的实现原理很简单，比如：\n\n```python\n>>> import json\n>>> json.__name__\n'json'\n>>> def patch_json():\n...     json.__name__ = 'wjson'\n...\n>>> patch_json()\n>>> json.__name__\n'wjson'\n```\n\n在这种情况下，gevent能够 修改标准库里面大部分的阻塞式系统调用，包括socket、ssl、threading和 select等模块，而变为协作式运行。通常情况下我们只需要调用 `gevent.monkey.patch_all()`，它可以修改所有可以兼容的模块\n\n`patch_all()` 方法语法如下\n\n```python\ndef patch_all(socket=True, dns=True, time=True, select=True, thread=True, os=True, ssl=True,\n              httplib=False, # Deprecated, to be removed.\n              subprocess=True, sys=False, aggressive=True, Event=True,\n              builtins=True, signal=True,\n              queue=True,\n              **kwargs):\n```\n\n如果不想修改某个模块，直接传参即可，比如\n\n```python\npatch_all(socket=False)\n```\n\n或者在该方法之后导入，让原始模块覆盖掉 monkey 的修改即可\n\n```python\n>>> monkey.patch_all()\n>>> import select\n>>> select.select\n<function select at 0x100e40f28>\n```\n\n## gevent without code\n\n猴子补丁如此厉害，好像可以不用主动写 gevent 代码就可以实现。其实真的可以不用任何 gevent 代码，就可以让程序实现协程，只需要使用可以调用 gevent 的容器来启动程序即可。\n\n我们来使用 gunicorn 来启动一个 Flask 程序。\n\n如果你不了解 gunicorn，可以看我的这篇文章[使用 gunicorn 启动你的项目](/2017/08/15/python-2017-08-15-gunicorn-run/)\n\n安装模块\n\n```bash\n$ pip install gunicorn\n$ pip install flask\n```\n\n编辑文件\n\n```bash\n$ touch gevent_without_code.py\n$ vim gevent_without_code.py\n```\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nimport time\nimport socket\nfrom flask import Flask\napp = Flask(__name__)\n\nprint(socket.socket)\n\n@app.route('/for')\ndef get():\n    time.sleep(4)\n    return \"for\"\n\n@app.route('/bar')\ndef get2():\n    return \"bar\"\n```\n\n不使用 gevent 启动\n\n```bash\n$ gunicorn gevent_without_code:app\n\n[2019-03-27 23:06:53 +0800] [53872] [INFO] Starting gunicorn 19.7.1\n[2019-03-27 23:06:53 +0800] [53872] [INFO] Listening at: http://127.0.0.1:8000 (53872)\n[2019-03-27 23:06:53 +0800] [53872] [INFO] Using worker: sync\n[2019-03-27 23:06:53 +0800] [53932] [INFO] Booting worker with pid: 53932\n<class 'socket.socket'>\n[2019-03-27 23:06:56 +0800] [53872] [INFO] Handling signal: winch\n```\n\ngunicorn 默认启动一个 8000 端口的 web 程序，我们有两个接口 `/for` 强制睡眠 4 秒钟，`/bar` 直接返回结果\n\n这时候我们先访问 `/for` 在访问 `/bar` 会发生阻塞\n\n![gevent1](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/blog/gevent1.gif)\n\n`/bar` 需要等待 `/for` 返回结果后才能执行，这显然不是一个健康的程序。我们试试使用 gevent。\n\n`<ctrl> + c` 停掉程序，重新启动\n\n```bash\n$ gunicorn gevent_without_code:app -k gevent\n[2019-03-27 23:16:41 +0800] [63766] [INFO] Starting gunicorn 19.7.1\n[2019-03-27 23:16:41 +0800] [63766] [INFO] Listening at: http://127.0.0.1:8000 (63766)\n[2019-03-27 23:16:41 +0800] [63766] [INFO] Using worker: gevent\n[2019-03-27 23:16:41 +0800] [63826] [INFO] Booting worker with pid: 63826\n<class 'gevent._socket3.socket'>\n```\n\n再次访问两个接口，效果非常明显\n\n![gevent2](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/blog/gevent2.gif)\n\n当 `/for` 阻塞时，gevent 直接跳过执行 `/bar`，等阻塞过后，在继续执行 `/for`。\n\n这里我们一句 gevent 代码都没写，那它是什么实现的呢？\n\n如果你留意刚才的启动日志，会发现我们代码有句 `print(socket.socket)`，在使用 gevent 前后是有不同的。\n\n```bash\n...\n<class 'socket.socket'>\n...\n\n...\n<class 'gevent._socket3.socket'>\n...\n```\n\n就像我们上面讲到的那样，gevent 在这里隐形的调用了 `gevent.monkey.patch_all()` 方法，使得相关的程序都自动变成了协程可调用的状态。\n\n不管你代码写的怎么样，用 gevent 来启动你的项目吧，一定会让你觉得物有所值。\n\n- [本文 demo 源码](https://github.com/wxnacy/study/tree/master/python/gevent_demo)\n- [gevent 源码](https://github.com/gevent/gevent)\n- [gevent 程序员指南](http://hhkbp2.github.io/gevent-tutorial/)\n","slug":"gevent","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ali00t15gqo8ou6hz2z"},{"title":"bpython 强大的自动补全 Python Shell 工具","date":"2019-04-02T09:48:16.000Z","_content":"\n\n提到 Python Shell 工具，要说 ipython 排老二，那没有哪位能排第一，它的功能强大是毋庸置疑的，然后强大归强大，这并不代表能适合所有人。\n\n<!-- more -->\n\n比如说我，我编写程序，最讲究的效率，自动补全和快速输入是必要的。但是 ipython 却远远满足不了我，如果你也用 `Vim + YouCompleteMe` 应该可以理解我。也许你会说，这本来就是 shell 命令工具，还能像 IDE 咋滴，嘿，巧了，今天要说的 [bpython](https://bpython-interpreter.org/) 就是个 shell 工具，但是它也能像 IDE 一样编写代码。\n\n![bpython](https://camo.githubusercontent.com/fffc539a28d2465c11b74ff3c06d0b5595037454/687474703a2f2f692e696d6775722e636f6d2f6a66386d4374502e676966)\n\n相信你看完这个官方的 demo，已经开始想去了解它了，跟着我一起来吧。\n\n**安装**\n\n```bash\n$ pip install bpython\n```\n\n**运行**\n\n```bash\n> $ bpython\nbpython version 0.17.1 on top of Python 3.7.2 /Users/wxnacy/.pyenv/versions/3.7.2/Python.framework/Versions/3.7/bin/python3.7\n>>>\nWelcome to bpython! Press <F1> for help.\n```\n\n使用 `<F1>` 可以查看帮助文档\n\n我挑一些常用的键位说一下\n\n```bash\n<Tab>           # 出现提示后，进行选择\n<C-a>           # 快速跳转行首\n<C-e>           # 快速跳转行尾，如果有上次输入记录，则自动输入\n<C-u>           # 清空当前行\n<C-w>           # 删除前一个单词\n<C-h>           # 删除删除前一个字符，免去了手指移动到 backspace 的时间，刚好我在 Vim 中也设置了这个按键\n\n<F1>            # 帮助文档\n<F3>            # 打开配置文件，第一次提示是否生成配置文件\n<F6>            # 重新加载 module，这在测试程序时非常有必要\n<F7>            # 将当前 shell 中的代码放在临时文件中，并使用 vim 进行编辑\n<F8>            # 将当前代码上传到 pastebin 上，并生成一个有效期为 7 天的链接\n```\n\n挑几个重点的说下\n\n**查看文档**\n\nipython 中可以使用 `requests.get?` 来查看文档\n\n而 bpython 会自动出现该方法的文档\n\n![wpy1](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/blog/bpy1.png)\n\n\n**重载 module**\n\nbpython 目前没有启动自动重载的能力，只能通过按键手动重载，不过我们可以修改它的按键，毕竟每次按 `<F6>` 还是很不方便的。\n\n- 进入 `bpython` 命令，按 `<F3>` 生成并编辑 `config` 文件\n    - 默认配置文件的位置为 `~/.config/bpython/config`，如果你想修改它的位置，那么启动的时候需要增加参数 `bpython --config <config-path>`\n- `<C-r>` 是我认为比较舒服的按键，但是它已经被撤销按键占住了，我认为撤销不是常用按键，所以进行了修改，最终配置如下\n\n```bash\nreimport = C-r  # 重载按键\nundo = C-q      # 撤销按键\n```\n\n- 然后退出 `bpython`，重新进入即可生效\n\n**上传 pastebin**\n\n这是个比较有意思的功能，假如你想与别人及时分享一段代码，这是很优雅的方式，按下 `<F8>` 即可将当前命令行中的代码上传并得到一个地址，点击效果如下。\n\n![bpy2](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/blog/bpy2_514.png)\n\n当然 bpython 也不是没有缺点，比如在使用一些第三方模块时，自动补全有时会卡顿，这还是挺影响心情的，不过瑕不掩瑜，它仍然是让我爱不释手的 shell 工具。\n\n- [源代码](https://github.com/bpython/bpython)\n- [Configuration](https://docs.bpython-interpreter.org/configuration.html)\n","source":"_posts/2019-04-02-bpython.md","raw":"---\ntitle: bpython 强大的自动补全 Python Shell 工具\ntags:\n  - python\ndate: 2019-04-02 09:48:16\n---\n\n\n提到 Python Shell 工具，要说 ipython 排老二，那没有哪位能排第一，它的功能强大是毋庸置疑的，然后强大归强大，这并不代表能适合所有人。\n\n<!-- more -->\n\n比如说我，我编写程序，最讲究的效率，自动补全和快速输入是必要的。但是 ipython 却远远满足不了我，如果你也用 `Vim + YouCompleteMe` 应该可以理解我。也许你会说，这本来就是 shell 命令工具，还能像 IDE 咋滴，嘿，巧了，今天要说的 [bpython](https://bpython-interpreter.org/) 就是个 shell 工具，但是它也能像 IDE 一样编写代码。\n\n![bpython](https://camo.githubusercontent.com/fffc539a28d2465c11b74ff3c06d0b5595037454/687474703a2f2f692e696d6775722e636f6d2f6a66386d4374502e676966)\n\n相信你看完这个官方的 demo，已经开始想去了解它了，跟着我一起来吧。\n\n**安装**\n\n```bash\n$ pip install bpython\n```\n\n**运行**\n\n```bash\n> $ bpython\nbpython version 0.17.1 on top of Python 3.7.2 /Users/wxnacy/.pyenv/versions/3.7.2/Python.framework/Versions/3.7/bin/python3.7\n>>>\nWelcome to bpython! Press <F1> for help.\n```\n\n使用 `<F1>` 可以查看帮助文档\n\n我挑一些常用的键位说一下\n\n```bash\n<Tab>           # 出现提示后，进行选择\n<C-a>           # 快速跳转行首\n<C-e>           # 快速跳转行尾，如果有上次输入记录，则自动输入\n<C-u>           # 清空当前行\n<C-w>           # 删除前一个单词\n<C-h>           # 删除删除前一个字符，免去了手指移动到 backspace 的时间，刚好我在 Vim 中也设置了这个按键\n\n<F1>            # 帮助文档\n<F3>            # 打开配置文件，第一次提示是否生成配置文件\n<F6>            # 重新加载 module，这在测试程序时非常有必要\n<F7>            # 将当前 shell 中的代码放在临时文件中，并使用 vim 进行编辑\n<F8>            # 将当前代码上传到 pastebin 上，并生成一个有效期为 7 天的链接\n```\n\n挑几个重点的说下\n\n**查看文档**\n\nipython 中可以使用 `requests.get?` 来查看文档\n\n而 bpython 会自动出现该方法的文档\n\n![wpy1](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/blog/bpy1.png)\n\n\n**重载 module**\n\nbpython 目前没有启动自动重载的能力，只能通过按键手动重载，不过我们可以修改它的按键，毕竟每次按 `<F6>` 还是很不方便的。\n\n- 进入 `bpython` 命令，按 `<F3>` 生成并编辑 `config` 文件\n    - 默认配置文件的位置为 `~/.config/bpython/config`，如果你想修改它的位置，那么启动的时候需要增加参数 `bpython --config <config-path>`\n- `<C-r>` 是我认为比较舒服的按键，但是它已经被撤销按键占住了，我认为撤销不是常用按键，所以进行了修改，最终配置如下\n\n```bash\nreimport = C-r  # 重载按键\nundo = C-q      # 撤销按键\n```\n\n- 然后退出 `bpython`，重新进入即可生效\n\n**上传 pastebin**\n\n这是个比较有意思的功能，假如你想与别人及时分享一段代码，这是很优雅的方式，按下 `<F8>` 即可将当前命令行中的代码上传并得到一个地址，点击效果如下。\n\n![bpy2](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/blog/bpy2_514.png)\n\n当然 bpython 也不是没有缺点，比如在使用一些第三方模块时，自动补全有时会卡顿，这还是挺影响心情的，不过瑕不掩瑜，它仍然是让我爱不释手的 shell 工具。\n\n- [源代码](https://github.com/bpython/bpython)\n- [Configuration](https://docs.bpython-interpreter.org/configuration.html)\n","slug":"bpython","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2alj00t35gqo5bt0jx2d"},{"title":"Mac 电脑查看字体文件位置","date":"2019-04-03T13:51:06.000Z","_content":"\n\n首先直接给出 Mac 电脑中字体文件的位置 `/System/Library/Fonts`\n\n<!-- more -->\n\n在 Terminal 中使用命令打开该目录\n\n```bash\n$ open /System/Library/Fonts\n```\n\n打开后是这样的\n\n![mac1](https://s1.ax1x.com/2020/05/17/Y2na3q.jpg)\n\n文件名全部都是英文的，如果你对字体不熟悉，那要寻找中文字体几乎是不可能的。\n\n这时候我们需要通过`字体册`来查看\n\n![mac2](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/blog/mac-font1_509.png)\n\n从字体册的左侧选择中文，并从右侧想要选择的字体上右键点击，并点击`在访达中查看`，还是很受不了这个翻译。\n\n![mac3](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/blog/mac-font2_884.png)\n\n随后直接可以在 `Finder` 中定位该字体。\n\n![mac4](https://s1.ax1x.com/2020/05/17/Y2na3q.jpg)\n<!-- ![mac4](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/blog/mac-font3_770.png) -->\n\n","source":"_posts/2019-04-03-mac-fonts-path.md","raw":"---\ntitle: Mac 电脑查看字体文件位置\ntags:\n  - mac\ndate: 2019-04-03 13:51:06\n---\n\n\n首先直接给出 Mac 电脑中字体文件的位置 `/System/Library/Fonts`\n\n<!-- more -->\n\n在 Terminal 中使用命令打开该目录\n\n```bash\n$ open /System/Library/Fonts\n```\n\n打开后是这样的\n\n![mac1](https://s1.ax1x.com/2020/05/17/Y2na3q.jpg)\n\n文件名全部都是英文的，如果你对字体不熟悉，那要寻找中文字体几乎是不可能的。\n\n这时候我们需要通过`字体册`来查看\n\n![mac2](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/blog/mac-font1_509.png)\n\n从字体册的左侧选择中文，并从右侧想要选择的字体上右键点击，并点击`在访达中查看`，还是很受不了这个翻译。\n\n![mac3](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/blog/mac-font2_884.png)\n\n随后直接可以在 `Finder` 中定位该字体。\n\n![mac4](https://s1.ax1x.com/2020/05/17/Y2na3q.jpg)\n<!-- ![mac4](https://wxnacy-img.oss-cn-beijing.aliyuncs.com/blog/mac-font3_770.png) -->\n\n","slug":"mac-fonts-path","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2all00t55gqo3h2wloi8"},{"title":"OSSFS 阿里云 OSS 本地挂载工具","date":"2019-03-29T09:47:02.000Z","_content":"\n\n> [ossfs](https://github.com/aliyun/ossfs) 能让您在Linux/Mac OS X 系统中把Aliyun OSS bucket 挂载到本地文件 系统中，您能够便捷的通过本地文件系统操作OSS 上的对象，实现数据的共享。\n\n<!-- more -->\n\n## 为什么需要用到这个软件呢？\n\n我的情况是这样的，公司微信 h5 的静态文件是放在 OSS 上的，因为代码框架选用的 React，正常情况下地址路由都是交给 `index.html` 处理的，但是返回的状态码是 404，而微信非常流氓的把 404 状态的地址都转到它自己的页面，使得页面无法正常显示，AWS 的 s3 可以设置 404 状态改为 200，不过 OSS 没有，所以我只能借助 ossfs 的同步功能，在本地加一个 nginx 反向代理，单独处理 404 的请求。\n\n挂载了 ossfs，OSS 和本地挂在之间可以实现双向同步，这是很方便的。\n\n## 安装\n\n首先从[版本发布页面](https://github.com/aliyun/ossfs/releases)下载合适的安装包\n\n**Ubuntu 16.04**\n\n```bash\n$ wget https://github.com/aliyun/ossfs/releases/download/v1.80.5/ossfs_1.80.5_ubuntu16.04_amd64.deb\n$ sudo apt-get update\n$ sudo apt-get install gdebi-core\n$ sudo gdebi ossfs_1.80.5_ubuntu16.04_amd64.deb\n```\n\n**CentOS 7**\n\n```bash\n$ wget https://github.com/aliyun/ossfs/releases/download/v1.80.5/ossfs_1.80.5_centos7.0_x86_64.rpm\n$ sudo yum localinstall ossfs_1.80.5_centos7.0_x86_64.rpm\n```\n\n## 使用\n\n**配置 bucket 信息**\n\n```bash\n$ echo my-bucket:my-access-key-id:my-access-key-secret > /etc/passwd-ossfs  # 配置 key 和 secret\n$ chmod 640 /etc/passwd-ossfs   # 修改文件权限\n$ ossfs my-bucket local_dir_path -ourl=my-oss-endpoint  # 将 bucket mount 到本地文件夹\n```\n\n如果机器使用了阿里云 ECS 实例，`-ourl` 可以使用内网 `endpoint` 来**避免流量收费**和**提高速度**\n\n挂载命令可以添加 `-f -d` 参数来让 ossfs 运行在前台并输出debug日志\n\n你也可以使用 [supervisor](http://supervisord.org/) 来管理 ossfs 进程，方法详见 [FAQ](https://github.com/aliyun/ossfs/wiki/FAQ#18)\n\n\n","source":"_posts/2019-03-29-ossfs.md","raw":"---\ntitle: OSSFS 阿里云 OSS 本地挂载工具\ntags:\n  - 工具\ndate: 2019-03-29 09:47:02\n---\n\n\n> [ossfs](https://github.com/aliyun/ossfs) 能让您在Linux/Mac OS X 系统中把Aliyun OSS bucket 挂载到本地文件 系统中，您能够便捷的通过本地文件系统操作OSS 上的对象，实现数据的共享。\n\n<!-- more -->\n\n## 为什么需要用到这个软件呢？\n\n我的情况是这样的，公司微信 h5 的静态文件是放在 OSS 上的，因为代码框架选用的 React，正常情况下地址路由都是交给 `index.html` 处理的，但是返回的状态码是 404，而微信非常流氓的把 404 状态的地址都转到它自己的页面，使得页面无法正常显示，AWS 的 s3 可以设置 404 状态改为 200，不过 OSS 没有，所以我只能借助 ossfs 的同步功能，在本地加一个 nginx 反向代理，单独处理 404 的请求。\n\n挂载了 ossfs，OSS 和本地挂在之间可以实现双向同步，这是很方便的。\n\n## 安装\n\n首先从[版本发布页面](https://github.com/aliyun/ossfs/releases)下载合适的安装包\n\n**Ubuntu 16.04**\n\n```bash\n$ wget https://github.com/aliyun/ossfs/releases/download/v1.80.5/ossfs_1.80.5_ubuntu16.04_amd64.deb\n$ sudo apt-get update\n$ sudo apt-get install gdebi-core\n$ sudo gdebi ossfs_1.80.5_ubuntu16.04_amd64.deb\n```\n\n**CentOS 7**\n\n```bash\n$ wget https://github.com/aliyun/ossfs/releases/download/v1.80.5/ossfs_1.80.5_centos7.0_x86_64.rpm\n$ sudo yum localinstall ossfs_1.80.5_centos7.0_x86_64.rpm\n```\n\n## 使用\n\n**配置 bucket 信息**\n\n```bash\n$ echo my-bucket:my-access-key-id:my-access-key-secret > /etc/passwd-ossfs  # 配置 key 和 secret\n$ chmod 640 /etc/passwd-ossfs   # 修改文件权限\n$ ossfs my-bucket local_dir_path -ourl=my-oss-endpoint  # 将 bucket mount 到本地文件夹\n```\n\n如果机器使用了阿里云 ECS 实例，`-ourl` 可以使用内网 `endpoint` 来**避免流量收费**和**提高速度**\n\n挂载命令可以添加 `-f -d` 参数来让 ossfs 运行在前台并输出debug日志\n\n你也可以使用 [supervisor](http://supervisord.org/) 来管理 ossfs 进程，方法详见 [FAQ](https://github.com/aliyun/ossfs/wiki/FAQ#18)\n\n\n","slug":"ossfs","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aln00t75gqoa6mc0qct"},{"title":"SQLAlchemy 升级报错：Can't resolve label reference for ORDER BY / GROUP BY ...","date":"2019-03-30T17:53:36.000Z","_content":"\n\n前段时间因为要使用 `insert ... on duplicate key update ..` 语句的功能，SQLAlchemy 从 1.1.5 升级到了 1.3.1，结果程序报了错\n\n<!-- more -->\n\n```bash\nCan't resolve label reference for ORDER BY / GROUP BY. Textual SQL expression 'rank desc' should be explicitly declared as text('rank desc')\n```\n\n其实一看到这个错误，我就知道是怎么回事了，因为之前的版本其实报过警告，只是当时没有在意\n\n```bash\nSAWarning: Can't resolve label reference 'rank desc'; converting to text() (this warning may be suppressed after 10 occurrences)\n```\n\n它的意思是在未来的版本 `order_by('rank desc')` 写法将不再支持。\n\n那换个写法就好了。\n\n我们先来回顾下，老版本 `ORDER BY` 的几种写法，原始 SQL 如下：\n\n```mysql\n> select * from user order by id desc;\n```\n\nSQLAlchemy 的写法有三种\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\n# 第一种最简单\ndb.session.query(User).order_by('id desc').all()\n\n# 第二种比较符合 SQLAlchemy 语法\ndb.session.query(User).order_by(User.id.desc()).all()\n\n# 第三种最麻烦\nfrom sqlalchemy import desc\ndb.session.query(User).order_by(desc(User.id)).all()\n```\n\n既然新版本第一种方式不让用了，那就用第二种好了，OK，正常情况下没有，但是我修改后报了如下错。\n\n```bash\nAttributeError: type object 'VisitorLog' has no attribute 'rank'\n```\n\n找不到属性？我回看了下代码发现了问题。\n\n原始 SQL 如下：\n\n```mysql\n> select url, count(url) as rank from visit_log group by url order by rank desc;\n```\n\n老版本 SQLAlchemy 写法\n\n```python\nfrom sqlalchemy import func\ncls = VisitLog\nres = db.session.query(\n    cls.url, func.count(cls.url).label('rank')\n).group_by(cls.url).order_by('rank desc').all()\n```\n\n新版本理论写法\n\n```python\nfrom sqlalchemy import func\ncls = VisitLog\nres = db.session.query(\n    cls.url, func.count(cls.url).label('rank')\n).group_by(cls.url).order_by(cls.rank.desc).all()\n```\n\n因为 `rank` 我是用了 `label` 方法模拟了 `as` 功能，所以报错找不到属性也是可以理解的，那这里我们需要将 `label` 单提出一个变量了，在进行 `desc()` 方法\n\n```python\nfrom sqlalchemy import func\ncls = VisitLog\nrank = func.count(cls.url).label('rank')\nres = db.session.query(\n    cls.url, rank\n).group_by(cls.url).order_by(rank.desc).all()\n```\n\n在执行，完美解决\n\n这套逻辑同样适用于 `GROUP BY` 语法\n\n- [官方文档](https://docs.sqlalchemy.org/en/latest/core/sqlelement.html#sqlalchemy.sql.expression.desc)\n- [python-sqlalchemy-label-usage](https://stackoverflow.com/questions/15555920/python-sqlalchemy-label-usage)\n","source":"_posts/2019-03-30-sqlalchemy-error-order-by.md","raw":"---\ntitle: SQLAlchemy 升级报错：Can't resolve label reference for ORDER BY / GROUP BY ...\ntags:\n  - python\n  - sqlalchemy\ndate: 2019-03-30 17:53:36\n---\n\n\n前段时间因为要使用 `insert ... on duplicate key update ..` 语句的功能，SQLAlchemy 从 1.1.5 升级到了 1.3.1，结果程序报了错\n\n<!-- more -->\n\n```bash\nCan't resolve label reference for ORDER BY / GROUP BY. Textual SQL expression 'rank desc' should be explicitly declared as text('rank desc')\n```\n\n其实一看到这个错误，我就知道是怎么回事了，因为之前的版本其实报过警告，只是当时没有在意\n\n```bash\nSAWarning: Can't resolve label reference 'rank desc'; converting to text() (this warning may be suppressed after 10 occurrences)\n```\n\n它的意思是在未来的版本 `order_by('rank desc')` 写法将不再支持。\n\n那换个写法就好了。\n\n我们先来回顾下，老版本 `ORDER BY` 的几种写法，原始 SQL 如下：\n\n```mysql\n> select * from user order by id desc;\n```\n\nSQLAlchemy 的写法有三种\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\n# 第一种最简单\ndb.session.query(User).order_by('id desc').all()\n\n# 第二种比较符合 SQLAlchemy 语法\ndb.session.query(User).order_by(User.id.desc()).all()\n\n# 第三种最麻烦\nfrom sqlalchemy import desc\ndb.session.query(User).order_by(desc(User.id)).all()\n```\n\n既然新版本第一种方式不让用了，那就用第二种好了，OK，正常情况下没有，但是我修改后报了如下错。\n\n```bash\nAttributeError: type object 'VisitorLog' has no attribute 'rank'\n```\n\n找不到属性？我回看了下代码发现了问题。\n\n原始 SQL 如下：\n\n```mysql\n> select url, count(url) as rank from visit_log group by url order by rank desc;\n```\n\n老版本 SQLAlchemy 写法\n\n```python\nfrom sqlalchemy import func\ncls = VisitLog\nres = db.session.query(\n    cls.url, func.count(cls.url).label('rank')\n).group_by(cls.url).order_by('rank desc').all()\n```\n\n新版本理论写法\n\n```python\nfrom sqlalchemy import func\ncls = VisitLog\nres = db.session.query(\n    cls.url, func.count(cls.url).label('rank')\n).group_by(cls.url).order_by(cls.rank.desc).all()\n```\n\n因为 `rank` 我是用了 `label` 方法模拟了 `as` 功能，所以报错找不到属性也是可以理解的，那这里我们需要将 `label` 单提出一个变量了，在进行 `desc()` 方法\n\n```python\nfrom sqlalchemy import func\ncls = VisitLog\nrank = func.count(cls.url).label('rank')\nres = db.session.query(\n    cls.url, rank\n).group_by(cls.url).order_by(rank.desc).all()\n```\n\n在执行，完美解决\n\n这套逻辑同样适用于 `GROUP BY` 语法\n\n- [官方文档](https://docs.sqlalchemy.org/en/latest/core/sqlelement.html#sqlalchemy.sql.expression.desc)\n- [python-sqlalchemy-label-usage](https://stackoverflow.com/questions/15555920/python-sqlalchemy-label-usage)\n","slug":"sqlalchemy-error-order-by","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2alo00t95gqojbuuwbjt"},{"title":"Zsh 加载速度优化","date":"2019-04-04T13:59:45.000Z","_content":"\n\n用 Zsh 也有几年的时间，期间各种添加配置，导致了每次启动都巨慢无比。我也换了 [fish](https://fishshell.com/) 用过几天，虽然速度很快，补全功能超爽，但是它最大的问题是不兼容 bash，那还玩个毛，我的开发环境极度依赖 bash 脚本，没办法了，Zsh 还是要接着用的，但是优化速度成了一个大问题。\n\n<!-- more --><!-- toc -->\n\n通过 `time` 分析 `zsh` 加载速度\n\n```bash\n$ time zsh -i -c exit\n5.52 real         3.56 user         2.09 sys\n```\n\n这里的 `real` 代表的是执行 `zsh` 时真实的加载速度，好家伙，这个时间真是够受的。\n\n我们再来看下无配置加载速度\n\n```bash\n$ time zsh --no-rcs -i -c exit\n0.00 real         0.00 user         0.00 sys\n```\n\n我们当然不可能优化到这个速度，但这是我们的目标。\n\n网上优化的方法，通常是使用懒加载，这是很优雅的解决方式，也很有效，但还是那句话，***好的东西也并不一定适用于所有人***。\n\n关于懒加载，大家可以看看这篇文章 [zshrc 启动速度分析和优化](https://best33.com/283.moe)，里面梳理了怎样分析 `zshrc` 中每条语句的加载速度，从而我们可以针对性的优化。\n\n如果懒加载可以解决你的问题，那现在已经可以关闭网页，然后优化你的配置了。\n\n下面我先来说说懒加载的缺点，比如 `nvm` 的配置就很浪费时间\n\n```bash\nexport NVM_DIR=\"$HOME/.nvm\"\n[ -s \"$NVM_DIR/nvm.sh\"  ] && \\. \"$NVM_DIR/nvm.sh\"  # This loads nvm\n[ -s \"$NVM_DIR/bash_completion\"  ] && \\. \"$NVM_DIR/bash_completion\"  # This loads nvm bash_completion\n```\n\n我们进行懒加载配置\n\n```bash\nnvm() {\n    export NVM_DIR=\"$HOME/.nvm\"\n    [ -s \"$NVM_DIR/nvm.sh\"  ] && \\. \"$NVM_DIR/nvm.sh\"  # This loads nvm\n    [ -s \"$NVM_DIR/bash_completion\"  ] && \\. \"$NVM_DIR/bash_completion\"  # This loads nvm bash_completion\n    nvm \"$@\"\n}\n```\n\n这样再次执行测速会发现优化了很多，是不是很兴奋呢？先别着急。\n\n懒加载配置后，启动 `zsh` 时虽然提升了速度，但是想要使用 `node` 命令，需要先执行 `nvm` 实时加载上述的配置，这似乎没什么，不使用不加载，这不挺好吗？\n\n先来说说我的环境，我的开发环境极度依赖脚本，如果使用了懒加载，那每个启动脚本前都要先套上一个无用的 `nvm` 命令，这多少有点不伦不类，并且这对于我来说好像并没有起到加速的效果。\n\n并且有些功能懒加载并不正常，比如：\n\n```bash\nif [ -d \"${HOME}/.pyenv\" ]; then\n    # https://github.com/pyenv/pyenv#basic-github-checkout\n    export PYENV_ROOT=\"$HOME/.pyenv\"\n    export PATH=\"${PYENV_ROOT}/bin:${PATH}\"\n    # config for vim plugin YouComplateMe\n    export PYENV_VIRTUALENV_DISABLE_PROMPT=1\n    eval \"$(pyenv init -)\"\n    eval \"$(pyenv virtualenv-init -)\";\nfi\n```\n\n`pyenv` 用懒加载并不能正常使用，可能是我用的不对，但我也不想在纠结这个件事，我在想是不是可以换一条路。\n\n我在 [Zsh 配置文件加载顺序](/2018/10/08/zsh-startup-files/)一文中介绍了 Zsh 配置文件的生命周期。\n\n当打开新的 Terminal 时，配置加载顺序为 `~/.zshenv` `~/.zprofile` `~/.zshrc` `~/.zlogin`\n\n执行 `zsh` 时，配置加载顺序为 `~/.zshenv` `~/.zshrc`\n\n除了 `~/.zshrc` 我们发现了一个有意思的配置 `~/.zprofile`，它只在启动 Terminal 时才会加载，那我把不常变动并且耗时长的配置写在这里面不就行了。\n\n这样不管是执行 `zsh`，还是 `source ~/.zshrc` 速度都得到了改善，这个看似自欺欺人的变动，却恰好能满足我的要求。\n\n我使用 tmux 来管理窗口，每次开机后恢复一次 tmux 缓存窗口即可，知道下次重启电脑，我可能都不会在新建 Terminal 了，这样对于我来说就已经大大的优化的 `zsh` 速度。\n\n最后我过滤了现在的配置文件，去掉了些无用的配置后，速度如下\n\n```bash\n> time zsh -i -c exit\n0.23 real         0.13 user         0.08 sys\n```\n\nOK！终于可以愉快的使用 Zsh 了。\n\n- [Zsh 配置文件加载顺序](https://wxnacy.com/2018/10/08/zsh-startup-files/)\n- [Profiling zsh shell scripts](http://blog.xebia.com/profiling-zsh-shell-scripts/)\n- [Speed up initial zsh startup with lazy-loading](https://frederic-hemberger.de/articles/speed-up-initial-zsh-startup-with-lazy-loading/)\n","source":"_posts/2019-04-04-zsh-speed-optimization.md","raw":"---\ntitle: Zsh 加载速度优化\ntags:\n  - zsh\ndate: 2019-04-04 13:59:45\n---\n\n\n用 Zsh 也有几年的时间，期间各种添加配置，导致了每次启动都巨慢无比。我也换了 [fish](https://fishshell.com/) 用过几天，虽然速度很快，补全功能超爽，但是它最大的问题是不兼容 bash，那还玩个毛，我的开发环境极度依赖 bash 脚本，没办法了，Zsh 还是要接着用的，但是优化速度成了一个大问题。\n\n<!-- more --><!-- toc -->\n\n通过 `time` 分析 `zsh` 加载速度\n\n```bash\n$ time zsh -i -c exit\n5.52 real         3.56 user         2.09 sys\n```\n\n这里的 `real` 代表的是执行 `zsh` 时真实的加载速度，好家伙，这个时间真是够受的。\n\n我们再来看下无配置加载速度\n\n```bash\n$ time zsh --no-rcs -i -c exit\n0.00 real         0.00 user         0.00 sys\n```\n\n我们当然不可能优化到这个速度，但这是我们的目标。\n\n网上优化的方法，通常是使用懒加载，这是很优雅的解决方式，也很有效，但还是那句话，***好的东西也并不一定适用于所有人***。\n\n关于懒加载，大家可以看看这篇文章 [zshrc 启动速度分析和优化](https://best33.com/283.moe)，里面梳理了怎样分析 `zshrc` 中每条语句的加载速度，从而我们可以针对性的优化。\n\n如果懒加载可以解决你的问题，那现在已经可以关闭网页，然后优化你的配置了。\n\n下面我先来说说懒加载的缺点，比如 `nvm` 的配置就很浪费时间\n\n```bash\nexport NVM_DIR=\"$HOME/.nvm\"\n[ -s \"$NVM_DIR/nvm.sh\"  ] && \\. \"$NVM_DIR/nvm.sh\"  # This loads nvm\n[ -s \"$NVM_DIR/bash_completion\"  ] && \\. \"$NVM_DIR/bash_completion\"  # This loads nvm bash_completion\n```\n\n我们进行懒加载配置\n\n```bash\nnvm() {\n    export NVM_DIR=\"$HOME/.nvm\"\n    [ -s \"$NVM_DIR/nvm.sh\"  ] && \\. \"$NVM_DIR/nvm.sh\"  # This loads nvm\n    [ -s \"$NVM_DIR/bash_completion\"  ] && \\. \"$NVM_DIR/bash_completion\"  # This loads nvm bash_completion\n    nvm \"$@\"\n}\n```\n\n这样再次执行测速会发现优化了很多，是不是很兴奋呢？先别着急。\n\n懒加载配置后，启动 `zsh` 时虽然提升了速度，但是想要使用 `node` 命令，需要先执行 `nvm` 实时加载上述的配置，这似乎没什么，不使用不加载，这不挺好吗？\n\n先来说说我的环境，我的开发环境极度依赖脚本，如果使用了懒加载，那每个启动脚本前都要先套上一个无用的 `nvm` 命令，这多少有点不伦不类，并且这对于我来说好像并没有起到加速的效果。\n\n并且有些功能懒加载并不正常，比如：\n\n```bash\nif [ -d \"${HOME}/.pyenv\" ]; then\n    # https://github.com/pyenv/pyenv#basic-github-checkout\n    export PYENV_ROOT=\"$HOME/.pyenv\"\n    export PATH=\"${PYENV_ROOT}/bin:${PATH}\"\n    # config for vim plugin YouComplateMe\n    export PYENV_VIRTUALENV_DISABLE_PROMPT=1\n    eval \"$(pyenv init -)\"\n    eval \"$(pyenv virtualenv-init -)\";\nfi\n```\n\n`pyenv` 用懒加载并不能正常使用，可能是我用的不对，但我也不想在纠结这个件事，我在想是不是可以换一条路。\n\n我在 [Zsh 配置文件加载顺序](/2018/10/08/zsh-startup-files/)一文中介绍了 Zsh 配置文件的生命周期。\n\n当打开新的 Terminal 时，配置加载顺序为 `~/.zshenv` `~/.zprofile` `~/.zshrc` `~/.zlogin`\n\n执行 `zsh` 时，配置加载顺序为 `~/.zshenv` `~/.zshrc`\n\n除了 `~/.zshrc` 我们发现了一个有意思的配置 `~/.zprofile`，它只在启动 Terminal 时才会加载，那我把不常变动并且耗时长的配置写在这里面不就行了。\n\n这样不管是执行 `zsh`，还是 `source ~/.zshrc` 速度都得到了改善，这个看似自欺欺人的变动，却恰好能满足我的要求。\n\n我使用 tmux 来管理窗口，每次开机后恢复一次 tmux 缓存窗口即可，知道下次重启电脑，我可能都不会在新建 Terminal 了，这样对于我来说就已经大大的优化的 `zsh` 速度。\n\n最后我过滤了现在的配置文件，去掉了些无用的配置后，速度如下\n\n```bash\n> time zsh -i -c exit\n0.23 real         0.13 user         0.08 sys\n```\n\nOK！终于可以愉快的使用 Zsh 了。\n\n- [Zsh 配置文件加载顺序](https://wxnacy.com/2018/10/08/zsh-startup-files/)\n- [Profiling zsh shell scripts](http://blog.xebia.com/profiling-zsh-shell-scripts/)\n- [Speed up initial zsh startup with lazy-loading](https://frederic-hemberger.de/articles/speed-up-initial-zsh-startup-with-lazy-loading/)\n","slug":"zsh-speed-optimization","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2alp00tb5gqo80dydwhe"},{"title":"Pyenv 安装 Python3.7 报错：zlib not available","date":"2019-03-31T13:30:55.000Z","_content":"\n\n最近升级 Mac 系统，又手贱升级了 pyenv，结果安装 Python3.7 时报了错\n\n<!-- more -->\n\n```bash\npyenv install 3.7 zipimport.ZipImportError: can't decompress data; zlib not available\n```\n\n查询了下，发现是因为 Xcode 命令行工具没有安装需要的头，需要手动进行安装，运行如下命令可以解决这个问题\n\n```bash\n$ xcode-select --install\n$ sudo installer -pkg /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg -target /\n```\n\n我的环境是\n\n- macOS Mojave 10.14.3\n- pyenv 1.2.9\n- 安装 3.7.2 版本\n\n- [Install failed, \"zlib not available\" on macOS Mojave](https://github.com/pyenv/pyenv/issues/1219)\n","source":"_posts/2019-03-31-pyenv-zlib-not-available.md","raw":"---\ntitle: Pyenv 安装 Python3.7 报错：zlib not available\ntags:\n  - python\ndate: 2019-03-31 13:30:55\n---\n\n\n最近升级 Mac 系统，又手贱升级了 pyenv，结果安装 Python3.7 时报了错\n\n<!-- more -->\n\n```bash\npyenv install 3.7 zipimport.ZipImportError: can't decompress data; zlib not available\n```\n\n查询了下，发现是因为 Xcode 命令行工具没有安装需要的头，需要手动进行安装，运行如下命令可以解决这个问题\n\n```bash\n$ xcode-select --install\n$ sudo installer -pkg /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg -target /\n```\n\n我的环境是\n\n- macOS Mojave 10.14.3\n- pyenv 1.2.9\n- 安装 3.7.2 版本\n\n- [Install failed, \"zlib not available\" on macOS Mojave](https://github.com/pyenv/pyenv/issues/1219)\n","slug":"pyenv-zlib-not-available","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2alr00td5gqosq7fug5n"},{"title":"Python 中循环语句速度对比","date":"2019-04-01T13:31:39.000Z","_content":"\n\n今天来比较下 Python 中循环语句的性能，参赛选手为 `while` `for` `生成器` `内置函数` `列表解析`\n\n<!-- more --><!-- toc -->\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description: for while generator list_comprehension map 对比速度\n\ndef loop_for(n):\n    res = []\n    for i in range(n):\n        res.append(abs(i))\n    return res\n\ndef loop_while(n):\n    i = 0\n    res = []\n    while i < n:\n        res.append(abs(i))\n        i += 1\n    return res\n\ndef loop_generator(n):\n    '''使用生成器'''\n    res = (abs(i) for i in range(n))\n    res =  list(res)\n    return res\n\ndef loop_list_compre(n):\n    '''使用列表解析'''\n    res = [abs(i) for i in range(n)]\n    return res\n\ndef loop_map(n):\n    '''使用内置函数 map'''\n    return list(map(abs, range(n)))\n\nimport unittest\n\nclass TestMain(unittest.TestCase):\n\n    def setUp(self):\n        '''before each test function'''\n        pass\n\n    def tearDown(self):\n        '''after each test function'''\n        pass\n\n    def test_func(self):\n        n = 10\n        # 我们要求他们生成的结果是一样的\n        flag = (loop_for(n) == loop_while(n) == loop_generator(n) ==\n                loop_list_compre(n) == loop_map(n))\n        self.assertTrue(flag)\n\nimport timeit\n\ndef print_func_run_time(count, func, **kw):\n    b = timeit.default_timer()\n    for i in range(count):\n        func(**kw)\n    print('{} run {} times used {}s'.format(\n        func.__name__.ljust(20),\n        count,\n        timeit.default_timer() -b ))\n\nif __name__ == \"__main__\":\n    count = 1000\n    n = 1000\n    print_func_run_time(count, loop_for, n = n)\n    print_func_run_time(count, loop_while, n = n)\n    print_func_run_time(count, loop_generator, n = n)\n    print_func_run_time(count, loop_list_compre, n = n)\n    print_func_run_time(count, loop_map, n = n)\n    unittest.main()\n\n# .\n# ----------------------------------------------------------------------\n# Ran 1 test in 0.000s\n#\n# OK\n# loop_for             run 1000 times used 0.14018906400087872s\n# loop_while           run 1000 times used 0.21399457900042762s\n# loop_generator       run 1000 times used 0.12857274799898732s\n# loop_list_compre     run 1000 times used 0.08585307099929196s\n# loop_map             run 1000 times used 0.043123570998432115s\n```\n\n我们以性能好坏来区分，得到的结论\n\n```bash\nmap > 列表解析 > 生成器 > for > while\n```\n\n`map` 是内置函数，底层由 C 来编写，最快是毫无疑问的。而 `while` 是纯 Python 实现的，所以性能最差。\n\n列表解析比生成器要快一些，这里多少有些存疑，因为我们想要返回列表，所以其实 `map` 和生成器都是在负重前行，我们修改下测试方式。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef loop_generator(n):\n    res = (abs(i) for i in range(n))\n    return res\n\ndef loop_list_compre(n):\n    res = [abs(i) for i in range(n)]\n    return res\n\ndef loop_map(n):\n    return map(abs, range(n))\n\nimport timeit\n\ndef print_func_run_time(count, func, **kw):\n    b = timeit.default_timer()\n    for i in range(count):\n        func(**kw)\n    print('{} run {} times used {}s'.format(\n        func.__name__.ljust(20),\n        count,\n        timeit.default_timer() -b ))\n\nif __name__ == \"__main__\":\n    count = 1000\n    n = 1000\n    print_func_run_time(count, loop_list_compre, n = n)\n    print_func_run_time(count, loop_map, n = n)\n    print_func_run_time(count, loop_generator, n = n)\n\n# loop_list_compre     run 1000 times used 0.08865494900237536s\n# loop_map             run 1000 times used 0.0007684140000492334s\n# loop_generator       run 1000 times used 0.0009459810025873594s\n```\n\n好了，这次我们不再强制转换 list，而仅仅只是返回一个可迭代的对象，发现 `map` 依然最快，生成器稍慢，而列表解析竟然慢了近百倍。\n\n这次我们可以下个结论，处理循环时，我们已经尽可能的使用内置方法，然后根据业务需求来选择使用列表解析和生成器，实在不行了使用 `for` 循环，而 `while` 则是尽量不去使用的。\n","source":"_posts/2019-04-01-python-loop-speed-comparison.md","raw":"---\ntitle: Python 中循环语句速度对比\ntags:\n  - python\ndate: 2019-04-01 13:31:39\n---\n\n\n今天来比较下 Python 中循环语句的性能，参赛选手为 `while` `for` `生成器` `内置函数` `列表解析`\n\n<!-- more --><!-- toc -->\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description: for while generator list_comprehension map 对比速度\n\ndef loop_for(n):\n    res = []\n    for i in range(n):\n        res.append(abs(i))\n    return res\n\ndef loop_while(n):\n    i = 0\n    res = []\n    while i < n:\n        res.append(abs(i))\n        i += 1\n    return res\n\ndef loop_generator(n):\n    '''使用生成器'''\n    res = (abs(i) for i in range(n))\n    res =  list(res)\n    return res\n\ndef loop_list_compre(n):\n    '''使用列表解析'''\n    res = [abs(i) for i in range(n)]\n    return res\n\ndef loop_map(n):\n    '''使用内置函数 map'''\n    return list(map(abs, range(n)))\n\nimport unittest\n\nclass TestMain(unittest.TestCase):\n\n    def setUp(self):\n        '''before each test function'''\n        pass\n\n    def tearDown(self):\n        '''after each test function'''\n        pass\n\n    def test_func(self):\n        n = 10\n        # 我们要求他们生成的结果是一样的\n        flag = (loop_for(n) == loop_while(n) == loop_generator(n) ==\n                loop_list_compre(n) == loop_map(n))\n        self.assertTrue(flag)\n\nimport timeit\n\ndef print_func_run_time(count, func, **kw):\n    b = timeit.default_timer()\n    for i in range(count):\n        func(**kw)\n    print('{} run {} times used {}s'.format(\n        func.__name__.ljust(20),\n        count,\n        timeit.default_timer() -b ))\n\nif __name__ == \"__main__\":\n    count = 1000\n    n = 1000\n    print_func_run_time(count, loop_for, n = n)\n    print_func_run_time(count, loop_while, n = n)\n    print_func_run_time(count, loop_generator, n = n)\n    print_func_run_time(count, loop_list_compre, n = n)\n    print_func_run_time(count, loop_map, n = n)\n    unittest.main()\n\n# .\n# ----------------------------------------------------------------------\n# Ran 1 test in 0.000s\n#\n# OK\n# loop_for             run 1000 times used 0.14018906400087872s\n# loop_while           run 1000 times used 0.21399457900042762s\n# loop_generator       run 1000 times used 0.12857274799898732s\n# loop_list_compre     run 1000 times used 0.08585307099929196s\n# loop_map             run 1000 times used 0.043123570998432115s\n```\n\n我们以性能好坏来区分，得到的结论\n\n```bash\nmap > 列表解析 > 生成器 > for > while\n```\n\n`map` 是内置函数，底层由 C 来编写，最快是毫无疑问的。而 `while` 是纯 Python 实现的，所以性能最差。\n\n列表解析比生成器要快一些，这里多少有些存疑，因为我们想要返回列表，所以其实 `map` 和生成器都是在负重前行，我们修改下测试方式。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef loop_generator(n):\n    res = (abs(i) for i in range(n))\n    return res\n\ndef loop_list_compre(n):\n    res = [abs(i) for i in range(n)]\n    return res\n\ndef loop_map(n):\n    return map(abs, range(n))\n\nimport timeit\n\ndef print_func_run_time(count, func, **kw):\n    b = timeit.default_timer()\n    for i in range(count):\n        func(**kw)\n    print('{} run {} times used {}s'.format(\n        func.__name__.ljust(20),\n        count,\n        timeit.default_timer() -b ))\n\nif __name__ == \"__main__\":\n    count = 1000\n    n = 1000\n    print_func_run_time(count, loop_list_compre, n = n)\n    print_func_run_time(count, loop_map, n = n)\n    print_func_run_time(count, loop_generator, n = n)\n\n# loop_list_compre     run 1000 times used 0.08865494900237536s\n# loop_map             run 1000 times used 0.0007684140000492334s\n# loop_generator       run 1000 times used 0.0009459810025873594s\n```\n\n好了，这次我们不再强制转换 list，而仅仅只是返回一个可迭代的对象，发现 `map` 依然最快，生成器稍慢，而列表解析竟然慢了近百倍。\n\n这次我们可以下个结论，处理循环时，我们已经尽可能的使用内置方法，然后根据业务需求来选择使用列表解析和生成器，实在不行了使用 `for` 循环，而 `while` 则是尽量不去使用的。\n","slug":"python-loop-speed-comparison","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2als00tf5gqo1criib87"},{"title":"Expect 设置变量和读取环境变量","date":"2019-04-05T20:34:00.000Z","_content":"\n\nExpect 中设置变量跟 Bash 稍有不同\n\n<!-- more -->\n\n**Bash**\n\n```bash\nname=wxnacy\necho $name  # wxnacy\n```\n\n**Expect**\n\n```bash\nset name wxnacy\nputs $name  # wxnacy\n```\n\n边境变量也是如此\n\n**Bash**\n\n```bash\necho $HOME      # /Users/wxnacy\n```\n\n**Expect**\n\n```bash\nputs $env(HOME) # /Users/wxnacy\n```\n","source":"_posts/2019-04-05-expect-variables.md","raw":"---\ntitle: Expect 设置变量和读取环境变量\ntags:\n  - expect\ndate: 2019-04-05 20:34:00\n---\n\n\nExpect 中设置变量跟 Bash 稍有不同\n\n<!-- more -->\n\n**Bash**\n\n```bash\nname=wxnacy\necho $name  # wxnacy\n```\n\n**Expect**\n\n```bash\nset name wxnacy\nputs $name  # wxnacy\n```\n\n边境变量也是如此\n\n**Bash**\n\n```bash\necho $HOME      # /Users/wxnacy\n```\n\n**Expect**\n\n```bash\nputs $env(HOME) # /Users/wxnacy\n```\n","slug":"expect-variables","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2alt00th5gqoey3cnng9"},{"title":"Python 操作剪切板","date":"2019-04-06T17:59:15.000Z","_content":"\n\nPython 操作剪切板，需要调用系统的 C 动态库，或者使用自带的命令行。\n\n<!-- more --><!-- toc -->\n\nWindows 系统可以动态调用 `ctypes` 库，具体操作步骤可以看看这篇文章：https://www.jianshu.com/p/430f4af2cb06\n\n下面我们主要来说下 Mac 系统的操作方式。\n\n## 使用 pbcopy 和 pbpaste\n\n在 Mac 系统中可以使用 `pbcopy` 和 `pbpaste` 来实现复制粘贴操作，这两个命令都是系统自带的。\n\n`pbcopy` 接收管道输入的文字，并复制到剪切板。`pbpaste` 直接输出剪切板的内容\n\n```bash\n$ echo '我爱你中国' | pbcopy\n$ pbpaste\n我爱你中国\n```\n\n使用起来还是很方便的，接下来是 Python 中如何调用。\n\n使用 `subprocess` 模块下的 `Popen` 方法，可以很方便的操作管道的输入输出信息。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description: 在 Mac 系统中使用剪切板\n\nimport subprocess\n\ndef set_clipboard(data: str):\n    p = subprocess.Popen(['pbcopy'], stdin=subprocess.PIPE)\n    p.stdin.write(data.encode(\"utf-8\"))\n    p.stdin.close()\n    p.communicate()\n\ndef get_from_clipboard():\n    p = subprocess.Popen(['pbpaste'], stdout=subprocess.PIPE)\n    p.wait()\n    byte_data = p.stdout.read()\n    p.stdout.close()\n    return byte_data.decode('utf-8')\n\nif __name__ == \"__main__\":\n    set_clipboard('我爱你中国')\n    print(get_from_clipboard())\n\n# python clipboard.py\n# 我爱你中国\n```\n\n## 使用 pyperclip 模块\n\n如果你的系统需要适应各个平台，并且需要比较高的稳定性，那还是直接使用第三方模块 [pyperclip](https://github.com/asweigart/pyperclip) 比较方便。\n\n它的源码地址为：https://github.com/asweigart/pyperclip/blob/master/src/pyperclip/__init__.py\n\n其实他就是整合了上述的方法，只是应该了这么多人的使用，已经非常稳定，使用方法也更简单。\n\n```python\n>>> import pyperclip\n>>> pyperclip.copy('The text to be copied to the clipboard.')\n>>> pyperclip.paste()\n'The text to be copied to the clipboard.'\n```\n\n`Windows` 和 `Mac` 平台可以直接使用。\n\n`Linux` 需要 `xclip` `xsel` `gtk` `PyQt4` 依赖包，可以根据平台通过 `apt` 或 `yum` 进行安装。\n","source":"_posts/2019-04-06-python-clipboard.md","raw":"---\ntitle: Python 操作剪切板\ntags:\n  - python\ndate: 2019-04-06 17:59:15\n---\n\n\nPython 操作剪切板，需要调用系统的 C 动态库，或者使用自带的命令行。\n\n<!-- more --><!-- toc -->\n\nWindows 系统可以动态调用 `ctypes` 库，具体操作步骤可以看看这篇文章：https://www.jianshu.com/p/430f4af2cb06\n\n下面我们主要来说下 Mac 系统的操作方式。\n\n## 使用 pbcopy 和 pbpaste\n\n在 Mac 系统中可以使用 `pbcopy` 和 `pbpaste` 来实现复制粘贴操作，这两个命令都是系统自带的。\n\n`pbcopy` 接收管道输入的文字，并复制到剪切板。`pbpaste` 直接输出剪切板的内容\n\n```bash\n$ echo '我爱你中国' | pbcopy\n$ pbpaste\n我爱你中国\n```\n\n使用起来还是很方便的，接下来是 Python 中如何调用。\n\n使用 `subprocess` 模块下的 `Popen` 方法，可以很方便的操作管道的输入输出信息。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description: 在 Mac 系统中使用剪切板\n\nimport subprocess\n\ndef set_clipboard(data: str):\n    p = subprocess.Popen(['pbcopy'], stdin=subprocess.PIPE)\n    p.stdin.write(data.encode(\"utf-8\"))\n    p.stdin.close()\n    p.communicate()\n\ndef get_from_clipboard():\n    p = subprocess.Popen(['pbpaste'], stdout=subprocess.PIPE)\n    p.wait()\n    byte_data = p.stdout.read()\n    p.stdout.close()\n    return byte_data.decode('utf-8')\n\nif __name__ == \"__main__\":\n    set_clipboard('我爱你中国')\n    print(get_from_clipboard())\n\n# python clipboard.py\n# 我爱你中国\n```\n\n## 使用 pyperclip 模块\n\n如果你的系统需要适应各个平台，并且需要比较高的稳定性，那还是直接使用第三方模块 [pyperclip](https://github.com/asweigart/pyperclip) 比较方便。\n\n它的源码地址为：https://github.com/asweigart/pyperclip/blob/master/src/pyperclip/__init__.py\n\n其实他就是整合了上述的方法，只是应该了这么多人的使用，已经非常稳定，使用方法也更简单。\n\n```python\n>>> import pyperclip\n>>> pyperclip.copy('The text to be copied to the clipboard.')\n>>> pyperclip.paste()\n'The text to be copied to the clipboard.'\n```\n\n`Windows` 和 `Mac` 平台可以直接使用。\n\n`Linux` 需要 `xclip` `xsel` `gtk` `PyQt4` 依赖包，可以根据平台通过 `apt` 或 `yum` 进行安装。\n","slug":"python-clipboard","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2alu00tj5gqov0h3ydak"},{"title":"Python 复制文件的两种方式","date":"2019-04-07T18:48:45.000Z","_content":"\n\nPython 中实现文件复制，大概分为两种方式**复制函数**和**调用 shell**\n\n<!-- more --><!-- toc -->\n\n## 函数复制\n\n`shutil` 模块中有几个可以实现复制的方法\n\n其实 `copy()` 方法是最常用到的，它相当于 `cp -P` 命令，可以复制文件的内容和权限。\n\n```python\nimport shutil\n# shutil.copy(源文件, 目标文件) 目标文件可以是目录\nshutil.copy('test.sh', 'test_copy.sh')\nshutil.copy('test.sh', '/tmp')\n```\n\n```bash\n-rwxr-xr-x  1 wxnacy  wheel     90 Apr  6 19:05 test.sh\n-rwxr-xr-x  1 wxnacy  wheel     90 Apr  6 19:09 test_copy.sh\n```\n\n`copy()` 方法中调用了 `copyfile()` `copymode()` 两个方法。\n\n- `copyfile()` 负责复制文件内容，但是目标文件不能是目录，并且必须可以写入\n- `copymode()` 负责复制文件权限\n\n`copyfile()` 方法中又调用了低级方法 `copyfileobj()`\n\n`copyfileobj()` 方法可以假定了一个可选参数（缓冲区大小），你可以用来设置缓冲区长度。这是复制过程中保存在内存中的字节数。系统使用的默认大小是 16 KB。\n\n还有个 `copy2()` 方法，它类似 `copy()`，但是它可以在复制数据时获取元数据中添加的访问和修改时间。\n\n几个方法就功能而言 `copy2() > copy() > copyfile()`，相对应的功能和耗时是成正比的，所以我建议一般情况下可以使用 `copy()` 方法，如果大批量复制操作，并且没有特殊权限，比如图片，那么还是使用 `copyfile()` 更好一点。\n\n\n## 调用 shell\n\n还有一个万能的方式是直接调用 shell 命令。\n\n现在使用 `subprocess` 模块代替其他调用 shell 的模块。\n\n```python\nimport subprocess\nimport shlex\n\ncmds = shlex.split(\"cp test.sh test_popen.sh\")\np = subprocess.Popen(cmds)\np.communicate()\n```\n\n`Popen()` 方法的第一个参数为执行的命令，在 Unix 系统中，如果该参数为字符串，那它只能是一个可执行文件，如果想要传参，则必须以数组的形式传入，`shlex.split()` 方法可以将复杂的命令转换为数组的形式。\n\n在 Windows 系统中可以使用字符串传入命令行，并且需要使用 `copy source_file target_file` 命令。\n\n## 效率对比\n\n最后对比下他们的速度，执行 100 次时间如下。\n\n```bash\ncopy_file time    0.022215532000000003\ncopy time         0.059561121999999994\ncopy2 time        0.07728823600000001\npopen time        0.37018151000000005\n```\n\n大概是 `subprocess` 模块会生成子进程的原因，速度慢了很多，在这种情况下，复制操作优选依然是 `copy()` `copyfile()` 方法。\n\n- [How to Copy a File in Python – 9 Different Ways to do It!](https://www.techbeamers.com/python-copy-file/)\n","source":"_posts/2019-04-07-python-copy-command.md","raw":"---\ntitle: Python 复制文件的两种方式\ntags:\n  - python\ndate: 2019-04-07 18:48:45\n---\n\n\nPython 中实现文件复制，大概分为两种方式**复制函数**和**调用 shell**\n\n<!-- more --><!-- toc -->\n\n## 函数复制\n\n`shutil` 模块中有几个可以实现复制的方法\n\n其实 `copy()` 方法是最常用到的，它相当于 `cp -P` 命令，可以复制文件的内容和权限。\n\n```python\nimport shutil\n# shutil.copy(源文件, 目标文件) 目标文件可以是目录\nshutil.copy('test.sh', 'test_copy.sh')\nshutil.copy('test.sh', '/tmp')\n```\n\n```bash\n-rwxr-xr-x  1 wxnacy  wheel     90 Apr  6 19:05 test.sh\n-rwxr-xr-x  1 wxnacy  wheel     90 Apr  6 19:09 test_copy.sh\n```\n\n`copy()` 方法中调用了 `copyfile()` `copymode()` 两个方法。\n\n- `copyfile()` 负责复制文件内容，但是目标文件不能是目录，并且必须可以写入\n- `copymode()` 负责复制文件权限\n\n`copyfile()` 方法中又调用了低级方法 `copyfileobj()`\n\n`copyfileobj()` 方法可以假定了一个可选参数（缓冲区大小），你可以用来设置缓冲区长度。这是复制过程中保存在内存中的字节数。系统使用的默认大小是 16 KB。\n\n还有个 `copy2()` 方法，它类似 `copy()`，但是它可以在复制数据时获取元数据中添加的访问和修改时间。\n\n几个方法就功能而言 `copy2() > copy() > copyfile()`，相对应的功能和耗时是成正比的，所以我建议一般情况下可以使用 `copy()` 方法，如果大批量复制操作，并且没有特殊权限，比如图片，那么还是使用 `copyfile()` 更好一点。\n\n\n## 调用 shell\n\n还有一个万能的方式是直接调用 shell 命令。\n\n现在使用 `subprocess` 模块代替其他调用 shell 的模块。\n\n```python\nimport subprocess\nimport shlex\n\ncmds = shlex.split(\"cp test.sh test_popen.sh\")\np = subprocess.Popen(cmds)\np.communicate()\n```\n\n`Popen()` 方法的第一个参数为执行的命令，在 Unix 系统中，如果该参数为字符串，那它只能是一个可执行文件，如果想要传参，则必须以数组的形式传入，`shlex.split()` 方法可以将复杂的命令转换为数组的形式。\n\n在 Windows 系统中可以使用字符串传入命令行，并且需要使用 `copy source_file target_file` 命令。\n\n## 效率对比\n\n最后对比下他们的速度，执行 100 次时间如下。\n\n```bash\ncopy_file time    0.022215532000000003\ncopy time         0.059561121999999994\ncopy2 time        0.07728823600000001\npopen time        0.37018151000000005\n```\n\n大概是 `subprocess` 模块会生成子进程的原因，速度慢了很多，在这种情况下，复制操作优选依然是 `copy()` `copyfile()` 方法。\n\n- [How to Copy a File in Python – 9 Different Ways to do It!](https://www.techbeamers.com/python-copy-file/)\n","slug":"python-copy-command","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2alv00tl5gqovxokad23"},{"title":"Mac 系统中使用 ffmpeg 给视频添加文字水印","date":"2019-04-08T14:16:42.000Z","_content":"\n\n最近有给视频加文字水印的需求，第一个想到的肯定是使用 ffmpeg，搜索了下发现网上的博客多是从别人那复制过来的，直接使用多是报错，经过摸索后，终于搞清楚了简单用法，今天简单总结下。\n\n<!-- more --><!-- toc -->\n\n先来看个例子，我希望在如下的视频右侧加上文字水印，如下\n\n![mavel3](https://raw.githubusercontent.com/wxnacy/image/master/blog/mavel33.png)\n\n## 安装\n\n首先需要安装最新版本的 ffmpeg\n\n```bash\n$ brew install ffmpeg\n```\n\n## 英文水印\n\n运行下面的命令，即可达到上图效果\n\n```bash\n$ ffmpeg -y -i mavel4.mp4 -vf \"drawtext=text='Avengers\\: Endgame':x=700:y=200:fontsize=24:fontcolor=red\" mavel4_drawtext.mp4\n```\n\n参数含义\n- `-i`：需要渲染的视频，`mavel4.mp4` 为视频源\n- `-vf`：后面跟着需要的具体渲染效果，后面的参数需要使用双引号包裹起来\n- `mavel4_drawtext.mp4`：就是最后输出的文件名\n- `-y`：对一切提示回答 `yes`\n\n`-vf` 后面的参数比较复杂，我们先将命令行折行美化下\n\n```bash\n$ ffmpeg -y -i mavel4.mp4 \\\n    -vf \"drawtext=\\\n        text='Avengers\\: Endgame':\\\n        x=700:\\\n        y=200:\\\n        fontsize=24:\\\n        fontcolor=red:\\\n        \" \\\n    mavel4_drawtext.mp4\n```\n\n现在我们来逐条分析下\n\n- `drawtext=`：代表了此次渲染为添加文字水印，后面跟着具体的属性，属性之间使用 `:` 分割\n- `text='Avengers\\: Endgame':`：想要渲染的文字内容，如果想要输入 `:`，需要使用 `\\` 进行转义\n- `x=700:y=200`：分别为水印距视频左侧 700 偏移量，距顶部 200 偏移量，默认为 0\n- `fontsize=24:`：字体大小，默认为 16\n- `fontcolor=red:`：字体颜色红色，默认为黑色\n\n## 中文水印\n\n这是英文的水印，不过我的需求为中文水印，我第一个反应就是乱码问题，先试一下\n\n```bash\nffmpeg -y -i mavel4.mp4 \\\n    -vf \"drawtext=\\\n        text='复仇者联盟：终局之战':\\\n        x=700:\\\n        y=200:\\\n        fontsize=24:\\\n        fontcolor=red:\\\n        \" \\\n    mavel4_drawtext.mp4\n```\n\n果然，都是方块\n\n![mavel4](https://raw.githubusercontent.com/wxnacy/image/master/blog/mavel4.png)\n\n这是因为默认的字体文件并不支持中文，此时我们需要使用 `fontfile` 属性来制定字体文件。\n\n网上很多博客都直接使用 `fontfile=PingFang.ttc:` 来指定文件，这多少有点误人子弟，此处应该使用字体文件的***绝对地址***。\n\n如何获取 Mac 电脑中字体文件的绝对地址呢，请看我的的这篇文章 [Mac 电脑查看字体文件位置](/2019/04/03/mac-fonts-path/)\n\n我选择了苹方字体，绝对地址为 `/System/Library/Fonts/PingFang.ttc`，完整命令如下\n\n```bash\n$ ffmpeg -y -i mavel4.mp4 \\\n    -vf \"drawtext=\\\n        fontfile=/System/Library/Fonts/PingFang.ttc:\\\n        text='复仇者联盟：终局之战':\\\n        x=700:\\\n        y=200:\\\n        fontsize=24:\\\n        fontcolor=red:\\\n        \" \\\n    mavel4_drawtext.mp4\n```\n\n最终渲染效果\n\n![mavel5](https://raw.githubusercontent.com/wxnacy/image/master/blog/mavel5.png)\n\n文字水印还有很多参数，大家可以根据自己的需求进行选择，文档地址：https://ffmpeg.org/ffmpeg-filters.html#drawtext-1\n","source":"_posts/2019-04-08-ffmpeg-drawtext.md","raw":"---\ntitle: Mac 系统中使用 ffmpeg 给视频添加文字水印\ntags:\n  - ffmpeg\ndate: 2019-04-08 14:16:42\n---\n\n\n最近有给视频加文字水印的需求，第一个想到的肯定是使用 ffmpeg，搜索了下发现网上的博客多是从别人那复制过来的，直接使用多是报错，经过摸索后，终于搞清楚了简单用法，今天简单总结下。\n\n<!-- more --><!-- toc -->\n\n先来看个例子，我希望在如下的视频右侧加上文字水印，如下\n\n![mavel3](https://raw.githubusercontent.com/wxnacy/image/master/blog/mavel33.png)\n\n## 安装\n\n首先需要安装最新版本的 ffmpeg\n\n```bash\n$ brew install ffmpeg\n```\n\n## 英文水印\n\n运行下面的命令，即可达到上图效果\n\n```bash\n$ ffmpeg -y -i mavel4.mp4 -vf \"drawtext=text='Avengers\\: Endgame':x=700:y=200:fontsize=24:fontcolor=red\" mavel4_drawtext.mp4\n```\n\n参数含义\n- `-i`：需要渲染的视频，`mavel4.mp4` 为视频源\n- `-vf`：后面跟着需要的具体渲染效果，后面的参数需要使用双引号包裹起来\n- `mavel4_drawtext.mp4`：就是最后输出的文件名\n- `-y`：对一切提示回答 `yes`\n\n`-vf` 后面的参数比较复杂，我们先将命令行折行美化下\n\n```bash\n$ ffmpeg -y -i mavel4.mp4 \\\n    -vf \"drawtext=\\\n        text='Avengers\\: Endgame':\\\n        x=700:\\\n        y=200:\\\n        fontsize=24:\\\n        fontcolor=red:\\\n        \" \\\n    mavel4_drawtext.mp4\n```\n\n现在我们来逐条分析下\n\n- `drawtext=`：代表了此次渲染为添加文字水印，后面跟着具体的属性，属性之间使用 `:` 分割\n- `text='Avengers\\: Endgame':`：想要渲染的文字内容，如果想要输入 `:`，需要使用 `\\` 进行转义\n- `x=700:y=200`：分别为水印距视频左侧 700 偏移量，距顶部 200 偏移量，默认为 0\n- `fontsize=24:`：字体大小，默认为 16\n- `fontcolor=red:`：字体颜色红色，默认为黑色\n\n## 中文水印\n\n这是英文的水印，不过我的需求为中文水印，我第一个反应就是乱码问题，先试一下\n\n```bash\nffmpeg -y -i mavel4.mp4 \\\n    -vf \"drawtext=\\\n        text='复仇者联盟：终局之战':\\\n        x=700:\\\n        y=200:\\\n        fontsize=24:\\\n        fontcolor=red:\\\n        \" \\\n    mavel4_drawtext.mp4\n```\n\n果然，都是方块\n\n![mavel4](https://raw.githubusercontent.com/wxnacy/image/master/blog/mavel4.png)\n\n这是因为默认的字体文件并不支持中文，此时我们需要使用 `fontfile` 属性来制定字体文件。\n\n网上很多博客都直接使用 `fontfile=PingFang.ttc:` 来指定文件，这多少有点误人子弟，此处应该使用字体文件的***绝对地址***。\n\n如何获取 Mac 电脑中字体文件的绝对地址呢，请看我的的这篇文章 [Mac 电脑查看字体文件位置](/2019/04/03/mac-fonts-path/)\n\n我选择了苹方字体，绝对地址为 `/System/Library/Fonts/PingFang.ttc`，完整命令如下\n\n```bash\n$ ffmpeg -y -i mavel4.mp4 \\\n    -vf \"drawtext=\\\n        fontfile=/System/Library/Fonts/PingFang.ttc:\\\n        text='复仇者联盟：终局之战':\\\n        x=700:\\\n        y=200:\\\n        fontsize=24:\\\n        fontcolor=red:\\\n        \" \\\n    mavel4_drawtext.mp4\n```\n\n最终渲染效果\n\n![mavel5](https://raw.githubusercontent.com/wxnacy/image/master/blog/mavel5.png)\n\n文字水印还有很多参数，大家可以根据自己的需求进行选择，文档地址：https://ffmpeg.org/ffmpeg-filters.html#drawtext-1\n","slug":"ffmpeg-drawtext","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2alx00tn5gqovqdskdqw"},{"title":"Python 如何创建文件","date":"2019-04-09T18:02:33.000Z","_content":"\n\nPython 中可以使用 `open()` 内置方法来创建和打开文件。\n\n<!-- more -->\n\n\n**语法**\n\n```bash\nf = open(file, [mode])\n```\n\nMode:\n- `x` 创建文件，如果文件已经存在会报错。\n- `w` 创建可写文件，写入内容覆盖文件。\n- `r` 获取可读文件，默认模式。\n- `a` 打开一个可追加文件，广告默认在文尾。\n- `t` 打开一个 text 模式，默认模式\n- `b` 打开一个二进制模式\n\n**创建文件**\n\n```python\n>>> f = open('/tmp/test', 'x')\n>>> f = open('/tmp/test', 'x')\nTraceback (most recent call last):\n  File \"<input>\", line 1, in <module>\n    f = open('/tmp/test', 'x')\nFileExistsError: [Errno 17] File exists: '/tmp/test'\n```\n\n**创建可写文件**\n\n```python\n>>> f = open('/tmp/test1', 'w')\n>>> f.close()\n>>> f = open('/tmp/test1', 'w')\n>>> f.write('hw')\n2\n>>> f.close()\n```\n\n**创建可追加文件**\n\n```python\n>>> f = open('/tmp/test1', 'a')\n>>> f.write('hw')\n2\n>>> f.close()\n>>> f = open('/tmp/test1', 'r')\n>>> f.read()\n'hwhw'\n```\n\n**获取可读文件**\n\n```python\n>>> f = open('/tmp/test1', 'r')\n>>> f.read()\n'hwhw'\n>>> f.close()\n>>> f = open('/tmp/test1', 'rb')    # 以二进制打开\n>>> f.read()\nb'hwhw'\n>>> f.close()\n```\n\n- [Python File Handling: Create, Open, Append, Read, Write](https://www.guru99.com/reading-and-writing-files-in-python.htm)\n","source":"_posts/2019-04-09-python-create-file.md","raw":"---\ntitle: Python 如何创建文件\ntags:\n  - python\ndate: 2019-04-09 18:02:33\n---\n\n\nPython 中可以使用 `open()` 内置方法来创建和打开文件。\n\n<!-- more -->\n\n\n**语法**\n\n```bash\nf = open(file, [mode])\n```\n\nMode:\n- `x` 创建文件，如果文件已经存在会报错。\n- `w` 创建可写文件，写入内容覆盖文件。\n- `r` 获取可读文件，默认模式。\n- `a` 打开一个可追加文件，广告默认在文尾。\n- `t` 打开一个 text 模式，默认模式\n- `b` 打开一个二进制模式\n\n**创建文件**\n\n```python\n>>> f = open('/tmp/test', 'x')\n>>> f = open('/tmp/test', 'x')\nTraceback (most recent call last):\n  File \"<input>\", line 1, in <module>\n    f = open('/tmp/test', 'x')\nFileExistsError: [Errno 17] File exists: '/tmp/test'\n```\n\n**创建可写文件**\n\n```python\n>>> f = open('/tmp/test1', 'w')\n>>> f.close()\n>>> f = open('/tmp/test1', 'w')\n>>> f.write('hw')\n2\n>>> f.close()\n```\n\n**创建可追加文件**\n\n```python\n>>> f = open('/tmp/test1', 'a')\n>>> f.write('hw')\n2\n>>> f.close()\n>>> f = open('/tmp/test1', 'r')\n>>> f.read()\n'hwhw'\n```\n\n**获取可读文件**\n\n```python\n>>> f = open('/tmp/test1', 'r')\n>>> f.read()\n'hwhw'\n>>> f.close()\n>>> f = open('/tmp/test1', 'rb')    # 以二进制打开\n>>> f.read()\nb'hwhw'\n>>> f.close()\n```\n\n- [Python File Handling: Create, Open, Append, Read, Write](https://www.guru99.com/reading-and-writing-files-in-python.htm)\n","slug":"python-create-file","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aly00tp5gqo1e7lzjdk"},{"title":"Python 如何打印不换行进度条","date":"2019-04-12T22:36:10.000Z","_content":"\nPython 中打印不换行进度条，可以说是简单透顶，使用内置方法 `print` 直接打印即可\n\n<!-- more -->\n\n先看下效果\n\n![image](https://raw.githubusercontent.com/wxnacy/image/master/blog/python_progress.gif)\n\n大部分时间我们使用 `print` 是不带多与参数的，但是它有个带有默认值的参数 `end`\n\n```python\nprint('', end='\\n')\n```\n\n默认情况下 `end='\\n'`，表示打印完毕后进行换行。\n\n`\\r` 则表示将光标移动到行首\n\n```python\nprint('', end='\\r')     # 简而言之，这样就可以起到不换行的效果\n```\n\n完整代码请见 [single_line_progress.py](https://github.com/wxnacy/study/blob/master/python/simple/single_line_progress.py)\n","source":"_posts/2019-04-12-python-single-line-progress.md","raw":"---\ntitle: Python 如何打印不换行进度条\ndate: 2019-04-12 22:36:10\ntags: [python]\n---\n\nPython 中打印不换行进度条，可以说是简单透顶，使用内置方法 `print` 直接打印即可\n\n<!-- more -->\n\n先看下效果\n\n![image](https://raw.githubusercontent.com/wxnacy/image/master/blog/python_progress.gif)\n\n大部分时间我们使用 `print` 是不带多与参数的，但是它有个带有默认值的参数 `end`\n\n```python\nprint('', end='\\n')\n```\n\n默认情况下 `end='\\n'`，表示打印完毕后进行换行。\n\n`\\r` 则表示将光标移动到行首\n\n```python\nprint('', end='\\r')     # 简而言之，这样就可以起到不换行的效果\n```\n\n完整代码请见 [single_line_progress.py](https://github.com/wxnacy/study/blob/master/python/simple/single_line_progress.py)\n","slug":"python-single-line-progress","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2am000ts5gqoerjlnvcf"},{"title":"Python 操作 ini 配置文件","date":"2019-04-11T11:25:49.000Z","_content":"\n\nPython 中使用 `configparser` 模块来操作 ini 文件。\n\n<!-- more --><!-- toc -->\n\n假如想要生成 `example.ini` 文件，内容如下：\n\n```bash\nServerAliveInterval = 45\nCompression = yes\nCompressionLevel = 9\nForwardX11 = yes\n\n[bitbucket.org]\nUser = hg\n\n[topsecret.server.com]\nPort = 50022\nForwardX11 = no\n```\n\n**写入操作**\n\n`configparser.ConfigParser()` 方法生成实例，配置和读取内容都可以按照 `dict` 的方式进行。\n\n```python\n>>> import configparser\n>>> config = configparser.ConfigParser()\n>>> config['DEFAULT'] = {'ServerAliveInterval': '45',\n...                      'Compression': 'yes',\n...                      'CompressionLevel': '9'}\n>>> config['bitbucket.org'] = {}\n>>> config['bitbucket.org']['User'] = 'hg'\n>>> config['topsecret.server.com'] = {}\n>>> topsecret = config['topsecret.server.com']\n>>> topsecret['Port'] = '50022'     # mutates the parser\n>>> topsecret['ForwardX11'] = 'no'  # same here\n>>> config['DEFAULT']['ForwardX11'] = 'yes'\n>>> with open('example.ini', 'w') as configfile:\n...   config.write(configfile)\n...\n```\n\n**读取操作**\n\n```python\n>>> config = configparser.ConfigParser()\n>>> config.sections()\n[]\n>>> config.read('example.ini')\n['example.ini']\n>>> config.sections()\n['bitbucket.org', 'topsecret.server.com']\n>>> 'bitbucket.org' in config\nTrue\n>>> 'bytebong.com' in config\nFalse\n>>> config['bitbucket.org']['User']\n'hg'\n>>> config['DEFAULT']['Compression']\n'yes'\n>>> topsecret = config['topsecret.server.com']\n>>> topsecret['ForwardX11']\n'no'\n>>> topsecret['Port']\n'50022'\n>>> for key in config['bitbucket.org']:\n...     print(key)\nuser\ncompressionlevel\nserveraliveinterval\ncompression\nforwardx11\n>>> config['bitbucket.org']['ForwardX11']\n'yes'\n```\n\n**修改操作**\n\n因为此处配置的写入是覆盖模式，所以如果想要修改文件，需要判断下文件是否存在，存在的话，先加载文件内容。\n\n```python\ndef config(filepath, section, **data):\n    '''\n    filepath: 配置文件地址\n    '''\n    conf = configparser.ConfigParser()\n    if os.path.exists(filepath):\n        conf.read(filepath)\n\n    conf[section] = data\n\n    with open(filepath, 'w') as f:\n        conf.write(f)\n        f.close()\n```\n\n- [configparser](https://docs.python.org/3/library/configparser.html)\n","source":"_posts/2019-04-11-python-configparser.md","raw":"---\ntitle: Python 操作 ini 配置文件\ntags:\n  - python\ndate: 2019-04-11 11:25:49\n---\n\n\nPython 中使用 `configparser` 模块来操作 ini 文件。\n\n<!-- more --><!-- toc -->\n\n假如想要生成 `example.ini` 文件，内容如下：\n\n```bash\nServerAliveInterval = 45\nCompression = yes\nCompressionLevel = 9\nForwardX11 = yes\n\n[bitbucket.org]\nUser = hg\n\n[topsecret.server.com]\nPort = 50022\nForwardX11 = no\n```\n\n**写入操作**\n\n`configparser.ConfigParser()` 方法生成实例，配置和读取内容都可以按照 `dict` 的方式进行。\n\n```python\n>>> import configparser\n>>> config = configparser.ConfigParser()\n>>> config['DEFAULT'] = {'ServerAliveInterval': '45',\n...                      'Compression': 'yes',\n...                      'CompressionLevel': '9'}\n>>> config['bitbucket.org'] = {}\n>>> config['bitbucket.org']['User'] = 'hg'\n>>> config['topsecret.server.com'] = {}\n>>> topsecret = config['topsecret.server.com']\n>>> topsecret['Port'] = '50022'     # mutates the parser\n>>> topsecret['ForwardX11'] = 'no'  # same here\n>>> config['DEFAULT']['ForwardX11'] = 'yes'\n>>> with open('example.ini', 'w') as configfile:\n...   config.write(configfile)\n...\n```\n\n**读取操作**\n\n```python\n>>> config = configparser.ConfigParser()\n>>> config.sections()\n[]\n>>> config.read('example.ini')\n['example.ini']\n>>> config.sections()\n['bitbucket.org', 'topsecret.server.com']\n>>> 'bitbucket.org' in config\nTrue\n>>> 'bytebong.com' in config\nFalse\n>>> config['bitbucket.org']['User']\n'hg'\n>>> config['DEFAULT']['Compression']\n'yes'\n>>> topsecret = config['topsecret.server.com']\n>>> topsecret['ForwardX11']\n'no'\n>>> topsecret['Port']\n'50022'\n>>> for key in config['bitbucket.org']:\n...     print(key)\nuser\ncompressionlevel\nserveraliveinterval\ncompression\nforwardx11\n>>> config['bitbucket.org']['ForwardX11']\n'yes'\n```\n\n**修改操作**\n\n因为此处配置的写入是覆盖模式，所以如果想要修改文件，需要判断下文件是否存在，存在的话，先加载文件内容。\n\n```python\ndef config(filepath, section, **data):\n    '''\n    filepath: 配置文件地址\n    '''\n    conf = configparser.ConfigParser()\n    if os.path.exists(filepath):\n        conf.read(filepath)\n\n    conf[section] = data\n\n    with open(filepath, 'w') as f:\n        conf.write(f)\n        f.close()\n```\n\n- [configparser](https://docs.python.org/3/library/configparser.html)\n","slug":"python-configparser","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2am100tu5gqoch96k46y"},{"title":"Linux tar 打包命令","date":"2019-04-13T09:52:28.000Z","_content":"\n在 Github 打标签的时候，它会自动归档两种压缩格式的文件 `.zip` 和 `.tar.gz`，如图\n\n<!-- more -->\n\n![tar](https://raw.githubusercontent.com/wxnacy/image/master/blog/tar_944.png)\n\n`zip` 格式的压缩和解压可以参看我这篇文章 [Linux zip 和 unzip 命令](/2018/09/19/zip-unzip/)\n\n今天我主要来说一下 `tar` 打包命令。\n\n<!-- toc -->\n\n首先要强调的是 `tar` 是打包命令，本身不压缩，需要调用 `gzip` 压缩命令才可以生成 `.gz` 后缀的压缩文件。\n\n\n```bash\n$ tar cvf pm2.log.tar pm2.log       # 打包\n$ tar zcvf pm2.log.tar.gz pm2.log   # 打包，并压缩\n$ zip pm2.zip pm2.log               # 使用 zip 压缩\n$ ll\n-rw-r--r--    1 wxnacy  staff  259615701 Apr 13 06:37 pm2.log\n-rw-r--r--    1 wxnacy  staff  259617280 Apr 13 09:47 pm2.log.tar\n-rw-r--r--    1 wxnacy  staff    7746015 Apr 13 09:48 pm2.log.tar.gz\n-rw-r--r--    1 wxnacy  staff    7763656 Apr 13 09:51 pm2.zip\n```\n\n从结果来看，只是打包命令的话，不但不压缩，本身比原文件还要大一点，调用压缩命令后，压缩比很明显，并且比 `zip` 的压缩比要高，所以在文件压缩时，我们可以优先使用 `tar` 打包并压缩。\n\n## 打包解包\n\n```bash\n$ tar cvf <filename>.tar <filename|dirname>     # 打包\n$ tar xvf <filename>.tar                        # 解包\n```\n\n## 压缩解压 .gz 格式\n\n```bash\n$ tar zcvf <filename>.tar.gz <filename|dirname>     # 压缩\n$ tar zxvf <filename>.tar.gz                        # 解压\n```\n\n## 压缩解压 .bz2 格式\n\n```bash\n$ tar jcvf <filename>.tar.bz2 <filename|dirname>     # 压缩\n$ tar jxvf <filename>.tar.bz2                        # 解压\n```\n\n## 更多语法\n\n必要参数有如下：\n\n- `-A` 新增压缩文件到已存在的压缩\n- `-B` 设置区块大小\n- `-c` 建立新的压缩文件\n- `-d` 记录文件的差别\n- `-r` 添加文件到已经压缩的文件\n- `-u` 添加改变了和现有的文件到已经存在的压缩文件\n- `-x` 从压缩的文件中提取文件\n- `-t` 显示压缩文件的内容\n- `-z` 支持gzip解压文件\n- `-j` 支持bzip2解压文件\n- `-Z` 支持compress解压文件\n- `-v` 显示操作过程\n- `-l` 文件系统边界设置\n- `-k` 保留原有文件不覆盖\n- `-m` 保留文件不被覆盖\n- `-W` 确认压缩文件的正确性\n\n可选参数如下：\n\n- `-b` 设置区块数目\n- `-C` 切换到指定目录\n- `-f` 指定压缩文件\n- `--help` 显示帮助信息\n- `--version` 显示版本信息\n","source":"_posts/2019-04-13-linux-tar.md","raw":"---\ntitle: Linux tar 打包命令\ndate: 2019-04-13 09:52:28\ntags: [linux]\n---\n\n在 Github 打标签的时候，它会自动归档两种压缩格式的文件 `.zip` 和 `.tar.gz`，如图\n\n<!-- more -->\n\n![tar](https://raw.githubusercontent.com/wxnacy/image/master/blog/tar_944.png)\n\n`zip` 格式的压缩和解压可以参看我这篇文章 [Linux zip 和 unzip 命令](/2018/09/19/zip-unzip/)\n\n今天我主要来说一下 `tar` 打包命令。\n\n<!-- toc -->\n\n首先要强调的是 `tar` 是打包命令，本身不压缩，需要调用 `gzip` 压缩命令才可以生成 `.gz` 后缀的压缩文件。\n\n\n```bash\n$ tar cvf pm2.log.tar pm2.log       # 打包\n$ tar zcvf pm2.log.tar.gz pm2.log   # 打包，并压缩\n$ zip pm2.zip pm2.log               # 使用 zip 压缩\n$ ll\n-rw-r--r--    1 wxnacy  staff  259615701 Apr 13 06:37 pm2.log\n-rw-r--r--    1 wxnacy  staff  259617280 Apr 13 09:47 pm2.log.tar\n-rw-r--r--    1 wxnacy  staff    7746015 Apr 13 09:48 pm2.log.tar.gz\n-rw-r--r--    1 wxnacy  staff    7763656 Apr 13 09:51 pm2.zip\n```\n\n从结果来看，只是打包命令的话，不但不压缩，本身比原文件还要大一点，调用压缩命令后，压缩比很明显，并且比 `zip` 的压缩比要高，所以在文件压缩时，我们可以优先使用 `tar` 打包并压缩。\n\n## 打包解包\n\n```bash\n$ tar cvf <filename>.tar <filename|dirname>     # 打包\n$ tar xvf <filename>.tar                        # 解包\n```\n\n## 压缩解压 .gz 格式\n\n```bash\n$ tar zcvf <filename>.tar.gz <filename|dirname>     # 压缩\n$ tar zxvf <filename>.tar.gz                        # 解压\n```\n\n## 压缩解压 .bz2 格式\n\n```bash\n$ tar jcvf <filename>.tar.bz2 <filename|dirname>     # 压缩\n$ tar jxvf <filename>.tar.bz2                        # 解压\n```\n\n## 更多语法\n\n必要参数有如下：\n\n- `-A` 新增压缩文件到已存在的压缩\n- `-B` 设置区块大小\n- `-c` 建立新的压缩文件\n- `-d` 记录文件的差别\n- `-r` 添加文件到已经压缩的文件\n- `-u` 添加改变了和现有的文件到已经存在的压缩文件\n- `-x` 从压缩的文件中提取文件\n- `-t` 显示压缩文件的内容\n- `-z` 支持gzip解压文件\n- `-j` 支持bzip2解压文件\n- `-Z` 支持compress解压文件\n- `-v` 显示操作过程\n- `-l` 文件系统边界设置\n- `-k` 保留原有文件不覆盖\n- `-m` 保留文件不被覆盖\n- `-W` 确认压缩文件的正确性\n\n可选参数如下：\n\n- `-b` 设置区块数目\n- `-C` 切换到指定目录\n- `-f` 指定压缩文件\n- `--help` 显示帮助信息\n- `--version` 显示版本信息\n","slug":"linux-tar","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2am200tw5gqok5t69gnk"},{"title":"使用 goss 构建 Github 图床","date":"2019-04-14T19:40:58.000Z","_content":"\n写个人博客也快两年了，在博客里放图片一直是个老大难的问题，微博一类的三方图床不爱用，总觉得不极客，使用 OSS 的话多少跟技术沾些边，要是直接使用 linux 服务器搭建的话，又太麻烦，因为需要处理的事情太多了，从图床的角度来说，稳定性还是很重要的。\n\n<!-- more -->\n\n抽个空就会想想这个事情，好歹想出来使用 Github 来做图床，但是这就算是跟技术沾边了？我慢慢来说。\n\n<!-- toc -->\n\n## 如何使用 Github 图床\n\n使用 Github 构建图床是很投机的一件事，和使用微博的方式类似，不过更加自由。\n\n**首先创建一个新的仓库当做图床**\n\n仓库地址为 https://github.com/wxnacy/image\n\n![goss1](https://raw.githubusercontent.com/wxnacy/image/master/blog/goss1_762.png)\n\n**然后上传一个图片**\n\n图片的网页地址为 https://github.com/wxnacy/image/blob/master/blog/mavel5.png\n\n![goss2](https://raw.githubusercontent.com/wxnacy/image/master/blog/goss2_1005.png)\n\n**找到图片网址**\n\n然后点击右侧的 `Download`，网页就会跳转到图片的下载地址，也就是图片链接。\n\n下载地址为 https://raw.githubusercontent.com/wxnacy/image/master/blog/mavel5.png\n\n![goss3](https://raw.githubusercontent.com/wxnacy/image/master/blog/goss3_987.png)\n\n通过这个规律，我就可以在上传完图片后，根据图片地址规则拼接出我们想要的图片链接。\n\n然后这个方式并不酷。\n\n## 使用 goss 构建图床\n\n身为一个程序员，用这样的方式进行上传、拼接地址，这个过程一点都不酷。我希望的是更极致，更方便的方式，所以 [goss](https://github.com/wxnacy/goss) 诞生了。\n\ngoss 全称 Github Object Storage System，也就是 Github 版本的 OSS。\n\n它使用仓库代替 bucket，使用文件 path 代替 key，这样每个仓库都是一个独立的图床。\n\ngoss 自带一套很方便的命令行工具来操作仓库和文件，下面简单的使用几个命令，走一下增删改查的流程。\n\n### 使用\n\n**安装**\n\n目前仅支持 pip 安装\n\n```bash\n$ pip install goss              # 安装\n$ pip install --upgrade goss    # 更新\n```\n\n**登陆**\n\n```bash\n$ goss-cli login\n```\n\n根据命令行提示输入 Github 用户名密码即可，执行一次后会记录在本地，如果想要更换用户再次执行即可。\n\n***goss 会在登陆成功后自动获取用户提交信息的 name 和 email，无需像 Git 一样再去手动配置***\n\n**创建仓库**\n\n```bash\n$ goss-cli repo test_goss -m post\n\n[INFO] Create repository\n[INFO] Url : https://github.com/wxnacy/test_goss\n[INFO] Waiting...\n[INFO] Create README.md\n[INFO] Url : https://github.com/wxnacy/test_goss/blob/master/README.md\n[INFO] Waiting...\nSuccess!\n```\n\n等待命令行执行成功后，仓库创建成功，如图\n\n![goss4](https://raw.githubusercontent.com/wxnacy/image/master/blog/goss4_1000.png)\n\n**上传图片**\n\n上传操纵，单独有个命令为 `goss`\n\n```bash\n$ goss -r test_goss -p test/ goss1.png\n\n[INFO] Upload file\n[INFO] Source   : goss1.png\n[INFO] Path     : test/goss1.png\n[INFO] HtmlUrl  : https://github.com/wxnacy/test_goss/blob/master/test/goss1.png\n[INFO] DownUrl  : https://raw.githubusercontent.com/wxnacy/test_goss/master/test/goss1.png\n[INFO] Now you can use it with <Ctrl-v> and wait for the upload to succeed.\n[INFO] Waiting...\nSuccess!\n```\n\n在日志中会打印出图片的下载地址，然后我们并不需要手动复制，在等待上传的 `Waiting...` 阶段，我们可以直接使用 `<ctrl-v>` 来在文本中直接黏贴图片链接，并且继续编写文章，等图片上传完成后，该链接自动生效。\n\n这也是 goss 最最方便的地方，只需要执行一条命令，剩下的不需要再去管。\n\n参数部分\n\n- `-r` 仓库名称，如果不想每次手动输入，可以使用 `goss-cli config repo.name <name>` 来进行配置\n- `-p` 文件重命名，如果以 `/` 结尾，代表以原文件名上传到该目录中\n\n**查看文件**\n\n```bash\n$ goss-cli file test/goss1.png -r test_goss\n\n[INFO] Query file\n[INFO] Owner    : wxnacy\n[INFO] Repo     : test_goss\n[INFO] Path     : test/goss1.png\n[INFO] Waiting...\nPath    : test/goss1.png\nType    : file\nSize    : 183122\nSha     : dad2a5a0cdfd8fe0b979d3345f72bdcb98b0ecb6\nHtmlUrl : https://github.com/wxnacy/test_goss/blob/master/test/goss1.png\nDownUrl : https://raw.githubusercontent.com/wxnacy/test_goss/master/test/goss1.png\n[INFO] Now you can use it with <Ctrl-v> and wait for the upload to succeed.\nMore details see : https://api.github.com/repos/wxnacy/test_goss/contents/test/goss1.png?ref=master\nSuccess!\n```\n\n**删除文件**\n\n```bash\n$ goss-cli file test/goss1.png -r test_goss -m delete\n```\n\n先你应该发现了，命令中的正删改查的方式来源于 RESTFul 风格。\n\n`--method/-m` 参数\n- `post` 新建\n- `get` 查看，默认\n- `delete` 删除\n\n**删除仓库**\n\n```bash\n$ goss-cli repo test_goss -m delete\n```\n\n现在这个命令应该慎用，因为这是彻彻底底的删除，除非你真的想删除一些老项目，否则最好不要用这个命令。\n\n今天只是简单介绍下使用 goss 来构建图床，goss 本身会有很多功能，我也会不断的进行更新，你可以使用帮助命令来获取更多的信息\n\n```bash\n$ goss-cli --help\n\nUsage: goss-cli [OPTIONS] COMMAND [ARGS]...\n\n  Github Object Storage System\n\nOptions:\n  -v, --version  Show the version\n  -d, --debug    Run in debug\n  --help         Show this message and exit.\n\nCommands:\n  config  Get/Create/Update goss config\n  file    Get/Delete/Download your file If you want to upload file.\n  login   Log in to the github account\n  repo    Get/Create your repositorys\n```\n\n子命令也可以查询\n\n```bash\n$ goss-cli file --help\n\nUsage: goss-cli file [OPTIONS] [PATH]\n\n  Get/Delete/Download your file\n\n  If you want to upload file. Please use command\n\n      goss <filepath> --repo=<repository-name>\n\n  More usage see : goss --help\n\nOptions:\n  -m, --method TEXT  GET/POST/PUT/DELETE for repository. Default is GET\n  -o, --orga TEXT    If want create organization repository. Is required\n  -D, --download     Download file\n  -y, --yes          All questions answered yes\n  -O, --output TEXT  Download name. Default is file name\n  -r, --repo TEXT    Repository name  [required]\n  --help             Show this message and exit.\n```\n","source":"_posts/2019-04-14-goss.md","raw":"---\ntitle: 使用 goss 构建 Github 图床\ndate: 2019-04-14 19:40:58\ntags: [python, 工具]\n---\n\n写个人博客也快两年了，在博客里放图片一直是个老大难的问题，微博一类的三方图床不爱用，总觉得不极客，使用 OSS 的话多少跟技术沾些边，要是直接使用 linux 服务器搭建的话，又太麻烦，因为需要处理的事情太多了，从图床的角度来说，稳定性还是很重要的。\n\n<!-- more -->\n\n抽个空就会想想这个事情，好歹想出来使用 Github 来做图床，但是这就算是跟技术沾边了？我慢慢来说。\n\n<!-- toc -->\n\n## 如何使用 Github 图床\n\n使用 Github 构建图床是很投机的一件事，和使用微博的方式类似，不过更加自由。\n\n**首先创建一个新的仓库当做图床**\n\n仓库地址为 https://github.com/wxnacy/image\n\n![goss1](https://raw.githubusercontent.com/wxnacy/image/master/blog/goss1_762.png)\n\n**然后上传一个图片**\n\n图片的网页地址为 https://github.com/wxnacy/image/blob/master/blog/mavel5.png\n\n![goss2](https://raw.githubusercontent.com/wxnacy/image/master/blog/goss2_1005.png)\n\n**找到图片网址**\n\n然后点击右侧的 `Download`，网页就会跳转到图片的下载地址，也就是图片链接。\n\n下载地址为 https://raw.githubusercontent.com/wxnacy/image/master/blog/mavel5.png\n\n![goss3](https://raw.githubusercontent.com/wxnacy/image/master/blog/goss3_987.png)\n\n通过这个规律，我就可以在上传完图片后，根据图片地址规则拼接出我们想要的图片链接。\n\n然后这个方式并不酷。\n\n## 使用 goss 构建图床\n\n身为一个程序员，用这样的方式进行上传、拼接地址，这个过程一点都不酷。我希望的是更极致，更方便的方式，所以 [goss](https://github.com/wxnacy/goss) 诞生了。\n\ngoss 全称 Github Object Storage System，也就是 Github 版本的 OSS。\n\n它使用仓库代替 bucket，使用文件 path 代替 key，这样每个仓库都是一个独立的图床。\n\ngoss 自带一套很方便的命令行工具来操作仓库和文件，下面简单的使用几个命令，走一下增删改查的流程。\n\n### 使用\n\n**安装**\n\n目前仅支持 pip 安装\n\n```bash\n$ pip install goss              # 安装\n$ pip install --upgrade goss    # 更新\n```\n\n**登陆**\n\n```bash\n$ goss-cli login\n```\n\n根据命令行提示输入 Github 用户名密码即可，执行一次后会记录在本地，如果想要更换用户再次执行即可。\n\n***goss 会在登陆成功后自动获取用户提交信息的 name 和 email，无需像 Git 一样再去手动配置***\n\n**创建仓库**\n\n```bash\n$ goss-cli repo test_goss -m post\n\n[INFO] Create repository\n[INFO] Url : https://github.com/wxnacy/test_goss\n[INFO] Waiting...\n[INFO] Create README.md\n[INFO] Url : https://github.com/wxnacy/test_goss/blob/master/README.md\n[INFO] Waiting...\nSuccess!\n```\n\n等待命令行执行成功后，仓库创建成功，如图\n\n![goss4](https://raw.githubusercontent.com/wxnacy/image/master/blog/goss4_1000.png)\n\n**上传图片**\n\n上传操纵，单独有个命令为 `goss`\n\n```bash\n$ goss -r test_goss -p test/ goss1.png\n\n[INFO] Upload file\n[INFO] Source   : goss1.png\n[INFO] Path     : test/goss1.png\n[INFO] HtmlUrl  : https://github.com/wxnacy/test_goss/blob/master/test/goss1.png\n[INFO] DownUrl  : https://raw.githubusercontent.com/wxnacy/test_goss/master/test/goss1.png\n[INFO] Now you can use it with <Ctrl-v> and wait for the upload to succeed.\n[INFO] Waiting...\nSuccess!\n```\n\n在日志中会打印出图片的下载地址，然后我们并不需要手动复制，在等待上传的 `Waiting...` 阶段，我们可以直接使用 `<ctrl-v>` 来在文本中直接黏贴图片链接，并且继续编写文章，等图片上传完成后，该链接自动生效。\n\n这也是 goss 最最方便的地方，只需要执行一条命令，剩下的不需要再去管。\n\n参数部分\n\n- `-r` 仓库名称，如果不想每次手动输入，可以使用 `goss-cli config repo.name <name>` 来进行配置\n- `-p` 文件重命名，如果以 `/` 结尾，代表以原文件名上传到该目录中\n\n**查看文件**\n\n```bash\n$ goss-cli file test/goss1.png -r test_goss\n\n[INFO] Query file\n[INFO] Owner    : wxnacy\n[INFO] Repo     : test_goss\n[INFO] Path     : test/goss1.png\n[INFO] Waiting...\nPath    : test/goss1.png\nType    : file\nSize    : 183122\nSha     : dad2a5a0cdfd8fe0b979d3345f72bdcb98b0ecb6\nHtmlUrl : https://github.com/wxnacy/test_goss/blob/master/test/goss1.png\nDownUrl : https://raw.githubusercontent.com/wxnacy/test_goss/master/test/goss1.png\n[INFO] Now you can use it with <Ctrl-v> and wait for the upload to succeed.\nMore details see : https://api.github.com/repos/wxnacy/test_goss/contents/test/goss1.png?ref=master\nSuccess!\n```\n\n**删除文件**\n\n```bash\n$ goss-cli file test/goss1.png -r test_goss -m delete\n```\n\n先你应该发现了，命令中的正删改查的方式来源于 RESTFul 风格。\n\n`--method/-m` 参数\n- `post` 新建\n- `get` 查看，默认\n- `delete` 删除\n\n**删除仓库**\n\n```bash\n$ goss-cli repo test_goss -m delete\n```\n\n现在这个命令应该慎用，因为这是彻彻底底的删除，除非你真的想删除一些老项目，否则最好不要用这个命令。\n\n今天只是简单介绍下使用 goss 来构建图床，goss 本身会有很多功能，我也会不断的进行更新，你可以使用帮助命令来获取更多的信息\n\n```bash\n$ goss-cli --help\n\nUsage: goss-cli [OPTIONS] COMMAND [ARGS]...\n\n  Github Object Storage System\n\nOptions:\n  -v, --version  Show the version\n  -d, --debug    Run in debug\n  --help         Show this message and exit.\n\nCommands:\n  config  Get/Create/Update goss config\n  file    Get/Delete/Download your file If you want to upload file.\n  login   Log in to the github account\n  repo    Get/Create your repositorys\n```\n\n子命令也可以查询\n\n```bash\n$ goss-cli file --help\n\nUsage: goss-cli file [OPTIONS] [PATH]\n\n  Get/Delete/Download your file\n\n  If you want to upload file. Please use command\n\n      goss <filepath> --repo=<repository-name>\n\n  More usage see : goss --help\n\nOptions:\n  -m, --method TEXT  GET/POST/PUT/DELETE for repository. Default is GET\n  -o, --orga TEXT    If want create organization repository. Is required\n  -D, --download     Download file\n  -y, --yes          All questions answered yes\n  -O, --output TEXT  Download name. Default is file name\n  -r, --repo TEXT    Repository name  [required]\n  --help             Show this message and exit.\n```\n","slug":"goss","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2am400ty5gqoy3vesaby"},{"title":"Python 获取当前作用域全部参数的内置方法 locals()","date":"2019-04-17T18:23:31.000Z","_content":"\n在写程序时，经常会碰见传递过多参数的情况。先看一个例子\n\n<!-- more -->\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef func1(id, name, age, **kw):\n    amount = 1\n    duration = 10\n    func2(id = id, name = name, age = age, amount = amount, **kw)\n\n\ndef func2(**kw):\n    print(kw)\n```\n\n在 `func1()` 给 `func2()` 传递参数，一个一个的写真的很痛苦，写一次还好，关键是到处都有这种情况。\n\n可不可以将想要的参数打包直接传递过去呢？\n\n内置方法 `locals()` 就可以达到这个效果，它可以实时收集当前作用域的参数，并返回一个字典。\n\n先在全局范围内看看有哪些参数\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nif __name__ == \"__main__\":\n    print(locals())\n```\n\n```bash\n$ python locals_demo.py\n{'__name__': '__main__', '__doc__': None, '__package__': None, '__loader__': <_frozen_importlib_external.SourceFileLoader object at 0x102c75860>, '__spec__': None, '__annotations__': {}, '__builtins__': <module 'builtins' (built-in)>, '__file__': 'locals_demo.py', '__cached__': None}\n```\n\n可能你到没注意到一个空文件里都有这么多的内置参数。\n\n`locals()` 收集参数是实时进行的，比如我们定义一个参数\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\n\nif __name__ == \"__main__\":\n    print(locals())\n    name = 'wxnacy'\n    print(locals())\n```\n\n```bash\n$ python locals_demo.py\n\n{'__name__': '__main__', '__doc__': None, '__package__': None, '__loader__': <_frozen_importlib_external.SourceFileLoader object at 0x1083d5860>, '__spec__': None, '__annotations__': {}, '__builtins__': <module 'builtins' (built-in)>, '__file__': 'locals_demo.py', '__cached__': None}\n{'__name__': '__main__', '__doc__': None, '__package__': None, '__loader__': <_frozen_importlib_external.SourceFileLoader object at 0x1083d5860>, '__spec__': None, '__annotations__': {}, '__builtins__': <module 'builtins' (built-in)>, '__file__': 'locals_demo.py', '__cached__': None, 'name': 'wxnacy'}\n```\n\n第二次打印的结果中，就多出了刚刚定义的参数 `name`\n\n在方法中使用也是如此\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef func(**kw):\n    name = 'wxnacy'\n    print(locals())\n\nif __name__ == \"__main__\":\n    func(url = 'https://wxnacy.com')\n```\n\n```bash\n$ python locals_demo.py\n{'kw': {'url': 'https://wxnacy.com'}, 'name': 'wxnacy'}\n```\n\n因为 `locals()` 方法的值是动态变的，所以我们可以先用变量储存起来，并且记得去掉不需要的参数\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef func(id, age, **kw):\n    name = 'wxnacy'\n    args = locals()\n    args.pop('name')\n    print(args)\n```\n\n或者\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef func(id, age, **kw):\n    args = locals()\n    name = 'wxnacy'\n    print(args)\n```\n\n现在再来回顾下开始的问题，这下解决方式简单了很多\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef func1(id, name, age, **kw):\n    amount = 1\n    args = locals()\n    duration = 10\n    func2(**args)\n\ndef func2(**kw):\n    print(kw)\n```\n\n喔噢，我爱 Python。\n","source":"_posts/2019-04-17-python-locals.md","raw":"---\ntitle: Python 获取当前作用域全部参数的内置方法 locals()\ndate: 2019-04-17 18:23:31\ntags: [python]\n---\n\n在写程序时，经常会碰见传递过多参数的情况。先看一个例子\n\n<!-- more -->\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef func1(id, name, age, **kw):\n    amount = 1\n    duration = 10\n    func2(id = id, name = name, age = age, amount = amount, **kw)\n\n\ndef func2(**kw):\n    print(kw)\n```\n\n在 `func1()` 给 `func2()` 传递参数，一个一个的写真的很痛苦，写一次还好，关键是到处都有这种情况。\n\n可不可以将想要的参数打包直接传递过去呢？\n\n内置方法 `locals()` 就可以达到这个效果，它可以实时收集当前作用域的参数，并返回一个字典。\n\n先在全局范围内看看有哪些参数\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nif __name__ == \"__main__\":\n    print(locals())\n```\n\n```bash\n$ python locals_demo.py\n{'__name__': '__main__', '__doc__': None, '__package__': None, '__loader__': <_frozen_importlib_external.SourceFileLoader object at 0x102c75860>, '__spec__': None, '__annotations__': {}, '__builtins__': <module 'builtins' (built-in)>, '__file__': 'locals_demo.py', '__cached__': None}\n```\n\n可能你到没注意到一个空文件里都有这么多的内置参数。\n\n`locals()` 收集参数是实时进行的，比如我们定义一个参数\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\n\nif __name__ == \"__main__\":\n    print(locals())\n    name = 'wxnacy'\n    print(locals())\n```\n\n```bash\n$ python locals_demo.py\n\n{'__name__': '__main__', '__doc__': None, '__package__': None, '__loader__': <_frozen_importlib_external.SourceFileLoader object at 0x1083d5860>, '__spec__': None, '__annotations__': {}, '__builtins__': <module 'builtins' (built-in)>, '__file__': 'locals_demo.py', '__cached__': None}\n{'__name__': '__main__', '__doc__': None, '__package__': None, '__loader__': <_frozen_importlib_external.SourceFileLoader object at 0x1083d5860>, '__spec__': None, '__annotations__': {}, '__builtins__': <module 'builtins' (built-in)>, '__file__': 'locals_demo.py', '__cached__': None, 'name': 'wxnacy'}\n```\n\n第二次打印的结果中，就多出了刚刚定义的参数 `name`\n\n在方法中使用也是如此\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef func(**kw):\n    name = 'wxnacy'\n    print(locals())\n\nif __name__ == \"__main__\":\n    func(url = 'https://wxnacy.com')\n```\n\n```bash\n$ python locals_demo.py\n{'kw': {'url': 'https://wxnacy.com'}, 'name': 'wxnacy'}\n```\n\n因为 `locals()` 方法的值是动态变的，所以我们可以先用变量储存起来，并且记得去掉不需要的参数\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef func(id, age, **kw):\n    name = 'wxnacy'\n    args = locals()\n    args.pop('name')\n    print(args)\n```\n\n或者\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef func(id, age, **kw):\n    args = locals()\n    name = 'wxnacy'\n    print(args)\n```\n\n现在再来回顾下开始的问题，这下解决方式简单了很多\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef func1(id, name, age, **kw):\n    amount = 1\n    args = locals()\n    duration = 10\n    func2(**args)\n\ndef func2(**kw):\n    print(kw)\n```\n\n喔噢，我爱 Python。\n","slug":"python-locals","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2am500u05gqojq91ches"},{"title":"Vim 执行 Shell 命令（1）","date":"2019-04-15T21:50:52.000Z","_content":"\nVim 编写程序时，无须退出 Vim 或者新建 Terminal 窗口即可执行 Shell 命令。\n\n<!-- more -->\n\n在 Mac 环境开发时，可以使用 Tmux 搭配 Vim，一个窗口编写，一个窗口执行。然而线上环境往往不能安装过于复杂的开发环境，那每次都反复的进入退出很是让人烦躁，其实 Vim 中可以直接运行 Shell 命令。\n\n<!-- toc -->\n\n## 执行\n\n**语法**\n\n```vim\n:!command\n```\n\n`command` 可以是任何一个 Shell 命令，回车执行后，会在 Shell 中显示结果，再次回车返回 Vim。先来看个动图\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/vim-shell1.gif)\n\n## 读取\n\n该模式下还可以直接把执行结果，读取到 Vim 中，这是很神奇的功能。\n\n**语法**\n\n```vim\n:r !command\n```\n\n执行该命令后，Shell 命令结果会自动复制到当前行的下面\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/vim-shell2.gif)\n\n\n前面输入数字，可以复制到第 N 行的下面，比如第二行\n\n```vim\n:2r !command\n```\n\n## 写入\n\n能读取，就能写入，使用 `w` 可以将制定行数的文本通过管道传给想要执行的命令\n\n**语法**\n\n```vim\n:n1, n2w !command\n```\n\n比如我们想要将第 7 到 10 行的内容传给 `wc` 命令，获取行数，单词数和字符数。\n\n```vim\n:7, 10w !wc\n```\n\n![3](https://raw.githubusercontent.com/wxnacy/image/master/blog/vim-shell3.gif)\n\n## 替换\n\n最后要说的是替换，它好像将上边两种命令结合一般，这次直接输入行数范围即可\n\n```vim\n:n1, n2 !wc\n```\n\n还是上面的例子，我们重新执行一次\n\n![4](https://raw.githubusercontent.com/wxnacy/image/master/blog/vim-shell4.gif)\n\n最后提一句 `:!!` 可以执行上一次执行的命令，没错，就像 Shell 中一样。\n\n直接在 Vim 中执行 Shell 命令，只是一种方式，我们还可以直接切换到 Shell 模式在执行复杂的操作。\n\n不过今天先到这里，想要学好 Vim，一次输入太多知识不是个好习惯，还需要大量的练习来巩固它，下一章我们再来探讨怎样切换 Shell 环境。\n\n传送门 [Vim 执行 Shell 命令（2）](/2019/04/18/vim-in-shell/)\n","source":"_posts/2019-04-15-vim-run-shell.md","raw":"---\ntitle: Vim 执行 Shell 命令（1）\ndate: 2019-04-15 21:50:52\ntags: [vim]\n---\n\nVim 编写程序时，无须退出 Vim 或者新建 Terminal 窗口即可执行 Shell 命令。\n\n<!-- more -->\n\n在 Mac 环境开发时，可以使用 Tmux 搭配 Vim，一个窗口编写，一个窗口执行。然而线上环境往往不能安装过于复杂的开发环境，那每次都反复的进入退出很是让人烦躁，其实 Vim 中可以直接运行 Shell 命令。\n\n<!-- toc -->\n\n## 执行\n\n**语法**\n\n```vim\n:!command\n```\n\n`command` 可以是任何一个 Shell 命令，回车执行后，会在 Shell 中显示结果，再次回车返回 Vim。先来看个动图\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/vim-shell1.gif)\n\n## 读取\n\n该模式下还可以直接把执行结果，读取到 Vim 中，这是很神奇的功能。\n\n**语法**\n\n```vim\n:r !command\n```\n\n执行该命令后，Shell 命令结果会自动复制到当前行的下面\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/vim-shell2.gif)\n\n\n前面输入数字，可以复制到第 N 行的下面，比如第二行\n\n```vim\n:2r !command\n```\n\n## 写入\n\n能读取，就能写入，使用 `w` 可以将制定行数的文本通过管道传给想要执行的命令\n\n**语法**\n\n```vim\n:n1, n2w !command\n```\n\n比如我们想要将第 7 到 10 行的内容传给 `wc` 命令，获取行数，单词数和字符数。\n\n```vim\n:7, 10w !wc\n```\n\n![3](https://raw.githubusercontent.com/wxnacy/image/master/blog/vim-shell3.gif)\n\n## 替换\n\n最后要说的是替换，它好像将上边两种命令结合一般，这次直接输入行数范围即可\n\n```vim\n:n1, n2 !wc\n```\n\n还是上面的例子，我们重新执行一次\n\n![4](https://raw.githubusercontent.com/wxnacy/image/master/blog/vim-shell4.gif)\n\n最后提一句 `:!!` 可以执行上一次执行的命令，没错，就像 Shell 中一样。\n\n直接在 Vim 中执行 Shell 命令，只是一种方式，我们还可以直接切换到 Shell 模式在执行复杂的操作。\n\n不过今天先到这里，想要学好 Vim，一次输入太多知识不是个好习惯，还需要大量的练习来巩固它，下一章我们再来探讨怎样切换 Shell 环境。\n\n传送门 [Vim 执行 Shell 命令（2）](/2019/04/18/vim-in-shell/)\n","slug":"vim-run-shell","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2am700u25gqohgopt15t"},{"title":"Vim 执行 Shell 命令（2）","date":"2019-04-18T22:08:20.000Z","_content":"\n前两天我写了在 Vim 中执行 Shell 命令，传送门 [Vim 执行 Shell 命令（1）](/2019/04/15/vim-run-shell/)\n\n<!-- more -->\n<!-- toc -->\n\n今天我们来说如何在 Vim 和 Shell 间切换。\n\n## `<ctrl-z>`\n\n使用 `<ctrl-z>` 可以将当前 Vim 挂起，然后回到 Shell 模式，可以执行任何命令后，再使用 `fg` 或者 `fg %vim` 返回 Vim。\n\n如果连续挂起多个，可以使用 `fg %1` 或者 `fg %vim filename` 回到 Vim。\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/vim-shell5.gif)\n\n这种方式来回切换多少有点不方便，直接使用 command 模式要更方便一点。\n\n## :shell\n\n```vim\n:sh[ell]\n```\n\n输入该命令即可进入 Shell 环境，然后使用 `<ctrl-d>` 即可返回 Vim。\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/vim-shell6.gif)\n\n这个流程显得顺畅很多，另外我们可以使用映射来做到只用 `<ctrl-d>` 来回切换。\n\n```vim\n:noremap <c-d> :sh<cr>  \" 修改映射\"\n```\n\n这样虽然方便，但 `<ctrl-d>` 本来是向下翻半页，很挺常用的，是否要更换这个映射还有待斟酌。\n\n因为 `:sh` 是主动进入 Shell 环境，所以它可以指定命令，比如你想使用 `fish` 则可以这样\n\n```vim\n:set shell=/usr/local/bin/fish\n```\n\n![3](https://raw.githubusercontent.com/wxnacy/image/master/blog/vim-shell7.gif)\n","source":"_posts/2019-04-18-vim-in-shell.md","raw":"---\ntitle: Vim 执行 Shell 命令（2）\ndate: 2019-04-18 22:08:20\ntags: [vim]\n---\n\n前两天我写了在 Vim 中执行 Shell 命令，传送门 [Vim 执行 Shell 命令（1）](/2019/04/15/vim-run-shell/)\n\n<!-- more -->\n<!-- toc -->\n\n今天我们来说如何在 Vim 和 Shell 间切换。\n\n## `<ctrl-z>`\n\n使用 `<ctrl-z>` 可以将当前 Vim 挂起，然后回到 Shell 模式，可以执行任何命令后，再使用 `fg` 或者 `fg %vim` 返回 Vim。\n\n如果连续挂起多个，可以使用 `fg %1` 或者 `fg %vim filename` 回到 Vim。\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/vim-shell5.gif)\n\n这种方式来回切换多少有点不方便，直接使用 command 模式要更方便一点。\n\n## :shell\n\n```vim\n:sh[ell]\n```\n\n输入该命令即可进入 Shell 环境，然后使用 `<ctrl-d>` 即可返回 Vim。\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/vim-shell6.gif)\n\n这个流程显得顺畅很多，另外我们可以使用映射来做到只用 `<ctrl-d>` 来回切换。\n\n```vim\n:noremap <c-d> :sh<cr>  \" 修改映射\"\n```\n\n这样虽然方便，但 `<ctrl-d>` 本来是向下翻半页，很挺常用的，是否要更换这个映射还有待斟酌。\n\n因为 `:sh` 是主动进入 Shell 环境，所以它可以指定命令，比如你想使用 `fish` 则可以这样\n\n```vim\n:set shell=/usr/local/bin/fish\n```\n\n![3](https://raw.githubusercontent.com/wxnacy/image/master/blog/vim-shell7.gif)\n","slug":"vim-in-shell","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2am800u45gqojtaf3bne"},{"title":"Python 如何给屏幕打印信息加上颜色","date":"2019-04-24T13:31:54.000Z","_content":"\n\n以前写过 [Go 如何给屏幕打印信息加上颜色](/2018/09/07/go-fmt-color/)，想当然的以为 Python 也一样，结果被打脸，他们的配置还是有一些区别的。\n\n<!-- more -->\n<!-- toc -->\n\n## 语法\n\n```python\nprint('\\033[显示方式;字体色;背景色m文本\\033[0m')\n# 三种设置都可以忽略不写，都不写则为默认输出\n```\n\n配置如下\n\n```bash\n# 字体 背景 颜色\n# ---------------------------------------\n# 30  40  黑色\n# 31  41  红色\n# 32  42  绿色\n# 33  43  黄色\n# 34  44  蓝色\n# 35  45  紫红色\n# 36  46  青蓝色\n# 37  47  白色\n#\n# 显示方式\n# -------------------------\n#  0  终端默认设置\n#  1  高亮显示\n#  4  使用下划线\n#  5  闪烁\n#  7  反白显示\n#  8  不可见\n```\n\n举几个例子\n\n```python\n# 高亮显示，字体紫红色，背景白色\ntext = 'Hello World'\nprint(f'\\033[1;35;47m{text}\\033[0m')\n```\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/pycolor1.png)\n\n```python\n# 默认显示，字体紫红色，背景白色\ntext = 'Hello World'\nprint(f'\\033[35;47m{text}\\033[0m')\n```\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/pycolor2.png)\n\n```python\n# 默认显示，字体紫红色，背景默认\ntext = 'Hello World'\nprint(f'\\033[35m{text}\\033[0m')\n```\n\n![3](https://raw.githubusercontent.com/wxnacy/image/master/blog/pycolor3.png)\n\n往往我们更关注字体颜色，几个字体颜色效果如下，我用的 iTerm2 的深色背景，效果会有点偏差\n\n![4](https://raw.githubusercontent.com/wxnacy/image/master/blog/output-color.png)\n\n如果你想看所有组合的颜色，可以查看这篇文章 [Go语言在Linux环境下输出彩色字符](https://www.cnblogs.com/journeyonmyway/p/4317108.html)\n\n## 工具化\n\n这个语法看起来还是很别扭的，平常使用我们可以封装起来。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom enum import Enum\n\nclass Color(Enum):\n    BLACK = 30\n    RED = 31\n    GREEN = 32\n    YELLOW = 33\n    BLUE = 34\n    MAGENTA = 35\n    CYAN = 36\n    WHITE = 37\n\ndef print_color(text: str, fg: Color = Color.BLACK.value):\n    print(f'\\033[{fg}m{text}\\033[0m')\n\n# 打印红色文字\nprint_color('Hello World', fg = Color.RED.value)\n```\n","source":"_posts/2019-04-24-python-print-color.md","raw":"---\ntitle: Python 如何给屏幕打印信息加上颜色\ntags:\n  - python\ndate: 2019-04-24 13:31:54\n---\n\n\n以前写过 [Go 如何给屏幕打印信息加上颜色](/2018/09/07/go-fmt-color/)，想当然的以为 Python 也一样，结果被打脸，他们的配置还是有一些区别的。\n\n<!-- more -->\n<!-- toc -->\n\n## 语法\n\n```python\nprint('\\033[显示方式;字体色;背景色m文本\\033[0m')\n# 三种设置都可以忽略不写，都不写则为默认输出\n```\n\n配置如下\n\n```bash\n# 字体 背景 颜色\n# ---------------------------------------\n# 30  40  黑色\n# 31  41  红色\n# 32  42  绿色\n# 33  43  黄色\n# 34  44  蓝色\n# 35  45  紫红色\n# 36  46  青蓝色\n# 37  47  白色\n#\n# 显示方式\n# -------------------------\n#  0  终端默认设置\n#  1  高亮显示\n#  4  使用下划线\n#  5  闪烁\n#  7  反白显示\n#  8  不可见\n```\n\n举几个例子\n\n```python\n# 高亮显示，字体紫红色，背景白色\ntext = 'Hello World'\nprint(f'\\033[1;35;47m{text}\\033[0m')\n```\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/pycolor1.png)\n\n```python\n# 默认显示，字体紫红色，背景白色\ntext = 'Hello World'\nprint(f'\\033[35;47m{text}\\033[0m')\n```\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/pycolor2.png)\n\n```python\n# 默认显示，字体紫红色，背景默认\ntext = 'Hello World'\nprint(f'\\033[35m{text}\\033[0m')\n```\n\n![3](https://raw.githubusercontent.com/wxnacy/image/master/blog/pycolor3.png)\n\n往往我们更关注字体颜色，几个字体颜色效果如下，我用的 iTerm2 的深色背景，效果会有点偏差\n\n![4](https://raw.githubusercontent.com/wxnacy/image/master/blog/output-color.png)\n\n如果你想看所有组合的颜色，可以查看这篇文章 [Go语言在Linux环境下输出彩色字符](https://www.cnblogs.com/journeyonmyway/p/4317108.html)\n\n## 工具化\n\n这个语法看起来还是很别扭的，平常使用我们可以封装起来。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom enum import Enum\n\nclass Color(Enum):\n    BLACK = 30\n    RED = 31\n    GREEN = 32\n    YELLOW = 33\n    BLUE = 34\n    MAGENTA = 35\n    CYAN = 36\n    WHITE = 37\n\ndef print_color(text: str, fg: Color = Color.BLACK.value):\n    print(f'\\033[{fg}m{text}\\033[0m')\n\n# 打印红色文字\nprint_color('Hello World', fg = Color.RED.value)\n```\n","slug":"python-print-color","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2am900u65gqo61njcjdt"},{"title":"Redis get 报错 a key holding the wrong kind of value","date":"2019-04-23T15:45:17.000Z","_content":"\n最近发现使用 `redis-cli` 命令来获取数据报错，如下\n\n<!-- more -->\n<!-- toc -->\n\n```bash\n(error) WRONGTYPE Operation against a key holding the wrong kind of value\n```\n\n比较费解，因为线上程序并没有报错，时间紧迫也没有多关注，今天有时间感觉搜索了下。\n\n这个错误是因为对 `key` 的 `value` 使用了错误的操作，比如 `lpush` 的数据只能使用 `lrange` 获取数据，使用 `get` 就会报错。\n\n```bash\n127.0.0.1:6379> lpush test_key 1\n(integer) 1\n127.0.0.1:6379> get test_key\n(error) WRONGTYPE Operation against a key holding the wrong kind of value\n127.0.0.1:6379> lrange test_key 0 1\n1) \"1\"\n```\n\n同样的使用 `set` 报错的数据，在使用 `lpush` 就会报错。\n\n因为是很久之前写的代码，已经忘记了是用 `lpush` 保存的数据，所以在命令行中使用 `get` 自然报错。\n","source":"_posts/2019-04-23-redis-error-wrong-kind.md","raw":"---\ntitle: Redis get 报错 a key holding the wrong kind of value\ndate: 2019-04-23 15:45:17\ntags: [redis]\n---\n\n最近发现使用 `redis-cli` 命令来获取数据报错，如下\n\n<!-- more -->\n<!-- toc -->\n\n```bash\n(error) WRONGTYPE Operation against a key holding the wrong kind of value\n```\n\n比较费解，因为线上程序并没有报错，时间紧迫也没有多关注，今天有时间感觉搜索了下。\n\n这个错误是因为对 `key` 的 `value` 使用了错误的操作，比如 `lpush` 的数据只能使用 `lrange` 获取数据，使用 `get` 就会报错。\n\n```bash\n127.0.0.1:6379> lpush test_key 1\n(integer) 1\n127.0.0.1:6379> get test_key\n(error) WRONGTYPE Operation against a key holding the wrong kind of value\n127.0.0.1:6379> lrange test_key 0 1\n1) \"1\"\n```\n\n同样的使用 `set` 报错的数据，在使用 `lpush` 就会报错。\n\n因为是很久之前写的代码，已经忘记了是用 `lpush` 保存的数据，所以在命令行中使用 `get` 自然报错。\n","slug":"redis-error-wrong-kind","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2amb00u85gqo3pcca2vq"},{"title":"SQLAlchemy 解决其他连接修改数据后，查询不到的问题","date":"2019-04-25T09:35:51.000Z","_content":"\n\n使用 SQLAlchemy 做数据库的读写分离，创建了主从两个 DB，结果发现使用主 DB 写入的数据，从 DB 无法实时查询，必须要重启服务才可以查到。\n\n<!-- more -->\n<!-- toc -->\n\n做了各种尝试发现都得不到解决，突然想起以前碰见过类似的问题，但是当时通过其他方式绕了过去，果然不是不报，时候未到。这次必须得正面解决了。\n\n经过 Google 后发现，这是事务的问题，在多个实例进行链接数据库时，如果不执行 `commit`，就得不到最新的数据。\n\n我们可以使用 `session.commit()` 来单个解决，或者可以在创建引擎时通过调整隔离级别参数来永久解决。\n\n```python\nengine = create_engine('db_url', isolation_level = 'READ COMMITTED')\n```\n\n`isolation_level` 的值包含了：\n- READ COMMITTED\n- READ UNCOMMITTED\n- REPEATABLE READ\n- SERIALIZABLE\n- AUTOCOMMIT\n\n因为我使用只读，所以 `READ COMMITTED` 就可以满足要求，如果你是读写公用的 DB，直接使用 `AUTOCOMMIT` 就无脑解决了。\n\n如果你使用 `flask_sqlalchemy`，在 `app.config` 中加入如下参数即可\n\n```python\nSQLALCHEMY_COMMIT_ON_TEARDOWN = True\n```\n\n通过源码可以发现，当该参数设置为 `True` 时，它会自动进行 `commit` 操作\n\n```python\n@app.teardown_appcontext\ndef shutdown_session(response_or_exc):\n    if app.config['SQLALCHEMY_COMMIT_ON_TEARDOWN']:\n        if response_or_exc is None:\n            self.session.commit()\n\n    self.session.remove()\n    return response_or_exc\n```\n\n- [Engine Creation API](https://docs.sqlalchemy.org/en/13/core/engines.html#engine-creation-api)\n- [Mysql Transaction Isolation Level](https://docs.sqlalchemy.org/en/13/dialects/mysql.html#transaction-isolation-level)\n","source":"_posts/2019-04-25-sqlalchemy-isolation-level.md","raw":"---\ntitle: SQLAlchemy 解决其他连接修改数据后，查询不到的问题\ntags:\n  - sqlalchemy\ndate: 2019-04-25 09:35:51\n---\n\n\n使用 SQLAlchemy 做数据库的读写分离，创建了主从两个 DB，结果发现使用主 DB 写入的数据，从 DB 无法实时查询，必须要重启服务才可以查到。\n\n<!-- more -->\n<!-- toc -->\n\n做了各种尝试发现都得不到解决，突然想起以前碰见过类似的问题，但是当时通过其他方式绕了过去，果然不是不报，时候未到。这次必须得正面解决了。\n\n经过 Google 后发现，这是事务的问题，在多个实例进行链接数据库时，如果不执行 `commit`，就得不到最新的数据。\n\n我们可以使用 `session.commit()` 来单个解决，或者可以在创建引擎时通过调整隔离级别参数来永久解决。\n\n```python\nengine = create_engine('db_url', isolation_level = 'READ COMMITTED')\n```\n\n`isolation_level` 的值包含了：\n- READ COMMITTED\n- READ UNCOMMITTED\n- REPEATABLE READ\n- SERIALIZABLE\n- AUTOCOMMIT\n\n因为我使用只读，所以 `READ COMMITTED` 就可以满足要求，如果你是读写公用的 DB，直接使用 `AUTOCOMMIT` 就无脑解决了。\n\n如果你使用 `flask_sqlalchemy`，在 `app.config` 中加入如下参数即可\n\n```python\nSQLALCHEMY_COMMIT_ON_TEARDOWN = True\n```\n\n通过源码可以发现，当该参数设置为 `True` 时，它会自动进行 `commit` 操作\n\n```python\n@app.teardown_appcontext\ndef shutdown_session(response_or_exc):\n    if app.config['SQLALCHEMY_COMMIT_ON_TEARDOWN']:\n        if response_or_exc is None:\n            self.session.commit()\n\n    self.session.remove()\n    return response_or_exc\n```\n\n- [Engine Creation API](https://docs.sqlalchemy.org/en/13/core/engines.html#engine-creation-api)\n- [Mysql Transaction Isolation Level](https://docs.sqlalchemy.org/en/13/dialects/mysql.html#transaction-isolation-level)\n","slug":"sqlalchemy-isolation-level","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2amc00ua5gqo9gatbanf"},{"title":"Python 判断字符串是否为大写及 is 方法延伸","date":"2019-04-28T21:16:02.000Z","_content":"\n\nPython 判断字符串是否为大写及延伸\n\n<!-- more -->\n<!-- toc -->\n\n以下方法仅判断字符，数字和符号不影响结果\n\n**isupper()** 判断是否都为大写\n\n```python\n>>> '1a!'.isupper()\nFalse\n>>> '1A!'.isupper()\nTrue\n```\n\n**islower()** 判断是否都为小写\n\n```python\n>>> '1As!'.islower()\nFalse\n>>> '1s!'.islower()\nTrue\n```\n\n**istitle()** 判断所有的单词首字符都是大写\n\n```python\n>>> 'This Is Upper'.istitle()\nTrue\n>>> 'This Is upper1'.istitle()\nFalse\n```\n\n**isspace()** 判断所有的字符都是空格\n\n```python\n>>> 'This Is upper1'.isspace()\nFalse\n>>> ' '.isspace()\nTrue\n```\n\n**isalnum()** 判断所有的字符都是数字或字母\n\n```python\n>>> '1a!'.isalnum()\nFalse\n>>> '1a'.isalnum()\nTrue\n>>> 'aa'.isalnum()\nTrue\n>>> '11'.isalnum()\nTrue\n```\n\n**isalpha()** 判断所有的字符都是字母\n\n```python\n>>> '11'.isalpha()\nFalse\n>>> '1a'.isalpha()\nFalse\n>>> 'aa'.isalpha()\nTrue\n```\n\n**isdigit()** 判断所有的字符都是数字\n\n```python\n>>> 'aa'.isdigit()\nFalse\n>>> '11'.isdigit()\nTrue\n>>> '1a'.isdigit()\nFalse\n```\n\n还有两个类似的方法 **isdecimal()** 和 **isnumeric()**\n\n","source":"_posts/2019-04-28-python-isupper.md","raw":"---\ntitle: Python 判断字符串是否为大写及 is 方法延伸\ntags:\n  - python\ndate: 2019-04-28 21:16:02\n---\n\n\nPython 判断字符串是否为大写及延伸\n\n<!-- more -->\n<!-- toc -->\n\n以下方法仅判断字符，数字和符号不影响结果\n\n**isupper()** 判断是否都为大写\n\n```python\n>>> '1a!'.isupper()\nFalse\n>>> '1A!'.isupper()\nTrue\n```\n\n**islower()** 判断是否都为小写\n\n```python\n>>> '1As!'.islower()\nFalse\n>>> '1s!'.islower()\nTrue\n```\n\n**istitle()** 判断所有的单词首字符都是大写\n\n```python\n>>> 'This Is Upper'.istitle()\nTrue\n>>> 'This Is upper1'.istitle()\nFalse\n```\n\n**isspace()** 判断所有的字符都是空格\n\n```python\n>>> 'This Is upper1'.isspace()\nFalse\n>>> ' '.isspace()\nTrue\n```\n\n**isalnum()** 判断所有的字符都是数字或字母\n\n```python\n>>> '1a!'.isalnum()\nFalse\n>>> '1a'.isalnum()\nTrue\n>>> 'aa'.isalnum()\nTrue\n>>> '11'.isalnum()\nTrue\n```\n\n**isalpha()** 判断所有的字符都是字母\n\n```python\n>>> '11'.isalpha()\nFalse\n>>> '1a'.isalpha()\nFalse\n>>> 'aa'.isalpha()\nTrue\n```\n\n**isdigit()** 判断所有的字符都是数字\n\n```python\n>>> 'aa'.isdigit()\nFalse\n>>> '11'.isdigit()\nTrue\n>>> '1a'.isdigit()\nFalse\n```\n\n还有两个类似的方法 **isdecimal()** 和 **isnumeric()**\n\n","slug":"python-isupper","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2amd00uc5gqokcfjuw8i"},{"title":"awk 正则表达式中使用参数","date":"2019-04-26T08:08:55.000Z","_content":"\n\nawk 使用正则表达式过滤文本时可以使用可变参数，我本认为这应该是很普遍的需求，然而网上找了一圈也没看到一个比较全面的教程，不过东拼西凑也总算是满足了需求，今天来总结下。\n\n<!-- more -->\n<!-- toc -->\n\n首先将当前文件列表导入到一份文本文件 [text](https://raw.githubusercontent.com/wxnacy/file/master/common/text) 中，作为测试使用\n\n```bash\n$ ll > text\n```\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/awk1_548.png)\n\n## 命令行传参\n\n首先我们打算过滤文件列表的最后修改时间为 `10` 点的数据\n\n```bash\n$ awk '/10/ {print $0}' text\n-rw-r--r--  1 wxnacy  staff    1052 Mar 13 22:50 awktest\n-rw-r--r--  1 wxnacy  staff     100 Mar 25 22:53 b.py\n-rw-r--r--  1 wxnacy  staff     121 Mar 14 10:19 test.go\n-rw-r--r--  1 wxnacy  staff     106 Mar 13 10:53 test.js\n```\n\n这样得到的结果并准确，我们应该精确的对第 8 行进行正则匹配\n\n```bash\n$ awk '$8 ~ /10/ {print $0}' text\n-rw-r--r--  1 wxnacy  staff     121 Mar 14 10:19 test.go\n-rw-r--r--  1 wxnacy  staff     106 Mar 13 10:53 test.js\n```\n\n现在问题来了，我希望对 `10` 进行参数化，该怎么做呢？\n\nawk 命令行模式可以直接使用 shell 参数，不过比较麻烦一点\n\n```bash\n$ hour=10\n$ echo $hour\n10\n$ awk '$8 ~ /'\"$hour\"'/ {print $0}' text\n```\n\n`$hour` 还需要使用 `'\"\"'` 包裹起来才行\n\n好在 awk 也有办法传递参数，使用 `-v` 即可\n\n```bash\n$ awk -v hour=10 '$8 ~ hour {print $0}' text\n```\n\n如果使用参数的话，正则内容就不用 `//` 包裹了，直接使用参数即可。\n\n\n只是这种情况下，如果我们想增加额外的符号，需要使用字符串包裹起来，比如想要查找时间以 `18` 为结尾的文件\n\n```bash\n$ awk -v hour=18 '$8 ~ hour\"$\" {print $0}' text\n-rw-r--r--  1 wxnacy  staff     861 Apr 17 18:18 test\n```\n\n也可以使用 `if` 条件语句\n\n```bash\n$ awk -v hour=18 '{ if ($8 ~ hour\"$\") {print $0} }' text\n```\n\n很明显，命令行中使用 `if` 条件语句显得很乱，这主要还是要引出脚本化来。\n\n## 脚本中传参\n\n我们先将单引号中的条件脚本化\n\n```bash\n$ touch split.awk\n$ chmod +x split.awk\n$ vim split.awk\n```\n\n```bash\n#!/usr/bin/env awk -f\n\n{\n    if ($8 ~ hour\"$\"){\n        print $0\n    }\n}\n```\n\n执行\n\n```bash\n$ ./split.awk -v hour=18 text\n-rw-r--r--  1 wxnacy  staff     861 Apr 17 18:18 test\n```\n\n这只是一个很简单的例子，真实的开发中，判断条件往往更加复杂的多，所以使用脚本是很明智的办法。\n\n最后提一句，使用 `match()` 可以使脚本的可读性更好一些。\n\n```bash\n#!/usr/bin/env awk -f\n\n{\n    if (match($8 , hour\"$\")){\n        print $0\n    }\n}\n```\n\n- [How to use awk variables in regular expressions?](https://stackoverflow.com/questions/11534173/how-to-use-awk-variables-in-regular-expressions)\n","source":"_posts/2019-04-26-awk-regex-use-var.md","raw":"---\ntitle: awk 正则表达式中使用参数\ntags:\n  - linux\n  - awk\ndate: 2019-04-26 08:08:55\n---\n\n\nawk 使用正则表达式过滤文本时可以使用可变参数，我本认为这应该是很普遍的需求，然而网上找了一圈也没看到一个比较全面的教程，不过东拼西凑也总算是满足了需求，今天来总结下。\n\n<!-- more -->\n<!-- toc -->\n\n首先将当前文件列表导入到一份文本文件 [text](https://raw.githubusercontent.com/wxnacy/file/master/common/text) 中，作为测试使用\n\n```bash\n$ ll > text\n```\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/awk1_548.png)\n\n## 命令行传参\n\n首先我们打算过滤文件列表的最后修改时间为 `10` 点的数据\n\n```bash\n$ awk '/10/ {print $0}' text\n-rw-r--r--  1 wxnacy  staff    1052 Mar 13 22:50 awktest\n-rw-r--r--  1 wxnacy  staff     100 Mar 25 22:53 b.py\n-rw-r--r--  1 wxnacy  staff     121 Mar 14 10:19 test.go\n-rw-r--r--  1 wxnacy  staff     106 Mar 13 10:53 test.js\n```\n\n这样得到的结果并准确，我们应该精确的对第 8 行进行正则匹配\n\n```bash\n$ awk '$8 ~ /10/ {print $0}' text\n-rw-r--r--  1 wxnacy  staff     121 Mar 14 10:19 test.go\n-rw-r--r--  1 wxnacy  staff     106 Mar 13 10:53 test.js\n```\n\n现在问题来了，我希望对 `10` 进行参数化，该怎么做呢？\n\nawk 命令行模式可以直接使用 shell 参数，不过比较麻烦一点\n\n```bash\n$ hour=10\n$ echo $hour\n10\n$ awk '$8 ~ /'\"$hour\"'/ {print $0}' text\n```\n\n`$hour` 还需要使用 `'\"\"'` 包裹起来才行\n\n好在 awk 也有办法传递参数，使用 `-v` 即可\n\n```bash\n$ awk -v hour=10 '$8 ~ hour {print $0}' text\n```\n\n如果使用参数的话，正则内容就不用 `//` 包裹了，直接使用参数即可。\n\n\n只是这种情况下，如果我们想增加额外的符号，需要使用字符串包裹起来，比如想要查找时间以 `18` 为结尾的文件\n\n```bash\n$ awk -v hour=18 '$8 ~ hour\"$\" {print $0}' text\n-rw-r--r--  1 wxnacy  staff     861 Apr 17 18:18 test\n```\n\n也可以使用 `if` 条件语句\n\n```bash\n$ awk -v hour=18 '{ if ($8 ~ hour\"$\") {print $0} }' text\n```\n\n很明显，命令行中使用 `if` 条件语句显得很乱，这主要还是要引出脚本化来。\n\n## 脚本中传参\n\n我们先将单引号中的条件脚本化\n\n```bash\n$ touch split.awk\n$ chmod +x split.awk\n$ vim split.awk\n```\n\n```bash\n#!/usr/bin/env awk -f\n\n{\n    if ($8 ~ hour\"$\"){\n        print $0\n    }\n}\n```\n\n执行\n\n```bash\n$ ./split.awk -v hour=18 text\n-rw-r--r--  1 wxnacy  staff     861 Apr 17 18:18 test\n```\n\n这只是一个很简单的例子，真实的开发中，判断条件往往更加复杂的多，所以使用脚本是很明智的办法。\n\n最后提一句，使用 `match()` 可以使脚本的可读性更好一些。\n\n```bash\n#!/usr/bin/env awk -f\n\n{\n    if (match($8 , hour\"$\")){\n        print $0\n    }\n}\n```\n\n- [How to use awk variables in regular expressions?](https://stackoverflow.com/questions/11534173/how-to-use-awk-variables-in-regular-expressions)\n","slug":"awk-regex-use-var","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ame00ue5gqozxqmo4gr"},{"title":"Python 在 Mac 系统中从剪切板中获取图片","date":"2019-05-13T15:46:09.000Z","_content":"\n最近想给 [goss](https://github.com/wxnacy/goss) 加点料，就是省去截完图后，保存本地图片的步骤，而是直接从剪切板里获取图片并上传 Github，这样，如何从剪切板中获取图片就成了关键。\n\n<!-- more -->\n<!-- toc -->\n\n本来想着直接使用 `pbcopy` 和 `pbpaste` 命令组合，不过可惜的是它们只能适用于文本。\n\n此时我们需要借助三方包 [Pillow](https://pillow.readthedocs.io/en/stable/)\n\n## 安装\n\n```bash\n$ pip install pillow\n```\n\n## 获取并保存本地\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfrom PIL import ImageGrab\nfrom PIL import Image\n\nimg = ImageGrab.grabclipboard()\nif isinstance(img, Image.Image):\n    img.save('test.png', 'png')\n```\n\n截图并保存剪切板后，`grabclipboard()` 方法可以获取剪切板中的图片，为了防止出错，我们还要判断取出的数据是否 `Image.Image` 图片类型，随后调用 `save()` 方法保存本地即可。\n\n## 获取并写入到流\n\n不过我希望的不是保存到本地，而是直接写入到流中，再进行二次操作，此时需要借助 io 包，将图片保存到 io 流中。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfrom PIL import ImageGrab\nfrom PIL import Image\nimport io\n\nimg = ImageGrab.grabclipboard()\nimg_bytes = io.BytesIO()\nif isinstance(img, Image.Image):\n    #  img.save('test.png', 'png')\n    img.save(img_bytes, 'png')\n    print(img_bytes.getvalue())\n```\n\n能拿到字节流就可以对其操作，在转换为其它格式，比如 base64，具体方法可以参考 [Convert bytes to base64 HTML img tag](https://www.devdungeon.com/content/grab-image-clipboard-python-pillow#convert_bytes_to_html_base64_img_tag)\n\n- [How to copy a image from clipboard in Python?](https://stackoverflow.com/questions/35254655/how-to-copy-a-image-from-clipboard-in-python?rq=1)\n- [Grab Image from Clipboard in Python with Pillow](https://www.devdungeon.com/content/grab-image-clipboard-python-pillow)\n","source":"_posts/2019-05-13-python-get-image-from-clipboard-on-mac.md","raw":"---\ntitle: Python 在 Mac 系统中从剪切板中获取图片\ndate: 2019-05-13 15:46:09\ntags: [python]\n---\n\n最近想给 [goss](https://github.com/wxnacy/goss) 加点料，就是省去截完图后，保存本地图片的步骤，而是直接从剪切板里获取图片并上传 Github，这样，如何从剪切板中获取图片就成了关键。\n\n<!-- more -->\n<!-- toc -->\n\n本来想着直接使用 `pbcopy` 和 `pbpaste` 命令组合，不过可惜的是它们只能适用于文本。\n\n此时我们需要借助三方包 [Pillow](https://pillow.readthedocs.io/en/stable/)\n\n## 安装\n\n```bash\n$ pip install pillow\n```\n\n## 获取并保存本地\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfrom PIL import ImageGrab\nfrom PIL import Image\n\nimg = ImageGrab.grabclipboard()\nif isinstance(img, Image.Image):\n    img.save('test.png', 'png')\n```\n\n截图并保存剪切板后，`grabclipboard()` 方法可以获取剪切板中的图片，为了防止出错，我们还要判断取出的数据是否 `Image.Image` 图片类型，随后调用 `save()` 方法保存本地即可。\n\n## 获取并写入到流\n\n不过我希望的不是保存到本地，而是直接写入到流中，再进行二次操作，此时需要借助 io 包，将图片保存到 io 流中。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfrom PIL import ImageGrab\nfrom PIL import Image\nimport io\n\nimg = ImageGrab.grabclipboard()\nimg_bytes = io.BytesIO()\nif isinstance(img, Image.Image):\n    #  img.save('test.png', 'png')\n    img.save(img_bytes, 'png')\n    print(img_bytes.getvalue())\n```\n\n能拿到字节流就可以对其操作，在转换为其它格式，比如 base64，具体方法可以参考 [Convert bytes to base64 HTML img tag](https://www.devdungeon.com/content/grab-image-clipboard-python-pillow#convert_bytes_to_html_base64_img_tag)\n\n- [How to copy a image from clipboard in Python?](https://stackoverflow.com/questions/35254655/how-to-copy-a-image-from-clipboard-in-python?rq=1)\n- [Grab Image from Clipboard in Python with Pillow](https://www.devdungeon.com/content/grab-image-clipboard-python-pillow)\n","slug":"python-get-image-from-clipboard-on-mac","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2amg00ug5gqohvricwd5"},{"title":"使用 ffmpeg 分离视频流和音频流","date":"2019-04-16T22:41:36.000Z","_content":"\n通常情况下，我们提到“视频”会有两个要素，声音和画面。但其实严格意义上说视频中含有**视频流**和**音频流**，如果一个视频只有视频流，那么就只有画面没有声音，反之亦然。\n\n<!-- more -->\n<!-- toc -->\n\n我有听英语电影原声的习惯，但是总是放视频很不方便，网上的资源又不是太称心如意，就想着自己动手来分离，我首先想到的是 ffmpeg。\n\n我们先来看看视频中的这两个流\n\n```bash\n$ ffmpeg -i mavel4.mp4\n```\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/ffsplit1_713.png)\n\n执行该命令可以直接查看视频的信息，其中就有刚才的提到的**视频流（Video: h264）**和**音频流（Audio: aac）**\n\n使用参数 `-vcodec copy -an` 和 `-acodec copy -vn` 可以分离出视频流和音频流。\n\n**分离视频**\n\n```bash\n$ ffmpeg -i mavel4.mp4 -vcodec copy -an mav.mp4\n```\n\n等待转码成功后，观看 `mav.mp4` 发现已经没有声音了，查看发现只有一个流\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/ffsplit2_667.png)\n\n**分离音频**\n\n```bash\n$ ffmpeg -i mavel4.mp4 -acodec copy -vn m.m4a\n```\n\n再次查看音频流信息\n\n![3](https://raw.githubusercontent.com/wxnacy/image/master/blog/ffsplit3_702.png)\n\n网上很多博客都是直接甩一个类似这样的命令\n\n```bash\n$ ffmpeg -i mavel4.mp4 -acodec copy -vn m.mp3\n```\n\n如果你执行的话，多半会报错，因为查看视频信息，很可能像例子中的音频流一样是 aac 格式的，什么是 aac 格式呢\n\n> 高级音频编码（英语：Advanced Audio Coding，AAC），出现于1997年，为一种基于MPEG-2的有损数字音频压缩的专利音频编码标准，由Fraunhofer IIS、杜比实验室、AT&T、Sony、Nokia等公司共同开发。2000年，MPEG-4标准在原本的基础上加上了PNS（Perceptual Noise Substitution）等技术，并提供了多种扩展工具。为了区别于传统的MPEG-2 AAC又称为MPEG-4 AAC。其作为MP3的后继者而被设计出来，在相同的比特率之下，AAC相较于MP3通常可以达到更好的声音质量[2]。\n\n关键是下面这句\n\n> AAC 被YouTube、iPhone、iPod、 iPad、 任天堂DSi、任天堂3DS、iTunes、DivX、PlayStation 3和多款Nokia 40系列、Sony Ericsson手机采用为默认的音频编码格式，并且被PlayStation Vita、Wii、Sony Walkman MP3系列及随后的Android、BlackBerry等移动操作系统支持。\n\n也就是说，现在很多视频的音频流都将是这个格式，那直接分离 `mp3` 格式的音频自然会报错。\n\n那我就是想要 `mp3` 的音频该怎么办呢？\n\n再来一次转码\n\n```bash\n$ ffmpeg -i m.m4a m.mp3\n```\n\n或者直接将视频转码为 `mp3` 格式。\n\n```bash\n$ ffmpeg -i mavel4.mp4 m.mp3\n```\n\n- [高级音频编码](https://zh.wikipedia.org/wiki/%E9%80%B2%E9%9A%8E%E9%9F%B3%E8%A8%8A%E7%B7%A8%E7%A2%BC#%E7%9B%B8%E8%BC%83%E6%96%BCMP3%E7%9A%84%E6%94%B9%E9%80%B2)\n","source":"_posts/2019-04-16-ffmpeg-split-video-audio.md","raw":"---\ntitle: 使用 ffmpeg 分离视频流和音频流\ndate: 2019-04-16 22:41:36\ntags: [ffmpeg]\n---\n\n通常情况下，我们提到“视频”会有两个要素，声音和画面。但其实严格意义上说视频中含有**视频流**和**音频流**，如果一个视频只有视频流，那么就只有画面没有声音，反之亦然。\n\n<!-- more -->\n<!-- toc -->\n\n我有听英语电影原声的习惯，但是总是放视频很不方便，网上的资源又不是太称心如意，就想着自己动手来分离，我首先想到的是 ffmpeg。\n\n我们先来看看视频中的这两个流\n\n```bash\n$ ffmpeg -i mavel4.mp4\n```\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/ffsplit1_713.png)\n\n执行该命令可以直接查看视频的信息，其中就有刚才的提到的**视频流（Video: h264）**和**音频流（Audio: aac）**\n\n使用参数 `-vcodec copy -an` 和 `-acodec copy -vn` 可以分离出视频流和音频流。\n\n**分离视频**\n\n```bash\n$ ffmpeg -i mavel4.mp4 -vcodec copy -an mav.mp4\n```\n\n等待转码成功后，观看 `mav.mp4` 发现已经没有声音了，查看发现只有一个流\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/ffsplit2_667.png)\n\n**分离音频**\n\n```bash\n$ ffmpeg -i mavel4.mp4 -acodec copy -vn m.m4a\n```\n\n再次查看音频流信息\n\n![3](https://raw.githubusercontent.com/wxnacy/image/master/blog/ffsplit3_702.png)\n\n网上很多博客都是直接甩一个类似这样的命令\n\n```bash\n$ ffmpeg -i mavel4.mp4 -acodec copy -vn m.mp3\n```\n\n如果你执行的话，多半会报错，因为查看视频信息，很可能像例子中的音频流一样是 aac 格式的，什么是 aac 格式呢\n\n> 高级音频编码（英语：Advanced Audio Coding，AAC），出现于1997年，为一种基于MPEG-2的有损数字音频压缩的专利音频编码标准，由Fraunhofer IIS、杜比实验室、AT&T、Sony、Nokia等公司共同开发。2000年，MPEG-4标准在原本的基础上加上了PNS（Perceptual Noise Substitution）等技术，并提供了多种扩展工具。为了区别于传统的MPEG-2 AAC又称为MPEG-4 AAC。其作为MP3的后继者而被设计出来，在相同的比特率之下，AAC相较于MP3通常可以达到更好的声音质量[2]。\n\n关键是下面这句\n\n> AAC 被YouTube、iPhone、iPod、 iPad、 任天堂DSi、任天堂3DS、iTunes、DivX、PlayStation 3和多款Nokia 40系列、Sony Ericsson手机采用为默认的音频编码格式，并且被PlayStation Vita、Wii、Sony Walkman MP3系列及随后的Android、BlackBerry等移动操作系统支持。\n\n也就是说，现在很多视频的音频流都将是这个格式，那直接分离 `mp3` 格式的音频自然会报错。\n\n那我就是想要 `mp3` 的音频该怎么办呢？\n\n再来一次转码\n\n```bash\n$ ffmpeg -i m.m4a m.mp3\n```\n\n或者直接将视频转码为 `mp3` 格式。\n\n```bash\n$ ffmpeg -i mavel4.mp4 m.mp3\n```\n\n- [高级音频编码](https://zh.wikipedia.org/wiki/%E9%80%B2%E9%9A%8E%E9%9F%B3%E8%A8%8A%E7%B7%A8%E7%A2%BC#%E7%9B%B8%E8%BC%83%E6%96%BCMP3%E7%9A%84%E6%94%B9%E9%80%B2)\n","slug":"ffmpeg-split-video-audio","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2amh00ui5gqogj1c219g"},{"title":"Vim 执行 Shell 命令（3）","date":"2019-05-17T17:40:56.000Z","_content":"\n上个月写了两篇 Vim 中使用 Shell 的文章，[Vim 执行 Shell 命令（1）](/2019/04/15/vim-run-shell/) 和 [Vim 执行 Shell 命令（2）](/2019/04/18/vim-in-shell/)，在 [typebrook](https://github.com/wxnacy/wxnacy.github.io/issues/1) 的提醒下发现还有 `:terminal` 可以实现，并且用了下发现还很好用。\n\n<!-- more -->\n<!-- toc -->\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/vim-shell8.gif)\n\n像预览中展示的这样，`:terminal` 可以切分出一个 terminal 来运行 shell 命令，这样的方式比前面的介绍的两种方式要更好，它类似 tmux 的多窗口操作，你也可以一边编写代码，一边执行命令。\n\n打开命令如下\n\n```vim\n\" 打开 terminal，水平分屏\"\n:terminal\n:term\n:ter\n\n\" 打开 terminal，垂直分屏\"\n:vertical terminal\n:vert ter\n```\n\n关闭 terminal 可以直接输入 `exit` 然后回车，也可以直接使用 `<CTRL-D>`，我更喜欢使用后者。\n\n打开 terminal 后，可以使用 `CTRL-W` 前缀键来进行窗口操作，正常使用 `<CTRL-W>n` 打开窗口后，怎么操作，terminal 就可以怎么操作，比如在垂直打开 terminal 后，使用 `<CTRL-W>h` 和 `<CTRL-W>l` 可以将光标在两个窗口中切换\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/vim-shell9.gif)\n\n打开 terminal 后，左下角显示的 `TERMINAL` 字样，此时我们无法直接对该窗口下的内容进行保存操作，因为它处于 `buftype` 下，我们可以使用另存为的方式将执行结果保存起来，比如 `<CTRL-W>:w newfile`，不过这时候有个问题，它会将 shell 环境下所有的显示内容都保存到文件中，包括你的输入命令和一些无关的显示文字。\n\n这时候我们可以在打开 terminal 时，在命令后面跟上想要使用的 shell 命令，这时会将执行结果保存在缓存文件中并在 terminal 中打开。\n\n```vim\n:vert ter ls -l\n```\n\n该窗口仍然是缓存状态，所以不能直接保存，使用 `:w newfile` 另存为新文件即可，此时窗口左下角显示的是 `NORMAL`，我们不能再用 `<CTRL-D>` 关闭窗口了，只能使用 `:q` 来关闭。\n\n![3](https://raw.githubusercontent.com/wxnacy/image/master/blog/vim-shell10.gif)\n\n我介绍的三种方式都各有应用场景，综合来说 `:terminal` 是我在没有 tmux 情况的首选。\n\n以上只是很简单的使用，也是比较常用的，它在 Vim 中是个大栏目，很多复杂的编辑器操作都可以通过它来完成，你可以阅读文档 `:h terminal` 来了解这些\n\n不管你用了 Vim 多久，你总是会发现更多你不了解的功能，又学到了新东西，开心😊\n\n- [terminal.txt](https://vimhelp.org/terminal.txt.html#terminal.txt)\n","source":"_posts/2019-05-17-vim-open-terminal.md","raw":"---\ntitle: Vim 执行 Shell 命令（3）\ndate: 2019-05-17 17:40:56\ntags: [vim]\n---\n\n上个月写了两篇 Vim 中使用 Shell 的文章，[Vim 执行 Shell 命令（1）](/2019/04/15/vim-run-shell/) 和 [Vim 执行 Shell 命令（2）](/2019/04/18/vim-in-shell/)，在 [typebrook](https://github.com/wxnacy/wxnacy.github.io/issues/1) 的提醒下发现还有 `:terminal` 可以实现，并且用了下发现还很好用。\n\n<!-- more -->\n<!-- toc -->\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/vim-shell8.gif)\n\n像预览中展示的这样，`:terminal` 可以切分出一个 terminal 来运行 shell 命令，这样的方式比前面的介绍的两种方式要更好，它类似 tmux 的多窗口操作，你也可以一边编写代码，一边执行命令。\n\n打开命令如下\n\n```vim\n\" 打开 terminal，水平分屏\"\n:terminal\n:term\n:ter\n\n\" 打开 terminal，垂直分屏\"\n:vertical terminal\n:vert ter\n```\n\n关闭 terminal 可以直接输入 `exit` 然后回车，也可以直接使用 `<CTRL-D>`，我更喜欢使用后者。\n\n打开 terminal 后，可以使用 `CTRL-W` 前缀键来进行窗口操作，正常使用 `<CTRL-W>n` 打开窗口后，怎么操作，terminal 就可以怎么操作，比如在垂直打开 terminal 后，使用 `<CTRL-W>h` 和 `<CTRL-W>l` 可以将光标在两个窗口中切换\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/vim-shell9.gif)\n\n打开 terminal 后，左下角显示的 `TERMINAL` 字样，此时我们无法直接对该窗口下的内容进行保存操作，因为它处于 `buftype` 下，我们可以使用另存为的方式将执行结果保存起来，比如 `<CTRL-W>:w newfile`，不过这时候有个问题，它会将 shell 环境下所有的显示内容都保存到文件中，包括你的输入命令和一些无关的显示文字。\n\n这时候我们可以在打开 terminal 时，在命令后面跟上想要使用的 shell 命令，这时会将执行结果保存在缓存文件中并在 terminal 中打开。\n\n```vim\n:vert ter ls -l\n```\n\n该窗口仍然是缓存状态，所以不能直接保存，使用 `:w newfile` 另存为新文件即可，此时窗口左下角显示的是 `NORMAL`，我们不能再用 `<CTRL-D>` 关闭窗口了，只能使用 `:q` 来关闭。\n\n![3](https://raw.githubusercontent.com/wxnacy/image/master/blog/vim-shell10.gif)\n\n我介绍的三种方式都各有应用场景，综合来说 `:terminal` 是我在没有 tmux 情况的首选。\n\n以上只是很简单的使用，也是比较常用的，它在 Vim 中是个大栏目，很多复杂的编辑器操作都可以通过它来完成，你可以阅读文档 `:h terminal` 来了解这些\n\n不管你用了 Vim 多久，你总是会发现更多你不了解的功能，又学到了新东西，开心😊\n\n- [terminal.txt](https://vimhelp.org/terminal.txt.html#terminal.txt)\n","slug":"vim-open-terminal","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2amj00uk5gqoujovfxb5"},{"title":"PySpider 安装的坑：PyCurl 出错","date":"2019-05-19T08:01:36.000Z","_content":"\n\n问题起源在于安装 PySpider 时需要依赖 PyCurl，过程中报错\n\n<!-- more -->\n<!-- toc -->\n\n```bash\nCollecting pycurl (from pyspider)\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/e8/e4/0dbb8735407189f00b33d84122b9be52c790c7c3b25286826f4e1bdb7bde/pycurl-7.43.0.2.tar.gz\n    ERROR: Complete output from command python setup.py egg_info:\n    ERROR: Using curl-config (libcurl 7.54.0)\n    Traceback (most recent call last):\n      File \"<string>\", line 1, in <module>\n      File \"/private/var/folders/kz/8syfctw919zdt3shr9w5j8v00000gn/T/pip-install-h_pgkvxp/pycurl/setup.py\", line 913, in <module>\n        ext = get_extension(sys.argv, split_extension_source=split_extension_source)\n      File \"/private/var/folders/kz/8syfctw919zdt3shr9w5j8v00000gn/T/pip-install-h_pgkvxp/pycurl/setup.py\", line 582, in get_extension\n        ext_config = ExtensionConfiguration(argv)\n      File \"/private/var/folders/kz/8syfctw919zdt3shr9w5j8v00000gn/T/pip-install-h_pgkvxp/pycurl/setup.py\", line 99, in __init__\n        self.configure()\n      File \"/private/var/folders/kz/8syfctw919zdt3shr9w5j8v00000gn/T/pip-install-h_pgkvxp/pycurl/setup.py\", line 316, in configure_unix\n        specify the SSL backend manually.''')\n    __main__.ConfigurationError: Curl is configured to use SSL, but we have not been able to determine which SSL backend it is using. Please see PycURL documentation for how to specify the SSL backend manually.\n    ----------------------------------------\nERROR: Command \"python setup.py egg_info\" failed with error code 1 in /private/var/folders/kz/8syfctw919zdt3shr9w5j8v00000gn/T/pip-install-h_pgkvxp/pycurl/\n```\n\n出错内容 `Curl is configured to use SSL, but we have not been able to determine which SSL backend it is using. Please see PycURL documentation for how to specify the SSL backend manually.`\n\n原因在于正确配置配置 SSL，[官方文档](http://pycurl.io/docs/latest/install.html#easy-install-pip)中给出了方式\n\n```bash\nexport PYCURL_SSL_LIBRARY=[openssl|gnutls|nss]\n```\n\nopenssl 是比较常用的\n\n```bash\nexport PYCURL_SSL_LIBRARY=openssl\n```\n\n如果你的 `.bash_profile` 文件中没有配置 `LDFLAGS` 和 `CPPFLAGS`，那需要在当前环境中进行激活。\n\n```bash\n$ export CFLAGS=\"-I$(brew --prefix openssl)/include\"\n$ export LDFLAGS=\"-L$(brew --prefix openssl)/lib\"\n```\n\n`$(brew --prefix openssl)` 是为了获取 openssl 的安装目录，这是在使用 HomeBrew 安装的前提下，如果不是的话可以使用 `find` 命令进行查找\n\n```bash\n$ sudo find /usr -iname ssl.h\n```\n\n- [Curl is configured to use SSL, but we have not been able to determine which SSL backend it is using](https://stackoverflow.com/questions/51019622/curl-is-configured-to-use-ssl-but-we-have-not-been-able-to-determine-which-ssl)\n- [Mac下安装pycurl填坑记录](https://www.jianshu.com/p/61fd0c16aef4)\n","source":"_posts/2019-05-19-install-pycurl-error.md","raw":"---\ntitle: PySpider 安装的坑：PyCurl 出错\ntags:\n  - python\ndate: 2019-05-19 08:01:36\n---\n\n\n问题起源在于安装 PySpider 时需要依赖 PyCurl，过程中报错\n\n<!-- more -->\n<!-- toc -->\n\n```bash\nCollecting pycurl (from pyspider)\n  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/e8/e4/0dbb8735407189f00b33d84122b9be52c790c7c3b25286826f4e1bdb7bde/pycurl-7.43.0.2.tar.gz\n    ERROR: Complete output from command python setup.py egg_info:\n    ERROR: Using curl-config (libcurl 7.54.0)\n    Traceback (most recent call last):\n      File \"<string>\", line 1, in <module>\n      File \"/private/var/folders/kz/8syfctw919zdt3shr9w5j8v00000gn/T/pip-install-h_pgkvxp/pycurl/setup.py\", line 913, in <module>\n        ext = get_extension(sys.argv, split_extension_source=split_extension_source)\n      File \"/private/var/folders/kz/8syfctw919zdt3shr9w5j8v00000gn/T/pip-install-h_pgkvxp/pycurl/setup.py\", line 582, in get_extension\n        ext_config = ExtensionConfiguration(argv)\n      File \"/private/var/folders/kz/8syfctw919zdt3shr9w5j8v00000gn/T/pip-install-h_pgkvxp/pycurl/setup.py\", line 99, in __init__\n        self.configure()\n      File \"/private/var/folders/kz/8syfctw919zdt3shr9w5j8v00000gn/T/pip-install-h_pgkvxp/pycurl/setup.py\", line 316, in configure_unix\n        specify the SSL backend manually.''')\n    __main__.ConfigurationError: Curl is configured to use SSL, but we have not been able to determine which SSL backend it is using. Please see PycURL documentation for how to specify the SSL backend manually.\n    ----------------------------------------\nERROR: Command \"python setup.py egg_info\" failed with error code 1 in /private/var/folders/kz/8syfctw919zdt3shr9w5j8v00000gn/T/pip-install-h_pgkvxp/pycurl/\n```\n\n出错内容 `Curl is configured to use SSL, but we have not been able to determine which SSL backend it is using. Please see PycURL documentation for how to specify the SSL backend manually.`\n\n原因在于正确配置配置 SSL，[官方文档](http://pycurl.io/docs/latest/install.html#easy-install-pip)中给出了方式\n\n```bash\nexport PYCURL_SSL_LIBRARY=[openssl|gnutls|nss]\n```\n\nopenssl 是比较常用的\n\n```bash\nexport PYCURL_SSL_LIBRARY=openssl\n```\n\n如果你的 `.bash_profile` 文件中没有配置 `LDFLAGS` 和 `CPPFLAGS`，那需要在当前环境中进行激活。\n\n```bash\n$ export CFLAGS=\"-I$(brew --prefix openssl)/include\"\n$ export LDFLAGS=\"-L$(brew --prefix openssl)/lib\"\n```\n\n`$(brew --prefix openssl)` 是为了获取 openssl 的安装目录，这是在使用 HomeBrew 安装的前提下，如果不是的话可以使用 `find` 命令进行查找\n\n```bash\n$ sudo find /usr -iname ssl.h\n```\n\n- [Curl is configured to use SSL, but we have not been able to determine which SSL backend it is using](https://stackoverflow.com/questions/51019622/curl-is-configured-to-use-ssl-but-we-have-not-been-able-to-determine-which-ssl)\n- [Mac下安装pycurl填坑记录](https://www.jianshu.com/p/61fd0c16aef4)\n","slug":"install-pycurl-error","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2amk00um5gqocu1xb3xl"},{"title":"Linux time 命令统计脚本耗时","date":"2019-04-29T12:10:22.000Z","_content":"\n\n在 Linux 中 time 命令可以统计执行脚本的耗时。\n\n<!-- more -->\n<!-- toc -->\n\n我们以 [wc](https://wxnacy.com/2019/02/01/linux-wc/) 命令为例子，统计下计算文件行数时的耗时情况\n\n```bash\n$ wc -l tmd-error.log\n655572 tmd-error.log\n```\n\n只需要在命令前加上 `time` 即可\n\n**bash环境下**\n\n```bash\nbash-3.2$ time wc -l tmd-error.log\n  655572 tmd-error.log\n\nreal    0m0.047s\nuser    0m0.036s\nsys     0m0.011s\n```\n\n得到的结果有三个时间，`real` 为真实耗时，而 `user` 和 `sys` 为用户环境和系统的各自耗时。\n\n**zsh环境下**\n\n```bash\n> $ time wc -l tmd-error.log\n  655572 tmd-error.log\nwc -l tmd-error.log  0.04s user 0.01s system 97% cpu 0.047 total\n```\n\n`zsh` 环境的输出结果不太易读，只需要看最后的 `total` 值即可\n\n**fish环境下**\n\n```bash\nwxnacy@wxnacydeMacBook-Pro ~/P/t/log> time wc -l tmd-error.log\n  655572 tmd-error.log\n        0.04 real         0.03 user         0.01 sys\n```\n\n说实话还是 `fish` 环境的看着最舒服，要不是它不兼容 `bash` 脚本，我感觉它早就制霸 shell 届了，哼。\n","source":"_posts/2019-04-29-linux-time.md","raw":"---\ntitle: Linux time 命令统计脚本耗时\ntags:\n  - linux\ndate: 2019-04-29 12:10:22\n---\n\n\n在 Linux 中 time 命令可以统计执行脚本的耗时。\n\n<!-- more -->\n<!-- toc -->\n\n我们以 [wc](https://wxnacy.com/2019/02/01/linux-wc/) 命令为例子，统计下计算文件行数时的耗时情况\n\n```bash\n$ wc -l tmd-error.log\n655572 tmd-error.log\n```\n\n只需要在命令前加上 `time` 即可\n\n**bash环境下**\n\n```bash\nbash-3.2$ time wc -l tmd-error.log\n  655572 tmd-error.log\n\nreal    0m0.047s\nuser    0m0.036s\nsys     0m0.011s\n```\n\n得到的结果有三个时间，`real` 为真实耗时，而 `user` 和 `sys` 为用户环境和系统的各自耗时。\n\n**zsh环境下**\n\n```bash\n> $ time wc -l tmd-error.log\n  655572 tmd-error.log\nwc -l tmd-error.log  0.04s user 0.01s system 97% cpu 0.047 total\n```\n\n`zsh` 环境的输出结果不太易读，只需要看最后的 `total` 值即可\n\n**fish环境下**\n\n```bash\nwxnacy@wxnacydeMacBook-Pro ~/P/t/log> time wc -l tmd-error.log\n  655572 tmd-error.log\n        0.04 real         0.03 user         0.01 sys\n```\n\n说实话还是 `fish` 环境的看着最舒服，要不是它不兼容 `bash` 脚本，我感觉它早就制霸 shell 届了，哼。\n","slug":"linux-time","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aml00uo5gqodq6gdetn"},{"title":"PySpider 安装的坑：不支持 3.7 版本","date":"2019-05-20T18:13:05.000Z","_content":"\n\nPySpider 安装还真是各种坑啊，所以感觉不能单独记录，收成一个系列吧。\n\n<!-- more -->\n<!-- toc -->\n\n这次的问题是不兼容 3.7 版本，安装虽然成功，但是运行及报错。\n\n```bash\nTraceback (most recent call last):\n  File \"/Users/wxnacy/.pyenv/versions/3.7.2/bin/pyspider\", line 11, in <module>\n    load_entry_point('pyspider==0.3.10', 'console_scripts', 'pyspider')()\n  File \"/Users/wxnacy/.pyenv/versions/3.7.2/Python.framework/Versions/3.7/lib/python3.7/site-packages/pkg_resources/__init__.py\", line 487, in load_entry_point\n    return get_distribution(dist).load_entry_point(group, name)\n  File \"/Users/wxnacy/.pyenv/versions/3.7.2/Python.framework/Versions/3.7/lib/python3.7/site-packages/pkg_resources/__init__.py\", line 2728, in load_entry_point\n    return ep.load()\n  File \"/Users/wxnacy/.pyenv/versions/3.7.2/Python.framework/Versions/3.7/lib/python3.7/site-packages/pkg_resources/__init__.py\", line 2346, in load\n    return self.resolve()\n  File \"/Users/wxnacy/.pyenv/versions/3.7.2/Python.framework/Versions/3.7/lib/python3.7/site-packages/pkg_resources/__init__.py\", line 2352, in resolve\n    module = __import__(self.module_name, fromlist=['__name__'], level=0)\n  File \"/Users/wxnacy/.pyenv/versions/3.7.2/Python.framework/Versions/3.7/lib/python3.7/site-packages/pyspider/run.py\", line 231\n    async=True, get_object=False, no_input=False):\n        ^\nSyntaxError: invalid syntax\n```\n\n一看到这个错误心里就有一种不祥的预感，妥妥的代码出错了啊，咋它就这么多事呢？\n\n这个错误的原因在于 `3.7` 版本以上已经把 `async` 和 `await` 列为关键字，所以在用 `async` 当参数名自然会报错，看了下源码，已经将 `async` 改为了 `async_mode`，但是最新发行版本 `0.3.10` 版本已经一年多了，还没有发新版是怎么个意思，作者也觉得 `3.7` 版本兼容还很大呗，好吧，人家也没说过支持 `3.7`，你想用就自己折腾呗。\n\n这时候有两种方式，第一下载最近版本的代码，然后改个版本号自己编译\n\n```bash\n$ git clone https://github.com/binux/pyspider\n$ cd pyspider\n$ vim pyspider/__init__.py\n__version__ = '0.3.11'\n$ pip install .\n```\n\n或者将当前版本的代码修改一下，替换掉 `async`\n\n```bash\n$ vim /Users/wxnacy/.pyenv/versions/3.7.2/Python.framework/Versions/3.7/lib/python3.7/site-packages/pyspider/run.py\n$ vim /Users/wxnacy/.pyenv/versions/3.7.2/Python.framework/Versions/3.7/lib/python3.7/site-packages/pyspider/fetcher/tornado_fetcher.py\n$ vim /Users/wxnacy/.pyenv/versions/3.7.2/Python.framework/Versions/3.7/lib/python3.7/site-packages/pyspider/webui/app.py\n```\n\n前面那一大坨是本地仓库的位置，打开文件后复制下面的文字然后回车即可。\n\n```bash\n:%s/async/async_mode/g\n```\n\n然后再次运行即可。\n","source":"_posts/2019-05-20-pyspider-install-error-with-3-7.md","raw":"---\ntitle: PySpider 安装的坑：不支持 3.7 版本\ntags:\n  - python\ndate: 2019-05-20 18:13:05\n---\n\n\nPySpider 安装还真是各种坑啊，所以感觉不能单独记录，收成一个系列吧。\n\n<!-- more -->\n<!-- toc -->\n\n这次的问题是不兼容 3.7 版本，安装虽然成功，但是运行及报错。\n\n```bash\nTraceback (most recent call last):\n  File \"/Users/wxnacy/.pyenv/versions/3.7.2/bin/pyspider\", line 11, in <module>\n    load_entry_point('pyspider==0.3.10', 'console_scripts', 'pyspider')()\n  File \"/Users/wxnacy/.pyenv/versions/3.7.2/Python.framework/Versions/3.7/lib/python3.7/site-packages/pkg_resources/__init__.py\", line 487, in load_entry_point\n    return get_distribution(dist).load_entry_point(group, name)\n  File \"/Users/wxnacy/.pyenv/versions/3.7.2/Python.framework/Versions/3.7/lib/python3.7/site-packages/pkg_resources/__init__.py\", line 2728, in load_entry_point\n    return ep.load()\n  File \"/Users/wxnacy/.pyenv/versions/3.7.2/Python.framework/Versions/3.7/lib/python3.7/site-packages/pkg_resources/__init__.py\", line 2346, in load\n    return self.resolve()\n  File \"/Users/wxnacy/.pyenv/versions/3.7.2/Python.framework/Versions/3.7/lib/python3.7/site-packages/pkg_resources/__init__.py\", line 2352, in resolve\n    module = __import__(self.module_name, fromlist=['__name__'], level=0)\n  File \"/Users/wxnacy/.pyenv/versions/3.7.2/Python.framework/Versions/3.7/lib/python3.7/site-packages/pyspider/run.py\", line 231\n    async=True, get_object=False, no_input=False):\n        ^\nSyntaxError: invalid syntax\n```\n\n一看到这个错误心里就有一种不祥的预感，妥妥的代码出错了啊，咋它就这么多事呢？\n\n这个错误的原因在于 `3.7` 版本以上已经把 `async` 和 `await` 列为关键字，所以在用 `async` 当参数名自然会报错，看了下源码，已经将 `async` 改为了 `async_mode`，但是最新发行版本 `0.3.10` 版本已经一年多了，还没有发新版是怎么个意思，作者也觉得 `3.7` 版本兼容还很大呗，好吧，人家也没说过支持 `3.7`，你想用就自己折腾呗。\n\n这时候有两种方式，第一下载最近版本的代码，然后改个版本号自己编译\n\n```bash\n$ git clone https://github.com/binux/pyspider\n$ cd pyspider\n$ vim pyspider/__init__.py\n__version__ = '0.3.11'\n$ pip install .\n```\n\n或者将当前版本的代码修改一下，替换掉 `async`\n\n```bash\n$ vim /Users/wxnacy/.pyenv/versions/3.7.2/Python.framework/Versions/3.7/lib/python3.7/site-packages/pyspider/run.py\n$ vim /Users/wxnacy/.pyenv/versions/3.7.2/Python.framework/Versions/3.7/lib/python3.7/site-packages/pyspider/fetcher/tornado_fetcher.py\n$ vim /Users/wxnacy/.pyenv/versions/3.7.2/Python.framework/Versions/3.7/lib/python3.7/site-packages/pyspider/webui/app.py\n```\n\n前面那一大坨是本地仓库的位置，打开文件后复制下面的文字然后回车即可。\n\n```bash\n:%s/async/async_mode/g\n```\n\n然后再次运行即可。\n","slug":"pyspider-install-error-with-3-7","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2amn00uq5gqoyp7xg2ju"},{"title":"Python 使用 memory_profiler 分析程序内存占用情况","date":"2019-05-05T17:18:09.000Z","_content":"\nPython 中可以使用 memory_profiler 包来分析程序的内存占用情况\n\n<!-- more -->\n<!-- toc -->\n\nmemory_profiler 可以分析每行代码的内存使用情况，使用起来非常简单。\n\n## 安装\n\n```bash\n$ pip install memory_profiler\n```\n\n## 使用\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfrom memory_profiler import profile\n\n@profile\ndef test1():\n    c = []\n    a = [1, 2, 3] * (2 ** 20)\n    b = [1] * (2 ** 20)\n    c.extend(a)\n    c.extend(b)\n    del b\n    del c\n\nif __name__ == \"__main__\":\n    test1()\n```\n\n```bash\n$ python -m memory_profiler memory_profiler\n```\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/pmf1.png)\n\n结果如图，每一步的内存变化情况都很清楚\n\n- `Mem usage` 为当前总内存\n- `Increment` 为增加的内存\n\n总结起来使用非常时间\n\n- 方法前加上 `@profile` 主键\n- 使用 `python -m memory_profiler` 来运行，不过直接用 `python` 运行也可以\n\n通过上面这段代码我们可以发现，`del` 语句只是将变量删除，并不能减少内存的消耗。\n\n## 参数使用\n\n- `precision` 显示小数点后的位数\n\n默认显示的内存单位为 `MiB`，小数点后显示一位，如果某行代码占用内存比较小，就可能显示不出来，此时可以通过调整小数点后的位数实现。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfrom memory_profiler import profile\n\n\n@profile(precision=4)\ndef test3():\n    a = [1, 2] * (2 ** 10)\n\nif __name__ == \"__main__\":\n    test3()\n```\n\n![3](https://raw.githubusercontent.com/wxnacy/image/master/blog/pmf3.png)\n\n- `stream` 将结果输出到流中\n\n每次运行都要打印内存情况，势必会影响程序输出效果，我们可以将结果通过流输出到文件中\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfrom memory_profiler import profile\n\n@profile(precision=4, @profile(precision=4, stream=open('/tmp/memory_profiler.log','w+')))\ndef test3():\n    a = [1, 2] * (2 ** 10)\n\nif __name__ == \"__main__\":\n    test3()\n```\n\n![4](https://raw.githubusercontent.com/wxnacy/image/master/blog/pmf4.png)\n\n## mprof 命令\n\nmemory_profiler 本身也提供了命令行 `mprof`\n\n```bash\nUsage: mprof <command> <options> <arguments>\n\nAvailable commands:\n\n    run      运行给定的命令或 python 文件\n    rm       删除 mprof 生成的给定文件\n    clean    清除当前目录中 mprof 创建的文件\n    list     显示带索引的现有配置文件\n    plot     可以将 mprof run 的结果生成图片\n\nType mprof <command> --help for usage help on a specific command.\nFor example, mprof plot --help will list all plotting options.\n```\n\n重点说一下 `plot` 命令，`run` 命令可以生成 `.dat` 文件，`plot` 可以将该文件生成图片，不过需要 `matplotlib` 包的加持。\n\n```bash\n$ pip install matplotlib\n$ mprof run memory_profiler_demo.py\n$ mprof list\n0 mprofile_20190505182200.dat 18:22:00 05/05/2019\n$ mprof plot mprofile_20190505182200.dat\n```\n\n结果如下\n\n![5](https://raw.githubusercontent.com/wxnacy/image/master/blog/pmf5_1260.png)\n","source":"_posts/2019-05-05-python-memory-profiler.md","raw":"---\ntitle: Python 使用 memory_profiler 分析程序内存占用情况\ndate: 2019-05-05 17:18:09\ntags: [python]\n---\n\nPython 中可以使用 memory_profiler 包来分析程序的内存占用情况\n\n<!-- more -->\n<!-- toc -->\n\nmemory_profiler 可以分析每行代码的内存使用情况，使用起来非常简单。\n\n## 安装\n\n```bash\n$ pip install memory_profiler\n```\n\n## 使用\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfrom memory_profiler import profile\n\n@profile\ndef test1():\n    c = []\n    a = [1, 2, 3] * (2 ** 20)\n    b = [1] * (2 ** 20)\n    c.extend(a)\n    c.extend(b)\n    del b\n    del c\n\nif __name__ == \"__main__\":\n    test1()\n```\n\n```bash\n$ python -m memory_profiler memory_profiler\n```\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/pmf1.png)\n\n结果如图，每一步的内存变化情况都很清楚\n\n- `Mem usage` 为当前总内存\n- `Increment` 为增加的内存\n\n总结起来使用非常时间\n\n- 方法前加上 `@profile` 主键\n- 使用 `python -m memory_profiler` 来运行，不过直接用 `python` 运行也可以\n\n通过上面这段代码我们可以发现，`del` 语句只是将变量删除，并不能减少内存的消耗。\n\n## 参数使用\n\n- `precision` 显示小数点后的位数\n\n默认显示的内存单位为 `MiB`，小数点后显示一位，如果某行代码占用内存比较小，就可能显示不出来，此时可以通过调整小数点后的位数实现。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfrom memory_profiler import profile\n\n\n@profile(precision=4)\ndef test3():\n    a = [1, 2] * (2 ** 10)\n\nif __name__ == \"__main__\":\n    test3()\n```\n\n![3](https://raw.githubusercontent.com/wxnacy/image/master/blog/pmf3.png)\n\n- `stream` 将结果输出到流中\n\n每次运行都要打印内存情况，势必会影响程序输出效果，我们可以将结果通过流输出到文件中\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfrom memory_profiler import profile\n\n@profile(precision=4, @profile(precision=4, stream=open('/tmp/memory_profiler.log','w+')))\ndef test3():\n    a = [1, 2] * (2 ** 10)\n\nif __name__ == \"__main__\":\n    test3()\n```\n\n![4](https://raw.githubusercontent.com/wxnacy/image/master/blog/pmf4.png)\n\n## mprof 命令\n\nmemory_profiler 本身也提供了命令行 `mprof`\n\n```bash\nUsage: mprof <command> <options> <arguments>\n\nAvailable commands:\n\n    run      运行给定的命令或 python 文件\n    rm       删除 mprof 生成的给定文件\n    clean    清除当前目录中 mprof 创建的文件\n    list     显示带索引的现有配置文件\n    plot     可以将 mprof run 的结果生成图片\n\nType mprof <command> --help for usage help on a specific command.\nFor example, mprof plot --help will list all plotting options.\n```\n\n重点说一下 `plot` 命令，`run` 命令可以生成 `.dat` 文件，`plot` 可以将该文件生成图片，不过需要 `matplotlib` 包的加持。\n\n```bash\n$ pip install matplotlib\n$ mprof run memory_profiler_demo.py\n$ mprof list\n0 mprofile_20190505182200.dat 18:22:00 05/05/2019\n$ mprof plot mprofile_20190505182200.dat\n```\n\n结果如下\n\n![5](https://raw.githubusercontent.com/wxnacy/image/master/blog/pmf5_1260.png)\n","slug":"python-memory-profiler","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2amo00us5gqo6oux4lux"},{"title":"Javascript 跳转其他页面","date":"2019-05-25T09:49:45.000Z","_content":"\n几种常见的页面跳转方式\n\n<!-- more -->\n<!-- toc -->\n\n```java\n<script language=\"javascript\" type=\"text/javascript\">\n       window.location.href=\"login.jsp?backurl=\"+window.location.href;\n</script>\n```\n\n```java\n<script language=\"javascript\">\n    alert(\"返回\");\n    window.history.back(-1);\n</script>\n```\n\n```java\n<script language=\"javascript\">\n    window.navigate(\"top.jsp\");\n</script>\n```\n\n```java\n<script language=\"JavaScript\">\n    self.location=’top.htm’;\n</script>\n```\n\n```java\n<script language=\"javascript\">\n    alert(\"非法访问！\");\n    top.location=’xx.jsp’;\n</script>\n```\n","source":"_posts/2019-05-25-js-href.md","raw":"---\ntitle: Javascript 跳转其他页面\ndate: 2019-05-25 09:49:45\ntags: [javascript]\n---\n\n几种常见的页面跳转方式\n\n<!-- more -->\n<!-- toc -->\n\n```java\n<script language=\"javascript\" type=\"text/javascript\">\n       window.location.href=\"login.jsp?backurl=\"+window.location.href;\n</script>\n```\n\n```java\n<script language=\"javascript\">\n    alert(\"返回\");\n    window.history.back(-1);\n</script>\n```\n\n```java\n<script language=\"javascript\">\n    window.navigate(\"top.jsp\");\n</script>\n```\n\n```java\n<script language=\"JavaScript\">\n    self.location=’top.htm’;\n</script>\n```\n\n```java\n<script language=\"javascript\">\n    alert(\"非法访问！\");\n    top.location=’xx.jsp’;\n</script>\n```\n","slug":"js-href","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2amp00uu5gqoqfghzzek"},{"title":"Python list 对象一些方法的时间复杂度","date":"2019-05-27T17:07:51.000Z","_content":"\n列举下 Python list 对象常用方法的时间复杂度\n\n<!-- more -->\n<!-- toc -->\n\n方法                 | 时间复杂度\n----                 | ---------\nlist[i]              | O(1)\nlist[i] = 1          | O(1)\nlist[i:j]            | O(k)  k = j - i\nlist[i:k] = list()   | O(n + k)\nlist.index(item)     | O(n)\nlist.append(item)    | O(1)\nlist.insert(i, item) | O(n)\nlist.pop()           | O(1)\nlist.pop(i)          | O(n) 假如推出的是第一个元素，那么数组所有的元素都要重新计算坐标\ndel list[i]          | O(n)\nitem in list         | O(n)\nlist.reverse()       | O(n)\nlist.sort()          | O(n logn)\n","source":"_posts/2019-05-27-python-list-time-complexity.md","raw":"---\ntitle: Python list 对象一些方法的时间复杂度\ndate: 2019-05-27 17:07:51\ntags: [python]\n---\n\n列举下 Python list 对象常用方法的时间复杂度\n\n<!-- more -->\n<!-- toc -->\n\n方法                 | 时间复杂度\n----                 | ---------\nlist[i]              | O(1)\nlist[i] = 1          | O(1)\nlist[i:j]            | O(k)  k = j - i\nlist[i:k] = list()   | O(n + k)\nlist.index(item)     | O(n)\nlist.append(item)    | O(1)\nlist.insert(i, item) | O(n)\nlist.pop()           | O(1)\nlist.pop(i)          | O(n) 假如推出的是第一个元素，那么数组所有的元素都要重新计算坐标\ndel list[i]          | O(n)\nitem in list         | O(n)\nlist.reverse()       | O(n)\nlist.sort()          | O(n logn)\n","slug":"python-list-time-complexity","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2amr00uw5gqo2k5be5xk"},{"title":"异或运算及应用","date":"2019-05-28T14:04:30.000Z","_content":"\n> 异或，英文为exclusive OR，缩写成xor，异或是一个数学运算符。它应用于逻辑运算\n\n<!-- more -->\n<!-- toc -->\n\n异或也叫半加运算，其运算法则相当于不带进位的二进制加法，它的运算规则为：\n\n```\n二进制的比较位相同则结果返回 0，不同则为 1\n```\n\n运算符有几种表示方式\n\n名称    |   符号\n---     |   ---\n数学符号|   ⊕\n英文简称|   xor\n程序符号|   ^\n\n**运算推导**\n\n```\n5 ^ 8 = 2\n```\n\n单看这个表达式比较费解，我们转成二进制来看下\n\n-       |   相同|不同|相同\n---     |   -|-|-\n5       |   1|0|1\n8       |   1|1|1\n5 ^ 8   |   0|1|0\n2       |   0|1|0\n\n异或在开发中的应用可以参看一道算法题 [只出现一次的数字](/leetcode/problems/136-single-number/)\n","source":"_posts/2019-05-28-what-is-xor.md","raw":"---\ntitle: 异或运算及应用\ndate: 2019-05-28 14:04:30\ntags: [算法]\n---\n\n> 异或，英文为exclusive OR，缩写成xor，异或是一个数学运算符。它应用于逻辑运算\n\n<!-- more -->\n<!-- toc -->\n\n异或也叫半加运算，其运算法则相当于不带进位的二进制加法，它的运算规则为：\n\n```\n二进制的比较位相同则结果返回 0，不同则为 1\n```\n\n运算符有几种表示方式\n\n名称    |   符号\n---     |   ---\n数学符号|   ⊕\n英文简称|   xor\n程序符号|   ^\n\n**运算推导**\n\n```\n5 ^ 8 = 2\n```\n\n单看这个表达式比较费解，我们转成二进制来看下\n\n-       |   相同|不同|相同\n---     |   -|-|-\n5       |   1|0|1\n8       |   1|1|1\n5 ^ 8   |   0|1|0\n2       |   0|1|0\n\n异或在开发中的应用可以参看一道算法题 [只出现一次的数字](/leetcode/problems/136-single-number/)\n","slug":"what-is-xor","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ams00uy5gqoxczc1c4p"},{"title":"Git blame 查看代码是谁写的","date":"2019-05-21T18:30:27.000Z","_content":"\n\n`git blame` 命令可以查看每行代码的提交详情，包括提交人、时间等信息，成熟的编辑器如 Sublime、Jetbrains 等都集成了这个功能，使用起来非常简单，今天我们来关注下这个命令本身，毕竟在服务器上我们可不能安装这些编辑器。\n\n<!-- more -->\n<!-- toc -->\n\n```bash\n$ git blame <filename>\n```\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/git-blame1_874.png)\n\n得到的结果，每列分别为\n\n```bash\n提交 sha1   用户名 提交时间                    行数    代码\n...\n39a22489    (wxnacy 2018-07-26 19:01:55 +0800  6)      def filter(source: dict, *args, **kwargs):\n...\n```\n\n这是最简单的语法，我们查看文件的每一行代码的最后提交详情，不过这通常不是我们的目的，一般只需要看某一行或某个范围行，这时可以使用 `-L` 参数。\n\n```bash\n$ git blame <filename> -L <start>[,<end>]\n```\n\n**查看第 10 行**\n\n```bash\n$ git blame <filename> -L 10,10\n```\n\n**查看第 10 行及以后**\n\n```bash\n$ git blame <filename> -L 10\n```\n\n**查看第 10 到 20 行**\n\n```bash\n$ git blame <filename> -L 10,20\n```\n\n`end` 也可以加上正负符号，比如\n\n**查看 10 行以后 5 行的数据**\n\n```bash\n$ git blame <filename> -L 10,+5\n```\n\n**查看 10 行以前 5 行的数据**\n\n```bash\n$ git blame <filename> -L 10,-5\n```\n\n`start` 和 `end` 又不止于数字，它还可以是个正则表达式，如果 `start` 为正则表达式，则会匹配到 `end` 行，如果 `end` 为正则表达式，则从 `start` 行开始匹配，到匹配行截止，如果 `start` 或者 `end` 其中之一有值，则从匹配行开始显示全部内容。\n\n**查看正则匹配到 20 行**\n\n```bash\n$ git blame <filename> -L /filter/,20\n```\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/git-blame2_872.png)\n\n**查看 3 行到正则匹配行**\n\n```bash\n$ git blame <filename> -L 3,/filter/\n```\n\n![3](https://raw.githubusercontent.com/wxnacy/image/master/blog/git-blame3.png)\n\n`-L` 参数的功能还不止这些，有个更智能的方式是直接通过函数名来查看一个区域块的代码\n\n```bash\n$ git blame <filename> -L:<func_name>\n```\n\n这是很方便的能力，不过只能识别文件最外层的方法名和类名\n\n```bash\n$ git blame <filename> -L:filter\n```\n\n![4](https://raw.githubusercontent.com/wxnacy/image/master/blog/git-blame4.png)\n\n完整参数列表\n\n```bash\nusage: git blame [<options>] [<rev-opts>] [<rev>] [--] <file>\n\n    <rev-opts> are documented in git-rev-list(1)\n\n    --incremental         Show blame entries as we find them, incrementally\n    -b                    Show blank SHA-1 for boundary commits (Default: off)\n    --root                Do not treat root commits as boundaries (Default: off)\n    --show-stats          Show work cost statistics\n    --progress            Force progress reporting\n    --score-debug         Show output score for blame entries\n    -f, --show-name       Show original filename (Default: auto)\n    -n, --show-number     Show original linenumber (Default: off)\n    -p, --porcelain       Show in a format designed for machine consumption\n    --line-porcelain      Show porcelain format with per-line commit information\n    -c                    Use the same output mode as git-annotate (Default: off)\n    -t                    提交时间显示为时间戳，默认关闭\n    -l                    显示完整的 commit sha1，默认关闭\n    -s                    Suppress author name and timestamp (Default: off)\n    -e, --show-email      显示提交用户的邮箱，默认关闭\n    -w                    Ignore whitespace differences\n    --indent-heuristic    Use an experimental heuristic to improve diffs\n    --minimal             Spend extra cycles to find better match\n    -S <file>             Use revisions from <file> instead of calling git-rev-list\n    --contents <file>     Use <file>'s contents as the final image\n    -C[<score>]           Find line copies within and across files\n    -M[<score>]           Find line movements within and across files\n    -L <n,m>              Process only line range n,m, counting from 1\n    --abbrev[=<n>]        use <n> digits to display SHA-1s\n```\n\n- [git-blame](https://git-scm.com/docs/git-blame)\n","source":"_posts/2019-05-21-git-blame.md","raw":"---\ntitle: Git blame 查看代码是谁写的\ntags:\n  - git\ndate: 2019-05-21 18:30:27\n---\n\n\n`git blame` 命令可以查看每行代码的提交详情，包括提交人、时间等信息，成熟的编辑器如 Sublime、Jetbrains 等都集成了这个功能，使用起来非常简单，今天我们来关注下这个命令本身，毕竟在服务器上我们可不能安装这些编辑器。\n\n<!-- more -->\n<!-- toc -->\n\n```bash\n$ git blame <filename>\n```\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/git-blame1_874.png)\n\n得到的结果，每列分别为\n\n```bash\n提交 sha1   用户名 提交时间                    行数    代码\n...\n39a22489    (wxnacy 2018-07-26 19:01:55 +0800  6)      def filter(source: dict, *args, **kwargs):\n...\n```\n\n这是最简单的语法，我们查看文件的每一行代码的最后提交详情，不过这通常不是我们的目的，一般只需要看某一行或某个范围行，这时可以使用 `-L` 参数。\n\n```bash\n$ git blame <filename> -L <start>[,<end>]\n```\n\n**查看第 10 行**\n\n```bash\n$ git blame <filename> -L 10,10\n```\n\n**查看第 10 行及以后**\n\n```bash\n$ git blame <filename> -L 10\n```\n\n**查看第 10 到 20 行**\n\n```bash\n$ git blame <filename> -L 10,20\n```\n\n`end` 也可以加上正负符号，比如\n\n**查看 10 行以后 5 行的数据**\n\n```bash\n$ git blame <filename> -L 10,+5\n```\n\n**查看 10 行以前 5 行的数据**\n\n```bash\n$ git blame <filename> -L 10,-5\n```\n\n`start` 和 `end` 又不止于数字，它还可以是个正则表达式，如果 `start` 为正则表达式，则会匹配到 `end` 行，如果 `end` 为正则表达式，则从 `start` 行开始匹配，到匹配行截止，如果 `start` 或者 `end` 其中之一有值，则从匹配行开始显示全部内容。\n\n**查看正则匹配到 20 行**\n\n```bash\n$ git blame <filename> -L /filter/,20\n```\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/git-blame2_872.png)\n\n**查看 3 行到正则匹配行**\n\n```bash\n$ git blame <filename> -L 3,/filter/\n```\n\n![3](https://raw.githubusercontent.com/wxnacy/image/master/blog/git-blame3.png)\n\n`-L` 参数的功能还不止这些，有个更智能的方式是直接通过函数名来查看一个区域块的代码\n\n```bash\n$ git blame <filename> -L:<func_name>\n```\n\n这是很方便的能力，不过只能识别文件最外层的方法名和类名\n\n```bash\n$ git blame <filename> -L:filter\n```\n\n![4](https://raw.githubusercontent.com/wxnacy/image/master/blog/git-blame4.png)\n\n完整参数列表\n\n```bash\nusage: git blame [<options>] [<rev-opts>] [<rev>] [--] <file>\n\n    <rev-opts> are documented in git-rev-list(1)\n\n    --incremental         Show blame entries as we find them, incrementally\n    -b                    Show blank SHA-1 for boundary commits (Default: off)\n    --root                Do not treat root commits as boundaries (Default: off)\n    --show-stats          Show work cost statistics\n    --progress            Force progress reporting\n    --score-debug         Show output score for blame entries\n    -f, --show-name       Show original filename (Default: auto)\n    -n, --show-number     Show original linenumber (Default: off)\n    -p, --porcelain       Show in a format designed for machine consumption\n    --line-porcelain      Show porcelain format with per-line commit information\n    -c                    Use the same output mode as git-annotate (Default: off)\n    -t                    提交时间显示为时间戳，默认关闭\n    -l                    显示完整的 commit sha1，默认关闭\n    -s                    Suppress author name and timestamp (Default: off)\n    -e, --show-email      显示提交用户的邮箱，默认关闭\n    -w                    Ignore whitespace differences\n    --indent-heuristic    Use an experimental heuristic to improve diffs\n    --minimal             Spend extra cycles to find better match\n    -S <file>             Use revisions from <file> instead of calling git-rev-list\n    --contents <file>     Use <file>'s contents as the final image\n    -C[<score>]           Find line copies within and across files\n    -M[<score>]           Find line movements within and across files\n    -L <n,m>              Process only line range n,m, counting from 1\n    --abbrev[=<n>]        use <n> digits to display SHA-1s\n```\n\n- [git-blame](https://git-scm.com/docs/git-blame)\n","slug":"git-blame","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2amt00v05gqo3kf7rre2"},{"title":"重新学 Java 系列：数组","date":"2019-05-29T09:47:05.000Z","_content":"\n> 这个是一个系列阅读，关于为什么重新学习，我在文章 [重新学 Java 系列：新系列、新开始](/2018/12/29/java-renew-why/)(https://wxnacy.com/2018/12/29/java-renew-why/) 中有提到，这个系列是在有 Java 基础的情况下，重新学习讨论一下以前可能忽略掉，或者没理解的知识细节，我想要永远在学习的路上。\n\n<!-- more -->\n<!-- toc -->\n\n已经习惯了 Python 的列表对象，再回来看 Java 的数组和列表很是不适，这种不适已经上升到了生理反应，我为什么要重新学 Java？我是谁？我在哪？\n\nJava 中数组是用来存储***固定大小***的***同类型***元素。\n\n## 声明\n\n`int` 类型数组有两种声明方式 `int[] varName` 或者 `int varName[]`，一般建议使用第一种声明方式。后者来源于 `c/c++`，是为了让 `c/c++` 程序员快速理解 Java。\n\n## 定义\n\n有三种定义方式\n\n**静态初始化**\n\n```java\nint[] a = new int[]{0, 1, 2};\n```\n\n**静态初始化简化方式**\n\n```java\nint[] b = {0, 1, 2};\n```\n\n静态初始化不能指定元素个数，或者说初始化后元素个数已经固定了，不需要指定。\n\n**动态初始化**\n\n```java\nint[] c = new int[3];\nc[0] = 1\n```\n\n动态初始化后，数组每个元素会赋值当前类型的默认值，分别如下所以：\n\n类型                               | 默认值\n---                                | -----\n整数类型（byte、short、int、long） | 0\n浮点类型（float、double）          | 0.0\n字符类型（char）                   | '\\u0000'\n布尔类型（boolean）                | false\n引用类型（类、接口、数组）         | null\n\n## 遍历\n\n两种方式 `for` 和 `forEach`\n\n**for**\n\n```java\nfor(int i = 0; i < nums.length; i++){\n    System.out.println(nums[i]);\n}\n```\n\n**forEach**\n\n```java\nfor ( int n: nums ) {\n    System.out.println(n);\n}\n```\n\n## 方法\n\n数组本身不提供方法，只有一个变量 `length` 用来获取数组的大小。\n\n```java\nint n = nums.length\n```\n\n记得当年刚开始学习 Java 时，总是跟列表的 `size()` 方法搞混，不知道什么时候用 `length`，什么时候用 `size()`。现在看来只需要记住，数组的大小是不可变的，所以使用变量 `length` 即可获取数组大小。而列表是可变的，所以需要使用方法 `size()` 动态获取大小。\n\n`java.util.Arrays` 类提供了操作数组的方法，都是静态方法。\n\n方法|描述\n----|----\npublic static void sort(Object[] a)                     |   排序数组，升序\npublic static int binarySearch(Object[] a, Object key)  |   使用二分搜索来搜索给定元素，数组需要先排序，返回索引\npublic static boolean equals(Object[] a, Object[] a2)   |   比较数组是否相同，返回 boolean 类型\npublic static void fill(Object[] a, Object val)         |   给数组的所有元素指定某个值\n\n## 参考\n\n- [Java 数组](https://www.runoob.com/java/java-array.html)\n","source":"_posts/2019-05-29-java-array.md","raw":"---\ntitle: 重新学 Java 系列：数组\ndate: 2019-05-29 09:47:05\ntags: [java]\n---\n\n> 这个是一个系列阅读，关于为什么重新学习，我在文章 [重新学 Java 系列：新系列、新开始](/2018/12/29/java-renew-why/)(https://wxnacy.com/2018/12/29/java-renew-why/) 中有提到，这个系列是在有 Java 基础的情况下，重新学习讨论一下以前可能忽略掉，或者没理解的知识细节，我想要永远在学习的路上。\n\n<!-- more -->\n<!-- toc -->\n\n已经习惯了 Python 的列表对象，再回来看 Java 的数组和列表很是不适，这种不适已经上升到了生理反应，我为什么要重新学 Java？我是谁？我在哪？\n\nJava 中数组是用来存储***固定大小***的***同类型***元素。\n\n## 声明\n\n`int` 类型数组有两种声明方式 `int[] varName` 或者 `int varName[]`，一般建议使用第一种声明方式。后者来源于 `c/c++`，是为了让 `c/c++` 程序员快速理解 Java。\n\n## 定义\n\n有三种定义方式\n\n**静态初始化**\n\n```java\nint[] a = new int[]{0, 1, 2};\n```\n\n**静态初始化简化方式**\n\n```java\nint[] b = {0, 1, 2};\n```\n\n静态初始化不能指定元素个数，或者说初始化后元素个数已经固定了，不需要指定。\n\n**动态初始化**\n\n```java\nint[] c = new int[3];\nc[0] = 1\n```\n\n动态初始化后，数组每个元素会赋值当前类型的默认值，分别如下所以：\n\n类型                               | 默认值\n---                                | -----\n整数类型（byte、short、int、long） | 0\n浮点类型（float、double）          | 0.0\n字符类型（char）                   | '\\u0000'\n布尔类型（boolean）                | false\n引用类型（类、接口、数组）         | null\n\n## 遍历\n\n两种方式 `for` 和 `forEach`\n\n**for**\n\n```java\nfor(int i = 0; i < nums.length; i++){\n    System.out.println(nums[i]);\n}\n```\n\n**forEach**\n\n```java\nfor ( int n: nums ) {\n    System.out.println(n);\n}\n```\n\n## 方法\n\n数组本身不提供方法，只有一个变量 `length` 用来获取数组的大小。\n\n```java\nint n = nums.length\n```\n\n记得当年刚开始学习 Java 时，总是跟列表的 `size()` 方法搞混，不知道什么时候用 `length`，什么时候用 `size()`。现在看来只需要记住，数组的大小是不可变的，所以使用变量 `length` 即可获取数组大小。而列表是可变的，所以需要使用方法 `size()` 动态获取大小。\n\n`java.util.Arrays` 类提供了操作数组的方法，都是静态方法。\n\n方法|描述\n----|----\npublic static void sort(Object[] a)                     |   排序数组，升序\npublic static int binarySearch(Object[] a, Object key)  |   使用二分搜索来搜索给定元素，数组需要先排序，返回索引\npublic static boolean equals(Object[] a, Object[] a2)   |   比较数组是否相同，返回 boolean 类型\npublic static void fill(Object[] a, Object val)         |   给数组的所有元素指定某个值\n\n## 参考\n\n- [Java 数组](https://www.runoob.com/java/java-array.html)\n","slug":"java-array","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2amv00v25gqohzeihtbp"},{"title":"Nginx 配置有爱心的 404","date":"2019-06-04T21:39:02.000Z","_content":"\n\n之前我是不太在乎 404 页面的，一是我基本不会修改网页的地址，搜索过来的时候都能准确访问。二是我默认看我博客的都是技术人员，他们可以很容易的找到首页地址，虽然我的博客可能不会让他们有那么大的动力这么干。\n\n<!-- more -->\n<!-- toc -->\n\n但是，今天我想配置上 404 的页面，一个有爱心的 404 页面\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/404-2_709.png)\n\n作为一名老父亲，看到这些丢失的孩子，心里是感觉被揪了一下的。如果你也想在自己的站点加一个这样的 404 页面，可以接着看下去。\n\n这个页面是由益云提供的，这是他们的网址 [https://yibo.iyiyun.com/Home/Index/web404](https://yibo.iyiyun.com/Home/Index/web404)\n\n点击进入后根据自己的需求选择完成后，点击生成代码即可\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/404-3_1285.png)\n\n复制生成的代码，黏贴你自己的 `404.html` 的 `body` 标签中即可。\n\n然后怎么在网站中生效呢？如果你之前配置过，那现在刷新页面就已经生效了。如果像我一样没有配置过，那只要在 Nginx 中做一些小改动即可\n\n```\nserver {\n    ...\n\n    error_page 404 404.html;\n\n    location /404.html {\n        # 配置 404.html 的目录\n        root   /www/wxnacy.github.io/nginx/html;\n    }\n\n    ...\n}\n```\n\n在你的 `server` 标签中也做如上配置即可，`root` 改成你存放 `404.html` 页面的目录\n\n**重新加载配置**\n\n```bash\n$ nginx -t          # 测试配置是否通过\n$ nginx -s reload   # 重新加载\n```\n\n再次访问网站的 404 页面即可生效。\n\n需要注意的一点，他默认提供的代码中，给的是 `http://` 开头的网址，如果你的网站是 `https` 的话，那会请求失败，所以需要手动改成 `https`。\n\n说到公益 404，印象比较深的是微信公众号里的 web 页面，如果网页提供者返回了 404 状态，那微信就会强制显示这个公益的 404 页面，而提供者的页面就会被覆盖。虽然这是件有爱心的事，但做法却有点耍流氓，你也不能强制别人献爱心啊。\n\n最后呢，希望我的一点小小的举动，可以给身处黑暗中的孩子一点莹莹星火，让他们可以早点找到家的方向。\n","source":"_posts/2019-06-04-lovely-404.md","raw":"---\ntitle: Nginx 配置有爱心的 404\ntags:\n  - nginx\ndate: 2019-06-04 21:39:02\n---\n\n\n之前我是不太在乎 404 页面的，一是我基本不会修改网页的地址，搜索过来的时候都能准确访问。二是我默认看我博客的都是技术人员，他们可以很容易的找到首页地址，虽然我的博客可能不会让他们有那么大的动力这么干。\n\n<!-- more -->\n<!-- toc -->\n\n但是，今天我想配置上 404 的页面，一个有爱心的 404 页面\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/404-2_709.png)\n\n作为一名老父亲，看到这些丢失的孩子，心里是感觉被揪了一下的。如果你也想在自己的站点加一个这样的 404 页面，可以接着看下去。\n\n这个页面是由益云提供的，这是他们的网址 [https://yibo.iyiyun.com/Home/Index/web404](https://yibo.iyiyun.com/Home/Index/web404)\n\n点击进入后根据自己的需求选择完成后，点击生成代码即可\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/404-3_1285.png)\n\n复制生成的代码，黏贴你自己的 `404.html` 的 `body` 标签中即可。\n\n然后怎么在网站中生效呢？如果你之前配置过，那现在刷新页面就已经生效了。如果像我一样没有配置过，那只要在 Nginx 中做一些小改动即可\n\n```\nserver {\n    ...\n\n    error_page 404 404.html;\n\n    location /404.html {\n        # 配置 404.html 的目录\n        root   /www/wxnacy.github.io/nginx/html;\n    }\n\n    ...\n}\n```\n\n在你的 `server` 标签中也做如上配置即可，`root` 改成你存放 `404.html` 页面的目录\n\n**重新加载配置**\n\n```bash\n$ nginx -t          # 测试配置是否通过\n$ nginx -s reload   # 重新加载\n```\n\n再次访问网站的 404 页面即可生效。\n\n需要注意的一点，他默认提供的代码中，给的是 `http://` 开头的网址，如果你的网站是 `https` 的话，那会请求失败，所以需要手动改成 `https`。\n\n说到公益 404，印象比较深的是微信公众号里的 web 页面，如果网页提供者返回了 404 状态，那微信就会强制显示这个公益的 404 页面，而提供者的页面就会被覆盖。虽然这是件有爱心的事，但做法却有点耍流氓，你也不能强制别人献爱心啊。\n\n最后呢，希望我的一点小小的举动，可以给身处黑暗中的孩子一点莹莹星火，让他们可以早点找到家的方向。\n","slug":"lovely-404","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2amw00v45gqordq03aba"},{"title":"MkDocs 使用 Markdown 管理项目文档","date":"2019-06-03T08:54:17.000Z","_content":"\n\n坚持写博客也两年多了，使用 hexo 的一个很大的问题就是不太方便写系列性的文章，属于比较随性的想起什么写什么，最近发现了 [mkdocs](https://github.com/mkdocs/mkdocs)，同样的使用 Markdown 格式编写文档，写系列文章很合适。\n\n<!-- more -->\n<!-- toc -->\n\n它的官网就是用 mkdocs 搭建的。\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/mkdocs2_1058.png)\n\n如果这个界面不熟悉的话，看下面的截图\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/mkdocs1_1102.png)\n\n这是它为著名的 [readthedocs](https://readthedocs.org/) 提供的主题，是不是很亲切。\n\nmkdocs 使用配置起来都很简单，它是由 Python 编写的，这是让我亲切的另一个原因。\n\n## 安装使用\n\n**安装**\n\n```bash\n$ pip install mkdocs\n```\n\n**生成项目**\n\n```bash\n$ mkdocs new my-project\n$ cd my-project\n```\n\n项目的结构如下\n\n![3](https://www.mkdocs.org/img/initial-layout.png)\n\n**启动服务**\n\n```bash\n$ mkdocs serve\nINFO    -  Building documentation...\nINFO    -  Cleaning site directory\n[I 160402 15:50:43 server:271] Serving on http://127.0.0.1:8000\n[I 160402 15:50:43 handlers:58] Start watching changes\n[I 160402 15:50:43 handlers:60] Start detecting changes\n```\n\nmkdocs 会启动一个端口为 8000 的服务，效果如下\n\n![4](https://www.mkdocs.org/img/screenshot.png)\n\n网页首页默认打开的是文档 `docs/index.md`，修改文档内容，网页会自动刷新到最新状态。\n\n\n**生成静态文件**\n\n```bash\n$ mkdocs build\n```\n\n随后根目录下会生成一个 `site` 文件夹，内容是文档的静态网页，使用 Nginx 代理即可访问。\n\n## 配置\n\nmkdocs 的全部配置都在 `mkdocs.yml` 中，一个最简单的配置如下\n\n```yml\nsite_name: MkLorum      # 站点名称\nnav:                    # 文档目录\n    - Home: index.md\n    - About: about.md\ntheme: readthedocs      # 主题\n```\n\n![5](https://www.mkdocs.org/img/readthedocs.png)\n\n另外还有一些常用配置\n\n- `repo_url` 页面会生成一个链接，指向仓库地址，可以是 `GitHub, Bitbucket, GitLab` 等\n- `site_description` 网站的描述\n- `copyright` 版权信息\n- `google_analytics` 配置 `Google analytics` 信息，接收一个数组\n\n```\ngoogle_analytics: ['UA-36723568-3', 'mkdocs.org']\n```\n\n- `docs_dir` 文档的存放目录，默认为 `docs`\n- `site_dir` 生成静态网页的存放目录，默认为 `site`\n- `dev_addr` 使用 `mkdocs serve` 时启动的地址和端口号，默认 `127.0.0.1:8000`\n\n更多的配置详见[文档](https://www.mkdocs.org/user-guide/configuration/)\n\n","source":"_posts/2019-06-03-mkdocs.md","raw":"---\ntitle: MkDocs 使用 Markdown 管理项目文档\ntags:\n  - python\n  - 工具\ndate: 2019-06-03 08:54:17\n---\n\n\n坚持写博客也两年多了，使用 hexo 的一个很大的问题就是不太方便写系列性的文章，属于比较随性的想起什么写什么，最近发现了 [mkdocs](https://github.com/mkdocs/mkdocs)，同样的使用 Markdown 格式编写文档，写系列文章很合适。\n\n<!-- more -->\n<!-- toc -->\n\n它的官网就是用 mkdocs 搭建的。\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/mkdocs2_1058.png)\n\n如果这个界面不熟悉的话，看下面的截图\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/mkdocs1_1102.png)\n\n这是它为著名的 [readthedocs](https://readthedocs.org/) 提供的主题，是不是很亲切。\n\nmkdocs 使用配置起来都很简单，它是由 Python 编写的，这是让我亲切的另一个原因。\n\n## 安装使用\n\n**安装**\n\n```bash\n$ pip install mkdocs\n```\n\n**生成项目**\n\n```bash\n$ mkdocs new my-project\n$ cd my-project\n```\n\n项目的结构如下\n\n![3](https://www.mkdocs.org/img/initial-layout.png)\n\n**启动服务**\n\n```bash\n$ mkdocs serve\nINFO    -  Building documentation...\nINFO    -  Cleaning site directory\n[I 160402 15:50:43 server:271] Serving on http://127.0.0.1:8000\n[I 160402 15:50:43 handlers:58] Start watching changes\n[I 160402 15:50:43 handlers:60] Start detecting changes\n```\n\nmkdocs 会启动一个端口为 8000 的服务，效果如下\n\n![4](https://www.mkdocs.org/img/screenshot.png)\n\n网页首页默认打开的是文档 `docs/index.md`，修改文档内容，网页会自动刷新到最新状态。\n\n\n**生成静态文件**\n\n```bash\n$ mkdocs build\n```\n\n随后根目录下会生成一个 `site` 文件夹，内容是文档的静态网页，使用 Nginx 代理即可访问。\n\n## 配置\n\nmkdocs 的全部配置都在 `mkdocs.yml` 中，一个最简单的配置如下\n\n```yml\nsite_name: MkLorum      # 站点名称\nnav:                    # 文档目录\n    - Home: index.md\n    - About: about.md\ntheme: readthedocs      # 主题\n```\n\n![5](https://www.mkdocs.org/img/readthedocs.png)\n\n另外还有一些常用配置\n\n- `repo_url` 页面会生成一个链接，指向仓库地址，可以是 `GitHub, Bitbucket, GitLab` 等\n- `site_description` 网站的描述\n- `copyright` 版权信息\n- `google_analytics` 配置 `Google analytics` 信息，接收一个数组\n\n```\ngoogle_analytics: ['UA-36723568-3', 'mkdocs.org']\n```\n\n- `docs_dir` 文档的存放目录，默认为 `docs`\n- `site_dir` 生成静态网页的存放目录，默认为 `site`\n- `dev_addr` 使用 `mkdocs serve` 时启动的地址和端口号，默认 `127.0.0.1:8000`\n\n更多的配置详见[文档](https://www.mkdocs.org/user-guide/configuration/)\n\n","slug":"mkdocs","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2amx00v65gqoq9gfg8on"},{"title":"cURL 如何只返回状态码 status code","date":"2019-06-06T08:15:42.000Z","_content":"\n在写一些 Shell 测试用例时需要检测 url 的状态是否为 `200`，这时如果能只获取它的状态码是最理想的，cURL 可以很方便的实现。\n\n<!-- more -->\n<!-- toc -->\n\n`-w` 可以格式化输出 reponse 的返回结果。\n\n```bash\n$ curl -w \"%{http_code}\" https://baidu.com\n\n<html>\n<head><title>302 Found</title></head>\n<body bgcolor=\"white\">\n<center><h1>302 Found</h1></center>\n<hr><center>bfe/1.0.8.18</center>\n</body>\n</html>\n302%\n```\n\n访问带有跳转性质的网站，我们还需要加上 `-L` 做进一步跳转，同时为了避免当资源过大请求缓慢的情况，通过 `-I` 只返回头信息\n\n```bash\n$ curl -IL -w \"%{http_code}\" https://baidu.com\n\nHTTP/1.1 302 Moved Temporarily\nServer: bfe/1.0.8.18\nDate: Thu, 06 Jun 2019 00:25:02 GMT\nContent-Type: text/html\nContent-Length: 161\nConnection: keep-alive\nLocation: http://www.baidu.com/\n\nHTTP/1.1 200 OK\nAccept-Ranges: bytes\nCache-Control: private, no-cache, no-store, proxy-revalidate, no-transform\nConnection: Keep-Alive\nContent-Length: 277\nContent-Type: text/html\nDate: Thu, 06 Jun 2019 00:25:05 GMT\nEtag: \"575e1f60-115\"\nLast-Modified: Mon, 13 Jun 2016 02:50:08 GMT\nPragma: no-cache\nServer: bfe/1.0.8.18\n\n200%\n```\n\n然后隐藏掉打印信息，将打印的结果输出到 `/dev/null`\n\n```bash\n$ curl -IL -w \"%{http_code}\" -o /dev/null https://baidu.com\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n  0   161    0     0    0     0      0      0 --:--:--  0:00:03 --:--:--     0\n  0   277    0     0    0     0      0      0 --:--:--  0:00:03 --:--:--     0\n200%\n```\n\n竟然还有多余信息，继续使用 `-s` 不显示进度和错误信息\n\n```bash\n$ curl -sIL -w \"%{http_code}\" -o /dev/null https://baidu.com\n200%\n```\n\n最后的最后，默认输出是不换行的，也就是会带有一个 `%` 符号，我们有两种方式去掉它\n\n**输出换行**\n\n```bash\n$ curl -sIL -w \"%{http_code}\\n\" -o /dev/null https://baidu.com\n200\n```\n\n**使用 echo**\n\n```bash\n$ echo $(curl -sIL -w \"%{http_code}\" -o /dev/null https://baidu.com)\n200\n```\n\n`-w` 的一些其它参数，没有注明的可以自行测试下\n\n- `url_effective`\n- `http_code` 状态码\n- `http_connect`\n- `time_total` 请求总用时\n- `time_namelookup` DNS 域名解析的时候，就是把 https://baidu.com 转换成 ip 地址的过程\n- `time_connect` TCP 连接建立的时间，就是三次握手的时间\n- `time_appconnect` SSL/SSH 等上层协议建立连接的时间，比如 connect/handshake 的时间\n- `time_redirect` 从开始到最后一个请求事务的时间\n- `time_pretransfer` 从请求开始到响应开始传输的时间\n- `time_starttransfer` 从请求开始到第一个字节将要传输的时间\n- `size_download`\n- `size_upload`\n- `size_header`\n- `size_request`\n- `speed_download`\n- `speed_upload`\n- `content_type`\n- `num_connects`\n- `num_redirects`\n- `ftp_entry_path`\n","source":"_posts/2019-06-06-curl-return-code.md","raw":"---\ntitle: cURL 如何只返回状态码 status code\ndate: 2019-06-06 08:15:42\ntags: [http, linux]\n---\n\n在写一些 Shell 测试用例时需要检测 url 的状态是否为 `200`，这时如果能只获取它的状态码是最理想的，cURL 可以很方便的实现。\n\n<!-- more -->\n<!-- toc -->\n\n`-w` 可以格式化输出 reponse 的返回结果。\n\n```bash\n$ curl -w \"%{http_code}\" https://baidu.com\n\n<html>\n<head><title>302 Found</title></head>\n<body bgcolor=\"white\">\n<center><h1>302 Found</h1></center>\n<hr><center>bfe/1.0.8.18</center>\n</body>\n</html>\n302%\n```\n\n访问带有跳转性质的网站，我们还需要加上 `-L` 做进一步跳转，同时为了避免当资源过大请求缓慢的情况，通过 `-I` 只返回头信息\n\n```bash\n$ curl -IL -w \"%{http_code}\" https://baidu.com\n\nHTTP/1.1 302 Moved Temporarily\nServer: bfe/1.0.8.18\nDate: Thu, 06 Jun 2019 00:25:02 GMT\nContent-Type: text/html\nContent-Length: 161\nConnection: keep-alive\nLocation: http://www.baidu.com/\n\nHTTP/1.1 200 OK\nAccept-Ranges: bytes\nCache-Control: private, no-cache, no-store, proxy-revalidate, no-transform\nConnection: Keep-Alive\nContent-Length: 277\nContent-Type: text/html\nDate: Thu, 06 Jun 2019 00:25:05 GMT\nEtag: \"575e1f60-115\"\nLast-Modified: Mon, 13 Jun 2016 02:50:08 GMT\nPragma: no-cache\nServer: bfe/1.0.8.18\n\n200%\n```\n\n然后隐藏掉打印信息，将打印的结果输出到 `/dev/null`\n\n```bash\n$ curl -IL -w \"%{http_code}\" -o /dev/null https://baidu.com\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n  0   161    0     0    0     0      0      0 --:--:--  0:00:03 --:--:--     0\n  0   277    0     0    0     0      0      0 --:--:--  0:00:03 --:--:--     0\n200%\n```\n\n竟然还有多余信息，继续使用 `-s` 不显示进度和错误信息\n\n```bash\n$ curl -sIL -w \"%{http_code}\" -o /dev/null https://baidu.com\n200%\n```\n\n最后的最后，默认输出是不换行的，也就是会带有一个 `%` 符号，我们有两种方式去掉它\n\n**输出换行**\n\n```bash\n$ curl -sIL -w \"%{http_code}\\n\" -o /dev/null https://baidu.com\n200\n```\n\n**使用 echo**\n\n```bash\n$ echo $(curl -sIL -w \"%{http_code}\" -o /dev/null https://baidu.com)\n200\n```\n\n`-w` 的一些其它参数，没有注明的可以自行测试下\n\n- `url_effective`\n- `http_code` 状态码\n- `http_connect`\n- `time_total` 请求总用时\n- `time_namelookup` DNS 域名解析的时候，就是把 https://baidu.com 转换成 ip 地址的过程\n- `time_connect` TCP 连接建立的时间，就是三次握手的时间\n- `time_appconnect` SSL/SSH 等上层协议建立连接的时间，比如 connect/handshake 的时间\n- `time_redirect` 从开始到最后一个请求事务的时间\n- `time_pretransfer` 从请求开始到响应开始传输的时间\n- `time_starttransfer` 从请求开始到第一个字节将要传输的时间\n- `size_download`\n- `size_upload`\n- `size_header`\n- `size_request`\n- `speed_download`\n- `speed_upload`\n- `content_type`\n- `num_connects`\n- `num_redirects`\n- `ftp_entry_path`\n","slug":"curl-return-code","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2amy00v85gqozfwjgp75"},{"title":"Python 二分查找模块 bisect","date":"2019-06-07T20:50:03.000Z","_content":"\n\nPython 中 bisect 模块的作用是将一个数字插入到一个排好序的数组中，而不影响数组原来的排序。\n\n<!-- more -->\n<!-- toc -->\n\n换句话说是找到一个数字在一个排序数组中应该出现的位置，而它采用的是二分查找法。\n\n既然是二分查找法首先要准备一个排好序的数组\n\n```python\n>>> a = [1, 4, 4, 5, 6]\n```\n\n我们希望知道再插入一个 `4`，应该出现在什么位置。\n\n```python\n>>> import bisect\n>>> bisect.bisect(a, 4)\n3\n```\n\n`bisect()` 方法只是返回一个索引不会更改数组，另外还有 `bisect_right()` 和 `bisect_left()` 两个方法，`bisect_right()` 等同于 `bisect()` 都是从数组右侧开始查找，而 `bisect()` 是从左侧开始查找。\n\n```python\n>>> bisect.bisect_left(a, 4)\n1\n```\n\n如果想要直接插入这个数字呢？可以用 `insort()` 方法\n\n```python\n>>> bisect.insort(a, 4)\n>>> a\n[1, 4, 4, 4, 5, 6]\n```\n\n这个方法没有返回值，是在原数组上做的修改，另外也还有 `insort_left()` 和 `insort_right()`，他们的作用相信你已经明白了。\n\n说到这的话，其实标题说 `bisect` 是二分查找模块有点不准确，因为当数组中没有该数字时，`bisect.bisect()` 方法也会返回一个有效索引。所以如果我们想把它当做二分查找法的话，还需要做一些判断\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport bisect\n\ndef binary_search(nums, n):\n    i = bisect.bisect_left(nums, n)\n    if i >= len(nums):\n        return -1\n    else:\n        if nums[i] == n:\n            return i\n        else:\n            return -1\n```\n\n最后要说的是，数组只能是正序，如果是倒序该模块不生效\n\n```python\n>>> a.reverse()\n>>> a\n[6, 5, 4, 4, 2, 1]\n>>> bisect.insort_left(a, 2)\n>>> a\n[2, 6, 5, 4, 4, 2, 1]\n```\n","source":"_posts/2019-06-07-python-bisect.md","raw":"---\ntitle: Python 二分查找模块 bisect\ntags:\n  - python\ndate: 2019-06-07 20:50:03\n---\n\n\nPython 中 bisect 模块的作用是将一个数字插入到一个排好序的数组中，而不影响数组原来的排序。\n\n<!-- more -->\n<!-- toc -->\n\n换句话说是找到一个数字在一个排序数组中应该出现的位置，而它采用的是二分查找法。\n\n既然是二分查找法首先要准备一个排好序的数组\n\n```python\n>>> a = [1, 4, 4, 5, 6]\n```\n\n我们希望知道再插入一个 `4`，应该出现在什么位置。\n\n```python\n>>> import bisect\n>>> bisect.bisect(a, 4)\n3\n```\n\n`bisect()` 方法只是返回一个索引不会更改数组，另外还有 `bisect_right()` 和 `bisect_left()` 两个方法，`bisect_right()` 等同于 `bisect()` 都是从数组右侧开始查找，而 `bisect()` 是从左侧开始查找。\n\n```python\n>>> bisect.bisect_left(a, 4)\n1\n```\n\n如果想要直接插入这个数字呢？可以用 `insort()` 方法\n\n```python\n>>> bisect.insort(a, 4)\n>>> a\n[1, 4, 4, 4, 5, 6]\n```\n\n这个方法没有返回值，是在原数组上做的修改，另外也还有 `insort_left()` 和 `insort_right()`，他们的作用相信你已经明白了。\n\n说到这的话，其实标题说 `bisect` 是二分查找模块有点不准确，因为当数组中没有该数字时，`bisect.bisect()` 方法也会返回一个有效索引。所以如果我们想把它当做二分查找法的话，还需要做一些判断\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport bisect\n\ndef binary_search(nums, n):\n    i = bisect.bisect_left(nums, n)\n    if i >= len(nums):\n        return -1\n    else:\n        if nums[i] == n:\n            return i\n        else:\n            return -1\n```\n\n最后要说的是，数组只能是正序，如果是倒序该模块不生效\n\n```python\n>>> a.reverse()\n>>> a\n[6, 5, 4, 4, 2, 1]\n>>> bisect.insort_left(a, 2)\n>>> a\n[2, 6, 5, 4, 4, 2, 1]\n```\n","slug":"python-bisect","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2an300va5gqopar61y5v"},{"title":"Python collections.namedtuple() 命名元组的工厂函数","date":"2019-06-12T16:25:52.000Z","_content":"\n`collections` 包中的 `namedtuple()` 函数可以创建命名元组，并提供可读性和自文档性。它可以用于普通元组并使用名称或索引获取值。\n\n<!-- more -->\n<!-- toc -->\n\n先看一个例子\n\n```python\n>>> from collections import namedtuple\n>>> User = namedtuple('User', ['name', 'age'])\n>>> u = User('wxnacy', 12)\n>>> u\nUser(name='wxnacy', age=12)\n>>> u.name\n'wxnacy'\n>>> u[1]\n12\n>>> type(u)\n<class '__main__.User'>\n```\n\n`namedtuple()` 可以很快捷的创建一个元组子类，再来看一下它的语法\n\n```python\ncollections.namedtuple(typename, field_names, *, rename=False, defaults=None, module=None)\n```\n\n- `typename` 是创建得到的元组子类名\n- `field_names` 域名序列，可以是一个字符串序列 `[x, y]`，或者用空格、逗号隔开的字符串 `x y` 或 `x, y`\n    任何有效的字符串都可以当做域名，除了以下划线和数字开头的字符串和[关键字](https://docs.python.org/zh-cn/3/library/keyword.html#module-keyword)，比如 `_name`, 'class' 等\n- `rename` 无效域名会自动转换成位置名。比如 `['abc', 'def', 'ghi', 'abc']` 转换成 `['abc', '_1', 'ghi', '_3']` ， 消除关键词 def 和重复域名 abc。\n- `defaults` 可以为 None 或者是一个默认值的 iterable 。如果一个默认值域必须跟其他没有默认值的域在一起出现，defaults 就应用到最右边的参数。比如如果域名 ['x', 'y', 'z'] 和默认值 (1, 2) ，那么 x 就必须指定一个参数值 ，y 默认值 1 ， z 默认值 2 。\n- `module` 值如果有定义，命名元组的 `__module__` 属性值就被设置。\n\n**命名元组实例没有字典，所以它们要更轻量，并且占用更小内存。**\n\n除了继承元组的方法，命名元组还支持三个额外的方法和两个属性。为了防止域名冲突，方法和属性以下划线开始。\n\n- `classmethod somenamedtuple._make(iterable)` 类方法从存在的序列或迭代实例创建一个新实例。\n\n```python\n>>> User._make(['wxnacy', 18])\nUser(name='wxnacy', age=18)\n```\n\n- `somenamedtuple._asdict()` 返回一个新的 OrderedDict ，它将字段名称映射到它们对应的值\n\n```python\n>>> u = User._make(['wxnacy', 18])\n>>> u._asdict()\nOrderedDict([('name', 'wxnacy'), ('age', 18)])\n```\n\n- `somenamedtuple._replace(**kwargs)` 返回一个新的命名元组实例，并将指定域替换为新的值\n\n```python\n>>> u._replace(name = 'winn')\nUser(name='winn', age=18)\n```\n\n- `somenamedtuple._fields` 字符串元组列出了域名。用于提醒和从现有元组创建一个新的命名元组类型。\n\n```python\n>>> u._fields\n('name', 'age')\n```\n\n- `somenamedtuple._field_defaults` 默认值的字典。\n\n```python\n>>> User = namedtuple('User', ['name', 'age'], defaults=['wxnacy', 18])\n>>> u = User()\n>>> u._fields_defaults\n{'name': 'wxnacy', 'age': 18}\n```\n\n`3.5` 版本以后，文档字段变为可写\n\n```python\n>>> User = namedtuple('User', ['name', 'age'], defaults=['wxnacy', 18])\n>>> User.__doc__\n'User(name, age)'\n>>> User.__doc__ += \": user in collection\"\n>>> User.__doc__\n'User(name, age): user in collection'\n>>> User.name.__doc__ = \"User name\"\n>>> User.name.__doc__\n'User name'\n```\n\n\n- [namedtuple()](https://docs.python.org/zh-cn/3/library/collections.html#collections.namedtuple)\n","source":"_posts/2019-06-12-python-collections-namedtuple.md","raw":"---\ntitle: Python collections.namedtuple() 命名元组的工厂函数\ndate: 2019-06-12 16:25:52\ntags: [python]\n---\n\n`collections` 包中的 `namedtuple()` 函数可以创建命名元组，并提供可读性和自文档性。它可以用于普通元组并使用名称或索引获取值。\n\n<!-- more -->\n<!-- toc -->\n\n先看一个例子\n\n```python\n>>> from collections import namedtuple\n>>> User = namedtuple('User', ['name', 'age'])\n>>> u = User('wxnacy', 12)\n>>> u\nUser(name='wxnacy', age=12)\n>>> u.name\n'wxnacy'\n>>> u[1]\n12\n>>> type(u)\n<class '__main__.User'>\n```\n\n`namedtuple()` 可以很快捷的创建一个元组子类，再来看一下它的语法\n\n```python\ncollections.namedtuple(typename, field_names, *, rename=False, defaults=None, module=None)\n```\n\n- `typename` 是创建得到的元组子类名\n- `field_names` 域名序列，可以是一个字符串序列 `[x, y]`，或者用空格、逗号隔开的字符串 `x y` 或 `x, y`\n    任何有效的字符串都可以当做域名，除了以下划线和数字开头的字符串和[关键字](https://docs.python.org/zh-cn/3/library/keyword.html#module-keyword)，比如 `_name`, 'class' 等\n- `rename` 无效域名会自动转换成位置名。比如 `['abc', 'def', 'ghi', 'abc']` 转换成 `['abc', '_1', 'ghi', '_3']` ， 消除关键词 def 和重复域名 abc。\n- `defaults` 可以为 None 或者是一个默认值的 iterable 。如果一个默认值域必须跟其他没有默认值的域在一起出现，defaults 就应用到最右边的参数。比如如果域名 ['x', 'y', 'z'] 和默认值 (1, 2) ，那么 x 就必须指定一个参数值 ，y 默认值 1 ， z 默认值 2 。\n- `module` 值如果有定义，命名元组的 `__module__` 属性值就被设置。\n\n**命名元组实例没有字典，所以它们要更轻量，并且占用更小内存。**\n\n除了继承元组的方法，命名元组还支持三个额外的方法和两个属性。为了防止域名冲突，方法和属性以下划线开始。\n\n- `classmethod somenamedtuple._make(iterable)` 类方法从存在的序列或迭代实例创建一个新实例。\n\n```python\n>>> User._make(['wxnacy', 18])\nUser(name='wxnacy', age=18)\n```\n\n- `somenamedtuple._asdict()` 返回一个新的 OrderedDict ，它将字段名称映射到它们对应的值\n\n```python\n>>> u = User._make(['wxnacy', 18])\n>>> u._asdict()\nOrderedDict([('name', 'wxnacy'), ('age', 18)])\n```\n\n- `somenamedtuple._replace(**kwargs)` 返回一个新的命名元组实例，并将指定域替换为新的值\n\n```python\n>>> u._replace(name = 'winn')\nUser(name='winn', age=18)\n```\n\n- `somenamedtuple._fields` 字符串元组列出了域名。用于提醒和从现有元组创建一个新的命名元组类型。\n\n```python\n>>> u._fields\n('name', 'age')\n```\n\n- `somenamedtuple._field_defaults` 默认值的字典。\n\n```python\n>>> User = namedtuple('User', ['name', 'age'], defaults=['wxnacy', 18])\n>>> u = User()\n>>> u._fields_defaults\n{'name': 'wxnacy', 'age': 18}\n```\n\n`3.5` 版本以后，文档字段变为可写\n\n```python\n>>> User = namedtuple('User', ['name', 'age'], defaults=['wxnacy', 18])\n>>> User.__doc__\n'User(name, age)'\n>>> User.__doc__ += \": user in collection\"\n>>> User.__doc__\n'User(name, age): user in collection'\n>>> User.name.__doc__ = \"User name\"\n>>> User.name.__doc__\n'User name'\n```\n\n\n- [namedtuple()](https://docs.python.org/zh-cn/3/library/collections.html#collections.namedtuple)\n","slug":"python-collections-namedtuple","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2an400vc5gqoczhbuwqg"},{"title":"Linux 查看文件的几种方式","date":"2019-06-08T05:48:00.000Z","_content":"\n\nLinux 中查看文件是很常见的操作，根据需求不同可以有几个不同的查看方式。\n\n<!-- more -->\n<!-- toc -->\n\n首先点击下载一个 demo 文件: https://raw.githubusercontent.com/wxnacy/file/master/common/nums.txt\n\n## cat\n\n```bash\n$ cat nums.txt\n```\n\n`cat` 可以将文本全部打印到屏幕中，但是只适合短小的文件，像这个 600 行的文件，翻看起来会很麻烦，如果你刚好是看最后几行的内容还好，如果想看头几行的内容那就惨了。\n\n**其他参数**\n\n```bash\n$ cat -e nums.txt       # 每行最后添加 $ 符号\n$ cat -n nums.txt       # 每行开头带有行号\n```\n\n\n## head\n\n```bash\n$ head nums.txt\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n```\n\n`head` 可以查看前十行的内容，另外可以传参查看前 n 行的数据，或者前 n 个字节的数据。\n\n**其他参数**\n\n```bash\n$ head -n 15 nums.txt   # 前 15 行\n$ head -c 90 nums.txt   # 前 90 字节\n```\n\n## tail\n\n```bash\n$ tail nums.txt\n\n591\n592\n593\n594\n595\n596\n597\n598\n599\n600\n```\n\n`tail` 查看末尾 10 行的数据，经常查看日志的同学肯定对它很熟悉，`tail -f file` 可以等待文件追加并且到屏幕中，动态查看新增日志非常常用。\n\n**其他参数**\n\n```bash\ntail -n 15 nums.txt     # 末尾 15 行的数据\ntail -c 15 nums.txt     # 末尾 15 个字节的数据\ntail -b 1 nums.txt      # 末尾 1 个 512 字节块的数据\ntail -q nums.txt n.txt  # 检查多个文件时，进制打印标头\ntail -f nums.txt        # 等待文件追加，并输出到标准输出中\ntail -r -n 10 nums.txt  # 将最后 10 行，倒序显示\n```\n\n## less\n\n最后是重头戏，`less` 是 Linux 的正统查看文件的方式，相似的还有 `more` 命令，虽然都说它不如 `less`，但是我觉得两者相差无几。\n\n`less` 可以分页显示文档，翻页的方式与 `vim` 几乎一致，如果你不了解 `vim` 的翻页机制，可以看这里 [光标移动](https://vim.wxnacy.com/#docs/all-key#%E5%85%89%E6%A0%87%E7%A7%BB%E5%8A%A8)\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/less1.gif)\n\n它还可以搜索文件，方式也与 `vim` 一样，输入 `/` 后输入匹配字符，使用 `n` 向后查找，使用 `N` 向前查找\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/less2.gif)\n\n查看多个文件时，使用 `:e filename` 切换查看文件，或者使用 `:n` 和 `:p` 向后或向前查找\n\n![3](https://raw.githubusercontent.com/wxnacy/image/master/blog/less3.gif)\n\n既然它跟 `vim` 有这么多的相似点，那切换到 `vim` 模式也是很方便的，按下 `v` 即可\n\n使用 `F` 则可以达到 `tail -f file` 的效果，等待文件的输入，`<CTRL-C>` 退出。\n\n最后按下 `q` 即可退出 `less` 模式。\n\n`less` 命令模式非常常见，帮助命令 `man` 就是完全依照此模式来使用的，使用 `man less` 查看更多的使用方式。\n\n**其他参数**\n\n```bash\n$ less -N nums.txt      # 显示行号\n$ less -m nums.txt      # 显示查看的百分比进度\n$ less -e nums.txt      # 查看到文档末尾时，自动退出\n$ less +20 nums.txt     # 从第 20 行开始查看\n```\n\n其它的命令搭配 `less` 管道输入模式可以起到很好的效果。\n\n**分页显示当前所有进程**\n\n```bash\n$ ps aux | less\n```\n\n**分页显示历史命令**\n\n```bash\n$ history | less\n```\n","source":"_posts/2019-06-08-linux-show-file.md","raw":"---\ntitle: Linux 查看文件的几种方式\ntags:\n  - linux\ndate: 2019-06-08 05:48:00\n---\n\n\nLinux 中查看文件是很常见的操作，根据需求不同可以有几个不同的查看方式。\n\n<!-- more -->\n<!-- toc -->\n\n首先点击下载一个 demo 文件: https://raw.githubusercontent.com/wxnacy/file/master/common/nums.txt\n\n## cat\n\n```bash\n$ cat nums.txt\n```\n\n`cat` 可以将文本全部打印到屏幕中，但是只适合短小的文件，像这个 600 行的文件，翻看起来会很麻烦，如果你刚好是看最后几行的内容还好，如果想看头几行的内容那就惨了。\n\n**其他参数**\n\n```bash\n$ cat -e nums.txt       # 每行最后添加 $ 符号\n$ cat -n nums.txt       # 每行开头带有行号\n```\n\n\n## head\n\n```bash\n$ head nums.txt\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n```\n\n`head` 可以查看前十行的内容，另外可以传参查看前 n 行的数据，或者前 n 个字节的数据。\n\n**其他参数**\n\n```bash\n$ head -n 15 nums.txt   # 前 15 行\n$ head -c 90 nums.txt   # 前 90 字节\n```\n\n## tail\n\n```bash\n$ tail nums.txt\n\n591\n592\n593\n594\n595\n596\n597\n598\n599\n600\n```\n\n`tail` 查看末尾 10 行的数据，经常查看日志的同学肯定对它很熟悉，`tail -f file` 可以等待文件追加并且到屏幕中，动态查看新增日志非常常用。\n\n**其他参数**\n\n```bash\ntail -n 15 nums.txt     # 末尾 15 行的数据\ntail -c 15 nums.txt     # 末尾 15 个字节的数据\ntail -b 1 nums.txt      # 末尾 1 个 512 字节块的数据\ntail -q nums.txt n.txt  # 检查多个文件时，进制打印标头\ntail -f nums.txt        # 等待文件追加，并输出到标准输出中\ntail -r -n 10 nums.txt  # 将最后 10 行，倒序显示\n```\n\n## less\n\n最后是重头戏，`less` 是 Linux 的正统查看文件的方式，相似的还有 `more` 命令，虽然都说它不如 `less`，但是我觉得两者相差无几。\n\n`less` 可以分页显示文档，翻页的方式与 `vim` 几乎一致，如果你不了解 `vim` 的翻页机制，可以看这里 [光标移动](https://vim.wxnacy.com/#docs/all-key#%E5%85%89%E6%A0%87%E7%A7%BB%E5%8A%A8)\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/less1.gif)\n\n它还可以搜索文件，方式也与 `vim` 一样，输入 `/` 后输入匹配字符，使用 `n` 向后查找，使用 `N` 向前查找\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/less2.gif)\n\n查看多个文件时，使用 `:e filename` 切换查看文件，或者使用 `:n` 和 `:p` 向后或向前查找\n\n![3](https://raw.githubusercontent.com/wxnacy/image/master/blog/less3.gif)\n\n既然它跟 `vim` 有这么多的相似点，那切换到 `vim` 模式也是很方便的，按下 `v` 即可\n\n使用 `F` 则可以达到 `tail -f file` 的效果，等待文件的输入，`<CTRL-C>` 退出。\n\n最后按下 `q` 即可退出 `less` 模式。\n\n`less` 命令模式非常常见，帮助命令 `man` 就是完全依照此模式来使用的，使用 `man less` 查看更多的使用方式。\n\n**其他参数**\n\n```bash\n$ less -N nums.txt      # 显示行号\n$ less -m nums.txt      # 显示查看的百分比进度\n$ less -e nums.txt      # 查看到文档末尾时，自动退出\n$ less +20 nums.txt     # 从第 20 行开始查看\n```\n\n其它的命令搭配 `less` 管道输入模式可以起到很好的效果。\n\n**分页显示当前所有进程**\n\n```bash\n$ ps aux | less\n```\n\n**分页显示历史命令**\n\n```bash\n$ history | less\n```\n","slug":"linux-show-file","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2an500ve5gqoyxe3zdkc"},{"title":"Python 命令行参数模块 argparse","date":"2019-07-08T21:32:29.000Z","_content":"\nPython 有很多处理命令行参数的外部模块，[click](https://github.com/pallets/click) 是其中的佼佼者，如果你是要完成一个稍微复杂点的项目，我也推荐使用它。但是如果编写一个独立的脚本，我认为方便简洁才是最重要的，也就是能用内置模块就用内置模块。此时了解相应功能的实现方式就尤为重要，何况 [argparse](https://docs.python.org/3/howto/argparse.html) 也真的没有想象中的那么难用。\n\n<!-- more -->\n<!-- toc -->\n\n直接进入正题，基础用法如下\n\n## 初始化\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# filename: demo.py\n\nimport argparse\nparser = argparse.ArgumentParser(description='This is a argparse demo')\nargs = parser.parse_args()\n```\n\n```bash\n$ python demo.py -h\nusage: demo.py [-h]\n\nThis is a argparse demo\n\noptional arguments:\n  -h, --help  show this help message and exit\n```\n\n三行代码即可初始化一个命令行参数模块，默认有一个 `-h, --help` 参数显示帮助信息。\n\n`ArgumentParser` 函数有如下参数:\n- `prog` 程序的名字，默认是argv[0]。若设置，则在帮助信息中，可以使用%(prog)s来作为格式化的引用（修改一处全局受用）。\n- `usage` 帮助信息的usage字段，描述程序的各种用法，默认情况下会依据add_argument()来自动生成。\n- `description` 一个简单描述程序主要干啥以及怎么用的字符段，默认为空。\n- `epilog` optional arguments字符段之后的字符段，默认为空。\n- `parents` 继承的父parser，为了避免一些公共的内容重复定义，父parser在初始化时会设置add_help=False，这是为了防止出现父与子parser的-h冲突而抛出异常。\n- `formatter_class` 对于help输出进行格式化，除了输出的样式外，如果设置为ArgumentDefaultsHelpFormatter，则会自动在help输出中添加已定义的default值。\n- `prefix_chars` options前的字符，默认为'-'，可以添加其他字符，如'-+'，但是如果没有包括'-'，那么对应的option如'-h'就无法解析。\n- `fromfile_prefix_chars` 有时会使用文件给parse_args()传入参数，为了能够识别文件字符串，如\"demo.txt\"，需要设置此值，如\"@\"，那么所有以此字符为开头的字符串都被当作是文件，所以传给parse_args()的参数应该是@demo.txt。在该文件中，一行只能有一个参数。如文件中的'-f\\nbar'会被解析成['-f','bar']。\n- `argument_default` 一般情况下，默认值使用add_argument()来添加，或者使用set_defaults()设置一些键值对来添加。剩下一种情况就是设置此项（此处没看明白是咋回事）。\n- `conflict_handler` 解决在add_argument()阶段有冲突的option的依据策略，默认为error即抛出异常。一般情况下遇到冲突是抛出异常即可，但是如果设置了parents，那么需要重写父parser中的规则的时候，就需要将此项设置为resolve，但是重写是精确匹配的，如老规则定义了-h/--help，重写了-h，那么--help还是老规则。\n- `add_help` 是否添加-h/--helpoption，默认为True。为False时，是要做parent（其实可以设置子Parser重写）。默认是-h/--help，若prefix_chars中没有包含'-'，那么就以其中第一个字符作为代替。\n\n## 解析参数\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# filename: demo.py\n\nimport argparse\nparser = argparse.ArgumentParser(description='This is a argparse demo')\nparser.add_argument('file', help='List file or dir')\nparser.add_argument('-u', '--user', help='Config user name')\nargs = parser.parse_args()\nprint(args.file)\nprint(args.user)\n```\n\n```bash\n$ python demo.py bashrc -u wxnacy\nbashrc\nwxnacy\n```\n\n`add_argument` 函数有如下参数：\n- `name or flags` 是位置参数，则需要传入名字；要是可选参数，则需要进行定义，如'-f'，'--foo'。\n\n- `action` 定义传入的参数如何处理。\n```\naction='store'，默认取值，保存传入参数。\naction='store_const'，需要添加const，意味着该argument的值不从命令行输入，而是取const的值。\naction='store_true' or action='store_false'，'store_const'的特殊情形，意味着const的值为True或False。\naction='append'，表示传入的值会作为一个列表的一项，意味着option可以在命令行中多次出现。\naction='append_const'，传入列表的项由const定义，通常用在需要多个argument将值传入一个列表中的场景。\naction='count'，输出argument出现的次数。\naction='help'，已默认添加。\naction='version'，需要定义version，使用时输出版本信息并退出。\n自定义，通过定义一个argparse.Action子类来实现。实际上，上面的这些可选项都是通过这种形式定义的。    \n```\n\n- `nargs` ArgumentParser对象通常将一个动作与一个命令行参数关联。nargs关键字参数将一个动作与不同数目的命令行参数关联在一起：\n\n```\nnargs=N，一个选项后可以跟多个参数（action='append'时，依然是一个选项后跟一个参数，只不过选项可以多次出现），参数的个数必须为N的值，这些参数会生成一个列表，当nargs=1时，会生成一个长度为1的列表。\nnargs=?，如果没有在命令行中出现对应的项，则给对应的项赋值为default。特殊的是，对于可选项，如果命令行中出现了此可选项，但是之后没有跟随赋值参数，则此时给此可选项并不是赋值default的值，而是赋值const的值。\nnargs=* 位置参数 0 到多个\nnargs=+ 位置参数 1 到多个\nnargs=argparse.REMAINDER，所有剩余的参数，均转化为一个列表赋值给此项，通常用此方法来将剩余的参数传入另一个parser进行解析。如果nargs没有定义，则可传入参数的数量由action决定，通常情况下为一个，并且不会生成长度为一的列表。\n```\n- `const` 一种是定义action='store_const'或action='append_const'时使用。一种是定义nargs='?'时，可选项出现在命令行中，但之后并没有跟随赋值的参数，作为默认值传给此可选项。\n- `default` 默认值。\n    如果是一个字符串，那么Parser解析的时候会将它作为命令行传入值，使用type的值来进行转换类型，但是如果不是的话，就会使用定义的值而不进行类型转换。如果设置了nargs='?'或nargs=`*`，那么当没有参数赋值给该项时，会使用default定义的值。\n而default=argparse.SUPPRESS时，则表示命令行中未出现某一项时，不会对它进行默认赋值。\n- `type` 用于类型检查和类型转换。\n    使用FileType可简化对文件的操作。还可以自定义函数，输入是一个字符串，输出是转换后的字符串。当设置choices的时，类型检查会变得容易，因为只需要在一个范围内比较即可。\n- `choices` 给定了取值范围，超出会报错。\n    当type也有定义时，会先使用type进行类型检查，所以choices中的取值必须符合type的定义，否则在parse_args()时会报错。任何支持in操作符的均可作为choices的赋值，所以字典，列表，集合，等等其他容器均都支持。\n- `required` 默认情况下，可选项（前面有'-'）被认为并不一定需要出现在命令行参数中，但是如果设置了required=True的话，则必须出现。此类设置违背人的常识，应避免使用。\n- `help` 帮助信息。\n    之前提到的%(prog)s可用于此处程序名的格式化，此外，还有%(default)s格式化default的值，%(type)s格式化type的值。\n设置为argparse.SUPPRESS可不显示帮助信息。\n- `metavar` 在Parser生成帮助信息时，需要有字符代表需要传入的值。（这一段和dest相同，使用的就是dest的值）如果是位置参数，则用它本身代替；如果是可选参数，则使用它的大写来代替。使用metavar可替换默认的字符。\n- `dest` 大部分的选项都需要通过命令行来给其赋值，这些值的名字通过dest来定义，默认的规则如同metavar中所述。\n\n## 实际命令的例子\n\n```python\n# ls ~/Downloads ~/Documents\n# 位置参数 0 或多个\nparser.add_argument('files', nargs='*')\n```\n\n```python\n# wget https://wxnacy.com\n# 位置参数为必传\nparser.add_argument('url', nargs=1)\n```\n\n```python\n# wget https://wxnacy.com\n# 位置参数为必传\nparser.add_argument('url', nargs=1)\n```\n\n```python\n# curl -X POST <url> -H 'Content-Type: application/json' -H 'Postman-Token: 0871758a-2782-4600-9d1f-e3da3270fd95'\n# 可选参数可以叠加\nparser.add_argument('-H', '--headers', action='append')\n```\n\n```python\n# ls -a\n# 可选参数为 bool 类型\nparser.add_argument('-a', action='store_true')\n```\n","source":"_posts/2019-07-08-python-argparse.md","raw":"---\ntitle: Python 命令行参数模块 argparse\ndate: 2019-07-08 21:32:29\ntags: [python]\n---\n\nPython 有很多处理命令行参数的外部模块，[click](https://github.com/pallets/click) 是其中的佼佼者，如果你是要完成一个稍微复杂点的项目，我也推荐使用它。但是如果编写一个独立的脚本，我认为方便简洁才是最重要的，也就是能用内置模块就用内置模块。此时了解相应功能的实现方式就尤为重要，何况 [argparse](https://docs.python.org/3/howto/argparse.html) 也真的没有想象中的那么难用。\n\n<!-- more -->\n<!-- toc -->\n\n直接进入正题，基础用法如下\n\n## 初始化\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# filename: demo.py\n\nimport argparse\nparser = argparse.ArgumentParser(description='This is a argparse demo')\nargs = parser.parse_args()\n```\n\n```bash\n$ python demo.py -h\nusage: demo.py [-h]\n\nThis is a argparse demo\n\noptional arguments:\n  -h, --help  show this help message and exit\n```\n\n三行代码即可初始化一个命令行参数模块，默认有一个 `-h, --help` 参数显示帮助信息。\n\n`ArgumentParser` 函数有如下参数:\n- `prog` 程序的名字，默认是argv[0]。若设置，则在帮助信息中，可以使用%(prog)s来作为格式化的引用（修改一处全局受用）。\n- `usage` 帮助信息的usage字段，描述程序的各种用法，默认情况下会依据add_argument()来自动生成。\n- `description` 一个简单描述程序主要干啥以及怎么用的字符段，默认为空。\n- `epilog` optional arguments字符段之后的字符段，默认为空。\n- `parents` 继承的父parser，为了避免一些公共的内容重复定义，父parser在初始化时会设置add_help=False，这是为了防止出现父与子parser的-h冲突而抛出异常。\n- `formatter_class` 对于help输出进行格式化，除了输出的样式外，如果设置为ArgumentDefaultsHelpFormatter，则会自动在help输出中添加已定义的default值。\n- `prefix_chars` options前的字符，默认为'-'，可以添加其他字符，如'-+'，但是如果没有包括'-'，那么对应的option如'-h'就无法解析。\n- `fromfile_prefix_chars` 有时会使用文件给parse_args()传入参数，为了能够识别文件字符串，如\"demo.txt\"，需要设置此值，如\"@\"，那么所有以此字符为开头的字符串都被当作是文件，所以传给parse_args()的参数应该是@demo.txt。在该文件中，一行只能有一个参数。如文件中的'-f\\nbar'会被解析成['-f','bar']。\n- `argument_default` 一般情况下，默认值使用add_argument()来添加，或者使用set_defaults()设置一些键值对来添加。剩下一种情况就是设置此项（此处没看明白是咋回事）。\n- `conflict_handler` 解决在add_argument()阶段有冲突的option的依据策略，默认为error即抛出异常。一般情况下遇到冲突是抛出异常即可，但是如果设置了parents，那么需要重写父parser中的规则的时候，就需要将此项设置为resolve，但是重写是精确匹配的，如老规则定义了-h/--help，重写了-h，那么--help还是老规则。\n- `add_help` 是否添加-h/--helpoption，默认为True。为False时，是要做parent（其实可以设置子Parser重写）。默认是-h/--help，若prefix_chars中没有包含'-'，那么就以其中第一个字符作为代替。\n\n## 解析参数\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# filename: demo.py\n\nimport argparse\nparser = argparse.ArgumentParser(description='This is a argparse demo')\nparser.add_argument('file', help='List file or dir')\nparser.add_argument('-u', '--user', help='Config user name')\nargs = parser.parse_args()\nprint(args.file)\nprint(args.user)\n```\n\n```bash\n$ python demo.py bashrc -u wxnacy\nbashrc\nwxnacy\n```\n\n`add_argument` 函数有如下参数：\n- `name or flags` 是位置参数，则需要传入名字；要是可选参数，则需要进行定义，如'-f'，'--foo'。\n\n- `action` 定义传入的参数如何处理。\n```\naction='store'，默认取值，保存传入参数。\naction='store_const'，需要添加const，意味着该argument的值不从命令行输入，而是取const的值。\naction='store_true' or action='store_false'，'store_const'的特殊情形，意味着const的值为True或False。\naction='append'，表示传入的值会作为一个列表的一项，意味着option可以在命令行中多次出现。\naction='append_const'，传入列表的项由const定义，通常用在需要多个argument将值传入一个列表中的场景。\naction='count'，输出argument出现的次数。\naction='help'，已默认添加。\naction='version'，需要定义version，使用时输出版本信息并退出。\n自定义，通过定义一个argparse.Action子类来实现。实际上，上面的这些可选项都是通过这种形式定义的。    \n```\n\n- `nargs` ArgumentParser对象通常将一个动作与一个命令行参数关联。nargs关键字参数将一个动作与不同数目的命令行参数关联在一起：\n\n```\nnargs=N，一个选项后可以跟多个参数（action='append'时，依然是一个选项后跟一个参数，只不过选项可以多次出现），参数的个数必须为N的值，这些参数会生成一个列表，当nargs=1时，会生成一个长度为1的列表。\nnargs=?，如果没有在命令行中出现对应的项，则给对应的项赋值为default。特殊的是，对于可选项，如果命令行中出现了此可选项，但是之后没有跟随赋值参数，则此时给此可选项并不是赋值default的值，而是赋值const的值。\nnargs=* 位置参数 0 到多个\nnargs=+ 位置参数 1 到多个\nnargs=argparse.REMAINDER，所有剩余的参数，均转化为一个列表赋值给此项，通常用此方法来将剩余的参数传入另一个parser进行解析。如果nargs没有定义，则可传入参数的数量由action决定，通常情况下为一个，并且不会生成长度为一的列表。\n```\n- `const` 一种是定义action='store_const'或action='append_const'时使用。一种是定义nargs='?'时，可选项出现在命令行中，但之后并没有跟随赋值的参数，作为默认值传给此可选项。\n- `default` 默认值。\n    如果是一个字符串，那么Parser解析的时候会将它作为命令行传入值，使用type的值来进行转换类型，但是如果不是的话，就会使用定义的值而不进行类型转换。如果设置了nargs='?'或nargs=`*`，那么当没有参数赋值给该项时，会使用default定义的值。\n而default=argparse.SUPPRESS时，则表示命令行中未出现某一项时，不会对它进行默认赋值。\n- `type` 用于类型检查和类型转换。\n    使用FileType可简化对文件的操作。还可以自定义函数，输入是一个字符串，输出是转换后的字符串。当设置choices的时，类型检查会变得容易，因为只需要在一个范围内比较即可。\n- `choices` 给定了取值范围，超出会报错。\n    当type也有定义时，会先使用type进行类型检查，所以choices中的取值必须符合type的定义，否则在parse_args()时会报错。任何支持in操作符的均可作为choices的赋值，所以字典，列表，集合，等等其他容器均都支持。\n- `required` 默认情况下，可选项（前面有'-'）被认为并不一定需要出现在命令行参数中，但是如果设置了required=True的话，则必须出现。此类设置违背人的常识，应避免使用。\n- `help` 帮助信息。\n    之前提到的%(prog)s可用于此处程序名的格式化，此外，还有%(default)s格式化default的值，%(type)s格式化type的值。\n设置为argparse.SUPPRESS可不显示帮助信息。\n- `metavar` 在Parser生成帮助信息时，需要有字符代表需要传入的值。（这一段和dest相同，使用的就是dest的值）如果是位置参数，则用它本身代替；如果是可选参数，则使用它的大写来代替。使用metavar可替换默认的字符。\n- `dest` 大部分的选项都需要通过命令行来给其赋值，这些值的名字通过dest来定义，默认的规则如同metavar中所述。\n\n## 实际命令的例子\n\n```python\n# ls ~/Downloads ~/Documents\n# 位置参数 0 或多个\nparser.add_argument('files', nargs='*')\n```\n\n```python\n# wget https://wxnacy.com\n# 位置参数为必传\nparser.add_argument('url', nargs=1)\n```\n\n```python\n# wget https://wxnacy.com\n# 位置参数为必传\nparser.add_argument('url', nargs=1)\n```\n\n```python\n# curl -X POST <url> -H 'Content-Type: application/json' -H 'Postman-Token: 0871758a-2782-4600-9d1f-e3da3270fd95'\n# 可选参数可以叠加\nparser.add_argument('-H', '--headers', action='append')\n```\n\n```python\n# ls -a\n# 可选参数为 bool 类型\nparser.add_argument('-a', action='store_true')\n```\n","slug":"python-argparse","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2an700vg5gqoq714927r"},{"title":"Python 内存管理","date":"2019-06-16T15:08:10.000Z","_content":"\n> 要不这样吧，如果编程语言里有个地方你弄不明白，而正好又有个人用了这个功能，那就开枪把他打死。这比学习新特性要容易些，然后过不了多久，那些活下来的程序员就会开始用 0.9.6 版的 Python，而且他们只需要使用这个版本中易于理解的那一小部分就好了（眨眼）。\n>   —— Tim Peters （传奇的核心开发者，“Python 之禅”作者）\n\n今天我们来聊一聊 Python 的内存管理。\n\n<!-- more -->\n<!-- toc -->\n\n## 对象引用\n\n### 变量定义\n\nPython 不像多数的编译语言那样，需要对变量进行显示的声明。变量在第一次赋值时自动声明，变量只有被创建和赋值后才能被使用\n\n```python\n>>> k\nTraceback (most recent call last):\n  File \"<input>\", line 1, in <module>\n    k\nNameError: name 'k' is not defined\n>>> k = 1\n>>> k\n1\n```\n\n### 动态类型\n\n严格来说变量是没有类型的，对象才有类型，变量引用了什么类型的对象，它就是什么类型。\n\n变量的类型无需声明，是在程序运行时动态确定的。\n\n```python\n>>> k = 1\n>>> type(k)\n<class 'int'>\n>>> k = \"a\"\n>>> type(k)\n<class 'str'>\n```\n\n### 对象引用\n\n如何理解变量是对对象的引用呢？内置函数 `id()` 可以返回对象的内存地址，我们来看一个例子\n\n```python\n>>> a = 1\n>>> b = a\n>>> id(1)\n4432996208\n>>> id(a)\n4432996208\n>>> id(b)\n4432996208\n```\n\n给变量 `a` 赋值 `1`，又给 `b` 赋值了 `a`，此时 `b` 并没有创建新对象，而是引向了 `a` 所指向的对象，换句话说 `b` 是对象的另一个别名。\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/memory1.png)\n\n现在考虑一个问题，如果此时将 `a` 赋值为 `2`，`b` 等于多少？\n\n```python\n>>> a = 1\n>>> b = a\n>>> a = 2\n>>> b\n1\n```\n\n如果明白了上面说的，可以得到 `b` 依然等于 `1`，因为 `a` 和 `b` 都作为对象 `1` 的引用变量，现在只是将 `a` 引向其他对象，`b` 并不受影响。\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/memory2.png)\n\n如果这一点可以理解的话，再看一个问题\n\n```python\n>>> a = [1, 2, 3]\n>>> b = a\n>>> a[0] = 4\n>>> a\n[4, 2, 3]\n>>> b\n```\n\n这时输出 `b` 你觉得会返回什么结果呢？\n\n变量 `a` 和 `b` 都引用了列表对象 `[1, 2, 3]`，`a[0] = 4` 只是将列表对象索引位置 `0` 的子对象替换为 `4`，变量 `a` 和 `b` 对它的引用关系都没有改变，所以 `b` 也等于 `[4, 2, 3]`\n\n## 引用计数\n\n刚才我们讲 `b = a` 时，提到此时 `b` 并没有创建新的对象，而是引用了 `a` 所引用的对象。\n\n每个对象都包含一个头部信息，内容为类型标识符和引用计数器(Reference counter)。当对象被创建时 `a = [1, 2, 3]` 该对象的引用计数设置为 1，当对象有一个新的引用时，引用计数会自动加 1。\n\n### 增加引用计数\n\n`sys` 模块中的 `getrefcount()` 函数可以获取对象的引用计数。当对象做参数传入该函数时，实际上也创建一个该对象的引用，所以返回值比预期会加 1。\n\n```python\n>>> from sys import getrefcount\n>>> a = [1, 2, 3]\n>>> getrefcount(a)\n2\n>>> b = a\n>>> getrefcount(a)\n3\n```\n\n对象的引用计数增加，有下面几种情况\n\n- 对象被创建\n\n```python\n>>> a = 256\n>>> getrefcount(256)\n114\n```\n\n`114` 这个数字有些过于超出我们的预期，我先按下不表，稍后的缓存池小节我会讲到。\n\n- 对象被其他变量引用\n\n```python\n>>> b = a\n>>> getrefcount(256)\n115\n```\n\n- 对象成为容器对象的一个元素\n\n```python\n>>> l = [123, 256]\n>>> getrefcount(256)\n116\n```\n\n- 对象作为参数传递给函数（新的本地引用）`foo(n)`\n\n### 减少引用计数\n\n有增加，就会有减少。对象的引用不会不休止的增加，下面几种情况引用计数会减少\n\n- 对象的引用变量被赋值给另一个对象时\n\n```python\n>>> a = 256\n>>> b = a\n>>> getrefcount(256)\n120\n>>> a = 123\n>>> getrefcount(256)\n119\n```\n\n- 对象的引用变量被显示的销毁\n\n```python\n>>> del b\n>>> getrefcount(256)\n118\n```\n\n`del` 语句会产生两个结果\n-   - 从现在的变量名称空间中删除 `b`\n-   - 对象 `256` 的引用减少 1\n\n- 对象被一个容器对象中移除\n\n```python\n>>> l = [123, 256]\n>>> getrefcount(256)\n118\n>>> l.remove(256)\n>>> getrefcount(256)\n117\n```\n\n- 容器对象本身被销毁\n\n```python\n>>> l = [123, 256]\n>>> getrefcount(256)\n118\n>>> del l\n>>> getrefcount(256)\n117\n```\n\n- 一个本地引用离开其作用域时，比如 `foo(n)` 函数执行完毕时\n\n当对象的最后一个引用被移除时，该对象的引用计数减少为 0，这会导致该对象**无法被访问**。该对象就会成为垃圾回收机制的回收对象，而任何对该对象的追踪或调试都将增加它的引用计数，这也将推迟该对象被回收的时间。\n\n## 缓存池\n\n刚才我抛出了一个问题，对象 `256` 刚被创建出来，引用计数就是 `114`，有点诡异。\n\n其实 Python 内部存在一个缓存池，缓存池内的对象在内存中只存在一份。所有符合缓存规则的对象，如果该对象不存在，创建后会进入缓存池，以后再次调用只是增加引用计数，如果该对象已经存在，那么针对它的所有调用都只是增加它的引用计数，即不会增加新的内存地址。这有一个很明显的好处，缓存池中的对象都是程序中最常用到的，缓存池的机制将在一定程度上减少内存的消耗。\n\n现在可以回答刚才的问题了，`256` 对象身处缓存池中，所以我们以为 `a = 256` 是对它的创建，但其实只是某一个引用而已。\n\nPython 的缓存池会包含三部分**布尔值**、**小整数**和**守规矩字符串**\n\n### 布尔值\n\n布尔值比较好说，就两个值，任何情况下它都会被缓存\n\n```python\n>>> a = True\n>>> b = True\n>>> a is b\nTrue\n```\n\n### 小整数\n\n这个小整数的范围为 [-5, 256]，我们想办法对此做一些验证。Python 中判断两个对象的值是否相等时可以使用 `==`，而判断两个对象是否为同一内存地址时需要使用 `is`\n\n```python\n>>> a = 256\n>>> b = 256\n>>> a is b\nTrue\n>>> a = 257\n>>> b = 257\n>>> a is b\nFalse\n```\n\n`257` 超出了整数缓存池的范围，所以每次赋值都会创建一个新对象，即内存地址不同，我们可以通过 `id()` 函数查看\n\n```python\n>>> id(a)\n4597659056\n>>> id(b)\n4592739216\n```\n\n所以一般情况下你看到的拥有两个相同值的变量，往往他们引向的是两个不同的对象。\n\n### 守规矩字符串\n\n字符串的缓存逻辑比较复杂，我将符合规则的字符串称为**守规矩字符串**，规则有下面几种情况\n\n- 长度为 1 时\n\n```python\n>>> a = \"@\"\n>>> b = \"@\"\n>>> a is b\nTrue\n```\n\n- 长度大于 1，并且只含有大小写字母、数字、下划线时\n\n```python\n>>> a = \"wo_ai_ni_zhongguo\"\n>>> b = \"wo_ai_ni_zhongguo\"\n>>> a is b\nTrue\n```\n\n- 某些乘法时\n\n- - 乘数为 1\n\n- - - 字符串长度等于 1\n\n```python\n>>> a = \"@\" * 1\n>>> b = \"@\" * 1\n>>> a is b\nTrue\n```\n\n- - - 字符串长度大于 1，且只含有大小写字母、数字、下划线时\n\n```python\n>>> a = \"wo_ai_ni_zhongguo\" * 1\n>>> b = \"wo_ai_ni_zhongguo\" * 1\n>>> a is b\nTrue\n```\n\n- - 乘数大于 1，仅含大小写字母，数字，下划线，总长度<=20\n\n```python\n>>> a = \"wxnacy\" * 3\n>>> b = \"wxnacy\" * 3\n>>> a is b\nTrue\n```\n\n面对这么多的规则，完全靠记忆的话，在开发中难免有些畏手畏脚，并且通常我们涉及到的字符串都比较复杂，那么这时我们怎么优化内存的使用呢？\n\n`sys` 模块中有一个函数 `insern()`，可以将任何形式的字符驻留在缓存池中，同时也可以将该字符从缓存池中取出\n\n```python\n>>> from sys import intern\n>>> a = intern(\"12345!@#$%^qwertZXCV\" * 100)\n>>> b = intern(\"12345!@#$%^qwertZXCV\" * 100)\n>>> a is b\nTrue\n>>> c = \"12345!@#$%^qwertZXCV\" * 100\n>>> a is c\nFalse\n```\n\n每次使用都要调用该函数，才能保持字符串的内存地址一致，刚才我们提到的那些守规矩字符串内部也是这样实现的。我有理由相信，在任何需要字符串复用的地方都可以使用该函数，这将大大的优化程序的内存消耗\n\n### 相同代码块\n\n你以为到这就完了吗，再等等，还差点。\n\n刚才我们的实验都是在不同代码块中进行的，在 Python 交互模式下，每个独立命令都是一个单独的代码块。而在相同的代码块下，缓存池的规则将简单很多。\n\n任何的整数和布尔类型在相同代码块中都满足缓存机制\n\n```python\n>>> def foo():\n...     a = 1234567\n...     b = 1234567\n...     print(a is b)\n...\n...\n>>> foo()\nTrue\n```\n\n字符串依然要单拎出来说下\n\n- 非乘法得到的字符串都满足缓存机制\n\n```python\n>>> def foo():\n...     a = \"1234567!@#$%^&QWERTY\"\n...     b = \"1234567!@#$%^&QWERTY\"\n...     print(a is b)\n...\n...\n>>> foo()\nTrue\n```\n\n- 乘法时，乘数为 1 时都满足缓存机制\n\n```python\n>>> def foo():\n...     a = \"1234567!@#$%^&QWERTY\" * 1\n...     b = \"1234567!@#$%^&QWERTY\" * 1\n...     print(a is b)\n...\n...\n>>> foo()\nTrue\n```\n\n- 乘数大于 1 时，仅含大小写字母，数字，下划线，且总长度小于等于 20 满足缓存机制\n\n```python\n>>> def foo():\n...     a = \"wxnacy\" * 3\n...     b = \"wxnacy\" * 3\n...     print(a is b)\n...\n...\n>>> foo()\nTrue\n```\n\n除了上面说的类型，其它的类型如数组、字典等都不会进入缓存池\n\n```python\n>>> a = [1, 2, 3]\n>>> b = [1, 2, 3]\n>>> a is b\nFalse\n```\n\n## 垃圾回收\n\n我们给变量分配的内存，其实是在借用系统资源，有借就要有还。还资源的步骤就是垃圾回收时进行的，Python 解释器将会承担内存分配回收的复杂任务，我们只需要关心我们的业务流程，以及尽量的了解垃圾回收的过程，并写出更好的代码。\n\n<!-- 垃圾回收器在回收内存时会有遇到两种情况 -->\n\n### 引用计数为 0 的\n\n前面我们提到，对象的引用会将它的引用计数加 1，而移除对它的引用会自动减 1。当对象的引用计数为 0 时，它将成为一个待回收的垃圾内存。\n\n垃圾回收器会寻找这些引用计数为 0 的对象，垃圾回收时 Python 无法进行其它的任务，这个过程会将降低工作效率，所以当垃圾内存很少时没有必要频繁的执行垃圾回收。\n\n当Python运行时，会记录其中分配对象(object allocation)和取消分配对象(object deallocation)的次数。当两者的差值高于某个阈值时，垃圾回收才会启动。\n\n**查看阈值**\n\n```python\n>>> import gc\n>>> gc.get_threshold()\n(700, 10, 10)\n```\n\n返回值解释\n\n- `700` 垃圾回收启动的阈值\n- `10` 每 10 次 0 代垃圾回收，会配合 1 次 1 代的垃圾回收\n- `10` 每 10 次 1 代垃圾回收，会配合 1 次 2 代的垃圾回收\n\n我们也可以手动启动垃圾回收\n\n```python\n>>> gc.collect()\n9\n```\n\n### 分代回收\n\nPython 将所有的对象分为 0、1、2 代，所有新建的对象为 0 代，每经历一次垃圾回收，依然存活的对象，会归入下一代对象。\n\n分代（generation）回收策略基于这样的假设，在程序运行过程中，存活时间越久的对象，越不容易在后面的程序中变成垃圾。对于经历了几次垃圾回收依然存活的对象，出于信任和效率的考虑，垃圾回收器会减少对它的扫描频率。\n\n### 循环引用\n\n相信有过开发经验的同学都会碰见循环引用的情况，两个对象相互引用，会构成**引用环（reference cycle）**\n\n```python\n>>> a = []\n>>> b = [a]\n>>> a.append(b)\n>>> del a\n>>> del b\n```\n\n在引用环中，即使删除了 `a` 和 `b` 对象，但是仍然有部分对象，从此以后无法使用，引用计数也不为 0，这将给垃圾回收造成很大的麻烦。\n\n我们来模拟一下这个无法使用、引用计数也不为 0 的对象。\n\n```python\n>>> getrefcount(\"wxnacy\")\n2\n>>> a = [\"wxnacy\"]\n>>> getrefcount(\"wxnacy\")\n3\n>>> b = [a]\n>>> getrefcount(\"wxnacy\")\n3\n>>> a.append(b)\n>>> getrefcount(\"wxnacy\")\n3\n>>> del a\n>>> del b\n>>> getrefcount(\"wxnacy\")\n3\n```\n\n相信看过前面章节后，很容易可以理解这个流程。我以短字符串 `wxnacy` 为参考对象，执行函数 `getrefcount(\"wxnacy\")` 获取初始引用计数 2 （字符串本身被创建引用一次，getrefcount 函数本地引用一次），容器对象 `a` 引用加 1，直到 `del a` 前没有增加引用，而这一步删除容器对象的操作，本应该减少一次对 `wxnacy` 的引用次数，然后最后再次获取引用次数时，依然为 3，`wxnacy` 对象就将作为那个无法被使用，但是引用计数又不为 0 的对象遗漏在内存中。\n\n为了回收这样的对象，Python 复制了每个对象的引用计数，记做 `gc_ref`，假设，每个对象 i，该计数为 `gc_ref_i`。Python 会遍历所有的对象 i。对于每个对象 i 引用的对象 j，将相应的 `gc_ref_j` 减 1。\n\n在结束遍历后，`gc_ref` 不为 0 的对象，和这些对象引用的对象，以及更下游引用的对象，需要被保留。而其它的对象则被垃圾回收。\n\n```python\n>>> gc.collect()\n2\n```\n\n手动执行垃圾回收发现回收了两个对象，这说明这个简单的引用环就有两个无法被回收的对象，实际开发中这样的对象将是一个可怕的数字。\n\n深入了解一门语言，理解内存管理机制是很有必要的。搞清楚内存分配和垃圾回收的过程，将会是提供程序性能的重要一步。现在再回过头来去看以前的代码，就会发现很多有风险的代码隐藏在其中，而现在能写出优秀的代码，也将是理所当然的。\n\n## 参考文献\n\n- Python 核心编程（第二版）49 页\n- [Python内存管理机制](https://www.cnblogs.com/geaozhang/p/7111961.html)\n- [python小数据池，代码块的最详细、深入剖析](https://www.cnblogs.com/jin-xin/articles/9439483.html)\n- [Python深入06 Python的内存管理](https://www.cnblogs.com/vamei/p/3232088.html)\n","source":"_posts/2019-06-16-python-memory-management.md","raw":"---\ntitle: Python 内存管理\ntags:\n  - python\ndate: 2019-06-16 15:08:10\n---\n\n> 要不这样吧，如果编程语言里有个地方你弄不明白，而正好又有个人用了这个功能，那就开枪把他打死。这比学习新特性要容易些，然后过不了多久，那些活下来的程序员就会开始用 0.9.6 版的 Python，而且他们只需要使用这个版本中易于理解的那一小部分就好了（眨眼）。\n>   —— Tim Peters （传奇的核心开发者，“Python 之禅”作者）\n\n今天我们来聊一聊 Python 的内存管理。\n\n<!-- more -->\n<!-- toc -->\n\n## 对象引用\n\n### 变量定义\n\nPython 不像多数的编译语言那样，需要对变量进行显示的声明。变量在第一次赋值时自动声明，变量只有被创建和赋值后才能被使用\n\n```python\n>>> k\nTraceback (most recent call last):\n  File \"<input>\", line 1, in <module>\n    k\nNameError: name 'k' is not defined\n>>> k = 1\n>>> k\n1\n```\n\n### 动态类型\n\n严格来说变量是没有类型的，对象才有类型，变量引用了什么类型的对象，它就是什么类型。\n\n变量的类型无需声明，是在程序运行时动态确定的。\n\n```python\n>>> k = 1\n>>> type(k)\n<class 'int'>\n>>> k = \"a\"\n>>> type(k)\n<class 'str'>\n```\n\n### 对象引用\n\n如何理解变量是对对象的引用呢？内置函数 `id()` 可以返回对象的内存地址，我们来看一个例子\n\n```python\n>>> a = 1\n>>> b = a\n>>> id(1)\n4432996208\n>>> id(a)\n4432996208\n>>> id(b)\n4432996208\n```\n\n给变量 `a` 赋值 `1`，又给 `b` 赋值了 `a`，此时 `b` 并没有创建新对象，而是引向了 `a` 所指向的对象，换句话说 `b` 是对象的另一个别名。\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/memory1.png)\n\n现在考虑一个问题，如果此时将 `a` 赋值为 `2`，`b` 等于多少？\n\n```python\n>>> a = 1\n>>> b = a\n>>> a = 2\n>>> b\n1\n```\n\n如果明白了上面说的，可以得到 `b` 依然等于 `1`，因为 `a` 和 `b` 都作为对象 `1` 的引用变量，现在只是将 `a` 引向其他对象，`b` 并不受影响。\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/memory2.png)\n\n如果这一点可以理解的话，再看一个问题\n\n```python\n>>> a = [1, 2, 3]\n>>> b = a\n>>> a[0] = 4\n>>> a\n[4, 2, 3]\n>>> b\n```\n\n这时输出 `b` 你觉得会返回什么结果呢？\n\n变量 `a` 和 `b` 都引用了列表对象 `[1, 2, 3]`，`a[0] = 4` 只是将列表对象索引位置 `0` 的子对象替换为 `4`，变量 `a` 和 `b` 对它的引用关系都没有改变，所以 `b` 也等于 `[4, 2, 3]`\n\n## 引用计数\n\n刚才我们讲 `b = a` 时，提到此时 `b` 并没有创建新的对象，而是引用了 `a` 所引用的对象。\n\n每个对象都包含一个头部信息，内容为类型标识符和引用计数器(Reference counter)。当对象被创建时 `a = [1, 2, 3]` 该对象的引用计数设置为 1，当对象有一个新的引用时，引用计数会自动加 1。\n\n### 增加引用计数\n\n`sys` 模块中的 `getrefcount()` 函数可以获取对象的引用计数。当对象做参数传入该函数时，实际上也创建一个该对象的引用，所以返回值比预期会加 1。\n\n```python\n>>> from sys import getrefcount\n>>> a = [1, 2, 3]\n>>> getrefcount(a)\n2\n>>> b = a\n>>> getrefcount(a)\n3\n```\n\n对象的引用计数增加，有下面几种情况\n\n- 对象被创建\n\n```python\n>>> a = 256\n>>> getrefcount(256)\n114\n```\n\n`114` 这个数字有些过于超出我们的预期，我先按下不表，稍后的缓存池小节我会讲到。\n\n- 对象被其他变量引用\n\n```python\n>>> b = a\n>>> getrefcount(256)\n115\n```\n\n- 对象成为容器对象的一个元素\n\n```python\n>>> l = [123, 256]\n>>> getrefcount(256)\n116\n```\n\n- 对象作为参数传递给函数（新的本地引用）`foo(n)`\n\n### 减少引用计数\n\n有增加，就会有减少。对象的引用不会不休止的增加，下面几种情况引用计数会减少\n\n- 对象的引用变量被赋值给另一个对象时\n\n```python\n>>> a = 256\n>>> b = a\n>>> getrefcount(256)\n120\n>>> a = 123\n>>> getrefcount(256)\n119\n```\n\n- 对象的引用变量被显示的销毁\n\n```python\n>>> del b\n>>> getrefcount(256)\n118\n```\n\n`del` 语句会产生两个结果\n-   - 从现在的变量名称空间中删除 `b`\n-   - 对象 `256` 的引用减少 1\n\n- 对象被一个容器对象中移除\n\n```python\n>>> l = [123, 256]\n>>> getrefcount(256)\n118\n>>> l.remove(256)\n>>> getrefcount(256)\n117\n```\n\n- 容器对象本身被销毁\n\n```python\n>>> l = [123, 256]\n>>> getrefcount(256)\n118\n>>> del l\n>>> getrefcount(256)\n117\n```\n\n- 一个本地引用离开其作用域时，比如 `foo(n)` 函数执行完毕时\n\n当对象的最后一个引用被移除时，该对象的引用计数减少为 0，这会导致该对象**无法被访问**。该对象就会成为垃圾回收机制的回收对象，而任何对该对象的追踪或调试都将增加它的引用计数，这也将推迟该对象被回收的时间。\n\n## 缓存池\n\n刚才我抛出了一个问题，对象 `256` 刚被创建出来，引用计数就是 `114`，有点诡异。\n\n其实 Python 内部存在一个缓存池，缓存池内的对象在内存中只存在一份。所有符合缓存规则的对象，如果该对象不存在，创建后会进入缓存池，以后再次调用只是增加引用计数，如果该对象已经存在，那么针对它的所有调用都只是增加它的引用计数，即不会增加新的内存地址。这有一个很明显的好处，缓存池中的对象都是程序中最常用到的，缓存池的机制将在一定程度上减少内存的消耗。\n\n现在可以回答刚才的问题了，`256` 对象身处缓存池中，所以我们以为 `a = 256` 是对它的创建，但其实只是某一个引用而已。\n\nPython 的缓存池会包含三部分**布尔值**、**小整数**和**守规矩字符串**\n\n### 布尔值\n\n布尔值比较好说，就两个值，任何情况下它都会被缓存\n\n```python\n>>> a = True\n>>> b = True\n>>> a is b\nTrue\n```\n\n### 小整数\n\n这个小整数的范围为 [-5, 256]，我们想办法对此做一些验证。Python 中判断两个对象的值是否相等时可以使用 `==`，而判断两个对象是否为同一内存地址时需要使用 `is`\n\n```python\n>>> a = 256\n>>> b = 256\n>>> a is b\nTrue\n>>> a = 257\n>>> b = 257\n>>> a is b\nFalse\n```\n\n`257` 超出了整数缓存池的范围，所以每次赋值都会创建一个新对象，即内存地址不同，我们可以通过 `id()` 函数查看\n\n```python\n>>> id(a)\n4597659056\n>>> id(b)\n4592739216\n```\n\n所以一般情况下你看到的拥有两个相同值的变量，往往他们引向的是两个不同的对象。\n\n### 守规矩字符串\n\n字符串的缓存逻辑比较复杂，我将符合规则的字符串称为**守规矩字符串**，规则有下面几种情况\n\n- 长度为 1 时\n\n```python\n>>> a = \"@\"\n>>> b = \"@\"\n>>> a is b\nTrue\n```\n\n- 长度大于 1，并且只含有大小写字母、数字、下划线时\n\n```python\n>>> a = \"wo_ai_ni_zhongguo\"\n>>> b = \"wo_ai_ni_zhongguo\"\n>>> a is b\nTrue\n```\n\n- 某些乘法时\n\n- - 乘数为 1\n\n- - - 字符串长度等于 1\n\n```python\n>>> a = \"@\" * 1\n>>> b = \"@\" * 1\n>>> a is b\nTrue\n```\n\n- - - 字符串长度大于 1，且只含有大小写字母、数字、下划线时\n\n```python\n>>> a = \"wo_ai_ni_zhongguo\" * 1\n>>> b = \"wo_ai_ni_zhongguo\" * 1\n>>> a is b\nTrue\n```\n\n- - 乘数大于 1，仅含大小写字母，数字，下划线，总长度<=20\n\n```python\n>>> a = \"wxnacy\" * 3\n>>> b = \"wxnacy\" * 3\n>>> a is b\nTrue\n```\n\n面对这么多的规则，完全靠记忆的话，在开发中难免有些畏手畏脚，并且通常我们涉及到的字符串都比较复杂，那么这时我们怎么优化内存的使用呢？\n\n`sys` 模块中有一个函数 `insern()`，可以将任何形式的字符驻留在缓存池中，同时也可以将该字符从缓存池中取出\n\n```python\n>>> from sys import intern\n>>> a = intern(\"12345!@#$%^qwertZXCV\" * 100)\n>>> b = intern(\"12345!@#$%^qwertZXCV\" * 100)\n>>> a is b\nTrue\n>>> c = \"12345!@#$%^qwertZXCV\" * 100\n>>> a is c\nFalse\n```\n\n每次使用都要调用该函数，才能保持字符串的内存地址一致，刚才我们提到的那些守规矩字符串内部也是这样实现的。我有理由相信，在任何需要字符串复用的地方都可以使用该函数，这将大大的优化程序的内存消耗\n\n### 相同代码块\n\n你以为到这就完了吗，再等等，还差点。\n\n刚才我们的实验都是在不同代码块中进行的，在 Python 交互模式下，每个独立命令都是一个单独的代码块。而在相同的代码块下，缓存池的规则将简单很多。\n\n任何的整数和布尔类型在相同代码块中都满足缓存机制\n\n```python\n>>> def foo():\n...     a = 1234567\n...     b = 1234567\n...     print(a is b)\n...\n...\n>>> foo()\nTrue\n```\n\n字符串依然要单拎出来说下\n\n- 非乘法得到的字符串都满足缓存机制\n\n```python\n>>> def foo():\n...     a = \"1234567!@#$%^&QWERTY\"\n...     b = \"1234567!@#$%^&QWERTY\"\n...     print(a is b)\n...\n...\n>>> foo()\nTrue\n```\n\n- 乘法时，乘数为 1 时都满足缓存机制\n\n```python\n>>> def foo():\n...     a = \"1234567!@#$%^&QWERTY\" * 1\n...     b = \"1234567!@#$%^&QWERTY\" * 1\n...     print(a is b)\n...\n...\n>>> foo()\nTrue\n```\n\n- 乘数大于 1 时，仅含大小写字母，数字，下划线，且总长度小于等于 20 满足缓存机制\n\n```python\n>>> def foo():\n...     a = \"wxnacy\" * 3\n...     b = \"wxnacy\" * 3\n...     print(a is b)\n...\n...\n>>> foo()\nTrue\n```\n\n除了上面说的类型，其它的类型如数组、字典等都不会进入缓存池\n\n```python\n>>> a = [1, 2, 3]\n>>> b = [1, 2, 3]\n>>> a is b\nFalse\n```\n\n## 垃圾回收\n\n我们给变量分配的内存，其实是在借用系统资源，有借就要有还。还资源的步骤就是垃圾回收时进行的，Python 解释器将会承担内存分配回收的复杂任务，我们只需要关心我们的业务流程，以及尽量的了解垃圾回收的过程，并写出更好的代码。\n\n<!-- 垃圾回收器在回收内存时会有遇到两种情况 -->\n\n### 引用计数为 0 的\n\n前面我们提到，对象的引用会将它的引用计数加 1，而移除对它的引用会自动减 1。当对象的引用计数为 0 时，它将成为一个待回收的垃圾内存。\n\n垃圾回收器会寻找这些引用计数为 0 的对象，垃圾回收时 Python 无法进行其它的任务，这个过程会将降低工作效率，所以当垃圾内存很少时没有必要频繁的执行垃圾回收。\n\n当Python运行时，会记录其中分配对象(object allocation)和取消分配对象(object deallocation)的次数。当两者的差值高于某个阈值时，垃圾回收才会启动。\n\n**查看阈值**\n\n```python\n>>> import gc\n>>> gc.get_threshold()\n(700, 10, 10)\n```\n\n返回值解释\n\n- `700` 垃圾回收启动的阈值\n- `10` 每 10 次 0 代垃圾回收，会配合 1 次 1 代的垃圾回收\n- `10` 每 10 次 1 代垃圾回收，会配合 1 次 2 代的垃圾回收\n\n我们也可以手动启动垃圾回收\n\n```python\n>>> gc.collect()\n9\n```\n\n### 分代回收\n\nPython 将所有的对象分为 0、1、2 代，所有新建的对象为 0 代，每经历一次垃圾回收，依然存活的对象，会归入下一代对象。\n\n分代（generation）回收策略基于这样的假设，在程序运行过程中，存活时间越久的对象，越不容易在后面的程序中变成垃圾。对于经历了几次垃圾回收依然存活的对象，出于信任和效率的考虑，垃圾回收器会减少对它的扫描频率。\n\n### 循环引用\n\n相信有过开发经验的同学都会碰见循环引用的情况，两个对象相互引用，会构成**引用环（reference cycle）**\n\n```python\n>>> a = []\n>>> b = [a]\n>>> a.append(b)\n>>> del a\n>>> del b\n```\n\n在引用环中，即使删除了 `a` 和 `b` 对象，但是仍然有部分对象，从此以后无法使用，引用计数也不为 0，这将给垃圾回收造成很大的麻烦。\n\n我们来模拟一下这个无法使用、引用计数也不为 0 的对象。\n\n```python\n>>> getrefcount(\"wxnacy\")\n2\n>>> a = [\"wxnacy\"]\n>>> getrefcount(\"wxnacy\")\n3\n>>> b = [a]\n>>> getrefcount(\"wxnacy\")\n3\n>>> a.append(b)\n>>> getrefcount(\"wxnacy\")\n3\n>>> del a\n>>> del b\n>>> getrefcount(\"wxnacy\")\n3\n```\n\n相信看过前面章节后，很容易可以理解这个流程。我以短字符串 `wxnacy` 为参考对象，执行函数 `getrefcount(\"wxnacy\")` 获取初始引用计数 2 （字符串本身被创建引用一次，getrefcount 函数本地引用一次），容器对象 `a` 引用加 1，直到 `del a` 前没有增加引用，而这一步删除容器对象的操作，本应该减少一次对 `wxnacy` 的引用次数，然后最后再次获取引用次数时，依然为 3，`wxnacy` 对象就将作为那个无法被使用，但是引用计数又不为 0 的对象遗漏在内存中。\n\n为了回收这样的对象，Python 复制了每个对象的引用计数，记做 `gc_ref`，假设，每个对象 i，该计数为 `gc_ref_i`。Python 会遍历所有的对象 i。对于每个对象 i 引用的对象 j，将相应的 `gc_ref_j` 减 1。\n\n在结束遍历后，`gc_ref` 不为 0 的对象，和这些对象引用的对象，以及更下游引用的对象，需要被保留。而其它的对象则被垃圾回收。\n\n```python\n>>> gc.collect()\n2\n```\n\n手动执行垃圾回收发现回收了两个对象，这说明这个简单的引用环就有两个无法被回收的对象，实际开发中这样的对象将是一个可怕的数字。\n\n深入了解一门语言，理解内存管理机制是很有必要的。搞清楚内存分配和垃圾回收的过程，将会是提供程序性能的重要一步。现在再回过头来去看以前的代码，就会发现很多有风险的代码隐藏在其中，而现在能写出优秀的代码，也将是理所当然的。\n\n## 参考文献\n\n- Python 核心编程（第二版）49 页\n- [Python内存管理机制](https://www.cnblogs.com/geaozhang/p/7111961.html)\n- [python小数据池，代码块的最详细、深入剖析](https://www.cnblogs.com/jin-xin/articles/9439483.html)\n- [Python深入06 Python的内存管理](https://www.cnblogs.com/vamei/p/3232088.html)\n","slug":"python-memory-management","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2an800vi5gqop65sca0d"},{"title":"Linux date 获取指定时间","date":"2019-06-18T11:07:25.000Z","_content":"\n最近要写一些清洗数据的脚本，需要用到各种日期格式，今天来探讨下使用 `date` 命令的 `-d/--date` 参数来获取指定时间。\n\n<!-- more -->\n<!-- toc -->\n\n`-d/--date` 是非常强大且语法很多样复杂的参数，我了解的可能并不全面，想到哪里说到哪，提到的东西只能保证满足日常开发需求。\n\n**本文提到的命令都是在 Linux 环境下进行的，Mac 环境需要下载 `GNU` 相应的命令。**\n\n## 时间戳\n\n将描述转换为 UTC 时间 1970-01-01 以后的时间\n\n```bash\n$ date -d '@12'\nThu Jan  1 00:00:12 UTC 1970\n```\n\n很明显我们可以用它来做时间戳的格式化\n\n```bash\n$ date -d '@1560825826'\nTue Jun 18 02:43:46 UTC 2019\n```\n\n然后可以使用 `+FORMAT` 将时间转为时间戳\n\n```bash\n$ date -d '2019-06-18 11:36:19' +%s\n1560857779\n```\n\n## 时区\n\n服务器一般默认使用的是 UTC 时区\n\n```bash\n$ date\nTue Jun 18 03:41:35 UTC 2019\n```\n\n返回指定时区格式\n\n```bash\n$ TZ=\"Asia/Shanghai\" date\nTue Jun 18 11:28:42 CST 2019\n```\n\n设置指定时间的时区\n\n```bash\n$ date -d 'TZ=\"Asia/Shanghai\" 2019-06-18 11:13:59'\nTue Jun 18 03:13:59 UTC 2019\n```\n\n世界时区名称列表 [List of tz database time zones](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)\n\n## datestr\n\n`-d/--date` 的语法为\n\n```bash\n$ date -d datestr\n```\n\n前面我们已经简单领略了他的使用方式，下面详细说说他都支持什么格式。\n\n### 时间戳\n\n这里注意一定要前面加上 `@` 符号\n\n```bash\n$ date -d '@12'\nThu Jan  1 00:00:12 UTC 1970\n```\n\n### 时间格式\n\n如果不加 `@` 会怎么样呢，如果传入的数字默认返回当天的指定小时的时间，取值 [0, 23]\n\n```bash\n$ date -d '12'\nTue Jun 18 12:00:00 UTC 2019\n```\n\n更复杂的格式化按照标准格式 `YYYY-mm-dd HH:MM:SS` 来指定\n\n```bash\n$ date -d '2019-06-18 11:58:20'\nTue Jun 18 11:58:20 UTC 2019\n```\n\n```bash\n$ date -d '11:20'\nTue Jun 18 11:20:00 UTC 2019\n```\n\n咦？似乎这样的设置没什么意义啊，固定的日子和时间，我为什么要多此一举的用 `date` 在获取一次。确实，它再搭配一点其他的语句就有很大的用处了。\n\n### next 关键字\n\n`next` 关键字可以让上面的命令更有意义\n\n获取明天 9 点的时间\n\n```bash\n$ date -d '9 next day'\nWed Jun 19 09:00:00 UTC 2019\n```\n\n下周\n\n```bash\n$ date -d '9 next week'\nWed Jun 25 09:00:00 UTC 2019\n```\n\n下周一\n\n```bash\n$ date -d '9 next Mon'\nWed Jun 24 09:00:00 UTC 2019\n```\n\n下个月\n\n```bash\n$ date -d '9 next month'\nWed Jun 24 09:00:00 UTC 2019\n```\n\n如你所见，`next` 后面跟一个符合常理的时间或缩写就可以获取指定时间以后的某个时间，如果去掉 `9`，则返回的是当前时间以后的时间。\n\n下一分钟\n\n```bash\n$ date -d 'next minute'\nTue Jun 18 04:13:04 UTC 2019\n```\n\n总结下 `next` 后面跟的参数\n\n- `second[s]` `minute[s]` `hour[s]` `day[s]` `week[s]` `month[s]` `year[s]`\n- 星期 `Sun[day]` `Mon[day]` `Tue[sday]` `Wed[nesday]` `Thu[rsday]` `Fri[day]` `Sat[urday]`\n\n### ago 关键字\n\n可以获取之后，就可以获取之前的时间，安装英语的语法应该这样的\n\n一分钟前\n\n```bash\n$ date -d '1 minute ago'\nTue Jun 18 06:31:15 UTC 2019\n```\n\n`09:00` 的一分钟前\n\n```bash\n$ date -d '09:00 minute ago'\nTue Jun 18 08:59:00 UTC 2019\n```\n\n相信不用多举例，你也已经可以明白它的用法了，另外最前面的数字可以为负数，代表的是时间以后。下面两种方式都是获取以后以后的时间\n\n```bash\n$ date -d '-1 day ago'\nWed Jun 19 06:36:53 UTC 2019\n\n$ date -d 'next day'\nWed Jun 19 06:37:00 UTC 2019\n```\n\n总结下 `ago` 前可以使用的参数\n- `second[s]` `minute[s]` `hour[s]` `day[s]` `week[s]` `month[s]` `year[s]`\n\n","source":"_posts/2019-06-18-date-want-time.md","raw":"---\ntitle: Linux date 获取指定时间\ndate: 2019-06-18 11:07:25\ntags: [linux]\n---\n\n最近要写一些清洗数据的脚本，需要用到各种日期格式，今天来探讨下使用 `date` 命令的 `-d/--date` 参数来获取指定时间。\n\n<!-- more -->\n<!-- toc -->\n\n`-d/--date` 是非常强大且语法很多样复杂的参数，我了解的可能并不全面，想到哪里说到哪，提到的东西只能保证满足日常开发需求。\n\n**本文提到的命令都是在 Linux 环境下进行的，Mac 环境需要下载 `GNU` 相应的命令。**\n\n## 时间戳\n\n将描述转换为 UTC 时间 1970-01-01 以后的时间\n\n```bash\n$ date -d '@12'\nThu Jan  1 00:00:12 UTC 1970\n```\n\n很明显我们可以用它来做时间戳的格式化\n\n```bash\n$ date -d '@1560825826'\nTue Jun 18 02:43:46 UTC 2019\n```\n\n然后可以使用 `+FORMAT` 将时间转为时间戳\n\n```bash\n$ date -d '2019-06-18 11:36:19' +%s\n1560857779\n```\n\n## 时区\n\n服务器一般默认使用的是 UTC 时区\n\n```bash\n$ date\nTue Jun 18 03:41:35 UTC 2019\n```\n\n返回指定时区格式\n\n```bash\n$ TZ=\"Asia/Shanghai\" date\nTue Jun 18 11:28:42 CST 2019\n```\n\n设置指定时间的时区\n\n```bash\n$ date -d 'TZ=\"Asia/Shanghai\" 2019-06-18 11:13:59'\nTue Jun 18 03:13:59 UTC 2019\n```\n\n世界时区名称列表 [List of tz database time zones](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)\n\n## datestr\n\n`-d/--date` 的语法为\n\n```bash\n$ date -d datestr\n```\n\n前面我们已经简单领略了他的使用方式，下面详细说说他都支持什么格式。\n\n### 时间戳\n\n这里注意一定要前面加上 `@` 符号\n\n```bash\n$ date -d '@12'\nThu Jan  1 00:00:12 UTC 1970\n```\n\n### 时间格式\n\n如果不加 `@` 会怎么样呢，如果传入的数字默认返回当天的指定小时的时间，取值 [0, 23]\n\n```bash\n$ date -d '12'\nTue Jun 18 12:00:00 UTC 2019\n```\n\n更复杂的格式化按照标准格式 `YYYY-mm-dd HH:MM:SS` 来指定\n\n```bash\n$ date -d '2019-06-18 11:58:20'\nTue Jun 18 11:58:20 UTC 2019\n```\n\n```bash\n$ date -d '11:20'\nTue Jun 18 11:20:00 UTC 2019\n```\n\n咦？似乎这样的设置没什么意义啊，固定的日子和时间，我为什么要多此一举的用 `date` 在获取一次。确实，它再搭配一点其他的语句就有很大的用处了。\n\n### next 关键字\n\n`next` 关键字可以让上面的命令更有意义\n\n获取明天 9 点的时间\n\n```bash\n$ date -d '9 next day'\nWed Jun 19 09:00:00 UTC 2019\n```\n\n下周\n\n```bash\n$ date -d '9 next week'\nWed Jun 25 09:00:00 UTC 2019\n```\n\n下周一\n\n```bash\n$ date -d '9 next Mon'\nWed Jun 24 09:00:00 UTC 2019\n```\n\n下个月\n\n```bash\n$ date -d '9 next month'\nWed Jun 24 09:00:00 UTC 2019\n```\n\n如你所见，`next` 后面跟一个符合常理的时间或缩写就可以获取指定时间以后的某个时间，如果去掉 `9`，则返回的是当前时间以后的时间。\n\n下一分钟\n\n```bash\n$ date -d 'next minute'\nTue Jun 18 04:13:04 UTC 2019\n```\n\n总结下 `next` 后面跟的参数\n\n- `second[s]` `minute[s]` `hour[s]` `day[s]` `week[s]` `month[s]` `year[s]`\n- 星期 `Sun[day]` `Mon[day]` `Tue[sday]` `Wed[nesday]` `Thu[rsday]` `Fri[day]` `Sat[urday]`\n\n### ago 关键字\n\n可以获取之后，就可以获取之前的时间，安装英语的语法应该这样的\n\n一分钟前\n\n```bash\n$ date -d '1 minute ago'\nTue Jun 18 06:31:15 UTC 2019\n```\n\n`09:00` 的一分钟前\n\n```bash\n$ date -d '09:00 minute ago'\nTue Jun 18 08:59:00 UTC 2019\n```\n\n相信不用多举例，你也已经可以明白它的用法了，另外最前面的数字可以为负数，代表的是时间以后。下面两种方式都是获取以后以后的时间\n\n```bash\n$ date -d '-1 day ago'\nWed Jun 19 06:36:53 UTC 2019\n\n$ date -d 'next day'\nWed Jun 19 06:37:00 UTC 2019\n```\n\n总结下 `ago` 前可以使用的参数\n- `second[s]` `minute[s]` `hour[s]` `day[s]` `week[s]` `month[s]` `year[s]`\n\n","slug":"date-want-time","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2an900vk5gqo72i9jp2w"},{"title":"Linux split 分割日志","date":"2019-06-25T14:43:11.000Z","_content":"\nsplit 命令用于将文件平均分割为多个小文件，多用于日志查看。\n\n<!-- more -->\n<!-- toc -->\n\n先下载一个测试文件 [split_test](https://raw.githubusercontent.com/wxnacy/file/master/common/split_test)\n\n```bash\n$ split split_test\n$ ll\n\n-rw-r--r--  1 wxnacy  staff  216320 Jun 25 14:52 split_test\n-rw-r--r--  1 wxnacy  staff   20000 Jun 25 14:54 xaa\n-rw-r--r--  1 wxnacy  staff   20000 Jun 25 14:54 xab\n-rw-r--r--  1 wxnacy  staff   20000 Jun 25 14:54 xac\n-rw-r--r--  1 wxnacy  staff   20000 Jun 25 14:54 xad\n-rw-r--r--  1 wxnacy  staff   20000 Jun 25 14:54 xae\n-rw-r--r--  1 wxnacy  staff   20000 Jun 25 14:54 xaf\n-rw-r--r--  1 wxnacy  staff   20000 Jun 25 14:54 xag\n-rw-r--r--  1 wxnacy  staff   20000 Jun 25 14:54 xah\n-rw-r--r--  1 wxnacy  staff   20000 Jun 25 14:54 xai\n-rw-r--r--  1 wxnacy  staff   20000 Jun 25 14:54 xaj\n-rw-r--r--  1 wxnacy  staff   16320 Jun 25 14:54 xak\n```\n\n默认 `split` 会将文件均匀的分割成多个小文件，文件名以 `x` 开头，剩余字符按字符表排序。\n\n**语法**\n\n```bash\n$ split [OPTION]... [FILE [PREFIX]]\n```\n\n`split` 命令有多个参数可供调用\n\n`-b` 指定输出文件的大小，单位为 byte。\n`-d` 使用数字作为后缀。\n`-l` 指定输出文件的行数\n`-a` 指定后缀的长度\n\n**分割出 100k 的文件**\n\n`-b` 默认单位为 byte，可以指定分割单位，如 `K,M,G,T,P,E,Z,Y`\n\n```bash\n$ split -b 100k split_test\n$ ll\ntotal 856\n-rw-r--r--  1 wxnacy  staff  216320 Jun 25 14:52 split_test\n-rw-r--r--  1 wxnacy  staff  102400 Jun 25 14:59 xaa\n-rw-r--r--  1 wxnacy  staff  102400 Jun 25 14:59 xab\n-rw-r--r--  1 wxnacy  staff   11520 Jun 25 14:59 xac\n```\n\n**使用数字为后缀，并指定长度**\n\n```bash\n$ split -b 100k -d -a 4 split_test\n$ ll\ntotal 424\n-rw-rw-r-- 1 vagrant vagrant 216320 Jun 25 07:12 split_test\n-rw-rw-r-- 1 vagrant vagrant 102400 Jun 25 07:13 x0000\n-rw-rw-r-- 1 vagrant vagrant 102400 Jun 25 07:13 x0001\n-rw-rw-r-- 1 vagrant vagrant  11520 Jun 25 07:13 x0002\n```\n\n**指定文件前缀**\n\n```bash\n$ split -b 100k -d -a 4 split_test split.\n$ ll\ntotal 424\n-rw-rw-r-- 1 vagrant vagrant 216320 Jun 25 07:12 split_test\n-rw-rw-r-- 1 vagrant vagrant 102400 Jun 25 07:15 split.0000\n-rw-rw-r-- 1 vagrant vagrant 102400 Jun 25 07:15 split.0001\n-rw-rw-r-- 1 vagrant vagrant  11520 Jun 25 07:15 split.0002\n```\n\n**指定行数分割文件**\n\n```bash\n$ split -l 1000 split_test\n$ ll\ntotal 428\n-rw-rw-r-- 1 vagrant vagrant 216320 Jun 25 07:12 split_test\n-rw-rw-r-- 1 vagrant vagrant  20000 Jun 25 07:20 xaa\n-rw-rw-r-- 1 vagrant vagrant  20000 Jun 25 07:20 xab\n-rw-rw-r-- 1 vagrant vagrant  20000 Jun 25 07:20 xac\n-rw-rw-r-- 1 vagrant vagrant  20000 Jun 25 07:20 xad\n-rw-rw-r-- 1 vagrant vagrant  20000 Jun 25 07:20 xae\n-rw-rw-r-- 1 vagrant vagrant  20000 Jun 25 07:20 xaf\n-rw-rw-r-- 1 vagrant vagrant  20000 Jun 25 07:20 xag\n-rw-rw-r-- 1 vagrant vagrant  20000 Jun 25 07:20 xah\n-rw-rw-r-- 1 vagrant vagrant  20000 Jun 25 07:20 xai\n-rw-rw-r-- 1 vagrant vagrant  20000 Jun 25 07:20 xaj\n-rw-rw-r-- 1 vagrant vagrant  16320 Jun 25 07:20 xak\n\n$ wc -l xaa\n1000 xaa\n```\n","source":"_posts/2019-06-25-linux-split.md","raw":"---\ntitle: Linux split 分割日志\ndate: 2019-06-25 14:43:11\ntags: [linux]\n---\n\nsplit 命令用于将文件平均分割为多个小文件，多用于日志查看。\n\n<!-- more -->\n<!-- toc -->\n\n先下载一个测试文件 [split_test](https://raw.githubusercontent.com/wxnacy/file/master/common/split_test)\n\n```bash\n$ split split_test\n$ ll\n\n-rw-r--r--  1 wxnacy  staff  216320 Jun 25 14:52 split_test\n-rw-r--r--  1 wxnacy  staff   20000 Jun 25 14:54 xaa\n-rw-r--r--  1 wxnacy  staff   20000 Jun 25 14:54 xab\n-rw-r--r--  1 wxnacy  staff   20000 Jun 25 14:54 xac\n-rw-r--r--  1 wxnacy  staff   20000 Jun 25 14:54 xad\n-rw-r--r--  1 wxnacy  staff   20000 Jun 25 14:54 xae\n-rw-r--r--  1 wxnacy  staff   20000 Jun 25 14:54 xaf\n-rw-r--r--  1 wxnacy  staff   20000 Jun 25 14:54 xag\n-rw-r--r--  1 wxnacy  staff   20000 Jun 25 14:54 xah\n-rw-r--r--  1 wxnacy  staff   20000 Jun 25 14:54 xai\n-rw-r--r--  1 wxnacy  staff   20000 Jun 25 14:54 xaj\n-rw-r--r--  1 wxnacy  staff   16320 Jun 25 14:54 xak\n```\n\n默认 `split` 会将文件均匀的分割成多个小文件，文件名以 `x` 开头，剩余字符按字符表排序。\n\n**语法**\n\n```bash\n$ split [OPTION]... [FILE [PREFIX]]\n```\n\n`split` 命令有多个参数可供调用\n\n`-b` 指定输出文件的大小，单位为 byte。\n`-d` 使用数字作为后缀。\n`-l` 指定输出文件的行数\n`-a` 指定后缀的长度\n\n**分割出 100k 的文件**\n\n`-b` 默认单位为 byte，可以指定分割单位，如 `K,M,G,T,P,E,Z,Y`\n\n```bash\n$ split -b 100k split_test\n$ ll\ntotal 856\n-rw-r--r--  1 wxnacy  staff  216320 Jun 25 14:52 split_test\n-rw-r--r--  1 wxnacy  staff  102400 Jun 25 14:59 xaa\n-rw-r--r--  1 wxnacy  staff  102400 Jun 25 14:59 xab\n-rw-r--r--  1 wxnacy  staff   11520 Jun 25 14:59 xac\n```\n\n**使用数字为后缀，并指定长度**\n\n```bash\n$ split -b 100k -d -a 4 split_test\n$ ll\ntotal 424\n-rw-rw-r-- 1 vagrant vagrant 216320 Jun 25 07:12 split_test\n-rw-rw-r-- 1 vagrant vagrant 102400 Jun 25 07:13 x0000\n-rw-rw-r-- 1 vagrant vagrant 102400 Jun 25 07:13 x0001\n-rw-rw-r-- 1 vagrant vagrant  11520 Jun 25 07:13 x0002\n```\n\n**指定文件前缀**\n\n```bash\n$ split -b 100k -d -a 4 split_test split.\n$ ll\ntotal 424\n-rw-rw-r-- 1 vagrant vagrant 216320 Jun 25 07:12 split_test\n-rw-rw-r-- 1 vagrant vagrant 102400 Jun 25 07:15 split.0000\n-rw-rw-r-- 1 vagrant vagrant 102400 Jun 25 07:15 split.0001\n-rw-rw-r-- 1 vagrant vagrant  11520 Jun 25 07:15 split.0002\n```\n\n**指定行数分割文件**\n\n```bash\n$ split -l 1000 split_test\n$ ll\ntotal 428\n-rw-rw-r-- 1 vagrant vagrant 216320 Jun 25 07:12 split_test\n-rw-rw-r-- 1 vagrant vagrant  20000 Jun 25 07:20 xaa\n-rw-rw-r-- 1 vagrant vagrant  20000 Jun 25 07:20 xab\n-rw-rw-r-- 1 vagrant vagrant  20000 Jun 25 07:20 xac\n-rw-rw-r-- 1 vagrant vagrant  20000 Jun 25 07:20 xad\n-rw-rw-r-- 1 vagrant vagrant  20000 Jun 25 07:20 xae\n-rw-rw-r-- 1 vagrant vagrant  20000 Jun 25 07:20 xaf\n-rw-rw-r-- 1 vagrant vagrant  20000 Jun 25 07:20 xag\n-rw-rw-r-- 1 vagrant vagrant  20000 Jun 25 07:20 xah\n-rw-rw-r-- 1 vagrant vagrant  20000 Jun 25 07:20 xai\n-rw-rw-r-- 1 vagrant vagrant  20000 Jun 25 07:20 xaj\n-rw-rw-r-- 1 vagrant vagrant  16320 Jun 25 07:20 xak\n\n$ wc -l xaa\n1000 xaa\n```\n","slug":"linux-split","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ana00vm5gqolkh4hua9"},{"title":"Python 内存管理之 `*` 运算的陷阱","date":"2019-07-10T21:05:49.000Z","_content":"\nPython 中实现了 `__mul__` 魔法函数的对象，都支持 `*` 号运算。内置类型更是默认实现了该函数，使用起来也很方便。\n\n<!-- more -->\n<!-- toc -->\n\n但是对列表对象进行 `*` 运算时，却不得不注意一个陷阱。\n\n刚接触这个特性时，美滋滋的以为可以快速的扩展列表，比如这样。\n\n```python\n>>> a = [1] * 3\n>>> a\n[1, 1, 1]\n>>> a[0] = 2\n>>> a\n[2, 1, 1]\n```\n\n看起来没什么问题，然而实际开发中没这么简单的例子，随便复杂一点，就会出现问题。\n\n```python\n>>> b = [[]] * 3\n>>> b\n[[], [], []]\n>>> b[0].append(1)\n>>> b\n[[1], [1], [1]]\n```\n\n很显然出现了问题，我只是给索引位置 `0` 的元素增加了一个子元素，然后所有的元素都改变了。\n\n出现这个问题的原因是 `*` 运算复制的不是子元素，而是当前子元素所指对象的引用，所以当改变该对象时，所有引用该对象的元素都会发生改变。\n\n关于对象引用可以看 [Python 内存管理](/2019/06/16/python-memory-management)，里面有更详细的讲解。\n\n再看一个现象\n\n```python\n>>> b[0] = [2]\n>>> b\n[[2], [1], [1]]\n```\n\n这次就想开始那个简单例子一样，结果跟我们预期的一样，这次是为什么呢？\n\n因为我们没有改变该索引位置的对象，而是让他引向了新的对象 `[2]`，这样就不影响其他索引位置的对象了。\n\n那么怎么才能做到扩展列表呢？答案是列表解析\n\n```python\n>>> c = [[] for i in range(3)]\n>>> c\n[[], [], []]\n>>> c[0].append(1)\n>>> c\n[[1], [], []]\n```\n","source":"_posts/2019-07-10-python-memory-mul.md","raw":"---\ntitle: Python 内存管理之 `*` 运算的陷阱\ndate: 2019-07-10 21:05:49\ntags: [python]\n---\n\nPython 中实现了 `__mul__` 魔法函数的对象，都支持 `*` 号运算。内置类型更是默认实现了该函数，使用起来也很方便。\n\n<!-- more -->\n<!-- toc -->\n\n但是对列表对象进行 `*` 运算时，却不得不注意一个陷阱。\n\n刚接触这个特性时，美滋滋的以为可以快速的扩展列表，比如这样。\n\n```python\n>>> a = [1] * 3\n>>> a\n[1, 1, 1]\n>>> a[0] = 2\n>>> a\n[2, 1, 1]\n```\n\n看起来没什么问题，然而实际开发中没这么简单的例子，随便复杂一点，就会出现问题。\n\n```python\n>>> b = [[]] * 3\n>>> b\n[[], [], []]\n>>> b[0].append(1)\n>>> b\n[[1], [1], [1]]\n```\n\n很显然出现了问题，我只是给索引位置 `0` 的元素增加了一个子元素，然后所有的元素都改变了。\n\n出现这个问题的原因是 `*` 运算复制的不是子元素，而是当前子元素所指对象的引用，所以当改变该对象时，所有引用该对象的元素都会发生改变。\n\n关于对象引用可以看 [Python 内存管理](/2019/06/16/python-memory-management)，里面有更详细的讲解。\n\n再看一个现象\n\n```python\n>>> b[0] = [2]\n>>> b\n[[2], [1], [1]]\n```\n\n这次就想开始那个简单例子一样，结果跟我们预期的一样，这次是为什么呢？\n\n因为我们没有改变该索引位置的对象，而是让他引向了新的对象 `[2]`，这样就不影响其他索引位置的对象了。\n\n那么怎么才能做到扩展列表呢？答案是列表解析\n\n```python\n>>> c = [[] for i in range(3)]\n>>> c\n[[], [], []]\n>>> c[0].append(1)\n>>> c\n[[1], [], []]\n```\n","slug":"python-memory-mul","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2anb00vo5gqo2izjkd22"},{"title":"Centos7 如何安装 Redis","date":"2019-07-12T17:02:08.000Z","_content":"\nCentos 默认仓库不包含 Redis 安装包，我们可以从 Remi 仓库中来安装。\n\n<!-- more -->\n<!-- toc -->\n\n**安装 Remi 仓库**\n\n```bash\n$ sudo yum install epel-release yum-utils\n$ sudo yum install http://rpms.remirepo.net/enterprise/remi-release-7.rpm\n$ sudo yum-config-manager --enable remi\n```\n\n**安装 Redis**\n\n```bash\n$ sudo yum install -y redis\n```\n\n**启动**\n\n```bash\n$ sudo systemctl start redis    # 启动\n$ sudo systemctl enable redis   # 开机自启\n```\n\n**测试是否安装成功**\n\n```bash\n$ redis-cli ping\nPONG\n```\n\n- [How To Install and Configure Redis on CentOS 7](https://linuxize.com/post/how-to-install-and-configure-redis-on-centos-7/)\n\n","source":"_posts/2019-07-12-centos7-install-redis.md","raw":"---\ntitle: Centos7 如何安装 Redis\ndate: 2019-07-12 17:02:08\ntags: [linux]\n---\n\nCentos 默认仓库不包含 Redis 安装包，我们可以从 Remi 仓库中来安装。\n\n<!-- more -->\n<!-- toc -->\n\n**安装 Remi 仓库**\n\n```bash\n$ sudo yum install epel-release yum-utils\n$ sudo yum install http://rpms.remirepo.net/enterprise/remi-release-7.rpm\n$ sudo yum-config-manager --enable remi\n```\n\n**安装 Redis**\n\n```bash\n$ sudo yum install -y redis\n```\n\n**启动**\n\n```bash\n$ sudo systemctl start redis    # 启动\n$ sudo systemctl enable redis   # 开机自启\n```\n\n**测试是否安装成功**\n\n```bash\n$ redis-cli ping\nPONG\n```\n\n- [How To Install and Configure Redis on CentOS 7](https://linuxize.com/post/how-to-install-and-configure-redis-on-centos-7/)\n\n","slug":"centos7-install-redis","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2anc00vq5gqofkztoqyi"},{"title":"apt 下载报错 [Could not get lock /var/lib/dpkg/lock-frontend]","date":"2019-07-11T21:15:29.000Z","_content":"\n有两种情况会导致软件安装工具报这种错\n- `Synaptic Package Manager` 或 `Software Updater` 是打开的。\n- 一些apt命令在终端中运行或者在后台有进程正在运行。\n\n<!-- more -->\n<!-- toc -->\n\n```bash\n$ sudo apt install -y redis\nE: Could not get lock /var/lib/dpkg/lock-frontend - open (11: Resource temporarily unavailable)\nE: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), is another process using it?\n```\n\n**查看进程**\n\n```bash\n$ ps aux | grep apt\nroot 1747 0.0 0.0 4628 808 ? Ss 07:06 0:00 /bin/sh /usr/lib/apt/apt.systemd.daily update\nroot 1769 0.0 0.0 4628 1820 ? S 07:06 0:00 /bin/sh /usr/lib/apt/apt.systemd.daily lock_is_held update\n_apt 16225 3.0 0.2 80192 8796 ? S 07:07 0:04 /usr/lib/apt/methods/http\n_apt 16226 0.7 0.2 80188 8800 ? S 07:07 0:01 /usr/lib/apt/methods/http\n```\n\n**停掉进程**\n\n```bash\n$ sudo killall apt apt-get\n```\n\n这是比较快捷的方式，但是还不够，前两条都无法关闭，只能将 pid 杀死\n\n```bash\n$ sudo kill -9 <pid>\n```\n\n**删除加锁文件**\n\n```bash\n$ sudo rm /var/lib/apt/lists/lock\n$ sudo rm /var/cache/apt/archives/lock\n$ sudo rm /var/lib/dpkg/lock*\n```\n\n**重新配置 dpkg**\n\n```bash\n$ sudo dpkg --configure -a\ndpkg: error: parsing file '/var/lib/dpkg/updates/0004' near line 0:\nnewline in field name '#padding'\n```\n\n这时候有可能还会出现一个错误，这时要手动删除该文件\n\n```bash\n$ sudo rm -rf /var/lib/dpkg/updates/0004\n```\n\n再次执行配置命令，然后继续安装软件即可\n\n```bash\n$ sudo apt update -y\n$ sudo apt install -y redis\n```\n\n","source":"_posts/2019-07-11-apt-install-error.md","raw":"---\ntitle: apt 下载报错 [Could not get lock /var/lib/dpkg/lock-frontend]\ndate: 2019-07-11 21:15:29\ntags: [linux]\n---\n\n有两种情况会导致软件安装工具报这种错\n- `Synaptic Package Manager` 或 `Software Updater` 是打开的。\n- 一些apt命令在终端中运行或者在后台有进程正在运行。\n\n<!-- more -->\n<!-- toc -->\n\n```bash\n$ sudo apt install -y redis\nE: Could not get lock /var/lib/dpkg/lock-frontend - open (11: Resource temporarily unavailable)\nE: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), is another process using it?\n```\n\n**查看进程**\n\n```bash\n$ ps aux | grep apt\nroot 1747 0.0 0.0 4628 808 ? Ss 07:06 0:00 /bin/sh /usr/lib/apt/apt.systemd.daily update\nroot 1769 0.0 0.0 4628 1820 ? S 07:06 0:00 /bin/sh /usr/lib/apt/apt.systemd.daily lock_is_held update\n_apt 16225 3.0 0.2 80192 8796 ? S 07:07 0:04 /usr/lib/apt/methods/http\n_apt 16226 0.7 0.2 80188 8800 ? S 07:07 0:01 /usr/lib/apt/methods/http\n```\n\n**停掉进程**\n\n```bash\n$ sudo killall apt apt-get\n```\n\n这是比较快捷的方式，但是还不够，前两条都无法关闭，只能将 pid 杀死\n\n```bash\n$ sudo kill -9 <pid>\n```\n\n**删除加锁文件**\n\n```bash\n$ sudo rm /var/lib/apt/lists/lock\n$ sudo rm /var/cache/apt/archives/lock\n$ sudo rm /var/lib/dpkg/lock*\n```\n\n**重新配置 dpkg**\n\n```bash\n$ sudo dpkg --configure -a\ndpkg: error: parsing file '/var/lib/dpkg/updates/0004' near line 0:\nnewline in field name '#padding'\n```\n\n这时候有可能还会出现一个错误，这时要手动删除该文件\n\n```bash\n$ sudo rm -rf /var/lib/dpkg/updates/0004\n```\n\n再次执行配置命令，然后继续安装软件即可\n\n```bash\n$ sudo apt update -y\n$ sudo apt install -y redis\n```\n\n","slug":"apt-install-error","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ane00vs5gqoennr464d"},{"title":"Python 对 JSON 中的特殊类型进行 Encoder","date":"2019-07-13T09:56:59.000Z","_content":"\n\nPython 处理 JSON 数据时，`dumps` 函数是经常用到的，当 JSON 数据中有特殊类型时，往往是比较头疼的，因为经常会报这样一个错误。\n\n<!-- more -->\n<!-- toc -->\n\n## 自定义编码类\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport json\nfrom datetime import datetime\n\nUSER_DATA = dict(\n    id = 1, name = 'wxnacy', ts = datetime.now()\n)\nprint(json.dumps(USER_DATA))\n```\n\n```bash\nTraceback (most recent call last):\n  File \"/Users/wxnacy/PycharmProjects/study/python/office_module/json_demo/dumps.py\", line 74, in <module>\n    dumps_encoder()\n  File \"/Users/wxnacy/PycharmProjects/study/python/office_module/json_demo/dumps.py\", line 68, in dumps_encoder\n    print(json.dumps(USER_DATA))\n  File \"/Users/wxnacy/.pyenv/versions/3.6.0/Python.framework/Versions/3.6/lib/python3.6/json/__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n  File \"/Users/wxnacy/.pyenv/versions/3.6.0/Python.framework/Versions/3.6/lib/python3.6/json/encoder.py\", line 199, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n  File \"/Users/wxnacy/.pyenv/versions/3.6.0/Python.framework/Versions/3.6/lib/python3.6/json/encoder.py\", line 257, in iterencode\n    return _iterencode(o, 0)\n  File \"/Users/wxnacy/.pyenv/versions/3.6.0/Python.framework/Versions/3.6/lib/python3.6/json/encoder.py\", line 180, in default\n    o.__class__.__name__)\nTypeError: Object of type 'datetime' is not JSON serializable\n```\n\n原因在于 `dumps` 函数不知道如何处理 `datetime` 对象，默认情况下 `json` 模块使用 `json.JSONEncoder` 类来进行编码，此时我们需要自定义一下编码类。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nclass CustomEncoder(json.JSONEncoder):\n    def default(self, x):\n        if isinstance(x, datetime):\n            return int(x.timestamp())\n        return super().default(self, x)\n```\n\n定义编码类 `CustomEncoder` 并重写实例的 `default` 函数，对特殊类型进行处理，其余类型继续使用父类的解析。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport json\nfrom datetime import datetime\n\nclass CustomEncoder(json.JSONEncoder):\n    def default(self, x):\n        if isinstance(x, datetime):\n            return int(x.timestamp())\n        return super().default(self, x)\n\nUSER_DATA = dict(\n    id = 1, name = 'wxnacy', ts = datetime.now()\n)\nprint(json.dumps(USER_DATA, cls=CustomEncoder))\n# {\"id\": 1, \"name\": \"wxnacy\", \"ts\": 1562938926}\n```\n\n最后整合起来，将类使用 `cls` 参数传入 `dumps` 函数即可。\n\n使用 `CustomEncoder` 实例的 `encode` 函数可以对对象进行转码\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\nprint(CustomEncoder().encode(datetime.now()))\n# 1562939035\n```\n\n在父类源码中，所有的编码逻辑都在 `encode` 函数中，`default` 只负责抛出 `TypeError` 异常，这就是文章开始报错的出处。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef default(self, o):\n    \"\"\"Implement this method in a subclass such that it returns\n    a serializable object for ``o``, or calls the base implementation\n    (to raise a ``TypeError``).\n\n    For example, to support arbitrary iterators, you could\n    implement default like this::\n\n        def default(self, o):\n            try:\n                iterable = iter(o)\n            except TypeError:\n                pass\n            else:\n                return list(iterable)\n            # Let the base class default method raise the TypeError\n            return JSONEncoder.default(self, o)\n\n    \"\"\"\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                    f'is not JSON serializable')\n\ndef encode(self, o):\n    \"\"\"Return a JSON string representation of a Python data structure.\n\n    >>> from json.encoder import JSONEncoder\n    >>> JSONEncoder().encode({\"foo\": [\"bar\", \"baz\"]})\n    '{\"foo\": [\"bar\", \"baz\"]}'\n\n    \"\"\"\n    # This is for extremely simple cases and benchmarks.\n    if isinstance(o, str):\n        if self.ensure_ascii:\n            return encode_basestring_ascii(o)\n        else:\n            return encode_basestring(o)\n    # This doesn't pass the iterator directly to ''.join() because the\n    # exceptions aren't as detailed.  The list call should be roughly\n    # equivalent to the PySequence_Fast that ''.join() would do.\n    chunks = self.iterencode(o, _one_shot=True)\n    if not isinstance(chunks, (list, tuple)):\n        chunks = list(chunks)\n    return ''.join(chunks)\n```\n\n## 单分派装饰器处理对象\n\n`CustomEncoder` 如果处理的对象种类很多的话，需要写多个 `if elif else` 来区分，这样并不是不行，但是不够优雅，不够 pythonic\n\n根据对象的类型不同，而做出不同的处理。刚好有个装饰器可以做到这点，它就是单分派函数 `functools.singledispatch`\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom datetime import datetime\nfrom datetime import date\nfrom functools import singledispatch\n\nclass CustomEncoder(json.JSONEncoder):\n    def default(self, x):\n        try:\n            return encode(x)\n        except TypeError:\n            return super().default(self, x)\n\n@singledispatch             # 1\ndef encode(x):\n    raise TypeError('Unencode type')\n\n@encode.register(datetime)  # 2\ndef _(x):\n    return int(x.timestamp())\n\n@encode.register(date)\ndef _(x):\n    return x.isoformat()\n\nprint(json.dumps(dict(dt = datetime.now(), d = date.today()), cls=CustomEncoder))\n# {\"dt\": 1562940781, \"d\": \"2019-07-12\"}\n```\n\n- 1 使用 `@singledispatch` 装饰 `encode` 函数，是他处理默认类型。同时给他添加一个装饰器构造函数变量。\n- 2 `@encode.register()` 是一个装饰器构造函数，接收需要处理的对象类型作为参数。用它装饰的函数不需要名字，*_* 代替即可。\n\n最后提一点，`json` 也可以在命令行中使用\n\n```bash\n$ echo '{\"json\": \"obj\"}' | python -m json.tool\n{\n    \"json\": \"obj\"\n}\n```\n\n- [json](https://docs.python.org/3/library/json.html)\n","source":"_posts/2019-07-13-python-json-encoder-decoder.md","raw":"---\ntitle: Python 对 JSON 中的特殊类型进行 Encoder\ntags:\n  - python\ndate: 2019-07-13 09:56:59\n---\n\n\nPython 处理 JSON 数据时，`dumps` 函数是经常用到的，当 JSON 数据中有特殊类型时，往往是比较头疼的，因为经常会报这样一个错误。\n\n<!-- more -->\n<!-- toc -->\n\n## 自定义编码类\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport json\nfrom datetime import datetime\n\nUSER_DATA = dict(\n    id = 1, name = 'wxnacy', ts = datetime.now()\n)\nprint(json.dumps(USER_DATA))\n```\n\n```bash\nTraceback (most recent call last):\n  File \"/Users/wxnacy/PycharmProjects/study/python/office_module/json_demo/dumps.py\", line 74, in <module>\n    dumps_encoder()\n  File \"/Users/wxnacy/PycharmProjects/study/python/office_module/json_demo/dumps.py\", line 68, in dumps_encoder\n    print(json.dumps(USER_DATA))\n  File \"/Users/wxnacy/.pyenv/versions/3.6.0/Python.framework/Versions/3.6/lib/python3.6/json/__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n  File \"/Users/wxnacy/.pyenv/versions/3.6.0/Python.framework/Versions/3.6/lib/python3.6/json/encoder.py\", line 199, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n  File \"/Users/wxnacy/.pyenv/versions/3.6.0/Python.framework/Versions/3.6/lib/python3.6/json/encoder.py\", line 257, in iterencode\n    return _iterencode(o, 0)\n  File \"/Users/wxnacy/.pyenv/versions/3.6.0/Python.framework/Versions/3.6/lib/python3.6/json/encoder.py\", line 180, in default\n    o.__class__.__name__)\nTypeError: Object of type 'datetime' is not JSON serializable\n```\n\n原因在于 `dumps` 函数不知道如何处理 `datetime` 对象，默认情况下 `json` 模块使用 `json.JSONEncoder` 类来进行编码，此时我们需要自定义一下编码类。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nclass CustomEncoder(json.JSONEncoder):\n    def default(self, x):\n        if isinstance(x, datetime):\n            return int(x.timestamp())\n        return super().default(self, x)\n```\n\n定义编码类 `CustomEncoder` 并重写实例的 `default` 函数，对特殊类型进行处理，其余类型继续使用父类的解析。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport json\nfrom datetime import datetime\n\nclass CustomEncoder(json.JSONEncoder):\n    def default(self, x):\n        if isinstance(x, datetime):\n            return int(x.timestamp())\n        return super().default(self, x)\n\nUSER_DATA = dict(\n    id = 1, name = 'wxnacy', ts = datetime.now()\n)\nprint(json.dumps(USER_DATA, cls=CustomEncoder))\n# {\"id\": 1, \"name\": \"wxnacy\", \"ts\": 1562938926}\n```\n\n最后整合起来，将类使用 `cls` 参数传入 `dumps` 函数即可。\n\n使用 `CustomEncoder` 实例的 `encode` 函数可以对对象进行转码\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\nprint(CustomEncoder().encode(datetime.now()))\n# 1562939035\n```\n\n在父类源码中，所有的编码逻辑都在 `encode` 函数中，`default` 只负责抛出 `TypeError` 异常，这就是文章开始报错的出处。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\ndef default(self, o):\n    \"\"\"Implement this method in a subclass such that it returns\n    a serializable object for ``o``, or calls the base implementation\n    (to raise a ``TypeError``).\n\n    For example, to support arbitrary iterators, you could\n    implement default like this::\n\n        def default(self, o):\n            try:\n                iterable = iter(o)\n            except TypeError:\n                pass\n            else:\n                return list(iterable)\n            # Let the base class default method raise the TypeError\n            return JSONEncoder.default(self, o)\n\n    \"\"\"\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                    f'is not JSON serializable')\n\ndef encode(self, o):\n    \"\"\"Return a JSON string representation of a Python data structure.\n\n    >>> from json.encoder import JSONEncoder\n    >>> JSONEncoder().encode({\"foo\": [\"bar\", \"baz\"]})\n    '{\"foo\": [\"bar\", \"baz\"]}'\n\n    \"\"\"\n    # This is for extremely simple cases and benchmarks.\n    if isinstance(o, str):\n        if self.ensure_ascii:\n            return encode_basestring_ascii(o)\n        else:\n            return encode_basestring(o)\n    # This doesn't pass the iterator directly to ''.join() because the\n    # exceptions aren't as detailed.  The list call should be roughly\n    # equivalent to the PySequence_Fast that ''.join() would do.\n    chunks = self.iterencode(o, _one_shot=True)\n    if not isinstance(chunks, (list, tuple)):\n        chunks = list(chunks)\n    return ''.join(chunks)\n```\n\n## 单分派装饰器处理对象\n\n`CustomEncoder` 如果处理的对象种类很多的话，需要写多个 `if elif else` 来区分，这样并不是不行，但是不够优雅，不够 pythonic\n\n根据对象的类型不同，而做出不同的处理。刚好有个装饰器可以做到这点，它就是单分派函数 `functools.singledispatch`\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom datetime import datetime\nfrom datetime import date\nfrom functools import singledispatch\n\nclass CustomEncoder(json.JSONEncoder):\n    def default(self, x):\n        try:\n            return encode(x)\n        except TypeError:\n            return super().default(self, x)\n\n@singledispatch             # 1\ndef encode(x):\n    raise TypeError('Unencode type')\n\n@encode.register(datetime)  # 2\ndef _(x):\n    return int(x.timestamp())\n\n@encode.register(date)\ndef _(x):\n    return x.isoformat()\n\nprint(json.dumps(dict(dt = datetime.now(), d = date.today()), cls=CustomEncoder))\n# {\"dt\": 1562940781, \"d\": \"2019-07-12\"}\n```\n\n- 1 使用 `@singledispatch` 装饰 `encode` 函数，是他处理默认类型。同时给他添加一个装饰器构造函数变量。\n- 2 `@encode.register()` 是一个装饰器构造函数，接收需要处理的对象类型作为参数。用它装饰的函数不需要名字，*_* 代替即可。\n\n最后提一点，`json` 也可以在命令行中使用\n\n```bash\n$ echo '{\"json\": \"obj\"}' | python -m json.tool\n{\n    \"json\": \"obj\"\n}\n```\n\n- [json](https://docs.python.org/3/library/json.html)\n","slug":"python-json-encoder-decoder","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2anf00vu5gqo58v8u5kq"},{"title":"Nginx 报错 no resolver defined to resolve","date":"2019-07-16T14:49:25.000Z","_content":"\n\n起因是使用 `ngxin + lua` 链接外部机器 Redis 时产生的\n\n<!-- more -->\n<!-- toc -->\n\n原因是 Nginx 0.6.18以后的版本中启用了一个resolver指令，在使用变量来构造某个server地址的时候一定要用resolver指令来指定DNS服务器的地址，所以解决这个问题的方法很简单：在nginx的配置文件中的http{}部分添加一行DNS地址即可\n\n```bash\nhttp {\n    resolver 8.8.8.8;\n    server {\n        ...\n    }\n}\n```\n\n如果机器支持 ipv6，可以去掉对它的支持，免得产生类似错误。\n\n```bash\nresolver 8.8.8.8 ipv6=off;\n```\n\n- [No resolver defined to resolve](https://github.com/openresty/lua-resty-redis/issues/159)\n","source":"_posts/2019-07-16-nginx-no-resolver-defined-to-resolve.md","raw":"---\ntitle: Nginx 报错 no resolver defined to resolve\ntags:\n  - nginx\ndate: 2019-07-16 14:49:25\n---\n\n\n起因是使用 `ngxin + lua` 链接外部机器 Redis 时产生的\n\n<!-- more -->\n<!-- toc -->\n\n原因是 Nginx 0.6.18以后的版本中启用了一个resolver指令，在使用变量来构造某个server地址的时候一定要用resolver指令来指定DNS服务器的地址，所以解决这个问题的方法很简单：在nginx的配置文件中的http{}部分添加一行DNS地址即可\n\n```bash\nhttp {\n    resolver 8.8.8.8;\n    server {\n        ...\n    }\n}\n```\n\n如果机器支持 ipv6，可以去掉对它的支持，免得产生类似错误。\n\n```bash\nresolver 8.8.8.8 ipv6=off;\n```\n\n- [No resolver defined to resolve](https://github.com/openresty/lua-resty-redis/issues/159)\n","slug":"nginx-no-resolver-defined-to-resolve","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ang00vw5gqop6sksymm"},{"title":"Python 使用 Requests 模块进行身份验证","date":"2019-07-17T10:46:27.000Z","_content":"\n\n[Requests](https://github.com/kennethreitz/requests) 可以说是 Python 最好用的 http 模块，没有之一。\n\n<!-- more -->\n\n它对于身份验证有非常方便的使用规则。\n\n**基本身份验证**\n\n```python\n>>> from requests.auth import HTTPBasicAuth\n>>> requests.get('https://api.github.com/user', auth=HTTPBasicAuth('user', 'pass'))\n<Response [200]>\n```\n\n因为这种验证非常常用，所以也提供了方便的写法。\n\n```python\n>>> requests.get('https://api.github.com/user', auth=('user', 'pass'))\n<Response [200]>\n```\n\n**摘要式身份认证**\n\n```python\n>>> from requests.auth import HTTPDigestAuth\n>>> url = 'http://httpbin.org/digest-auth/auth/user/pass'\n>>> requests.get(url, auth=HTTPDigestAuth('user', 'pass'))\n<Response [200]>\n```\n\n**OAuth 1**\n\n```python\n>>> import requests\n>>> from requests_oauthlib import OAuth1\n>>> url = 'https://api.twitter.com/1.1/account/verify_credentials.json'\n>>> auth = OAuth1('YOUR_APP_KEY', 'YOUR_APP_SECRET',\n...               'USER_OAUTH_TOKEN', 'USER_OAUTH_TOKEN_SECRET')\n>>> requests.get(url, auth=auth)\n<Response [200]>\n```\n\n更多复杂验证如 OAuth 2，请参看[文档](http://docs.python-requests.org/zh_CN/latest/user/authentication.html?highlight=requests.auth#oauth-2-openid)\n","source":"_posts/2019-07-17-requests-auth.md","raw":"---\ntitle: Python 使用 Requests 模块进行身份验证\ntags:\n  - python\ndate: 2019-07-17 10:46:27\n---\n\n\n[Requests](https://github.com/kennethreitz/requests) 可以说是 Python 最好用的 http 模块，没有之一。\n\n<!-- more -->\n\n它对于身份验证有非常方便的使用规则。\n\n**基本身份验证**\n\n```python\n>>> from requests.auth import HTTPBasicAuth\n>>> requests.get('https://api.github.com/user', auth=HTTPBasicAuth('user', 'pass'))\n<Response [200]>\n```\n\n因为这种验证非常常用，所以也提供了方便的写法。\n\n```python\n>>> requests.get('https://api.github.com/user', auth=('user', 'pass'))\n<Response [200]>\n```\n\n**摘要式身份认证**\n\n```python\n>>> from requests.auth import HTTPDigestAuth\n>>> url = 'http://httpbin.org/digest-auth/auth/user/pass'\n>>> requests.get(url, auth=HTTPDigestAuth('user', 'pass'))\n<Response [200]>\n```\n\n**OAuth 1**\n\n```python\n>>> import requests\n>>> from requests_oauthlib import OAuth1\n>>> url = 'https://api.twitter.com/1.1/account/verify_credentials.json'\n>>> auth = OAuth1('YOUR_APP_KEY', 'YOUR_APP_SECRET',\n...               'USER_OAUTH_TOKEN', 'USER_OAUTH_TOKEN_SECRET')\n>>> requests.get(url, auth=auth)\n<Response [200]>\n```\n\n更多复杂验证如 OAuth 2，请参看[文档](http://docs.python-requests.org/zh_CN/latest/user/authentication.html?highlight=requests.auth#oauth-2-openid)\n","slug":"requests-auth","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ani00vy5gqo515znwh6"},{"title":"Vagrant 使用 root 账号登录","date":"2019-07-18T17:42:57.000Z","_content":"\n\nVagrant 想要使用 root 身份登录要稍微麻烦一点。网上的文章大多是从一个地方抄过来的，并且还没抄对，所以我在这里总结一篇正确做法。\n\n<!-- more -->\n<!-- toc -->\n\n## 修改 sshd 配置\n\n首先以默认身份登录，并修改 `sshd` 配置文件\n\n```bash\n$ vagrant ssh\n$ sudo vim /etc/ssh/sshd_config\n```\n\n做如下变动\n\n```bash\n# PermitRootLogin prohibit-password\nPermitRootLogin yes             # 允许 root 身份登录\n# PasswordAuthentication on\nPasswordAuthentication yes      # 可以使用密码登录\n```\n\n重启 `sshd` 服务\n\n```bash\n$ sudo systemctl restart sshd\n```\n\n## 修改 Vagrantfile\n\n增加如下配置\n\n```ruby\nconfig.ssh.username = 'root'\nconfig.ssh.password = 'root'\nconfig.ssh.insert_key = false\n```\n\n然后再次登录即可\n\n```bash\n$ vagrant ssh\n```\n\n这里注意，网上大部分给出的例子是设置 `config.ssh.insert_key = true`，如果你这样设置了，会发现 `config.ssh.password` 将会失效，每次登录都需要手动输入密码。\n\n为什么呢？根据[官网](https://www.vagrantup.com/docs/vagrantfile/ssh_settings.html#config-ssh-insert_key)的定义，`config.ssh.insert_key` 代表了是否使用公私钥来登录虚拟机，如果你想要使用不那么安全的登录方式，比如密码登录，则可以将它设置为 `false`，它的默认值为 `true`\n\n了解了这一点，就可以发现手动设置 `config.ssh.insert_key=true` 是有点蠢的做法。\n\n## 使用公私钥登录\n\n使用密码登录的缺点很明显，明文的密码就像只穿一个裤衩就出门一样让人不安，默认的 `vagrant` 就不需要密码，那它是怎么登录的呢？\n\n关于怎么使用公私钥登录服务器可以查看这篇文章 [Linux SSH 登陆远程服务器和无密码操作](/2017/08/23/linux-2017-08-23-ssh/)\n\n有了这篇文章作为基础，我们来查看下 `vagrant` 账号是否做了秘钥登录。\n\n```bash\n$ cat /home/vagrant/.ssh/authorized_keys\n```\n\n执行这条命令后会发现文件中包含一条记录，证明了确实使用了秘钥登录。\n\n下面我们为 `root` 用户赋予秘钥登录的功能\n\n首先将电脑的公钥内容\n\n```bash\n$ cat ~/.ssh/id_rsa.pub\n```\n\n复制到虚拟机中\n\n```bash\n$ echo '公钥内容' >> /home/vagrant/.ssh/authorized_keys\n```\n\n然后修改 `Vagrantfile` 配置\n\n```ruby\nconfig.ssh.username = 'root'                                # 使用 root 身份登录\nconfig.ssh.private_key_path = '/Users/wxnacy/.ssh/id_rsa'   # 私钥位置\n```\n\n接下来在登录会发现如 `vagrant` 账号般顺滑\n\n- [SSH Settings](https://www.vagrantup.com/docs/vagrantfile/ssh_settings.html#config-ssh-private_key_path)\n","source":"_posts/2019-07-18-vagrant-root-login.md","raw":"---\ntitle: Vagrant 使用 root 账号登录\ntags:\n  - vagrant\ndate: 2019-07-18 17:42:57\n---\n\n\nVagrant 想要使用 root 身份登录要稍微麻烦一点。网上的文章大多是从一个地方抄过来的，并且还没抄对，所以我在这里总结一篇正确做法。\n\n<!-- more -->\n<!-- toc -->\n\n## 修改 sshd 配置\n\n首先以默认身份登录，并修改 `sshd` 配置文件\n\n```bash\n$ vagrant ssh\n$ sudo vim /etc/ssh/sshd_config\n```\n\n做如下变动\n\n```bash\n# PermitRootLogin prohibit-password\nPermitRootLogin yes             # 允许 root 身份登录\n# PasswordAuthentication on\nPasswordAuthentication yes      # 可以使用密码登录\n```\n\n重启 `sshd` 服务\n\n```bash\n$ sudo systemctl restart sshd\n```\n\n## 修改 Vagrantfile\n\n增加如下配置\n\n```ruby\nconfig.ssh.username = 'root'\nconfig.ssh.password = 'root'\nconfig.ssh.insert_key = false\n```\n\n然后再次登录即可\n\n```bash\n$ vagrant ssh\n```\n\n这里注意，网上大部分给出的例子是设置 `config.ssh.insert_key = true`，如果你这样设置了，会发现 `config.ssh.password` 将会失效，每次登录都需要手动输入密码。\n\n为什么呢？根据[官网](https://www.vagrantup.com/docs/vagrantfile/ssh_settings.html#config-ssh-insert_key)的定义，`config.ssh.insert_key` 代表了是否使用公私钥来登录虚拟机，如果你想要使用不那么安全的登录方式，比如密码登录，则可以将它设置为 `false`，它的默认值为 `true`\n\n了解了这一点，就可以发现手动设置 `config.ssh.insert_key=true` 是有点蠢的做法。\n\n## 使用公私钥登录\n\n使用密码登录的缺点很明显，明文的密码就像只穿一个裤衩就出门一样让人不安，默认的 `vagrant` 就不需要密码，那它是怎么登录的呢？\n\n关于怎么使用公私钥登录服务器可以查看这篇文章 [Linux SSH 登陆远程服务器和无密码操作](/2017/08/23/linux-2017-08-23-ssh/)\n\n有了这篇文章作为基础，我们来查看下 `vagrant` 账号是否做了秘钥登录。\n\n```bash\n$ cat /home/vagrant/.ssh/authorized_keys\n```\n\n执行这条命令后会发现文件中包含一条记录，证明了确实使用了秘钥登录。\n\n下面我们为 `root` 用户赋予秘钥登录的功能\n\n首先将电脑的公钥内容\n\n```bash\n$ cat ~/.ssh/id_rsa.pub\n```\n\n复制到虚拟机中\n\n```bash\n$ echo '公钥内容' >> /home/vagrant/.ssh/authorized_keys\n```\n\n然后修改 `Vagrantfile` 配置\n\n```ruby\nconfig.ssh.username = 'root'                                # 使用 root 身份登录\nconfig.ssh.private_key_path = '/Users/wxnacy/.ssh/id_rsa'   # 私钥位置\n```\n\n接下来在登录会发现如 `vagrant` 账号般顺滑\n\n- [SSH Settings](https://www.vagrantup.com/docs/vagrantfile/ssh_settings.html#config-ssh-private_key_path)\n","slug":"vagrant-root-login","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2anj00w05gqoig58dtf4"},{"title":"Docker 报错 Please provide a source image with `from` prior to commit","date":"2019-07-22T09:38:03.000Z","_content":"\n\n在使用 openresty 的 [docker](https://hub.docker.com/r/openresty/openresty/) 版本时，需要重构镜像，本地测试通过，但服务器上报错。\n\n<!-- more -->\n<!-- toc -->\n\n```bash\nPlease provide a source image with `from` prior to commit\n```\n\nGoogle 后发现问题出在这里\n\n```bash\nARG RESTY_IMAGE_BASE=\"ubuntu\"\nARG RESTY_IMAGE_TAG=\"bionic\"\n\nFROM ${RESTY_IMAGE_BASE}:${RESTY_IMAGE_TAG}\n```\n\n在老版本中是不支持 `FROM` 前使用 `ARG` 的，这个问题在 [docker 17.05.0-ce](https://github.com/moby/moby/pull/31352) 版本中得到了修改，而服务器上的版本比较老，所以才报错，只要升级版本即可。\n","source":"_posts/2019-07-22-docker-before-from-use-args.md","raw":"---\ntitle: Docker 报错 Please provide a source image with `from` prior to commit\ntags:\n  - docker\ndate: 2019-07-22 09:38:03\n---\n\n\n在使用 openresty 的 [docker](https://hub.docker.com/r/openresty/openresty/) 版本时，需要重构镜像，本地测试通过，但服务器上报错。\n\n<!-- more -->\n<!-- toc -->\n\n```bash\nPlease provide a source image with `from` prior to commit\n```\n\nGoogle 后发现问题出在这里\n\n```bash\nARG RESTY_IMAGE_BASE=\"ubuntu\"\nARG RESTY_IMAGE_TAG=\"bionic\"\n\nFROM ${RESTY_IMAGE_BASE}:${RESTY_IMAGE_TAG}\n```\n\n在老版本中是不支持 `FROM` 前使用 `ARG` 的，这个问题在 [docker 17.05.0-ce](https://github.com/moby/moby/pull/31352) 版本中得到了修改，而服务器上的版本比较老，所以才报错，只要升级版本即可。\n","slug":"docker-before-from-use-args","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2anl00w25gqojfb9mrl3"},{"title":"Docker 改变镜像下载目录","date":"2019-07-26T15:16:22.000Z","_content":"\n\nDocker 占用储存空间很大的部分在于下载的镜像，因为 Docker 包括容器、镜像等存储数据都默认保存在 `/var/lib/docker` 目录下，如果系统磁盘空间比较小的话就会很麻烦，我想将目录改为挂载的扩充磁盘上。\n\n<!-- more -->\n<!-- toc -->\n\n先停止 Docker\n\n```bash\n$ sudo systemctl stop docker\n```\n\n确认没有 Docker 进程在跑\n\n```bash\n$ ps faux | grep docker\n```\n\n假设新的目录为 `/data/docker`，先将数据复制到新的目录下\n\n```bash\n$ sudo cp -r /var/lib/docker /data/docker\n```\n\n然后将该目录软连接到 `/var/lib/docker`\n\n```bash\n$ sudo ln -sf /data/docker /var/lib/docker\n```\n\n启动 Docker\n\n```bash\n$ sudo systemctl start docker\n```\n\n最后查看镜像列表是否正常\n\n```bash\n$ sudo docker image ls\n```\n\n这样软连接的方式是比较灵活的，不会改变我们熟知的存储目录。官方论坛中也有修改配置文件来全局修改存储位置的方法，感兴趣的同学可以点击下方链接进入。\n\n- [How do I change the Docker image installation directory?](https://forums.docker.com/t/how-do-i-change-the-docker-image-installation-directory/1169/1)\n","source":"_posts/2019-07-26-docker-change-store-dir.md","raw":"---\ntitle: Docker 改变镜像下载目录\ntags:\n  - docker\ndate: 2019-07-26 15:16:22\n---\n\n\nDocker 占用储存空间很大的部分在于下载的镜像，因为 Docker 包括容器、镜像等存储数据都默认保存在 `/var/lib/docker` 目录下，如果系统磁盘空间比较小的话就会很麻烦，我想将目录改为挂载的扩充磁盘上。\n\n<!-- more -->\n<!-- toc -->\n\n先停止 Docker\n\n```bash\n$ sudo systemctl stop docker\n```\n\n确认没有 Docker 进程在跑\n\n```bash\n$ ps faux | grep docker\n```\n\n假设新的目录为 `/data/docker`，先将数据复制到新的目录下\n\n```bash\n$ sudo cp -r /var/lib/docker /data/docker\n```\n\n然后将该目录软连接到 `/var/lib/docker`\n\n```bash\n$ sudo ln -sf /data/docker /var/lib/docker\n```\n\n启动 Docker\n\n```bash\n$ sudo systemctl start docker\n```\n\n最后查看镜像列表是否正常\n\n```bash\n$ sudo docker image ls\n```\n\n这样软连接的方式是比较灵活的，不会改变我们熟知的存储目录。官方论坛中也有修改配置文件来全局修改存储位置的方法，感兴趣的同学可以点击下方链接进入。\n\n- [How do I change the Docker image installation directory?](https://forums.docker.com/t/how-do-i-change-the-docker-image-installation-directory/1169/1)\n","slug":"docker-change-store-dir","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2anm00w45gqoh6ak17kp"},{"title":"Python 报错 f-string expression part cannot include a backslash","date":"2019-07-30T15:02:15.000Z","_content":"\n\nPython 3.6 版本新增加的 `f-string` 语句非常简洁，其中可以直接在字符串中使用表达式，可以让代码写起来非常方便。\n\n<!-- more -->\n<!-- toc -->\n\n不过也要了解它的一些特性，不然就可能会报一个错误。\n\n```python\n>>> n = 2\n>>> f'say {\"\\t\" * n}'\n  File \"<input>\", line 1\nSyntaxError: f-string expression part cannot include a backslash\n```\n\n好像也没有用错，确实应该这样写的，错误翻译过来是 `f-string` 的表达式中不能出现反斜杠。\n\n那记住这一点，以后写起来注意下就好了，有两个方法解决。\n\n**外部计算**\n\n将表达式挪到外部计算好后在传入\n\n```python\n>>> n = 2\n>>> tables = \"\\t\" * n\n>>> f'say {tables}'\n'say \\t\\t'\n```\n\n**使用 format **\n\n```python\n>>> 'say {}'.format('\\t' * n)\n'say \\t\\t'\n```\n","source":"_posts/2019-07-30-python-f-string-error1.md","raw":"---\ntitle: Python 报错 f-string expression part cannot include a backslash\ntags:\n  - python\ndate: 2019-07-30 15:02:15\n---\n\n\nPython 3.6 版本新增加的 `f-string` 语句非常简洁，其中可以直接在字符串中使用表达式，可以让代码写起来非常方便。\n\n<!-- more -->\n<!-- toc -->\n\n不过也要了解它的一些特性，不然就可能会报一个错误。\n\n```python\n>>> n = 2\n>>> f'say {\"\\t\" * n}'\n  File \"<input>\", line 1\nSyntaxError: f-string expression part cannot include a backslash\n```\n\n好像也没有用错，确实应该这样写的，错误翻译过来是 `f-string` 的表达式中不能出现反斜杠。\n\n那记住这一点，以后写起来注意下就好了，有两个方法解决。\n\n**外部计算**\n\n将表达式挪到外部计算好后在传入\n\n```python\n>>> n = 2\n>>> tables = \"\\t\" * n\n>>> f'say {tables}'\n'say \\t\\t'\n```\n\n**使用 format **\n\n```python\n>>> 'say {}'.format('\\t' * n)\n'say \\t\\t'\n```\n","slug":"python-f-string-error1","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ano00w65gqox1bspo8e"},{"title":"Ansible 在 Vagrant 中使用","date":"2019-07-31T17:38:41.000Z","_content":"\n\nAnsible 在 Vagrant 中使用的难点在于获取 ssh 登录需要的配置信息。\n\n<!-- more -->\n<!-- toc -->\n\n在默认 `Vagrantfile` 中我们找不到这些信息，此时需要通过 `vagrant ssh-config` 命令查看\n\n```bash\n$ vagrant ssh-config\nHost default\n  HostName 127.0.0.1\n  User vagrant\n  Port 2222\n  UserKnownHostsFile /dev/null\n  StrictHostKeyChecking no\n  PasswordAuthentication no\n  IdentityFile /Users/wxnacy/.vagrant.d/boxes/wxnacy-VAGRANTSLASH-ubuntu1804/0/virtualbox/vagrant_private_key\n  IdentitiesOnly yes\n  LogLevel FATAL\n```\n\n啊，让我费解的 `IdentityFile` 文件终于露出来，关键就是这个文件。\n\n接下来我们只需要配置 Ansible 的 hosts 文件，`/etc/ansible/hosts` 中添加，或者创建独立的 `hosts` 文件\n\n```bash\n[vagrant]\n127.0.0.1 ansible_ssh_user=vagrant ansible_ssh_port=2222 ansible_ssh_private_key_file=/Users/wxnacy/.vagrant.d/boxes/wxnacy-VAGRANTSLASH-ubuntu1804/0/virtualbox/vagrant_private_key\n```\n\n最后查看是否能正常连接\n\n```bash\n$ ansible all -m command -a 'who' --inventory-file=hosts\n127.0.0.1 | CHANGED | rc=0 >>\nvagrant  pts/0        Jul 30 07:35 (10.0.2.2)\nvagrant  pts/1        Jul 30 06:19 (10.0.2.2)\n```\n\n如果新建其他位置的 `hosts` 文件，需要 `--inventory-file, -i` 指定文件。\n","source":"_posts/2019-07-31-ansible-vagrant-host.md","raw":"---\ntitle: Ansible 在 Vagrant 中使用\ntags:\n  - ansible\n  - vagrant\ndate: 2019-07-31 17:38:41\n---\n\n\nAnsible 在 Vagrant 中使用的难点在于获取 ssh 登录需要的配置信息。\n\n<!-- more -->\n<!-- toc -->\n\n在默认 `Vagrantfile` 中我们找不到这些信息，此时需要通过 `vagrant ssh-config` 命令查看\n\n```bash\n$ vagrant ssh-config\nHost default\n  HostName 127.0.0.1\n  User vagrant\n  Port 2222\n  UserKnownHostsFile /dev/null\n  StrictHostKeyChecking no\n  PasswordAuthentication no\n  IdentityFile /Users/wxnacy/.vagrant.d/boxes/wxnacy-VAGRANTSLASH-ubuntu1804/0/virtualbox/vagrant_private_key\n  IdentitiesOnly yes\n  LogLevel FATAL\n```\n\n啊，让我费解的 `IdentityFile` 文件终于露出来，关键就是这个文件。\n\n接下来我们只需要配置 Ansible 的 hosts 文件，`/etc/ansible/hosts` 中添加，或者创建独立的 `hosts` 文件\n\n```bash\n[vagrant]\n127.0.0.1 ansible_ssh_user=vagrant ansible_ssh_port=2222 ansible_ssh_private_key_file=/Users/wxnacy/.vagrant.d/boxes/wxnacy-VAGRANTSLASH-ubuntu1804/0/virtualbox/vagrant_private_key\n```\n\n最后查看是否能正常连接\n\n```bash\n$ ansible all -m command -a 'who' --inventory-file=hosts\n127.0.0.1 | CHANGED | rc=0 >>\nvagrant  pts/0        Jul 30 07:35 (10.0.2.2)\nvagrant  pts/1        Jul 30 06:19 (10.0.2.2)\n```\n\n如果新建其他位置的 `hosts` 文件，需要 `--inventory-file, -i` 指定文件。\n","slug":"ansible-vagrant-host","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2anq00w85gqohhcr2gk4"},{"title":"Docker 容器的一些操作","date":"2019-07-27T21:22:38.000Z","_content":"\n\n整理自[操作 Docker 容器](https://yeasy.gitbooks.io/docker_practice/container/)，为了方便查看简化整理为一篇。\n\n<!-- more -->\n<!-- toc -->\n\n## 启动容器\n\n**新建并启动**\n\n启动容器并执行命令后，如果命令进程退出，该容器也会立马终止\n\n```bash\n$ docker run ubuntu:bionic echo 'hello world'\nhello world\n```\n\n在全部容器列表中可以查看\n\n```bash\n$ docker container ls -a\nCONTAINER ID        IMAGE               COMMAND                CREATED             STATUS                     PORTS               NAMES\n7c4a4cea19aa        ubuntu:bionic       \"echo 'hello world'\"   3 minutes ago       Exited (0) 7 seconds ago                       elegant_brahmagupta\n```\n\n使用 `-it` 参数可以进入交互模式\n\n```bash\n$ docker run -it ubuntu:bionic /bin/bash\nroot@82a4d9031d1c:/# ls\nbin   dev  home  lib64  mnt  proc  run   srv  tmp  var\nboot  etc  lib   media  opt  root  sbin  sys  usr\nroot@82a4d9031d1c:/# exit\nexit\n```\n\n其中，-t 选项让Docker分配一个伪终端（pseudo-tty）并绑定到容器的标准输入上， -i 则让容器的标准输入保持打开。\n\n当利用 docker run 来创建容器时，Docker 在后台运行的标准操作包括：\n\n- 检查本地是否存在指定的镜像，不存在就从公有仓库下载\n- 利用镜像创建并启动一个容器\n- 分配一个文件系统，并在只读的镜像层外面挂载一层可读写层\n- 从宿主主机配置的网桥接口中桥接一个虚拟接口到容器中去\n- 从地址池配置一个 ip 地址给容器\n- 执行用户指定的应用程序\n- 执行完毕后容器被终止\n\n**启动已终止容器**\n\n```bash\n$ docker container start <id|name>\n```\n\n以刚才的交互模式容器为例\n\n```bash\n$ docker container ls -a                    # 1\nCONTAINER ID        IMAGE               COMMAND                CREATED              STATUS                          PORTS               NAMES\n7c4a4cea19aa        ubuntu:bionic       \"echo 'hello world'\"   About a minute ago   Exited (0) About a minute ago                       elegant_brahmagupta\n82a4d9031d1c        ubuntu:bionic       \"/bin/bash\"            2 minutes ago        Exited (0) About a minute ago                       tender_jennings\n\n$ docker container start 82a4d9031d1c       # 2\n82a4d9031d1c\n\n$ docker container ls                       # 3\nCONTAINER ID        IMAGE               COMMAND                CREATED             STATUS                          PORTS               NAMES\n82a4d9031d1c        ubuntu:bionic       \"/bin/bash\"            3 minutes ago       Up 7 seconds                                        tender_jennings\n\n$ docker exec -it 82a4d9031d1c /bin/bash    # 4\nroot@82a4d9031d1c:/# ps                     # 5\n  PID TTY          TIME CMD\n   25 pts/1    00:00:00 bash\n   34 pts/1    00:00:00 ps\n```\n\n* `1` 查看所有转态的容器\n* `2` 启动执行 `/bin/bash` 命令的容器\n* `3` 查看当前运行的容器\n* `4` 启动容器的交互模式\n* `5` 查看容器中的进程\n\n通过最后一步可以得知，容器的核心为所执行的应用程序，所需要的资源都是应用程序运行所必需的。除此之外，并没有其它的资源。这种特点使得 Docker 对资源的利用率极高，是货真价实的轻量级虚拟化。\n\n**后台守护运行**\n\n使用 `-d` 参数即可将容器在后台运行\n\n```bash\n$ docker run -d ubuntu:18.04 /bin/sh -c \"while true; do echo hello world; sleep 1; done\"\n```\n\n使用\n\n```bash\n$ docker logs -f <id|name>\n```\n\n或\n\n```bash\n$ docker container logs -f <id|name>\n```\n\n即可实时查看最新日志\n\n## 进入容器\n\n前面我们试过使用 `run` 命令配合 `-it` 参数来进入交互模式，进入容器的交互模式也是类似，不过这里需要 `exec` 命令。\n\n```bash\n$ docker exec -it ubuntu:bionic /bin/bash\nroot@82a4d9031d1c:/# exit\nexit\n```\n\n使用完毕，使用 `exit` 退出即可，容器的运行状态不会影响。\n\n还有一个命令也可以进入容器\n\n```bash\n$ docker attach <id|name>\n```\n\n但是该模式下使用 `exit` 退出时，容器也会跟着停止，所以并不实用，了解即可。\n\n## 导出和导入\n\n**导出**\n\n```bash\n$ docker container ls\nCONTAINER ID        IMAGE               COMMAND                CREATED             STATUS                          PORTS               NAMES\n82a4d9031d1c        ubuntu:bionic       \"/bin/bash\"            3 minutes ago       Up 7 seconds                                        tender_jennings\n$ docker export 82a4d9031d1c > ubuntu.tar\n```\n\n将容器快照导出到本地\n\n**导入容器镜像**\n\n使用本地文件导入\n\n```bash\n$ cat ubuntu.tar | docker import demo/ubuntu:v1.0\n```\n\n使用网络地址导入\n\n```bash\n$ docker import http://example.com/exampleimage.tgz demo/ubuntu:v1.0\n```\n\n注：用户既可以使用 docker load 来导入镜像存储文件到本地镜像库，也可以使用 `docker import` 来导入一个容器快照到本地镜像库。这两者的区别在于容器快照文件将丢弃所有的历史记录和元数据信息（即仅保存容器当时的快照状态），而镜像存储文件将保存完整记录，体积也要大。此外，从容器快照文件导入时可以重新指定标签等元数据信息。\n\n\n## 停止容器\n\n```bash\n$ docker container stop <id|name>       # 停止容器\n$ docker container start <id|name>      # 启动容器\n$ docker container restart <id|name>    # 重启容器\n```\n\n## 删除\n\n```bash\n# 关闭已经停止的容器\n$ docker container rm <id:name>\n```\n\n```bash\n# 如果要删除一个运行中的容器，可以添加 -f 参数。Docker 会发送 SIGKILL 信号给容器。\n$ docker container rm -f <id:name>\n```\n\n```bash\n# 关闭全部终止状态的容器\n$ docker container prune\n```\n\n## 重启服务\n\n```bash\n$ sudo systemctl daemon-reload\n$ sudo systemctl restart docker\n```\n","source":"_posts/2019-07-27-docker-container-cmd.md","raw":"---\ntitle: Docker 容器的一些操作\ntags:\n  - docker\ndate: 2019-07-27 21:22:38\n---\n\n\n整理自[操作 Docker 容器](https://yeasy.gitbooks.io/docker_practice/container/)，为了方便查看简化整理为一篇。\n\n<!-- more -->\n<!-- toc -->\n\n## 启动容器\n\n**新建并启动**\n\n启动容器并执行命令后，如果命令进程退出，该容器也会立马终止\n\n```bash\n$ docker run ubuntu:bionic echo 'hello world'\nhello world\n```\n\n在全部容器列表中可以查看\n\n```bash\n$ docker container ls -a\nCONTAINER ID        IMAGE               COMMAND                CREATED             STATUS                     PORTS               NAMES\n7c4a4cea19aa        ubuntu:bionic       \"echo 'hello world'\"   3 minutes ago       Exited (0) 7 seconds ago                       elegant_brahmagupta\n```\n\n使用 `-it` 参数可以进入交互模式\n\n```bash\n$ docker run -it ubuntu:bionic /bin/bash\nroot@82a4d9031d1c:/# ls\nbin   dev  home  lib64  mnt  proc  run   srv  tmp  var\nboot  etc  lib   media  opt  root  sbin  sys  usr\nroot@82a4d9031d1c:/# exit\nexit\n```\n\n其中，-t 选项让Docker分配一个伪终端（pseudo-tty）并绑定到容器的标准输入上， -i 则让容器的标准输入保持打开。\n\n当利用 docker run 来创建容器时，Docker 在后台运行的标准操作包括：\n\n- 检查本地是否存在指定的镜像，不存在就从公有仓库下载\n- 利用镜像创建并启动一个容器\n- 分配一个文件系统，并在只读的镜像层外面挂载一层可读写层\n- 从宿主主机配置的网桥接口中桥接一个虚拟接口到容器中去\n- 从地址池配置一个 ip 地址给容器\n- 执行用户指定的应用程序\n- 执行完毕后容器被终止\n\n**启动已终止容器**\n\n```bash\n$ docker container start <id|name>\n```\n\n以刚才的交互模式容器为例\n\n```bash\n$ docker container ls -a                    # 1\nCONTAINER ID        IMAGE               COMMAND                CREATED              STATUS                          PORTS               NAMES\n7c4a4cea19aa        ubuntu:bionic       \"echo 'hello world'\"   About a minute ago   Exited (0) About a minute ago                       elegant_brahmagupta\n82a4d9031d1c        ubuntu:bionic       \"/bin/bash\"            2 minutes ago        Exited (0) About a minute ago                       tender_jennings\n\n$ docker container start 82a4d9031d1c       # 2\n82a4d9031d1c\n\n$ docker container ls                       # 3\nCONTAINER ID        IMAGE               COMMAND                CREATED             STATUS                          PORTS               NAMES\n82a4d9031d1c        ubuntu:bionic       \"/bin/bash\"            3 minutes ago       Up 7 seconds                                        tender_jennings\n\n$ docker exec -it 82a4d9031d1c /bin/bash    # 4\nroot@82a4d9031d1c:/# ps                     # 5\n  PID TTY          TIME CMD\n   25 pts/1    00:00:00 bash\n   34 pts/1    00:00:00 ps\n```\n\n* `1` 查看所有转态的容器\n* `2` 启动执行 `/bin/bash` 命令的容器\n* `3` 查看当前运行的容器\n* `4` 启动容器的交互模式\n* `5` 查看容器中的进程\n\n通过最后一步可以得知，容器的核心为所执行的应用程序，所需要的资源都是应用程序运行所必需的。除此之外，并没有其它的资源。这种特点使得 Docker 对资源的利用率极高，是货真价实的轻量级虚拟化。\n\n**后台守护运行**\n\n使用 `-d` 参数即可将容器在后台运行\n\n```bash\n$ docker run -d ubuntu:18.04 /bin/sh -c \"while true; do echo hello world; sleep 1; done\"\n```\n\n使用\n\n```bash\n$ docker logs -f <id|name>\n```\n\n或\n\n```bash\n$ docker container logs -f <id|name>\n```\n\n即可实时查看最新日志\n\n## 进入容器\n\n前面我们试过使用 `run` 命令配合 `-it` 参数来进入交互模式，进入容器的交互模式也是类似，不过这里需要 `exec` 命令。\n\n```bash\n$ docker exec -it ubuntu:bionic /bin/bash\nroot@82a4d9031d1c:/# exit\nexit\n```\n\n使用完毕，使用 `exit` 退出即可，容器的运行状态不会影响。\n\n还有一个命令也可以进入容器\n\n```bash\n$ docker attach <id|name>\n```\n\n但是该模式下使用 `exit` 退出时，容器也会跟着停止，所以并不实用，了解即可。\n\n## 导出和导入\n\n**导出**\n\n```bash\n$ docker container ls\nCONTAINER ID        IMAGE               COMMAND                CREATED             STATUS                          PORTS               NAMES\n82a4d9031d1c        ubuntu:bionic       \"/bin/bash\"            3 minutes ago       Up 7 seconds                                        tender_jennings\n$ docker export 82a4d9031d1c > ubuntu.tar\n```\n\n将容器快照导出到本地\n\n**导入容器镜像**\n\n使用本地文件导入\n\n```bash\n$ cat ubuntu.tar | docker import demo/ubuntu:v1.0\n```\n\n使用网络地址导入\n\n```bash\n$ docker import http://example.com/exampleimage.tgz demo/ubuntu:v1.0\n```\n\n注：用户既可以使用 docker load 来导入镜像存储文件到本地镜像库，也可以使用 `docker import` 来导入一个容器快照到本地镜像库。这两者的区别在于容器快照文件将丢弃所有的历史记录和元数据信息（即仅保存容器当时的快照状态），而镜像存储文件将保存完整记录，体积也要大。此外，从容器快照文件导入时可以重新指定标签等元数据信息。\n\n\n## 停止容器\n\n```bash\n$ docker container stop <id|name>       # 停止容器\n$ docker container start <id|name>      # 启动容器\n$ docker container restart <id|name>    # 重启容器\n```\n\n## 删除\n\n```bash\n# 关闭已经停止的容器\n$ docker container rm <id:name>\n```\n\n```bash\n# 如果要删除一个运行中的容器，可以添加 -f 参数。Docker 会发送 SIGKILL 信号给容器。\n$ docker container rm -f <id:name>\n```\n\n```bash\n# 关闭全部终止状态的容器\n$ docker container prune\n```\n\n## 重启服务\n\n```bash\n$ sudo systemctl daemon-reload\n$ sudo systemctl restart docker\n```\n","slug":"docker-container-cmd","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ans00wa5gqodi0qajs3"},{"title":"Docker 配置国内仓库","date":"2019-08-12T21:38:08.000Z","_content":"\n\n类似这种需要下载包的一般都要配置个国内的仓库源，同时使用默认的国外仓库，真的很慢。\n\n<!-- more -->\n<!-- toc -->\n\n以阿里云仓库为例，配置方式很简单\n\n```bash\n$ sudo tee /etc/docker/daemon.json <<-'EOF'\n{\n  \"registry-mirrors\": [\"https://4qqg0972.mirror.aliyuncs.com\"]\n}\nEOF\n$ sudo systemctl daemon-reload\n$ sudo systemctl restart docker\n```\n","source":"_posts/2019-08-12-docker-use-china-mirrors.md","raw":"---\ntitle: Docker 配置国内仓库\ntags:\n  - docker\ndate: 2019-08-12 21:38:08\n---\n\n\n类似这种需要下载包的一般都要配置个国内的仓库源，同时使用默认的国外仓库，真的很慢。\n\n<!-- more -->\n<!-- toc -->\n\n以阿里云仓库为例，配置方式很简单\n\n```bash\n$ sudo tee /etc/docker/daemon.json <<-'EOF'\n{\n  \"registry-mirrors\": [\"https://4qqg0972.mirror.aliyuncs.com\"]\n}\nEOF\n$ sudo systemctl daemon-reload\n$ sudo systemctl restart docker\n```\n","slug":"docker-use-china-mirrors","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ant00wc5gqo1yd444x2"},{"title":"Python 使用 Pillow 包实现图片叠加","date":"2019-08-15T17:39:29.000Z","_content":"\n[Pillow](https://github.com/python-pillow/Pillow) 包实现图片叠加非常简单\n\n<!-- more -->\n<!-- toc -->\n\n## 简单使用\n\n**安装**\n\n```bash\n$ pip install Pillow\n```\n\n**简单实现**\n\n```python\nfrom PIL import Image\n\nbig_image =Image.open('big.jpg')\nsmall_image=Image.open('small.jpg')\n# small_image.thumbnail((400,400))  可以实现压缩\nbig_image.paste(small_image,(157, 45))\nbig_image.show()\n```\n\n**原图**\n\n![1](https://wxnacy.com/images/rss.png)\n![2](https://wxnacy.com/images/mp.jpg)\n\n**叠加效果**\n\n![3](https://raw.githubusercontent.com/wxnacy/image/master/blog/pillow_overlay.png)\n\n## 项目中使用\n\n在 web 项目中往往我们不会使用本地图片，大多是对网络图片进行处理，再传到线上，所以首先需要能解析网络图片，其次处理后需要拿到图片二进制，再进行上传处理。\n\n这套逻辑的代码在 https://github.com/wxnacy/study/blob/master/python/pillow_demo/overlay.py\n\n这里复制一份\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description: 图片叠加\n\nimport io\n\nfrom PIL import Image\nimport requests\n\n\ndef get_image(path):\n    '''通过地址获取 image 对象'''\n    image = None\n    if path.startswith('http'):\n        res = requests.get(path)\n        image = Image.open(io.BytesIO(res.content))\n    else:\n        image = Image.open(path)\n    return image\n\ndef image2bytes(image):\n    '''图片转二进制'''\n    img_bytes = io.BytesIO()\n    image.save(img_bytes, image.format)\n    return img_bytes.getvalue()\n\ndef overlay(big_path, small_path, width, height, small_thumbnail=()):\n    '''叠加'''\n    big_image = get_image(big_path)\n    small_image = get_image(small_path)\n    if small_thumbnail:\n        small_image.thumbnail(small_thumbnail)\n    big_image.paste(small_image,(width, height))\n    big_image.show()    # 显示图片\n    #  big_image.save('/Users/wxnacy/Downloads/pillow_overlay.png')  # 保存\n    # 或者返回图片的二进制\n    return image2bytes(big_image)\n\n\nif __name__ == \"__main__\":\n    overlay('https://wxnacy.com/images/rss.png',\n            'https://wxnacy.com/images/mp.jpg', 157, 45)\n```\n","source":"_posts/2019-08-15-pillow-overlay.md","raw":"---\ntitle: Python 使用 Pillow 包实现图片叠加\ndate: 2019-08-15 17:39:29\ntags: [python]\n---\n\n[Pillow](https://github.com/python-pillow/Pillow) 包实现图片叠加非常简单\n\n<!-- more -->\n<!-- toc -->\n\n## 简单使用\n\n**安装**\n\n```bash\n$ pip install Pillow\n```\n\n**简单实现**\n\n```python\nfrom PIL import Image\n\nbig_image =Image.open('big.jpg')\nsmall_image=Image.open('small.jpg')\n# small_image.thumbnail((400,400))  可以实现压缩\nbig_image.paste(small_image,(157, 45))\nbig_image.show()\n```\n\n**原图**\n\n![1](https://wxnacy.com/images/rss.png)\n![2](https://wxnacy.com/images/mp.jpg)\n\n**叠加效果**\n\n![3](https://raw.githubusercontent.com/wxnacy/image/master/blog/pillow_overlay.png)\n\n## 项目中使用\n\n在 web 项目中往往我们不会使用本地图片，大多是对网络图片进行处理，再传到线上，所以首先需要能解析网络图片，其次处理后需要拿到图片二进制，再进行上传处理。\n\n这套逻辑的代码在 https://github.com/wxnacy/study/blob/master/python/pillow_demo/overlay.py\n\n这里复制一份\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description: 图片叠加\n\nimport io\n\nfrom PIL import Image\nimport requests\n\n\ndef get_image(path):\n    '''通过地址获取 image 对象'''\n    image = None\n    if path.startswith('http'):\n        res = requests.get(path)\n        image = Image.open(io.BytesIO(res.content))\n    else:\n        image = Image.open(path)\n    return image\n\ndef image2bytes(image):\n    '''图片转二进制'''\n    img_bytes = io.BytesIO()\n    image.save(img_bytes, image.format)\n    return img_bytes.getvalue()\n\ndef overlay(big_path, small_path, width, height, small_thumbnail=()):\n    '''叠加'''\n    big_image = get_image(big_path)\n    small_image = get_image(small_path)\n    if small_thumbnail:\n        small_image.thumbnail(small_thumbnail)\n    big_image.paste(small_image,(width, height))\n    big_image.show()    # 显示图片\n    #  big_image.save('/Users/wxnacy/Downloads/pillow_overlay.png')  # 保存\n    # 或者返回图片的二进制\n    return image2bytes(big_image)\n\n\nif __name__ == \"__main__\":\n    overlay('https://wxnacy.com/images/rss.png',\n            'https://wxnacy.com/images/mp.jpg', 157, 45)\n```\n","slug":"pillow-overlay","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2anv00we5gqo340zr94e"},{"title":"Docker logs 命令","date":"2019-08-22T17:40:01.000Z","_content":"\n\n之前没有留意过 `docker logs` 的正确用法，总是直接使用 `docker logs -f` 来实时跟踪日志，但是每次都要全部显示日志后再跟踪，时间一长日志变多就是灾难，看一下帮助文档，学习下正确用法。\n\n<!-- more -->\n<!-- toc -->\n\n## 基础命令\n\n```bash\n$ docker logs --help\n\nUsage:  docker logs [OPTIONS] CONTAINER\n\nFetch the logs of a container\n\nOptions:\n      --details        Show extra details provided to logs\n  -f, --follow         Follow log output\n      --since string   Show logs since timestamp (e.g. 2013-01-02T13:23:37) or relative (e.g. 42m for 42 minutes)\n      --tail string    Number of lines to show from the end of the logs (default \"all\")\n  -t, --timestamps     Show timestamps\n      --until string   Show logs before a timestamp (e.g. 2013-01-02T13:23:37) or relative (e.g. 42m for 42 minutes)\n```\n\n想要跟 `tail -f` 命令一样从末尾10条以后开始跟踪，需要使用 `--tail` 参数，默认就是全部\n\n**从末尾 10 条后开始跟踪**\n\n```bash\n$ docker logs -f --tail 10 <container-id>\n```\n\n除了行数限制，还可以根据时间戳来获取指定时间前后的是日志\n\n**获取指定时间以后的日志**\n\n```bash\n$ docker logs -t --since=\"2019-08-20T13:23:37\" <container-id>\n```\n\n**获取最后 10 分钟的日志**\n\n```bash\n$ docker logs -t --since=10m <container-id>\n```\n\n**获取指定时间范围的日志**\n\n```bash\n$ docker logs -t --since=\"2019-08-20T13:23:37\" --until=\"2019-08-21T13:23:37\" <container-id>\n```\n\n## 使用 grep\n\n如果你使用 `grep` 会发现根本不起作用，因为 `docker logs` 命令并没有将日志打印到标准输出，这里我们需要先重定向下。\n\n```bash\n$ docker logs -f --tail 10 <container-id> 2>&1 | grep 'grep thing'\n```\n","source":"_posts/2019-08-22-docker-logs.md","raw":"---\ntitle: Docker logs 命令\ntags:\n  - docker\ndate: 2019-08-22 17:40:01\n---\n\n\n之前没有留意过 `docker logs` 的正确用法，总是直接使用 `docker logs -f` 来实时跟踪日志，但是每次都要全部显示日志后再跟踪，时间一长日志变多就是灾难，看一下帮助文档，学习下正确用法。\n\n<!-- more -->\n<!-- toc -->\n\n## 基础命令\n\n```bash\n$ docker logs --help\n\nUsage:  docker logs [OPTIONS] CONTAINER\n\nFetch the logs of a container\n\nOptions:\n      --details        Show extra details provided to logs\n  -f, --follow         Follow log output\n      --since string   Show logs since timestamp (e.g. 2013-01-02T13:23:37) or relative (e.g. 42m for 42 minutes)\n      --tail string    Number of lines to show from the end of the logs (default \"all\")\n  -t, --timestamps     Show timestamps\n      --until string   Show logs before a timestamp (e.g. 2013-01-02T13:23:37) or relative (e.g. 42m for 42 minutes)\n```\n\n想要跟 `tail -f` 命令一样从末尾10条以后开始跟踪，需要使用 `--tail` 参数，默认就是全部\n\n**从末尾 10 条后开始跟踪**\n\n```bash\n$ docker logs -f --tail 10 <container-id>\n```\n\n除了行数限制，还可以根据时间戳来获取指定时间前后的是日志\n\n**获取指定时间以后的日志**\n\n```bash\n$ docker logs -t --since=\"2019-08-20T13:23:37\" <container-id>\n```\n\n**获取最后 10 分钟的日志**\n\n```bash\n$ docker logs -t --since=10m <container-id>\n```\n\n**获取指定时间范围的日志**\n\n```bash\n$ docker logs -t --since=\"2019-08-20T13:23:37\" --until=\"2019-08-21T13:23:37\" <container-id>\n```\n\n## 使用 grep\n\n如果你使用 `grep` 会发现根本不起作用，因为 `docker logs` 命令并没有将日志打印到标准输出，这里我们需要先重定向下。\n\n```bash\n$ docker logs -f --tail 10 <container-id> 2>&1 | grep 'grep thing'\n```\n","slug":"docker-logs","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2anx00wg5gqork0c42qu"},{"title":"Mysql 开始慢查询日志","date":"2019-08-01T17:09:32.000Z","_content":"\n\n项目长期运行过程中，Mysql 慢查询的监控是必不可少的一步日常工作，今天来说下配置过程。\n\n<!-- more -->\n<!-- toc -->\n\n## 配置\n\n先来查看默认慢查询日志开启状态\n\n```mysql\nmysql> show variables like \"%slow_query_log%\";\n+---------------------+--------------------------------------+\n| Variable_name       | Value                                |\n+---------------------+--------------------------------------+\n| slow_query_log      | OFF                                  |\n| slow_query_log_file | /var/lib/mysql/1bcb14797cd4-slow.log |\n+---------------------+--------------------------------------+\n2 rows in set (0.01 sec)\n```\n\n- `slow_query_log` 是否开启慢查询日志，默认关闭\n- `slow_query_log_file` 慢查询日志的默认位置，系统自动生成的文件名。自定义的日志名最好符合 `*-slow.log` 格式，后面会讲到原因。\n\n因为慢查询日志本身比较耗性能，所以默认是关闭的，在需要的时候我们需要手动打开。\n\n```mysql\nmysql> set global slow_query_log=1;\nQuery OK, 0 rows affected (0.09 sec)\n```\n\n该命令可以全局开启该功能，但是如果 Mysql 服务重启则会还原默认值，想要持久化，需要修改配置文件，然后重启\n\n```bash\n$ vim /etc/mysql/my.cnf\n```\n\n```bash\n[mysqld]\n# 开启慢查询日志\nslow_query_log=1\n# 设置慢查询日志位置\nslow_query_log_file=/var/lib/mysql/slow.log\n```\n\n```bash\n$ sudo systemctl restart mysql\n```\n\n修改 `slow_query_log_file` 时需要注意，文件的目录位置必须已存在，否则会报错，慢查询日志功能自动关闭。\n\n另外还一些其他的参数可以修改，方法跟上面的一样。\n\n- `long_query_time` 慢查询阈值，当查询时间多于设定的阈值时记录日志。默认 10 秒。\n- `log_queries_not_using_indexes` 未使用索引的查询也被记录到慢查询日志中（可选项）。\n- `log_output` 日志存储方式。log_output='FILE'表示将日志存入文件，默认值是'FILE'。log_output='TABLE'表示将日志存入数据库，这样日志信息就会被写入到mysql.slow_log表中。MySQL数据库支持同时两种日志存储方式，配置的时候以逗号隔开即可，如：log_output='FILE,TABLE'。日志记录到系统的专用日志表中，要比记录到文件耗费更多的系统资源，因此对于需要启用慢查询日志，又需要能够获得更高的系统性能，那么建议优先记录到文件。\n\n## 分析工具\n\nMysql 提供了慢查询日志的分析工具 mysqldumpslow，这要比自己查看日志文件要方便的多。\n\n下面是几个常用的参数\n\n- `-s` 是表示按照何种方式排序\n\n```bash\nc: 访问计数\nl: 锁定时间\nr: 返回记录\nt: 查询时间\nal:平均锁定时间\nar:平均返回记录数\nat:平均查询时间\n```\n\n- `-t` 是top n的意思，即为返回前面多少条的数据\n- `-g` 后边可以写一个正则匹配模式，大小写不敏感的\n\n更多的参数可以查看帮助文档 `mysqldumpslow --help`\n\n举个例子，查看记录最多的 10 个 sql\n\n```bash\n$ mysqldumpslow -s r -t 10\nCan't find '/var/lib/mysql/*-slow.log'\n```\n\n如果我们自定义了日志文件，并且格式比较随意，那默认会报找不到文件的错误。\n\n如果你的日志文件已经自定义为其它格式，那也可以通过传入文件名的方式分析\n\n```bash\n$ mysqldumpslow -s r -t 10 /var/lib/mysql/some-name.log\n```\n\n- [The Slow Query Log](https://dev.mysql.com/doc/refman/5.7/en/slow-query-log.html)\n- [mysqldumpslow — Summarize Slow Query Log Files](https://dev.mysql.com/doc/refman/5.7/en/mysqldumpslow.html)\n","source":"_posts/2019-08-01-mysql-slow-query-log.md","raw":"---\ntitle: Mysql 开始慢查询日志\ntags:\n  - mysql\ndate: 2019-08-01 17:09:32\n---\n\n\n项目长期运行过程中，Mysql 慢查询的监控是必不可少的一步日常工作，今天来说下配置过程。\n\n<!-- more -->\n<!-- toc -->\n\n## 配置\n\n先来查看默认慢查询日志开启状态\n\n```mysql\nmysql> show variables like \"%slow_query_log%\";\n+---------------------+--------------------------------------+\n| Variable_name       | Value                                |\n+---------------------+--------------------------------------+\n| slow_query_log      | OFF                                  |\n| slow_query_log_file | /var/lib/mysql/1bcb14797cd4-slow.log |\n+---------------------+--------------------------------------+\n2 rows in set (0.01 sec)\n```\n\n- `slow_query_log` 是否开启慢查询日志，默认关闭\n- `slow_query_log_file` 慢查询日志的默认位置，系统自动生成的文件名。自定义的日志名最好符合 `*-slow.log` 格式，后面会讲到原因。\n\n因为慢查询日志本身比较耗性能，所以默认是关闭的，在需要的时候我们需要手动打开。\n\n```mysql\nmysql> set global slow_query_log=1;\nQuery OK, 0 rows affected (0.09 sec)\n```\n\n该命令可以全局开启该功能，但是如果 Mysql 服务重启则会还原默认值，想要持久化，需要修改配置文件，然后重启\n\n```bash\n$ vim /etc/mysql/my.cnf\n```\n\n```bash\n[mysqld]\n# 开启慢查询日志\nslow_query_log=1\n# 设置慢查询日志位置\nslow_query_log_file=/var/lib/mysql/slow.log\n```\n\n```bash\n$ sudo systemctl restart mysql\n```\n\n修改 `slow_query_log_file` 时需要注意，文件的目录位置必须已存在，否则会报错，慢查询日志功能自动关闭。\n\n另外还一些其他的参数可以修改，方法跟上面的一样。\n\n- `long_query_time` 慢查询阈值，当查询时间多于设定的阈值时记录日志。默认 10 秒。\n- `log_queries_not_using_indexes` 未使用索引的查询也被记录到慢查询日志中（可选项）。\n- `log_output` 日志存储方式。log_output='FILE'表示将日志存入文件，默认值是'FILE'。log_output='TABLE'表示将日志存入数据库，这样日志信息就会被写入到mysql.slow_log表中。MySQL数据库支持同时两种日志存储方式，配置的时候以逗号隔开即可，如：log_output='FILE,TABLE'。日志记录到系统的专用日志表中，要比记录到文件耗费更多的系统资源，因此对于需要启用慢查询日志，又需要能够获得更高的系统性能，那么建议优先记录到文件。\n\n## 分析工具\n\nMysql 提供了慢查询日志的分析工具 mysqldumpslow，这要比自己查看日志文件要方便的多。\n\n下面是几个常用的参数\n\n- `-s` 是表示按照何种方式排序\n\n```bash\nc: 访问计数\nl: 锁定时间\nr: 返回记录\nt: 查询时间\nal:平均锁定时间\nar:平均返回记录数\nat:平均查询时间\n```\n\n- `-t` 是top n的意思，即为返回前面多少条的数据\n- `-g` 后边可以写一个正则匹配模式，大小写不敏感的\n\n更多的参数可以查看帮助文档 `mysqldumpslow --help`\n\n举个例子，查看记录最多的 10 个 sql\n\n```bash\n$ mysqldumpslow -s r -t 10\nCan't find '/var/lib/mysql/*-slow.log'\n```\n\n如果我们自定义了日志文件，并且格式比较随意，那默认会报找不到文件的错误。\n\n如果你的日志文件已经自定义为其它格式，那也可以通过传入文件名的方式分析\n\n```bash\n$ mysqldumpslow -s r -t 10 /var/lib/mysql/some-name.log\n```\n\n- [The Slow Query Log](https://dev.mysql.com/doc/refman/5.7/en/slow-query-log.html)\n- [mysqldumpslow — Summarize Slow Query Log Files](https://dev.mysql.com/doc/refman/5.7/en/mysqldumpslow.html)\n","slug":"mysql-slow-query-log","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2any00wi5gqonkn8ruxa"},{"title":"Python 获取当前文件的模块对象","date":"2019-08-20T14:26:10.000Z","_content":"\n根据[官方](https://www.python.org/dev/peps/pep-3130/)文档可以得到这样的用法\n\n<!-- more -->\n<!-- toc -->\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport sys\nmod = sys.modules[__name__]\n```\n\n这个特性可以应用在什么场景呢？当模块中的方法有什么共同特性时，我们可以配合 `getattr` 方法来进行动态调用，而不必编写复杂的判断语句。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\ndef format_size(size: int):\n    '''格式化大小'''\n    unit = {\n        0: 'B',\n        1: 'K',\n        2: 'M',\n        3: 'G',\n        4: 'T',\n    }\n\n    for i in range(6):\n        if 1024 ** i <= size < 1024 ** ( i + 1 ):\n            if i > 0:\n                size = size / 1024 ** i\n            return '{:0.1f}{}'.format( size, unit[i])\n    return '{}B'.format(size)\n\n\nif __name__ == \"__main__\":\n    import sys\n    module = sys.modules[__name__]\n    args = sys.argv[1:]\n    func_name = args[0]\n    func = getattr(module, func_name)\n    res = func(int(args[1]))\n    print(res)\n\n    # 调用方法\n    # $ python utils.py format_size 1024\n```\n","source":"_posts/2019-08-20-python-current-module.md","raw":"---\ntitle: Python 获取当前文件的模块对象\ndate: 2019-08-20 14:26:10\ntags: [python]\n---\n\n根据[官方](https://www.python.org/dev/peps/pep-3130/)文档可以得到这样的用法\n\n<!-- more -->\n<!-- toc -->\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport sys\nmod = sys.modules[__name__]\n```\n\n这个特性可以应用在什么场景呢？当模块中的方法有什么共同特性时，我们可以配合 `getattr` 方法来进行动态调用，而不必编写复杂的判断语句。\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\ndef format_size(size: int):\n    '''格式化大小'''\n    unit = {\n        0: 'B',\n        1: 'K',\n        2: 'M',\n        3: 'G',\n        4: 'T',\n    }\n\n    for i in range(6):\n        if 1024 ** i <= size < 1024 ** ( i + 1 ):\n            if i > 0:\n                size = size / 1024 ** i\n            return '{:0.1f}{}'.format( size, unit[i])\n    return '{}B'.format(size)\n\n\nif __name__ == \"__main__\":\n    import sys\n    module = sys.modules[__name__]\n    args = sys.argv[1:]\n    func_name = args[0]\n    func = getattr(module, func_name)\n    res = func(int(args[1]))\n    print(res)\n\n    # 调用方法\n    # $ python utils.py format_size 1024\n```\n","slug":"python-current-module","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2anz00wk5gqof0orypgw"},{"title":"pm2 容器使用环境变量","date":"2019-08-21T09:53:12.000Z","_content":"\n\npm2 容器管理进程时，设置环境变量非常简单\n\n<!-- more -->\n<!-- toc -->\n\n```javascript\nmodule.exports = {\n  apps : [\n      {\n        name: \"myapp\",\n        script: \"./app.js\",\n        watch: true,\n        env: {\n            \"PORT\": 3000,\n            \"NODE_ENV\": \"development\"\n        },\n        env_production: {\n            \"PORT\": 80,\n            \"NODE_ENV\": \"production\",\n        }\n      }\n  ]\n}\n```\n\n`env` 是 pm2 默认使用的环境变量，使用 `env_production`  需要运行时指定环境\n\n```bash\n$ pm2 start ecosystem.config.js --env production\n```\n","source":"_posts/2019-08-21-pm2-env.md","raw":"---\ntitle: pm2 容器使用环境变量\ntags:\n  - node\ndate: 2019-08-21 09:53:12\n---\n\n\npm2 容器管理进程时，设置环境变量非常简单\n\n<!-- more -->\n<!-- toc -->\n\n```javascript\nmodule.exports = {\n  apps : [\n      {\n        name: \"myapp\",\n        script: \"./app.js\",\n        watch: true,\n        env: {\n            \"PORT\": 3000,\n            \"NODE_ENV\": \"development\"\n        },\n        env_production: {\n            \"PORT\": 80,\n            \"NODE_ENV\": \"production\",\n        }\n      }\n  ]\n}\n```\n\n`env` 是 pm2 默认使用的环境变量，使用 `env_production`  需要运行时指定环境\n\n```bash\n$ pm2 start ecosystem.config.js --env production\n```\n","slug":"pm2-env","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ao100wm5gqowr6qrhgu"},{"title":"Python 使用 Pillow 模块给图片添加文字水印","date":"2019-08-29T21:32:37.000Z","_content":"\n\n像微博一类的平台上传图片时，平台都会添加一个水印，宣誓着对图片的所有权，我们自己的博客平台也可以给自己的图片添加上水印。\n\n<!-- more -->\n<!-- toc -->\n\n还是用 [Pillow](https://github.com/python-pillow/Pillow) 模块来实现\n\n先来看一个简单的例子\n\n```python\n>>> from PIL import Image\n>>> from PIL import ImageDraw\n>>>\n>>> image = Image.open('/Users/wxnacy/Downloads/vm-error1.png')\n>>> draw = ImageDraw.Draw(image)\n>>> draw.text((10, 10), 'wxnacy')\n>>> image.show()\n```\n\n随后图片的左上角就可以看到水印的添加效果\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/pillow-watermark1.png)\n\n水印的颜色默认为白色，当然可以通过传参改变\n\n```python\n>>> draw.text((10, 10), 'wxnacy', (255, 255, 255))\n```\n\n添加一个参数，这和上面得到的结果是一样的，这里用的是三原色，`(255, 255, 255)` 分别为红色、绿色、蓝色\n\n最后是字体\n\n```python\n>>> from PIL import ImageFont\n>>> font=ImageFont.truetype('PingFang.ttc',40)\n>>> draw.text((70,300),'This is wxnacy\\'s website',(0,255,255), font=font)\n>>> image.show()\n```\n\n`PingFang.ttc` 必须是本地有的字体文件，`40` 是字体大小，这样最后的水印结果为\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/pillow-watermark2.png)\n","source":"_posts/2019-08-29-python-pillow-text-watermark.md","raw":"---\ntitle: Python 使用 Pillow 模块给图片添加文字水印\ntags:\n  - python\ndate: 2019-08-29 21:32:37\n---\n\n\n像微博一类的平台上传图片时，平台都会添加一个水印，宣誓着对图片的所有权，我们自己的博客平台也可以给自己的图片添加上水印。\n\n<!-- more -->\n<!-- toc -->\n\n还是用 [Pillow](https://github.com/python-pillow/Pillow) 模块来实现\n\n先来看一个简单的例子\n\n```python\n>>> from PIL import Image\n>>> from PIL import ImageDraw\n>>>\n>>> image = Image.open('/Users/wxnacy/Downloads/vm-error1.png')\n>>> draw = ImageDraw.Draw(image)\n>>> draw.text((10, 10), 'wxnacy')\n>>> image.show()\n```\n\n随后图片的左上角就可以看到水印的添加效果\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/pillow-watermark1.png)\n\n水印的颜色默认为白色，当然可以通过传参改变\n\n```python\n>>> draw.text((10, 10), 'wxnacy', (255, 255, 255))\n```\n\n添加一个参数，这和上面得到的结果是一样的，这里用的是三原色，`(255, 255, 255)` 分别为红色、绿色、蓝色\n\n最后是字体\n\n```python\n>>> from PIL import ImageFont\n>>> font=ImageFont.truetype('PingFang.ttc',40)\n>>> draw.text((70,300),'This is wxnacy\\'s website',(0,255,255), font=font)\n>>> image.show()\n```\n\n`PingFang.ttc` 必须是本地有的字体文件，`40` 是字体大小，这样最后的水印结果为\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/pillow-watermark2.png)\n","slug":"python-pillow-text-watermark","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ao200wo5gqoxv0526ix"},{"title":"Python 使用多属性来进行排序","date":"2019-08-31T14:11:29.000Z","_content":"\n\nPython 中 `list.sort()` 是列表中非常常用的排序函数，`key` 参数可以对单个属性进行排序。\n\n<!-- more -->\n<!-- toc -->\n\n但是想要实现类似 sql 中 `order by id, age` 一样，对多个字段进行排序就不支持了。\n\npy2 中 `sort()` 函数还有个 `cmp` 参数可以传入一个方法，可以自定义对多个属性进行排序，py3 中移除了这个字段。\n\npy3 想要实现这个功能，需要使用 `functools` 模块中的方法，实例如下\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom functools import cmp_to_key\n\ndef cmp_func(a, b):\n\n    if a['id'] < b['id']:\n        return -1\n    elif a['id'] > b['id']:\n        return 1\n\n    if a['name'] < b['name']:\n        return -1\n    elif a['name'] > b['name']:\n        return 1\n\n    return 0\n\narr.sort(key=cmp_to_key(cmp_func))\n```\n\n上面的例子我们实现了 `id` 正序排序，如果 `id` 相同，则按照 `age` 正序排序\n\n为了方便可以封装成一个方法，以供列表调用，封装的方法 demo 可以参见地址\n\nhttps://github.com/wxnacy/study/blob/master/python/office_module/list_demo/sort_by_multi_fields.py\n","source":"_posts/2019-08-31-python-sort-multi-field.md","raw":"---\ntitle: Python 使用多属性来进行排序\ntags:\n  - python\ndate: 2019-08-31 14:11:29\n---\n\n\nPython 中 `list.sort()` 是列表中非常常用的排序函数，`key` 参数可以对单个属性进行排序。\n\n<!-- more -->\n<!-- toc -->\n\n但是想要实现类似 sql 中 `order by id, age` 一样，对多个字段进行排序就不支持了。\n\npy2 中 `sort()` 函数还有个 `cmp` 参数可以传入一个方法，可以自定义对多个属性进行排序，py3 中移除了这个字段。\n\npy3 想要实现这个功能，需要使用 `functools` 模块中的方法，实例如下\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom functools import cmp_to_key\n\ndef cmp_func(a, b):\n\n    if a['id'] < b['id']:\n        return -1\n    elif a['id'] > b['id']:\n        return 1\n\n    if a['name'] < b['name']:\n        return -1\n    elif a['name'] > b['name']:\n        return 1\n\n    return 0\n\narr.sort(key=cmp_to_key(cmp_func))\n```\n\n上面的例子我们实现了 `id` 正序排序，如果 `id` 相同，则按照 `age` 正序排序\n\n为了方便可以封装成一个方法，以供列表调用，封装的方法 demo 可以参见地址\n\nhttps://github.com/wxnacy/study/blob/master/python/office_module/list_demo/sort_by_multi_fields.py\n","slug":"python-sort-multi-field","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ao400wq5gqo3o9xp1t3"},{"title":"开启 Chrome 多线程下载功能","date":"2019-09-01T22:38:55.000Z","_content":"\nChrome 有个多线程下载功能，默认是关闭的，打开后可以提升数倍下载速度。\n\n<!-- more -->\n<!-- toc -->\n\n**打开方法**\n\n浏览器输入地址 `chrome://flags/#enable-parallel-downloading`\n\n将 `parallel-downloading` 设为 `Enabled` 即可\n\n![N1ifKI.png](https://s1.ax1x.com/2020/06/20/N1ifKI.png)\n\n现在这个功能还处在实验室阶段，无法设备线程数，理论上电脑核数越高下载速度越快\n","source":"_posts/2019-09-01-chrome-open-multi-download.md","raw":"---\ntitle: 开启 Chrome 多线程下载功能\ndate: 2019-09-01 22:38:55\ntags: [chrome]\n---\n\nChrome 有个多线程下载功能，默认是关闭的，打开后可以提升数倍下载速度。\n\n<!-- more -->\n<!-- toc -->\n\n**打开方法**\n\n浏览器输入地址 `chrome://flags/#enable-parallel-downloading`\n\n将 `parallel-downloading` 设为 `Enabled` 即可\n\n![N1ifKI.png](https://s1.ax1x.com/2020/06/20/N1ifKI.png)\n\n现在这个功能还处在实验室阶段，无法设备线程数，理论上电脑核数越高下载速度越快\n","slug":"chrome-open-multi-download","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ao500ws5gqokypz7648"},{"title":"VMware 报错：未找到文件","date":"2019-09-09T10:56:46.000Z","_content":"\n\n之前卸载过 VMware，再次安装时就报这个错\n\n<!-- more -->\n<!-- toc -->\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/vm-error5.png)\n\n这个问题在于之前创建的虚拟机有残留文件没有删除，现在删除即可，如下图，右击扩展坞中的图标，点击虚拟机资源库\n\n![3](https://raw.githubusercontent.com/wxnacy/image/master/blog/vm-error6_374.png)\n\n然后把之前的残留删除即可\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/vm-error4_518.png)\n","source":"_posts/2019-09-09-vm-error-unfound-file.md","raw":"---\ntitle: VMware 报错：未找到文件\ntags:\n  - vmware\ndate: 2019-09-09 10:56:46\n---\n\n\n之前卸载过 VMware，再次安装时就报这个错\n\n<!-- more -->\n<!-- toc -->\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/vm-error5.png)\n\n这个问题在于之前创建的虚拟机有残留文件没有删除，现在删除即可，如下图，右击扩展坞中的图标，点击虚拟机资源库\n\n![3](https://raw.githubusercontent.com/wxnacy/image/master/blog/vm-error6_374.png)\n\n然后把之前的残留删除即可\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/vm-error4_518.png)\n","slug":"vm-error-unfound-file","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ao600wu5gqovgtzm128"},{"title":"微信公众号被动自动回复两条消息","date":"2019-09-08T16:46:41.000Z","_content":"\n\n这么长时间来开发微信公众号一直都是只用到了被动回复一条消息，最近有需要要自动回复两条消息，第一反应是怎么可能，查了下[文档](https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1421140543)也确实不行，但是其他公众号又有这么实现的。\n\n<!-- more -->\n<!-- toc -->\n\n搜索了下发现以前的用法还是太死板了，被动消息是只能回复一条，但是还可以调用[客服消息](https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1421140547)来主动发送一条消息。\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/wx-kf_885.png)\n\n了解这个思路就已经可以了，具体的实现过程就不在赘述，有点经验可以说下。\n\n如果让客服消息当做第一条，被动回复当做第二条，这样的通过进行可能会让单次请求时间加长。\n\n我的做法是先异步调用客服消息，然后被动回复消息，打个时间差，客服消息刚好当做第二条消息，在被动回复的消息不就后到达。\n","source":"_posts/2019-09-08-weixin-two-reply.md","raw":"---\ntitle: 微信公众号被动自动回复两条消息\ntags:\n  - 微信\ndate: 2019-09-08 16:46:41\n---\n\n\n这么长时间来开发微信公众号一直都是只用到了被动回复一条消息，最近有需要要自动回复两条消息，第一反应是怎么可能，查了下[文档](https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1421140543)也确实不行，但是其他公众号又有这么实现的。\n\n<!-- more -->\n<!-- toc -->\n\n搜索了下发现以前的用法还是太死板了，被动消息是只能回复一条，但是还可以调用[客服消息](https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1421140547)来主动发送一条消息。\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/wx-kf_885.png)\n\n了解这个思路就已经可以了，具体的实现过程就不在赘述，有点经验可以说下。\n\n如果让客服消息当做第一条，被动回复当做第二条，这样的通过进行可能会让单次请求时间加长。\n\n我的做法是先异步调用客服消息，然后被动回复消息，打个时间差，客服消息刚好当做第二条消息，在被动回复的消息不就后到达。\n","slug":"weixin-two-reply","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ao800wx5gqocoyjj7ln"},{"title":"使用 youtube-dl 下载油管视频","date":"2019-09-15T14:56:00.000Z","_content":"\n\n油管上有全球最大的视频资源库，由于一些限制我们不能随时随地看到，如果有机会看的时候，也能批量下载一些视频就非常 nice 了， [youtube-dl](https://github.com/ytdl-org/youtube-dl) 可以完美的实现这个需求\n\n<!-- more -->\n<!-- toc -->\n\n## 下载\n\n### pip\n\n```bash\n$ sudo -H pip install --upgrade youtube-dl\n```\n\n### Linux\n\n```bash\n$ sudo wget https://yt-dl.org/downloads/latest/youtube-dl -O /usr/local/bin/youtube-dl\n$ sudo chmod a+rx /usr/local/bin/youtube-dl\n```\n\n### Mac\n\n```bash\n$ brew install youtube-dl\n```\n\n### Windows\n\n下载 [youtube-dl.exe](https://yt-dl.org/latest/youtube-dl.exe) 文件直接运行即可。\n\n这里有点需要注意，如果你是 Windows10 系统，很可能会报一个找不到 `MSVCR100.dll` 的错误，此时需要先安装 [Microsoft Visual C++ 2010 Redistributable Package (x86)](https://www.microsoft.com/en-US/download/details.aspx?id=5555)，然后再次执行 `youtube-dl.exe` 即可\n\n## 下载视频\n\n```bash\n$ youtube-dl https://www.youtube.com/watch?v=OKIfTOEo7P0\n```\n\n下载视频就是这么简单，默认下载的是 720p 的视频，只要你有的话，我们也可以先看下视频都包含什么格式\n\n```bash\n$ youtube-dl -F https://www.youtube.com/watch?v=OKIfTOEo7P0\n```\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/ytdl1.png)\n\n也可以指定下载 1080p 的视频，使用第一列的数字可以精准下载\n\n```bash\n$ youtube-dl -f 137 https://www.youtube.com/watch?v=OKIfTOEo7P0\n```\n\n有时候默认情况下会下载 webm 格式的视频，我们可以设置只下载 mp4 格式的视频\n\n```bash\n$ youtube-dl -f mp4 https://www.youtube.com/watch?v=OKIfTOEo7P0\n```\n\n## 重命名\n\n`youtube-dl` 下载的视频默认保存在当前目录，使用视频名+扩展名来保存，我们可以通过重命名的方式来修改下载目录和文件名，不过通常是在下载播放列表和频道全部视频时才需要。\n\n是的，它还可以直接下载频道全部视频和播放列表，这样不需要写什么脚本也可以实现批量下载了\n\n通过 `-o` 参数可以格式化下载的位置和名字\n\n**下载播放列表**\n\n```bash\n$ youtube-dl -o '%(playlist)s/%(playlist_index)s - %(title)s.%(ext)s' https://www.youtube.com/playlist?list=PLumqm-XDIBr1tduTDECpjF_l33IVupKAN\n```\n\n下载的文件名格式化为 `播放列表名称/视频位置 - 视频标题.扩展名`\n\n**下载频道**\n\n```bash\n$ youtube-dl -o '%(uploader)s/%(title)s.%(ext)s' https://www.youtube.com/channel/UCahEYs3JbJQL-oyL_0H9pRA\n```\n\n下载的文件名格式化为 `上传者姓名/视频标题.扩展名`\n\n更多的格式化模板可以看[文档](https://github.com/ytdl-org/youtube-dl#output-template)\n\n在下载列表时有一点需要注意，很多原因都会导致下载某个视频时失败，我们希望它可以在失败跳过继续下载，而不是直接停止，加上 `-i` 参数即可。\n\n**下载失败时跳过**\n\n```bash\n$ youtube-dl -o '%(playlist)s/%(playlist_index)s - %(title)s.%(ext)s' https://www.youtube.com/playlist?list=PLumqm-XDIBr1tduTDECpjF_l33IVupKAN\n```\n","source":"_posts/2019-09-15-use-youtube-dl.md","raw":"---\ntitle: 使用 youtube-dl 下载油管视频\ntags:\n  - python\n  - 工具\ndate: 2019-09-15 14:56:00\n---\n\n\n油管上有全球最大的视频资源库，由于一些限制我们不能随时随地看到，如果有机会看的时候，也能批量下载一些视频就非常 nice 了， [youtube-dl](https://github.com/ytdl-org/youtube-dl) 可以完美的实现这个需求\n\n<!-- more -->\n<!-- toc -->\n\n## 下载\n\n### pip\n\n```bash\n$ sudo -H pip install --upgrade youtube-dl\n```\n\n### Linux\n\n```bash\n$ sudo wget https://yt-dl.org/downloads/latest/youtube-dl -O /usr/local/bin/youtube-dl\n$ sudo chmod a+rx /usr/local/bin/youtube-dl\n```\n\n### Mac\n\n```bash\n$ brew install youtube-dl\n```\n\n### Windows\n\n下载 [youtube-dl.exe](https://yt-dl.org/latest/youtube-dl.exe) 文件直接运行即可。\n\n这里有点需要注意，如果你是 Windows10 系统，很可能会报一个找不到 `MSVCR100.dll` 的错误，此时需要先安装 [Microsoft Visual C++ 2010 Redistributable Package (x86)](https://www.microsoft.com/en-US/download/details.aspx?id=5555)，然后再次执行 `youtube-dl.exe` 即可\n\n## 下载视频\n\n```bash\n$ youtube-dl https://www.youtube.com/watch?v=OKIfTOEo7P0\n```\n\n下载视频就是这么简单，默认下载的是 720p 的视频，只要你有的话，我们也可以先看下视频都包含什么格式\n\n```bash\n$ youtube-dl -F https://www.youtube.com/watch?v=OKIfTOEo7P0\n```\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/ytdl1.png)\n\n也可以指定下载 1080p 的视频，使用第一列的数字可以精准下载\n\n```bash\n$ youtube-dl -f 137 https://www.youtube.com/watch?v=OKIfTOEo7P0\n```\n\n有时候默认情况下会下载 webm 格式的视频，我们可以设置只下载 mp4 格式的视频\n\n```bash\n$ youtube-dl -f mp4 https://www.youtube.com/watch?v=OKIfTOEo7P0\n```\n\n## 重命名\n\n`youtube-dl` 下载的视频默认保存在当前目录，使用视频名+扩展名来保存，我们可以通过重命名的方式来修改下载目录和文件名，不过通常是在下载播放列表和频道全部视频时才需要。\n\n是的，它还可以直接下载频道全部视频和播放列表，这样不需要写什么脚本也可以实现批量下载了\n\n通过 `-o` 参数可以格式化下载的位置和名字\n\n**下载播放列表**\n\n```bash\n$ youtube-dl -o '%(playlist)s/%(playlist_index)s - %(title)s.%(ext)s' https://www.youtube.com/playlist?list=PLumqm-XDIBr1tduTDECpjF_l33IVupKAN\n```\n\n下载的文件名格式化为 `播放列表名称/视频位置 - 视频标题.扩展名`\n\n**下载频道**\n\n```bash\n$ youtube-dl -o '%(uploader)s/%(title)s.%(ext)s' https://www.youtube.com/channel/UCahEYs3JbJQL-oyL_0H9pRA\n```\n\n下载的文件名格式化为 `上传者姓名/视频标题.扩展名`\n\n更多的格式化模板可以看[文档](https://github.com/ytdl-org/youtube-dl#output-template)\n\n在下载列表时有一点需要注意，很多原因都会导致下载某个视频时失败，我们希望它可以在失败跳过继续下载，而不是直接停止，加上 `-i` 参数即可。\n\n**下载失败时跳过**\n\n```bash\n$ youtube-dl -o '%(playlist)s/%(playlist_index)s - %(title)s.%(ext)s' https://www.youtube.com/playlist?list=PLumqm-XDIBr1tduTDECpjF_l33IVupKAN\n```\n","slug":"use-youtube-dl","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ao900wz5gqozi9rs08i"},{"title":"使用 Python 新建微信公众号临时素材","date":"2019-09-18T15:23:48.000Z","_content":"\n\n微信公众号相关的官方文档一直是以垃圾著称的，比如这个[新建临时素材](https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1444738726)。\n\n<!-- more -->\n<!-- toc -->\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/wx-media1_1031.png)\n\n接口调用的说明，只有一个 `curl` 的例子，真是 fuck 啊，\n\n我也只能从 media 参数的说明中做一下文章，微信的文档要是没有点知识储备还真用不了。\n\n这里说一下使用 Python 来完成的 demo\n\n关键在于 media 字段包含的三个字段，可以使用 requests 模块来模拟上传文件\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nurl = 'https://api.weixin.qq.com/cgi-bin/media/upload'\nparams = {\"access_token\": 'access_token', \"type\": 'image'}\nfiles = { 'media' : ('tmp.jpg', content, content_type)}\nres = requests.post(url, params=params, files=files)\nres = json.loads(str(res.content, 'utf8'))\n```\n\n","source":"_posts/2019-09-18-wx-upload-media.md","raw":"---\ntitle: 使用 Python 新建微信公众号临时素材\ntags:\n  - 微信\n  - python\ndate: 2019-09-18 15:23:48\n---\n\n\n微信公众号相关的官方文档一直是以垃圾著称的，比如这个[新建临时素材](https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1444738726)。\n\n<!-- more -->\n<!-- toc -->\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/wx-media1_1031.png)\n\n接口调用的说明，只有一个 `curl` 的例子，真是 fuck 啊，\n\n我也只能从 media 参数的说明中做一下文章，微信的文档要是没有点知识储备还真用不了。\n\n这里说一下使用 Python 来完成的 demo\n\n关键在于 media 字段包含的三个字段，可以使用 requests 模块来模拟上传文件\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nurl = 'https://api.weixin.qq.com/cgi-bin/media/upload'\nparams = {\"access_token\": 'access_token', \"type\": 'image'}\nfiles = { 'media' : ('tmp.jpg', content, content_type)}\nres = requests.post(url, params=params, files=files)\nres = json.loads(str(res.content, 'utf8'))\n```\n\n","slug":"wx-upload-media","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aoa00x15gqoszgdo9m8"},{"title":"世界货币查询文档","date":"2019-09-22T22:04:14.000Z","_content":"\n\n因为工作需要了解一些外币信息的知识，收集一些网站一遍日常查询。\n\n<!-- more -->\n<!-- toc -->\n\n两个国外的网站货币名称、简称和符号是比较全的。\n\nhttp://fx.sauder.ubc.ca/currency_table.html\n\nhttps://justforex.com/cn/education/currencies\n\n但是因为是全英文的，所以查询不会方便，另外还有两个中文的可共查询\n\nhttps://fxtop.com/cn/countries-currencies.php\n\n","source":"_posts/2019-09-22-world-currency.md","raw":"---\ntitle: 世界货币查询文档\ntags:\n  - 工具\ndate: 2019-09-22 22:04:14\n---\n\n\n因为工作需要了解一些外币信息的知识，收集一些网站一遍日常查询。\n\n<!-- more -->\n<!-- toc -->\n\n两个国外的网站货币名称、简称和符号是比较全的。\n\nhttp://fx.sauder.ubc.ca/currency_table.html\n\nhttps://justforex.com/cn/education/currencies\n\n但是因为是全英文的，所以查询不会方便，另外还有两个中文的可共查询\n\nhttps://fxtop.com/cn/countries-currencies.php\n\n","slug":"world-currency","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aoc00x45gqoto9u0864"},{"title":"获取 youtube 视频屏蔽地区","date":"2019-09-19T13:55:13.000Z","_content":"\n\n记得前几年 youtube 视频网页内是包含该视频的允许和屏蔽播放的区域的，但是最近需要使用时发现怎么也找不到了，估计是油管因为一些原因做了隐藏。\n\n<!-- more -->\n<!-- toc -->\n\n先是 google 了一些方法，发现了一个网站可以查询视频的屏蔽地区，只需要输入网址或者 id 就可以了\n\n网址：https://polsy.org.uk/stuff/ytrestrict.cgi\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/yt-polsy_1090.png)\n\n当做网页工具还是挺不错的，对它的结果网页做解析也比较简单，但是有些视频会查询不出来，所以在程序中还是不推荐使用。\n\n转了一圈，发现官方就有相关的 API，记得以前是有一些使用限制的，现在再找并没有发现什么限制，只有每天的调用次数限制，大概 100000 次，一般使用也足够了\n\n网址：https://developers.google.com/youtube/v3/docs/videos\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/yt-api-videos_823.png)\n","source":"_posts/2019-09-19-youtube-block-region.md","raw":"---\ntitle: 获取 youtube 视频屏蔽地区\ntags:\n  - youtube\ndate: 2019-09-19 13:55:13\n---\n\n\n记得前几年 youtube 视频网页内是包含该视频的允许和屏蔽播放的区域的，但是最近需要使用时发现怎么也找不到了，估计是油管因为一些原因做了隐藏。\n\n<!-- more -->\n<!-- toc -->\n\n先是 google 了一些方法，发现了一个网站可以查询视频的屏蔽地区，只需要输入网址或者 id 就可以了\n\n网址：https://polsy.org.uk/stuff/ytrestrict.cgi\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/yt-polsy_1090.png)\n\n当做网页工具还是挺不错的，对它的结果网页做解析也比较简单，但是有些视频会查询不出来，所以在程序中还是不推荐使用。\n\n转了一圈，发现官方就有相关的 API，记得以前是有一些使用限制的，现在再找并没有发现什么限制，只有每天的调用次数限制，大概 100000 次，一般使用也足够了\n\n网址：https://developers.google.com/youtube/v3/docs/videos\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/yt-api-videos_823.png)\n","slug":"youtube-block-region","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aoe00x65gqoaanszpzm"},{"title":"Nginx 报警告 the \"ssl\" directive is deprecated","date":"2019-10-17T14:51:04.000Z","_content":"\n一直用的一个配置文件，在用 docker 启动的 openresty 时，突然报了一堆警告\n\n<!-- more -->\n<!-- toc -->\n\n```bash\nnginx: [warn] the \"ssl\" directive is deprecated, use the \"listen ... ssl\" directive instead in /usr/local/openresty/nginx/conf/conf.d/biz.conf:4\n```\n\n因为只是警告，所以程序可以正常运行，但每次都报还是很闹心，经查后发现还是版本问题。\n\n在升级[日志](http://nginx.org/en/CHANGES)中是这样说的\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/nginx-ssl-deprecated.png)\n\n`ssl on;` 的用法已经过时了，现在 `https` 需要使用 `listen ... ssl` 格式来标记。\n\n就像这样\n\n```bash\nserver {\n    listen 443 ssl;\n    ...\n}\n```\n","source":"_posts/2019-10-17-nginx-the-ssl-depreated.md","raw":"---\ntitle: Nginx 报警告 the \"ssl\" directive is deprecated\ndate: 2019-10-17 14:51:04\ntags: [nginx]\n---\n\n一直用的一个配置文件，在用 docker 启动的 openresty 时，突然报了一堆警告\n\n<!-- more -->\n<!-- toc -->\n\n```bash\nnginx: [warn] the \"ssl\" directive is deprecated, use the \"listen ... ssl\" directive instead in /usr/local/openresty/nginx/conf/conf.d/biz.conf:4\n```\n\n因为只是警告，所以程序可以正常运行，但每次都报还是很闹心，经查后发现还是版本问题。\n\n在升级[日志](http://nginx.org/en/CHANGES)中是这样说的\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/nginx-ssl-deprecated.png)\n\n`ssl on;` 的用法已经过时了，现在 `https` 需要使用 `listen ... ssl` 格式来标记。\n\n就像这样\n\n```bash\nserver {\n    listen 443 ssl;\n    ...\n}\n```\n","slug":"nginx-the-ssl-depreated","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aof00x85gqoca8vv4e8"},{"title":"Mac 使用 vmware 装机报错 /dev/vmmon：Broken pipe","date":"2019-10-28T08:14:44.000Z","_content":"\n\n好久不用虚拟机了，最近想装个 win10 调试程序，结果各种问题，记录下以备后用。\n\n<!-- more -->\n<!-- toc -->\n\n在加载镜像后，启动前一直莫名报这个错。\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/vm-error1.png)\n\n问题出在 Mac 禁止了 VMware 的一些功能，可以进入 `系统偏好设置 -> 安全性与隐私 -> 通用`，然后点击下方的允许即可。\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/vm-error2.png)\n","source":"_posts/2019-10-28-mac-vmware-error-broken-pipe.md","raw":"---\ntitle: Mac 使用 vmware 装机报错 /dev/vmmon：Broken pipe\ntags:\n  - mac\n  - vmware\ndate: 2019-10-28 08:14:44\n---\n\n\n好久不用虚拟机了，最近想装个 win10 调试程序，结果各种问题，记录下以备后用。\n\n<!-- more -->\n<!-- toc -->\n\n在加载镜像后，启动前一直莫名报这个错。\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/vm-error1.png)\n\n问题出在 Mac 禁止了 VMware 的一些功能，可以进入 `系统偏好设置 -> 安全性与隐私 -> 通用`，然后点击下方的允许即可。\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/vm-error2.png)\n","slug":"mac-vmware-error-broken-pipe","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aoh00xb5gqol84nno4m"},{"title":"Javascript 字符串填充","date":"2019-11-12T21:59:29.000Z","_content":"\n在 JavaScript 中字符串填充可以使用 [String.prototype.padStart()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padStart) 和 [String.prototype.padEnd()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd)\n\n<!-- more -->\n<!-- toc -->\n\n以 `padStart()` 为例，效果如下\n\n```java\n'abc'.padStart(10);         // \"       abc\"\n'abc'.padStart(10, \"foo\");  // \"foofoofabc\"\n'abc'.padStart(6,\"123465\"); // \"123abc\"\n'abc'.padStart(8, \"0\");     // \"00000abc\"\n'abc'.padStart(1);          // \"abc\"\n```\n\n在浏览器的支持版本如下\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/psbs.png)\n\n对于不知道的版本，我们可以自己加上这个方法，在代码运行前执行如下代码即可。\n\n```java\n// https://github.com/uxitten/polyfill/blob/master/string.polyfill.js\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padStart\nif (!String.prototype.padStart) {\n    String.prototype.padStart = function padStart(targetLength, padString) {\n        targetLength = targetLength >> 0; //truncate if number, or convert non-number to 0;\n        padString = String(typeof padString !== 'undefined' ? padString : ' ');\n        if (this.length >= targetLength) {\n            return String(this);\n        } else {\n            targetLength = targetLength - this.length;\n            if (targetLength > padString.length) {\n                padString += padString.repeat(targetLength / padString.length); //append to original to ensure we are longer than needed\n            }\n            return padString.slice(0, targetLength) + String(this);\n        }\n    };\n}\n```\n\n`padEnd()` 的代码如下\n\n```java\n// https://github.com/uxitten/polyfill/blob/master/string.polyfill.js\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd\nif (!String.prototype.padEnd) {\n    String.prototype.padEnd = function padEnd(targetLength,padString) {\n        targetLength = targetLength>>0; //floor if number or convert non-number to 0;\n        padString = String((typeof padString !== 'undefined' ? padString : ' '));\n        if (this.length > targetLength) {\n            return String(this);\n        }\n        else {\n            targetLength = targetLength-this.length;\n            if (targetLength > padString.length) {\n                padString += padString.repeat(targetLength/padString.length); //append to original to ensure we are longer than needed\n            }\n            return String(this) + padString.slice(0,targetLength);\n        }\n    };\n}\n```\n\n- [String.prototype.padStart()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padStart)\n","source":"_posts/2019-11-12-js-padstart.md","raw":"---\ntitle: Javascript 字符串填充\ndate: 2019-11-12 21:59:29\ntags: [javascript]\n---\n\n在 JavaScript 中字符串填充可以使用 [String.prototype.padStart()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padStart) 和 [String.prototype.padEnd()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd)\n\n<!-- more -->\n<!-- toc -->\n\n以 `padStart()` 为例，效果如下\n\n```java\n'abc'.padStart(10);         // \"       abc\"\n'abc'.padStart(10, \"foo\");  // \"foofoofabc\"\n'abc'.padStart(6,\"123465\"); // \"123abc\"\n'abc'.padStart(8, \"0\");     // \"00000abc\"\n'abc'.padStart(1);          // \"abc\"\n```\n\n在浏览器的支持版本如下\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/psbs.png)\n\n对于不知道的版本，我们可以自己加上这个方法，在代码运行前执行如下代码即可。\n\n```java\n// https://github.com/uxitten/polyfill/blob/master/string.polyfill.js\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padStart\nif (!String.prototype.padStart) {\n    String.prototype.padStart = function padStart(targetLength, padString) {\n        targetLength = targetLength >> 0; //truncate if number, or convert non-number to 0;\n        padString = String(typeof padString !== 'undefined' ? padString : ' ');\n        if (this.length >= targetLength) {\n            return String(this);\n        } else {\n            targetLength = targetLength - this.length;\n            if (targetLength > padString.length) {\n                padString += padString.repeat(targetLength / padString.length); //append to original to ensure we are longer than needed\n            }\n            return padString.slice(0, targetLength) + String(this);\n        }\n    };\n}\n```\n\n`padEnd()` 的代码如下\n\n```java\n// https://github.com/uxitten/polyfill/blob/master/string.polyfill.js\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd\nif (!String.prototype.padEnd) {\n    String.prototype.padEnd = function padEnd(targetLength,padString) {\n        targetLength = targetLength>>0; //floor if number or convert non-number to 0;\n        padString = String((typeof padString !== 'undefined' ? padString : ' '));\n        if (this.length > targetLength) {\n            return String(this);\n        }\n        else {\n            targetLength = targetLength-this.length;\n            if (targetLength > padString.length) {\n                padString += padString.repeat(targetLength/padString.length); //append to original to ensure we are longer than needed\n            }\n            return String(this) + padString.slice(0,targetLength);\n        }\n    };\n}\n```\n\n- [String.prototype.padStart()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padStart)\n","slug":"js-padstart","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aoi00xd5gqojyti723t"},{"title":"Mysql 随机获取表中一条数据","date":"2019-12-05T16:58:19.000Z","_content":"\n现在有个需求是从表中随机取出一条数据，除了全部拿出数据用程序来随机外，还可以使用数据库的 `RAND()` 函数。\n\n<!-- more -->\n<!-- toc -->\n\n`RAND()` 函数可以返回一个 `0~1` 的随机数\n\n```mysql\n> select RAND();\n+--------------------+\n| RAND()             |\n+--------------------+\n| 0.8503168074882745 |\n+--------------------+\n1 row in set (0.00 sec)\n> select RAND();\n+--------------------+\n| RAND()             |\n+--------------------+\n| 0.6016649581507453 |\n+--------------------+\n1 row in set (0.00 sec)\n```\n\n`RAND()` 还可以给一个数字参数，以该数字作为基准来生成一个可重复的随机数。\n\n```mysql\n> select RAND(5);\n+---------------------+\n| RAND(5)             |\n+---------------------+\n| 0.40613597483014313 |\n+---------------------+\n1 row in set (0.00 sec)\n> select RAND(5);\n+---------------------+\n| RAND(5)             |\n+---------------------+\n| 0.40613597483014313 |\n+---------------------+\n1 row in set (0.00 sec)\n```\n\n官方定义的该参数的取值范围是 `0~1`，但实测超过该范围也可以得到结果。\n\n如果想要得到一个随机的整数，则可以运用数学运算和 `FLOOR()` 函数，比如想要一个 `[10,20]` 区间的随机数\n\n```mysql\n> select FLOOR(10 + (RAND() * 11));\n+---------------------------+\n| FLOOR(10 + (RAND() * 11)) |\n+---------------------------+\n|                        18 |\n+---------------------------+\n1 row in set (0.00 sec)\n```\n\n最后回来点一下题，如何获取表中的随机数据？\n\n这里需要配合排序语句 `ORDER BY RAND()` 来使用，可以获取一个按照随机排序的列表。\n\n```mysql\n> SELECT * FROM USER ORDER BY RAND();\n+----+--------+----------+--------------+--------------+---------------------+---------------------+\n| id | name   | password | ext_property | is_available | create_ts           | update_ts           |\n+----+--------+----------+--------------+--------------+---------------------+---------------------+\n|  4 | spring |          | {}           |            1 | 2018-03-02 11:04:11 | 2018-03-02 11:04:11 |\n|  1 | wxnacy |          | {}           |            1 | 2018-03-02 11:04:11 | 2018-03-02 11:04:11 |\n|  2 | win    |          | {}           |            1 | 2018-03-02 11:04:11 | 2018-03-02 11:04:11 |\n|  3 | xiao   |          | {}           |            1 | 2018-03-02 11:04:11 | 2018-03-02 11:04:11 |\n|  5 | 温     |          | {}           |            1 | 2018-03-02 11:04:11 | 2018-03-02 11:04:11 |\n+----+--------+----------+--------------+--------------+---------------------+---------------------+\n5 rows in set (0.00 sec)\n```\n\n最后再配合 `LIMIT` 来获取随机的一条数据\n\n```mysql\n> SELECT * FROM USER ORDER BY RAND() LIMIT 1;\n+----+--------+----------+--------------+--------------+---------------------+---------------------+\n| id | name   | password | ext_property | is_available | create_ts           | update_ts           |\n+----+--------+----------+--------------+--------------+---------------------+---------------------+\n|  2 | win    |          | {}           |            1 | 2018-03-02 11:04:11 | 2018-03-02 11:04:11 |\n+----+--------+----------+--------------+--------------+---------------------+---------------------+\n1 rows in set (0.00 sec)\n```\n","source":"_posts/2019-12-05-mysql-rand.md","raw":"---\ntitle: Mysql 随机获取表中一条数据\ndate: 2019-12-05 16:58:19\ntags: [mysql]\n---\n\n现在有个需求是从表中随机取出一条数据，除了全部拿出数据用程序来随机外，还可以使用数据库的 `RAND()` 函数。\n\n<!-- more -->\n<!-- toc -->\n\n`RAND()` 函数可以返回一个 `0~1` 的随机数\n\n```mysql\n> select RAND();\n+--------------------+\n| RAND()             |\n+--------------------+\n| 0.8503168074882745 |\n+--------------------+\n1 row in set (0.00 sec)\n> select RAND();\n+--------------------+\n| RAND()             |\n+--------------------+\n| 0.6016649581507453 |\n+--------------------+\n1 row in set (0.00 sec)\n```\n\n`RAND()` 还可以给一个数字参数，以该数字作为基准来生成一个可重复的随机数。\n\n```mysql\n> select RAND(5);\n+---------------------+\n| RAND(5)             |\n+---------------------+\n| 0.40613597483014313 |\n+---------------------+\n1 row in set (0.00 sec)\n> select RAND(5);\n+---------------------+\n| RAND(5)             |\n+---------------------+\n| 0.40613597483014313 |\n+---------------------+\n1 row in set (0.00 sec)\n```\n\n官方定义的该参数的取值范围是 `0~1`，但实测超过该范围也可以得到结果。\n\n如果想要得到一个随机的整数，则可以运用数学运算和 `FLOOR()` 函数，比如想要一个 `[10,20]` 区间的随机数\n\n```mysql\n> select FLOOR(10 + (RAND() * 11));\n+---------------------------+\n| FLOOR(10 + (RAND() * 11)) |\n+---------------------------+\n|                        18 |\n+---------------------------+\n1 row in set (0.00 sec)\n```\n\n最后回来点一下题，如何获取表中的随机数据？\n\n这里需要配合排序语句 `ORDER BY RAND()` 来使用，可以获取一个按照随机排序的列表。\n\n```mysql\n> SELECT * FROM USER ORDER BY RAND();\n+----+--------+----------+--------------+--------------+---------------------+---------------------+\n| id | name   | password | ext_property | is_available | create_ts           | update_ts           |\n+----+--------+----------+--------------+--------------+---------------------+---------------------+\n|  4 | spring |          | {}           |            1 | 2018-03-02 11:04:11 | 2018-03-02 11:04:11 |\n|  1 | wxnacy |          | {}           |            1 | 2018-03-02 11:04:11 | 2018-03-02 11:04:11 |\n|  2 | win    |          | {}           |            1 | 2018-03-02 11:04:11 | 2018-03-02 11:04:11 |\n|  3 | xiao   |          | {}           |            1 | 2018-03-02 11:04:11 | 2018-03-02 11:04:11 |\n|  5 | 温     |          | {}           |            1 | 2018-03-02 11:04:11 | 2018-03-02 11:04:11 |\n+----+--------+----------+--------------+--------------+---------------------+---------------------+\n5 rows in set (0.00 sec)\n```\n\n最后再配合 `LIMIT` 来获取随机的一条数据\n\n```mysql\n> SELECT * FROM USER ORDER BY RAND() LIMIT 1;\n+----+--------+----------+--------------+--------------+---------------------+---------------------+\n| id | name   | password | ext_property | is_available | create_ts           | update_ts           |\n+----+--------+----------+--------------+--------------+---------------------+---------------------+\n|  2 | win    |          | {}           |            1 | 2018-03-02 11:04:11 | 2018-03-02 11:04:11 |\n+----+--------+----------+--------------+--------------+---------------------+---------------------+\n1 rows in set (0.00 sec)\n```\n","slug":"mysql-rand","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aoj00xf5gqoeftpy3ud"},{"title":"Nginx 丢失头信息的解决方法","date":"2019-11-19T21:50:46.000Z","_content":"\n最近在做 web 框架上的一些调整，在本地测试一个接口时发现莫名其妙的报错，调试发现是 Nginx 丢掉了带有下划线的头信息。\n\n<!-- more -->\n<!-- toc -->\n\n对比了线上环境的配置文件，发现了确实有个配置不同，缺失了下面的部分\n\n```bash\nhttp {\n    ...\n    underscores_in_headers on;\n    ...\n}\n```\n\nNginx 默认情况下配置 `underscores_in_headers off;`，加上上面的配置即可正常请求接口。\n","source":"_posts/2019-11-19-nginx-loss-headers.md","raw":"---\ntitle: Nginx 丢失头信息的解决方法\ndate: 2019-11-19 21:50:46\ntags: [nginx]\n---\n\n最近在做 web 框架上的一些调整，在本地测试一个接口时发现莫名其妙的报错，调试发现是 Nginx 丢掉了带有下划线的头信息。\n\n<!-- more -->\n<!-- toc -->\n\n对比了线上环境的配置文件，发现了确实有个配置不同，缺失了下面的部分\n\n```bash\nhttp {\n    ...\n    underscores_in_headers on;\n    ...\n}\n```\n\nNginx 默认情况下配置 `underscores_in_headers off;`，加上上面的配置即可正常请求接口。\n","slug":"nginx-loss-headers","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aol00xh5gqouv40rixu"},{"title":"FFmpeg 常用的命令","date":"2019-12-09T23:04:16.000Z","_content":"\n记录 FFmpeg 的一些命令\n\n<!-- more -->\n<!-- toc -->\n\n**m3u8 格式文件转为 mp4**\n\n```bash\n$ ffmpeg -i \"https://xxxx.com/20191005/WofkPuP1/1200kb/hls/index.m3u8\" -bsf:a aac_adtstoasc -vcodec copy -c copy -crf 50 target.mp4\n```\n\n**mkv 格式转为 mp4**\n\n```bash\n$ ffmpeg -i input.mkv -c copy -strict -2 output.mp4\n```\n\n**分割视频**\n\n```bash\n# -ss 开始时间（可选）\n# -t 结束时间（可选）\n# source.mp4 视频源\n# target.mp4 目标名称\n$ ffmpeg -ss 00:12:00 -t 00:56:00 -i source.mp4 -vcodec copy -acodec copy target.mp4\n```\n\n**将字幕文件烧进视频文件中**\n\n```bash\n$ ffmpeg -i source.mkv -vf subtitles=source.srt output.mkv\n```\n\n**将多个视频无损的合并为一个**\n\n首先在视频目录下准备一个文件 `filename.txt` 内容为 \n\n```bash\nfile 05-wodedipan.mkv\nfile 05-yuanyouhui.mkv\nfile 05-luanwuchunqiu.mkv\nfile 06-langmanshouji.mkv\nfile 06-lansefengbao.mkv\nfile 06-piaoyi.mkv\nfile 02-duibuqi.mkv\nfile 03-anhao.mkv\n```\n\n然后执行命令\n\n```bash\n$ ffmpeg -f concat -i filelist.txt -c copy output.mkv\n```\n\n***注意 filename.txt 中的文件名不能有中文***\n\n`filename.txt` 可以使用命令行来直接生成，先把视频都放在同一文件夹下然后执行\n\n```bash\n$ ll | awk '{print \"file\" $9}' > filelist.txt\n```\n\n一般文件名我们都习惯取中文名，这里改成英文名也可以借助程序来批量修改。\n\n这里需要用到 `Python` 来写一个脚本\n\n首先下载依赖包\n\n```bash\n$ pip install pypinyin\n```\n\n然后在视频目录下运行该文件即可\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom pypinyin import lazy_pinyin\nimport os\n\ndef hans2py(hans):\n    '''汉字转拼音'''\n    hans = hans.lower()\n    hans = hans.split()\n    all_words = lazy_pinyin(hans)\n    return all_words\n\ndirs = os.listdir()\n\nfor d in dirs:\n    pin = hans2py(d)\n    os.rename(d, ''.join(pin))\n\n```\n\n","source":"_posts/2019-12-09-ffmpeg-shell.md","raw":"---\ntitle: FFmpeg 常用的命令\ndate: 2019-12-09 23:04:16\ntags: [ffmpeg]\n---\n\n记录 FFmpeg 的一些命令\n\n<!-- more -->\n<!-- toc -->\n\n**m3u8 格式文件转为 mp4**\n\n```bash\n$ ffmpeg -i \"https://xxxx.com/20191005/WofkPuP1/1200kb/hls/index.m3u8\" -bsf:a aac_adtstoasc -vcodec copy -c copy -crf 50 target.mp4\n```\n\n**mkv 格式转为 mp4**\n\n```bash\n$ ffmpeg -i input.mkv -c copy -strict -2 output.mp4\n```\n\n**分割视频**\n\n```bash\n# -ss 开始时间（可选）\n# -t 结束时间（可选）\n# source.mp4 视频源\n# target.mp4 目标名称\n$ ffmpeg -ss 00:12:00 -t 00:56:00 -i source.mp4 -vcodec copy -acodec copy target.mp4\n```\n\n**将字幕文件烧进视频文件中**\n\n```bash\n$ ffmpeg -i source.mkv -vf subtitles=source.srt output.mkv\n```\n\n**将多个视频无损的合并为一个**\n\n首先在视频目录下准备一个文件 `filename.txt` 内容为 \n\n```bash\nfile 05-wodedipan.mkv\nfile 05-yuanyouhui.mkv\nfile 05-luanwuchunqiu.mkv\nfile 06-langmanshouji.mkv\nfile 06-lansefengbao.mkv\nfile 06-piaoyi.mkv\nfile 02-duibuqi.mkv\nfile 03-anhao.mkv\n```\n\n然后执行命令\n\n```bash\n$ ffmpeg -f concat -i filelist.txt -c copy output.mkv\n```\n\n***注意 filename.txt 中的文件名不能有中文***\n\n`filename.txt` 可以使用命令行来直接生成，先把视频都放在同一文件夹下然后执行\n\n```bash\n$ ll | awk '{print \"file\" $9}' > filelist.txt\n```\n\n一般文件名我们都习惯取中文名，这里改成英文名也可以借助程序来批量修改。\n\n这里需要用到 `Python` 来写一个脚本\n\n首先下载依赖包\n\n```bash\n$ pip install pypinyin\n```\n\n然后在视频目录下运行该文件即可\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom pypinyin import lazy_pinyin\nimport os\n\ndef hans2py(hans):\n    '''汉字转拼音'''\n    hans = hans.lower()\n    hans = hans.split()\n    all_words = lazy_pinyin(hans)\n    return all_words\n\ndirs = os.listdir()\n\nfor d in dirs:\n    pin = hans2py(d)\n    os.rename(d, ''.join(pin))\n\n```\n\n","slug":"ffmpeg-shell","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aom00xj5gqozg4w8jdu"},{"title":"Shell 获取字符串长度的几种方式","date":"2020-01-07T17:43:52.000Z","_content":"\n记录几种获取字符串长度的方式\n\n<!-- more -->\n<!-- toc -->\n\n```bash\n$ str=wxnacy\n```\n\n```bash\n$ echo ${#str}\n```\n\n```bash\n# -n 是去掉 \\n 符号，不然计算的长度为 7\n$ echo $(echo -n $str | wc -c)\n```\n\n```bash\n$ echo $str | awk '{print length($0)}'\n```\n","source":"_posts/2020-01-07-shell-string-length.md","raw":"---\ntitle: Shell 获取字符串长度的几种方式\ndate: 2020-01-07 17:43:52\ntags: [shell]\n---\n\n记录几种获取字符串长度的方式\n\n<!-- more -->\n<!-- toc -->\n\n```bash\n$ str=wxnacy\n```\n\n```bash\n$ echo ${#str}\n```\n\n```bash\n# -n 是去掉 \\n 符号，不然计算的长度为 7\n$ echo $(echo -n $str | wc -c)\n```\n\n```bash\n$ echo $str | awk '{print length($0)}'\n```\n","slug":"shell-string-length","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aoo00xl5gqo8pr3xb9l"},{"title":"Mysql 分组查找最后一条记录","date":"2020-01-08T16:45:19.000Z","_content":"\n现在有一张表，以 `yt_channel_id` 为外键 id，不断的写进数据，每次的数据 `videos` 字段会不一样。\n\n<!-- more -->\n<!-- toc -->\n\n现在想要批量每个 `yt_channel_id` 最新插入的数据，使用 `group` 配合 `max(create_ts)` 即可。\n\n```mysql\n$ select yt_channel_id, videos, max(create_ts) from youtube_data group by yt_channel_id;\n```\n\n不过 `5.7.19` 版本不可用，直接报错，`5.7.23` 及以上可用。\n","source":"_posts/2020-01-08-mysql-group-last-row.md","raw":"---\ntitle: Mysql 分组查找最后一条记录\ndate: 2020-01-08 16:45:19\ntags: [mysql]\n---\n\n现在有一张表，以 `yt_channel_id` 为外键 id，不断的写进数据，每次的数据 `videos` 字段会不一样。\n\n<!-- more -->\n<!-- toc -->\n\n现在想要批量每个 `yt_channel_id` 最新插入的数据，使用 `group` 配合 `max(create_ts)` 即可。\n\n```mysql\n$ select yt_channel_id, videos, max(create_ts) from youtube_data group by yt_channel_id;\n```\n\n不过 `5.7.19` 版本不可用，直接报错，`5.7.23` 及以上可用。\n","slug":"mysql-group-last-row","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aop00xn5gqocvf3vq2t"},{"title":"Shell 获取单个文件大小的几种方式","date":"2020-01-09T16:21:42.000Z","_content":"\n假设有文件 `wxnacy`\n\n<!-- more -->\n<!-- toc -->\n\n## wc\n\n```bash\n$ echo $(wc -c < wxnacy)\n$ echo $(cat wxnacy | wc -c)\n$ wc -c wxnacy | awk '{print $1}'\n```\n\n## ls\n\n```bash\n$ ls -l wxnacy | awk '{print $5}'\n```\n\n## stat\n\n```bash\n$ stat wxnacy | awk '{print $8}'\n```\n","source":"_posts/2020-01-09-shell-file-size.md","raw":"---\ntitle: Shell 获取单个文件大小的几种方式\ndate: 2020-01-09 16:21:42\ntags: [shell]\n---\n\n假设有文件 `wxnacy`\n\n<!-- more -->\n<!-- toc -->\n\n## wc\n\n```bash\n$ echo $(wc -c < wxnacy)\n$ echo $(cat wxnacy | wc -c)\n$ wc -c wxnacy | awk '{print $1}'\n```\n\n## ls\n\n```bash\n$ ls -l wxnacy | awk '{print $5}'\n```\n\n## stat\n\n```bash\n$ stat wxnacy | awk '{print $8}'\n```\n","slug":"shell-file-size","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aoq00xp5gqohcot8qxa"},{"title":"Shell 截取字符串的几种方式","date":"2020-01-13T23:33:18.000Z","_content":"\nShell 中截取字符串的方式也有很多种。\n\n<!-- more -->\n<!-- toc -->\n\n```bash\n$ str=https://wxnacy.com/2020/01/13/shell-substr\n```\n\n**从索引处开始截取**\n\n```bash\n$ echo ${str:6}\n//wxnacy.com/2020/01/13/shell-substr\n```\n\n**截取指定长度**\n\n```bash\n$ echo ${str:6:8}\n//wxnacy\n```\n\n**从右边索引处开始截取**\n\n```bash\n$ echo ${str:0-6}\nsubstr\n```\n","source":"_posts/2020-01-13-shell-substr.md","raw":"---\ntitle: Shell 截取字符串的几种方式\ndate: 2020-01-13 23:33:18\ntags: [shell]\n---\n\nShell 中截取字符串的方式也有很多种。\n\n<!-- more -->\n<!-- toc -->\n\n```bash\n$ str=https://wxnacy.com/2020/01/13/shell-substr\n```\n\n**从索引处开始截取**\n\n```bash\n$ echo ${str:6}\n//wxnacy.com/2020/01/13/shell-substr\n```\n\n**截取指定长度**\n\n```bash\n$ echo ${str:6:8}\n//wxnacy\n```\n\n**从右边索引处开始截取**\n\n```bash\n$ echo ${str:0-6}\nsubstr\n```\n","slug":"shell-substr","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aos00xr5gqotx8nljc8"},{"title":"解决 Docker 日志文件太大的问题","date":"2019-12-26T14:51:31.000Z","_content":"\nDocker 在不重建容器的情况下，日志文件默认会一直追加，时间一长会逐渐占满服务器的硬盘的空间，内存消耗也会一直增加，本篇来了解一些控制日志文件的方法。\n\n<!-- more -->\n<!-- toc -->\n\nDocker 的日志文件存在 `/var/lib/docker/containers` 目录中，通过下面的命令可以将日志文件夹根据升序的方式罗列出来。\n\n```bash\n$ sudo du -d1 -h /var/lib/docker/containers | sort -h\n\n28K     /var/lib/docker/containers/0db860afe94df368335c2e96f290275f4c396b996b4e8d22770b01baafd9982c\n36K     /var/lib/docker/containers/6ee184044661c436b44769d56c203f1fc296dbfe08f6ed4cf79aa6fb8cae6659\n44K     /var/lib/docker/containers/66c44231981fcb5ecd33bf0fc3390e71c5cbbabb839d79441eb3317b8500d551\n60K     /var/lib/docker/containers/bc4136199037e73d712614ef57de0915d294cbe51045d213f0d822d71a86cf2c\n344K    /var/lib/docker/containers/7bd3a179cf67b1537e0965c1d1f518420ac5d4cd151ecb75c37ada8c2347ca6b\n984K    /var/lib/docker/containers/6bd1f79f16b8b06f2bd203dd84443004ba08c150ac51d23fa620e8b2cbf4b773\n1.7M    /var/lib/docker/containers/a93a4275571b0033367f9cab8213c467b21a03c600e2203195640b5a5bc7f523\n4.4M    /var/lib/docker/containers/082564c5bdb19b642491b09419a69061122483c0f959a36eb186dd1fec53c163\n14M     /var/lib/docker/containers/05fc24ef7a14e31e4557c9881482d350cfb05f2f1cb870638de344581154ca01\n32M     /var/lib/docker/containers/5d70c82942083d16593670058aefed339cfe874c9027205b1e6eb8e569894d65\n129M    /var/lib/docker/containers/a88d104d20e5ee58ffeaeecbb559b3231c5b8c73ad1443538928ebeae4ff705c\n285M    /var/lib/docker/containers/b623602a667c0b31068563f244610a548ed055ff9802197f372ff436a294ab5c\n917M    /var/lib/docker/containers/3d71c509ab6aea34400d37f6c006914eed2cb05e6e6cd07b3ee03eb783dc367b\n1.4G    /var/lib/docker/containers\n```\n\n有三种方式可以清理日志文件\n\n## 清理单个文件\n\n感觉哪个容器的日志太大就清理哪个\n\n```bash\n$ sudo sh -c \"cat /dev/null > ${log_file}\"\n```\n\n`${log_file}` 就是日志文件，可以通过 `find` 命令查找全部日志\n\n```bash\n$ sudo find /var/lib/docker/containers -name *.log\n\n/var/lib/docker/containers/3d71c509ab6aea34400d37f6c006914eed2cb05e6e6cd07b3ee03eb783dc367b/3d71c509ab6aea34400d37f6c006914eed2cb05e6e6cd07b3ee03eb783dc367b-json.log\n/var/lib/docker/containers/0db860afe94df368335c2e96f290275f4c396b996b4e8d22770b01baafd9982c/0db860afe94df368335c2e96f290275f4c396b996b4e8d22770b01baafd9982c-json.log\n/var/lib/docker/containers/bc4136199037e73d712614ef57de0915d294cbe51045d213f0d822d71a86cf2c/bc4136199037e73d712614ef57de0915d294cbe51045d213f0d822d71a86cf2c-json.log\n/var/lib/docker/containers/5d70c82942083d16593670058aefed339cfe874c9027205b1e6eb8e569894d65/5d70c82942083d16593670058aefed339cfe874c9027205b1e6eb8e569894d65-json.log\n/var/lib/docker/containers/6ee184044661c436b44769d56c203f1fc296dbfe08f6ed4cf79aa6fb8cae6659/6ee184044661c436b44769d56c203f1fc296dbfe08f6ed4cf79aa6fb8cae6659-json.log\n/var/lib/docker/containers/082564c5bdb19b642491b09419a69061122483c0f959a36eb186dd1fec53c163/082564c5bdb19b642491b09419a69061122483c0f959a36eb186dd1fec53c163-json.log\n/var/lib/docker/containers/b623602a667c0b31068563f244610a548ed055ff9802197f372ff436a294ab5c/b623602a667c0b31068563f244610a548ed055ff9802197f372ff436a294ab5c-json.log\n/var/lib/docker/containers/66c44231981fcb5ecd33bf0fc3390e71c5cbbabb839d79441eb3317b8500d551/66c44231981fcb5ecd33bf0fc3390e71c5cbbabb839d79441eb3317b8500d551-json.log\n/var/lib/docker/containers/a93a4275571b0033367f9cab8213c467b21a03c600e2203195640b5a5bc7f523/a93a4275571b0033367f9cab8213c467b21a03c600e2203195640b5a5bc7f523-json.log\n/var/lib/docker/containers/a88d104d20e5ee58ffeaeecbb559b3231c5b8c73ad1443538928ebeae4ff705c/a88d104d20e5ee58ffeaeecbb559b3231c5b8c73ad1443538928ebeae4ff705c-json.log\n/var/lib/docker/containers/6bd1f79f16b8b06f2bd203dd84443004ba08c150ac51d23fa620e8b2cbf4b773/6bd1f79f16b8b06f2bd203dd84443004ba08c150ac51d23fa620e8b2cbf4b773-json.log\n/var/lib/docker/containers/05fc24ef7a14e31e4557c9881482d350cfb05f2f1cb870638de344581154ca01/05fc24ef7a14e31e4557c9881482d350cfb05f2f1cb870638de344581154ca01-json.log\n/var/lib/docker/containers/7bd3a179cf67b1537e0965c1d1f518420ac5d4cd151ecb75c37ada8c2347ca6b/7bd3a179cf67b1537e0965c1d1f518420ac5d4cd151ecb75c37ada8c2347ca6b-json.log\n```\n\n或者查看具体容器名称的日志位置\n\n```bash\n$ docker inspect --format='{{.LogPath}}' redis\n/var/lib/docker/containers/6ee184044661c436b44769d56c203f1fc296dbfe08f6ed4cf79aa6fb8cae6659/6ee184044661c436b44769d56c203f1fc296dbfe08f6ed4cf79aa6fb8cae6659-json.log\n```\n\n这样只是解决燃眉之急，并不是长久之计，最好是创建容器时就控制日志的大小.\n\n## 运行时控制\n\n启动容器时，我们可以通过参数来控制日志的文件个数和单个文件的大小\n\n```bash\n# max-size 最大数值\n# max-file 最大日志数\n$ docker run -it --log-opt max-size=10m --log-opt max-file=3 redis\n```\n\n一两个容器还好，但是如果有很多容器需要管理，这样就很不方便了，最好还是可以统一管理。\n\n## 全局配置\n\n创建或修改文件 `/etc/docker/daemon.json`，并增加以下配置\n\n```json\n{\n    \"log-driver\":\"json-file\",\n    \"log-opts\":{\n        \"max-size\" :\"50m\",\"max-file\":\"1\"\n    }\n}\n```\n\n随后重启 Docker 服务\n\n```bash\n$ sudo systemctl daemon-reload\n$ sudo systemctl restart docker\n```\n\n不过已存在的容器不会生效，需要重建才可以\n\n","source":"_posts/2019-12-26-docker-log-too-big.md","raw":"---\ntitle: 解决 Docker 日志文件太大的问题\ndate: 2019-12-26 14:51:31\ntags: [docker]\n---\n\nDocker 在不重建容器的情况下，日志文件默认会一直追加，时间一长会逐渐占满服务器的硬盘的空间，内存消耗也会一直增加，本篇来了解一些控制日志文件的方法。\n\n<!-- more -->\n<!-- toc -->\n\nDocker 的日志文件存在 `/var/lib/docker/containers` 目录中，通过下面的命令可以将日志文件夹根据升序的方式罗列出来。\n\n```bash\n$ sudo du -d1 -h /var/lib/docker/containers | sort -h\n\n28K     /var/lib/docker/containers/0db860afe94df368335c2e96f290275f4c396b996b4e8d22770b01baafd9982c\n36K     /var/lib/docker/containers/6ee184044661c436b44769d56c203f1fc296dbfe08f6ed4cf79aa6fb8cae6659\n44K     /var/lib/docker/containers/66c44231981fcb5ecd33bf0fc3390e71c5cbbabb839d79441eb3317b8500d551\n60K     /var/lib/docker/containers/bc4136199037e73d712614ef57de0915d294cbe51045d213f0d822d71a86cf2c\n344K    /var/lib/docker/containers/7bd3a179cf67b1537e0965c1d1f518420ac5d4cd151ecb75c37ada8c2347ca6b\n984K    /var/lib/docker/containers/6bd1f79f16b8b06f2bd203dd84443004ba08c150ac51d23fa620e8b2cbf4b773\n1.7M    /var/lib/docker/containers/a93a4275571b0033367f9cab8213c467b21a03c600e2203195640b5a5bc7f523\n4.4M    /var/lib/docker/containers/082564c5bdb19b642491b09419a69061122483c0f959a36eb186dd1fec53c163\n14M     /var/lib/docker/containers/05fc24ef7a14e31e4557c9881482d350cfb05f2f1cb870638de344581154ca01\n32M     /var/lib/docker/containers/5d70c82942083d16593670058aefed339cfe874c9027205b1e6eb8e569894d65\n129M    /var/lib/docker/containers/a88d104d20e5ee58ffeaeecbb559b3231c5b8c73ad1443538928ebeae4ff705c\n285M    /var/lib/docker/containers/b623602a667c0b31068563f244610a548ed055ff9802197f372ff436a294ab5c\n917M    /var/lib/docker/containers/3d71c509ab6aea34400d37f6c006914eed2cb05e6e6cd07b3ee03eb783dc367b\n1.4G    /var/lib/docker/containers\n```\n\n有三种方式可以清理日志文件\n\n## 清理单个文件\n\n感觉哪个容器的日志太大就清理哪个\n\n```bash\n$ sudo sh -c \"cat /dev/null > ${log_file}\"\n```\n\n`${log_file}` 就是日志文件，可以通过 `find` 命令查找全部日志\n\n```bash\n$ sudo find /var/lib/docker/containers -name *.log\n\n/var/lib/docker/containers/3d71c509ab6aea34400d37f6c006914eed2cb05e6e6cd07b3ee03eb783dc367b/3d71c509ab6aea34400d37f6c006914eed2cb05e6e6cd07b3ee03eb783dc367b-json.log\n/var/lib/docker/containers/0db860afe94df368335c2e96f290275f4c396b996b4e8d22770b01baafd9982c/0db860afe94df368335c2e96f290275f4c396b996b4e8d22770b01baafd9982c-json.log\n/var/lib/docker/containers/bc4136199037e73d712614ef57de0915d294cbe51045d213f0d822d71a86cf2c/bc4136199037e73d712614ef57de0915d294cbe51045d213f0d822d71a86cf2c-json.log\n/var/lib/docker/containers/5d70c82942083d16593670058aefed339cfe874c9027205b1e6eb8e569894d65/5d70c82942083d16593670058aefed339cfe874c9027205b1e6eb8e569894d65-json.log\n/var/lib/docker/containers/6ee184044661c436b44769d56c203f1fc296dbfe08f6ed4cf79aa6fb8cae6659/6ee184044661c436b44769d56c203f1fc296dbfe08f6ed4cf79aa6fb8cae6659-json.log\n/var/lib/docker/containers/082564c5bdb19b642491b09419a69061122483c0f959a36eb186dd1fec53c163/082564c5bdb19b642491b09419a69061122483c0f959a36eb186dd1fec53c163-json.log\n/var/lib/docker/containers/b623602a667c0b31068563f244610a548ed055ff9802197f372ff436a294ab5c/b623602a667c0b31068563f244610a548ed055ff9802197f372ff436a294ab5c-json.log\n/var/lib/docker/containers/66c44231981fcb5ecd33bf0fc3390e71c5cbbabb839d79441eb3317b8500d551/66c44231981fcb5ecd33bf0fc3390e71c5cbbabb839d79441eb3317b8500d551-json.log\n/var/lib/docker/containers/a93a4275571b0033367f9cab8213c467b21a03c600e2203195640b5a5bc7f523/a93a4275571b0033367f9cab8213c467b21a03c600e2203195640b5a5bc7f523-json.log\n/var/lib/docker/containers/a88d104d20e5ee58ffeaeecbb559b3231c5b8c73ad1443538928ebeae4ff705c/a88d104d20e5ee58ffeaeecbb559b3231c5b8c73ad1443538928ebeae4ff705c-json.log\n/var/lib/docker/containers/6bd1f79f16b8b06f2bd203dd84443004ba08c150ac51d23fa620e8b2cbf4b773/6bd1f79f16b8b06f2bd203dd84443004ba08c150ac51d23fa620e8b2cbf4b773-json.log\n/var/lib/docker/containers/05fc24ef7a14e31e4557c9881482d350cfb05f2f1cb870638de344581154ca01/05fc24ef7a14e31e4557c9881482d350cfb05f2f1cb870638de344581154ca01-json.log\n/var/lib/docker/containers/7bd3a179cf67b1537e0965c1d1f518420ac5d4cd151ecb75c37ada8c2347ca6b/7bd3a179cf67b1537e0965c1d1f518420ac5d4cd151ecb75c37ada8c2347ca6b-json.log\n```\n\n或者查看具体容器名称的日志位置\n\n```bash\n$ docker inspect --format='{{.LogPath}}' redis\n/var/lib/docker/containers/6ee184044661c436b44769d56c203f1fc296dbfe08f6ed4cf79aa6fb8cae6659/6ee184044661c436b44769d56c203f1fc296dbfe08f6ed4cf79aa6fb8cae6659-json.log\n```\n\n这样只是解决燃眉之急，并不是长久之计，最好是创建容器时就控制日志的大小.\n\n## 运行时控制\n\n启动容器时，我们可以通过参数来控制日志的文件个数和单个文件的大小\n\n```bash\n# max-size 最大数值\n# max-file 最大日志数\n$ docker run -it --log-opt max-size=10m --log-opt max-file=3 redis\n```\n\n一两个容器还好，但是如果有很多容器需要管理，这样就很不方便了，最好还是可以统一管理。\n\n## 全局配置\n\n创建或修改文件 `/etc/docker/daemon.json`，并增加以下配置\n\n```json\n{\n    \"log-driver\":\"json-file\",\n    \"log-opts\":{\n        \"max-size\" :\"50m\",\"max-file\":\"1\"\n    }\n}\n```\n\n随后重启 Docker 服务\n\n```bash\n$ sudo systemctl daemon-reload\n$ sudo systemctl restart docker\n```\n\n不过已存在的容器不会生效，需要重建才可以\n\n","slug":"docker-log-too-big","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aot00xt5gqoagqkob82"},{"title":"Node 从管道输入参数","date":"2020-03-06T11:45:51.000Z","_content":"\n记录 Node 从管道输入参数的方式\n\n<!-- more -->\n<!-- toc -->\n\n```javascript\nconst stdin = process.stdin;\nlet data = '';\n\nstdin.setEncoding('utf8');\n\nstdin.on('data', function (chunk) {\n  data += chunk;\n});\n\nstdin.on('end', function () {\n  console.log(\"Hello \" + data);\n});\n\nstdin.on('error', console.error);\n```\n\n调用方式\n\n```javascript\n$ echo \"1 2\" | node test.js\n```\n\n改为同步调用方式\n\n```javascript\n/**\n *  * Author: wxnacy(wxnacy@gmail.com)\n *   * Description:\n *    */\n\nconst stdin = process.stdin;\n\nfunction pipeInput() {\n  return new Promise((resolve, reject) => {\n    let data = '';\n\n    stdin.setEncoding('utf8');\n\n    stdin.on('data', function (chunk) {\n      data += chunk;\n    });\n\n    stdin.on('end', function () {\n      resolve(data)\n    });\n\n    stdin.on('error', reject);\n\n  })\n}\n\n(async()=>{\n\n  try {\n\n    let data = await pipeInput()\n    console.log(`参数为：${data}`);\n  } catch (e) {\n    console.error(e)\n  }\n})();\n```\n","source":"_posts/2020-03-06-node-pipe-input.md","raw":"---\ntitle: Node 从管道输入参数\ndate: 2020-03-06 11:45:51\ntags: [node]\n---\n\n记录 Node 从管道输入参数的方式\n\n<!-- more -->\n<!-- toc -->\n\n```javascript\nconst stdin = process.stdin;\nlet data = '';\n\nstdin.setEncoding('utf8');\n\nstdin.on('data', function (chunk) {\n  data += chunk;\n});\n\nstdin.on('end', function () {\n  console.log(\"Hello \" + data);\n});\n\nstdin.on('error', console.error);\n```\n\n调用方式\n\n```javascript\n$ echo \"1 2\" | node test.js\n```\n\n改为同步调用方式\n\n```javascript\n/**\n *  * Author: wxnacy(wxnacy@gmail.com)\n *   * Description:\n *    */\n\nconst stdin = process.stdin;\n\nfunction pipeInput() {\n  return new Promise((resolve, reject) => {\n    let data = '';\n\n    stdin.setEncoding('utf8');\n\n    stdin.on('data', function (chunk) {\n      data += chunk;\n    });\n\n    stdin.on('end', function () {\n      resolve(data)\n    });\n\n    stdin.on('error', reject);\n\n  })\n}\n\n(async()=>{\n\n  try {\n\n    let data = await pipeInput()\n    console.log(`参数为：${data}`);\n  } catch (e) {\n    console.error(e)\n  }\n})();\n```\n","slug":"node-pipe-input","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aou00xv5gqohkl6vpeq"},{"title":"Mac 电脑通过 Finder 获取文件夹的命令行地址","date":"2020-02-15T00:08:05.000Z","_content":"\n记录几种 Mac 电脑通过 Finder 获取文件地址的方式。\n\n<!-- more -->\n<!-- toc -->\n\n## 直接复制\n\n在文件列表中直接使用 `command + c` 复制，然后在 `Terminal` 中粘贴即可\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/finder1.png)\n\n在 Finder 左侧的目录则需要使用 `option + command + c` 来进行复制\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/finder2.png)\n\n## 顶部永久显示\n\n打开 `Terminal` 并输入命令\n\n```bash\n$ defaults write com.apple.finder _FXShowPosixPathInTitle -bool YES\n```\n\n效果如图\n\n![3](https://raw.githubusercontent.com/wxnacy/image/master/blog/finder3.png)\n\n## 直接在终端中打开\n\n如果你安装了 `iTerm2`，则可以通过 `右键 -》服务 -》New iTerm2 Window Here` 直接打开当前目录\n\n![4](https://raw.githubusercontent.com/wxnacy/image/master/blog/finder4_552.png)\n\n如果没有安装，也可以在文件夹的右键在默认终端中直接打开\n\n![5](https://raw.githubusercontent.com/wxnacy/image/master/blog/finder5_612.png)\n","source":"_posts/2020-02-15-mac-finder-get-pwd.md","raw":"---\ntitle: Mac 电脑通过 Finder 获取文件夹的命令行地址\ndate: 2020-02-15 00:08:05\ntags: [mac]\n---\n\n记录几种 Mac 电脑通过 Finder 获取文件地址的方式。\n\n<!-- more -->\n<!-- toc -->\n\n## 直接复制\n\n在文件列表中直接使用 `command + c` 复制，然后在 `Terminal` 中粘贴即可\n\n![1](https://raw.githubusercontent.com/wxnacy/image/master/blog/finder1.png)\n\n在 Finder 左侧的目录则需要使用 `option + command + c` 来进行复制\n\n![2](https://raw.githubusercontent.com/wxnacy/image/master/blog/finder2.png)\n\n## 顶部永久显示\n\n打开 `Terminal` 并输入命令\n\n```bash\n$ defaults write com.apple.finder _FXShowPosixPathInTitle -bool YES\n```\n\n效果如图\n\n![3](https://raw.githubusercontent.com/wxnacy/image/master/blog/finder3.png)\n\n## 直接在终端中打开\n\n如果你安装了 `iTerm2`，则可以通过 `右键 -》服务 -》New iTerm2 Window Here` 直接打开当前目录\n\n![4](https://raw.githubusercontent.com/wxnacy/image/master/blog/finder4_552.png)\n\n如果没有安装，也可以在文件夹的右键在默认终端中直接打开\n\n![5](https://raw.githubusercontent.com/wxnacy/image/master/blog/finder5_612.png)\n","slug":"mac-finder-get-pwd","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aow00xx5gqo58r528w9"},{"title":"Node 写入和读取文件","date":"2020-03-07T11:09:35.000Z","_content":"\n记录 Node 写入和读取文件的简单方法\n\n<!-- more -->\n<!-- toc -->\n\n\n```javascript\n/**\n *  * Author: wxnacy(wxnacy@gmail.com)\n *   * Description:\n *    */\nconst fs = require('fs');\n\nfs.writeFile('/tmp/test', 'Hello World', function(err, data) {\n  if( err ){\n    return console.log(err);\n  }\n  console.log(data);\n})\n\nfs.readFile('/tmp/test', 'utf8', (err, data) => {\n  if( err ){\n    return console.log(err);\n  }\n  console.log(data);\n})\n```\n\n将读取改为同步调用方式\n\n```javascript\n/**\n *  * Author: wxnacy(wxnacy@gmail.com)\n *   * Description:\n *    */\nconst fs = require('fs');\n\nconst path = '/Users/wxnacy/Downloads/test.sh'\n\nasync function read() {\n  return new Promise((resolve, reject) => {\n    fs.readFile(path, 'utf8', (err, data) => {\n      if( err ){\n        reject(err)\n      }\n      resolve(data)\n    })\n  })\n}\n\n(async () => {\n\n  try {\n\n    let data = await read()\n    console.log(data);\n  } catch (e) {\n    console.log(e);\n\n  }\n\n})();\n```\n","source":"_posts/2020-03-07-node-read-write-file.md","raw":"---\ntitle: Node 写入和读取文件\ndate: 2020-03-07 11:09:35\ntags: [node]\n---\n\n记录 Node 写入和读取文件的简单方法\n\n<!-- more -->\n<!-- toc -->\n\n\n```javascript\n/**\n *  * Author: wxnacy(wxnacy@gmail.com)\n *   * Description:\n *    */\nconst fs = require('fs');\n\nfs.writeFile('/tmp/test', 'Hello World', function(err, data) {\n  if( err ){\n    return console.log(err);\n  }\n  console.log(data);\n})\n\nfs.readFile('/tmp/test', 'utf8', (err, data) => {\n  if( err ){\n    return console.log(err);\n  }\n  console.log(data);\n})\n```\n\n将读取改为同步调用方式\n\n```javascript\n/**\n *  * Author: wxnacy(wxnacy@gmail.com)\n *   * Description:\n *    */\nconst fs = require('fs');\n\nconst path = '/Users/wxnacy/Downloads/test.sh'\n\nasync function read() {\n  return new Promise((resolve, reject) => {\n    fs.readFile(path, 'utf8', (err, data) => {\n      if( err ){\n        reject(err)\n      }\n      resolve(data)\n    })\n  })\n}\n\n(async () => {\n\n  try {\n\n    let data = await read()\n    console.log(data);\n  } catch (e) {\n    console.log(e);\n\n  }\n\n})();\n```\n","slug":"node-read-write-file","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aox00xz5gqocj783t6d"},{"title":"Shell 语言中的循环语句","date":"2020-03-08T09:30:15.000Z","_content":"\n总结几种 Shell 语言中可以用到的循环语句\n\n<!-- more -->\n<!-- toc -->\n\n## for\n\n### 数字循环\n\n简单数字循环\n\n```bash\n#!/usr/bin/env bash\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\n# function 1\n# lists=\"1 2 3 4 5\"\n# for var in $lists\n\n# function 2\n# for var in 1 2 3 4 5\n\n# function 3\nfor var in {1..5}\ndo\n    echo $var\ndone\n```\n\n命令行使用方式\n\n```bash\n$ for var in {1..5};do;echo $var; done\n```\n\n**使用 seq**\n\n```bash\n#!/usr/bin/env bash\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfor var in $(seq 1 10)\ndo\n     echo $var\ndone\n```\n\n使用 2 作为步长\n\n```bash\n#!/usr/bin/env bash\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfor var in $(seq 1 2 10)\ndo\n     echo $var\ndone\n```\n\n**使用 c 语言的方式**\n\n```bash\n#!/usr/bin/env bash\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfor ((var=1; var<=5; var ++))\ndo\n     echo $var\ndone\n```\n\n## while\n\n```bash\n#!/usr/bin/env bash\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\ni=1\n\nwhile(( i <= 10 ))\ndo\n     let \"i+=1\"\ndone\n```\n","source":"_posts/2020-03-08-shell-loop.md","raw":"---\ntitle: Shell 语言中的循环语句\ndate: 2020-03-08 09:30:15\ntags: [shell]\n---\n\n总结几种 Shell 语言中可以用到的循环语句\n\n<!-- more -->\n<!-- toc -->\n\n## for\n\n### 数字循环\n\n简单数字循环\n\n```bash\n#!/usr/bin/env bash\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\n# function 1\n# lists=\"1 2 3 4 5\"\n# for var in $lists\n\n# function 2\n# for var in 1 2 3 4 5\n\n# function 3\nfor var in {1..5}\ndo\n    echo $var\ndone\n```\n\n命令行使用方式\n\n```bash\n$ for var in {1..5};do;echo $var; done\n```\n\n**使用 seq**\n\n```bash\n#!/usr/bin/env bash\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfor var in $(seq 1 10)\ndo\n     echo $var\ndone\n```\n\n使用 2 作为步长\n\n```bash\n#!/usr/bin/env bash\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfor var in $(seq 1 2 10)\ndo\n     echo $var\ndone\n```\n\n**使用 c 语言的方式**\n\n```bash\n#!/usr/bin/env bash\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\nfor ((var=1; var<=5; var ++))\ndo\n     echo $var\ndone\n```\n\n## while\n\n```bash\n#!/usr/bin/env bash\n# Author: wxnacy(wxnacy@gmail.com)\n# Description:\n\ni=1\n\nwhile(( i <= 10 ))\ndo\n     let \"i+=1\"\ndone\n```\n","slug":"shell-loop","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2asf00z25gqo6zc5ki2e"},{"title":"Linux 获取当前登录用户名","date":"2020-04-01T11:23:54.000Z","_content":"\n写脚本时发现需要自适应当前登录用户的名字，查询后记录下\n\n<!-- more -->\n<!-- toc -->\n\n**USER**\n\n```bash\n$ echo $USER\nwxnacy\n```\n\n**whoami**\n\n```bash\n$ echo $(whoami)\nwxnacy\n```\n\n这里看着很别扭，注意三个单词中间不能有空格，不然就成了这样\n\n```bash\n$ echo $(who am i)\nwxnacy ttys044 Apr 1 11:26\n```\n\n只用 `$(who)` 则可以获取更多信息\n\n```bash\n$ echo $(who)\nwxnacy console Mar 31 15:40 wxnacy ttys000 Mar 31 15:44 wxnacy ttys067 Mar 31 15:48\n```\n","source":"_posts/2020-04-01-linux-login-name.md","raw":"---\ntitle: Linux 获取当前登录用户名\ndate: 2020-04-01 11:23:54\ntags: [linux]\n---\n\n写脚本时发现需要自适应当前登录用户的名字，查询后记录下\n\n<!-- more -->\n<!-- toc -->\n\n**USER**\n\n```bash\n$ echo $USER\nwxnacy\n```\n\n**whoami**\n\n```bash\n$ echo $(whoami)\nwxnacy\n```\n\n这里看着很别扭，注意三个单词中间不能有空格，不然就成了这样\n\n```bash\n$ echo $(who am i)\nwxnacy ttys044 Apr 1 11:26\n```\n\n只用 `$(who)` 则可以获取更多信息\n\n```bash\n$ echo $(who)\nwxnacy console Mar 31 15:40 wxnacy ttys000 Mar 31 15:44 wxnacy ttys067 Mar 31 15:48\n```\n","slug":"linux-login-name","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2asj00z35gqoro0om5fm"},{"title":"Python os 模块方法梳理","date":"2020-04-11T17:13:05.000Z","_content":"\n该模块提供了一些方便使用操作系统相关功能的函数。\n\n<!-- more -->\n<!-- toc -->\n\n## 系统相关\n\n方法 | 描述 | 参考值\n-----|------|----\nos.name | 导入的依赖特定操作系统的模块的名称。以下名称目前已注册: 'posix', 'nt', 'java'. | posix\nos.ctermid() | 返回与进程控制终端对应的文件名 | /dev/tty\nos.environ | 一个表示字符串环境的 mapping 对象 | os.environ['HOME'] = '/Users/wxnacy'\nos.environb | 字节版本的 environ: 一个以字节串表示环境的 mapping 对象 | os.environ['HOME'] = b'/Users/wxnacy'\nos.fsencode(path) | 编码 路径类 文件名 为文件系统接受的形式 | os.fsencode('温.json') = b'\\xe6\\xb8\\xa9.json'\nos.fsdecode(path) | 从文件系统编码方式解码为 路径类 文件名 | os.fsdecode(b'\\xe6\\xb8\\xa9.json') = '温.json'\nos.fspath(path) | 返回路径的文件系统表示。 如果传入的是 str 或 bytes 类型的字符串，将原样返回。 |\nos.getenv(key, default=None) | 如果存在，返回环境变量 key 的值，否则返回 default。| os.getenv('HOME') = '/Users/wxnacy'\nos.getenvb(key, default=None) | 同 `os.getenv()` key ， default 和返回值均为bytes字节串类型。 |\nos.get_exec_path(env=None) | 返回将用于搜索可执行文件的目录列表，与在外壳程序中启动一个进程时相似。指定的 env 应为用于搜索 PATH 的环境变量字典。默认情况下，当 env 为 None 时，将会使用 environ | os.get_exec_path() = os.getenv(\"PATH\")\nos.getegid() | 返回当前进程的有效组ID。对应当前进程执行文件的 \"set id\" 位。 |\nos.geteuid() | 返回当前进程的有效用户ID。 |\nos.getgrouplist(user, group) | 返回该用户所在的组 ID 列表。可能 group 参数没有在返回的列表中，实际上用户应该也是属于该 group。group 参数一般可以从储存账户信息的密码记录文件中找到。 |\nos.getgroups() | 返回当前进程关联的附加组ID列表 | Mac 环境会有所不同 https://docs.python.org/zh-cn/3.7/library/os.html#os.getgroups\nos.getlogin() | 返回通过控制终端进程进行登录的用户名。 | 在多数情况下，使用 getpass.getuser() 会更有效\nos.getpgid(pid) | 根据进程id pid 返回进程的组 ID 列表。如果 pid 为 0，则返回当前进程的进程组 ID 列表 |\nos.getpgrp() | 返回当时进程组的ID |\nos.getpid() | 返回当前进程ID |\nos.getppid() | 返回父进程ID。当父进程已经结束，在Unix中返回的ID是初始进程(1)中的一个 |\nos.getpriority(which, who) | 获取程序调度优先级。which 参数值可以是 PRIO_PROCESS，PRIO_PGRP，或 PRIO_USER 中的一个，who 是相对于 which (PRIO_PROCESS 的进程标识符，PRIO_PGRP 的进程组标识符和 PRIO_USER 的用户ID)。当 who 为 0 时（分别）表示调用的进程，调用进程的进程组或调用进程所属的真实用户 ID。 |\nos.PRIO_PROCESS | |\nos.PRIO_PGRP |  |\nos.PRIO_USER | 函数 getpriority() 和 setpriority() 的参数。|\nos.getuid() | 返回当前进程的真实用户ID。 |\nos.putenv(key, value) | 将名为 key 的环境变量值设置为 value。该变量名修改会影响由 os.system()， popen() ，fork() 和 execv() 发起的子进程。 | 不过 putenv() 的调用不会更新 os.environ，因此最好使用 os.environ 对变量赋值。\nos.setegid(egid) | 设置当前进程的有效组ID。 |\nos.seteuid(euid) | 设置当前进程的有效用户ID。 |\nos.setgid(gid) | 设置当前进程的组ID。 |\nos.setgroups(groups) | 将 group 参数值设置为与当进程相关联的附加组ID列表。 |\n\n","source":"_posts/2020-04-11-python-os.md","raw":"---\ntitle: Python os 模块方法梳理\ndate: 2020-04-11 17:13:05\ntags: [python]\n---\n\n该模块提供了一些方便使用操作系统相关功能的函数。\n\n<!-- more -->\n<!-- toc -->\n\n## 系统相关\n\n方法 | 描述 | 参考值\n-----|------|----\nos.name | 导入的依赖特定操作系统的模块的名称。以下名称目前已注册: 'posix', 'nt', 'java'. | posix\nos.ctermid() | 返回与进程控制终端对应的文件名 | /dev/tty\nos.environ | 一个表示字符串环境的 mapping 对象 | os.environ['HOME'] = '/Users/wxnacy'\nos.environb | 字节版本的 environ: 一个以字节串表示环境的 mapping 对象 | os.environ['HOME'] = b'/Users/wxnacy'\nos.fsencode(path) | 编码 路径类 文件名 为文件系统接受的形式 | os.fsencode('温.json') = b'\\xe6\\xb8\\xa9.json'\nos.fsdecode(path) | 从文件系统编码方式解码为 路径类 文件名 | os.fsdecode(b'\\xe6\\xb8\\xa9.json') = '温.json'\nos.fspath(path) | 返回路径的文件系统表示。 如果传入的是 str 或 bytes 类型的字符串，将原样返回。 |\nos.getenv(key, default=None) | 如果存在，返回环境变量 key 的值，否则返回 default。| os.getenv('HOME') = '/Users/wxnacy'\nos.getenvb(key, default=None) | 同 `os.getenv()` key ， default 和返回值均为bytes字节串类型。 |\nos.get_exec_path(env=None) | 返回将用于搜索可执行文件的目录列表，与在外壳程序中启动一个进程时相似。指定的 env 应为用于搜索 PATH 的环境变量字典。默认情况下，当 env 为 None 时，将会使用 environ | os.get_exec_path() = os.getenv(\"PATH\")\nos.getegid() | 返回当前进程的有效组ID。对应当前进程执行文件的 \"set id\" 位。 |\nos.geteuid() | 返回当前进程的有效用户ID。 |\nos.getgrouplist(user, group) | 返回该用户所在的组 ID 列表。可能 group 参数没有在返回的列表中，实际上用户应该也是属于该 group。group 参数一般可以从储存账户信息的密码记录文件中找到。 |\nos.getgroups() | 返回当前进程关联的附加组ID列表 | Mac 环境会有所不同 https://docs.python.org/zh-cn/3.7/library/os.html#os.getgroups\nos.getlogin() | 返回通过控制终端进程进行登录的用户名。 | 在多数情况下，使用 getpass.getuser() 会更有效\nos.getpgid(pid) | 根据进程id pid 返回进程的组 ID 列表。如果 pid 为 0，则返回当前进程的进程组 ID 列表 |\nos.getpgrp() | 返回当时进程组的ID |\nos.getpid() | 返回当前进程ID |\nos.getppid() | 返回父进程ID。当父进程已经结束，在Unix中返回的ID是初始进程(1)中的一个 |\nos.getpriority(which, who) | 获取程序调度优先级。which 参数值可以是 PRIO_PROCESS，PRIO_PGRP，或 PRIO_USER 中的一个，who 是相对于 which (PRIO_PROCESS 的进程标识符，PRIO_PGRP 的进程组标识符和 PRIO_USER 的用户ID)。当 who 为 0 时（分别）表示调用的进程，调用进程的进程组或调用进程所属的真实用户 ID。 |\nos.PRIO_PROCESS | |\nos.PRIO_PGRP |  |\nos.PRIO_USER | 函数 getpriority() 和 setpriority() 的参数。|\nos.getuid() | 返回当前进程的真实用户ID。 |\nos.putenv(key, value) | 将名为 key 的环境变量值设置为 value。该变量名修改会影响由 os.system()， popen() ，fork() 和 execv() 发起的子进程。 | 不过 putenv() 的调用不会更新 os.environ，因此最好使用 os.environ 对变量赋值。\nos.setegid(egid) | 设置当前进程的有效组ID。 |\nos.seteuid(euid) | 设置当前进程的有效用户ID。 |\nos.setgid(gid) | 设置当前进程的组ID。 |\nos.setgroups(groups) | 将 group 参数值设置为与当进程相关联的附加组ID列表。 |\n\n","slug":"python-os","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2asl00z55gqobsnfan2u"},{"title":"Python 使用双引号打印字典数据","date":"2020-05-01T15:55:34.000Z","_content":"\n\n默认 Python 打印字典数据是用的单引号\n\n<!-- more -->\n<!-- toc -->\n\n但标准的 JSON 数据都是用双引号的，我希望可以用双引号打印并直接复制\n\n\n使用 `json.dumps` 方法即可\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\nimport json\nm = dict(name = '温', others=['wen'])\nprint(json.dumps(m, ensure_ascii=False))\n```\n```bash\n{\"name\": \"温\", \"others\": [\"wen\"]}\n```\n","source":"_posts/2020-05-01-python-print-dict-double-quotation-marks.md","raw":"---\ntitle: Python 使用双引号打印字典数据\ntags:\n  - python\ndate: 2020-05-01 15:55:34\n---\n\n\n默认 Python 打印字典数据是用的单引号\n\n<!-- more -->\n<!-- toc -->\n\n但标准的 JSON 数据都是用双引号的，我希望可以用双引号打印并直接复制\n\n\n使用 `json.dumps` 方法即可\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\nimport json\nm = dict(name = '温', others=['wen'])\nprint(json.dumps(m, ensure_ascii=False))\n```\n```bash\n{\"name\": \"温\", \"others\": [\"wen\"]}\n```\n","slug":"python-print-dict-double-quotation-marks","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2asn00z75gqo99nnpaux"},{"title":"Mysql 查询一个表的数据并插入到另一个表中","date":"2020-05-02T16:09:17.000Z","_content":"\n这种情况通常发生在需要迁移数据时\n\n<!-- more -->\n<!-- toc -->\n\n如果两个表的结构完全一致，那比较简单\n\n```mysql\ninsert into test_user1 select * from test_user;\n```\n\n如果只有部分字段符合，则需要将具体字段列出\n\n```mysql\ninsert into test_user1 (name, age) select name, age from test_user;\n```\n\n当然也可以过滤掉一些重复数据在插入\n\n```mysql\ninsert into test_user1 select * from test_user where not exists (select * from test_user1 where test_user1.id = test_user.id);\n```\n","source":"_posts/2020-05-02-mysql-select-and-insert.md","raw":"---\ntitle: Mysql 查询一个表的数据并插入到另一个表中\ndate: 2020-05-02 16:09:17\ntags: [mysql]\n---\n\n这种情况通常发生在需要迁移数据时\n\n<!-- more -->\n<!-- toc -->\n\n如果两个表的结构完全一致，那比较简单\n\n```mysql\ninsert into test_user1 select * from test_user;\n```\n\n如果只有部分字段符合，则需要将具体字段列出\n\n```mysql\ninsert into test_user1 (name, age) select name, age from test_user;\n```\n\n当然也可以过滤掉一些重复数据在插入\n\n```mysql\ninsert into test_user1 select * from test_user where not exists (select * from test_user1 where test_user1.id = test_user.id);\n```\n","slug":"mysql-select-and-insert","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aso00z95gqo8m2ipxbn"},{"title":"Python Flask 程序热启动的几种方式","date":"2020-05-19T17:29:02.000Z","_content":"\n记录几种热启动的方式\n\n<!-- more -->\n<!-- toc -->\n\n## app.run\n\n使用 `app.run(debug=True)`\n\n编辑文件 `app.py`\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom flask import Flask\n\napp = Flask(__name__)\n\n@app.route('/')\nasync def main():\n    return \"Hello World\"\n\nif __name__ == \"__main__\":\n     app.run(debug=True)\n```\n\n运行即可\n\n```bash\n$ python app.py\n```\n\n或者\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\n...\n    app.debug = True\n    app.run()\n```\n\n## flask run\n\n使用 `flask` 运行\n\n```bash\n$ FLASK_APP=app FLASK_ENV=development flask run\n```\n\n或者\n\n\n```bash\n$ FLASK_APP=app FLASK_DEBUG=1 flask run\n```\n\n脚本运行则这样编写\n\n```bash\nexport FLASK_APP=app\nexport FLASK_ENV=development\nflask run\n```\n","source":"_posts/2020-05-19-flask-reload.md","raw":"---\ntitle: Python Flask 程序热启动的几种方式\ndate: 2020-05-19 17:29:02\ntags: [python, flask]\n---\n\n记录几种热启动的方式\n\n<!-- more -->\n<!-- toc -->\n\n## app.run\n\n使用 `app.run(debug=True)`\n\n编辑文件 `app.py`\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom flask import Flask\n\napp = Flask(__name__)\n\n@app.route('/')\nasync def main():\n    return \"Hello World\"\n\nif __name__ == \"__main__\":\n     app.run(debug=True)\n```\n\n运行即可\n\n```bash\n$ python app.py\n```\n\n或者\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\n...\n    app.debug = True\n    app.run()\n```\n\n## flask run\n\n使用 `flask` 运行\n\n```bash\n$ FLASK_APP=app FLASK_ENV=development flask run\n```\n\n或者\n\n\n```bash\n$ FLASK_APP=app FLASK_DEBUG=1 flask run\n```\n\n脚本运行则这样编写\n\n```bash\nexport FLASK_APP=app\nexport FLASK_ENV=development\nflask run\n```\n","slug":"flask-reload","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2asq00zb5gqoripk5ph0"},{"title":"Python urllib3 模块","date":"2020-05-16T22:52:35.000Z","_content":"\nurllib3 是一个功能强大且友好的 Python HTTP 客户端。大多数 Python 生态系统已经使用 urllib3，包括 [Requests](https://requests.readthedocs.io/) 和 [Pip](https://pip.pypa.io/)\n\n<!-- more -->\n<!-- toc -->\n\n## 入门使用\n\n导入模块\n\n```python\n>>> import urllib3\n```\n\n然后需要一个 PoolManager 实例来发出请求。该对象处理连接池和线程安全性的所有详细信息\n\n```python\n>>> http = urllib3.PoolManager()\n```\n\n生成一个请求\n\n```python\n>>> r = http.request('GET', 'http://httpbin.org/robots.txt')\n>>> r.data\nb'User-agent: *\\nDisallow: /deny\\n'\n```\n\n`r.data` 以字节的形式返回请求的返回数据\n\n## 常用的返回数据\n\n状态码\n\n```python\n>>> r = http.request('GET', 'http://httpbin.org/ip')\n>>> r.status\n200\n```\n\n返回数据\n\n```python\n>>> r.data\nb'{\\n  \"origin\": \"104.232.115.37\"\\n}\\n'\n```\n\n头信息\n\n```python\n>>> r.headers\nHTTPHeaderDict({'Content-Length': '33', ...})\n```\n\n获取 JSON 结构数据\n\n```python\n>>> import json\n>>> json.loads(r.data.decode('utf-8'))\n{'origin': '104.232.115.37'}\n```\n\n字节数据\n\n```python\n>>> r = http.request('GET', 'http://httpbin.org/bytes/8')\n>>> r.data\nb'\\xaa\\xa5H?\\x95\\xe9\\x9b\\x11'\n```\n\n## 常用请求方式\n\n添加头信息\n\n```python\n>>> r = http.request(\n...     'GET',\n...     'http://httpbin.org/headers',\n...     headers={\n...         'X-Something': 'value'\n...     })\n```\n\n**地址参数**\n\nGET, HEAD, DELETE 请求添加地址参数\n\n```python\n>>> r = http.request(\n...     'GET',\n...     'http://httpbin.org/get',\n...     fields={'arg': 'value'})\n>>> json.loads(r.data.decode('utf-8'))['args']\n{'arg': 'value'}\n```\n\nPOST, PUT 请求通常需要将参数进行 urlencode 编码\n\n```python\n>>> from urllib.parse import urlencode\n>>> encoded_args = urlencode({'arg': 'value'})\n>>> url = 'http://httpbin.org/post?' + encoded_args\n>>> r = http.request('POST', url)\n>>> json.loads(r.data.decode('utf-8'))['args']\n{'arg': 'value'}\n```\n\n表单参数\n\n```python\n>>> r = http.request(\n...     'POST',\n...     'http://httpbin.org/post',\n...     fields={'field': 'value'})\n>>> json.loads(r.data.decode('utf-8'))['form']\n{'field': 'value'}\n```\n\nJSON 参数\n\n\n```python\n>>> import json\n>>> data = {'attribute': 'value'}\n>>> encoded_data = json.dumps(data).encode('utf-8')\n>>> r = http.request(\n...     'POST',\n...     'http://httpbin.org/post',\n...     body=encoded_data,\n...     headers={'Content-Type': 'application/json'})\n>>> json.loads(r.data.decode('utf-8'))['json']\n{'attribute': 'value'}\n```\n\n文件和字节数据参数\n\n上传文件使用 `multipart/form-data` 编码并制定文件参数为一个元组，内容为 `(file_name, file_data)`\n\n```python\n>>> with open('example.txt') as fp:\n...     file_data = fp.read()\n>>> r = http.request(\n...     'POST',\n...     'http://httpbin.org/post',\n...     fields={\n...         'filefield': ('example.txt', file_data),\n...     })\n>>> json.loads(r.data.decode('utf-8'))['files']\n{'filefield': '...'}\n```\n\n也可以指定文件的 `MIME` 类型\n\n```python\n>>> r = http.request(\n...     'POST',\n...     'http://httpbin.org/post',\n...     fields={\n...         'filefield': ('example.txt', file_data, 'text/plain'),\n...     })\n```\n\n要发送原始二进制数据，只需指定 body 参数。最好设置 Content-Type 头字段\n\n```python\n>>> with open('example.jpg', 'rb') as fp:\n...     binary_data = fp.read()\n>>> r = http.request(\n...     'POST',\n...     'http://httpbin.org/post',\n...     body=binary_data,\n...     headers={'Content-Type': 'image/jpeg'})\n```\n\n## 设置超时\n\n单次请求可以设置一个 float 类型的超时时间\n\n```python\n>>> http.request(\n...     'GET', 'http://httpbin.org/delay/3', timeout=4.0)\n<urllib3.response.HTTPResponse>\n```\n\n也可以使用 `Timeout` 实例来精准的控制连接超时和读取超时\n\n```python\n>>> http.request(\n...     'GET',\n...     'http://httpbin.org/delay/3',\n...     timeout=urllib3.Timeout(connect=1.0, read=2.0))\n```\n\n或者在`PoolManager` 中设置一个全局的超时配置\n\n```python\n>>> http = urllib3.PoolManager(timeout=3.0)\n>>> http = urllib3.PoolManager(\n...     timeout=urllib3.Timeout(connect=1.0, read=2.0))\n```\n\n## 重复请求\n\n默认情况下 urllib3 每次请求会会有 3 次重试的机会和 3 次重定向跳转，也可以使用 `retries` 参数进行设置\n\n比如设置为 10 次\n\n```python\n>>> http.requests('GET', 'http://httpbin.org/ip', retries=10)\n```\n\n可以设置 `retries=False` 来同时关掉重试和重定向\n\n```python\n>>> http.request(\n...     'GET', 'http://nxdomain.example.com', retries=False)\nNewConnectionError\n>>> r = http.request(\n...     'GET', 'http://httpbin.org/redirect/1', retries=False)\n>>> r.status\n302\n```\n\n或者只关闭重定向\n\n```python\n>>> r = http.request(\n...     'GET', 'http://httpbin.org/redirect/1', redirect=False)\n>>> r.status\n302\n```\n\n使用 `Retry` 实例可以分别来控制重试和重定向的次数\n\n比如进行 3 次重试和 2 次重定向\n\n```python\n>>> http.request(\n...     'GET',\n...     'http://httpbin.org/redirect/3',\n...     retries=urllib3.Retry(3, redirect=2))\n```\n\n最后同样的可以交给 `PoolManager` 进行全局配置\n\n```python\n>>> http = urllib3.PoolManager(retries=False)\n>>> http = urllib3.PoolManager(\n...     retries=urllib3.Retry(5, redirect=2))\n```\n\n[更多文档](https://urllib3.readthedocs.io/en/latest/user-guide.html)\n","source":"_posts/2020-05-16-python-urllib3.md","raw":"---\ntitle: Python urllib3 模块\ndate: 2020-05-16 22:52:35\ntags: [python]\n---\n\nurllib3 是一个功能强大且友好的 Python HTTP 客户端。大多数 Python 生态系统已经使用 urllib3，包括 [Requests](https://requests.readthedocs.io/) 和 [Pip](https://pip.pypa.io/)\n\n<!-- more -->\n<!-- toc -->\n\n## 入门使用\n\n导入模块\n\n```python\n>>> import urllib3\n```\n\n然后需要一个 PoolManager 实例来发出请求。该对象处理连接池和线程安全性的所有详细信息\n\n```python\n>>> http = urllib3.PoolManager()\n```\n\n生成一个请求\n\n```python\n>>> r = http.request('GET', 'http://httpbin.org/robots.txt')\n>>> r.data\nb'User-agent: *\\nDisallow: /deny\\n'\n```\n\n`r.data` 以字节的形式返回请求的返回数据\n\n## 常用的返回数据\n\n状态码\n\n```python\n>>> r = http.request('GET', 'http://httpbin.org/ip')\n>>> r.status\n200\n```\n\n返回数据\n\n```python\n>>> r.data\nb'{\\n  \"origin\": \"104.232.115.37\"\\n}\\n'\n```\n\n头信息\n\n```python\n>>> r.headers\nHTTPHeaderDict({'Content-Length': '33', ...})\n```\n\n获取 JSON 结构数据\n\n```python\n>>> import json\n>>> json.loads(r.data.decode('utf-8'))\n{'origin': '104.232.115.37'}\n```\n\n字节数据\n\n```python\n>>> r = http.request('GET', 'http://httpbin.org/bytes/8')\n>>> r.data\nb'\\xaa\\xa5H?\\x95\\xe9\\x9b\\x11'\n```\n\n## 常用请求方式\n\n添加头信息\n\n```python\n>>> r = http.request(\n...     'GET',\n...     'http://httpbin.org/headers',\n...     headers={\n...         'X-Something': 'value'\n...     })\n```\n\n**地址参数**\n\nGET, HEAD, DELETE 请求添加地址参数\n\n```python\n>>> r = http.request(\n...     'GET',\n...     'http://httpbin.org/get',\n...     fields={'arg': 'value'})\n>>> json.loads(r.data.decode('utf-8'))['args']\n{'arg': 'value'}\n```\n\nPOST, PUT 请求通常需要将参数进行 urlencode 编码\n\n```python\n>>> from urllib.parse import urlencode\n>>> encoded_args = urlencode({'arg': 'value'})\n>>> url = 'http://httpbin.org/post?' + encoded_args\n>>> r = http.request('POST', url)\n>>> json.loads(r.data.decode('utf-8'))['args']\n{'arg': 'value'}\n```\n\n表单参数\n\n```python\n>>> r = http.request(\n...     'POST',\n...     'http://httpbin.org/post',\n...     fields={'field': 'value'})\n>>> json.loads(r.data.decode('utf-8'))['form']\n{'field': 'value'}\n```\n\nJSON 参数\n\n\n```python\n>>> import json\n>>> data = {'attribute': 'value'}\n>>> encoded_data = json.dumps(data).encode('utf-8')\n>>> r = http.request(\n...     'POST',\n...     'http://httpbin.org/post',\n...     body=encoded_data,\n...     headers={'Content-Type': 'application/json'})\n>>> json.loads(r.data.decode('utf-8'))['json']\n{'attribute': 'value'}\n```\n\n文件和字节数据参数\n\n上传文件使用 `multipart/form-data` 编码并制定文件参数为一个元组，内容为 `(file_name, file_data)`\n\n```python\n>>> with open('example.txt') as fp:\n...     file_data = fp.read()\n>>> r = http.request(\n...     'POST',\n...     'http://httpbin.org/post',\n...     fields={\n...         'filefield': ('example.txt', file_data),\n...     })\n>>> json.loads(r.data.decode('utf-8'))['files']\n{'filefield': '...'}\n```\n\n也可以指定文件的 `MIME` 类型\n\n```python\n>>> r = http.request(\n...     'POST',\n...     'http://httpbin.org/post',\n...     fields={\n...         'filefield': ('example.txt', file_data, 'text/plain'),\n...     })\n```\n\n要发送原始二进制数据，只需指定 body 参数。最好设置 Content-Type 头字段\n\n```python\n>>> with open('example.jpg', 'rb') as fp:\n...     binary_data = fp.read()\n>>> r = http.request(\n...     'POST',\n...     'http://httpbin.org/post',\n...     body=binary_data,\n...     headers={'Content-Type': 'image/jpeg'})\n```\n\n## 设置超时\n\n单次请求可以设置一个 float 类型的超时时间\n\n```python\n>>> http.request(\n...     'GET', 'http://httpbin.org/delay/3', timeout=4.0)\n<urllib3.response.HTTPResponse>\n```\n\n也可以使用 `Timeout` 实例来精准的控制连接超时和读取超时\n\n```python\n>>> http.request(\n...     'GET',\n...     'http://httpbin.org/delay/3',\n...     timeout=urllib3.Timeout(connect=1.0, read=2.0))\n```\n\n或者在`PoolManager` 中设置一个全局的超时配置\n\n```python\n>>> http = urllib3.PoolManager(timeout=3.0)\n>>> http = urllib3.PoolManager(\n...     timeout=urllib3.Timeout(connect=1.0, read=2.0))\n```\n\n## 重复请求\n\n默认情况下 urllib3 每次请求会会有 3 次重试的机会和 3 次重定向跳转，也可以使用 `retries` 参数进行设置\n\n比如设置为 10 次\n\n```python\n>>> http.requests('GET', 'http://httpbin.org/ip', retries=10)\n```\n\n可以设置 `retries=False` 来同时关掉重试和重定向\n\n```python\n>>> http.request(\n...     'GET', 'http://nxdomain.example.com', retries=False)\nNewConnectionError\n>>> r = http.request(\n...     'GET', 'http://httpbin.org/redirect/1', retries=False)\n>>> r.status\n302\n```\n\n或者只关闭重定向\n\n```python\n>>> r = http.request(\n...     'GET', 'http://httpbin.org/redirect/1', redirect=False)\n>>> r.status\n302\n```\n\n使用 `Retry` 实例可以分别来控制重试和重定向的次数\n\n比如进行 3 次重试和 2 次重定向\n\n```python\n>>> http.request(\n...     'GET',\n...     'http://httpbin.org/redirect/3',\n...     retries=urllib3.Retry(3, redirect=2))\n```\n\n最后同样的可以交给 `PoolManager` 进行全局配置\n\n```python\n>>> http = urllib3.PoolManager(retries=False)\n>>> http = urllib3.PoolManager(\n...     retries=urllib3.Retry(5, redirect=2))\n```\n\n[更多文档](https://urllib3.readthedocs.io/en/latest/user-guide.html)\n","slug":"python-urllib3","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2asr00zd5gqopfwohqcs"},{"title":"Shell 对行进行循环处理","date":"2020-06-02T16:50:22.000Z","_content":"\n在编写脚本时经常需要目标结果进行按行处理，但是正常使用 `for` 循环会把结果按照单词来循环输出，并不是我想要的效果。\n\n<!-- more -->\n<!-- toc -->\n\n使用管道加 `while` 的形式即可实现目的\n\n```bash\nll | while read line\ndo\n    echo $line\ndone\n```\n","source":"_posts/2020-06-02-shell-loop-lines.md","raw":"---\ntitle: Shell 对行进行循环处理\ndate: 2020-06-02 16:50:22\ntags: [shell]\n---\n\n在编写脚本时经常需要目标结果进行按行处理，但是正常使用 `for` 循环会把结果按照单词来循环输出，并不是我想要的效果。\n\n<!-- more -->\n<!-- toc -->\n\n使用管道加 `while` 的形式即可实现目的\n\n```bash\nll | while read line\ndo\n    echo $line\ndone\n```\n","slug":"shell-loop-lines","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ast00zf5gqou6ug3jt9"},{"title":"Mac 电脑显示隐藏文件","date":"2020-06-03T09:49:19.000Z","_content":"\n\nMac 电脑显示隐藏文件的两种方式。\n\n<!-- more -->\n<!-- toc -->\n\n## 快捷键\n\n`command + shift + .` 快捷键可以控制隐藏文件的显示与否，非常方便\n\n## 命令行\n\n作为程序员当然还要了解命令行的方式\n\n```bash\n# 显示隐藏文件\n$ defaults write com.apple.finder AppleShowAllFiles yes\n# 不显示隐藏文件\n$ defaults write com.apple.finder AppleShowAllFiles no\n```\n\n然后再重启下 Finder\n\n```bash\n$ killall Finder /System/Library/CoreServices/Finder.app\n```\n","source":"_posts/2020-06-03-mac-show-hide-file.md","raw":"---\ntitle: Mac 电脑显示隐藏文件\ntags:\n  - mac\ndate: 2020-06-03 09:49:19\n---\n\n\nMac 电脑显示隐藏文件的两种方式。\n\n<!-- more -->\n<!-- toc -->\n\n## 快捷键\n\n`command + shift + .` 快捷键可以控制隐藏文件的显示与否，非常方便\n\n## 命令行\n\n作为程序员当然还要了解命令行的方式\n\n```bash\n# 显示隐藏文件\n$ defaults write com.apple.finder AppleShowAllFiles yes\n# 不显示隐藏文件\n$ defaults write com.apple.finder AppleShowAllFiles no\n```\n\n然后再重启下 Finder\n\n```bash\n$ killall Finder /System/Library/CoreServices/Finder.app\n```\n","slug":"mac-show-hide-file","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2asu00zh5gqorux3q98n"},{"title":"Ansible Debug 调试","date":"2020-06-04T09:37:07.000Z","_content":"\n\n使用 Ansible 最痛苦的就是远程命令没有生效，但又看不到报错信息，Debug 就是为了解决这个烦恼。\n\n<!-- more -->\n<!-- toc -->\n\n先来看个简单的例子，获取当前目录\n\n```yml\n- hosts: wxnacytest\n  remote_user: root\n  tasks:\n  - name: Get path\n    shell: |\n        pwd\n    register: result\n  - name: Get debug info\n    debug: var=result verbosity=0\n```\n\n输出结果为\n\n<!-- ![tdMeXT.png](https://s1.ax1x.com/2020/06/03/tdMeXT.png) -->\n[![tdMeXT.md.png](https://s1.ax1x.com/2020/06/03/tdMeXT.md.png)](https://imgchr.com/i/tdMeXT)\n\n如图，远程执行命令的结果非常详细\n\n`result.cmd` 运行的命令\n`result.stdout` 运行的结果\n\n`debug` 的参数如下\n\n```bash\nmsg：调试输出的消息\nvar：将某个任务执行的输出作为变量传递给debug模块，debug会直接将其打印输出\nverbosity：debug的级别（默认是0级，全部显示）\n```\n\n\n如果不想输出这么多信息，可以指定某个信息，比如 `stdout`\n\n```yml\n- hosts: wxnacytest\n  remote_user: root\n  tasks:\n  - name: Get path\n    shell: |\n        pwd\n    register: result\n  - name: Get debug info\n    debug: var=result.stdout verbosity=0\n```\n\n![td3UxI.png](https://s1.ax1x.com/2020/06/03/td3UxI.png)\n","source":"_posts/2020-06-04-ansible-debug.md","raw":"---\ntitle: Ansible Debug 调试\ntags:\n  - ansible\ndate: 2020-06-04 09:37:07\n---\n\n\n使用 Ansible 最痛苦的就是远程命令没有生效，但又看不到报错信息，Debug 就是为了解决这个烦恼。\n\n<!-- more -->\n<!-- toc -->\n\n先来看个简单的例子，获取当前目录\n\n```yml\n- hosts: wxnacytest\n  remote_user: root\n  tasks:\n  - name: Get path\n    shell: |\n        pwd\n    register: result\n  - name: Get debug info\n    debug: var=result verbosity=0\n```\n\n输出结果为\n\n<!-- ![tdMeXT.png](https://s1.ax1x.com/2020/06/03/tdMeXT.png) -->\n[![tdMeXT.md.png](https://s1.ax1x.com/2020/06/03/tdMeXT.md.png)](https://imgchr.com/i/tdMeXT)\n\n如图，远程执行命令的结果非常详细\n\n`result.cmd` 运行的命令\n`result.stdout` 运行的结果\n\n`debug` 的参数如下\n\n```bash\nmsg：调试输出的消息\nvar：将某个任务执行的输出作为变量传递给debug模块，debug会直接将其打印输出\nverbosity：debug的级别（默认是0级，全部显示）\n```\n\n\n如果不想输出这么多信息，可以指定某个信息，比如 `stdout`\n\n```yml\n- hosts: wxnacytest\n  remote_user: root\n  tasks:\n  - name: Get path\n    shell: |\n        pwd\n    register: result\n  - name: Get debug info\n    debug: var=result.stdout verbosity=0\n```\n\n![td3UxI.png](https://s1.ax1x.com/2020/06/03/td3UxI.png)\n","slug":"ansible-debug","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2asv00zj5gqowxphjtk3"},{"title":"Hexo 写文章展示 Jupyter Notebook ipynb 后缀文件","date":"2020-06-13T23:58:29.000Z","_content":"\n使用 Hexo 展示 `ipynb` 文件是文章和代码笔记分开管理的最好方式，效果如下\n\n<!-- more -->\n<!-- toc -->\n\n<script src=\"http://code.jquery.com/jquery-2.0.0.js\"></script>\n{% asset_jupyter /Users/wxnacy/.pyenv/shims/python ../../notebook/faker/locales.ipynb %}\n\n这需要 [hexo-jupyter-notebook](https://github.com/qiliux/hexo-jupyter-notebook) 插件的支持\n\n**安装**\n\n```bash\n$ npm install hexo-jupyter-notebook --save\n```\n\n**安装依赖**\n\n```bash\n$ brew install pandoc\n$ pip install nbconvert\n```\n\n**修改配置**\n\n打开 hexo 的配置文件 `_config.yml`，修改 `post_asset_folder` 为true\n\n文章目录结构保持为\n\n```bash\n.\n├── _posts\n│   └── 2020-06-13-hexo-use-jupyter-notebook.md\n└── notebook\n    └── locals.jpynb\n```\n\n**文章嵌入**\n\n```markdown\n<script src=\"https://code.jquery.com/jquery-2.0.0.js\"></script>\n{% asset_jupyter /Users/wxnacy/.pyenv/shims/python ../../notebook/locales.ipynb %}\n```\n\n其中\n\n`/Users/wxnacy/.pyenv/shims/python` 是当前环境 Python 脚本的路径\n`../../notebook/locales.ipynb` 是 `*.ipynb` 文件和当前文章的相对路径，**这里必须是相对路径**\n\n现在预览文章即可看到效果\n\n\n参考\n\n- [在hexo中写的文章支持jupyter-notebook显示](http://huanyouchen.github.io/2018/05/30/hexo-support-jupyter-notebook-in-blog/)\n\n\n\n","source":"_posts/2020-06-13-hexo-use-jupyter-notebook.md","raw":"---\ntitle: Hexo 写文章展示 Jupyter Notebook ipynb 后缀文件\ndate: 2020-06-13 23:58:29\ntags: [hexo, jupyter]\n---\n\n使用 Hexo 展示 `ipynb` 文件是文章和代码笔记分开管理的最好方式，效果如下\n\n<!-- more -->\n<!-- toc -->\n\n<script src=\"http://code.jquery.com/jquery-2.0.0.js\"></script>\n{% asset_jupyter /Users/wxnacy/.pyenv/shims/python ../../notebook/faker/locales.ipynb %}\n\n这需要 [hexo-jupyter-notebook](https://github.com/qiliux/hexo-jupyter-notebook) 插件的支持\n\n**安装**\n\n```bash\n$ npm install hexo-jupyter-notebook --save\n```\n\n**安装依赖**\n\n```bash\n$ brew install pandoc\n$ pip install nbconvert\n```\n\n**修改配置**\n\n打开 hexo 的配置文件 `_config.yml`，修改 `post_asset_folder` 为true\n\n文章目录结构保持为\n\n```bash\n.\n├── _posts\n│   └── 2020-06-13-hexo-use-jupyter-notebook.md\n└── notebook\n    └── locals.jpynb\n```\n\n**文章嵌入**\n\n```markdown\n<script src=\"https://code.jquery.com/jquery-2.0.0.js\"></script>\n{% asset_jupyter /Users/wxnacy/.pyenv/shims/python ../../notebook/locales.ipynb %}\n```\n\n其中\n\n`/Users/wxnacy/.pyenv/shims/python` 是当前环境 Python 脚本的路径\n`../../notebook/locales.ipynb` 是 `*.ipynb` 文件和当前文章的相对路径，**这里必须是相对路径**\n\n现在预览文章即可看到效果\n\n\n参考\n\n- [在hexo中写的文章支持jupyter-notebook显示](http://huanyouchen.github.io/2018/05/30/hexo-support-jupyter-notebook-in-blog/)\n\n\n\n","slug":"hexo-use-jupyter-notebook","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2asx00zl5gqotdvctjio"},{"title":"Python Faker 造假大师","date":"2020-06-09T22:18:35.000Z","_content":"\n今天介绍一款堪称“造假大师”的 Python 模块 [Faker](https://github.com/joke2k/faker)\n\n\n<!-- more -->\n<!-- toc -->\n\n李哥镇楼\n\n![tI8JU0.gif](https://s1.ax1x.com/2020/06/09/tI8JU0.gif)\n\n有了 Faker 再也不用手动造假了，它可以非常简单的实现你大部分的造假场景。\n\n## 快速入门\n\n安装\n\n```bash\n$ pip install Faker\n```\n\n使用\n\n<script src=\"https://code.jquery.com/jquery-2.0.0.js\"></script>\n{% asset_jupyter /Users/wxnacy/.pyenv/shims/python ../../notebook/faker/quickstart.ipynb %}\n\n\nFaker 有远不止以上的用法，使用 `dir(fake)` 可以查看更多的用法\n\n## 设置语言\n\nFaker 默认使用英文，当然也可以设置想要的语言\n\n<script src=\"https://code.jquery.com/jquery-2.0.0.js\"></script>\n{% asset_jupyter /Users/wxnacy/.pyenv/shims/python ../../notebook/faker/locales.ipynb %}\n\n更多语言支持查看[文档](https://faker.readthedocs.io/en/master/locales.html)\n\n## 命令模式\n\nFaker 也可以在命令行中使用\n\n<script src=\"https://code.jquery.com/jquery-2.0.0.js\"></script>\n{% asset_jupyter /Users/wxnacy/.pyenv/shims/python ../../notebook/faker/command.ipynb %}\n\n更多使用方式查看[文档](https://github.com/joke2k/faker#command-line-usage)\n","source":"_posts/2020-06-09-python-faker.md","raw":"---\ntitle: Python Faker 造假大师\ndate: 2020-06-09 22:18:35\ntags: [python]\n---\n\n今天介绍一款堪称“造假大师”的 Python 模块 [Faker](https://github.com/joke2k/faker)\n\n\n<!-- more -->\n<!-- toc -->\n\n李哥镇楼\n\n![tI8JU0.gif](https://s1.ax1x.com/2020/06/09/tI8JU0.gif)\n\n有了 Faker 再也不用手动造假了，它可以非常简单的实现你大部分的造假场景。\n\n## 快速入门\n\n安装\n\n```bash\n$ pip install Faker\n```\n\n使用\n\n<script src=\"https://code.jquery.com/jquery-2.0.0.js\"></script>\n{% asset_jupyter /Users/wxnacy/.pyenv/shims/python ../../notebook/faker/quickstart.ipynb %}\n\n\nFaker 有远不止以上的用法，使用 `dir(fake)` 可以查看更多的用法\n\n## 设置语言\n\nFaker 默认使用英文，当然也可以设置想要的语言\n\n<script src=\"https://code.jquery.com/jquery-2.0.0.js\"></script>\n{% asset_jupyter /Users/wxnacy/.pyenv/shims/python ../../notebook/faker/locales.ipynb %}\n\n更多语言支持查看[文档](https://faker.readthedocs.io/en/master/locales.html)\n\n## 命令模式\n\nFaker 也可以在命令行中使用\n\n<script src=\"https://code.jquery.com/jquery-2.0.0.js\"></script>\n{% asset_jupyter /Users/wxnacy/.pyenv/shims/python ../../notebook/faker/command.ipynb %}\n\n更多使用方式查看[文档](https://github.com/joke2k/faker#command-line-usage)\n","slug":"python-faker","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2asy00zn5gqoojh6lc0l"},{"title":"Sqlalchemy 快速生成 sql 语句","date":"2020-07-19T00:57:02.000Z","_content":"\nSqlalchemy 使用 `select(), insert(), update(), delete()` 方法可以快速生成 Sql 语句并执行。\n\n<!-- more -->\n<!-- toc -->\n\n{% raw %}\n<iframe id='ipynb' marginheight=\"0\" frameborder=\"0\" width='980px' height='4100px' src=\"http://notebook.wxnacy.com/modules/sqlalchemy/selectable.html\" style=\"scrolling:no;\"></iframe>\n<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js\"> </script>\n<script>\n$(function () {\n  console.log(\"ww\");\n\n$(\"#ipynb\").load( function() {\n    console.log(\"Hello World\");\n    console.log(this.contentWindow);\n    console.log($(this).contents().find(\"#notebook\").height());\ndocument.getElementById('ipynb').height=$(\"#ipynb\").contents().find(\"#notebook\").height()+100;\n})\n});\n</script>\n{% endraw %}\n\n","source":"_posts/2020-07-19-sqlalchemy-selectable.md","raw":"---\ntitle: Sqlalchemy 快速生成 sql 语句\ndate: 2020-07-19 00:57:02\ntags: [python, sqlalchemy]\n---\n\nSqlalchemy 使用 `select(), insert(), update(), delete()` 方法可以快速生成 Sql 语句并执行。\n\n<!-- more -->\n<!-- toc -->\n\n{% raw %}\n<iframe id='ipynb' marginheight=\"0\" frameborder=\"0\" width='980px' height='4100px' src=\"http://notebook.wxnacy.com/modules/sqlalchemy/selectable.html\" style=\"scrolling:no;\"></iframe>\n<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js\"> </script>\n<script>\n$(function () {\n  console.log(\"ww\");\n\n$(\"#ipynb\").load( function() {\n    console.log(\"Hello World\");\n    console.log(this.contentWindow);\n    console.log($(this).contents().find(\"#notebook\").height());\ndocument.getElementById('ipynb').height=$(\"#ipynb\").contents().find(\"#notebook\").height()+100;\n})\n});\n</script>\n{% endraw %}\n\n","slug":"sqlalchemy-selectable","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2asz00zq5gqo4fbpzolh"},{"title":"解决重装 Windows 7 时提示“缺少所需的CD/DVD驱动器设备驱动程序”","date":"2020-06-19T23:59:00.000Z","_content":"\n\n好几年没用过 Windows 做主力机了，不过偶尔还是会帮朋友重装下系统，然后因为没有总结记录，每次都手忙脚乱。\n\n<!-- more -->\n<!-- toc -->\n\n这里先记录一个莫名其妙的问题\n\n![NMg9SK.jpg](https://s1.ax1x.com/2020/06/19/NMg9SK.jpg)\n\n见到这个问题，第一反应是系统有问题，又跑去重新下载其他版本的系统，然后只做启动盘。\n\nGoogle 后才发现这里还跟 USB3.0 和 USB2.0 有关系\n\n然后我默默的拔下来，插在另一个口上，启动，成功。。。\n\n事后回忆了一下，之前重装 Win10 就是插在 USB2.0 上安装成功的，这次只是顺手插在了另一边。\n\n总之这真是一个神奇的问题。\n","source":"_posts/2020-06-19-win7-install-need-cd-dvd.md","raw":"---\ntitle: 解决重装 Windows 7 时提示“缺少所需的CD/DVD驱动器设备驱动程序”\ntags:\n  - windows\ndate: 2020-06-19 23:59:00\n---\n\n\n好几年没用过 Windows 做主力机了，不过偶尔还是会帮朋友重装下系统，然后因为没有总结记录，每次都手忙脚乱。\n\n<!-- more -->\n<!-- toc -->\n\n这里先记录一个莫名其妙的问题\n\n![NMg9SK.jpg](https://s1.ax1x.com/2020/06/19/NMg9SK.jpg)\n\n见到这个问题，第一反应是系统有问题，又跑去重新下载其他版本的系统，然后只做启动盘。\n\nGoogle 后才发现这里还跟 USB3.0 和 USB2.0 有关系\n\n然后我默默的拔下来，插在另一个口上，启动，成功。。。\n\n事后回忆了一下，之前重装 Win10 就是插在 USB2.0 上安装成功的，这次只是顺手插在了另一边。\n\n总之这真是一个神奇的问题。\n","slug":"win7-install-need-cd-dvd","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2at100zs5gqoeor8md9c"},{"title":"Excel 一键填充一列数据","date":"2020-07-18T22:44:20.000Z","_content":"\n一般我们快速填充一列数据，都知道按住单元格右下角的黑色十字架向下拖动即可，但是如果有 10 万行数据怎么办？\n\n<!-- more -->\n<!-- toc -->\n \nExcel 还有更方便的方式\n\n选中一列，去掉标题，直接按下 `Ctrl-D`，整列直接填充第一行选中的数据，一键搞定。\n\n![U2db6S.gif](https://s1.ax1x.com/2020/07/18/U2db6S.gif)\n\n缺点就是只能填充第一行的数据，不能根据前面几行的规律自动填充。\n","source":"_posts/2020-07-18-excel-ctrld.md","raw":"---\ntitle: Excel 一键填充一列数据\ndate: 2020-07-18 22:44:20\ntags: [excel]\n---\n\n一般我们快速填充一列数据，都知道按住单元格右下角的黑色十字架向下拖动即可，但是如果有 10 万行数据怎么办？\n\n<!-- more -->\n<!-- toc -->\n \nExcel 还有更方便的方式\n\n选中一列，去掉标题，直接按下 `Ctrl-D`，整列直接填充第一行选中的数据，一键搞定。\n\n![U2db6S.gif](https://s1.ax1x.com/2020/07/18/U2db6S.gif)\n\n缺点就是只能填充第一行的数据，不能根据前面几行的规律自动填充。\n","slug":"excel-ctrld","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2at200zu5gqolddz0ze2"},{"title":"Javascript 创建随机字符串的方法","date":"2020-07-20T18:16:37.000Z","_content":"\n这里使用 JavaScript 自带的几种数学函数\n\n<!-- more -->\n<!-- toc -->\n\n- `Math.random()` 随机返回区间 [0, 1) 内的小数\n- `Math.round(num)` 取 num 四舍五入后的整数\n- `Math.ceil(num)` 将 num 向上取整\n- `Math.floor(num)` 将 num 向下取整\n\n我们利用 `Math.random()` 和 `Math.floor()` 两个函数来构建函数。\n\n```javascript\nvar chars = [\n    '0','1','2','3','4','5','6','7','8','9',\n    'A','B','C','D','E','F','G','H','I','J',\n    'K','L','M','N','O','P','Q','R','S','T',\n    'U','V','W','X','Y','Z'\n];\n\n// 生成随机数\nfunction randomString(n) {\n    var res = \"\";\n    for(var i = 0; i < n ; i ++) {\n        var id = Math.floor(Math.random() * chars.length);\n        res += chars[id];\n    }\n    return res;\n}\n\nconsole.log(randomString(10))\n\n```\n","source":"_posts/2020-07-20-javascript-random.md","raw":"---\ntitle: Javascript 创建随机字符串的方法\ndate: 2020-07-20 18:16:37\ntags: [javascript]\n---\n\n这里使用 JavaScript 自带的几种数学函数\n\n<!-- more -->\n<!-- toc -->\n\n- `Math.random()` 随机返回区间 [0, 1) 内的小数\n- `Math.round(num)` 取 num 四舍五入后的整数\n- `Math.ceil(num)` 将 num 向上取整\n- `Math.floor(num)` 将 num 向下取整\n\n我们利用 `Math.random()` 和 `Math.floor()` 两个函数来构建函数。\n\n```javascript\nvar chars = [\n    '0','1','2','3','4','5','6','7','8','9',\n    'A','B','C','D','E','F','G','H','I','J',\n    'K','L','M','N','O','P','Q','R','S','T',\n    'U','V','W','X','Y','Z'\n];\n\n// 生成随机数\nfunction randomString(n) {\n    var res = \"\";\n    for(var i = 0; i < n ; i ++) {\n        var id = Math.floor(Math.random() * chars.length);\n        res += chars[id];\n    }\n    return res;\n}\n\nconsole.log(randomString(10))\n\n```\n","slug":"javascript-random","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2at400zx5gqohb4ayhd1"},{"title":"微信公众号只在扫码时报错“该公众号提供的服务出现故障，请稍后再试”","date":"2020-07-23T13:05:02.000Z","_content":"\n又是一个诡异报错事件，微信公众号只在扫码时会报错\n\n<!-- more -->\n<!-- toc -->\n\n***该公众号提供的服务出现故障，请稍后再试***\n\n万能报错镇楼。\n\n几个公众号里只一个会莫名其妙的报这个错，但是正常的功能又不影响，因为刚好这个是测试环境用的，所以一直没太在意。\n\n最近要重构一些代码，又要频繁的面对它，决定好好处理下。\n\n经过排查，发现其他功能都没事，只有在扫码的时候会报错。\n\n顿时感觉不是调试可以解决的问题，万能 Google 走起。\n\n一顿操作后，终于找到看着像是正确的解法。\n\n简单来说 `公众号设置` => `授权管理` 查看有问题的三方授权，点击平台详情，取消授权，如图\n\n![ULAfG6.png](https://s1.ax1x.com/2020/07/23/ULAfG6.png)\n\n我的情况是其中一个三方平台有扫码授权，而这个平台已经不能用了，直接取消，问题搞定。\n\n总结来说属于历史遗漏问题，因为这个三方平台账号也是我们自己开发的，一看注册时间已经太久远了。\n\n嗯...先喝口奶茶冷静下。\n\n","source":"_posts/2020-07-23-wx-platform-error.md","raw":"---\ntitle: 微信公众号只在扫码时报错“该公众号提供的服务出现故障，请稍后再试”\ndate: 2020-07-23 13:05:02\ntags: [微信]\n---\n\n又是一个诡异报错事件，微信公众号只在扫码时会报错\n\n<!-- more -->\n<!-- toc -->\n\n***该公众号提供的服务出现故障，请稍后再试***\n\n万能报错镇楼。\n\n几个公众号里只一个会莫名其妙的报这个错，但是正常的功能又不影响，因为刚好这个是测试环境用的，所以一直没太在意。\n\n最近要重构一些代码，又要频繁的面对它，决定好好处理下。\n\n经过排查，发现其他功能都没事，只有在扫码的时候会报错。\n\n顿时感觉不是调试可以解决的问题，万能 Google 走起。\n\n一顿操作后，终于找到看着像是正确的解法。\n\n简单来说 `公众号设置` => `授权管理` 查看有问题的三方授权，点击平台详情，取消授权，如图\n\n![ULAfG6.png](https://s1.ax1x.com/2020/07/23/ULAfG6.png)\n\n我的情况是其中一个三方平台有扫码授权，而这个平台已经不能用了，直接取消，问题搞定。\n\n总结来说属于历史遗漏问题，因为这个三方平台账号也是我们自己开发的，一看注册时间已经太久远了。\n\n嗯...先喝口奶茶冷静下。\n\n","slug":"wx-platform-error","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2at500zz5gqo42awu495"},{"title":"Docker 镜像 latest 仅仅只是一个标签名","date":"2020-07-24T00:28:18.000Z","_content":"\n\n之前没有验证过，一直一厢情愿的认为 `latest` 标签就是最新的意思。\n\n<!-- more -->\n<!-- toc -->\n\n然而，然而。\n\n它仅仅只是一个叫 `latest` 的标签而已。\n\n如果说它还有点特殊含义，那就是作为默认标签使用的。\n\n我们试验一下，以 `hello-world` 镜像为例，我们先把它推送到自己的仓库里，标签取名 `1.0.0`\n\n```bash\n$ docker pull hello-world\n$ docker tag hello-world wxnacy/hello-world:1.0.0\n$ docker push wxnacy/hello-world:1.0.0\n```\n\n然后删掉本地的镜像\n\n```bash\n$ docker image rm wxnacy/hello-world:1.0.0\n```\n\n最后试下重新拉取\n\n```bash\n$ docker pull wxnacy/hello-world:latest\nError response from daemon: manifest for wxnacy/hello-world:latest not found\n\n$ docker pull wxnacy/hello-world\nUsing default tag: latest\nError response from daemon: manifest for wxnacy/hello-world:latest not found\n\n$ docker pull wxnacy/hello-world:1.0.0\n1.0.0: Pulling from wxnacy/hello-world\nDigest: sha256:90659bf80b44ce6be8234e6ff90a1ac34acbeb826903b02cfa0da11c82cbc042\nStatus: Downloaded newer image for wxnacy/hello-world:1.0.0\n```\n\n按照实验结果，只有准确输入标签名 `1.0.0` 时，才能正确下载镜像\n\n而第二次不使用任何标签拉取时，结果提示 `Using default tag: latest`，说明默认标签为 `latest`\n\n总结一下，Docker 的这个行为还是挺违背常理的，如果是默认标签，使用关键字 `default` 岂不是更直观。\n","source":"_posts/2020-07-24-docker-the-latest.md","raw":"---\ntitle: Docker 镜像 latest 仅仅只是一个标签名\ntags:\n  - docker\ndate: 2020-07-24 00:28:18\n---\n\n\n之前没有验证过，一直一厢情愿的认为 `latest` 标签就是最新的意思。\n\n<!-- more -->\n<!-- toc -->\n\n然而，然而。\n\n它仅仅只是一个叫 `latest` 的标签而已。\n\n如果说它还有点特殊含义，那就是作为默认标签使用的。\n\n我们试验一下，以 `hello-world` 镜像为例，我们先把它推送到自己的仓库里，标签取名 `1.0.0`\n\n```bash\n$ docker pull hello-world\n$ docker tag hello-world wxnacy/hello-world:1.0.0\n$ docker push wxnacy/hello-world:1.0.0\n```\n\n然后删掉本地的镜像\n\n```bash\n$ docker image rm wxnacy/hello-world:1.0.0\n```\n\n最后试下重新拉取\n\n```bash\n$ docker pull wxnacy/hello-world:latest\nError response from daemon: manifest for wxnacy/hello-world:latest not found\n\n$ docker pull wxnacy/hello-world\nUsing default tag: latest\nError response from daemon: manifest for wxnacy/hello-world:latest not found\n\n$ docker pull wxnacy/hello-world:1.0.0\n1.0.0: Pulling from wxnacy/hello-world\nDigest: sha256:90659bf80b44ce6be8234e6ff90a1ac34acbeb826903b02cfa0da11c82cbc042\nStatus: Downloaded newer image for wxnacy/hello-world:1.0.0\n```\n\n按照实验结果，只有准确输入标签名 `1.0.0` 时，才能正确下载镜像\n\n而第二次不使用任何标签拉取时，结果提示 `Using default tag: latest`，说明默认标签为 `latest`\n\n总结一下，Docker 的这个行为还是挺违背常理的，如果是默认标签，使用关键字 `default` 岂不是更直观。\n","slug":"docker-the-latest","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2at701015gqo67s8h70h"},{"title":"Mysql 实现字段拼接的几个函数","date":"2020-07-30T11:59:31.000Z","_content":"\n给运营导出数据时，难免需要对字段进行拼接，如果 Mysql 可以完成的话，就可以少些很多代码。\n\n<!-- more -->\n<!-- toc -->\n\nMysql 确实有几个函数可以对字段进行拼接。\n\n## concat()\n\n将多个字段使用空字符串拼接为一个字段\n\n```mysql\nmysql> select concat(id, type) from mm_content limit 10;\n+------------------+\n| concat(id, type) |\n+------------------+\n| 100818image      |\n| 100824image      |\n| 100825video      |\n| 100826video      |\n| 100827video      |\n| 100828video      |\n| 100829video      |\n| 100830video      |\n| 100831video      |\n| 100832video      |\n+------------------+\n10 rows in set (0.00 sec)\n```\n\n不过如果有字段值为 NULL，则结果为 NULL。\n\n```mysql\nmysql> select concat(id, type, tags) from mm_content limit 10;\n+------------------------+\n| concat(id, type, tags) |\n+------------------------+\n| NULL                   |\n| NULL                   |\n| NULL                   |\n| NULL                   |\n| NULL                   |\n| NULL                   |\n| NULL                   |\n| NULL                   |\n| NULL                   |\n| NULL                   |\n+------------------------+\n10 rows in set (0.00 sec)\n```\n\n## concat_ws()\n\n上面这种方式如果想要使用分隔符分割，就需要每个字段中间插一个字符串，非常麻烦。\n\n`concat_ws()` 可以一次性的解决分隔符的问题，并且不会因为某个值为 NUll，而全部为 NUll。\n\n```mysql\nmysql> select concat_ws(' ', id, type, tags) from mm_content limit 10;\n+--------------------------------+\n| concat_ws(' ', id, type, tags) |\n+--------------------------------+\n| 100818 image                   |\n| 100824 image                   |\n| 100825 video                   |\n| 100826 video                   |\n| 100827 video                   |\n| 100828 video                   |\n| 100829 video                   |\n| 100830 video                   |\n| 100831 video                   |\n| 100832 video                   |\n+--------------------------------+\n10 rows in set (0.00 sec)\n```\n\n## group_concat()\n\n最后一个厉害了，正常情况下一个语句写成这样一定会报错的。\n\n```mysql\nmysql> select id from test_user group by age;\nERROR 1055 (42000): Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 'test_user.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by\n```\n\n但是 `group_concat()` 可以将分组状态下的其他字段拼接成字符串查询出来\n\n```mysql\nmysql> select group_concat(name) from test_user group by age;\n+--------------------+\n| group_concat(name) |\n+--------------------+\n| wen,ning           |\n| wxnacy,win         |\n+--------------------+\n2 rows in set (0.00 sec)\n```\n\n默认使用逗号分隔，我们也可以指定分隔符\n\n```mysql\nmysql> select group_concat(name separator ' ') from test_user group by age;\n+----------------------------------+\n| group_concat(name separator ' ') |\n+----------------------------------+\n| wen ning                         |\n| wxnacy win                       |\n+----------------------------------+\n2 rows in set (0.00 sec)\n```\n\n将字符串按照某个顺序排列\n\n```mysql\nmysql> select group_concat(name order by id desc separator ' ') from test_user group by age;\n+---------------------------------------------------+\n| group_concat(name order by id desc separator ' ') |\n+---------------------------------------------------+\n| ning wen                                          |\n| win wxnacy                                        |\n+---------------------------------------------------+\n2 rows in set (0.00 sec)\n```\n\n如果想要拼接多个字段，默认是用空字符串进行拼接的，我们可以利用 `concat_ws()` 方法嵌套一层\n\n```mysql\nmysql> select group_concat(concat_ws(',', id, name) separator ' ') from test_user group by age;\n+------------------------------------------------------+\n| group_concat(concat_ws(',', id, name) separator ' ') |\n+------------------------------------------------------+\n| 1,wen 2,ning                                         |\n| 3,wxnacy 4,win                                       |\n+------------------------------------------------------+\n2 rows in set (0.00 sec)\n```\n\n","source":"_posts/2020-07-30-mysql-concat.md","raw":"---\ntitle: Mysql 实现字段拼接的几个函数\ndate: 2020-07-30 11:59:31\ntags: [mysql]\n---\n\n给运营导出数据时，难免需要对字段进行拼接，如果 Mysql 可以完成的话，就可以少些很多代码。\n\n<!-- more -->\n<!-- toc -->\n\nMysql 确实有几个函数可以对字段进行拼接。\n\n## concat()\n\n将多个字段使用空字符串拼接为一个字段\n\n```mysql\nmysql> select concat(id, type) from mm_content limit 10;\n+------------------+\n| concat(id, type) |\n+------------------+\n| 100818image      |\n| 100824image      |\n| 100825video      |\n| 100826video      |\n| 100827video      |\n| 100828video      |\n| 100829video      |\n| 100830video      |\n| 100831video      |\n| 100832video      |\n+------------------+\n10 rows in set (0.00 sec)\n```\n\n不过如果有字段值为 NULL，则结果为 NULL。\n\n```mysql\nmysql> select concat(id, type, tags) from mm_content limit 10;\n+------------------------+\n| concat(id, type, tags) |\n+------------------------+\n| NULL                   |\n| NULL                   |\n| NULL                   |\n| NULL                   |\n| NULL                   |\n| NULL                   |\n| NULL                   |\n| NULL                   |\n| NULL                   |\n| NULL                   |\n+------------------------+\n10 rows in set (0.00 sec)\n```\n\n## concat_ws()\n\n上面这种方式如果想要使用分隔符分割，就需要每个字段中间插一个字符串，非常麻烦。\n\n`concat_ws()` 可以一次性的解决分隔符的问题，并且不会因为某个值为 NUll，而全部为 NUll。\n\n```mysql\nmysql> select concat_ws(' ', id, type, tags) from mm_content limit 10;\n+--------------------------------+\n| concat_ws(' ', id, type, tags) |\n+--------------------------------+\n| 100818 image                   |\n| 100824 image                   |\n| 100825 video                   |\n| 100826 video                   |\n| 100827 video                   |\n| 100828 video                   |\n| 100829 video                   |\n| 100830 video                   |\n| 100831 video                   |\n| 100832 video                   |\n+--------------------------------+\n10 rows in set (0.00 sec)\n```\n\n## group_concat()\n\n最后一个厉害了，正常情况下一个语句写成这样一定会报错的。\n\n```mysql\nmysql> select id from test_user group by age;\nERROR 1055 (42000): Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 'test_user.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by\n```\n\n但是 `group_concat()` 可以将分组状态下的其他字段拼接成字符串查询出来\n\n```mysql\nmysql> select group_concat(name) from test_user group by age;\n+--------------------+\n| group_concat(name) |\n+--------------------+\n| wen,ning           |\n| wxnacy,win         |\n+--------------------+\n2 rows in set (0.00 sec)\n```\n\n默认使用逗号分隔，我们也可以指定分隔符\n\n```mysql\nmysql> select group_concat(name separator ' ') from test_user group by age;\n+----------------------------------+\n| group_concat(name separator ' ') |\n+----------------------------------+\n| wen ning                         |\n| wxnacy win                       |\n+----------------------------------+\n2 rows in set (0.00 sec)\n```\n\n将字符串按照某个顺序排列\n\n```mysql\nmysql> select group_concat(name order by id desc separator ' ') from test_user group by age;\n+---------------------------------------------------+\n| group_concat(name order by id desc separator ' ') |\n+---------------------------------------------------+\n| ning wen                                          |\n| win wxnacy                                        |\n+---------------------------------------------------+\n2 rows in set (0.00 sec)\n```\n\n如果想要拼接多个字段，默认是用空字符串进行拼接的，我们可以利用 `concat_ws()` 方法嵌套一层\n\n```mysql\nmysql> select group_concat(concat_ws(',', id, name) separator ' ') from test_user group by age;\n+------------------------------------------------------+\n| group_concat(concat_ws(',', id, name) separator ' ') |\n+------------------------------------------------------+\n| 1,wen 2,ning                                         |\n| 3,wxnacy 4,win                                       |\n+------------------------------------------------------+\n2 rows in set (0.00 sec)\n```\n\n","slug":"mysql-concat","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2at901045gqoj43ixqif"},{"title":"Excel 实现类似 Mysql GROUP BY 的功能","date":"2020-08-06T11:03:31.000Z","_content":"\n\nExcel 用的越多就会越明白它上 G 的安装文件里面都是啥。\n\n<!-- more -->\n<!-- toc -->\n\n![auRcTg.png](https://s1.ax1x.com/2020/07/30/auRcTg.png)\n\n比如上图的数据，我想要实现类似 sql 语句 `select count(0) from user group by age` 的执行结果。如下图\n\n![auRD6P.png](https://s1.ax1x.com/2020/07/30/auRD6P.png)\n\n实现该结果的关键函数为 `COUNTIF()`\n\n具体步骤如下：\n\n先将想要 `group by` 的数据复制一份出来，然后选择该区域，通过“数据”，“删除重复性”来刷选出无重复数据。\n\n[![auRRYj.png](https://s1.ax1x.com/2020/07/30/auRRYj.png)](https://imgchr.com/i/auRRYj)\n\n[![auRrOf.png](https://s1.ax1x.com/2020/07/30/auRrOf.png)](https://imgchr.com/i/auRrOf)\n\n在年龄后面使用函数 `=COUNTIF(B2:B6,G2)`，它的意思是在区域 `B2, B6` 中计算等于 `G2` 值的个数\n\n[![auR60S.png](https://s1.ax1x.com/2020/07/30/auR60S.png)](https://imgchr.com/i/auR60S)\n\n最后选中 `H2:H3`，按下 `CTRL-D` 既可快速填充所有数据\n\n[![auRym8.png](https://s1.ax1x.com/2020/07/30/auRym8.png)](https://imgchr.com/i/auRym8)\n","source":"_posts/2020-08-06-excel-group-by.md","raw":"---\ntitle: Excel 实现类似 Mysql GROUP BY 的功能\ntags:\n  - excel\ndate: 2020-08-06 11:03:31\n---\n\n\nExcel 用的越多就会越明白它上 G 的安装文件里面都是啥。\n\n<!-- more -->\n<!-- toc -->\n\n![auRcTg.png](https://s1.ax1x.com/2020/07/30/auRcTg.png)\n\n比如上图的数据，我想要实现类似 sql 语句 `select count(0) from user group by age` 的执行结果。如下图\n\n![auRD6P.png](https://s1.ax1x.com/2020/07/30/auRD6P.png)\n\n实现该结果的关键函数为 `COUNTIF()`\n\n具体步骤如下：\n\n先将想要 `group by` 的数据复制一份出来，然后选择该区域，通过“数据”，“删除重复性”来刷选出无重复数据。\n\n[![auRRYj.png](https://s1.ax1x.com/2020/07/30/auRRYj.png)](https://imgchr.com/i/auRRYj)\n\n[![auRrOf.png](https://s1.ax1x.com/2020/07/30/auRrOf.png)](https://imgchr.com/i/auRrOf)\n\n在年龄后面使用函数 `=COUNTIF(B2:B6,G2)`，它的意思是在区域 `B2, B6` 中计算等于 `G2` 值的个数\n\n[![auR60S.png](https://s1.ax1x.com/2020/07/30/auR60S.png)](https://imgchr.com/i/auR60S)\n\n最后选中 `H2:H3`，按下 `CTRL-D` 既可快速填充所有数据\n\n[![auRym8.png](https://s1.ax1x.com/2020/07/30/auRym8.png)](https://imgchr.com/i/auRym8)\n","slug":"excel-group-by","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2atb01065gqoe8cqg9o7"},{"title":"Python 获取某天是当月的第几周","date":"2020-08-01T21:47:21.000Z","_content":"\n\nPython 本身是不提供这样的方法的，我们需要自己做下处理。\n\n<!-- more -->\n<!-- toc -->\n\n**思路**\n\n- `strftime(\"%W\")` 方法可以获取日期在当年的第几周\n- 借此，我们可以分别获取获取当天和月初是当年的第几周\n- 然后，做下减法，在加一就可以了\n\n代码如下\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom datetime import datetime\n\ndef get_week_of_month(query_date):\n    \"\"\"\n    获取某个日期是当月的第几周\n    \"\"\"\n    end = int(query_date.strftime(\"%W\"))\n    begin = int(datetime(query_date.year, query_date.month, 1).strftime(\"%W\"))\n    return end - begin + 1\n```\n","source":"_posts/2020-08-01-python-get-week-of-month.md","raw":"---\ntitle: Python 获取某天是当月的第几周\ntags:\n  - python\ndate: 2020-08-01 21:47:21\n---\n\n\nPython 本身是不提供这样的方法的，我们需要自己做下处理。\n\n<!-- more -->\n<!-- toc -->\n\n**思路**\n\n- `strftime(\"%W\")` 方法可以获取日期在当年的第几周\n- 借此，我们可以分别获取获取当天和月初是当年的第几周\n- 然后，做下减法，在加一就可以了\n\n代码如下\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nfrom datetime import datetime\n\ndef get_week_of_month(query_date):\n    \"\"\"\n    获取某个日期是当月的第几周\n    \"\"\"\n    end = int(query_date.strftime(\"%W\"))\n    begin = int(datetime(query_date.year, query_date.month, 1).strftime(\"%W\"))\n    return end - begin + 1\n```\n","slug":"python-get-week-of-month","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2atd01085gqochv3s2s9"},{"title":"银行卡校验规则(Luhn算法)","date":"2017-08-05T00:00:00.000Z","_content":"\n[原文:http://www.icloudyin.com/?p=61](http://www.icloudyin.com/?p=61)\n\n- 检验数字算法（Luhn Check Digit Algorithm），也叫做模数10公式，是一种简单的算法，用于验证银行卡、信用卡号码的有效性的算法。对所有大型信用卡公司发行的信用卡都起作用，这些公司包括美国Express、护照、万事达卡、Discover和用餐者俱乐部等。这种算法最初是在20世纪60年代由一组数学家制定，现在Luhn检验数字算法属于大众，任何人都可以使用它。\n- 将卡号上的每个数字乘上其权重（weight），如果卡号上的数字个数是偶数，那么第一个数字的权重就是2，若是奇数，那么权重就给1，剩下来的数字，根据第一个数字依序给定。例如某信用卡卡号的数字个数为偶数，那么从第一个数字开始的权重依序为 2、1、2、1、2、1 …。\n- 如果数字乘上自己的权重后比9还大，那么就从这加权数字里扣除9。\n- 接下来将所有处理过的加权数字全部加总起来，并且除以10，取其余数。\n\n## java\n```java\nint sum = 0;\n\tboolean even = true;\n\tfor ( int index = digits.size() - 1; index >= 0; index-- ) {\n\t\tint digit = digits.get( index );\n\n\t\tif ( even ) {\n\t\t\tdigit <<= 1;\n\t\t}\n\t\tif ( digit > 9 ) {\n\t\t\tdigit -= 9;\n\t\t}\n\t\tsum += digit;\n\t\teven = !even;\n\t}\n\treturn ( 10 - ( sum % 10 ) ) % 10;\n\n```\n## python\n```python\ndef check_bank_card(card_num):\n    \"\"\"检查银行卡的合法性\"\"\"\n    total = 0\n    even = True\n    if isinstance(card_num, int):\n        card_num = str(card_num)\n    check_num = card_num[-1]\n    for item in card_num[-2::-1]:\n        item = int(item)\n        if even:\n            item <<= 1\n        if item > 9:\n            item -= 9\n        total += item\n        even = not even\n    return int(check_num) is (10 - (total % 10)) % 10\n\n```\n\n","source":"_posts/algorithm-2017-08-05-bank_verify.md","raw":"---\ntitle: 银行卡校验规则(Luhn算法)\ndate: 2017-08-05\ntags: [算法]\n---\n\n[原文:http://www.icloudyin.com/?p=61](http://www.icloudyin.com/?p=61)\n\n- 检验数字算法（Luhn Check Digit Algorithm），也叫做模数10公式，是一种简单的算法，用于验证银行卡、信用卡号码的有效性的算法。对所有大型信用卡公司发行的信用卡都起作用，这些公司包括美国Express、护照、万事达卡、Discover和用餐者俱乐部等。这种算法最初是在20世纪60年代由一组数学家制定，现在Luhn检验数字算法属于大众，任何人都可以使用它。\n- 将卡号上的每个数字乘上其权重（weight），如果卡号上的数字个数是偶数，那么第一个数字的权重就是2，若是奇数，那么权重就给1，剩下来的数字，根据第一个数字依序给定。例如某信用卡卡号的数字个数为偶数，那么从第一个数字开始的权重依序为 2、1、2、1、2、1 …。\n- 如果数字乘上自己的权重后比9还大，那么就从这加权数字里扣除9。\n- 接下来将所有处理过的加权数字全部加总起来，并且除以10，取其余数。\n\n## java\n```java\nint sum = 0;\n\tboolean even = true;\n\tfor ( int index = digits.size() - 1; index >= 0; index-- ) {\n\t\tint digit = digits.get( index );\n\n\t\tif ( even ) {\n\t\t\tdigit <<= 1;\n\t\t}\n\t\tif ( digit > 9 ) {\n\t\t\tdigit -= 9;\n\t\t}\n\t\tsum += digit;\n\t\teven = !even;\n\t}\n\treturn ( 10 - ( sum % 10 ) ) % 10;\n\n```\n## python\n```python\ndef check_bank_card(card_num):\n    \"\"\"检查银行卡的合法性\"\"\"\n    total = 0\n    even = True\n    if isinstance(card_num, int):\n        card_num = str(card_num)\n    check_num = card_num[-1]\n    for item in card_num[-2::-1]:\n        item = int(item)\n        if even:\n            item <<= 1\n        if item > 9:\n            item -= 9\n        total += item\n        even = not even\n    return int(check_num) is (10 - (total % 10)) % 10\n\n```\n\n","slug":"algorithm-2017-08-05-bank-verify","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2atf010a5gqo856nl1vv"},{"title":"身份证号码校验规则","date":"2017-08-05T00:00:00.000Z","_content":"\n[原文:http://www.icloudyin.com/?p=66](http://www.icloudyin.com/?p=66)\n\n18位身份证号码组成：`ddddddyyyymmddxxsp`共18位，其中：其他部分都和15位的相同。年份代码由原来的2位升级到4位。最后一位为校验位。\n\n## 校验规则：\n- 十七位数字本体码加权求和公式\n```bash\nS = Sum(Ai * Wi), i = 0, … , 16 ，先对前17位数字的权求和\nAi:表示第i位置上的身份证号码数字值\nWi:表示第i位置上的加权因子\nWi: 7 9 10 5 8 4 2 1 6 3 7 9 10 5 8 4 2\n```\n- 计算模\n```bash\nY = mod(S, 11)\n```\n\n- 通过模得到对应的校验码\n```bash\nY: 0 1 2 3 4 5 6 7 8 9 10\n校验码: 1 0 X 9 8 7 6 5 4 3 2\n```\n\n## java\n\n```java\nstatic String getCheckCode(String idCard){\n    static String[] Wi = { \"7\", \"9\", \"10\", \"5\", \"8\", \"4\", \"2\", \"1\", \"6\", \"3\", \"7\",\n        \"9\", \"10\", \"5\", \"8\", \"4\", \"2\" };\n    int sum = 0;\n    for( int i = 0 ; i < 17 ; i ++)\n    {\n        sum = sum + Integer.parseInt(String.valueOf(idCard.charAt(i))) * Integer.parseInt(String.valueOf(Wi[i]));\n    }\n    int T  = sum % 11;\n    int R = (12 -T) % 11;\n    if( R == 10 )\n        return \"X\";\n    else {\n        return String.valueOf(R);\n    }\n}\n```\n\n\n## python\n\n```python\ndef check_identity_card(card):\n    wi = [\"7\", \"9\", \"10\", \"5\", \"8\", \"4\", \"2\", \"1\", \"6\", \"3\", \"7\", \"9\", \"10\",\"5\", \"8\", \"4\", \"2\"]\n    total = 0\n    card = list(card)\n    index = 0\n    for item in card:\n        total += ord(item) * int(wi[index])\n        index += 1\n        t = total % 11\n    r = (12 - t) % 11\n    if r == 10:\n        return \"X\"\n    else:\n        return r\n```\n","source":"_posts/algorithm-2017-08-05-identity_verify.md","raw":"---\ntitle: 身份证号码校验规则\ndate: 2017-08-05\ntags: [算法]\n---\n\n[原文:http://www.icloudyin.com/?p=66](http://www.icloudyin.com/?p=66)\n\n18位身份证号码组成：`ddddddyyyymmddxxsp`共18位，其中：其他部分都和15位的相同。年份代码由原来的2位升级到4位。最后一位为校验位。\n\n## 校验规则：\n- 十七位数字本体码加权求和公式\n```bash\nS = Sum(Ai * Wi), i = 0, … , 16 ，先对前17位数字的权求和\nAi:表示第i位置上的身份证号码数字值\nWi:表示第i位置上的加权因子\nWi: 7 9 10 5 8 4 2 1 6 3 7 9 10 5 8 4 2\n```\n- 计算模\n```bash\nY = mod(S, 11)\n```\n\n- 通过模得到对应的校验码\n```bash\nY: 0 1 2 3 4 5 6 7 8 9 10\n校验码: 1 0 X 9 8 7 6 5 4 3 2\n```\n\n## java\n\n```java\nstatic String getCheckCode(String idCard){\n    static String[] Wi = { \"7\", \"9\", \"10\", \"5\", \"8\", \"4\", \"2\", \"1\", \"6\", \"3\", \"7\",\n        \"9\", \"10\", \"5\", \"8\", \"4\", \"2\" };\n    int sum = 0;\n    for( int i = 0 ; i < 17 ; i ++)\n    {\n        sum = sum + Integer.parseInt(String.valueOf(idCard.charAt(i))) * Integer.parseInt(String.valueOf(Wi[i]));\n    }\n    int T  = sum % 11;\n    int R = (12 -T) % 11;\n    if( R == 10 )\n        return \"X\";\n    else {\n        return String.valueOf(R);\n    }\n}\n```\n\n\n## python\n\n```python\ndef check_identity_card(card):\n    wi = [\"7\", \"9\", \"10\", \"5\", \"8\", \"4\", \"2\", \"1\", \"6\", \"3\", \"7\", \"9\", \"10\",\"5\", \"8\", \"4\", \"2\"]\n    total = 0\n    card = list(card)\n    index = 0\n    for item in card:\n        total += ord(item) * int(wi[index])\n        index += 1\n        t = total % 11\n    r = (12 - t) % 11\n    if r == 10:\n        return \"X\"\n    else:\n        return r\n```\n","slug":"algorithm-2017-08-05-identity-verify","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2atg010c5gqop7lr8383"},{"title":"ansible入门笔记1 Get Started","date":"2017-08-08T00:00:00.000Z","_content":"\n专辑：[ansible学习笔记](/2017/08/14/ansible-2017-08-14-album-study-notes/)\n\n> Ansilbe 是一个部署一群远程主机的工具。远程的主机可以是远程虚拟机或物理机，也\n可以是本地主机。Ansilbe 是一个部署一群远程主机的工具。远程的主机可以是远程虚拟机\n或物理机，也可以是本地主机。\n\n<!-- move -->\n\n<!-- toc -->\n\n## 安装ansible\n### 命令\n```bash\npip install ansible\n```\n### 配置hosts\n修改/etc/ansible/hosts 全局hosts文件，没有的话自己创建\n```bash\n[wxnacy] # 如果服务器使用密码登录就用这个方式保存密码，避免每次输入\nwxnacy.server.org ansible_ssh_pass=your_pass ansible_ssh_user=your_name\n\n[prod] # 如果服务器使用sshkey登陆（推荐使用）\nprod.server.org ansible_ssh_user=your_name ansible_ssh_private_key_file=key_path\n```\n## 第一条命令\n\n- 首先执行ping，查看是否可以连接服务器\n\n```bash\n$ ansible all -m ping\n\n\nwxnacy.server.org | SUCCESS => {\n    \"changed\": false,\n    \"ping\": \"pong\"\n}\nprod.server.org | SUCCESS => {\n    \"changed\": false,\n    \"ping\": \"pong\"\n}\n```\n得到如上样式结果即为正确,另外执行 `ansible wxnacy -m ping` 可以针对某一个服务器\n组进行操作\n\n- 现在我们用另一个命令看下是不是真的可以拿到远程服务器的信息\n\n```bash\n$ ansible prod -m shell -a \"uname -a\"\n\nprod.server.org | SUCCESS | rc=0 >>\nLinux ip-172-31-5-249 4.9.27-14.31.amzn1.x86_64 #1 SMP Wed May 10 01:58:40 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\n```\n\n## 指定hosts文件\n在一些项目中，全局hosts配置不能满足需求，需要指定hosts命令，可以执行如下命令\n```bash\nansible my -i hosts_path -m ping\n```\n\n\n","source":"_posts/ansible-2017-08-08-item-basic_get_started.md","raw":"---\ntitle: ansible入门笔记1 Get Started\ndate: 2017-08-08\ntags: [ansible]\n---\n\n专辑：[ansible学习笔记](/2017/08/14/ansible-2017-08-14-album-study-notes/)\n\n> Ansilbe 是一个部署一群远程主机的工具。远程的主机可以是远程虚拟机或物理机，也\n可以是本地主机。Ansilbe 是一个部署一群远程主机的工具。远程的主机可以是远程虚拟机\n或物理机，也可以是本地主机。\n\n<!-- move -->\n\n<!-- toc -->\n\n## 安装ansible\n### 命令\n```bash\npip install ansible\n```\n### 配置hosts\n修改/etc/ansible/hosts 全局hosts文件，没有的话自己创建\n```bash\n[wxnacy] # 如果服务器使用密码登录就用这个方式保存密码，避免每次输入\nwxnacy.server.org ansible_ssh_pass=your_pass ansible_ssh_user=your_name\n\n[prod] # 如果服务器使用sshkey登陆（推荐使用）\nprod.server.org ansible_ssh_user=your_name ansible_ssh_private_key_file=key_path\n```\n## 第一条命令\n\n- 首先执行ping，查看是否可以连接服务器\n\n```bash\n$ ansible all -m ping\n\n\nwxnacy.server.org | SUCCESS => {\n    \"changed\": false,\n    \"ping\": \"pong\"\n}\nprod.server.org | SUCCESS => {\n    \"changed\": false,\n    \"ping\": \"pong\"\n}\n```\n得到如上样式结果即为正确,另外执行 `ansible wxnacy -m ping` 可以针对某一个服务器\n组进行操作\n\n- 现在我们用另一个命令看下是不是真的可以拿到远程服务器的信息\n\n```bash\n$ ansible prod -m shell -a \"uname -a\"\n\nprod.server.org | SUCCESS | rc=0 >>\nLinux ip-172-31-5-249 4.9.27-14.31.amzn1.x86_64 #1 SMP Wed May 10 01:58:40 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\n```\n\n## 指定hosts文件\n在一些项目中，全局hosts配置不能满足需求，需要指定hosts命令，可以执行如下命令\n```bash\nansible my -i hosts_path -m ping\n```\n\n\n","slug":"ansible-2017-08-08-item-basic-get-started","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ati010e5gqomstst5uq"},{"title":"ansible入门笔记2 Playbooks","date":"2017-08-08T00:00:00.000Z","_content":"\n\n专辑：[ansible学习笔记](/2017/08/14/ansible-2017-08-14-album-study-notes/)\n\n> Playbooks 是 Ansible的配置,部署,编排语言.他们可以被描述为一个需要希望远程主机执行命令的方案,或者一组IT程序运行的命令集合.\n\n一个playbook就是一个YAML文件，所以playbook文件一般都以.yml结尾，一个playbook文件由一个或多个play组成，每个play定义了在一个或多个远程主机上执行的一系列的task，其中每个task一般就是调用一个ansible的模块，如调用copy模块复制文件到远程主机或调用shell模块执行命令。\n\n## 简单的配置\n配置deploy.yml完成进入远程服务器的某个目录并执行git pull操作\n```bash\n- hosts: wxnacy # 它会默认使用/etc/ansible/hosts 中配置的服务器组名 也可以单独设置hosts地址\n  tasks:\n  - name: cd path and git pull # 命令名称\n    shell: git pull # 执行命令\n    args:\n      chdir: ~/workdir # 进入目录\n```\n运行\n```bash\n$ ansible-playbook deploy.yml\n\nPLAY [wxnacy] **********************************************************************************************************************************************************************************************\n\nTASK [cd path and git pull] *************************************************************************************************************************************************************************************\nok: [wxnacy.server.org]\n\n\nPLAY RECAP *************************************************************************************************************************************************************************************************\nwxnacy.server.org             : ok=2    changed=1    unreachable=0    failed=0\n```\n执行完运行命令ansible会在webservers组中依次执行tasks，返回以上样式结果极为成功，结果通过红黄绿三种颜色标明了不同的执行结果，红色表示有task执行失败，黄色表示改变了远程主机状态。\n\n","source":"_posts/ansible-2017-08-08-item-basic_playbooks.md","raw":"---\ntitle: ansible入门笔记2 Playbooks\ndate: 2017-08-08\ntags: [ansible]\n---\n\n\n专辑：[ansible学习笔记](/2017/08/14/ansible-2017-08-14-album-study-notes/)\n\n> Playbooks 是 Ansible的配置,部署,编排语言.他们可以被描述为一个需要希望远程主机执行命令的方案,或者一组IT程序运行的命令集合.\n\n一个playbook就是一个YAML文件，所以playbook文件一般都以.yml结尾，一个playbook文件由一个或多个play组成，每个play定义了在一个或多个远程主机上执行的一系列的task，其中每个task一般就是调用一个ansible的模块，如调用copy模块复制文件到远程主机或调用shell模块执行命令。\n\n## 简单的配置\n配置deploy.yml完成进入远程服务器的某个目录并执行git pull操作\n```bash\n- hosts: wxnacy # 它会默认使用/etc/ansible/hosts 中配置的服务器组名 也可以单独设置hosts地址\n  tasks:\n  - name: cd path and git pull # 命令名称\n    shell: git pull # 执行命令\n    args:\n      chdir: ~/workdir # 进入目录\n```\n运行\n```bash\n$ ansible-playbook deploy.yml\n\nPLAY [wxnacy] **********************************************************************************************************************************************************************************************\n\nTASK [cd path and git pull] *************************************************************************************************************************************************************************************\nok: [wxnacy.server.org]\n\n\nPLAY RECAP *************************************************************************************************************************************************************************************************\nwxnacy.server.org             : ok=2    changed=1    unreachable=0    failed=0\n```\n执行完运行命令ansible会在webservers组中依次执行tasks，返回以上样式结果极为成功，结果通过红黄绿三种颜色标明了不同的执行结果，红色表示有task执行失败，黄色表示改变了远程主机状态。\n\n","slug":"ansible-2017-08-08-item-basic-playbooks","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2atj010g5gqojbwrr4vn"},{"title":"ansible入门笔记3 Playbooks 简单扩展","date":"2017-08-08T00:00:00.000Z","_content":"\n专辑：[ansible学习笔记](/2017/08/14/ansible-2017-08-14-album-study-notes/)\n\n> Playbooks 在实际应用过程中，需要用到一些额外扩展功能，比如外部传参或指定hosts文件，本章节将着重介绍\n\n<!-- more -->\n\n## 外部传参\n\n现在有一个playbook.yml文件，想要完成进入某个目录并完成部署任务，host和执行命令中的参数tag_name 需要外部传值\n```bash\n- hosts: '{{host}}'\n  tasks:\n  - name: deploy\n    shell: ./deploy_api.sh '{{tag_name}}'\n    args:\n      chdir: ~/path\n\n```\n\n通过 `--extra-vars` 或简写 `-e` 进行传值,现在可以通过三种方式进行传值：\n- key=value\n```bash\nansible-playbook playbook.yml --extra-vars \"host=xxx tag_name=xxx\"\n```\n- json格式\n```bash\nansible-playbook playbook.yml --extra-vars \"{'host':'xxx','tag_name':'xxx'}\"\n```\n- jaon文件\n```bash\nansible-playbook playbook.yml --extra-vars \"kwargs.json\"\n```\n\n## 指定hosts文件\n\n当多人协作开发项目的时候，都是全局/etc/ansible/hosts文件并不方便，我们可以通过传参 `--inventory-file` 或 `-i` 来制定当前playbook使用的hosts文件\n```bash\nansible-playbook playbook.yml --inventory-file=~/ansible-hosts\n```\n\n\n","source":"_posts/ansible-2017-08-08-item-basic_playbooks_ext.md","raw":"---\ntitle: ansible入门笔记3 Playbooks 简单扩展\ndate: 2017-08-08\ntags: [ansible]\n---\n\n专辑：[ansible学习笔记](/2017/08/14/ansible-2017-08-14-album-study-notes/)\n\n> Playbooks 在实际应用过程中，需要用到一些额外扩展功能，比如外部传参或指定hosts文件，本章节将着重介绍\n\n<!-- more -->\n\n## 外部传参\n\n现在有一个playbook.yml文件，想要完成进入某个目录并完成部署任务，host和执行命令中的参数tag_name 需要外部传值\n```bash\n- hosts: '{{host}}'\n  tasks:\n  - name: deploy\n    shell: ./deploy_api.sh '{{tag_name}}'\n    args:\n      chdir: ~/path\n\n```\n\n通过 `--extra-vars` 或简写 `-e` 进行传值,现在可以通过三种方式进行传值：\n- key=value\n```bash\nansible-playbook playbook.yml --extra-vars \"host=xxx tag_name=xxx\"\n```\n- json格式\n```bash\nansible-playbook playbook.yml --extra-vars \"{'host':'xxx','tag_name':'xxx'}\"\n```\n- jaon文件\n```bash\nansible-playbook playbook.yml --extra-vars \"kwargs.json\"\n```\n\n## 指定hosts文件\n\n当多人协作开发项目的时候，都是全局/etc/ansible/hosts文件并不方便，我们可以通过传参 `--inventory-file` 或 `-i` 来制定当前playbook使用的hosts文件\n```bash\nansible-playbook playbook.yml --inventory-file=~/ansible-hosts\n```\n\n\n","slug":"ansible-2017-08-08-item-basic-playbooks-ext","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2atl010i5gqoq363o9br"},{"title":"ansible学习笔记","date":"2017-08-14T00:00:00.000Z","_content":"\n## 入门级别\n\n- [ansible入门笔记1 Get Started](/2017/08/08/ansible-2017-08-08-item-basic-get-started/)\n- [ansible入门笔记2 Playbooks](/2017/08/08/ansible-2017-08-08-item-basic-playbooks/)\n- [ansible入门笔记3 Playbooks 简单扩展](/2017/08/08/ansible-2017-08-08-item-basic-playbooks-ext/)\n- [ansible入门案例1 远程部署项目](/2018/07/01/ansible-task1/)\n\n\n","source":"_posts/ansible-2017-08-14-album-study-notes.md","raw":"---\ntitle: ansible学习笔记\ndate: 2017-08-14\ntags: [ansible]\n---\n\n## 入门级别\n\n- [ansible入门笔记1 Get Started](/2017/08/08/ansible-2017-08-08-item-basic-get-started/)\n- [ansible入门笔记2 Playbooks](/2017/08/08/ansible-2017-08-08-item-basic-playbooks/)\n- [ansible入门笔记3 Playbooks 简单扩展](/2017/08/08/ansible-2017-08-08-item-basic-playbooks-ext/)\n- [ansible入门案例1 远程部署项目](/2018/07/01/ansible-task1/)\n\n\n","slug":"ansible-2017-08-14-album-study-notes","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2atn010k5gqo5sa4j1bm"},{"title":"正则表达式","date":"2017-09-08T00:00:00.000Z","_content":"> 正则表达式，又称正规表示式、正规表示法、正规表达式、规则表达式、常规表示法（英语：Regular Expression，在代码中常简写为regex、regexp或RE），是计算机科学的一个概念。正则表达式使用单个字符串来描述、匹配一系列匹配某个句法规则的字符串。在很多文本编辑器里，正则表达式通常被用来检索、替换那些匹配某个模式的文本。\n\n<!-- more --><!-- toc -->\n## 常用元字符\n<!-- more -->\n```bash\n^       \" 匹配输入字符串的开始位置。如果设置了 RegExp 对象的 Multiline 属性，^ 也匹配 '\\n' 或 '\\r' 之后的位置。\n$       \" 匹配输入字符串的结束位置。如果设置了RegExp 对象的 Multiline 属性，$ 也匹配 '\\n' 或 '\\r' 之前的位置。\n.       \" 匹配除 \"\\n\" 之外的任何单个字符。要匹配包括 '\\n' 在内的任何字符，请使用像\"(.|\\n)\"的模式。\nx|y     \" 匹配 x 或 y。例如，'z|food' 能匹配 \"z\" 或 \"food\"。'(z|f)ood' 则匹配 \"zood\" 或 \"food\"。\n[xyz]   \" 字符集合。匹配所包含的任意一个字符。例如， '[abc]' 可以匹配 \"plain\" 中的 'a'。\n[^xyz]  \" 负值字符集合。匹配未包含的任意字符。例如， '[^abc]' 可以匹配 \"plain\" 中的'p'、'l'、'i'、'n'。\n[a-z]   \" 字符范围。匹配指定范围内的任意字符。例如，'[a-z]' 可以匹配 'a' 到 'z' 范围内的任意小写字母字符。\n[^a-z]  \" 负值字符范围。匹配任何不在指定范围内的任意字符。例如，'[^a-z]' 可以匹配任何不在 'a' 到 'z' 范围内的任意字符。\n\\b      \" 匹配一个单词边界，也就是指单词和空格间的位置。例如， 'er\\b' 可以匹配\"never\" 中的 'er'，但不能匹配 \"verb\" 中的 'er'。\n\\B      \" 匹配非单词边界。'er\\B' 能匹配 \"verb\" 中的 'er'，但不能匹配 \"never\" 中的 'er'。\n\\cx     \" 匹配由 x 指明的控制字符。例如， \\cM 匹配一个 Control-M 或回车符。x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 'c' 字符。\n\\d      \" 匹配一个数字字符。等价于 [0-9]。\n\\D      \" 匹配一个非数字字符。等价于 [^0-9]。\n\\f      \" 匹配一个换页符。等价于 \\x0c 和 \\cL。\n\\n      \" 匹配一个换行符。等价于 \\x0a 和 \\cJ。\n\\r      \" 匹配一个回车符。等价于 \\x0d 和 \\cM。\n\\s      \" 匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [ \\f\\n\\r\\t\\v]。\n\\S      \" 匹配任何非空白字符。等价于 [^ \\f\\n\\r\\t\\v]。\n\\t      \" 匹配一个制表符。等价于 \\x09 和 \\cI。\n\\v      \" 匹配一个垂直制表符。等价于 \\x0b 和 \\cK。\n\\w      \" 匹配包括下划线的任何单词字符。等价于'[A-Za-z0-9_]'。\n\\W      \" 匹配任何非单词字符。等价于 '[^A-Za-z0-9_]'。\n```\n## 常用次数元字符\n```bash\n*       \" 匹配前面的子表达式零次或多次。例如，zo* 能匹配 \"z\" 以及 \"zoo\"。* 等价于{0,}。\n+       \" 匹配前面的子表达式一次或多次。例如，'zo+' 能匹配 \"zo\" 以及 \"zoo\"，但不能匹配 \"z\"。+ 等价于 {1,}。\n?       \" 匹配前面的子表达式零次或一次。例如，\"do(es)?\" 可以匹配 \"do\" 或 \"does\" 。? 等价于 {0,1}。\n{n}     \" n 是一个非负整数。匹配确定的 n 次。例如，'o{2}' 不能匹配 \"Bob\" 中的 'o'，但是能匹配 \"food\" 中的两个 o。\n{n,}    \" n 是一个非负整数。至少匹配n 次。例如，'o{2,}' 不能匹配 \"Bob\" 中的 'o'，但能匹配 \"foooood\" 中的所有 o。'o{1,}' 等价于 'o+'。'o{0,}' 则等价于 'o*'。\n{n,m}   \" m 和 n 均为非负整数，其中n <= m。最少匹配 n 次且最多匹配 m 次。例如，\"o{1,3}\" 将匹配 \"fooooood\" 中的前三个 o。'o{0,1}' 等价于 'o?'。请注意在逗号和两个数之间不能有空格。\n```\n\n## Python\n`re` 模块在 Python 中提供正则表达式相关函数\n\n### 一些例子\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport re\n\nRE_CHINESE = re.compile(u\"[\\u4e00-\\u9fa5]+\")  # 正则查找中文\nRE_ENGLISH = re.compile(u\"[A-Za-z]+\")  # 正则查找英文\n\ndef find_chinese(str):\n    \"\"\" 查找字符串中中文集合 \"\"\"\n    return re.findall(RE_CHINESE, str)\n\ndef find_english(str):\n    \"\"\" 查找字符串中的英文 \"\"\"\n    return re.findall(RE_ENGLISH, str)\n```\n","source":"_posts/develop-2017-09-08-regex-basic.md","raw":"---\ntitle: 正则表达式\ndate: 2017-09-08\ntags: [开发]\n---\n> 正则表达式，又称正规表示式、正规表示法、正规表达式、规则表达式、常规表示法（英语：Regular Expression，在代码中常简写为regex、regexp或RE），是计算机科学的一个概念。正则表达式使用单个字符串来描述、匹配一系列匹配某个句法规则的字符串。在很多文本编辑器里，正则表达式通常被用来检索、替换那些匹配某个模式的文本。\n\n<!-- more --><!-- toc -->\n## 常用元字符\n<!-- more -->\n```bash\n^       \" 匹配输入字符串的开始位置。如果设置了 RegExp 对象的 Multiline 属性，^ 也匹配 '\\n' 或 '\\r' 之后的位置。\n$       \" 匹配输入字符串的结束位置。如果设置了RegExp 对象的 Multiline 属性，$ 也匹配 '\\n' 或 '\\r' 之前的位置。\n.       \" 匹配除 \"\\n\" 之外的任何单个字符。要匹配包括 '\\n' 在内的任何字符，请使用像\"(.|\\n)\"的模式。\nx|y     \" 匹配 x 或 y。例如，'z|food' 能匹配 \"z\" 或 \"food\"。'(z|f)ood' 则匹配 \"zood\" 或 \"food\"。\n[xyz]   \" 字符集合。匹配所包含的任意一个字符。例如， '[abc]' 可以匹配 \"plain\" 中的 'a'。\n[^xyz]  \" 负值字符集合。匹配未包含的任意字符。例如， '[^abc]' 可以匹配 \"plain\" 中的'p'、'l'、'i'、'n'。\n[a-z]   \" 字符范围。匹配指定范围内的任意字符。例如，'[a-z]' 可以匹配 'a' 到 'z' 范围内的任意小写字母字符。\n[^a-z]  \" 负值字符范围。匹配任何不在指定范围内的任意字符。例如，'[^a-z]' 可以匹配任何不在 'a' 到 'z' 范围内的任意字符。\n\\b      \" 匹配一个单词边界，也就是指单词和空格间的位置。例如， 'er\\b' 可以匹配\"never\" 中的 'er'，但不能匹配 \"verb\" 中的 'er'。\n\\B      \" 匹配非单词边界。'er\\B' 能匹配 \"verb\" 中的 'er'，但不能匹配 \"never\" 中的 'er'。\n\\cx     \" 匹配由 x 指明的控制字符。例如， \\cM 匹配一个 Control-M 或回车符。x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 'c' 字符。\n\\d      \" 匹配一个数字字符。等价于 [0-9]。\n\\D      \" 匹配一个非数字字符。等价于 [^0-9]。\n\\f      \" 匹配一个换页符。等价于 \\x0c 和 \\cL。\n\\n      \" 匹配一个换行符。等价于 \\x0a 和 \\cJ。\n\\r      \" 匹配一个回车符。等价于 \\x0d 和 \\cM。\n\\s      \" 匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [ \\f\\n\\r\\t\\v]。\n\\S      \" 匹配任何非空白字符。等价于 [^ \\f\\n\\r\\t\\v]。\n\\t      \" 匹配一个制表符。等价于 \\x09 和 \\cI。\n\\v      \" 匹配一个垂直制表符。等价于 \\x0b 和 \\cK。\n\\w      \" 匹配包括下划线的任何单词字符。等价于'[A-Za-z0-9_]'。\n\\W      \" 匹配任何非单词字符。等价于 '[^A-Za-z0-9_]'。\n```\n## 常用次数元字符\n```bash\n*       \" 匹配前面的子表达式零次或多次。例如，zo* 能匹配 \"z\" 以及 \"zoo\"。* 等价于{0,}。\n+       \" 匹配前面的子表达式一次或多次。例如，'zo+' 能匹配 \"zo\" 以及 \"zoo\"，但不能匹配 \"z\"。+ 等价于 {1,}。\n?       \" 匹配前面的子表达式零次或一次。例如，\"do(es)?\" 可以匹配 \"do\" 或 \"does\" 。? 等价于 {0,1}。\n{n}     \" n 是一个非负整数。匹配确定的 n 次。例如，'o{2}' 不能匹配 \"Bob\" 中的 'o'，但是能匹配 \"food\" 中的两个 o。\n{n,}    \" n 是一个非负整数。至少匹配n 次。例如，'o{2,}' 不能匹配 \"Bob\" 中的 'o'，但能匹配 \"foooood\" 中的所有 o。'o{1,}' 等价于 'o+'。'o{0,}' 则等价于 'o*'。\n{n,m}   \" m 和 n 均为非负整数，其中n <= m。最少匹配 n 次且最多匹配 m 次。例如，\"o{1,3}\" 将匹配 \"fooooood\" 中的前三个 o。'o{0,1}' 等价于 'o?'。请注意在逗号和两个数之间不能有空格。\n```\n\n## Python\n`re` 模块在 Python 中提供正则表达式相关函数\n\n### 一些例子\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport re\n\nRE_CHINESE = re.compile(u\"[\\u4e00-\\u9fa5]+\")  # 正则查找中文\nRE_ENGLISH = re.compile(u\"[A-Za-z]+\")  # 正则查找英文\n\ndef find_chinese(str):\n    \"\"\" 查找字符串中中文集合 \"\"\"\n    return re.findall(RE_CHINESE, str)\n\ndef find_english(str):\n    \"\"\" 查找字符串中的英文 \"\"\"\n    return re.findall(RE_ENGLISH, str)\n```\n","slug":"develop-2017-09-08-regex-basic","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2atp010m5gqo53xaoubc"},{"title":"Git 常用命令","date":"2017-08-04T00:00:00.000Z","_content":"> 有这些命令就够了\n\n<!-- more -->\n\n<!-- toc -->\n## ssh-key\n\n```bash\nssh-keygen -t rsa -C \"$your_email\"          # 获取 sshkey\ncat ~/.ssh/id_rsa.pub                       # 查看 sshkey\n```\n\n## 首次使用 git\n\n客户端首次使用 git 提交时需要将 `id_rsa.pub` 内容提交到 github 上不然每次都会提示输入用户名密码\n\n然后输入必要的配置\n\n```bash\ngit config --global user.name wxnacy            # 配置用户名\ngit config --global user.email xxx@qq.com       # 配置邮件\ngit config --global push.default simple\ngit push -u origin master\n```\n\n\n## 初始化项目\n```bash\ncd project_root                             # 进入项目目录\ngit init                                    # 初始化git仓库\ngit add .                                   # 添加文件到仓库\ngit commit -m 'init commit'                 # 提交代码到本地仓库\ngit remote add origin ${repository_path}    # 将项目关联到git server\ngit pull origin master                      # 同步代码\ngit push origin master                      # push代码到远程仓库\ngit clone ${repository_path}                # 新的位置clone项目\n```\n\n## 删除文件\n```bash\nrm -r file_path\ngit rm -r ${file_path}\ngit commit -m 'remove'\ngit pull origin master\ngit push origin master\n```\n## 用户信息\n```bash\ngit config --global user.name wxnacy            # 配置用户名\ngit config --global user.email xxx@qq.com       # 配置邮件\n\n$ git config user.name      # 查看登录名\n$ git config user.email     # 查看登录邮箱\n```\n\n## 记住密码\n在服务器上 `clone` 代码第一次通常会提示输入密码，为了下次不再提示，可以在 `clone` 后做如下操作\n```bash\ngit config credential.helper store\n```\n## 撤销操作\n### 重新提交\n提交后如果发现遗漏可以使用 `git commit --amend` 重新提交\n```bash\ngit commit -m 'initial commit'\ngit add forgotten_file\ngit commit --amend\n```\n### 撤销提交文件\n```bash\ngit checkout -- <file>              # 取消对文件的修改。还原到最近的版本，废弃本地做的修改。\ngit reset HEAD <file>...            # 取消已经暂存的文件。即，撤销先前\"git add\"的操作\ngit reset HEAD^                     # 回退所有内容到上一个版本\ngit reset HEAD^ a.py                # 回退a.py这个文件的版本到上一个版本\ngit reset –soft HEAD~3              # 向前回退到第3个版本\ngit reset –hard origin/master       # 将本地的状态回退到和远程的一样\ngit reset 057d                      # 回退到某个版本\ngit revert HEAD                     # 回退到上一次提交的状态，按照某一次的commit完全反向的进行一次commit.(代码回滚到上个版本，并提交git)\ngit merge --abort                   # 撤销所有合并操作\n```\n或者\n```bash\ngit -c core.quotepath=false rm --cached -f -- env.sh\ngit -c core.quotepath=false checkout HEAD -- env.sh\n```\n## 修改remote url\n```bash\ngit remote set-url origin ${new_repository_path}\n```\n\n## 分支\n\n```bash\ngit checkout -b ${new_branch} master    # 从master创建新分支\ngit checkout ${branch_name}             # 定位分支\ngit checkout -b {local-branch-name} origin/{remote-branch-name} # 从远程分支创建新分支\ngit merge --no-off ${branch_name}       # 将其他分支合并到master\ngit rebase origin master # master分支合并到当前分支\ngit pull origin {branch-name}           # 拉取远程分支\n```\n\n## 标签\n\n```bash\ngit tag ${tag_name} master              # 创建新分支\ngit push origin ${tag_name}             # 将标签推到远程仓库\ngit branch -D ${branch_tag_name}        # 删除本地分支或标签\ngit push origin :${branch_tag_name}     # 删除远程分支或分支\n```\n\n## 提交检查\n\n在代码提前前或查看提交记录详情时可能会用到下面几组命令\n\n### status\n```bash\ngit status          # 查看当前版本状态（是否修改）\n```\n\n### log\n\n```bash\ngit log             # 显示提交日志\ngit log -1          # 显示1行日志 -n为n行\ngit log --stat      # 显示提交日志及相关变动文件\ngit log -p -m       # 显示提交日志及变动的详细情况\ngit log v2.0        # 显示v2.0的日志\n```\n\n### show\n```bash\ngit show dfb02e6e4f2f7b573         # 显示某个提交的详细内容\ngit show dfb02                     # 可只用commitid的前几位\ngit show HEAD                      # 显示HEAD提交日志\ngit show HEAD^                     # 显示HEAD的父（上一个版本）的提交日志 ^^为上两个版本 ^5为上5个版本\ngit show v2.0                      # 显示v2.0的日志及详细内容\n```\n\n### diff\n```bash\ngit diff                                  # 显示所有未添加至index的变更\ngit diff --cached                         # 显示所有已添加index但还未commit的变更\ngit diff HEAD^                            # 比较与上一个版本的差异\ngit diff HEAD -- ./lib                    # 比较与HEAD版本lib目录的差异\ngit diff origin/master..master            # 比较远程分支master上有本地分支master上没有的\ngit diff origin/master..master --stat     # 只显示差异的文件，不显示具体内容\n```\n\n## 参考资料\n- [常用 Git 命令清单](http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html)\n- [Pro Git](https://git-scm.com/book/zh/v2)\n\n\n\n\n","source":"_posts/git-2017-08-04-basic-cmd.md","raw":"---\ntitle: Git 常用命令\ndate: 2017-08-04\ntags: [git]\n---\n> 有这些命令就够了\n\n<!-- more -->\n\n<!-- toc -->\n## ssh-key\n\n```bash\nssh-keygen -t rsa -C \"$your_email\"          # 获取 sshkey\ncat ~/.ssh/id_rsa.pub                       # 查看 sshkey\n```\n\n## 首次使用 git\n\n客户端首次使用 git 提交时需要将 `id_rsa.pub` 内容提交到 github 上不然每次都会提示输入用户名密码\n\n然后输入必要的配置\n\n```bash\ngit config --global user.name wxnacy            # 配置用户名\ngit config --global user.email xxx@qq.com       # 配置邮件\ngit config --global push.default simple\ngit push -u origin master\n```\n\n\n## 初始化项目\n```bash\ncd project_root                             # 进入项目目录\ngit init                                    # 初始化git仓库\ngit add .                                   # 添加文件到仓库\ngit commit -m 'init commit'                 # 提交代码到本地仓库\ngit remote add origin ${repository_path}    # 将项目关联到git server\ngit pull origin master                      # 同步代码\ngit push origin master                      # push代码到远程仓库\ngit clone ${repository_path}                # 新的位置clone项目\n```\n\n## 删除文件\n```bash\nrm -r file_path\ngit rm -r ${file_path}\ngit commit -m 'remove'\ngit pull origin master\ngit push origin master\n```\n## 用户信息\n```bash\ngit config --global user.name wxnacy            # 配置用户名\ngit config --global user.email xxx@qq.com       # 配置邮件\n\n$ git config user.name      # 查看登录名\n$ git config user.email     # 查看登录邮箱\n```\n\n## 记住密码\n在服务器上 `clone` 代码第一次通常会提示输入密码，为了下次不再提示，可以在 `clone` 后做如下操作\n```bash\ngit config credential.helper store\n```\n## 撤销操作\n### 重新提交\n提交后如果发现遗漏可以使用 `git commit --amend` 重新提交\n```bash\ngit commit -m 'initial commit'\ngit add forgotten_file\ngit commit --amend\n```\n### 撤销提交文件\n```bash\ngit checkout -- <file>              # 取消对文件的修改。还原到最近的版本，废弃本地做的修改。\ngit reset HEAD <file>...            # 取消已经暂存的文件。即，撤销先前\"git add\"的操作\ngit reset HEAD^                     # 回退所有内容到上一个版本\ngit reset HEAD^ a.py                # 回退a.py这个文件的版本到上一个版本\ngit reset –soft HEAD~3              # 向前回退到第3个版本\ngit reset –hard origin/master       # 将本地的状态回退到和远程的一样\ngit reset 057d                      # 回退到某个版本\ngit revert HEAD                     # 回退到上一次提交的状态，按照某一次的commit完全反向的进行一次commit.(代码回滚到上个版本，并提交git)\ngit merge --abort                   # 撤销所有合并操作\n```\n或者\n```bash\ngit -c core.quotepath=false rm --cached -f -- env.sh\ngit -c core.quotepath=false checkout HEAD -- env.sh\n```\n## 修改remote url\n```bash\ngit remote set-url origin ${new_repository_path}\n```\n\n## 分支\n\n```bash\ngit checkout -b ${new_branch} master    # 从master创建新分支\ngit checkout ${branch_name}             # 定位分支\ngit checkout -b {local-branch-name} origin/{remote-branch-name} # 从远程分支创建新分支\ngit merge --no-off ${branch_name}       # 将其他分支合并到master\ngit rebase origin master # master分支合并到当前分支\ngit pull origin {branch-name}           # 拉取远程分支\n```\n\n## 标签\n\n```bash\ngit tag ${tag_name} master              # 创建新分支\ngit push origin ${tag_name}             # 将标签推到远程仓库\ngit branch -D ${branch_tag_name}        # 删除本地分支或标签\ngit push origin :${branch_tag_name}     # 删除远程分支或分支\n```\n\n## 提交检查\n\n在代码提前前或查看提交记录详情时可能会用到下面几组命令\n\n### status\n```bash\ngit status          # 查看当前版本状态（是否修改）\n```\n\n### log\n\n```bash\ngit log             # 显示提交日志\ngit log -1          # 显示1行日志 -n为n行\ngit log --stat      # 显示提交日志及相关变动文件\ngit log -p -m       # 显示提交日志及变动的详细情况\ngit log v2.0        # 显示v2.0的日志\n```\n\n### show\n```bash\ngit show dfb02e6e4f2f7b573         # 显示某个提交的详细内容\ngit show dfb02                     # 可只用commitid的前几位\ngit show HEAD                      # 显示HEAD提交日志\ngit show HEAD^                     # 显示HEAD的父（上一个版本）的提交日志 ^^为上两个版本 ^5为上5个版本\ngit show v2.0                      # 显示v2.0的日志及详细内容\n```\n\n### diff\n```bash\ngit diff                                  # 显示所有未添加至index的变更\ngit diff --cached                         # 显示所有已添加index但还未commit的变更\ngit diff HEAD^                            # 比较与上一个版本的差异\ngit diff HEAD -- ./lib                    # 比较与HEAD版本lib目录的差异\ngit diff origin/master..master            # 比较远程分支master上有本地分支master上没有的\ngit diff origin/master..master --stat     # 只显示差异的文件，不显示具体内容\n```\n\n## 参考资料\n- [常用 Git 命令清单](http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html)\n- [Pro Git](https://git-scm.com/book/zh/v2)\n\n\n\n\n","slug":"git-2017-08-04-basic-cmd","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2atq010o5gqo2z552egy"},{"title":"HTTP相关知识","date":"2017-08-16T00:00:00.000Z","_content":"\n### Content-length\n返回数据的大小，单位 bytes\n\n## Content-Type\n### 常用\n- application/octet-stream\n- application/json\n- application/javascript\n- application/xml\n- application/x-www-form-urlencoded\n- text/plain\n- text/xml\n- text/html\n- image/jpeg\n- image/jpeg\n- multipart/form-data\n详细内容:[http://tool.oschina.net/commons](http://tool.oschina.net/commons)\n","source":"_posts/http-2017-08-16-basic.md","raw":"---\ntitle: HTTP相关知识\ndate: 2017-08-16\ntags: [http]\n---\n\n### Content-length\n返回数据的大小，单位 bytes\n\n## Content-Type\n### 常用\n- application/octet-stream\n- application/json\n- application/javascript\n- application/xml\n- application/x-www-form-urlencoded\n- text/plain\n- text/xml\n- text/html\n- image/jpeg\n- image/jpeg\n- multipart/form-data\n详细内容:[http://tool.oschina.net/commons](http://tool.oschina.net/commons)\n","slug":"http-2017-08-16-basic","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2atr010q5gqo063qyu7d"},{"title":"js和css获取屏幕大小","date":"2017-08-05T00:00:00.000Z","_content":"\n[原文：https://segmentfault.com/q/1010000004605042](https://segmentfault.com/q/1010000004605042)\n\n<!-- more --><!-- toc -->\n## js\n```javascript\nfunction getScreenInfo()\n{\n    var s = \"\";\n    s = \" 网页可见区域宽：\" document.body.clientWidth;\n    s = \" 网页可见区域高：\" document.body.clientHeight;\n    s = \" 网页可见区域宽：\" document.body.offsetWidth \" (包括边线和滚动条的宽)\";\n    s = \" 网页可见区域高：\" document.body.offsetHeight \" (包括边线的宽)\";\n    s = \" 网页正文全文宽：\" document.body.scrollWidth;\n    s = \" 网页正文全文高：\" document.body.scrollHeight;\n    s = \" 网页被卷去的高(ff)：\" document.body.scrollTop;\n    s = \" 网页被卷去的高(ie)：\" document.documentElement.scrollTop;\n    s = \" 网页被卷去的左：\" document.body.scrollLeft;\n    s = \" 网页正文部分上：\" window.screenTop;\n    s = \" 网页正文部分左：\" window.screenLeft;\n    s = \" 屏幕分辨率的高：\" window.screen.height;\n    s = \" 屏幕分辨率的宽：\" window.screen.width;\n    s = \" 屏幕可用工作区高度：\" window.screen.availHeight;\n    s = \" 屏幕可用工作区宽度：\" window.screen.availWidth;\n    s = \" 你的屏幕设置是 \" window.screen.colorDepth \" 位彩色\";\n    s = \" 你的屏幕设置 \" window.screen.deviceXDPI \" 像素/英寸\";\n}\n\n```\n## css判断\n```css\n/* 小屏幕（平板，大于等于 768px） */\n@media (min-width: 768px) { ... }\n\n/* 中等屏幕（桌面显示器，大于等于 992px） */\n@media (min-width: 992px) { ... }\n\n/* 大屏幕（大桌面显示器，大于等于 1200px） */\n@media (min-width: 1200px) { ... }\n\n```\n\n\n","source":"_posts/js-2017-08-05-screen_wh.md","raw":"---\ntitle: js和css获取屏幕大小\ndate: 2017-08-05\ntags: [javascript]\n---\n\n[原文：https://segmentfault.com/q/1010000004605042](https://segmentfault.com/q/1010000004605042)\n\n<!-- more --><!-- toc -->\n## js\n```javascript\nfunction getScreenInfo()\n{\n    var s = \"\";\n    s = \" 网页可见区域宽：\" document.body.clientWidth;\n    s = \" 网页可见区域高：\" document.body.clientHeight;\n    s = \" 网页可见区域宽：\" document.body.offsetWidth \" (包括边线和滚动条的宽)\";\n    s = \" 网页可见区域高：\" document.body.offsetHeight \" (包括边线的宽)\";\n    s = \" 网页正文全文宽：\" document.body.scrollWidth;\n    s = \" 网页正文全文高：\" document.body.scrollHeight;\n    s = \" 网页被卷去的高(ff)：\" document.body.scrollTop;\n    s = \" 网页被卷去的高(ie)：\" document.documentElement.scrollTop;\n    s = \" 网页被卷去的左：\" document.body.scrollLeft;\n    s = \" 网页正文部分上：\" window.screenTop;\n    s = \" 网页正文部分左：\" window.screenLeft;\n    s = \" 屏幕分辨率的高：\" window.screen.height;\n    s = \" 屏幕分辨率的宽：\" window.screen.width;\n    s = \" 屏幕可用工作区高度：\" window.screen.availHeight;\n    s = \" 屏幕可用工作区宽度：\" window.screen.availWidth;\n    s = \" 你的屏幕设置是 \" window.screen.colorDepth \" 位彩色\";\n    s = \" 你的屏幕设置 \" window.screen.deviceXDPI \" 像素/英寸\";\n}\n\n```\n## css判断\n```css\n/* 小屏幕（平板，大于等于 768px） */\n@media (min-width: 768px) { ... }\n\n/* 中等屏幕（桌面显示器，大于等于 992px） */\n@media (min-width: 992px) { ... }\n\n/* 大屏幕（大桌面显示器，大于等于 1200px） */\n@media (min-width: 1200px) { ... }\n\n```\n\n\n","slug":"js-2017-08-05-screen-wh","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2att010s5gqo2i3abmgq"},{"title":"Linux 使用nohup在后台不挂断执行命令","date":"2017-08-15T00:00:00.000Z","_content":"\n> nohup 搭配 & 来不挂断地运行某条命令达到后台执行的效果，默认会在根目录生成一个\nnohup.out 文件用来记录所有的 log 信息，也可以重定向到其他位置。\n\n```bash\n$ nohup gunicorn run:app &\n```\n## 重定向日志到制定文件\n```bash\n$ nohup gunicorn run:app >nohup.log 2>&1 &\n```\n","source":"_posts/linux-2017-08-15-nohup.md","raw":"---\ntitle: Linux 使用nohup在后台不挂断执行命令\ndate: 2017-08-15\ntags: [linux]\n---\n\n> nohup 搭配 & 来不挂断地运行某条命令达到后台执行的效果，默认会在根目录生成一个\nnohup.out 文件用来记录所有的 log 信息，也可以重定向到其他位置。\n\n```bash\n$ nohup gunicorn run:app &\n```\n## 重定向日志到制定文件\n```bash\n$ nohup gunicorn run:app >nohup.log 2>&1 &\n```\n","slug":"linux-2017-08-15-nohup","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2atu010u5gqohvfngjjn"},{"title":"北京生活","date":"2017-09-06T00:00:00.000Z","_content":"\n- [公积金查询](http://www.bjgjj.gov.cn/ywxtgn/201606/t20160623_3924.html)\n- [社保查询](http://www.bjrbj.gov.cn/csibiz/indinfo/login.jsp)\n- [居住证](https://www.bjjzz.gov.cn)\n- [工作居住证](http://www.bjrbj.gov.cn/bsfw/zxbs/201507/t20150714_51306.html)\n- [地税打印](http://shiju.tax861.gov.cn/bjds/zwgk/bmfw/lxfs/index.asp)\n","source":"_posts/life-2017-09-06-beijing.md","raw":"---\ntitle: 北京生活\ndate: 2017-09-06\ntags: [生活, 北京]\n---\n\n- [公积金查询](http://www.bjgjj.gov.cn/ywxtgn/201606/t20160623_3924.html)\n- [社保查询](http://www.bjrbj.gov.cn/csibiz/indinfo/login.jsp)\n- [居住证](https://www.bjjzz.gov.cn)\n- [工作居住证](http://www.bjrbj.gov.cn/bsfw/zxbs/201507/t20150714_51306.html)\n- [地税打印](http://shiju.tax861.gov.cn/bjds/zwgk/bmfw/lxfs/index.asp)\n","slug":"life-2017-09-06-beijing","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2atv010w5gqofqdpjccn"},{"title":"北京不是定点也可以报销的三甲医院","date":"2017-09-06T00:00:00.000Z","_content":"\n\n\n- 中国医学科学院北京协和医院\n- 首都医科大学附属北京同仁医院\n- 首都医科大学宣武医院\n- 首都医科大学附属北京友谊医院\n- 北京大学第一医院\n- 北京大学人民医院\n- 北京大学第三医院\n- 北京积水潭医院\n- 中国中医科学院广安门医院\n- 首都医科大学附属北京朝阳医院\n- 中日友好医院\n- 北京大学首钢医院\n- 首都医科大学附属北京中医医院\n- 首都医科大学附属北京天坛医院\n- 北京世纪坛医院(北京铁路总医院)\n- 北京市健宫医院\n- 北京市房山区良乡医院\n- 北京市大兴区人民医院\n- 北京市石景山医院\n\n除此之外，报销都需要社保指定定点医院，[北京定点医院查询](http://www.bjrbj.gov.cn/LDJAPP/search/ddyy/index_new.jsp)\n","source":"_posts/life-2017-09-06-fixed-point-hospital.md","raw":"---\ntitle: 北京不是定点也可以报销的三甲医院\ndate: 2017-09-06\ntags: [生活, 北京]\n---\n\n\n\n- 中国医学科学院北京协和医院\n- 首都医科大学附属北京同仁医院\n- 首都医科大学宣武医院\n- 首都医科大学附属北京友谊医院\n- 北京大学第一医院\n- 北京大学人民医院\n- 北京大学第三医院\n- 北京积水潭医院\n- 中国中医科学院广安门医院\n- 首都医科大学附属北京朝阳医院\n- 中日友好医院\n- 北京大学首钢医院\n- 首都医科大学附属北京中医医院\n- 首都医科大学附属北京天坛医院\n- 北京世纪坛医院(北京铁路总医院)\n- 北京市健宫医院\n- 北京市房山区良乡医院\n- 北京市大兴区人民医院\n- 北京市石景山医院\n\n除此之外，报销都需要社保指定定点医院，[北京定点医院查询](http://www.bjrbj.gov.cn/LDJAPP/search/ddyy/index_new.jsp)\n","slug":"life-2017-09-06-fixed-point-hospital","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2atw010y5gqolnd2sknf"},{"title":"网络请求工具 cURL","date":"2017-08-16T00:00:00.000Z","_content":"\n> cRUL 是一种命令行工具，作用是发出网络请求，然后得到和提取数据，显示在 \"标准输出\"（stdout）上面。\n\n<!-- more -->\n## 查看网页源码\n```bash\n$ curl baidu.com\n```\n```html\n<html>\n<meta http-equiv=\"refresh\" content=\"0;url=http://www.baidu.com/\">\n</html>\n```\n如果要把这个网页保存下来，可以使用 `-o` 或 `--output` 参数，这就相当于使用 wget 命令了。\n```bash\n$ curl -o file_name baidu.com\n```\n\n## 自动跳转\n有的网址是自动跳转的。使用`-L`或`--location`参数，curl就会跳转到新的网址。\n```bash\n$ curl -L baidu.com\n```\n\n## 显示头信息\n`-i` 或 `--include` 参数可以显示 **http response** 的头信息，连同网页代码一起。\n`-I` 或 `--head` 参数则是只显示 **http response** 的头信息。\n```bash\n$ curl -i baidu.com\n```\n```html\nHTTP/1.1 200 OK\nDate: Wed, 16 Aug 2017 08:21:49 GMT\nServer: Apache\nLast-Modified: Tue, 12 Jan 2010 13:48:00 GMT\nETag: \"51-47cf7e6ee8400\"\nAccept-Ranges: bytes\nContent-Length: 81\nCache-Control: max-age=86400\nExpires: Thu, 17 Aug 2017 08:21:49 GMT\nConnection: Keep-Alive\nContent-Type: text/html\n\n<html>\n<meta http-equiv=\"refresh\" content=\"0;url=http://www.baidu.com/\">\n</html>\n\n```\n\n## 显示通信过程\n`-v` 或 `--verbose` 参数可以显示一次 http 通信的整个过程，包括端口连接和\n**http request** 头信息。\n```bash\n$ curl -v baidu.com\n```\n```html\n* Rebuilt URL to: baidu.com/\n*   Trying 220.181.57.217...\n* Connected to baidu.com (220.181.57.217) port 80 (#0)\n> GET / HTTP/1.1\n> Host: baidu.com\n> User-Agent: curl/7.43.0\n> Accept: */*\n>\n< HTTP/1.1 200 OK\n< Date: Wed, 16 Aug 2017 08:24:49 GMT\n< Server: Apache\n< Last-Modified: Tue, 12 Jan 2010 13:48:00 GMT\n< ETag: \"51-47cf7e6ee8400\"\n< Accept-Ranges: bytes\n< Content-Length: 81\n< Cache-Control: max-age=86400\n< Expires: Thu, 17 Aug 2017 08:24:49 GMT\n< Connection: Keep-Alive\n< Content-Type: text/html\n<\n<html>\n<meta http-equiv=\"refresh\" content=\"0;url=http://www.baidu.com/\">\n</html>\n* Connection #0 to host baidu.com left intact\n```\n也可以通过 `--trace` 或 `--trace-ascii` 命令查看更详细通信过程，执行后通过制定\n的日志地址查看\n```bash\n$ curl --trace ${log_path} baidu.com\n$ curl --trace-ascii ${log_path} baidu.com\n```\n## HTTP动词\ncurl默认的HTTP动词是GET，使用`-X`参数可以支持其他动词。\n\n```bash\n$ curl -X POST baidu.com\n```\n\n## 增加头信息\n```bash\n# 使用-H 或 --header 可以起到这个作用\n$ curl localhost:8002/test -H \"Content-Type:application/json\"\n```\n\n## 发送表单信息\n```bash\n# GET方法比较简单，网址后直接跟参数\n$ curl localhost:8002/test?data=xxx\n# POST方法通过--data或-d参数实现\n$ curl -X POST localhost:8002/test --data \"name=xxx\" --data \"password=xxx\"\n$ curl -X POST localhost:8002/test -H \"Content-Type:application/x-www-form-urlencoded\" -d \"name=win\"\n# 使用application/json 提交json数据\n$ curl -X POST localhost:8002/test -H \"Content-Type:application/json\" -d '{\"name\":\"wxnacy\"}'\n#如果你的数据没有经过表单编码，还可以让curl为你编码，参数是`--data-urlencode`。\n$ curl -X POST localhost:8002/test --data-urlencode \"data=1 2\"\n```\n\n## 文件上传\n```bash\n$ curl --form upload_field=@localfilename localhost:8002/test\n$ curl --form \"upload_field=@new.txt;type=text/plain\" localhost:8002/test\n```\n\n## Referer字段\n需要添加request头信息referer标示从哪里跳转来的\n```bash\n$ curl localhost:8002/test --referer ${from_url}\n```\n## user-agent字段\n使用 `--user-agent` 或 `-A` 可以模拟发送 user-agent 字段\n```bash\n$ curl localhost:8002/test --user-agent \"device\"\n```\n## cookie\n```bash\n# 发送的cookie可以在response headers中看到\n$ curl localhost:8002/test --cookie \"name=ss\"\n# -c 可以保存服务器返回的cookies到文件中\n$ curl localhost:8002/test -c ${cookie_file}\n# -b 可以使用这个文件作为cookie信息，进行后续的请求。\n$ curl localhost:8002/test -b ${cookie_file}\n```\n\n\n## HTTP认证\n有些网域需要HTTP认证，这时 cURL 需要用到`--user`或 `-u`参数。\n```bash\n# 这时候服务器会在头信息中接收到Authorization字段，值为Basic + name:pass的base64加密数值\n$ curl localhost:8002/test --user name:apss\n```\n\n## 参考资料\n- [curl网站开发指南](http://www.ruanyifeng.com/blog/2011/09/curl.html)\n","source":"_posts/linux-2017-08-16-curl.md","raw":"---\ntitle: 网络请求工具 cURL\ndate: 2017-08-16\ntags: [linux, http]\n---\n\n> cRUL 是一种命令行工具，作用是发出网络请求，然后得到和提取数据，显示在 \"标准输出\"（stdout）上面。\n\n<!-- more -->\n## 查看网页源码\n```bash\n$ curl baidu.com\n```\n```html\n<html>\n<meta http-equiv=\"refresh\" content=\"0;url=http://www.baidu.com/\">\n</html>\n```\n如果要把这个网页保存下来，可以使用 `-o` 或 `--output` 参数，这就相当于使用 wget 命令了。\n```bash\n$ curl -o file_name baidu.com\n```\n\n## 自动跳转\n有的网址是自动跳转的。使用`-L`或`--location`参数，curl就会跳转到新的网址。\n```bash\n$ curl -L baidu.com\n```\n\n## 显示头信息\n`-i` 或 `--include` 参数可以显示 **http response** 的头信息，连同网页代码一起。\n`-I` 或 `--head` 参数则是只显示 **http response** 的头信息。\n```bash\n$ curl -i baidu.com\n```\n```html\nHTTP/1.1 200 OK\nDate: Wed, 16 Aug 2017 08:21:49 GMT\nServer: Apache\nLast-Modified: Tue, 12 Jan 2010 13:48:00 GMT\nETag: \"51-47cf7e6ee8400\"\nAccept-Ranges: bytes\nContent-Length: 81\nCache-Control: max-age=86400\nExpires: Thu, 17 Aug 2017 08:21:49 GMT\nConnection: Keep-Alive\nContent-Type: text/html\n\n<html>\n<meta http-equiv=\"refresh\" content=\"0;url=http://www.baidu.com/\">\n</html>\n\n```\n\n## 显示通信过程\n`-v` 或 `--verbose` 参数可以显示一次 http 通信的整个过程，包括端口连接和\n**http request** 头信息。\n```bash\n$ curl -v baidu.com\n```\n```html\n* Rebuilt URL to: baidu.com/\n*   Trying 220.181.57.217...\n* Connected to baidu.com (220.181.57.217) port 80 (#0)\n> GET / HTTP/1.1\n> Host: baidu.com\n> User-Agent: curl/7.43.0\n> Accept: */*\n>\n< HTTP/1.1 200 OK\n< Date: Wed, 16 Aug 2017 08:24:49 GMT\n< Server: Apache\n< Last-Modified: Tue, 12 Jan 2010 13:48:00 GMT\n< ETag: \"51-47cf7e6ee8400\"\n< Accept-Ranges: bytes\n< Content-Length: 81\n< Cache-Control: max-age=86400\n< Expires: Thu, 17 Aug 2017 08:24:49 GMT\n< Connection: Keep-Alive\n< Content-Type: text/html\n<\n<html>\n<meta http-equiv=\"refresh\" content=\"0;url=http://www.baidu.com/\">\n</html>\n* Connection #0 to host baidu.com left intact\n```\n也可以通过 `--trace` 或 `--trace-ascii` 命令查看更详细通信过程，执行后通过制定\n的日志地址查看\n```bash\n$ curl --trace ${log_path} baidu.com\n$ curl --trace-ascii ${log_path} baidu.com\n```\n## HTTP动词\ncurl默认的HTTP动词是GET，使用`-X`参数可以支持其他动词。\n\n```bash\n$ curl -X POST baidu.com\n```\n\n## 增加头信息\n```bash\n# 使用-H 或 --header 可以起到这个作用\n$ curl localhost:8002/test -H \"Content-Type:application/json\"\n```\n\n## 发送表单信息\n```bash\n# GET方法比较简单，网址后直接跟参数\n$ curl localhost:8002/test?data=xxx\n# POST方法通过--data或-d参数实现\n$ curl -X POST localhost:8002/test --data \"name=xxx\" --data \"password=xxx\"\n$ curl -X POST localhost:8002/test -H \"Content-Type:application/x-www-form-urlencoded\" -d \"name=win\"\n# 使用application/json 提交json数据\n$ curl -X POST localhost:8002/test -H \"Content-Type:application/json\" -d '{\"name\":\"wxnacy\"}'\n#如果你的数据没有经过表单编码，还可以让curl为你编码，参数是`--data-urlencode`。\n$ curl -X POST localhost:8002/test --data-urlencode \"data=1 2\"\n```\n\n## 文件上传\n```bash\n$ curl --form upload_field=@localfilename localhost:8002/test\n$ curl --form \"upload_field=@new.txt;type=text/plain\" localhost:8002/test\n```\n\n## Referer字段\n需要添加request头信息referer标示从哪里跳转来的\n```bash\n$ curl localhost:8002/test --referer ${from_url}\n```\n## user-agent字段\n使用 `--user-agent` 或 `-A` 可以模拟发送 user-agent 字段\n```bash\n$ curl localhost:8002/test --user-agent \"device\"\n```\n## cookie\n```bash\n# 发送的cookie可以在response headers中看到\n$ curl localhost:8002/test --cookie \"name=ss\"\n# -c 可以保存服务器返回的cookies到文件中\n$ curl localhost:8002/test -c ${cookie_file}\n# -b 可以使用这个文件作为cookie信息，进行后续的请求。\n$ curl localhost:8002/test -b ${cookie_file}\n```\n\n\n## HTTP认证\n有些网域需要HTTP认证，这时 cURL 需要用到`--user`或 `-u`参数。\n```bash\n# 这时候服务器会在头信息中接收到Authorization字段，值为Basic + name:pass的base64加密数值\n$ curl localhost:8002/test --user name:apss\n```\n\n## 参考资料\n- [curl网站开发指南](http://www.ruanyifeng.com/blog/2011/09/curl.html)\n","slug":"linux-2017-08-16-curl","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aty01105gqo4hxb4few"},{"title":"Linux CentOS 各个版本启动SSHD服务命令","date":"2017-08-22T00:00:00.000Z","_content":"\n> 本篇介绍如何在 CentOS 系统中怎样启动sshd服务，如何开机自启\n\n## 命令概况\n\nCentOS < 7.x\n```bash\nservice command     # 使用service命令做start|stop|restart sshd\nchkconfig command   # turn on or off 机器自启sshd\n```\n\nCentOS >= 7.x\n```bash\nsystemctl command # 管理 start|stop|start 自启sshd\n```\n\n## CentOS < 7.x\n\n### chkconfig\n```bash\n$ chkconfig sshd on     # 开机自启sshd\n$ chkconfig sshd off    # 开机关闭自启sshd\n$ chkconfig --list sshd # 查看每个运行级别类型中服务的当前状态\n```\n\n### service\n\n```bash\n$ service sshd start | stop | restart\nor\n$ /etc/init.d/sshd start | stop | restart\n```\n\n## CentOS >= 7.x\n\n```bash\n$ systemctl enable sshd.service     # 开机自启sshd\n$ systemctl disable sshd.service    # 开机关闭自启sshd\n$ systemctl start sshd.service      # 启动sshd\n$ systemctl restart sshd.service    # 重启\n$ systemctl stop sshd.service       # 停止\n$ systemctl reload sshd.service     # 重新加载\n$ systemctl status sshd.service     # 查看启动状态\n```\n","source":"_posts/linux-2017-08-22-centos-start-stop-restart-sshd.md","raw":"---\ntitle: Linux CentOS 各个版本启动SSHD服务命令\ndate: 2017-08-22\ntags: [linux]\n---\n\n> 本篇介绍如何在 CentOS 系统中怎样启动sshd服务，如何开机自启\n\n## 命令概况\n\nCentOS < 7.x\n```bash\nservice command     # 使用service命令做start|stop|restart sshd\nchkconfig command   # turn on or off 机器自启sshd\n```\n\nCentOS >= 7.x\n```bash\nsystemctl command # 管理 start|stop|start 自启sshd\n```\n\n## CentOS < 7.x\n\n### chkconfig\n```bash\n$ chkconfig sshd on     # 开机自启sshd\n$ chkconfig sshd off    # 开机关闭自启sshd\n$ chkconfig --list sshd # 查看每个运行级别类型中服务的当前状态\n```\n\n### service\n\n```bash\n$ service sshd start | stop | restart\nor\n$ /etc/init.d/sshd start | stop | restart\n```\n\n## CentOS >= 7.x\n\n```bash\n$ systemctl enable sshd.service     # 开机自启sshd\n$ systemctl disable sshd.service    # 开机关闭自启sshd\n$ systemctl start sshd.service      # 启动sshd\n$ systemctl restart sshd.service    # 重启\n$ systemctl stop sshd.service       # 停止\n$ systemctl reload sshd.service     # 重新加载\n$ systemctl status sshd.service     # 查看启动状态\n```\n","slug":"linux-2017-08-22-centos-start-stop-restart-sshd","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2atz01125gqoacswovmj"},{"title":"Linux 远程文件传输 SFTP 和 SCP","date":"2017-08-22T00:00:00.000Z","_content":"\n> 熟悉linux的朋友都知道 SSH 可以登录远程服务器进行工作，但是如果想从远程服务器下载文件或上传到服务器呢，SSH 就做不到了，这时候我们可以用 SFTP 和 SCP 完成任务，这两个指令也是使用 SSH 的通道（Port 22），只是模拟 FTP 与复制的操作而已。下面我们一一介绍.\n\n<!-- more -->\n## SFTP\n\nSFTP 登陆主机和 SSH 一样，也是用 用户名@主机名的方式连接\n```bash\n$ sftp root@localhost\nroot@localhost's password: # 输入密码\nsftp> exit # 输入FTP 相关命令\n```\n\n进入主机后，就与一般 FTP 模式下操作方式一样了！下面是具体可用命令:\n### 远程服务器\n```bash\n# 切换某个目录\n$ cd PATH\n\n# 列出当前目录文件名\n$ ls\n\n# 建立目录\n$ mkdir DIR\n\n# 删除目录\n$ rmdir DIR\n\n# 显示当前目录\n$ pwd\n\n# 更改文件或目录的属组\n$ chgrp groupname PATH\n\n# 更改文件或目录的属主\n$ chown username PATH\n\n# 更改文件或目录的权限\n$ chmod 664 PATH\n\n# 建立连接文件\n$ ln oldname newname\n\n# 删除文件或目录\n$ rm PATH\n\n# 更改文件或目录名称\n$ rename oldname newname\n\n# 离开远程主机\n$ exit | bye | quit\n```\n\n### 本机\n都在普通命令前加上l(L的小写)\n```bash\n# 切换某个目录\n$ lcd PATH\n\n# 列出当前目录文件名\n$ lls\n\n# 建立目录\n$ lmkdir DIR\n\n\n# 显示当前目录\n$ lpwd\n```\n\n### 上传下载操作\n\n```bash\n# 将文件由本机上传到远程主机\n$ put [本机目录或文件] [远程]\n$ put [本机目录或文件]\n# 如果用第二种格式，则文件会上传到远程主机当前目录下\n\n# 将文件由远程主机下载到本地\n$ get [远程目录或文件] [本地]\n$ get [远程目录或文件]\n# 如果用第二种格式，则文件会下载到本地当前目录下\n\nput 和 get 都可以使用通配符 如: get * ,put *.pem\n```\n\n就整体而言，如果不考虑图形接口，SFTP 在 Linux 中完全可以取代 FTP 了，因为所有功能都已经涵盖\n\n## 文件异地直接复制: SCP\n\n通常使用 SFTP 是因为可能还不知道服务器上面存在文件的信息，如果已经知道服务器上的文件名和地址，那么最简单的文件传输方式 SCP 指令\n\n```bash\n$ scp [-pr] [-l 速率] file [账号@]主机:目录名 # 上传\n$ scp [-pr] [-l 速率] [账号@主机]:file 目录名 # 下载\n\n# 参数\n-p : 保留文件原有的权限信息\n-r : 复制来源为目录时,可以复制整个目录(包含子目录)\n-l : 可以限制传输的速率,单位为 Kbits/s , 例如 [-l 800 ] 代表传输速率 100Kbytes/s\n```\n","source":"_posts/linux-2017-08-22-sftp-scp.md","raw":"---\ntitle: Linux 远程文件传输 SFTP 和 SCP\ndate: 2017-08-22\ntags: [linux]\n---\n\n> 熟悉linux的朋友都知道 SSH 可以登录远程服务器进行工作，但是如果想从远程服务器下载文件或上传到服务器呢，SSH 就做不到了，这时候我们可以用 SFTP 和 SCP 完成任务，这两个指令也是使用 SSH 的通道（Port 22），只是模拟 FTP 与复制的操作而已。下面我们一一介绍.\n\n<!-- more -->\n## SFTP\n\nSFTP 登陆主机和 SSH 一样，也是用 用户名@主机名的方式连接\n```bash\n$ sftp root@localhost\nroot@localhost's password: # 输入密码\nsftp> exit # 输入FTP 相关命令\n```\n\n进入主机后，就与一般 FTP 模式下操作方式一样了！下面是具体可用命令:\n### 远程服务器\n```bash\n# 切换某个目录\n$ cd PATH\n\n# 列出当前目录文件名\n$ ls\n\n# 建立目录\n$ mkdir DIR\n\n# 删除目录\n$ rmdir DIR\n\n# 显示当前目录\n$ pwd\n\n# 更改文件或目录的属组\n$ chgrp groupname PATH\n\n# 更改文件或目录的属主\n$ chown username PATH\n\n# 更改文件或目录的权限\n$ chmod 664 PATH\n\n# 建立连接文件\n$ ln oldname newname\n\n# 删除文件或目录\n$ rm PATH\n\n# 更改文件或目录名称\n$ rename oldname newname\n\n# 离开远程主机\n$ exit | bye | quit\n```\n\n### 本机\n都在普通命令前加上l(L的小写)\n```bash\n# 切换某个目录\n$ lcd PATH\n\n# 列出当前目录文件名\n$ lls\n\n# 建立目录\n$ lmkdir DIR\n\n\n# 显示当前目录\n$ lpwd\n```\n\n### 上传下载操作\n\n```bash\n# 将文件由本机上传到远程主机\n$ put [本机目录或文件] [远程]\n$ put [本机目录或文件]\n# 如果用第二种格式，则文件会上传到远程主机当前目录下\n\n# 将文件由远程主机下载到本地\n$ get [远程目录或文件] [本地]\n$ get [远程目录或文件]\n# 如果用第二种格式，则文件会下载到本地当前目录下\n\nput 和 get 都可以使用通配符 如: get * ,put *.pem\n```\n\n就整体而言，如果不考虑图形接口，SFTP 在 Linux 中完全可以取代 FTP 了，因为所有功能都已经涵盖\n\n## 文件异地直接复制: SCP\n\n通常使用 SFTP 是因为可能还不知道服务器上面存在文件的信息，如果已经知道服务器上的文件名和地址，那么最简单的文件传输方式 SCP 指令\n\n```bash\n$ scp [-pr] [-l 速率] file [账号@]主机:目录名 # 上传\n$ scp [-pr] [-l 速率] [账号@主机]:file 目录名 # 下载\n\n# 参数\n-p : 保留文件原有的权限信息\n-r : 复制来源为目录时,可以复制整个目录(包含子目录)\n-l : 可以限制传输的速率,单位为 Kbits/s , 例如 [-l 800 ] 代表传输速率 100Kbytes/s\n```\n","slug":"linux-2017-08-22-sftp-scp","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2au101145gqo0mug1069"},{"title":"Linux SSH 登陆远程服务器和无密码操作","date":"2017-08-23T00:00:00.000Z","_content":"\n<!-- toc -->\n<!-- more -->\n\n## 使用\n\n```bash\n$ ssh [-f] [-o 参数项目] [-p 非正规埠口] [账号@]IP [指令]\n\n选项与参数：\n-f ： 需要配合后面的 [指令] ，不登入远程主机直接发送一个指令过去而已；\n-o 参数项目：主要的参数项目有：\n\tConnectTimeout=秒数 ：联机等待的秒数，减少等待的时间\n\tStrictHostKeyChecking=[yes|no|ask]：预设是 ask，若要让 public key\n           主动加入 known_hosts ，则可以设定为 no 即可。\n-p ：如果你的 sshd 服务启动在非正规的埠口 (22)，需使用此项目；\n[指令] ：不登入远程主机，直接发送指令过去。但与 -f 意义不太相同。\n\n```\n\n使用root用户登录远程主机\n```bash\n$ ssh root@server\n```\n\n如果本机用户和想要登录的用户相同则可以直接输入地址登陆(但不建议这样做)\n```bash\n$ ssh server\n```\n\n登入对方主机执行过指令后立刻离开的方式\n```bash\n$ ssh student@127.0.0.1 find / &> ~/find1.log\n\n# 此时你会发现怎么画面卡住了？这是因为上头的指令会造成，你已经登入远程主机，\n# 但是执行的指令尚未跑完，因此你会在等待当中。那如何指定系统自己跑？\n```\n\n与上题相同，但是让对方主机自己跑该指令，你立刻回到近端主机继续工作\n```bash\n$ ssh -f student@127.0.0.1 find / &> ~/find1.log\n# 此时你会立刻注销 127.0.0.1 ，但 find 指令会自己在远程服务器跑喔！\n```\n\n删除掉 known_hosts 后，重新使用 root 联机到本机，且自动加上公钥记录\n```bash\n$ rm ~/.ssh/known_hosts\n$ ssh -o StrictHostKeyChecking=no root@localhost\n\nWarning: Permanently added 'localhost' (RSA) to the list of known hosts.\nroot@localhost's password:\n# 如上所示，不会问你 yes 或 no 啦！直接会写入 ~/.ssh/known_hosts 当中！\n```\n\n## sshd 服务器细部设定\n基本上，所有的 sshd 服务器详细设定都放在 `/etc/ssh/sshd_config` 里面！不过，每个 Linux distribution 的预设设定都不太相同，所以我们有必要来了解一下整个设定值的意义为何才好！ 同时请注意，在预设的档案内，只要是预设有出现且被批注的设定值 (设定值前面加 #)，即为『默认值！』，你可以依据它来修改的哩。\n```bash\n$ vim /etc/ssh/sshd_config\n\n# 1. 关于 SSH Server 的整体设定，包含使用的 port 啦，以及使用的密码演算方式\n# Port 22\n# SSH 预设使用 22 这个port，也可以使用多个port，即重复使用 port 这个设定项目！\n# 例如想要开放 sshd 在 22 与 443 ，则多加一行内容为：『 Port 443 』\n# 然后重新启动 sshd 这样就好了！不过，不建议修改 port number 啦！\n\nProtocol 2\n# 选择的 SSH 协议版本，可以是 1 也可以是 2 ，CentOS 5.x 预设是仅支援 V2。\n# 如果想要支持旧版 V1 ，就得要使用『 Protocol 2,1 』才行。\n\n# ListenAddress 0.0.0.0\n# 监听的主机适配器！举个例子来说，如果你有两个 IP，分别是 192.168.1.100 及\n# 192.168.100.254，假设你只想要让 192.168.1.100 可以监听 sshd ，那就这样写：\n# 『 ListenAddress 192.168.1.100 』默认值是监听所有接口的 SSH 要求\n\n# PidFile /var/run/sshd.pid\n# 可以放置 SSHD 这个 PID 的档案！上述为默认值\n\n# LoginGraceTime 2m\n# 当使用者连上 SSH server 之后，会出现输入密码的画面，在该画面中，\n# 在多久时间内没有成功连上 SSH server 就强迫断线！若无单位则默认时间为秒！\n\n# Compression delayed\n# 指定何时开始使用压缩数据模式进行传输。有 yes, no 与登入后才将数据压缩 (delayed)\n\n# 2. 说明主机的 Private Key 放置的档案，预设使用下面的档案即可！\n# HostKey /etc/ssh/ssh_host_key        # SSH version 1 使用的私钥\n# HostKey /etc/ssh/ssh_host_rsa_key    # SSH version 2 使用的 RSA 私钥\n# HostKey /etc/ssh/ssh_host_dsa_key    # SSH version 2 使用的 DSA 私钥\n# 还记得我们在主机的 SSH 联机流程里面谈到的，这里就是 Host Key ～\n\n# 3. 关于登录文件的讯息数据放置与 daemon 的名称！\nSyslogFacility AUTHPRIV\n# 当有人使用 SSH 登入系统的时候，SSH 会记录信息，这个信息要记录在什么 daemon name\n# 底下？预设是以 AUTH 来设定的，即是 /var/log/secure 里面！什么？忘记了！\n# 回到 Linux 基础去翻一下。其他可用的 daemon name 为：DAEMON,USER,AUTH,\n# LOCAL0,LOCAL1,LOCAL2,LOCAL3,LOCAL4,LOCAL5,\n\n# LogLevel INFO\n# 登录记录的等级！嘿嘿！任何讯息！同样的，忘记了就回去参考！\n\n# 4. 安全设定项目！极重要！\n# 4.1 登入设定部分\n# PermitRootLogin yes\n# 是否允许 root 登入！预设是允许的，但是建议设定成 no！\n\n# StrictModes yes\n# 是否让 sshd 去检查用户家目录或相关档案的权限数据，\n# 这是为了担心使用者将某些重要档案的权限设错，可能会导致一些问题所致。\n# 例如使用者的 ~.ssh/ 权限设错时，某些特殊情况下会不许用户登入\n\n# PubkeyAuthentication yes\n# AuthorizedKeysFile      .ssh/authorized_keys\n# 是否允许用户自行使用成对的密钥系统进行登入行为，仅针对 version 2。\n# 至于自制的公钥数据就放置于用户家目录下的 .ssh/authorized_keys 内\n\nPasswordAuthentication yes\n# 密码验证当然是需要的！所以这里写 yes 啰！\n\n# PermitEmptyPasswords no\n# 若上面那一项如果设定为 yes 的话，这一项就最好设定为 no ，\n# 这个项目在是否允许以空的密码登入！当然不许！\n\n# 4.2 认证部分\n# RhostsAuthentication no\n# 本机系统不使用 .rhosts，因为仅使用 .rhosts太不安全了，所以这里一定要设定为 no\n\n# IgnoreRhosts yes\n# 是否取消使用 ~/.ssh/.rhosts 来做为认证！当然是！\n\n# RhostsRSAAuthentication no #\n# 这个选项是专门给 version 1 用的，使用 rhosts 档案在 /etc/hosts.equiv\n# 配合 RSA 演算方式来进行认证！不要使用啊！\n\n# HostbasedAuthentication no\n# 这个项目与上面的项目类似，不过是给 version 2 使用的！\n\n# IgnoreUserKnownHosts no\n# 是否忽略家目录内的 ~/.ssh/known_hosts 这个档案所记录的主机内容？\n# 当然不要忽略，所以这里就是 no 啦！\n\nChallengeResponseAuthentication no\n# 允许任何的密码认证！所以，任何 login.conf 规定的认证方式，均可适用！\n# 但目前我们比较喜欢使用 PAM 模块帮忙管理认证，因此这个选项可以设定为 no 喔！\n\nUsePAM yes\n# 利用 PAM 管理使用者认证有很多好处，可以记录与管理。\n# 所以这里我们建议你使用 UsePAM 且 ChallengeResponseAuthentication 设定为 no\n　\n# 4.3 与 Kerberos 有关的参数设定！因为我们没有 Kerberos 主机，所以底下不用设定！\n# KerberosAuthentication no\n# KerberosOrLocalPasswd yes\n# KerberosTicketCleanup yes\n# KerberosTgtPassing no\n　\n# 4.4 底下是有关在 X-Window 底下使用的相关设定！\nX11Forwarding yes\n# X11DisplayOffset 10\n# X11UseLocalhost yes\n# 比较重要的是 X11Forwarding 项目，他可以让窗口的数据透过 ssh 信道来传送喔！\n# 在本章后面比较进阶的 ssh 使用方法中会谈到。\n\n# 4.5 登入后的项目：\n# PrintMotd yes\n# 登入后是否显示出一些信息呢？例如上次登入的时间、地点等等，预设是 yes\n# 亦即是打印出 /etc/motd 这个档案的内容。但是，如果为了安全，可以考虑改为 no ！\n\n# PrintLastLog yes\n# 显示上次登入的信息！可以啊！预设也是 yes ！\n\n# TCPKeepAlive yes\n# 当达成联机后，服务器会一直传送 TCP 封包给客户端藉以判断对方式否一直存在联机。\n# 不过，如果联机时中间的路由器暂时停止服务几秒钟，也会让联机中断喔！\n# 在这个情况下，任何一端死掉后，SSH可以立刻知道！而不会有僵尸程序的发生！\n# 但如果你的网络或路由器常常不稳定，那么可以设定为 no 的啦！\n\nUsePrivilegeSeparation yes\n# 是否权限较低的程序来提供用户操作。我们知道 sshd 启动在 port 22 ，\n# 因此启动的程序是属于 root 的身份。那么当 student 登入后，这个设定值\n# 会让 sshd 产生一个属于 sutdent 的 sshd 程序来使用，对系统较安全\n\nMaxStartups 10\n# 同时允许几个尚未登入的联机画面？当我们连上 SSH ，但是尚未输入密码时，\n# 这个时候就是我们所谓的联机画面啦！在这个联机画面中，为了保护主机，\n# 所以需要设定最大值，预设最多十个联机画面，而已经建立联机的不计算在这十个当中\n\n# 4.6 关于用户抵挡的设定项目：\nDenyUsers *\n# 设定受抵挡的使用者名称，如果是全部的使用者，那就是全部挡吧！\n# 若是部分使用者，可以将该账号填入！例如下列！\nDenyUsers test\n\nDenyGroups test\n# 与 DenyUsers 相同！仅抵挡几个群组而已！\n\n# 5. 关于 SFTP 服务与其他的设定项目！\nSubsystem       sftp    /usr/lib/ssh/sftp-server\n# UseDNS yes\n# 一般来说，为了要判断客户端来源是正常合法的，因此会使用 DNS 去反查客户端的主机名\n# 不过如果是在内网互连，这项目设定为 no 会让联机达成速度比较快。\n```\n基本上，CentOS 预设的 sshd 服务已经算是挺安全的了，不过还不够！建议你 (1)将 root 的登入权限取消； (2)将 ssh 版本设定为 2 。其他的设定值就请你依照自己的喜好来设定了。 通常不建议进行随便修改啦！另外，如果你修改过上面这个档案(/etc/ssh/sshd_config)，那么就必需要重新启动一次 sshd 这个 daemon 才行！亦即是：\n```bash\n$ /etc/init.d/sshd restart\n```\n\n## 制作不用密码可立即登入的 ssh 用户\n\n三个步骤\n```bash\n1、客户端建立两把钥匙：想一想，在密钥系统中，是公钥比较重要还是私钥比较重要？当然是私钥比较重要！因此私钥才是解密的关键啊！所以啰，这两把钥匙当然得在发起联机的客户端建置才对。利用的指令为 ssh-keygen 这个命令；\n\n2、客户端放置好私钥档案：将 Private Key 放在 Client 上面的家目录，亦即 $HOME/.ssh/ ， 并且得要注意权限喔！\n\n3、将公钥放置服务器端的正确目录与文件名去：最后，将那把 Public Key 放在任何一个你想要用来登入的服务器端的某 User 的家目录内之 .ssh/ 里面的认证档案即可完成整个程序。\n```\n\n### 1. 客户端建立两把钥匙\n\n建立的方法很简单，在 clientlinux.centos.vbird 这部主机上面以 vbirdtsai 的身份来建立两把钥匙即可。 不过，需要注意的是，我们有多种密码算法，如果不指定特殊的算法，则默认以 RSA 算法来处理：\n```bash\n$ ssh-keygen [-t rsa|dsa] <==可选 rsa 或 dsa\n$ ssh-keygen  <==用预设的方法建立密钥\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/home/wxnacy/.ssh/id_rsa): <==按 enter\nCreated directory '/home/wxnacy/.ssh'. <==此目录若不存在则会主动建立\nEnter passphrase (empty for no passphrase): <==按 Enter 不给密码\nEnter same passphrase again: <==再输入一次 Enter 吧！\nYour identification has been saved in /home/wxnacy/.ssh/id_rsa. <==私钥档\nYour public key has been saved in /home/wxnacy/.ssh/id_rsa.pub. <==公钥档\nThe key fingerprint is:\n0f:d3:e7:1a:1c:bd:5c:03:f1:19:f1:22:df:9b:cc:08 wxnacy\n\n$ ls -ld ~/.ssh; ls -l ~/.ssh\ndrwx------. 2 wxnacy wxnacy 4096 2017-07-25 12:58 /home/wxnacy/.ssh\n-rw-------. 1 wxnacy wxnacy 1675 2017-07-25 12:58 id_rsa      <==私钥档\n-rw-r--r--. 1 wxnacy wxnacy  416 2017-07-25 12:58 id_rsa.pub  <==公钥档\n```\n请注意上面喔，我的身份是 wxnacy ，所以当我执行 ssh-keygen 时，才会在我的家目录底下的 .ssh/ 这个目录里面产生所需要的两把 Keys ，分别是私钥 (id_rsa) 与公钥 (id_rsa.pub)。 ~/.ssh/ 目录必须要是 700 的权限才行！另外一个要特别注意的就是那个 id_rsa 的档案权限啦！他必须要是 -rw------- 且属于 vbirdtsai 自己才行！否则在未来密钥比对的过程当中，可能会被判定为危险而无法成功的以公私钥成对档案的机制来达成联机喔。 其实，建立私钥后预设的权限与文件名放置位置都是正确的，你只要检查过没问题即可。\n\n### 2. 将公钥档案数据上传到服务器上\n\n那如何上传呢？最简单的方法当然就是使用 scp 嘛\n```bash\n$ scp ~/.ssh/id_rsa.pub root@192.168.100.254:~\n```\n\n### 3. 将公钥放置服务器端的正确目录与文件名\n\n还记得 sshd_config 里面谈到的 AuthorizedKeysFile 这个设定值吧？该设定值就是在指定公钥数据应该要放置的文件名啰！所以，我们必须要到服务器端的 dmtsai 这个用户身份下，将刚刚上传的 id_rsa.pub 数据附加到 authorized_keys 这个档案内才行。作法有点像这样\n\n```bash\n# 1. 建立 ~/.ssh 档案，注意权限需要为 700 喔！\n$ mkdir .ssh; chmod 700 .ssh\n\n# 2. 将公钥档案内的数据使用 cat 转存到 authorized_keys 内\n$ cat id_rsa.pub >> .ssh/authorized_keys\n$ chmod 644 .ssh/authorized_keys\n```\n接下来在用 ssh 登陆下就不再需要密码了\n\n[原文](http://cn.linux.vbird.org/linux_server/0310telnetssh.php#new_serverkey)\n","source":"_posts/linux-2017-08-23-ssh.md","raw":"---\ntitle: Linux SSH 登陆远程服务器和无密码操作\ndate: 2017-08-23\ntags: [linux, ssh]\n---\n\n<!-- toc -->\n<!-- more -->\n\n## 使用\n\n```bash\n$ ssh [-f] [-o 参数项目] [-p 非正规埠口] [账号@]IP [指令]\n\n选项与参数：\n-f ： 需要配合后面的 [指令] ，不登入远程主机直接发送一个指令过去而已；\n-o 参数项目：主要的参数项目有：\n\tConnectTimeout=秒数 ：联机等待的秒数，减少等待的时间\n\tStrictHostKeyChecking=[yes|no|ask]：预设是 ask，若要让 public key\n           主动加入 known_hosts ，则可以设定为 no 即可。\n-p ：如果你的 sshd 服务启动在非正规的埠口 (22)，需使用此项目；\n[指令] ：不登入远程主机，直接发送指令过去。但与 -f 意义不太相同。\n\n```\n\n使用root用户登录远程主机\n```bash\n$ ssh root@server\n```\n\n如果本机用户和想要登录的用户相同则可以直接输入地址登陆(但不建议这样做)\n```bash\n$ ssh server\n```\n\n登入对方主机执行过指令后立刻离开的方式\n```bash\n$ ssh student@127.0.0.1 find / &> ~/find1.log\n\n# 此时你会发现怎么画面卡住了？这是因为上头的指令会造成，你已经登入远程主机，\n# 但是执行的指令尚未跑完，因此你会在等待当中。那如何指定系统自己跑？\n```\n\n与上题相同，但是让对方主机自己跑该指令，你立刻回到近端主机继续工作\n```bash\n$ ssh -f student@127.0.0.1 find / &> ~/find1.log\n# 此时你会立刻注销 127.0.0.1 ，但 find 指令会自己在远程服务器跑喔！\n```\n\n删除掉 known_hosts 后，重新使用 root 联机到本机，且自动加上公钥记录\n```bash\n$ rm ~/.ssh/known_hosts\n$ ssh -o StrictHostKeyChecking=no root@localhost\n\nWarning: Permanently added 'localhost' (RSA) to the list of known hosts.\nroot@localhost's password:\n# 如上所示，不会问你 yes 或 no 啦！直接会写入 ~/.ssh/known_hosts 当中！\n```\n\n## sshd 服务器细部设定\n基本上，所有的 sshd 服务器详细设定都放在 `/etc/ssh/sshd_config` 里面！不过，每个 Linux distribution 的预设设定都不太相同，所以我们有必要来了解一下整个设定值的意义为何才好！ 同时请注意，在预设的档案内，只要是预设有出现且被批注的设定值 (设定值前面加 #)，即为『默认值！』，你可以依据它来修改的哩。\n```bash\n$ vim /etc/ssh/sshd_config\n\n# 1. 关于 SSH Server 的整体设定，包含使用的 port 啦，以及使用的密码演算方式\n# Port 22\n# SSH 预设使用 22 这个port，也可以使用多个port，即重复使用 port 这个设定项目！\n# 例如想要开放 sshd 在 22 与 443 ，则多加一行内容为：『 Port 443 』\n# 然后重新启动 sshd 这样就好了！不过，不建议修改 port number 啦！\n\nProtocol 2\n# 选择的 SSH 协议版本，可以是 1 也可以是 2 ，CentOS 5.x 预设是仅支援 V2。\n# 如果想要支持旧版 V1 ，就得要使用『 Protocol 2,1 』才行。\n\n# ListenAddress 0.0.0.0\n# 监听的主机适配器！举个例子来说，如果你有两个 IP，分别是 192.168.1.100 及\n# 192.168.100.254，假设你只想要让 192.168.1.100 可以监听 sshd ，那就这样写：\n# 『 ListenAddress 192.168.1.100 』默认值是监听所有接口的 SSH 要求\n\n# PidFile /var/run/sshd.pid\n# 可以放置 SSHD 这个 PID 的档案！上述为默认值\n\n# LoginGraceTime 2m\n# 当使用者连上 SSH server 之后，会出现输入密码的画面，在该画面中，\n# 在多久时间内没有成功连上 SSH server 就强迫断线！若无单位则默认时间为秒！\n\n# Compression delayed\n# 指定何时开始使用压缩数据模式进行传输。有 yes, no 与登入后才将数据压缩 (delayed)\n\n# 2. 说明主机的 Private Key 放置的档案，预设使用下面的档案即可！\n# HostKey /etc/ssh/ssh_host_key        # SSH version 1 使用的私钥\n# HostKey /etc/ssh/ssh_host_rsa_key    # SSH version 2 使用的 RSA 私钥\n# HostKey /etc/ssh/ssh_host_dsa_key    # SSH version 2 使用的 DSA 私钥\n# 还记得我们在主机的 SSH 联机流程里面谈到的，这里就是 Host Key ～\n\n# 3. 关于登录文件的讯息数据放置与 daemon 的名称！\nSyslogFacility AUTHPRIV\n# 当有人使用 SSH 登入系统的时候，SSH 会记录信息，这个信息要记录在什么 daemon name\n# 底下？预设是以 AUTH 来设定的，即是 /var/log/secure 里面！什么？忘记了！\n# 回到 Linux 基础去翻一下。其他可用的 daemon name 为：DAEMON,USER,AUTH,\n# LOCAL0,LOCAL1,LOCAL2,LOCAL3,LOCAL4,LOCAL5,\n\n# LogLevel INFO\n# 登录记录的等级！嘿嘿！任何讯息！同样的，忘记了就回去参考！\n\n# 4. 安全设定项目！极重要！\n# 4.1 登入设定部分\n# PermitRootLogin yes\n# 是否允许 root 登入！预设是允许的，但是建议设定成 no！\n\n# StrictModes yes\n# 是否让 sshd 去检查用户家目录或相关档案的权限数据，\n# 这是为了担心使用者将某些重要档案的权限设错，可能会导致一些问题所致。\n# 例如使用者的 ~.ssh/ 权限设错时，某些特殊情况下会不许用户登入\n\n# PubkeyAuthentication yes\n# AuthorizedKeysFile      .ssh/authorized_keys\n# 是否允许用户自行使用成对的密钥系统进行登入行为，仅针对 version 2。\n# 至于自制的公钥数据就放置于用户家目录下的 .ssh/authorized_keys 内\n\nPasswordAuthentication yes\n# 密码验证当然是需要的！所以这里写 yes 啰！\n\n# PermitEmptyPasswords no\n# 若上面那一项如果设定为 yes 的话，这一项就最好设定为 no ，\n# 这个项目在是否允许以空的密码登入！当然不许！\n\n# 4.2 认证部分\n# RhostsAuthentication no\n# 本机系统不使用 .rhosts，因为仅使用 .rhosts太不安全了，所以这里一定要设定为 no\n\n# IgnoreRhosts yes\n# 是否取消使用 ~/.ssh/.rhosts 来做为认证！当然是！\n\n# RhostsRSAAuthentication no #\n# 这个选项是专门给 version 1 用的，使用 rhosts 档案在 /etc/hosts.equiv\n# 配合 RSA 演算方式来进行认证！不要使用啊！\n\n# HostbasedAuthentication no\n# 这个项目与上面的项目类似，不过是给 version 2 使用的！\n\n# IgnoreUserKnownHosts no\n# 是否忽略家目录内的 ~/.ssh/known_hosts 这个档案所记录的主机内容？\n# 当然不要忽略，所以这里就是 no 啦！\n\nChallengeResponseAuthentication no\n# 允许任何的密码认证！所以，任何 login.conf 规定的认证方式，均可适用！\n# 但目前我们比较喜欢使用 PAM 模块帮忙管理认证，因此这个选项可以设定为 no 喔！\n\nUsePAM yes\n# 利用 PAM 管理使用者认证有很多好处，可以记录与管理。\n# 所以这里我们建议你使用 UsePAM 且 ChallengeResponseAuthentication 设定为 no\n　\n# 4.3 与 Kerberos 有关的参数设定！因为我们没有 Kerberos 主机，所以底下不用设定！\n# KerberosAuthentication no\n# KerberosOrLocalPasswd yes\n# KerberosTicketCleanup yes\n# KerberosTgtPassing no\n　\n# 4.4 底下是有关在 X-Window 底下使用的相关设定！\nX11Forwarding yes\n# X11DisplayOffset 10\n# X11UseLocalhost yes\n# 比较重要的是 X11Forwarding 项目，他可以让窗口的数据透过 ssh 信道来传送喔！\n# 在本章后面比较进阶的 ssh 使用方法中会谈到。\n\n# 4.5 登入后的项目：\n# PrintMotd yes\n# 登入后是否显示出一些信息呢？例如上次登入的时间、地点等等，预设是 yes\n# 亦即是打印出 /etc/motd 这个档案的内容。但是，如果为了安全，可以考虑改为 no ！\n\n# PrintLastLog yes\n# 显示上次登入的信息！可以啊！预设也是 yes ！\n\n# TCPKeepAlive yes\n# 当达成联机后，服务器会一直传送 TCP 封包给客户端藉以判断对方式否一直存在联机。\n# 不过，如果联机时中间的路由器暂时停止服务几秒钟，也会让联机中断喔！\n# 在这个情况下，任何一端死掉后，SSH可以立刻知道！而不会有僵尸程序的发生！\n# 但如果你的网络或路由器常常不稳定，那么可以设定为 no 的啦！\n\nUsePrivilegeSeparation yes\n# 是否权限较低的程序来提供用户操作。我们知道 sshd 启动在 port 22 ，\n# 因此启动的程序是属于 root 的身份。那么当 student 登入后，这个设定值\n# 会让 sshd 产生一个属于 sutdent 的 sshd 程序来使用，对系统较安全\n\nMaxStartups 10\n# 同时允许几个尚未登入的联机画面？当我们连上 SSH ，但是尚未输入密码时，\n# 这个时候就是我们所谓的联机画面啦！在这个联机画面中，为了保护主机，\n# 所以需要设定最大值，预设最多十个联机画面，而已经建立联机的不计算在这十个当中\n\n# 4.6 关于用户抵挡的设定项目：\nDenyUsers *\n# 设定受抵挡的使用者名称，如果是全部的使用者，那就是全部挡吧！\n# 若是部分使用者，可以将该账号填入！例如下列！\nDenyUsers test\n\nDenyGroups test\n# 与 DenyUsers 相同！仅抵挡几个群组而已！\n\n# 5. 关于 SFTP 服务与其他的设定项目！\nSubsystem       sftp    /usr/lib/ssh/sftp-server\n# UseDNS yes\n# 一般来说，为了要判断客户端来源是正常合法的，因此会使用 DNS 去反查客户端的主机名\n# 不过如果是在内网互连，这项目设定为 no 会让联机达成速度比较快。\n```\n基本上，CentOS 预设的 sshd 服务已经算是挺安全的了，不过还不够！建议你 (1)将 root 的登入权限取消； (2)将 ssh 版本设定为 2 。其他的设定值就请你依照自己的喜好来设定了。 通常不建议进行随便修改啦！另外，如果你修改过上面这个档案(/etc/ssh/sshd_config)，那么就必需要重新启动一次 sshd 这个 daemon 才行！亦即是：\n```bash\n$ /etc/init.d/sshd restart\n```\n\n## 制作不用密码可立即登入的 ssh 用户\n\n三个步骤\n```bash\n1、客户端建立两把钥匙：想一想，在密钥系统中，是公钥比较重要还是私钥比较重要？当然是私钥比较重要！因此私钥才是解密的关键啊！所以啰，这两把钥匙当然得在发起联机的客户端建置才对。利用的指令为 ssh-keygen 这个命令；\n\n2、客户端放置好私钥档案：将 Private Key 放在 Client 上面的家目录，亦即 $HOME/.ssh/ ， 并且得要注意权限喔！\n\n3、将公钥放置服务器端的正确目录与文件名去：最后，将那把 Public Key 放在任何一个你想要用来登入的服务器端的某 User 的家目录内之 .ssh/ 里面的认证档案即可完成整个程序。\n```\n\n### 1. 客户端建立两把钥匙\n\n建立的方法很简单，在 clientlinux.centos.vbird 这部主机上面以 vbirdtsai 的身份来建立两把钥匙即可。 不过，需要注意的是，我们有多种密码算法，如果不指定特殊的算法，则默认以 RSA 算法来处理：\n```bash\n$ ssh-keygen [-t rsa|dsa] <==可选 rsa 或 dsa\n$ ssh-keygen  <==用预设的方法建立密钥\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/home/wxnacy/.ssh/id_rsa): <==按 enter\nCreated directory '/home/wxnacy/.ssh'. <==此目录若不存在则会主动建立\nEnter passphrase (empty for no passphrase): <==按 Enter 不给密码\nEnter same passphrase again: <==再输入一次 Enter 吧！\nYour identification has been saved in /home/wxnacy/.ssh/id_rsa. <==私钥档\nYour public key has been saved in /home/wxnacy/.ssh/id_rsa.pub. <==公钥档\nThe key fingerprint is:\n0f:d3:e7:1a:1c:bd:5c:03:f1:19:f1:22:df:9b:cc:08 wxnacy\n\n$ ls -ld ~/.ssh; ls -l ~/.ssh\ndrwx------. 2 wxnacy wxnacy 4096 2017-07-25 12:58 /home/wxnacy/.ssh\n-rw-------. 1 wxnacy wxnacy 1675 2017-07-25 12:58 id_rsa      <==私钥档\n-rw-r--r--. 1 wxnacy wxnacy  416 2017-07-25 12:58 id_rsa.pub  <==公钥档\n```\n请注意上面喔，我的身份是 wxnacy ，所以当我执行 ssh-keygen 时，才会在我的家目录底下的 .ssh/ 这个目录里面产生所需要的两把 Keys ，分别是私钥 (id_rsa) 与公钥 (id_rsa.pub)。 ~/.ssh/ 目录必须要是 700 的权限才行！另外一个要特别注意的就是那个 id_rsa 的档案权限啦！他必须要是 -rw------- 且属于 vbirdtsai 自己才行！否则在未来密钥比对的过程当中，可能会被判定为危险而无法成功的以公私钥成对档案的机制来达成联机喔。 其实，建立私钥后预设的权限与文件名放置位置都是正确的，你只要检查过没问题即可。\n\n### 2. 将公钥档案数据上传到服务器上\n\n那如何上传呢？最简单的方法当然就是使用 scp 嘛\n```bash\n$ scp ~/.ssh/id_rsa.pub root@192.168.100.254:~\n```\n\n### 3. 将公钥放置服务器端的正确目录与文件名\n\n还记得 sshd_config 里面谈到的 AuthorizedKeysFile 这个设定值吧？该设定值就是在指定公钥数据应该要放置的文件名啰！所以，我们必须要到服务器端的 dmtsai 这个用户身份下，将刚刚上传的 id_rsa.pub 数据附加到 authorized_keys 这个档案内才行。作法有点像这样\n\n```bash\n# 1. 建立 ~/.ssh 档案，注意权限需要为 700 喔！\n$ mkdir .ssh; chmod 700 .ssh\n\n# 2. 将公钥档案内的数据使用 cat 转存到 authorized_keys 内\n$ cat id_rsa.pub >> .ssh/authorized_keys\n$ chmod 644 .ssh/authorized_keys\n```\n接下来在用 ssh 登陆下就不再需要密码了\n\n[原文](http://cn.linux.vbird.org/linux_server/0310telnetssh.php#new_serverkey)\n","slug":"linux-2017-08-23-ssh","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2au201165gqo5oo78c3v"},{"title":"Linux 硬链接与软连接的增删查","date":"2017-08-28T00:00:00.000Z","_content":"\n\n原文:http://www.cnblogs.com/xiaochaohuashengmi/archive/2011/10/05/2199534.html\n\n> 链接是一种在共享文件和访问它的用户的若干目录项之间建立联系的一种方法。Linux\n中包括两种链接：硬链接(Hard Link)和软链接(Soft Link),软链接又称为符号链接\n（Symbolic link）。符号连接相当于Windows下的快捷方式。\n\n<!-- more -->\n\n## 硬链接\n\n硬链接说白了是一个指针，指向文件索引节点，系统并不为它重新分配 inode。可以用`:ln`\n命令来建立硬链接。\n\n```bash\n语法：\n# existing_file 是待创建链接的文件，new_file 是要创建的连接文件\nln [options] existing_file new_file\nln [options] existing_file new_file\n\n-f 建立时将同名文件删除\n-i 如果有同名文件询问是否替换\n```\n\n尽管硬链接节省空间，也是Linux系统整合文件系统的传统方式，但是存在一下不足之处：\n- 不可以在不同文件系统的文件间建立链接\n- 只有超级用户才可以为目录创建硬链接。\n\n## 软连接\n\n软链接克服了硬链接的不足，没有任何文件系统的限制，任何用户可以创建指向目录的符号\n链接。因而现在更为广泛使用，它具有更大的灵活性，甚至可以跨越不同机器、不同网络对\n文件进行链接。\n\n```bash\nln -s existing_file new_file            # 需要加上-s即可\n```\n\n## 删除\n\n```bash\nrm -rf new_file     # 直接rm掉链接文件即可\n```\n\n","source":"_posts/linux-2017-08-28-ln.md","raw":"---\ntitle: Linux 硬链接与软连接的增删查\ndate: 2017-08-28\ntags: [linux]\n---\n\n\n原文:http://www.cnblogs.com/xiaochaohuashengmi/archive/2011/10/05/2199534.html\n\n> 链接是一种在共享文件和访问它的用户的若干目录项之间建立联系的一种方法。Linux\n中包括两种链接：硬链接(Hard Link)和软链接(Soft Link),软链接又称为符号链接\n（Symbolic link）。符号连接相当于Windows下的快捷方式。\n\n<!-- more -->\n\n## 硬链接\n\n硬链接说白了是一个指针，指向文件索引节点，系统并不为它重新分配 inode。可以用`:ln`\n命令来建立硬链接。\n\n```bash\n语法：\n# existing_file 是待创建链接的文件，new_file 是要创建的连接文件\nln [options] existing_file new_file\nln [options] existing_file new_file\n\n-f 建立时将同名文件删除\n-i 如果有同名文件询问是否替换\n```\n\n尽管硬链接节省空间，也是Linux系统整合文件系统的传统方式，但是存在一下不足之处：\n- 不可以在不同文件系统的文件间建立链接\n- 只有超级用户才可以为目录创建硬链接。\n\n## 软连接\n\n软链接克服了硬链接的不足，没有任何文件系统的限制，任何用户可以创建指向目录的符号\n链接。因而现在更为广泛使用，它具有更大的灵活性，甚至可以跨越不同机器、不同网络对\n文件进行链接。\n\n```bash\nln -s existing_file new_file            # 需要加上-s即可\n```\n\n## 删除\n\n```bash\nrm -rf new_file     # 直接rm掉链接文件即可\n```\n\n","slug":"linux-2017-08-28-ln","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2au301185gqob98mk0qi"},{"title":"Linux 搜索命令 grep","date":"2017-09-11T00:00:00.000Z","_content":"\n> 文件搜索用 find，文本搜索用 grep\n\n<!-- more -->\n\n```bash\n$ grep [-aicv..] [--color=auto] '搜寻字符串' filename\n```\n\n- **-a** 不要忽略二进制数据。\n- **-A&lt;显示列数&gt;** 除了显示符合范本样式的那一行之外，并显示该行之后的内容。\n- **-b** 在显示符合范本样式的那一行之外，并显示该行之前的内容。\n- **-c** 计算符合范本样式的列数。\n- **-C&lt;显示列数&gt;或-&lt;显示列数&gt;**  除了显示符合范本样式的那一列之外，并显示该列之前后的内容。\n- **-d&lt;进行动作&gt;** 当指定要查找的是目录而非文件时，必须使用这项参数，否则grep命令将回报信息并停止动作。\n- **-e&lt;范本样式&gt;** 指定字符串作为查找文件内容的范本样式。\n- **-E** 将范本样式为延伸的普通表示法来使用，意味着使用能使用扩展正则表达式。\n- **-f&lt;范本文件&gt;** 指定范本文件，其内容有一个或多个范本样式，让grep查找符合范本条件的文件内容，格式为每一列的范本样式。\n- **-F** 将范本样式视为固定字符串的列表。\n- **-G** 将范本样式视为普通的表示法来使用。\n- **-h** 在显示符合范本样式的那一列之前，不标示该列所属的文件名称。\n- **-H** 在显示符合范本样式的那一列之前，标示该列的文件名称。\n- **-i** 胡列字符大小写的差别。\n- **-l** 列出文件内容符合指定的范本样式的文件名称。\n- **-L** 列出文件内容不符合指定的范本样式的文件名称。\n- **-n** 在显示符合范本样式的那一列之前，标示出该列的编号。\n- **-q** 不显示任何信息。\n- **-R/-r **此参数的效果和指定&ldquo;-d recurse&rdquo;参数相同。\n- **-s** 不显示错误信息。\n- **-v** 反转查找。\n- **w** 只显示全字符合的列。\n- **-x** 只显示全列符合的列。\n- **-y** 此参数效果跟&ldquo;-i&rdquo;相同。\n- **-o** 只输出文件中匹配到的部分\n","source":"_posts/linux-2017-09-11-grep.md","raw":"---\ntitle: Linux 搜索命令 grep\ndate: 2017-09-11\ntags: [linux]\n---\n\n> 文件搜索用 find，文本搜索用 grep\n\n<!-- more -->\n\n```bash\n$ grep [-aicv..] [--color=auto] '搜寻字符串' filename\n```\n\n- **-a** 不要忽略二进制数据。\n- **-A&lt;显示列数&gt;** 除了显示符合范本样式的那一行之外，并显示该行之后的内容。\n- **-b** 在显示符合范本样式的那一行之外，并显示该行之前的内容。\n- **-c** 计算符合范本样式的列数。\n- **-C&lt;显示列数&gt;或-&lt;显示列数&gt;**  除了显示符合范本样式的那一列之外，并显示该列之前后的内容。\n- **-d&lt;进行动作&gt;** 当指定要查找的是目录而非文件时，必须使用这项参数，否则grep命令将回报信息并停止动作。\n- **-e&lt;范本样式&gt;** 指定字符串作为查找文件内容的范本样式。\n- **-E** 将范本样式为延伸的普通表示法来使用，意味着使用能使用扩展正则表达式。\n- **-f&lt;范本文件&gt;** 指定范本文件，其内容有一个或多个范本样式，让grep查找符合范本条件的文件内容，格式为每一列的范本样式。\n- **-F** 将范本样式视为固定字符串的列表。\n- **-G** 将范本样式视为普通的表示法来使用。\n- **-h** 在显示符合范本样式的那一列之前，不标示该列所属的文件名称。\n- **-H** 在显示符合范本样式的那一列之前，标示该列的文件名称。\n- **-i** 胡列字符大小写的差别。\n- **-l** 列出文件内容符合指定的范本样式的文件名称。\n- **-L** 列出文件内容不符合指定的范本样式的文件名称。\n- **-n** 在显示符合范本样式的那一列之前，标示出该列的编号。\n- **-q** 不显示任何信息。\n- **-R/-r **此参数的效果和指定&ldquo;-d recurse&rdquo;参数相同。\n- **-s** 不显示错误信息。\n- **-v** 反转查找。\n- **w** 只显示全字符合的列。\n- **-x** 只显示全列符合的列。\n- **-y** 此参数效果跟&ldquo;-i&rdquo;相同。\n- **-o** 只输出文件中匹配到的部分\n","slug":"linux-2017-09-11-grep","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2au5011a5gqo3dn8da39"},{"title":"Linux 数据流重定向(Redirection)","date":"2017-09-11T00:00:00.000Z","_content":"\n<!-- toc -->\n<!-- more -->\n## 重定向\n```bash\n标准输入　　(stdin) ：代码为 0 ，使用 < 或 <<\n标准输出　　(stdout)：代码为 1 ，使用 > 或 >>\n标准错误输出(stderr)：代码为 2 ，使用 2> 或 2>>\n```\n\n## 标准输出（stdout）\n*1>* 或 *>* 会将应该输出到屏幕的信息，输入到指定文件中\n```bash\n$ ll > ll.txt       # 此时屏幕不再输出信息，而是输入到 ll.txt 中\n# > 会在每次使用时覆盖相同文件名的内容，如果想要追加内容使用 >>\n```\n\n## 标准输出错误（stderr）\n*2>* 会将错误信息单独输出到指定文件中\n```bash\n$ z                             # 我随便输入了指令\n\npyenv: z: command not found     # 错误信息\n\nThe `z' command exists in these Python versions:\n  2.7.12/envs/env_hamster\n  env_hamster\n\n$ z 2> err.log                  # 使用重定向将错误输出到文件\n```\n如果我们不想将错误单独写到一个文件而是和标准输出一同输出到同一文件中，应该怎么\n做呢\n\n也可能你在了解到标准输出和错误输出后会想当然的用这种写法\n```bash\n$ z > file.log 2> file.log\n```\n这样是错误的，应该两股数据会交叉写入到同一文件中，造成数据混乱，而正确的写法\n应该是这样的\n```bash\n$ z > file.log 2>&1\n$ z &> file.log\n# 两种写法均可\n```\n\n### /dev/null 垃圾桶黑洞装置\n假如有些命令的错误是我们预知的而不想显示出，此时该怎么做呢，我们可以让他消失\n```bash\n$ z 2> /dev/null                # 此时我们将看不到输出的错误信息\n```\n\n## 标准输入（stdin）\n了解 stdout 和 stderr 后我们来看下怎么理解标准输入\n```bash\n$ cat > cat.txt\nhello world\ntest\n# 按下 ctrl + d 离开\n```\n这段命令可以使键盘输入内容重定向的文件中，如果我们想使用 **某个文件内容** 替代\n**键盘输入** 到制定文件中呢，这时候 **<** 就派上用场了\n```bash\n$ cat > cat.txt < ~/.bashrc\n\n$ ll cat.txt ~/.bashrc\n-rw-r--r--  1 wxnacy  staff    42B  8 27 08:14 /Users/wxnacy/.bashrc\n-rw-r--r--  1 wxnacy  staff    42B  9 11 09:50 cat.txt\n```\n通过 **<** 导入的文件我们回它们其实一摸一样，类似复制功能\n\n接下来我们来探讨 **<<**，它并不同与标准输出的追加功能，我们先来看另一个例子，\n当我们使用键盘输入到文件时，如果不想用 `ctrl + d` 来终止程序，而是其他方式可以\n吗，我们来试一下\n```bash\n$ cat > cat.txt << \"eof\"\nhello world\neof                     # 输入该关键字，我们不用输入 ctrl + d 即可终止程序\n```\n现在我们可以给 **<<** 下一个定义 **结束的输入字符**，当然 eof 不是不变的，我们\n也可以指定其他字符串\n","source":"_posts/linux-2017-09-11-redirection.md","raw":"---\ntitle: Linux 数据流重定向(Redirection)\ndate: 2017-09-11\ntags: [linux]\n---\n\n<!-- toc -->\n<!-- more -->\n## 重定向\n```bash\n标准输入　　(stdin) ：代码为 0 ，使用 < 或 <<\n标准输出　　(stdout)：代码为 1 ，使用 > 或 >>\n标准错误输出(stderr)：代码为 2 ，使用 2> 或 2>>\n```\n\n## 标准输出（stdout）\n*1>* 或 *>* 会将应该输出到屏幕的信息，输入到指定文件中\n```bash\n$ ll > ll.txt       # 此时屏幕不再输出信息，而是输入到 ll.txt 中\n# > 会在每次使用时覆盖相同文件名的内容，如果想要追加内容使用 >>\n```\n\n## 标准输出错误（stderr）\n*2>* 会将错误信息单独输出到指定文件中\n```bash\n$ z                             # 我随便输入了指令\n\npyenv: z: command not found     # 错误信息\n\nThe `z' command exists in these Python versions:\n  2.7.12/envs/env_hamster\n  env_hamster\n\n$ z 2> err.log                  # 使用重定向将错误输出到文件\n```\n如果我们不想将错误单独写到一个文件而是和标准输出一同输出到同一文件中，应该怎么\n做呢\n\n也可能你在了解到标准输出和错误输出后会想当然的用这种写法\n```bash\n$ z > file.log 2> file.log\n```\n这样是错误的，应该两股数据会交叉写入到同一文件中，造成数据混乱，而正确的写法\n应该是这样的\n```bash\n$ z > file.log 2>&1\n$ z &> file.log\n# 两种写法均可\n```\n\n### /dev/null 垃圾桶黑洞装置\n假如有些命令的错误是我们预知的而不想显示出，此时该怎么做呢，我们可以让他消失\n```bash\n$ z 2> /dev/null                # 此时我们将看不到输出的错误信息\n```\n\n## 标准输入（stdin）\n了解 stdout 和 stderr 后我们来看下怎么理解标准输入\n```bash\n$ cat > cat.txt\nhello world\ntest\n# 按下 ctrl + d 离开\n```\n这段命令可以使键盘输入内容重定向的文件中，如果我们想使用 **某个文件内容** 替代\n**键盘输入** 到制定文件中呢，这时候 **<** 就派上用场了\n```bash\n$ cat > cat.txt < ~/.bashrc\n\n$ ll cat.txt ~/.bashrc\n-rw-r--r--  1 wxnacy  staff    42B  8 27 08:14 /Users/wxnacy/.bashrc\n-rw-r--r--  1 wxnacy  staff    42B  9 11 09:50 cat.txt\n```\n通过 **<** 导入的文件我们回它们其实一摸一样，类似复制功能\n\n接下来我们来探讨 **<<**，它并不同与标准输出的追加功能，我们先来看另一个例子，\n当我们使用键盘输入到文件时，如果不想用 `ctrl + d` 来终止程序，而是其他方式可以\n吗，我们来试一下\n```bash\n$ cat > cat.txt << \"eof\"\nhello world\neof                     # 输入该关键字，我们不用输入 ctrl + d 即可终止程序\n```\n现在我们可以给 **<<** 下一个定义 **结束的输入字符**，当然 eof 不是不变的，我们\n也可以指定其他字符串\n","slug":"linux-2017-09-11-redirection","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2au6011c5gqob5gyp9rp"},{"title":"使用 expect 交互免输入密码","date":"2017-09-15T00:00:00.000Z","_content":"> Expect是一个免费的编程工具语言，用来实现自动和交互式任务进行通信，而无需人的\n干预。\n\n<!-- more -->\n\n<!-- toc -->\n## 简单的免输入密码\n\n在工作经常会使用 ssh、ftp、 mysql 等命令，但每次输入密码会让事情变的很枯燥，\n重复的事情就要交给脚本去做，这时候我们需要用到 **[expect](http://expect.sourceforge.net/)** ，\n下面我们通过一个例子 *mysql_login* 来说明\n\n\n```bash\n#!/usr/bin/env expect\nset password xxxxx\nset name root\n\nspawn mysql -u$name -p\nexpect \"*assword:*\"\nsend \"$password\\r\"\ninteract\n```\n上边这段脚本是在登录本地 mysql 时，无需输入密码就自动登录\n```bash\n$ expect mysql_login\n```\n执行代码不能用 *sh file* 而是 *expect mysql_login* ，如果你在文件开头加上\n`#!/usr/bin/env expect` 也可以用 `./mysql_login` 来执行\n\n其他语句解释如下：\n\n- **spawn**：spawn是expect的语句，执行命令前都要加这句\n- **expect \"*assword:*\"**：这句意思是交互获取是否返回 password：关键字，因为在\n执行 mysql 时会返回输入 password 的提示 xxxxxxxx password:\n- **send**：将密码发送出去\n- **interact**：代表执行完留在远程控制台，不加这句执行完后返回本地控制台\n\n你可以仿照这段脚本写其他服务自动登录脚本，但是 ssh 无密码登录我推荐使用\n[SSH 登陆远程服务器和无密码操作](/2017/08/23/linux-2017-08-23-ssh/)文章中提到的\n不对称加密登录方式\n\n## 其他用法\n\n### 传入参数\n参数传入跟 bash 一样，都是执行命令后跟参数，如：`./mysql_login p1 p2 p3 p4`\n但是接收有很大不同，在 bash 中我们只需要使用 **$1 $2** 来接收第一个和第二个参数\n但是在 expect 中我们需要用到 **$arg** 关键字来获取参数\n```bash\nputs $argv                      ==> p1 p2 p3 p4     # 输出参数数组\nputs $argc                      ==> 4               # 输出参数个数\nputs [lindex $argv 0]           ==> p1              # 使用 lindex 关键字获取第一个参数\nputs [lrange $argv 0 2]         ==> p1 p2 p3        # 使用 lrange 关键字获取第一个到第三个参数\n```\n\n### 读取设置环境变量\n不同于 bash 通过 export 和 echo 在设置和输出环境变量\nexpect 需要通过 **set** 和 **puts** 进行设置和输出\n并且需要变量名需要用 **env()** 包起来\n```bash\nwxnacy@wxnacydeMacBook-Pro ~/W/w/s/mysql> expect\nexpect1.1> set env(NAME) \"wxnacy\"       # 设置环境变量，NAME 就是在 bash 中用到的环境变量\nwxnacy\nexpect1.2> puts $env(NAME)              # 打印环境变量\nwxnacy\n```\n\n### 流程控制 if\n与绝大多数语言一样 expect 也可以通过 **if** 来控制程序流程，与绝大多数语言不同\n的是 expect 中 **if** 的条件语句是包含在大括号中的，如：`if { name == \"wxnacy\" }`\n```bash\nif { $argc < 1 } {\n    send_user 'Usage: ./mysql_login arg1'\n}\n```\n\n## 参考文献\n- [expect - 自动交互脚本](http://xstarcd.github.io/wiki/shell/expect.html)\n- [expect使用详解](http://blog.51niux.com/?id=55)\n","source":"_posts/linux-2017-09-15-expect.md","raw":"---\ntitle: 使用 expect 交互免输入密码\ndate: 2017-09-15\ntags: [linux, expect]\n---\n> Expect是一个免费的编程工具语言，用来实现自动和交互式任务进行通信，而无需人的\n干预。\n\n<!-- more -->\n\n<!-- toc -->\n## 简单的免输入密码\n\n在工作经常会使用 ssh、ftp、 mysql 等命令，但每次输入密码会让事情变的很枯燥，\n重复的事情就要交给脚本去做，这时候我们需要用到 **[expect](http://expect.sourceforge.net/)** ，\n下面我们通过一个例子 *mysql_login* 来说明\n\n\n```bash\n#!/usr/bin/env expect\nset password xxxxx\nset name root\n\nspawn mysql -u$name -p\nexpect \"*assword:*\"\nsend \"$password\\r\"\ninteract\n```\n上边这段脚本是在登录本地 mysql 时，无需输入密码就自动登录\n```bash\n$ expect mysql_login\n```\n执行代码不能用 *sh file* 而是 *expect mysql_login* ，如果你在文件开头加上\n`#!/usr/bin/env expect` 也可以用 `./mysql_login` 来执行\n\n其他语句解释如下：\n\n- **spawn**：spawn是expect的语句，执行命令前都要加这句\n- **expect \"*assword:*\"**：这句意思是交互获取是否返回 password：关键字，因为在\n执行 mysql 时会返回输入 password 的提示 xxxxxxxx password:\n- **send**：将密码发送出去\n- **interact**：代表执行完留在远程控制台，不加这句执行完后返回本地控制台\n\n你可以仿照这段脚本写其他服务自动登录脚本，但是 ssh 无密码登录我推荐使用\n[SSH 登陆远程服务器和无密码操作](/2017/08/23/linux-2017-08-23-ssh/)文章中提到的\n不对称加密登录方式\n\n## 其他用法\n\n### 传入参数\n参数传入跟 bash 一样，都是执行命令后跟参数，如：`./mysql_login p1 p2 p3 p4`\n但是接收有很大不同，在 bash 中我们只需要使用 **$1 $2** 来接收第一个和第二个参数\n但是在 expect 中我们需要用到 **$arg** 关键字来获取参数\n```bash\nputs $argv                      ==> p1 p2 p3 p4     # 输出参数数组\nputs $argc                      ==> 4               # 输出参数个数\nputs [lindex $argv 0]           ==> p1              # 使用 lindex 关键字获取第一个参数\nputs [lrange $argv 0 2]         ==> p1 p2 p3        # 使用 lrange 关键字获取第一个到第三个参数\n```\n\n### 读取设置环境变量\n不同于 bash 通过 export 和 echo 在设置和输出环境变量\nexpect 需要通过 **set** 和 **puts** 进行设置和输出\n并且需要变量名需要用 **env()** 包起来\n```bash\nwxnacy@wxnacydeMacBook-Pro ~/W/w/s/mysql> expect\nexpect1.1> set env(NAME) \"wxnacy\"       # 设置环境变量，NAME 就是在 bash 中用到的环境变量\nwxnacy\nexpect1.2> puts $env(NAME)              # 打印环境变量\nwxnacy\n```\n\n### 流程控制 if\n与绝大多数语言一样 expect 也可以通过 **if** 来控制程序流程，与绝大多数语言不同\n的是 expect 中 **if** 的条件语句是包含在大括号中的，如：`if { name == \"wxnacy\" }`\n```bash\nif { $argc < 1 } {\n    send_user 'Usage: ./mysql_login arg1'\n}\n```\n\n## 参考文献\n- [expect - 自动交互脚本](http://xstarcd.github.io/wiki/shell/expect.html)\n- [expect使用详解](http://blog.51niux.com/?id=55)\n","slug":"linux-2017-09-15-expect","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2au7011e5gqowspvkp5v"},{"title":"mac清除DNS缓存","date":"2017-08-10T00:00:00.000Z","_content":"\n原文：[https://support.apple.com/zh-cn/HT202516](https://support.apple.com/zh-cn/HT202516)\n## 关于 DNS 缓存\nOS X 会将已解析的 DNS 查询的本地缓存保留一段时间，保留时间由 DNS 服务器定义。有时可能需要立即还原缓存设置并重新查询 DNS 服务器。例如，如果您是网络或服务器管理员且您的 DNS 服务器上的条目最近有更改，您可能需要执行此操作。\n如果您的 Mac 使用的不是您服务器上的最新 DNS 条目，您可重新启动 Mac 以更新其缓存的信息。如果您需要更新使用 OS X 的服务器上的 DNS 条目但又不能重新启动服务器，请使用以下适用于您所使用的 OS X 版本的命令。\n## OS X Yosemite及更新机型\n在 OS X v10.10.4 或更高版本中，请使用以下“终端”命令来还原 DNS 缓存设置：\n```bash\nsudo killall -HUP mDNSResponder\n```\n在 OS X v10.10 至 v10.10.3 中，请使用以下“终端”命令来还原 DNS 缓存设置：\n```bash\nsudo discoveryutil mdnsflushcache\n```\n## OS X Mavericks、Mountain Lion 和 Lion\n在 OS X v10.9.5 及更低版本中，请使用以下“终端”命令来还原 DNS 缓存设置：\n```bash\nsudo killall -HUP mDNSResponder\n```\n## Mac OS X Snow Leopard\n在 OS X v10.6 至 v10.6.8 中，请使用以下“终端”命令来还原 DNS 缓存设置：\n```bash\nsudo dscacheutil -flushcache\n```\n\n\n","source":"_posts/mac-2017-08-10-clear-dns.md","raw":"---\ntitle: mac清除DNS缓存\ndate: 2017-08-10\ntags: [mac]\n---\n\n原文：[https://support.apple.com/zh-cn/HT202516](https://support.apple.com/zh-cn/HT202516)\n## 关于 DNS 缓存\nOS X 会将已解析的 DNS 查询的本地缓存保留一段时间，保留时间由 DNS 服务器定义。有时可能需要立即还原缓存设置并重新查询 DNS 服务器。例如，如果您是网络或服务器管理员且您的 DNS 服务器上的条目最近有更改，您可能需要执行此操作。\n如果您的 Mac 使用的不是您服务器上的最新 DNS 条目，您可重新启动 Mac 以更新其缓存的信息。如果您需要更新使用 OS X 的服务器上的 DNS 条目但又不能重新启动服务器，请使用以下适用于您所使用的 OS X 版本的命令。\n## OS X Yosemite及更新机型\n在 OS X v10.10.4 或更高版本中，请使用以下“终端”命令来还原 DNS 缓存设置：\n```bash\nsudo killall -HUP mDNSResponder\n```\n在 OS X v10.10 至 v10.10.3 中，请使用以下“终端”命令来还原 DNS 缓存设置：\n```bash\nsudo discoveryutil mdnsflushcache\n```\n## OS X Mavericks、Mountain Lion 和 Lion\n在 OS X v10.9.5 及更低版本中，请使用以下“终端”命令来还原 DNS 缓存设置：\n```bash\nsudo killall -HUP mDNSResponder\n```\n## Mac OS X Snow Leopard\n在 OS X v10.6 至 v10.6.8 中，请使用以下“终端”命令来还原 DNS 缓存设置：\n```bash\nsudo dscacheutil -flushcache\n```\n\n\n","slug":"mac-2017-08-10-clear-dns","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2au9011g5gqo3y3a0ll2"},{"title":"Mac 开发人员装机必备","date":"2017-08-23T00:00:00.000Z","_content":"\n记录开发过程中必不可少的一些工具\n\n<!-- more -->\n<!-- toc -->\n\n## 操作设置\n- **如何安装 macOS**：[教程](https://support.apple.com/zh-cn/HT204904)\n- **打开三指拖动**：[教程](https://support.apple.com/zh-cn/HT204609)\n- **打开轻点来点按**：设置==》触控板==》光标与点按\n- **修改修饰键**：[教程](https://support.apple.com/kb/PH7099?locale=zh_CN&viewlocale=zh_CN)\n\n## 终端\n- [iTerm2](https://www.iterm2.com/downloads.html) 终端神器，文件管理编程全部搞定\n- **Homebrew** [Mac 包管理神器 HomeBrew](/2017/09/07/mac-2017-09-07-homebrew/)\n- **Tmux** [窗口管理工具 Tmux](/2017/09/24/tmux)\n- **Zsh** [Zsh 与 oh-my-zsh 安装与使用](/2017/08/16/shell-2017-08-16-zsh-install)\n\n## 软件\n- Chrome\n- 印象笔记\n- xcode\n- [KeePassXC](https://keepassxc.org/) 密码管理\n- [calibre](https://github.com/kovidgoyal/calibre) Kindle 图书管理工具\n- Mindnode 脑图\n- ScreenFlow 视频录制和剪辑\n- sequel pro 数据库管理软件\n- SSLVpn 代理工具\n- [ShadowsocksX-NG-R](https://github.com/qinyuhang/ShadowsocksX-NG-R/releases) 科学上网的最佳工具\n\n## 代码\n\n- Mweb lite Markdown 文档编辑器\n- Macdown Markdown 文档编辑器\n- Sublime Text 代码编辑器\n- [SnippetsLab](https://www.renfei.org/snippets-lab/) 代码片段管理从未如此方便\n\n### 效率\n\n- Alfred\n- [aText](http://xclient.info/s/atext.html?_=27616038f53cd5faaa39e6ab06ffb219#history_versions) 快捷输入神器\n- [LICEcap](https://www.cockos.com/licecap/) 录制gif图片小工具\n- [Shiftlt](https://github.com/fikovnik/ShiftIt/releases) 窗口尺寸和位置管理软件\n- [CheatSheet](https://www.mediaatelier.com/CheatSheet/) 快速查看快捷键\n- [KeyCastr](https://wxnacy.com/2018/12/11/mac-KeyCastr/) 实时显示键位操作\n- [popclip](https://pilotmoon.com/popclip/) 选择文本增强工具\n- todoist 任务清单\n- Vanilla 工具栏整理\n\n\n\n","source":"_posts/mac-2017-08-23-develop-hotapps.md","raw":"---\ntitle: Mac 开发人员装机必备\ndate: 2017-08-23\ntags: [mac]\n---\n\n记录开发过程中必不可少的一些工具\n\n<!-- more -->\n<!-- toc -->\n\n## 操作设置\n- **如何安装 macOS**：[教程](https://support.apple.com/zh-cn/HT204904)\n- **打开三指拖动**：[教程](https://support.apple.com/zh-cn/HT204609)\n- **打开轻点来点按**：设置==》触控板==》光标与点按\n- **修改修饰键**：[教程](https://support.apple.com/kb/PH7099?locale=zh_CN&viewlocale=zh_CN)\n\n## 终端\n- [iTerm2](https://www.iterm2.com/downloads.html) 终端神器，文件管理编程全部搞定\n- **Homebrew** [Mac 包管理神器 HomeBrew](/2017/09/07/mac-2017-09-07-homebrew/)\n- **Tmux** [窗口管理工具 Tmux](/2017/09/24/tmux)\n- **Zsh** [Zsh 与 oh-my-zsh 安装与使用](/2017/08/16/shell-2017-08-16-zsh-install)\n\n## 软件\n- Chrome\n- 印象笔记\n- xcode\n- [KeePassXC](https://keepassxc.org/) 密码管理\n- [calibre](https://github.com/kovidgoyal/calibre) Kindle 图书管理工具\n- Mindnode 脑图\n- ScreenFlow 视频录制和剪辑\n- sequel pro 数据库管理软件\n- SSLVpn 代理工具\n- [ShadowsocksX-NG-R](https://github.com/qinyuhang/ShadowsocksX-NG-R/releases) 科学上网的最佳工具\n\n## 代码\n\n- Mweb lite Markdown 文档编辑器\n- Macdown Markdown 文档编辑器\n- Sublime Text 代码编辑器\n- [SnippetsLab](https://www.renfei.org/snippets-lab/) 代码片段管理从未如此方便\n\n### 效率\n\n- Alfred\n- [aText](http://xclient.info/s/atext.html?_=27616038f53cd5faaa39e6ab06ffb219#history_versions) 快捷输入神器\n- [LICEcap](https://www.cockos.com/licecap/) 录制gif图片小工具\n- [Shiftlt](https://github.com/fikovnik/ShiftIt/releases) 窗口尺寸和位置管理软件\n- [CheatSheet](https://www.mediaatelier.com/CheatSheet/) 快速查看快捷键\n- [KeyCastr](https://wxnacy.com/2018/12/11/mac-KeyCastr/) 实时显示键位操作\n- [popclip](https://pilotmoon.com/popclip/) 选择文本增强工具\n- todoist 任务清单\n- Vanilla 工具栏整理\n\n\n\n","slug":"mac-2017-08-23-develop-hotapps","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aua011i5gqoj8dgjg71"},{"title":"Mac 包管理神器 HomeBrew","date":"2017-09-07T00:00:00.000Z","_content":"\n> [ HomeBrew ](https://brew.sh/index_zh-cn.html) 使 macOS 更完整\n\n<!-- more -->\n\n<!-- toc -->\n\n## 安装\n```bash\n$ /usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n```\n\n安装以后\n```bash\n$ echo 'export PATH=\"/usr/local/bin:$PATH\"' >> ~/.bash_profile\n```\n这样是让 HomeBrew 下载的包优于系统自带的包\n\n## 使用\n### 下载第一个软件包\n\n```bash\n$ brew install wget\n```\n这样在 Mac 中你也可以使用 wget 工具了\n\n```bash\n$ cd /usr/local\n$ ls -l bin | grep 'wget'\nwget -> ../Cellar/wget/1.19.1_1/bin/wget\n```\n通过上边一段命令，我们会发现，HomeBrew 会将软件包下载到单独的目录 /usr/local/Cellar 中，并将文件软链接到 /usr/local/bin 中\n\n### 更多命令\n```bash\n$ brew install wget             # 安装包\n$ brew search wget              # 搜索包（支持正则表达式）eq：brew search /^wg/\n$ brew info wget                # 查看包的信息\n$ brew uninstall wget           # 卸载包\n$ brew switch wget 1.9.1        # 包切换到某一个版本\n$ brew outdated                 # 列出过时的包\n$ brew upgrade wget             # 更新包\n$ brew update                   # 更新 HomeBrew 本身\n$ brew cleanup wget             # 清除缓存\n$ brew list                     # 列出已经安装的包\n$ echo $(brew --prefix wget)    # 输出软件安装路径，/usr/local/opt/wget\n```\n\n### oh-my-zsh 补全\n\n在安装和搜索包时，如果记不住全名可以使用 **oh-my-zsh** 的自动补全功能，但是需要下载相应的包\n```bash\n$ brew install zsh-completions\n```\n\n## Cask\n[github](https://github.com/caskroom/homebrew-cask)\n\n如果你已经厌倦了在新装一个机子时，到处找软件下载地址，在一个一个手动安装，那你可能需要用到 [Cask](https://caskroom.github.io/)，它可以用一条命令就安装好你需要的常规软件\n\n### 安装\n```bash\n$ brew tap caskroom/cask\n```\n\n### 使用\n```bash\n$ brew cask install google-chrome\n```\n是不是很简单，赶快用起来吧\n\n## 路径解释\n- **Cellar**: 文件夹存放的是所有包安装所在路径，包括二进制，文档和配置文件，按照这样Cellar/包名/版本号/的形式来安放。\n- **opt**: 由于版本号随着跟新而改变的，所以需要一个固定不变的路径作为我们访问二进制和文档的路径，这就是opt的作用。\n- **Homebrew**: brew程序所在路径.\n- **bin**: 所有包安装之后二进制都会链接到这个路径下\n- **share**: 所有包安装之后的文档都会链接到这个路径下\n- **etc**: 同上，所有包的配置文件\n- **lib**: 同上，所有包相关库文件\n- **Caskroom**: app文件\n\n","source":"_posts/mac-2017-09-07-homebrew.md","raw":"---\ntitle: Mac 包管理神器 HomeBrew\ndate: 2017-09-07\ntags: [mac, HomeBrew]\n---\n\n> [ HomeBrew ](https://brew.sh/index_zh-cn.html) 使 macOS 更完整\n\n<!-- more -->\n\n<!-- toc -->\n\n## 安装\n```bash\n$ /usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n```\n\n安装以后\n```bash\n$ echo 'export PATH=\"/usr/local/bin:$PATH\"' >> ~/.bash_profile\n```\n这样是让 HomeBrew 下载的包优于系统自带的包\n\n## 使用\n### 下载第一个软件包\n\n```bash\n$ brew install wget\n```\n这样在 Mac 中你也可以使用 wget 工具了\n\n```bash\n$ cd /usr/local\n$ ls -l bin | grep 'wget'\nwget -> ../Cellar/wget/1.19.1_1/bin/wget\n```\n通过上边一段命令，我们会发现，HomeBrew 会将软件包下载到单独的目录 /usr/local/Cellar 中，并将文件软链接到 /usr/local/bin 中\n\n### 更多命令\n```bash\n$ brew install wget             # 安装包\n$ brew search wget              # 搜索包（支持正则表达式）eq：brew search /^wg/\n$ brew info wget                # 查看包的信息\n$ brew uninstall wget           # 卸载包\n$ brew switch wget 1.9.1        # 包切换到某一个版本\n$ brew outdated                 # 列出过时的包\n$ brew upgrade wget             # 更新包\n$ brew update                   # 更新 HomeBrew 本身\n$ brew cleanup wget             # 清除缓存\n$ brew list                     # 列出已经安装的包\n$ echo $(brew --prefix wget)    # 输出软件安装路径，/usr/local/opt/wget\n```\n\n### oh-my-zsh 补全\n\n在安装和搜索包时，如果记不住全名可以使用 **oh-my-zsh** 的自动补全功能，但是需要下载相应的包\n```bash\n$ brew install zsh-completions\n```\n\n## Cask\n[github](https://github.com/caskroom/homebrew-cask)\n\n如果你已经厌倦了在新装一个机子时，到处找软件下载地址，在一个一个手动安装，那你可能需要用到 [Cask](https://caskroom.github.io/)，它可以用一条命令就安装好你需要的常规软件\n\n### 安装\n```bash\n$ brew tap caskroom/cask\n```\n\n### 使用\n```bash\n$ brew cask install google-chrome\n```\n是不是很简单，赶快用起来吧\n\n## 路径解释\n- **Cellar**: 文件夹存放的是所有包安装所在路径，包括二进制，文档和配置文件，按照这样Cellar/包名/版本号/的形式来安放。\n- **opt**: 由于版本号随着跟新而改变的，所以需要一个固定不变的路径作为我们访问二进制和文档的路径，这就是opt的作用。\n- **Homebrew**: brew程序所在路径.\n- **bin**: 所有包安装之后二进制都会链接到这个路径下\n- **share**: 所有包安装之后的文档都会链接到这个路径下\n- **etc**: 同上，所有包的配置文件\n- **lib**: 同上，所有包相关库文件\n- **Caskroom**: app文件\n\n","slug":"mac-2017-09-07-homebrew","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aub011k5gqowcnupdft"},{"title":"漫威电影宇宙合集 更新到《蜘蛛侠：返校季》","date":"2017-08-13T00:00:00.000Z","_content":"\n> 漫威电影宇宙（Marvel Cinematic Universe，缩写为MCU），是以超级英雄电影为中心的共同的架空世界，由漫威影业（Marvel Studios）基于漫威漫画出版物中的角色独立制作的系列电影。它像漫画中的漫威主宇宙一样，是由共同的元素、设定、表演和角色通过跨界作品所建立的。漫威电视（Marvel Television）将宇宙进一步扩大，制作位于该宇宙中的电视剧系列。\n\n<!-- more --><!-- toc -->\n\n## 第一阶段\n\n## 第三阶段\n### 美国队长3：内战\n- [BD1280超清国英双语中英双字](thunder://QUFlZDJrOi8vfGZpbGV8ob5sb2y159OwzOzMw3d3dy5sb2xkeXR0LmNvbaG/w8C5+rbTs6Qzo7rE2tW9LkJEMTI4MLOsx+W5+tOiy6vT79bQ06LLq9fWLm1wNHwzODkyNTA0OTQwfERCN0RFQUNCNTA4QTkwQjQxN0UzMjRGNzhGRTQxNDVCfGg9RzVVR0VZQjdXNlpWQkNKS1ZRWDI2QUVTVjI3T01GSEN8L1pa)\n- [BD1280高清国英双语中英双字](thunder://QUFlZDJrOi8vfGZpbGV8ob5sb2y159OwzOzMw3d3dy5sb2xkeXR0LmNvbaG/w8C5+rbTs6Qzo7rE2tW9LkJEMTI4MLjfx+W5+tOiy6vT79bQ06LLq9fWLm1wNHwyMjY0NjMwNjMyfDIyRDY0MkUyMjRBODIxNEVDNkNEN0YzNDlCOTkzNDg3fGg9QVNSQUFTSk5OU0VVREFOUjU2M00yTkwyNkxLVUc3WkZ8L1pa)\n\n### 2016年5月6日 奇异博士\n\n- [HD](thunder://QUFmdHA6Ly9xOnFAZHlnb2RqOC5jb206MTEyMS9btefTsMzszMN3d3cuZHkyMDE4LmNvbV3G5tLssqnKv0hEuN/H5bn60+/W0NOiy6vX1i5ta3ZaWg==)\n\n### 2017年7月7日 蜘蛛侠：英雄归来\n- [HD](thunder://QUFmdHA6Ly95Z2R5ODp5Z2R5OEB5ZzQ1LmR5ZHl0dC5uZXQ6ODA1NS9b0fS54rXn07B3d3cueWdkeTguY29tXS7Wqdbrz8CjutOi0Nu56cC0LkhELjcyMHAu1tDTosur19bEuy5ybXZiWlo=)\n\n","source":"_posts/movie-2017-08-13-MCU.md","raw":"---\ntitle: 漫威电影宇宙合集 更新到《蜘蛛侠：返校季》\ndate: 2017-08-13\ntags: [movie]\n---\n\n> 漫威电影宇宙（Marvel Cinematic Universe，缩写为MCU），是以超级英雄电影为中心的共同的架空世界，由漫威影业（Marvel Studios）基于漫威漫画出版物中的角色独立制作的系列电影。它像漫画中的漫威主宇宙一样，是由共同的元素、设定、表演和角色通过跨界作品所建立的。漫威电视（Marvel Television）将宇宙进一步扩大，制作位于该宇宙中的电视剧系列。\n\n<!-- more --><!-- toc -->\n\n## 第一阶段\n\n## 第三阶段\n### 美国队长3：内战\n- [BD1280超清国英双语中英双字](thunder://QUFlZDJrOi8vfGZpbGV8ob5sb2y159OwzOzMw3d3dy5sb2xkeXR0LmNvbaG/w8C5+rbTs6Qzo7rE2tW9LkJEMTI4MLOsx+W5+tOiy6vT79bQ06LLq9fWLm1wNHwzODkyNTA0OTQwfERCN0RFQUNCNTA4QTkwQjQxN0UzMjRGNzhGRTQxNDVCfGg9RzVVR0VZQjdXNlpWQkNKS1ZRWDI2QUVTVjI3T01GSEN8L1pa)\n- [BD1280高清国英双语中英双字](thunder://QUFlZDJrOi8vfGZpbGV8ob5sb2y159OwzOzMw3d3dy5sb2xkeXR0LmNvbaG/w8C5+rbTs6Qzo7rE2tW9LkJEMTI4MLjfx+W5+tOiy6vT79bQ06LLq9fWLm1wNHwyMjY0NjMwNjMyfDIyRDY0MkUyMjRBODIxNEVDNkNEN0YzNDlCOTkzNDg3fGg9QVNSQUFTSk5OU0VVREFOUjU2M00yTkwyNkxLVUc3WkZ8L1pa)\n\n### 2016年5月6日 奇异博士\n\n- [HD](thunder://QUFmdHA6Ly9xOnFAZHlnb2RqOC5jb206MTEyMS9btefTsMzszMN3d3cuZHkyMDE4LmNvbV3G5tLssqnKv0hEuN/H5bn60+/W0NOiy6vX1i5ta3ZaWg==)\n\n### 2017年7月7日 蜘蛛侠：英雄归来\n- [HD](thunder://QUFmdHA6Ly95Z2R5ODp5Z2R5OEB5ZzQ1LmR5ZHl0dC5uZXQ6ODA1NS9b0fS54rXn07B3d3cueWdkeTguY29tXS7Wqdbrz8CjutOi0Nu56cC0LkhELjcyMHAu1tDTosur19bEuy5ybXZiWlo=)\n\n","slug":"movie-2017-08-13-MCU","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2auc011m5gqonvihhxr8"},{"title":"Mysql 基础命令","date":"2017-08-06T00:00:00.000Z","_content":"\n整理 Mysql 的一些基础命令以便查阅\n\n<!-- more --><!-- toc -->\n## 数据库\n###  创建库\n```mysql\ncreate database name character utf8mb4;\n```\n## 表结构\n### 创建表\n```mysql\ndrop table if exists `user`;\ncreate table `user`(\n    id int(11) not null auto_increment,\n    name varchar(32) not null comment '姓名',\n    mobile varchar(11) not null default '' comment '手机号',\n    ext JSON default null comment '扩展信息',\n    create_ts timestamp not null default current_timestamp comment '创建时间',\n    update_ts timestamp not null default current_timestamp on update current_timestamp comment '修改时间',\n    primary key(`id`)\n) engine=InnoDB default charset=utf8mb4 comment '用户表';\n```\n\n### 查看列\n```mysql\ndesc table_name\n```\n### 修改表名\n```mysql\nalter table table_name rename to new_name;\n```\n### 添加列\n```mysql\nalter table table_name add column col_name varchar(11) not null ...;\n```\n### 删除列\n```mysql\nalter table table_name drop column col_name;\n```\n### 修改列名\n```mysql\nalter table table_name change old_name new_name int(11)...;\n```\n### 修改列属性\n```mysql\nalter table table_name modify col_name int(11) not null...;\n```\n### 查看列属性\n```mysql\nshow columns from table_name;\nshow full columns from table_name; # 全部信息\n```\n\n- **Field** ：字段名\n- **Type**：字段类型\n- **Collation**：字符集（mysql 5.0以上有）\n- **Null** ：是否可以为NULL\n- **Key**：索引（PRI,unique,index)\n- **Default**：缺省值\n- **Extra**：额外（是否 auto_increment)\n- **Privileges**：权限\n- **Comment**：备注（mysql 5.0以上有)\n\n## 查询\n\n### 去掉重复数据\n```mysql\nselect distinct name from user;\n```\n需要注意亮点，第一，`distinct` 必须放到查询字段最前边。第二，如果查询的字段很多，必须所有字段都相同才会过滤\n\n","source":"_posts/mysql-2017-08-06-basic_cmd.md","raw":"---\ntitle: Mysql 基础命令\ndate: 2017-08-06\ntags: [mysql]\n---\n\n整理 Mysql 的一些基础命令以便查阅\n\n<!-- more --><!-- toc -->\n## 数据库\n###  创建库\n```mysql\ncreate database name character utf8mb4;\n```\n## 表结构\n### 创建表\n```mysql\ndrop table if exists `user`;\ncreate table `user`(\n    id int(11) not null auto_increment,\n    name varchar(32) not null comment '姓名',\n    mobile varchar(11) not null default '' comment '手机号',\n    ext JSON default null comment '扩展信息',\n    create_ts timestamp not null default current_timestamp comment '创建时间',\n    update_ts timestamp not null default current_timestamp on update current_timestamp comment '修改时间',\n    primary key(`id`)\n) engine=InnoDB default charset=utf8mb4 comment '用户表';\n```\n\n### 查看列\n```mysql\ndesc table_name\n```\n### 修改表名\n```mysql\nalter table table_name rename to new_name;\n```\n### 添加列\n```mysql\nalter table table_name add column col_name varchar(11) not null ...;\n```\n### 删除列\n```mysql\nalter table table_name drop column col_name;\n```\n### 修改列名\n```mysql\nalter table table_name change old_name new_name int(11)...;\n```\n### 修改列属性\n```mysql\nalter table table_name modify col_name int(11) not null...;\n```\n### 查看列属性\n```mysql\nshow columns from table_name;\nshow full columns from table_name; # 全部信息\n```\n\n- **Field** ：字段名\n- **Type**：字段类型\n- **Collation**：字符集（mysql 5.0以上有）\n- **Null** ：是否可以为NULL\n- **Key**：索引（PRI,unique,index)\n- **Default**：缺省值\n- **Extra**：额外（是否 auto_increment)\n- **Privileges**：权限\n- **Comment**：备注（mysql 5.0以上有)\n\n## 查询\n\n### 去掉重复数据\n```mysql\nselect distinct name from user;\n```\n需要注意亮点，第一，`distinct` 必须放到查询字段最前边。第二，如果查询的字段很多，必须所有字段都相同才会过滤\n\n","slug":"mysql-2017-08-06-basic-cmd","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aue011p5gqo39jxkod8"},{"title":"2017-08-07 新建user和user_data表，完善`insert_commet_trigger`","date":"2017-08-07T00:00:00.000Z","_content":"\n> 今天目标新建user、`user_data`表，并完善`insert_commet_trigger`，达到根据判断resource_type来更新video还是user_data的comment_count\n\n专辑：[mysql每天练习](/?p=/doc/mysql/mysql_daily.md)\n- 新建user表\n```mysql\ndrop table if exists `user`;\ncreate table `user`(\n    id int(11) not null auto_increment,\n    name varchar(32) not null comment '姓名',\n    is_del int(1) not null default 0 comment '是否删除',\n    create_ts timestamp not null default current_timestamp comment '创建时间',\n    update_ts timestamp not null default current_timestamp on update current_timestamp comment '修改时间',\n    primary key(`id`)\n)engine=InnoDB default charset=utf8mb4 comment '用户表';\n```\n\n- 新建user_data表\n```mysql\ndrop table if exists `user_data`;\ncreate table `user_data`(\n    user_id int(11) not null,\n    comment_count int(11) not null default 0 comment '评论数量',\n    update_ts timestamp not null default current_timestamp on update current_timestamp comment '最后修改时间',\n    primary key(`user_id`)\n)engine=InnoDB default charset=utf8mb4 comment '用户数据表，记录用户额外数据';\n```\n\n- 重写 `insert_comment_trigger`\n```mysql\ndrop trigger if exists `insert_comment`;\ndelimiter $\ncreate trigger `insert_comment` after insert on comment for each row \nbegin\n    declare count int;\n    if (new.resource_type = 'user') then\n        select count(0) into count from user_data where user_id = new.resource_id;\n        if (count > 0 ) then\n            update user_data set comment_count = comment_count +1  where user_id = new.resource_id;\n        else\n            insert into user_data (user_id,comment_count) values (new.resource_id,1);\n        end if;\n    else\n        update video set comment_count = comment_count +1 where id= new.resource_id;\n    end if; \nend $\ndelimiter ;\n```\n\n- 执行相关语句\n```mysql\ninsert into user(name) values ('wxnacy');\ninsert into comment (resource_id,resource_type,content) values (1,'user','好人');\ninsert into comment (resource_id,resource_type,content) values (1,'user','大好人');\nselect * from user_data;\n```\n执行语句后，user_data中comment_count应该等于2\n\n","source":"_posts/mysql-2017-08-07-item-daily.md","raw":"---\ntitle: 2017-08-07 新建user和user_data表，完善`insert_commet_trigger`\ndate: 2017-08-07\ntags: [mysql]\n---\n\n> 今天目标新建user、`user_data`表，并完善`insert_commet_trigger`，达到根据判断resource_type来更新video还是user_data的comment_count\n\n专辑：[mysql每天练习](/?p=/doc/mysql/mysql_daily.md)\n- 新建user表\n```mysql\ndrop table if exists `user`;\ncreate table `user`(\n    id int(11) not null auto_increment,\n    name varchar(32) not null comment '姓名',\n    is_del int(1) not null default 0 comment '是否删除',\n    create_ts timestamp not null default current_timestamp comment '创建时间',\n    update_ts timestamp not null default current_timestamp on update current_timestamp comment '修改时间',\n    primary key(`id`)\n)engine=InnoDB default charset=utf8mb4 comment '用户表';\n```\n\n- 新建user_data表\n```mysql\ndrop table if exists `user_data`;\ncreate table `user_data`(\n    user_id int(11) not null,\n    comment_count int(11) not null default 0 comment '评论数量',\n    update_ts timestamp not null default current_timestamp on update current_timestamp comment '最后修改时间',\n    primary key(`user_id`)\n)engine=InnoDB default charset=utf8mb4 comment '用户数据表，记录用户额外数据';\n```\n\n- 重写 `insert_comment_trigger`\n```mysql\ndrop trigger if exists `insert_comment`;\ndelimiter $\ncreate trigger `insert_comment` after insert on comment for each row \nbegin\n    declare count int;\n    if (new.resource_type = 'user') then\n        select count(0) into count from user_data where user_id = new.resource_id;\n        if (count > 0 ) then\n            update user_data set comment_count = comment_count +1  where user_id = new.resource_id;\n        else\n            insert into user_data (user_id,comment_count) values (new.resource_id,1);\n        end if;\n    else\n        update video set comment_count = comment_count +1 where id= new.resource_id;\n    end if; \nend $\ndelimiter ;\n```\n\n- 执行相关语句\n```mysql\ninsert into user(name) values ('wxnacy');\ninsert into comment (resource_id,resource_type,content) values (1,'user','好人');\ninsert into comment (resource_id,resource_type,content) values (1,'user','大好人');\nselect * from user_data;\n```\n执行语句后，user_data中comment_count应该等于2\n\n","slug":"mysql-2017-08-07-item-daily","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2auj011r5gqov6b0u2sx"},{"title":"2017-08-06 新建video和comment表，以及`insert_commet_trigger`","date":"2017-08-06T00:00:00.000Z","_content":"\n> 今天的目标是新建一个video视频表和comment评论表，并编写trigger，达到当insert一条评论类型为video的数据到comment中时，video中comment_count字段可以自加一\n\n专辑：[mysql每天练习](/?p=/doc/mysql/mysql_daily.md)\n- 新建video表\n```mysql\ndrop table if exists `video`;\ncreate table `video`(\n    id int(11) not null auto_increment,\n    name varchar(32) not null comment '标题',\n    url varchar(512) not null comment '视频地址',\n    is_del int(1) not null default 0 comment '是否删除',\n    create_ts timestamp not null default current_timestamp comment '创建时间',\n    update_ts timestamp not null default current_timestamp on update current_timestamp comment '修改时间',\n    primary key(`id`)\n)engine=InnoDB default charset=utf8mb4 comment '视频表';\n```\n\n- 添加comment_count字段（不是忘了，就是想练一下add column语句╭(╯^╰)╮）\n```mysql\nalter table video add column comment_count int(11) not null default 0 comment '评论数量';\n```\n\n- 新建comment表\n```mysql\ndrop table if exists `comment`;\ncreate table `comment`(\n    id int(11) not null auto_increment,\n    resource_id int(11) not null comment '被评论资源id',\n    resource_type varchar(16) not null comment '被评论资源类型',\n    content varchar(1024) not null comment '评论内容',\n    is_del int(1) not null default 0 comment '是否删除',\n    create_ts timestamp not null default current_timestamp comment '创建时间',\n    update_ts timestamp not null default current_timestamp on update current_timestamp comment '修改时间',\n    primary key(`id`)\n)engine=InnoDB default charset=utf8mb4 comment '评论表';\n```\n- 新建trigger\n```mysql\ndrop trigger if exists `insert_comment`;\ndelimiter $\ncreate trigger `insert_comment` after insert on comment for each row\nbegin\n    if (new.resource_type = 'video') then \n        update video set comment_count = comment_count +1 where id = new.resource_id;\n    end if;\nend $\ndelimiter ;\n```\n\n- 执行相应操作语句\n\n```mysql\ninsert into video (name,url) values ('蜘蛛侠：返校季','http://woyemeiyou/wangzhi.mp4');\ninsert into comment (resource_id,resource_type,content) values (1,'video','找不到资源');\nselect * from video;\n```\n\n最后结果中video表中的comment_count应该等于1\n\n","source":"_posts/mysql-2017-08-06-item-daily.md","raw":"---\ntitle: 2017-08-06 新建video和comment表，以及`insert_commet_trigger`\ndate: 2017-08-06\ntags: [mysql]\n---\n\n> 今天的目标是新建一个video视频表和comment评论表，并编写trigger，达到当insert一条评论类型为video的数据到comment中时，video中comment_count字段可以自加一\n\n专辑：[mysql每天练习](/?p=/doc/mysql/mysql_daily.md)\n- 新建video表\n```mysql\ndrop table if exists `video`;\ncreate table `video`(\n    id int(11) not null auto_increment,\n    name varchar(32) not null comment '标题',\n    url varchar(512) not null comment '视频地址',\n    is_del int(1) not null default 0 comment '是否删除',\n    create_ts timestamp not null default current_timestamp comment '创建时间',\n    update_ts timestamp not null default current_timestamp on update current_timestamp comment '修改时间',\n    primary key(`id`)\n)engine=InnoDB default charset=utf8mb4 comment '视频表';\n```\n\n- 添加comment_count字段（不是忘了，就是想练一下add column语句╭(╯^╰)╮）\n```mysql\nalter table video add column comment_count int(11) not null default 0 comment '评论数量';\n```\n\n- 新建comment表\n```mysql\ndrop table if exists `comment`;\ncreate table `comment`(\n    id int(11) not null auto_increment,\n    resource_id int(11) not null comment '被评论资源id',\n    resource_type varchar(16) not null comment '被评论资源类型',\n    content varchar(1024) not null comment '评论内容',\n    is_del int(1) not null default 0 comment '是否删除',\n    create_ts timestamp not null default current_timestamp comment '创建时间',\n    update_ts timestamp not null default current_timestamp on update current_timestamp comment '修改时间',\n    primary key(`id`)\n)engine=InnoDB default charset=utf8mb4 comment '评论表';\n```\n- 新建trigger\n```mysql\ndrop trigger if exists `insert_comment`;\ndelimiter $\ncreate trigger `insert_comment` after insert on comment for each row\nbegin\n    if (new.resource_type = 'video') then \n        update video set comment_count = comment_count +1 where id = new.resource_id;\n    end if;\nend $\ndelimiter ;\n```\n\n- 执行相应操作语句\n\n```mysql\ninsert into video (name,url) values ('蜘蛛侠：返校季','http://woyemeiyou/wangzhi.mp4');\ninsert into comment (resource_id,resource_type,content) values (1,'video','找不到资源');\nselect * from video;\n```\n\n最后结果中video表中的comment_count应该等于1\n\n","slug":"mysql-2017-08-06-item-daily","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aul011t5gqo5bx1wka3"},{"title":"2017-08-08 新建article表，完善`insert_comment_trigger`","date":"2017-08-08T00:00:00.000Z","_content":"\n> 今天目标创建acticle表，并完善`insert_comment_trigger`，以支持更新article中的comment_count,comment表新增comment_id字段\n\n专辑：[mysql每天练习](/?p=/doc/mysql/mysql_daily.md)\n- 新建article\n```mysql\ndrop table if exists `article`;\ncreate table `article`(\n\tid int(11) not null auto_increment,\n\tname varchar(32) not null comment '标题',\n\turl varchar(512) not null comment '地址',\n\tcomment_count int(11) not null default 0 comment '评论数量',\n\tis_del tinyint(1) not null default 0 comment '是否删除',\n\tcreate_ts timestamp not null default current_timestamp comment '创建时间',\n\tupdate_ts timestamp not null default current_timestamp on update current_timestamp comment '修改时间',\n\tprimary key(`id`)\n)engine=InnoDB default charset=utf8mb4 comment '文章表';\n```\n- 修改`insert_comment`\n```mysql\ndrop trigger if exists `insert_comment`;\ndelimiter $\ncreate trigger `insert_comment` after insert on comment for each row \nbegin\n\tdeclare count int;\n\tif (new.resource_type = 'video') then\n\t\tupdate video set comment_count = comment_count + 1 where id  = new.resource_id;\n\telseif (new.resource_type = 'article') then\n\t\tupdate article set comment_count = comment_count + 1 where id = new.resource_id;\n\telseif (new.resource_type = 'user') then\n\t\tselect count(0) into count from user_data where user_id = new.resource_id;\n\t\tif (count >0) then\n\t\t\tupdate user_data set comment_count = comment_count + 1 where user_id = new.resource_id;\n\t\telse\n\t\t\tinsert into user_data (user_id,comment_count) values (new.resource_id,1);\n\t\tend if;\n\tend if;\nend $\ndelimiter ;\n```\n- 添加字段\n```mysql\nalter table comment add column comment_id int(11) not null default 0 comment '回复的评论注解id';\n```\n- 测试\n```mysql\ninsert into article (name,url) values ('好文章','http://wen.com/wen.html');\ninsert into comment(resource_id,resource_type,content) values(1,'article','好文章');\nselect * from article;\n```\n执行完后，article中comment_count应该等于1\n\n","source":"_posts/mysql-2017-08-08-item-daily.md","raw":"---\ntitle: 2017-08-08 新建article表，完善`insert_comment_trigger`\ndate: 2017-08-08\ntags: [mysql]\n---\n\n> 今天目标创建acticle表，并完善`insert_comment_trigger`，以支持更新article中的comment_count,comment表新增comment_id字段\n\n专辑：[mysql每天练习](/?p=/doc/mysql/mysql_daily.md)\n- 新建article\n```mysql\ndrop table if exists `article`;\ncreate table `article`(\n\tid int(11) not null auto_increment,\n\tname varchar(32) not null comment '标题',\n\turl varchar(512) not null comment '地址',\n\tcomment_count int(11) not null default 0 comment '评论数量',\n\tis_del tinyint(1) not null default 0 comment '是否删除',\n\tcreate_ts timestamp not null default current_timestamp comment '创建时间',\n\tupdate_ts timestamp not null default current_timestamp on update current_timestamp comment '修改时间',\n\tprimary key(`id`)\n)engine=InnoDB default charset=utf8mb4 comment '文章表';\n```\n- 修改`insert_comment`\n```mysql\ndrop trigger if exists `insert_comment`;\ndelimiter $\ncreate trigger `insert_comment` after insert on comment for each row \nbegin\n\tdeclare count int;\n\tif (new.resource_type = 'video') then\n\t\tupdate video set comment_count = comment_count + 1 where id  = new.resource_id;\n\telseif (new.resource_type = 'article') then\n\t\tupdate article set comment_count = comment_count + 1 where id = new.resource_id;\n\telseif (new.resource_type = 'user') then\n\t\tselect count(0) into count from user_data where user_id = new.resource_id;\n\t\tif (count >0) then\n\t\t\tupdate user_data set comment_count = comment_count + 1 where user_id = new.resource_id;\n\t\telse\n\t\t\tinsert into user_data (user_id,comment_count) values (new.resource_id,1);\n\t\tend if;\n\tend if;\nend $\ndelimiter ;\n```\n- 添加字段\n```mysql\nalter table comment add column comment_id int(11) not null default 0 comment '回复的评论注解id';\n```\n- 测试\n```mysql\ninsert into article (name,url) values ('好文章','http://wen.com/wen.html');\ninsert into comment(resource_id,resource_type,content) values(1,'article','好文章');\nselect * from article;\n```\n执行完后，article中comment_count应该等于1\n\n","slug":"mysql-2017-08-08-item-daily","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aun011w5gqo89t118kh"},{"title":"Mysql 索引的增删查","date":"2017-08-09T00:00:00.000Z","_content":"\n原文：[http://www.cnblogs.com/tianhuilove/archive/2011/09/05/2167795.html](http://www.cnblogs.com/tianhuilove/archive/2011/09/05/2167795.html)\n\n<!-- more --><!-- toc -->\n## 索引类型\n在创建索引时，可以规定索引能否包含重复值。如果不包含，则索引应该创建为PRIMARY KEY或UNIQUE索引。对于单列惟一性索引，这保证单列不包含重复的值。对于多列惟一性索引，保证多个值的组合不重复。 PRIMARY KEY索引和UNIQUE索引非常类似。事实上，PRIMARY KEY索引仅是一个具有名称PRIMARY的UNIQUE索引。这表示一个表只能包含一个PRIMARY KEY，因为一个表中不可能具有两个同名的索引。下面的SQL语句对students表在sid上添加PRIMARY KEY索引。\n\n## 创建索引\n在执行CREATE TABLE语句时可以创建索引，也可以单独用CREATE INDEX或ALTER TABLE来为表增加索引。\n\n### alter table\n\n其中table_name是要增加索引的表名，column_list指出对哪些列进行索引，多列时各列之间用逗号分隔。索引名index_name可选，缺省时，MySQL将根据第一个索引列赋一个名称。另外，ALTER TABLE允许在单个语句中更改多个表，因此可以在同时创建多个索引。\n```mysql\nalter table table_name add index index_name (column_list);\nalter table table_name add unique index_name (column_list);\nalter table table_name add primary key (column_list);\n```\n### create table\nCREATE INDEX可对表增加普通索引或UNIQUE索引。\n```mysql\ncreate index index_name on table_name (column_list);\ncreate unique index index_name on table_name (column_list);\n```\n\n## 删除索引\n可利用ALTER TABLE或DROP INDEX语句来删除索引。类似于CREATE INDEX语句，DROP INDEX可以在ALTER TABLE内部作为一条语句处理，语法如下。\n```mysql\ndrop index index_name on table_name;\nalter table_name drop index index_name;\nalter table_name drop primary key;\n```\n```\n其中，前两条语句是等价的，删除掉table_name中的索引index_name。\n第3条语句只在删除PRIMARY KEY索引时使用，因为一个表只可能有一个PRIMARY KEY索引，因此不需要指定索引名。\n如果没有创建PRIMARY KEY索引，但表具有一个或多个UNIQUE索引，则MySQL将删除第一个UNIQUE索引。\n如果从表中删除了某列，则索引会受到影响。对于多列组合的索引\n如果删除其中的某列，则该列也会从索引中删除。如果删除组成索引的所有列，则整个索引将被删除。\n```\n\n## 查看索引\n\n```mysql\nshow index from table_name;\nshow keys from table_name;\n```\n\n- **Table**: 表的名称。\n- **Non_unique**: 如果索引不能包括重复词，则为0。如果可以，则为1。\n- **Key_name**: 索引的名称。\n- **Seq_in_index**: 索引中的列序列号，从1开始。\n- **Column_name**: 列名称。\n- **Collation**: 列以什么方式存储在索引中。在MySQL中，有值‘A’（升序）或NULL（无分类）。\n- **Cardinality**: 索引中唯一值的数目的估计值。通过运行ANALYZE TABLE或myisamchk -a可以更新。基数根据被存储为整数的统计数据来计数，所以即使对于小型表，该值也没有必要是精确的。基数越大，当进行联合时，MySQL使用该索引的机会就越大。\n- **Sub_part**: 如果列只是被部分地编入索引，则为被编入索引的字符的数目。如果整列被编入索引，则为NULL。\n- **Packed**: 指示关键字如何被压缩。如果没有被压缩，则为NULL。\n- **Null**: 如果列含有NULL，则含有YES。如果没有，则该列含有NO。\n- **Index_type**: 用过的索引方法（BTREE, FULLTEXT, HASH, RTREE）。\n- **Comment**: 备注\n\n","source":"_posts/mysql-2017-08-09-basic_index.md","raw":"---\ntitle: Mysql 索引的增删查\ndate: 2017-08-09\ntags: [mysql]\n---\n\n原文：[http://www.cnblogs.com/tianhuilove/archive/2011/09/05/2167795.html](http://www.cnblogs.com/tianhuilove/archive/2011/09/05/2167795.html)\n\n<!-- more --><!-- toc -->\n## 索引类型\n在创建索引时，可以规定索引能否包含重复值。如果不包含，则索引应该创建为PRIMARY KEY或UNIQUE索引。对于单列惟一性索引，这保证单列不包含重复的值。对于多列惟一性索引，保证多个值的组合不重复。 PRIMARY KEY索引和UNIQUE索引非常类似。事实上，PRIMARY KEY索引仅是一个具有名称PRIMARY的UNIQUE索引。这表示一个表只能包含一个PRIMARY KEY，因为一个表中不可能具有两个同名的索引。下面的SQL语句对students表在sid上添加PRIMARY KEY索引。\n\n## 创建索引\n在执行CREATE TABLE语句时可以创建索引，也可以单独用CREATE INDEX或ALTER TABLE来为表增加索引。\n\n### alter table\n\n其中table_name是要增加索引的表名，column_list指出对哪些列进行索引，多列时各列之间用逗号分隔。索引名index_name可选，缺省时，MySQL将根据第一个索引列赋一个名称。另外，ALTER TABLE允许在单个语句中更改多个表，因此可以在同时创建多个索引。\n```mysql\nalter table table_name add index index_name (column_list);\nalter table table_name add unique index_name (column_list);\nalter table table_name add primary key (column_list);\n```\n### create table\nCREATE INDEX可对表增加普通索引或UNIQUE索引。\n```mysql\ncreate index index_name on table_name (column_list);\ncreate unique index index_name on table_name (column_list);\n```\n\n## 删除索引\n可利用ALTER TABLE或DROP INDEX语句来删除索引。类似于CREATE INDEX语句，DROP INDEX可以在ALTER TABLE内部作为一条语句处理，语法如下。\n```mysql\ndrop index index_name on table_name;\nalter table_name drop index index_name;\nalter table_name drop primary key;\n```\n```\n其中，前两条语句是等价的，删除掉table_name中的索引index_name。\n第3条语句只在删除PRIMARY KEY索引时使用，因为一个表只可能有一个PRIMARY KEY索引，因此不需要指定索引名。\n如果没有创建PRIMARY KEY索引，但表具有一个或多个UNIQUE索引，则MySQL将删除第一个UNIQUE索引。\n如果从表中删除了某列，则索引会受到影响。对于多列组合的索引\n如果删除其中的某列，则该列也会从索引中删除。如果删除组成索引的所有列，则整个索引将被删除。\n```\n\n## 查看索引\n\n```mysql\nshow index from table_name;\nshow keys from table_name;\n```\n\n- **Table**: 表的名称。\n- **Non_unique**: 如果索引不能包括重复词，则为0。如果可以，则为1。\n- **Key_name**: 索引的名称。\n- **Seq_in_index**: 索引中的列序列号，从1开始。\n- **Column_name**: 列名称。\n- **Collation**: 列以什么方式存储在索引中。在MySQL中，有值‘A’（升序）或NULL（无分类）。\n- **Cardinality**: 索引中唯一值的数目的估计值。通过运行ANALYZE TABLE或myisamchk -a可以更新。基数根据被存储为整数的统计数据来计数，所以即使对于小型表，该值也没有必要是精确的。基数越大，当进行联合时，MySQL使用该索引的机会就越大。\n- **Sub_part**: 如果列只是被部分地编入索引，则为被编入索引的字符的数目。如果整列被编入索引，则为NULL。\n- **Packed**: 指示关键字如何被压缩。如果没有被压缩，则为NULL。\n- **Null**: 如果列含有NULL，则含有YES。如果没有，则该列含有NO。\n- **Index_type**: 用过的索引方法（BTREE, FULLTEXT, HASH, RTREE）。\n- **Comment**: 备注\n\n","slug":"mysql-2017-08-09-basic-index","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2auo011y5gqogpdgxo2e"},{"title":"mysql prompt 提示符","date":"2017-08-09T00:00:00.000Z","_content":"\n原文：[http://www.thegeekstuff.com/2010/02/mysql_ps1-6-examples-to-make-your-mysql-prompt-like-angelina-jolie/](http://www.thegeekstuff.com/2010/02/mysql_ps1-6-examples-to-make-your-mysql-prompt-like-angelina-jolie/)\n## 在命令行中使用\n```mysql\nmysql> prompt \\u@\\d>\nPROMPT set to '\\u@\\d> '\nroot@(none)> use test\nReading table information for completion of table and column names\nYou can turn off this feature to get a quicker startup with -A\n\nDatabase changed\nroot@test>\n```\n\n## 在命令行参数中使用\n需要使用双引号括起来\n```mysql\nwxnacy@wxnacydeMacBook-Pro: ~ $ mysql -u root -p --prompt=\"\\u@\\d> \"    \nroot@(none)> use test;\nroot@test>\n```\n### 在bash层修改 MYSQL_PS1 变量\n```bash\nwxnacy@wxnacydeMacBook-Pro: ~ $ export MYSQL_PS1=\"\\u@\\d> \"                              \nwxnacy@wxnacydeMacBook-Pro: ~ $ mysql -u root -p                            \nroot@(none)>\n```\n## 在/etc/my.cnf中配置\n也可以在配置中一劳永逸\n```bash\n[mysql]  \nprompt=\\\\u@\\\\d>\\\\ # 要多加一个反斜线\\\n  \n又或者：  \n[mysql]  \nprompt=\"\\u@\\d> \"  \n```\n### 更多参数\n```bash\nOption  Description  \n  \n\\c  A counter that increments for each statement you issue  \n\\D  The full current date  \n\\d  The default database  \n\\h  The server host  \n\\l  The current delimiter (new in 5.0.25)  \n\\m  Minutes of the current time  \n\\n  A newline character  \n\\O  The current month in three-letter format (Jan, Feb, …)  \n\\o  The current month in numeric format  \n\\P  am/pm  \n\\p  The current TCP/IP port or socket file  \n\\R  The current time, in 24-hour military time (0–23)  \n\\r  The current time, standard 12-hour time (1–12)  \n\\S  Semicolon  \n\\s  Seconds of the current time  \n\\t  A tab character  \n\\U  Your full user_name@host_name account name  \n   \n\\u  Your user name  \n\\v  The server version  \n\\w  The current day of the week in three-letter format (Mon, Tue, …)  \n\\Y  The current year, four digits  \n\\y  The current year, two digits  \n\\_  A space  \n\\   A space (a space follows the backslash)  \n\\'  Single quote  \n\\\"  Double quote  \n\\\\  A literal “\\” backslash character  \n\\x  x, for any “x” not listed above  \n\n```\n\n\n\n","source":"_posts/mysql-2017-08-09-prompt.md","raw":"---\ntitle: mysql prompt 提示符\ndate: 2017-08-09\ntags: [mysql]\n---\n\n原文：[http://www.thegeekstuff.com/2010/02/mysql_ps1-6-examples-to-make-your-mysql-prompt-like-angelina-jolie/](http://www.thegeekstuff.com/2010/02/mysql_ps1-6-examples-to-make-your-mysql-prompt-like-angelina-jolie/)\n## 在命令行中使用\n```mysql\nmysql> prompt \\u@\\d>\nPROMPT set to '\\u@\\d> '\nroot@(none)> use test\nReading table information for completion of table and column names\nYou can turn off this feature to get a quicker startup with -A\n\nDatabase changed\nroot@test>\n```\n\n## 在命令行参数中使用\n需要使用双引号括起来\n```mysql\nwxnacy@wxnacydeMacBook-Pro: ~ $ mysql -u root -p --prompt=\"\\u@\\d> \"    \nroot@(none)> use test;\nroot@test>\n```\n### 在bash层修改 MYSQL_PS1 变量\n```bash\nwxnacy@wxnacydeMacBook-Pro: ~ $ export MYSQL_PS1=\"\\u@\\d> \"                              \nwxnacy@wxnacydeMacBook-Pro: ~ $ mysql -u root -p                            \nroot@(none)>\n```\n## 在/etc/my.cnf中配置\n也可以在配置中一劳永逸\n```bash\n[mysql]  \nprompt=\\\\u@\\\\d>\\\\ # 要多加一个反斜线\\\n  \n又或者：  \n[mysql]  \nprompt=\"\\u@\\d> \"  \n```\n### 更多参数\n```bash\nOption  Description  \n  \n\\c  A counter that increments for each statement you issue  \n\\D  The full current date  \n\\d  The default database  \n\\h  The server host  \n\\l  The current delimiter (new in 5.0.25)  \n\\m  Minutes of the current time  \n\\n  A newline character  \n\\O  The current month in three-letter format (Jan, Feb, …)  \n\\o  The current month in numeric format  \n\\P  am/pm  \n\\p  The current TCP/IP port or socket file  \n\\R  The current time, in 24-hour military time (0–23)  \n\\r  The current time, standard 12-hour time (1–12)  \n\\S  Semicolon  \n\\s  Seconds of the current time  \n\\t  A tab character  \n\\U  Your full user_name@host_name account name  \n   \n\\u  Your user name  \n\\v  The server version  \n\\w  The current day of the week in three-letter format (Mon, Tue, …)  \n\\Y  The current year, four digits  \n\\y  The current year, two digits  \n\\_  A space  \n\\   A space (a space follows the backslash)  \n\\'  Single quote  \n\\\"  Double quote  \n\\\\  A literal “\\” backslash character  \n\\x  x, for any “x” not listed above  \n\n```\n\n\n\n","slug":"mysql-2017-08-09-prompt","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2auq01205gqogpb0cdz3"},{"title":"2017-08-09 新建collection合集表，新建trigger完成更新用户文章数","date":"2017-08-09T00:00:00.000Z","_content":"\n> 今天练习新建collection合集表，并在article中添加user_id字段，在user_data中添加article_count字段，并新建trigger ```insert_article```完成用户文章数自动更新\n\n专辑：[mysql每天练习](/?p=/doc/mysql/mysql_daily.md)\n\n\n- 新建collection\n```mysql\ndrop table if exists `collection`;\ncreate table `collection`(\n\tid int(11) not null auto_increment,\n\tname varchar(256) not null default '' comment '合集名称',\n\tis_del tinyint(1) not null default 0 comment '是否删除',\n\tcreate_ts timestamp not null default current_timestamp comment '创建时间',\n\tupdate_ts timestamp not null default current_timestamp on update current_timestamp comment '修改时间',\n\tprimary key(`id`)\n)engine=InnoDB default charset=utf8mb4 comment '合集表';\n```\n- article添加user_id\n```mysql\nalter table article add column user_id int(11) not null default 0 comment '用户id';\n```\n- ```user_data``` 中添加```article_count```字段\n```mysql\nalter table user_data add column article_count int(11) not null default 0 comment '发布文章数量';\n```\n- 新建trigger\n```mysql\ndrop trigger if exists `insert_article`;\ndelimiter $\ncreate trigger `insert_article` after insert on article for each row \nbegin\n\tdeclare count int;\n\tif (new.user_id > 0) then\n\t\tselect count(0) into count from user_data where user_id = new.user_id;\n\t\tif (count > 0) then\n\t\t\tupdate user_data set article_count = article_count +1 where user_id = new.user_id;\n\t\telse\n\t\t\tinsert into user_data (user_id,article_count) values (new.user_id,1);\n\t\tend if;\n\tend if;\nend $\ndelimiter ;\n```\n- 运行\n```mysql\ninsert into article (name,url,user_id) values ('title','http://baidu.com',3);\ninsert into article (name,url,user_id) values ('title','http://baidu.com',3);\nselect * from user_data where user_id = 3;\n```\n运行后，article_count应该等于2\n\n","source":"_posts/mysql-2017-08-09-item-daily.md","raw":"---\ntitle: 2017-08-09 新建collection合集表，新建trigger完成更新用户文章数\ndate: 2017-08-09\ntags: [mysql]\n---\n\n> 今天练习新建collection合集表，并在article中添加user_id字段，在user_data中添加article_count字段，并新建trigger ```insert_article```完成用户文章数自动更新\n\n专辑：[mysql每天练习](/?p=/doc/mysql/mysql_daily.md)\n\n\n- 新建collection\n```mysql\ndrop table if exists `collection`;\ncreate table `collection`(\n\tid int(11) not null auto_increment,\n\tname varchar(256) not null default '' comment '合集名称',\n\tis_del tinyint(1) not null default 0 comment '是否删除',\n\tcreate_ts timestamp not null default current_timestamp comment '创建时间',\n\tupdate_ts timestamp not null default current_timestamp on update current_timestamp comment '修改时间',\n\tprimary key(`id`)\n)engine=InnoDB default charset=utf8mb4 comment '合集表';\n```\n- article添加user_id\n```mysql\nalter table article add column user_id int(11) not null default 0 comment '用户id';\n```\n- ```user_data``` 中添加```article_count```字段\n```mysql\nalter table user_data add column article_count int(11) not null default 0 comment '发布文章数量';\n```\n- 新建trigger\n```mysql\ndrop trigger if exists `insert_article`;\ndelimiter $\ncreate trigger `insert_article` after insert on article for each row \nbegin\n\tdeclare count int;\n\tif (new.user_id > 0) then\n\t\tselect count(0) into count from user_data where user_id = new.user_id;\n\t\tif (count > 0) then\n\t\t\tupdate user_data set article_count = article_count +1 where user_id = new.user_id;\n\t\telse\n\t\t\tinsert into user_data (user_id,article_count) values (new.user_id,1);\n\t\tend if;\n\tend if;\nend $\ndelimiter ;\n```\n- 运行\n```mysql\ninsert into article (name,url,user_id) values ('title','http://baidu.com',3);\ninsert into article (name,url,user_id) values ('title','http://baidu.com',3);\nselect * from user_data where user_id = 3;\n```\n运行后，article_count应该等于2\n\n","slug":"mysql-2017-08-09-item-daily","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aur01225gqow14l5lgg"},{"title":"2017-08-10 新建collection_resource表，新建trigger更新collection资源总数","date":"2017-08-10T00:00:00.000Z","_content":"\n> 今天练习的目标，新建collection_resource表，并新建trigger更新collection的资源数\n\n专辑：[mysql每天练习](/?p=/doc/mysql/mysql_daily.md)\n\n## 新建collection_resource\n```mysql\ndrop table if exists `collection_resource`;\nCREATE TABLE `collection_resource` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `collection_id` int(11) NOT NULL,\n  `resource_id` int(11) NOT NULL,\n  `resource_type` varchar(32) NOT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='合集资源对应表';\n```\n## collection表添加资源数量字段\n```mysql\nalter table collection add column resource_count int(11) not null default 0 comment '资源总数';\n```\n## 新建trigger\n```mysql\ndrop trigger if exists `insert_collection_resource`;\ndelimiter $\ncreate trigger `insert_collection_resource` after insert on collection_resource for each row \nbegin\n\tdeclare count int;\n\tselect count(0) into count from collection where id = new.collection_id;\n\tif (count > 0) then \n\t\tupdate collection set resource_count = resource_count + 1 where id = new.collection_id;\n\tend if;\nend $\ndelimiter ;\n```\n## 运行\n```mysql\ninsert into collection(name) values ('合集');\ninsert into collection_resource (collection_id,resource_id,resource_type) values(1,1,'video');\nselect * from collection;\n```\n\n","source":"_posts/mysql-2017-08-10-item-daily.md","raw":"---\ntitle: 2017-08-10 新建collection_resource表，新建trigger更新collection资源总数\ndate: 2017-08-10\ntags: [mysql]\n---\n\n> 今天练习的目标，新建collection_resource表，并新建trigger更新collection的资源数\n\n专辑：[mysql每天练习](/?p=/doc/mysql/mysql_daily.md)\n\n## 新建collection_resource\n```mysql\ndrop table if exists `collection_resource`;\nCREATE TABLE `collection_resource` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `collection_id` int(11) NOT NULL,\n  `resource_id` int(11) NOT NULL,\n  `resource_type` varchar(32) NOT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='合集资源对应表';\n```\n## collection表添加资源数量字段\n```mysql\nalter table collection add column resource_count int(11) not null default 0 comment '资源总数';\n```\n## 新建trigger\n```mysql\ndrop trigger if exists `insert_collection_resource`;\ndelimiter $\ncreate trigger `insert_collection_resource` after insert on collection_resource for each row \nbegin\n\tdeclare count int;\n\tselect count(0) into count from collection where id = new.collection_id;\n\tif (count > 0) then \n\t\tupdate collection set resource_count = resource_count + 1 where id = new.collection_id;\n\tend if;\nend $\ndelimiter ;\n```\n## 运行\n```mysql\ninsert into collection(name) values ('合集');\ninsert into collection_resource (collection_id,resource_id,resource_type) values(1,1,'video');\nselect * from collection;\n```\n\n","slug":"mysql-2017-08-10-item-daily","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2aus01245gqogt6qsear"},{"title":"mysql select 格式化输出","date":"2017-08-09T00:00:00.000Z","_content":"\n## 使用\\G输出结果按行垂直显示结果\n当使用命令 select 结果，如果表属性特别多的时候，查看起来非常难受，在 select 语句\n后使用`\\G`(必须大写)，可以让结果按行垂直显示\n```mysql\nmysql> select * from user\\G;\n```\n```mysql\n\n*************************** 1. row ***************************\n       id: 1\n     name: wxnacy\n   is_del: 0\ncreate_ts: 2017-08-08 07:46:42\nupdate_ts: 2017-08-08 07:46:42\n1 row in set (0.00 sec)\n```\n## 以html格式输出\n使用mysql客户端的参数–html或者-T，则所有SQL的查询结果会自动生成为html的table代码\n```mysql\n$ mysql -u root --html -p\nmysql> select * from user;\n```\n```html\n<TABLE BORDER=1><TR><TH>id</TH><TH>name</TH><TH>is_del</TH><TH>create_ts</TH> <TH>update_ts</TH></TR><TR><TD>1</TD><TD>wxnacy</TD><TD>0</TD><TD>2017-08-08 07:46:42</TD><TD>2017-08-08 07:46:42</TD></TR></TABLE>\n```\n## 以xml格式输出\n使用mysql客户端的参数–xml或者-X选项，可以将结果输出为xml格式\n```mysql\n$ mysql -u root --xml -p\nmysql> select * from user;\n```\n```xml\n<?xml version=\"1.0\"?>\n\n<resultset statement=\"select * from user;\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n  <row>\n\t<field name=\"id\">1</field>\n\t<field name=\"name\">wxnacy</field>\n\t<field name=\"is_del\">0</field>\n\t<field name=\"create_ts\">2017-08-08 07:46:42</field>\n\t<field name=\"update_ts\">2017-08-08 07:46:42</field>\n  </row>\n</resultset>\n```\n## 使用pager进入more或less查看结果\n当select查询结果很多时，一屏幕往往无法装下。使用pager命令后在进行select命令，可以进入类似linux中more或less查看文件的效果\n```mysql\nmysql> pager more\nPAGER set to 'more'\nmysql> select * from user;\n...\nmysql> nopager #退出pager状态\nPAGER set to stdout\n```\n\n\n","source":"_posts/mysql-2017-08-09-select-format.md","raw":"---\ntitle: mysql select 格式化输出\ndate: 2017-08-09\ntags: [mysql]\n---\n\n## 使用\\G输出结果按行垂直显示结果\n当使用命令 select 结果，如果表属性特别多的时候，查看起来非常难受，在 select 语句\n后使用`\\G`(必须大写)，可以让结果按行垂直显示\n```mysql\nmysql> select * from user\\G;\n```\n```mysql\n\n*************************** 1. row ***************************\n       id: 1\n     name: wxnacy\n   is_del: 0\ncreate_ts: 2017-08-08 07:46:42\nupdate_ts: 2017-08-08 07:46:42\n1 row in set (0.00 sec)\n```\n## 以html格式输出\n使用mysql客户端的参数–html或者-T，则所有SQL的查询结果会自动生成为html的table代码\n```mysql\n$ mysql -u root --html -p\nmysql> select * from user;\n```\n```html\n<TABLE BORDER=1><TR><TH>id</TH><TH>name</TH><TH>is_del</TH><TH>create_ts</TH> <TH>update_ts</TH></TR><TR><TD>1</TD><TD>wxnacy</TD><TD>0</TD><TD>2017-08-08 07:46:42</TD><TD>2017-08-08 07:46:42</TD></TR></TABLE>\n```\n## 以xml格式输出\n使用mysql客户端的参数–xml或者-X选项，可以将结果输出为xml格式\n```mysql\n$ mysql -u root --xml -p\nmysql> select * from user;\n```\n```xml\n<?xml version=\"1.0\"?>\n\n<resultset statement=\"select * from user;\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n  <row>\n\t<field name=\"id\">1</field>\n\t<field name=\"name\">wxnacy</field>\n\t<field name=\"is_del\">0</field>\n\t<field name=\"create_ts\">2017-08-08 07:46:42</field>\n\t<field name=\"update_ts\">2017-08-08 07:46:42</field>\n  </row>\n</resultset>\n```\n## 使用pager进入more或less查看结果\n当select查询结果很多时，一屏幕往往无法装下。使用pager命令后在进行select命令，可以进入类似linux中more或less查看文件的效果\n```mysql\nmysql> pager more\nPAGER set to 'more'\nmysql> select * from user;\n...\nmysql> nopager #退出pager状态\nPAGER set to stdout\n```\n\n\n","slug":"mysql-2017-08-09-select-format","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2auu01265gqowpn1p6b3"},{"title":"mysql 小技巧","date":"2017-08-09T00:00:00.000Z","_content":"\n## 使用tee指定输入日志\ntee命令可以将mysql操作日志输出到指定文件中，如果文件已存在则追加。命令行参数可以使用--tee=file_path，命令中可以使用tee或\\T,想要退出使用日志可以使用\\t\n```mysql\n$ mysql -u root -p --tee=mysql.log\nLogging to file 'mysql.log'\nmysql> tee mysql.log 或 \\T mysql.log\nLogging to file 'mysql.log'\nmysql> \\t mysql.log\nOutfile disabled\n```\n## 使用os命令\n```mysql\nmysql> system uname;\nDarwin\nmysql> \\! uname;\nDarwin\n```\n## 执行sql文件\n```mysql\nmysql> source mysql.sql\n```\n\n","source":"_posts/mysql-2017-08-09-skill.md","raw":"---\ntitle: mysql 小技巧\ndate: 2017-08-09\ntags: [mysql]\n---\n\n## 使用tee指定输入日志\ntee命令可以将mysql操作日志输出到指定文件中，如果文件已存在则追加。命令行参数可以使用--tee=file_path，命令中可以使用tee或\\T,想要退出使用日志可以使用\\t\n```mysql\n$ mysql -u root -p --tee=mysql.log\nLogging to file 'mysql.log'\nmysql> tee mysql.log 或 \\T mysql.log\nLogging to file 'mysql.log'\nmysql> \\t mysql.log\nOutfile disabled\n```\n## 使用os命令\n```mysql\nmysql> system uname;\nDarwin\nmysql> \\! uname;\nDarwin\n```\n## 执行sql文件\n```mysql\nmysql> source mysql.sql\n```\n\n","slug":"mysql-2017-08-09-skill","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2auv01285gqorijh2o87"},{"title":"2017-08-11 新建用户行为表，新建trigger完成用户总分数更新","date":"2017-08-11T00:00:00.000Z","_content":"\n> 今天练习新建用户行为表user_event，并新建trigger做到更新用户总分数\n\n## 新建user_event\n```mysql\ndrop table if exists `user_event`;\ncreate table `user_event`(\n\tid int(11) not null auto_increment,\n\tuser_id int(11) not null comment '用户id',\n\ttype varchar(32) not null comment '行为类型',\n\tresource_id int(11) not null default 0 comment '资源id',\n\tresource_type varchar(32) not null default '' comment '资源类型',\n\tval_num int(11) not null default 0 comment '备用int值',\n\tval_str varchar(512) not null default '' comment '备用str值',\n\text JSON default null comment '扩展',\n\tis_del tinyint(1) not null default 0 comment '是否删除',\n\tcreate_ts timestamp not null default current_timestamp comment '创建时间',\n\tupdate_ts timestamp not null default current_timestamp on update current_timestamp comment '修改时间',\n\tprimary key(`id`)\n)engine=InnoDB default charset=utf8mb4 comment '用户行为表';\n```\n\n## 用户表添加总分数和等级字段\n```mysql\nalter table user add column rank int(11) not null default 0 comment '排行';\nalter table user add column score int(11) not null default 0 comment '积分';\n```\n\n## 新建trigger\n```mysql\ndrop trigger if exists `insert_user_event`;\ndelimiter $\ncreate trigger `insert_user_event` after insert on `user_event` for each row \nbegin\n\tdeclare total_score int;\n\tif (new.type = 'get_score') then\n\t\tselect sum(val_num) into total_score from user_event where user_id = new.user_id and type  = 'get_score';\n\t\tupdate user set score = total_score where id = new.user_id;\n\tend if;\nend $\ndelimiter ;\n```\n\n## 运行\n```mysql\ninsert into user_event (user_id,type,val_num) values (1,'get_score',200);\ninsert into user_event (user_id,type,val_num) values (1,'get_score',200);\nselect * from user where id = 1;\n```\n运行后user中score应该等于400\n\n","source":"_posts/mysql-2017-08-11-item-daily.md","raw":"---\ntitle: 2017-08-11 新建用户行为表，新建trigger完成用户总分数更新\ndate: 2017-08-11\ntags: [mysql]\n---\n\n> 今天练习新建用户行为表user_event，并新建trigger做到更新用户总分数\n\n## 新建user_event\n```mysql\ndrop table if exists `user_event`;\ncreate table `user_event`(\n\tid int(11) not null auto_increment,\n\tuser_id int(11) not null comment '用户id',\n\ttype varchar(32) not null comment '行为类型',\n\tresource_id int(11) not null default 0 comment '资源id',\n\tresource_type varchar(32) not null default '' comment '资源类型',\n\tval_num int(11) not null default 0 comment '备用int值',\n\tval_str varchar(512) not null default '' comment '备用str值',\n\text JSON default null comment '扩展',\n\tis_del tinyint(1) not null default 0 comment '是否删除',\n\tcreate_ts timestamp not null default current_timestamp comment '创建时间',\n\tupdate_ts timestamp not null default current_timestamp on update current_timestamp comment '修改时间',\n\tprimary key(`id`)\n)engine=InnoDB default charset=utf8mb4 comment '用户行为表';\n```\n\n## 用户表添加总分数和等级字段\n```mysql\nalter table user add column rank int(11) not null default 0 comment '排行';\nalter table user add column score int(11) not null default 0 comment '积分';\n```\n\n## 新建trigger\n```mysql\ndrop trigger if exists `insert_user_event`;\ndelimiter $\ncreate trigger `insert_user_event` after insert on `user_event` for each row \nbegin\n\tdeclare total_score int;\n\tif (new.type = 'get_score') then\n\t\tselect sum(val_num) into total_score from user_event where user_id = new.user_id and type  = 'get_score';\n\t\tupdate user set score = total_score where id = new.user_id;\n\tend if;\nend $\ndelimiter ;\n```\n\n## 运行\n```mysql\ninsert into user_event (user_id,type,val_num) values (1,'get_score',200);\ninsert into user_event (user_id,type,val_num) values (1,'get_score',200);\nselect * from user where id = 1;\n```\n运行后user中score应该等于400\n\n","slug":"mysql-2017-08-11-item-daily","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2auw012a5gqo2mnsyydu"},{"title":"2017-08-12 新建等级表，完善`insert_user_event`","date":"2017-08-12T00:00:00.000Z","_content":"\n> 今天练习目标，新建等级表，完善`insert_user_event`做到自动更新用户总积分和当前等级\n\n## 新建等级表\n```mysql\ndrop table if exists `rank`;\ncreate table `rank`(\n\tid int(11) not null auto_increment,\n\trank int(11) not null default 0 comment '等级',\n\tname varchar(32) not null  comment '等级名',\n\tscore int(11) not null comment '等级所需值',\n\tprimary key(`id`)\n)engine=InnoDB default charset=utf8mb4 comment '登记表';\n```\n\n## 插入数据\n```mysql\ninsert into rank (rank,name,score) values (1,'等级1',0);\ninsert into rank (rank,name,score) values (2,'等级2',200);\ninsert into rank (rank,name,score) values (3,'等级3',500);\ninsert into rank (rank,name,score) values (4,'等级4',1000);\ninsert into rank (rank,name,score) values (5,'等级5',2000);\ninsert into rank (rank,name,score) values (6,'等级6',5000);\ninsert into rank (rank,name,score) values (7,'等级7',10000);\ninsert into rank (rank,name,score) values (8,'等级8',20000);\n```\n\n## 重写trigger\n```mysql\ndrop trigger if exists `insert_user_event`;\nDELIMITER $\ncreate trigger `insert_user_event` after insert on user_event for each row  \nbegin\n\tdeclare total_score int;\n\tdeclare rank_val int;\n\tif (new.type = 'get_score') then\n\t\tselect sum(val_num) into total_score from user_event where user_id = new.user_id and type = 'get_score' and is_del = 0;\n\t\tselect rank into rank_val  from rank where score <= total_score order by score desc limit 1;\n\t\tupdate user set rank = rank_val , score = total_score where id = new.user_id;\n\t\t\n\tend if;\nend $\nDELIMITER ;\n\n```\n\n## 运行\n```mysql\nupdate user set rank = 0 , score = 0 where id = 1;\nupdate user_event set is_del = 1 where user_id = 1 and type = 'get_score';\ninsert into user_event (user_id,type,val_num) values (1,'get_score',501);\nselect * from user where id = 1;\n\n```\n\n运行后，用户rank=1 score=501\n\n","source":"_posts/mysql-2017-08-12-item-daily.md","raw":"---\ntitle: 2017-08-12 新建等级表，完善`insert_user_event`\ndate: 2017-08-12\ntags: [mysql]\n---\n\n> 今天练习目标，新建等级表，完善`insert_user_event`做到自动更新用户总积分和当前等级\n\n## 新建等级表\n```mysql\ndrop table if exists `rank`;\ncreate table `rank`(\n\tid int(11) not null auto_increment,\n\trank int(11) not null default 0 comment '等级',\n\tname varchar(32) not null  comment '等级名',\n\tscore int(11) not null comment '等级所需值',\n\tprimary key(`id`)\n)engine=InnoDB default charset=utf8mb4 comment '登记表';\n```\n\n## 插入数据\n```mysql\ninsert into rank (rank,name,score) values (1,'等级1',0);\ninsert into rank (rank,name,score) values (2,'等级2',200);\ninsert into rank (rank,name,score) values (3,'等级3',500);\ninsert into rank (rank,name,score) values (4,'等级4',1000);\ninsert into rank (rank,name,score) values (5,'等级5',2000);\ninsert into rank (rank,name,score) values (6,'等级6',5000);\ninsert into rank (rank,name,score) values (7,'等级7',10000);\ninsert into rank (rank,name,score) values (8,'等级8',20000);\n```\n\n## 重写trigger\n```mysql\ndrop trigger if exists `insert_user_event`;\nDELIMITER $\ncreate trigger `insert_user_event` after insert on user_event for each row  \nbegin\n\tdeclare total_score int;\n\tdeclare rank_val int;\n\tif (new.type = 'get_score') then\n\t\tselect sum(val_num) into total_score from user_event where user_id = new.user_id and type = 'get_score' and is_del = 0;\n\t\tselect rank into rank_val  from rank where score <= total_score order by score desc limit 1;\n\t\tupdate user set rank = rank_val , score = total_score where id = new.user_id;\n\t\t\n\tend if;\nend $\nDELIMITER ;\n\n```\n\n## 运行\n```mysql\nupdate user set rank = 0 , score = 0 where id = 1;\nupdate user_event set is_del = 1 where user_id = 1 and type = 'get_score';\ninsert into user_event (user_id,type,val_num) values (1,'get_score',501);\nselect * from user where id = 1;\n\n```\n\n运行后，用户rank=1 score=501\n\n","slug":"mysql-2017-08-12-item-daily","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2auy012c5gqotshwiu5t"},{"title":"Mysql '/tmp/mysql.sock' 错误类型解决方法","date":"2017-09-15T00:00:00.000Z","_content":"\n> Can't connect to local MySQL server through socket '/tmp/mysql.sock'\n\n一般情况下我装好 mysql 后就不会在动它了，因为一不留神就出各种错误信息，在不记得\n多少次 google 这个错误之后，我决定把它记下来\n<!-- more -->\n网上很多解决方法都是说 mysql 服务找不到 **/tmp/mysql.sock** 文件，那我们找到它\n不就行了，\n```bash\n$ find / -name mysql.sock\n/var/lib/mysql/mysql.sock\n$ ln -s /var/lib/mysql/mysql.sock   /tmp/mysql.sock\n```\n先找到这个文件，然后建立软连接到 */tmp/mysql.sock* ，然而到我试验的时候，完全找\n不到这个文件\n\n在翻阅资料后，发现 */tmp/mysql.sock* 是在 mysql 启动后生成的临时文件，也就是说\n不成功启动 mysql 就不会有这个文件，我的方向完全错误，折腾到筋疲力尽，最后我只得\n找到各种日志查看\n```bash\n$ mysqld status\n```\n通过查看 mysql 运行状态状态发现这货\n```bash\n[ERROR] unknown variable 'prompt=\\c \\U[\\d] \\D> '\n```\n不管为啥不通过先干掉再说，重启 mysql 继续查看状态，又出现这货\n```bash\n[ERROR] InnoDB: Unable to lock ./ibdata1 error\n```\n说明当前又进行 mysql 进程再启动\n```bash\n$ kill -9 `ps aux | grep mysql | awk '{print $2}'`\n```\n通过这段命令强行 kill 掉所以 mysql 进程\n```bash\n$ mysql.service start\n```\n成功\n\n通过这次解决问题，报错 **/tmp/mysql.sock** 不一定是它的问题，关键还是看日志，对\n的错的全在日志里\n","source":"_posts/mysql-2017-09-15-tmp-mysql-sock.md","raw":"---\ntitle: Mysql '/tmp/mysql.sock' 错误类型解决方法\ndate: 2017-09-15\ntags: [mysql]\n---\n\n> Can't connect to local MySQL server through socket '/tmp/mysql.sock'\n\n一般情况下我装好 mysql 后就不会在动它了，因为一不留神就出各种错误信息，在不记得\n多少次 google 这个错误之后，我决定把它记下来\n<!-- more -->\n网上很多解决方法都是说 mysql 服务找不到 **/tmp/mysql.sock** 文件，那我们找到它\n不就行了，\n```bash\n$ find / -name mysql.sock\n/var/lib/mysql/mysql.sock\n$ ln -s /var/lib/mysql/mysql.sock   /tmp/mysql.sock\n```\n先找到这个文件，然后建立软连接到 */tmp/mysql.sock* ，然而到我试验的时候，完全找\n不到这个文件\n\n在翻阅资料后，发现 */tmp/mysql.sock* 是在 mysql 启动后生成的临时文件，也就是说\n不成功启动 mysql 就不会有这个文件，我的方向完全错误，折腾到筋疲力尽，最后我只得\n找到各种日志查看\n```bash\n$ mysqld status\n```\n通过查看 mysql 运行状态状态发现这货\n```bash\n[ERROR] unknown variable 'prompt=\\c \\U[\\d] \\D> '\n```\n不管为啥不通过先干掉再说，重启 mysql 继续查看状态，又出现这货\n```bash\n[ERROR] InnoDB: Unable to lock ./ibdata1 error\n```\n说明当前又进行 mysql 进程再启动\n```bash\n$ kill -9 `ps aux | grep mysql | awk '{print $2}'`\n```\n通过这段命令强行 kill 掉所以 mysql 进程\n```bash\n$ mysql.service start\n```\n成功\n\n通过这次解决问题，报错 **/tmp/mysql.sock** 不一定是它的问题，关键还是看日志，对\n的错的全在日志里\n","slug":"mysql-2017-09-15-tmp-mysql-sock","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2auz012e5gqo0qslf3ox"},{"title":"npm 使用","date":"2017-09-12T00:00:00.000Z","_content":"\n\n## 安装\n因为 npm 是 **NodeJS** 的包管理工具，所以下载 **NodeJS** 后自动会安装 npm\n\n<!-- more -->\n\n### Mac\n```bash\n$ brew install node\n```\n\n## 命令\n```bash\nnpm -v                      # 查看版本\nsudo npm install <name> -g  # 全局安装\nnpm install <name>          # 本地安装\nnpm install <name> --save   # 本地安装，并将包信息保存到 package.json 中\nnpm list -g                 # 查看所有全局安装的模块\nnpm list <name>             # 查看某个模块的版本号\nnpm uninstall <name>        # 卸载模块\nnpm ls                      # 卸载后，你可以到 /node_modules/ 目录下查看包是否还存在\nnpm update <name>           # 更新模块\nnpm search <name>           # 搜索模块\nnpm init                    # 创建模块，生成 package.json\nnpm publish                 # 发布模块\n```\n","source":"_posts/nodejs-2017-09-12-npm.md","raw":"---\ntitle: npm 使用\ndate: 2017-09-12\ntags: [nodejs]\n---\n\n\n## 安装\n因为 npm 是 **NodeJS** 的包管理工具，所以下载 **NodeJS** 后自动会安装 npm\n\n<!-- more -->\n\n### Mac\n```bash\n$ brew install node\n```\n\n## 命令\n```bash\nnpm -v                      # 查看版本\nsudo npm install <name> -g  # 全局安装\nnpm install <name>          # 本地安装\nnpm install <name> --save   # 本地安装，并将包信息保存到 package.json 中\nnpm list -g                 # 查看所有全局安装的模块\nnpm list <name>             # 查看某个模块的版本号\nnpm uninstall <name>        # 卸载模块\nnpm ls                      # 卸载后，你可以到 /node_modules/ 目录下查看包是否还存在\nnpm update <name>           # 更新模块\nnpm search <name>           # 搜索模块\nnpm init                    # 创建模块，生成 package.json\nnpm publish                 # 发布模块\n```\n","slug":"nodejs-2017-09-12-npm","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2av1012g5gqowd6ls4if"},{"title":"openresty 安装","date":"2017-08-16T00:00:00.000Z","_content":"\n专辑:[openresty 学习笔记](/openresty/2017/08/16/album-study-notes)\n\n## Mac OS\n推荐使用`brew`安装\n```bash\nbrew install homebrew/nginx/openresty\nbrew update\nbrew install pcre openssl\n```\n\n## CentOS\n你可以在你的 CentOS 系统中添加 openresty 仓库，这样就可以便于未来安装或更新我们的软件包（通过 yum update 命令）。运行下面的命令就可以添加我们的仓库：\n\n    sudo yum install yum-utils\n    sudo yum-config-manager --add-repo https://openresty.org/package/centos/openresty.repo\n然后就可以像下面这样安装软件包，比如 openresty：\n\n    sudo yum install openresty\n如果你想安装命令行工具 resty，那么可以像下面这样安装 openresty-resty 包：\n\n    sudo yum install openresty-resty\n命令行工具 opm 在 openresty-opm 包里，而 restydoc 工具在 openresty-doc 包里头。\n\n列出所有 openresty 仓库里头的软件包：\n\n    sudo yum --disablerepo=\"*\" --enablerepo=\"openresty\" list available","source":"_posts/openresty-2017-08-16-install.md","raw":"---\ntitle: openresty 安装\ndate: 2017-08-16\ntags: [openresty]\n---\n\n专辑:[openresty 学习笔记](/openresty/2017/08/16/album-study-notes)\n\n## Mac OS\n推荐使用`brew`安装\n```bash\nbrew install homebrew/nginx/openresty\nbrew update\nbrew install pcre openssl\n```\n\n## CentOS\n你可以在你的 CentOS 系统中添加 openresty 仓库，这样就可以便于未来安装或更新我们的软件包（通过 yum update 命令）。运行下面的命令就可以添加我们的仓库：\n\n    sudo yum install yum-utils\n    sudo yum-config-manager --add-repo https://openresty.org/package/centos/openresty.repo\n然后就可以像下面这样安装软件包，比如 openresty：\n\n    sudo yum install openresty\n如果你想安装命令行工具 resty，那么可以像下面这样安装 openresty-resty 包：\n\n    sudo yum install openresty-resty\n命令行工具 opm 在 openresty-opm 包里，而 restydoc 工具在 openresty-doc 包里头。\n\n列出所有 openresty 仓库里头的软件包：\n\n    sudo yum --disablerepo=\"*\" --enablerepo=\"openresty\" list available","slug":"openresty-2017-08-16-install","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2av2012i5gqovyb6ok09"},{"title":"pyenv 常用命令","date":"2017-08-10T00:00:00.000Z","_content":"\n## pyenv\n### 查看可安装版本\n```bash\npyenv install -list\n```\n### 安装某个版本\n```bash\npyenv install -v 3.5.0\n```\n### 查看本地版本列表\n```bash\n$ pyenv versions\n\n* system (set by /home/wxnacy/.pyenv/version) # 系统python环境 *号代表当前环境版本\n  3.5.0 # 刚下载的3.5.0版本\n```\n### 查看当前环境版本\n```bash\n$ pyenv version\nsystem (set by /home/wxnacy/.pyenv/version)\n```\n\n### 设置全局为某一个环境\n```bash\n$ pyenv global 3.5.0\n$ pyenv version # 查看当前环境\n3.5.0 (set by /home/wxnacy/project/project_350/.python-version)\n```\n\n\n### 为项目设置单独环境\n```bash\n$ cd project\n$ pyenv local 3.5.0 # 使用local命令为某个目录单独设置目录\n$ pyenv version\n3.5.0 (set by /home/wxnacy/project/project_350/.python-version)\n\n$ cd ..\n$ pyenv version # 退出目录查看环境没有改变\nsystem (set by /home/wxnacy/.pyenv/version)\n```\n\n\n\n## virtualenv\n假如我们有多个项目都是用3.5.0的环境，但是又不想让他们公用一个环境该怎么办？\n使用virtualenv可以为某一个python版本创建一个干净的虚拟机环境\n### 创建虚拟机\n```bash\n$ pyenv virtualenv 3.5.0 env_350\n$ pyenv versions\n* system (set by /home/wxnacy/.pyenv/version)\n  3.5.0\n  3.5.0/envs/env_350\n  env_350\n```\n查看环境后我们发现多了两个环境`3.5.0/envs/env_350`和`env_350`，这两个是同一个\n### 指定当前进程环境\n```bash\npyenv activate env_350\n```\n该命令只能指定当前进程的环境，退出shell后重新进入，发现环境又变回之前的环境\n### 当前进行退出activate\n\n```bash\n$ pynev deactivate\n```\n当然virtualenv生成的虚拟环境也可以配合`global`和`local`等pyenv命令配合使用\n\n","source":"_posts/python-2017-08-10-pyenv-cmd.md","raw":"---\ntitle: pyenv 常用命令\ndate: 2017-08-10\ntags: [python]\n---\n\n## pyenv\n### 查看可安装版本\n```bash\npyenv install -list\n```\n### 安装某个版本\n```bash\npyenv install -v 3.5.0\n```\n### 查看本地版本列表\n```bash\n$ pyenv versions\n\n* system (set by /home/wxnacy/.pyenv/version) # 系统python环境 *号代表当前环境版本\n  3.5.0 # 刚下载的3.5.0版本\n```\n### 查看当前环境版本\n```bash\n$ pyenv version\nsystem (set by /home/wxnacy/.pyenv/version)\n```\n\n### 设置全局为某一个环境\n```bash\n$ pyenv global 3.5.0\n$ pyenv version # 查看当前环境\n3.5.0 (set by /home/wxnacy/project/project_350/.python-version)\n```\n\n\n### 为项目设置单独环境\n```bash\n$ cd project\n$ pyenv local 3.5.0 # 使用local命令为某个目录单独设置目录\n$ pyenv version\n3.5.0 (set by /home/wxnacy/project/project_350/.python-version)\n\n$ cd ..\n$ pyenv version # 退出目录查看环境没有改变\nsystem (set by /home/wxnacy/.pyenv/version)\n```\n\n\n\n## virtualenv\n假如我们有多个项目都是用3.5.0的环境，但是又不想让他们公用一个环境该怎么办？\n使用virtualenv可以为某一个python版本创建一个干净的虚拟机环境\n### 创建虚拟机\n```bash\n$ pyenv virtualenv 3.5.0 env_350\n$ pyenv versions\n* system (set by /home/wxnacy/.pyenv/version)\n  3.5.0\n  3.5.0/envs/env_350\n  env_350\n```\n查看环境后我们发现多了两个环境`3.5.0/envs/env_350`和`env_350`，这两个是同一个\n### 指定当前进程环境\n```bash\npyenv activate env_350\n```\n该命令只能指定当前进程的环境，退出shell后重新进入，发现环境又变回之前的环境\n### 当前进行退出activate\n\n```bash\n$ pynev deactivate\n```\n当然virtualenv生成的虚拟环境也可以配合`global`和`local`等pyenv命令配合使用\n\n","slug":"python-2017-08-10-pyenv-cmd","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2av3012l5gqosi196zkt"},{"title":"Python 操作目录文件相关命令","date":"2017-08-11T00:00:00.000Z","_content":"\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport os\nimport sys\n\ncur_file = sys.argv[0]              # ==> 获取当前文件名\nprint(cur_file)\n# python test.py                    ==> test.py\n# python test/test.py               ==> test/test.py\n# python /Users/wxnacy/test/test.py ==> /Users/wxnacy/test/test.py\n# __file__ 可以达到同样效果\n\ncmd_dir = os.getcwd()               # ==> 获取命令运行目录绝对路径\nprint(cmd_dir)\n# python test.py                    ==> /Users/wxnacy/test\n# python test/test.py               ==> /Users/wxnacy\n\nprint(os.listdir(cmd_dir))          # ==> 获取目录下的所有文件\nprint(os.path.exists(cmd_dir))      # ==> 判断文件或目录是否存在\nprint(os.path.isfile(cmd_dir))      # ==> 判断是否为文件\nprint(os.path.isdir(cmd_dir))       # ==> 判断是否为目录\n\ndirname = os.path.dirname(cur_file) # ==> 获取文件目录名\nprint(dirname)\n# os.path.dirname('test.py')        ==> 空\n# os.path.dirname('test/test.py')   ==> test\n\nabspath = os.path.abspath(cur_file) # ==> 获取文件名的绝对路径\nprint(abspath)\n# os.path.abspath('')               ==> 运行命令所在目录\n# os.path.abspath('test/test.py')   ==> /Users/wxnacy/test/test.py\n# os.path.abspath('/Users/wxnacy')  ==> /Users/wxnacy\n```\n","source":"_posts/python-2017-08-11-os_file.md","raw":"---\ntitle: Python 操作目录文件相关命令\ndate: 2017-08-11\ntags: [python]\n---\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\nimport os\nimport sys\n\ncur_file = sys.argv[0]              # ==> 获取当前文件名\nprint(cur_file)\n# python test.py                    ==> test.py\n# python test/test.py               ==> test/test.py\n# python /Users/wxnacy/test/test.py ==> /Users/wxnacy/test/test.py\n# __file__ 可以达到同样效果\n\ncmd_dir = os.getcwd()               # ==> 获取命令运行目录绝对路径\nprint(cmd_dir)\n# python test.py                    ==> /Users/wxnacy/test\n# python test/test.py               ==> /Users/wxnacy\n\nprint(os.listdir(cmd_dir))          # ==> 获取目录下的所有文件\nprint(os.path.exists(cmd_dir))      # ==> 判断文件或目录是否存在\nprint(os.path.isfile(cmd_dir))      # ==> 判断是否为文件\nprint(os.path.isdir(cmd_dir))       # ==> 判断是否为目录\n\ndirname = os.path.dirname(cur_file) # ==> 获取文件目录名\nprint(dirname)\n# os.path.dirname('test.py')        ==> 空\n# os.path.dirname('test/test.py')   ==> test\n\nabspath = os.path.abspath(cur_file) # ==> 获取文件名的绝对路径\nprint(abspath)\n# os.path.abspath('')               ==> 运行命令所在目录\n# os.path.abspath('test/test.py')   ==> /Users/wxnacy/test/test.py\n# os.path.abspath('/Users/wxnacy')  ==> /Users/wxnacy\n```\n","slug":"python-2017-08-11-os-file","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2av5012n5gqokel73q9r"},{"title":"Linux 环境下安装 pyenv 和 virtualenv","date":"2017-08-10T00:00:00.000Z","_content":"\n废话不多直接上命令\n## 下载\nCentOS:\n```bash\n$ yum -y install git\n$ curl -L https://raw.githubusercontent.com/yyuu/pyenv-installer/master/bin/pyenv-installer | bash\n$ yum -y install gcc readline readline-devel readline-static openssl \\\n    openssl-devel openssl-static sqlite-devel bzip2-devel bzip2-libs\n```\nUbuntu\n```bash\n$ apt-get update\n$ apt-get -y install git gcc make patch zlib1g.dev libgdbm-dev libssl-dev \\\n    libsqlite3-dev libbz2-dev libreadline-dev\n$ git clone https://github.com/pyenv/pyenv.git ~/.pyenv\n```\n\n## 配置环境变量\nvim ~/.bash_profile\n```bash\nexport PYENV_ROOT=\"$HOME/.pyenv\"\nexport PATH=\"$PYENV_ROOT/bin:$PATH\"\nexport PYENV_VIRTUALENV_DISABLE_PROMPT=1\neval \"$(pyenv init -)\"\neval \"$(pyenv virtualenv-init -)\"\n```\n\n## 升级\n```bash\n$ pyenv update\n```\n## 卸载\n```bash\nrm -rf ~/.pyenv\n然后把~/.bash_profile环境变量配置中的添加的删掉\n```\n\n","source":"_posts/python-2017-08-10-pyenv-linux.md","raw":"---\ntitle: Linux 环境下安装 pyenv 和 virtualenv\ndate: 2017-08-10\ntags: [python]\n---\n\n废话不多直接上命令\n## 下载\nCentOS:\n```bash\n$ yum -y install git\n$ curl -L https://raw.githubusercontent.com/yyuu/pyenv-installer/master/bin/pyenv-installer | bash\n$ yum -y install gcc readline readline-devel readline-static openssl \\\n    openssl-devel openssl-static sqlite-devel bzip2-devel bzip2-libs\n```\nUbuntu\n```bash\n$ apt-get update\n$ apt-get -y install git gcc make patch zlib1g.dev libgdbm-dev libssl-dev \\\n    libsqlite3-dev libbz2-dev libreadline-dev\n$ git clone https://github.com/pyenv/pyenv.git ~/.pyenv\n```\n\n## 配置环境变量\nvim ~/.bash_profile\n```bash\nexport PYENV_ROOT=\"$HOME/.pyenv\"\nexport PATH=\"$PYENV_ROOT/bin:$PATH\"\nexport PYENV_VIRTUALENV_DISABLE_PROMPT=1\neval \"$(pyenv init -)\"\neval \"$(pyenv virtualenv-init -)\"\n```\n\n## 升级\n```bash\n$ pyenv update\n```\n## 卸载\n```bash\nrm -rf ~/.pyenv\n然后把~/.bash_profile环境变量配置中的添加的删掉\n```\n\n","slug":"python-2017-08-10-pyenv-linux","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2av6012p5gqod09qivm1"},{"title":"Flask 如何配置多环境","date":"2017-08-15T00:00:00.000Z","_content":"\n> 一个完整的web项目都需要配置数据库连接和开发环境、生产环境灵活切换，今天来在\n各个环境中切换数据库连接\n\n<!-- more -->\n\n<!-- toc -->\n\n## 首先添加指定环境脚本\n在项目根目录下创建环境脚本 `touch env.sh` 并编辑\n```bash\n#!/usr/bin/env bash\n\nENV=$1\n\nif [ ! ${ENV} ]\nthen\n    ENV=local\nfi\n\nexport PYTHONPATH=./        # 项目跟目录\nexport FLASK_CONFIG=${ENV}  # 当前环境 可选 local product dev test\n```\n\n该文件起到两个作用\n1、PYTHONPATH：项目根目录。\n2、FLASK_CONFIG：当前环境,使用方法\n\n然后执行命令，使配置生效\n```bash\n$ source env.sh ${env}      # env=local|product|dev|test 默认local\n```\n\n## 添加环境信息文件\n```bash\n$ mkdir app\n$ cd app\n$ touch local_config.py\n$ vim local_config.py\n```\n\n```python\n#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n'''配置文件程序'''\n__author__ = \"wxnacy(wxnacy@gmail.com)\"\n__copyright__ = \"Copyright of wxnacy (2017).\"\n\nclass ProductionConfig():\n    DEBUG = False\n    SQLALCHEMY_DATABASE_URI = 'mysql+pymysql://root:pass@prod.server.org:3306/db_name?charset=utf8mb4'\n\nclass DevelopmentConfig():\n    DEBUG = True\n    SQLALCHEMY_DATABASE_URI = 'mysql+pymysql://root:pass@dev.server.org:3306/db_name?charset=utf8mb4'\n\nclass TestingConfig():\n    DEBUG = True\n\nclass LocalConfig():\n    DEBUG = True\n    SQLALCHEMY_DATABASE_URI = 'mysql+pymysql://root:pass@127.0.0.1:3306/db_name?charset=utf8mb4'\n\n\n```\n该文件配置了各个环境数据库连接信息\n\n## 添加文件config.py来根据环境读取当前环境内容\n```python\n#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n'''配置信息'''\n__author__ = \"wxnacy(wxnacy@gmail.com)\"\n__copyright__ = \"Copyright of wxnacy (2017).\"\n\n\nfrom flask import Flask\nfrom werkzeug.contrib.fixers import ProxyFix\nimport os\n\nCONFIG_NAME_MAPPER = {\n    'local': 'app.local_config.LocalConfig',\n    'product': 'app.local_config.ProductionConfig',\n    'dev': 'app.local_config.DevelopmentConfig',\n    'test': 'app.local_config.TestingConfig'\n}\n\ndef create_app(flask_config_name=None):\n    \"\"\"\n    创建配置\n    :return:\n    \"\"\"\n    app = Flask(__name__)\n    app.wsgi_app = ProxyFix(app.wsgi_app)\n    env_flask_config_name = os.getenv('FLASK_CONFIG')\n    config_mapper_name = flask_config_name or env_flask_config_name or 'local'\n    config_name = CONFIG_NAME_MAPPER[config_mapper_name]\n    app.config.from_object(config_name)\n\n    return app\n\n\napp = create_app()\n\n```\n\n## 修改run.py 来读取环境内容\n```python\n#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n'''配置信息'''\n__author__ = \"wxnacy(wxnacy@gmail.com)\"\n__copyright__ = \"Copyright of wxnacy (2017).\"\n\n\nfrom app.config import app\n\n@app.route('/test')\ndef mysql():\n    return app.config['SQLALCHEMY_DATABASE_URI']\n\napp.run()\n```\n\n现在项目的目录结构为\n```bash\nmyproject:\n    app:\n        config.py\n        local_config.py\n    run.py\n    env.sh\n```\n\n## 运行\n### 本地环境\n```bash\n$ source env.sh\n$ python run.py\n$ curl http://localhost:5000/test\nmysql+pymysql://root:pass@127.0.0.1:3306/db_name?charset=utf8mb4\n\n$ source env.sh product\n$ python run.py\n$ curl http://localhost:5000/test\nmysql+pymysql://root:pass@prod.server.org:3306/db_name?charset=utf8mb4\n```\n","source":"_posts/python-2017-08-15-flask-env-config.md","raw":"---\ntitle: Flask 如何配置多环境\ndate: 2017-08-15\ntags: [python, flask]\n---\n\n> 一个完整的web项目都需要配置数据库连接和开发环境、生产环境灵活切换，今天来在\n各个环境中切换数据库连接\n\n<!-- more -->\n\n<!-- toc -->\n\n## 首先添加指定环境脚本\n在项目根目录下创建环境脚本 `touch env.sh` 并编辑\n```bash\n#!/usr/bin/env bash\n\nENV=$1\n\nif [ ! ${ENV} ]\nthen\n    ENV=local\nfi\n\nexport PYTHONPATH=./        # 项目跟目录\nexport FLASK_CONFIG=${ENV}  # 当前环境 可选 local product dev test\n```\n\n该文件起到两个作用\n1、PYTHONPATH：项目根目录。\n2、FLASK_CONFIG：当前环境,使用方法\n\n然后执行命令，使配置生效\n```bash\n$ source env.sh ${env}      # env=local|product|dev|test 默认local\n```\n\n## 添加环境信息文件\n```bash\n$ mkdir app\n$ cd app\n$ touch local_config.py\n$ vim local_config.py\n```\n\n```python\n#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n'''配置文件程序'''\n__author__ = \"wxnacy(wxnacy@gmail.com)\"\n__copyright__ = \"Copyright of wxnacy (2017).\"\n\nclass ProductionConfig():\n    DEBUG = False\n    SQLALCHEMY_DATABASE_URI = 'mysql+pymysql://root:pass@prod.server.org:3306/db_name?charset=utf8mb4'\n\nclass DevelopmentConfig():\n    DEBUG = True\n    SQLALCHEMY_DATABASE_URI = 'mysql+pymysql://root:pass@dev.server.org:3306/db_name?charset=utf8mb4'\n\nclass TestingConfig():\n    DEBUG = True\n\nclass LocalConfig():\n    DEBUG = True\n    SQLALCHEMY_DATABASE_URI = 'mysql+pymysql://root:pass@127.0.0.1:3306/db_name?charset=utf8mb4'\n\n\n```\n该文件配置了各个环境数据库连接信息\n\n## 添加文件config.py来根据环境读取当前环境内容\n```python\n#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n'''配置信息'''\n__author__ = \"wxnacy(wxnacy@gmail.com)\"\n__copyright__ = \"Copyright of wxnacy (2017).\"\n\n\nfrom flask import Flask\nfrom werkzeug.contrib.fixers import ProxyFix\nimport os\n\nCONFIG_NAME_MAPPER = {\n    'local': 'app.local_config.LocalConfig',\n    'product': 'app.local_config.ProductionConfig',\n    'dev': 'app.local_config.DevelopmentConfig',\n    'test': 'app.local_config.TestingConfig'\n}\n\ndef create_app(flask_config_name=None):\n    \"\"\"\n    创建配置\n    :return:\n    \"\"\"\n    app = Flask(__name__)\n    app.wsgi_app = ProxyFix(app.wsgi_app)\n    env_flask_config_name = os.getenv('FLASK_CONFIG')\n    config_mapper_name = flask_config_name or env_flask_config_name or 'local'\n    config_name = CONFIG_NAME_MAPPER[config_mapper_name]\n    app.config.from_object(config_name)\n\n    return app\n\n\napp = create_app()\n\n```\n\n## 修改run.py 来读取环境内容\n```python\n#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n'''配置信息'''\n__author__ = \"wxnacy(wxnacy@gmail.com)\"\n__copyright__ = \"Copyright of wxnacy (2017).\"\n\n\nfrom app.config import app\n\n@app.route('/test')\ndef mysql():\n    return app.config['SQLALCHEMY_DATABASE_URI']\n\napp.run()\n```\n\n现在项目的目录结构为\n```bash\nmyproject:\n    app:\n        config.py\n        local_config.py\n    run.py\n    env.sh\n```\n\n## 运行\n### 本地环境\n```bash\n$ source env.sh\n$ python run.py\n$ curl http://localhost:5000/test\nmysql+pymysql://root:pass@127.0.0.1:3306/db_name?charset=utf8mb4\n\n$ source env.sh product\n$ python run.py\n$ curl http://localhost:5000/test\nmysql+pymysql://root:pass@prod.server.org:3306/db_name?charset=utf8mb4\n```\n","slug":"python-2017-08-15-flask-env-config","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2av7012r5gqor303h8nj"},{"title":"SQLAlchemy 各种查询语句写法","date":"2017-08-14T00:00:00.000Z","_content":"\n<!-- toc -->\n\n## and\n\nfilter 与 filter_by 语法稍有不同\n\n```python\nUser.query.filter_by(id=1,name='win').first()\nUser.query.filter(User.id==1,User.name == 'win').first()\n```\n\n## in\n```python\nsql = User.query.filter(User.id.in_([1,2]))\nprint(sql)\n\n> select * from user where id in (1,2)\n```\n\n## or\n```python\nfrom sqlalchemy import or_\nsql = User.query.filter(or_(User.name == 'winn',User.mobile == '183'),User.email == '371')\nprint(sql)\n\n> select * from user where (name = 'winn' or mobile = '183') and email= '371'\n```\n\n## 排序\n\n```python\nfrom sqlalchemy import desc\nUser.query.order_by(create_ts).all() # 根据创建时间正序\nUser.query.order_by(desc(create_ts)).all() # 根据创建时间倒序\n```\n\n## 大于小于\n```python\nUser.query.filter(User.age >= 12,User.age < 23).all()\n```\n\n## like\n```python\nUser.query.filter(User.name.like('%win%')).all()\n```\n\n## JSON 相关\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\n# select * from user where json_field -> '$.id' = 1;\nUser.query.filter(User.json_field['id'] == 1).all()\n\n# select * from user where array_field -> '$[0]' = 1;\nUser.query.filter(User.array_field[0] == 1).all()\n\nUser.query.filter(User.array_field[].contains([1])).all()\n```\n\n","source":"_posts/python-2017-08-14-sqlalchemy-filter.md","raw":"---\ntitle: SQLAlchemy 各种查询语句写法\ndate: 2017-08-14\ntags: [python]\n---\n\n<!-- toc -->\n\n## and\n\nfilter 与 filter_by 语法稍有不同\n\n```python\nUser.query.filter_by(id=1,name='win').first()\nUser.query.filter(User.id==1,User.name == 'win').first()\n```\n\n## in\n```python\nsql = User.query.filter(User.id.in_([1,2]))\nprint(sql)\n\n> select * from user where id in (1,2)\n```\n\n## or\n```python\nfrom sqlalchemy import or_\nsql = User.query.filter(or_(User.name == 'winn',User.mobile == '183'),User.email == '371')\nprint(sql)\n\n> select * from user where (name = 'winn' or mobile = '183') and email= '371'\n```\n\n## 排序\n\n```python\nfrom sqlalchemy import desc\nUser.query.order_by(create_ts).all() # 根据创建时间正序\nUser.query.order_by(desc(create_ts)).all() # 根据创建时间倒序\n```\n\n## 大于小于\n```python\nUser.query.filter(User.age >= 12,User.age < 23).all()\n```\n\n## like\n```python\nUser.query.filter(User.name.like('%win%')).all()\n```\n\n## JSON 相关\n\n```python\n#!/usr/bin/env python\n# -*- coding:utf-8 -*-\n# Author: wxnacy(wxnacy@gmail.com)\n\n# select * from user where json_field -> '$.id' = 1;\nUser.query.filter(User.json_field['id'] == 1).all()\n\n# select * from user where array_field -> '$[0]' = 1;\nUser.query.filter(User.array_field[0] == 1).all()\n\nUser.query.filter(User.array_field[].contains([1])).all()\n```\n\n","slug":"python-2017-08-14-sqlalchemy-filter","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2av9012t5gqosoqw1eq4"},{"title":"python 配置PYTHONPATH(了解python导入模块搜索路径运作原理)","date":"2017-08-15T00:00:00.000Z","_content":"\n> python项目导入模块是必不可少的，大多数情况下，可以以来模块导入搜索路径的\n自动特性，完全不需要配置路径。不过，如果你想在用户间定义目录边界来导入文件，\n就需要知道搜索路径是如何运作的。\n\n<!-- more -->\n\n<!-- toc -->\n\n```bash\n$ python tests/test_utils.py\n\nTraceback (most recent call last):\n  File \"tests/test_utils.py\", line 7, in <module>\n    from run_api import app\nImportError: No module named 'run_api'\n\n```\n在我刚学习python时，做模块导入最长碰到的就是这个错误，我明明定义了 `run_api`\n模块，但是却总是报找不到的错误， No module No module No你妹啊，如果你也碰到这\n样的问题，你应该好好看看这篇文章\n\n## 不太好的解决办法\n```python\nimport sys\nimport os\nsys.path.append( os.path.join( os.path.dirname(__file__), os.path.pardir ) )\n```\n在 google 模块导入问题的时候，大部分博客给出了这样的解决方案，在每个文件配置\n这样的代码，他做到了将当前文件的路径加入到 Python 模块搜索路径 sys.path 中，\n确实可以起到解决 bug 的作用，但是每个文件都写上这样一段代码，实在让人不舒服，\n下面我们还是来学习下 Python 模块搜索路径是如何运作的\n\n## Python 从哪些路径导入模块\n```\n1、程序的主目录\n2、PYTHONPATH 目录（如果已经进行了设置）\n3、标准链接库目录\n4、任何 .pth 文件的内容（如果存在的话）\n```\n\n### 主目录\nPython 首先会在主目录内搜索导入的文件。如果程序完全位于单一目录，所有导入的会\n自动工作，而并不需要配置路径。由于这个目录总是先搜索，其文件也将覆盖路径上的\n其他目录中具有同样名称的模块。如果你需要在自己程序中使用库模块的话，小心不要\n以这种方式以外地隐藏库模块。\n\n### PYTHONPATH 目录\n之后，Python 会从左到右搜索 PYTHONPATH 环境变量设置中罗列出的所有目录，可以是\n用户定义或平台特定的目录名。因为 Python 优先搜索主目录，当导入的文件跨目录时，\n这个设置才显得格外重要。\n\n### 标准库目录\n接着，Python 会自动搜索标准库模块安装在机器上的那些目录，这块通常不需要在单独\n配置\n\n### .pth 文件目录\n最后，Python 有个相当新的功能，允许用户把有效的目录添加到模块搜索路径中去，\n也就是在后缀名为 .pth （路径的意思）的文本文件中一行一行的列出目录。他是 \nPYTHONPATH 的一种替代方案，我们也可以把它放在标注库所在位置的 sitepackages 的\n子目录中扩展模块搜索路径\n\n## 应用到当前项目\n在开发大型项目之前，我们可以将项目根目录作为 PYTHONPATH 存到环境变量中，也可以\n每次运行前之前该命令\n```bash\n$ touch env.sh\n$ vim env.sh\n\nexport PYTHONPATH=./ # 将项目根目录作为PYTHONPATH\n\n$ source env.sh # 在项目运行之前执行该命令\n```\n最后我们可以通过下面两行代码来查看当前项目python模块搜索路径和导入的模块\n```python\n\nimport sys\n\nprint(sys.path) # 输出python模块搜索目录\n\nprint(list(sys.modules.keys())) # 输出python已经导入的模块列表\n```\n","source":"_posts/python-2017-08-15-config-pythonpath.md","raw":"---\ntitle: python 配置PYTHONPATH(了解python导入模块搜索路径运作原理)\ndate: 2017-08-15\ntags: [python]\n---\n\n> python项目导入模块是必不可少的，大多数情况下，可以以来模块导入搜索路径的\n自动特性，完全不需要配置路径。不过，如果你想在用户间定义目录边界来导入文件，\n就需要知道搜索路径是如何运作的。\n\n<!-- more -->\n\n<!-- toc -->\n\n```bash\n$ python tests/test_utils.py\n\nTraceback (most recent call last):\n  File \"tests/test_utils.py\", line 7, in <module>\n    from run_api import app\nImportError: No module named 'run_api'\n\n```\n在我刚学习python时，做模块导入最长碰到的就是这个错误，我明明定义了 `run_api`\n模块，但是却总是报找不到的错误， No module No module No你妹啊，如果你也碰到这\n样的问题，你应该好好看看这篇文章\n\n## 不太好的解决办法\n```python\nimport sys\nimport os\nsys.path.append( os.path.join( os.path.dirname(__file__), os.path.pardir ) )\n```\n在 google 模块导入问题的时候，大部分博客给出了这样的解决方案，在每个文件配置\n这样的代码，他做到了将当前文件的路径加入到 Python 模块搜索路径 sys.path 中，\n确实可以起到解决 bug 的作用，但是每个文件都写上这样一段代码，实在让人不舒服，\n下面我们还是来学习下 Python 模块搜索路径是如何运作的\n\n## Python 从哪些路径导入模块\n```\n1、程序的主目录\n2、PYTHONPATH 目录（如果已经进行了设置）\n3、标准链接库目录\n4、任何 .pth 文件的内容（如果存在的话）\n```\n\n### 主目录\nPython 首先会在主目录内搜索导入的文件。如果程序完全位于单一目录，所有导入的会\n自动工作，而并不需要配置路径。由于这个目录总是先搜索，其文件也将覆盖路径上的\n其他目录中具有同样名称的模块。如果你需要在自己程序中使用库模块的话，小心不要\n以这种方式以外地隐藏库模块。\n\n### PYTHONPATH 目录\n之后，Python 会从左到右搜索 PYTHONPATH 环境变量设置中罗列出的所有目录，可以是\n用户定义或平台特定的目录名。因为 Python 优先搜索主目录，当导入的文件跨目录时，\n这个设置才显得格外重要。\n\n### 标准库目录\n接着，Python 会自动搜索标准库模块安装在机器上的那些目录，这块通常不需要在单独\n配置\n\n### .pth 文件目录\n最后，Python 有个相当新的功能，允许用户把有效的目录添加到模块搜索路径中去，\n也就是在后缀名为 .pth （路径的意思）的文本文件中一行一行的列出目录。他是 \nPYTHONPATH 的一种替代方案，我们也可以把它放在标注库所在位置的 sitepackages 的\n子目录中扩展模块搜索路径\n\n## 应用到当前项目\n在开发大型项目之前，我们可以将项目根目录作为 PYTHONPATH 存到环境变量中，也可以\n每次运行前之前该命令\n```bash\n$ touch env.sh\n$ vim env.sh\n\nexport PYTHONPATH=./ # 将项目根目录作为PYTHONPATH\n\n$ source env.sh # 在项目运行之前执行该命令\n```\n最后我们可以通过下面两行代码来查看当前项目python模块搜索路径和导入的模块\n```python\n\nimport sys\n\nprint(sys.path) # 输出python模块搜索目录\n\nprint(list(sys.modules.keys())) # 输出python已经导入的模块列表\n```\n","slug":"python-2017-08-15-config-pythonpath","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2avb012v5gqo6vzmvjtu"},{"title":"Flask 运行 Hello World","date":"2017-08-15T00:00:00.000Z","_content":"\n### 新建项目 myproject\n首先新建 myproject 文件夹当做工作目录，进入目录 pip 下 Flask 依赖包，创建并编辑\nrun.py\n\n<!-- more -->\n\n```bash\n$ mkdir myproject\n$ cd myproject\n$ pip install flask\n$ touch run.py\n$ vim run.py\n```\n### run.py\n```python\n#!/usr/bin/env python\n\nfrom flask import Flask\napp = Flask(__name__)\n\n@app.route('/hello')\ndef hello():\n    return \"hello world\"\n\napp.run()\n```\n### 运行\n```bash\n$ python run.py\n\n* Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)\n```\n\n### 访问服务\n```bash\n$ curl http://127.0.0.1:5000/hello\nhello world%\n```\n\n### 外部可访问服务器\n```python\napp.run(host='0.0.0.0')\n```\n\n","source":"_posts/python-2017-08-15-flask-hello-world.md","raw":"---\ntitle: Flask 运行 Hello World\ndate: 2017-08-15\ntags: [python, flask]\n---\n\n### 新建项目 myproject\n首先新建 myproject 文件夹当做工作目录，进入目录 pip 下 Flask 依赖包，创建并编辑\nrun.py\n\n<!-- more -->\n\n```bash\n$ mkdir myproject\n$ cd myproject\n$ pip install flask\n$ touch run.py\n$ vim run.py\n```\n### run.py\n```python\n#!/usr/bin/env python\n\nfrom flask import Flask\napp = Flask(__name__)\n\n@app.route('/hello')\ndef hello():\n    return \"hello world\"\n\napp.run()\n```\n### 运行\n```bash\n$ python run.py\n\n* Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)\n```\n\n### 访问服务\n```bash\n$ curl http://127.0.0.1:5000/hello\nhello world%\n```\n\n### 外部可访问服务器\n```python\napp.run(host='0.0.0.0')\n```\n\n","slug":"python-2017-08-15-flask-hello-world","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2avd012x5gqo2zhenps8"},{"title":"Linux 执行 pip 报错 command not found","date":"2017-08-18T00:00:00.000Z","_content":"\n使用各个系统的安装器进行安装\n### CentOS\n```bash\n$ easy_install pip\n```\n\n### Ubuntu\n```bash\n$ apt-get install python-pip\n```\n","source":"_posts/python-2017-08-18-pip_not_found.md","raw":"---\ntitle: Linux 执行 pip 报错 command not found\ndate: 2017-08-18\ntags: [python]\n---\n\n使用各个系统的安装器进行安装\n### CentOS\n```bash\n$ easy_install pip\n```\n\n### Ubuntu\n```bash\n$ apt-get install python-pip\n```\n","slug":"python-2017-08-18-pip-not-found","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2ave012z5gqo9z3l4d6g"},{"title":"使用 Supervisor 管理进程","date":"2017-08-18T00:00:00.000Z","_content":"\n> [Supervisor](http://supervisord.org) 是一个用 Python 写的进程管理工具，可以很方便的用来启动、重启、关闭进程（不仅仅是 Python 进程）。除了对单个进程的控制，还可以同时启动、关闭多个进程，比如很不幸的服务器出问题导致所有应用程序都被杀死，此时可以用 Supervisor 同时启动所有应用程序而不是一个一个地敲命令启动。\n\n<!-- more -->\n\n<!-- toc -->\n\n## 安装\n\nSupervisor 可以运行在 Linux、Mac OS X 上。如前所述，Supervisor 是 Python 编写的，所以安装起来也很方便，可以直接用 pip :\n\n```bash\n$ sudo pip install supervisor\n```\n\n如果是 Ubuntu 系统，还可以使用 `apt` 安装。\n\n## Supervisor 配置\n> Supervisor 相当强大，提供了很丰富的功能，不过我们可能只需要用到其中一小部分。安装完成之后，可以编写配置文件，来满足自己的需求。为了方便，我们把配置分成两部分 Supervisor（Supervisor 是一个 C/S 模型的程序，这是 server 端，对应的有 client 端：supervisorctl）和应用程序（即我们要管理的程序）。\n\n首先来看 Supervisor 的配置文件。安装完 Supervisor 之后，可以运行 `echo_supervisord_conf` 命令输出默认的配置项，也可以重定向到一个配置文件里：\n```bash\necho_supervisord_conf > /etc/supervisord.conf\n```\n去除里面大部分注释和“不相关”的部分，我们可以先看这些配置：\n```bash\n\n[unix_http_server]\nfile=/tmp/supervisor.sock   ; UNIX socket 文件，supervisorctl 会使用\n;chmod=0700                 ; socket 文件的 mode，默认是 0700\n;chown=nobody:nogroup       ; socket 文件的 owner，格式： uid:gid\n\n;[inet_http_server]         ; HTTP 服务器，提供 web 管理界面\n;port=127.0.0.1:9001        ; Web 管理后台运行的 IP 和端口，如果开放到公网，需要注意安全性\n;username=user              ; 登录管理后台的用户名\n;password=123               ; 登录管理后台的密码\n\n[supervisord]\nlogfile=/tmp/supervisord.log ; 日志文件，默认是 $CWD/supervisord.log\nlogfile_maxbytes=50MB        ; 日志文件大小，超出会 rotate，默认 50MB\nlogfile_backups=10           ; 日志文件保留备份数量默认 10\nloglevel=info                ; 日志级别，默认 info，其它: debug,warn,trace\npidfile=/tmp/supervisord.pid ; pid 文件\nnodaemon=false               ; 是否在前台启动，默认是 false，即以 daemon 的方式启动\nminfds=1024                  ; 可以打开的文件描述符的最小值，默认 1024\nminprocs=200                 ; 可以打开的进程数的最小值，默认 200\n\n; the below section must remain in the config file for RPC\n; (supervisorctl/web interface) to work, additional interfaces may be\n; added by defining them in separate rpcinterface: sections\n[rpcinterface:supervisor]\nsupervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface\n\n[supervisorctl]\nserverurl=unix:///tmp/supervisor.sock ; 通过 UNIX socket 连接 supervisord，路径与 unix_http_server 部分的 file 一致\n;serverurl=http://127.0.0.1:9001 ; 通过 HTTP 的方式连接 supervisord\n\n; 包含其他的配置文件\n[include]\nfiles = relative/directory/*.ini    ; 可以是 *.conf 或 *.ini\n```\n我们把上面这部分配置保存到 /etc/supervisord.conf（或其他任意有权限访问的文件）然后启动 supervisord（通过 -c 选项指定配置文件路径，如果不指定会按照这个顺序查找配置文件：`$CWD/supervisord.conf, $CWD/etc/supervisord.conf, /etc/supervisord.conf）`\n```bash\nsupervisord -c /etc/supervisord.conf\n```\n查看 supervisord 是否在运行：\n```bash\nps aux | grep supervisord\n```\n\n## program 配置\n\n> 上面我们已经把 supervisrod 运行起来了，现在可以添加我们要管理的进程的配置文件。可以把所有配置项都写到 supervisord.conf 文件里，但并不推荐这样做，而是通过 include 的方式把不同的程序（组）写到不同的配置文件里。\n\n为了举例，我们新建一个目录 `/etc/supervisor/` 用于存放这些配置文件，相应的，把 `/etc/supervisord.conf` 里 include 部分的的配置修改一下：\n\n```bash\n[include]\nfiles = /etc/supervisor/*.conf\n```\n假设有个用 Python 和 Flask 框架编写的用户中心系统，取名 usercenter，用 [gunicorn](http://gunicorn.org/) 做 web 服务器。项目代码位于 `/home/leon/projects/usercenter`，gunicorn 配置文件为 gunicorn.py，WSGI callable 是 wsgi.py 里的 app 属性。所以直接在命令行启动的，方式可能是这样的：\n```bash\ncd /home/leon/projects/usercenter\ngunicorn -c gunicorn.py wsgi:app\n```\n现在编写一份配置文件来管理这个进程（需要注意：用 supervisord 管理时，gunicorn 的 daemon 选项需要设置为 False）：\n\n```bash\n[program:usercenter]\ndirectory = /home/leon/projects/usercenter ; 程序的启动目录\ncommand = gunicorn -c gunicorn.py wsgi:app  ; 启动命令，可以看出与手动在命令行启动的命令是一样的\nautostart = true     ; 在 supervisord 启动的时候也自动启动\nstartsecs = 5        ; 启动 5 秒后没有异常退出，就当作已经正常启动了\nautorestart = true   ; 程序异常退出后自动重启\nstartretries = 3     ; 启动失败自动重试次数，默认是 3\nuser = leon          ; 用哪个用户启动\nredirect_stderr = true  ; 把 stderr 重定向到 stdout，默认 false\nstdout_logfile_maxbytes = 20MB  ; stdout 日志文件大小，默认 50MB\nstdout_logfile_backups = 20     ; stdout 日志文件备份数\n; stdout 日志文件，需要注意当指定目录不存在时无法正常启动，所以需要手动创建目录（supervisord 会自动创建日志文件）\nstdout_logfile = /data/logs/usercenter_stdout.log\n\n; 可以通过 environment 来添加需要的环境变量，一种常见的用法是修改 PYTHONPATH\n; environment=PYTHONPATH=$PYTHONPATH:/path/to/somewhere\n```\n一份配置文件至少需要一个 [program:x] 部分的配置，来告诉 supervisord 需要管理那个进程。[program:x] 语法中的 x 表示 program name，会在客户端（supervisorctl 或 web 界面）显示，在 supervisorctl 中通过这个值来对程序进行 start、restart、stop 等操作。\n\n## 使用 supervisorctl\n\n> Supervisorctl 是 supervisord 的一个命令行客户端工具，启动时需要指定与 Supervisord 使用同一份配置文件，否则与 supervisord 一样按照顺序查找配置文件。\n\n```bash\nsupervisorctl -c /etc/supervisord.conf\n```\n\n上面这个命令会进入 supervisorctl 的 shell 界面，然后可以执行不同的命令了：\n\n```bash\n> status                # 查看程序状态\n> stop usercenter       # 关闭 usercenter 程序\n> start usercenter      # 启动 usercenter 程序\n> restart usercenter    # 重启 usercenter 程序\n> reread                # 重新加载守护进程的配置文件，无需添加/删除（不重新启动）\n> reload                # 重新加载配置文件，并重启\n> update                # 重新加载配置，然后根据需要添加和删除（重新启动程序）\n```\n\n上面这些命令都有相应的输出，除了进入 supervisorctl 的 shell 界面，也可以直接在 bash 终端运行：\n\n```bash\n$ supervisorctl status\n$ supervisorctl stop usercenter\n$ supervisorctl start usercenter\n$ supervisorctl restart usercenter\n$ supervisorctl reread\n$ supervisorctl update\n```\n\n## 开机自启动\n\n### CentOS\n\n适用 CentOS 7 及以上版本\n新建 `/usr/lib/systemd/system/supervisord.service` 文件\n\n```bash\n[Unit]\nDescription=Supervisor daemon\n\n[Service]\nType=forking\nExecStart=/usr/bin/supervisord -c /etc/supervisord.conf\nExecStop=/usr/bin/supervisorctl shutdown\nExecReload=/usr/bin/supervisorctl reload\nKillMode=process\nRestart=on-failure\nRestartSec=42s\n\n[Install]\nWantedBy=multi-user.target\n```\n\n**开启自启动**\n\n```bash\nsystemctl enable supervisord\n```\n\n**查看启动状态**\n\n```bash\nsystemctl status supervisord\n```\n\n### Ubuntu\n\n修改 `/etc/rc.local` 文件，在 `exit 0` 之前加入\n\n```bash\n/usr/local/bin/supervisord\n```\n\n保存退出，并修改权限\n\n```bash\nchmod +x /etc/rc.local\n```\n\n## 常见的错误\n\n在 `supervisorctl start program` 时，会报错\n\n```bash\nxxx:ERROR [no such file]\n```\n\n此时需要检查在配置中设计到的文件和命令是否存在，尤其是 `command` 的赋值，命令最好将全地址写出，比如\n\n```bash\ncommand = /usr/local/bin/gunicorn -c gunicorn.py wsgi:app\n```\n\n## 其它\n\n除了 supervisorctl 之外，还可以配置 supervisrod 启动 web 管理界面，这个 web 后台使用 Basic Auth 的方式进行身份认证。\n\n除了单个进程的控制，还可以配置 group，进行分组管理。\n\n经常查看日志文件，包括 supervisord 的日志和各个 pragram 的日志文件，程序 crash 或抛出异常的信息一半会输出到 stderr，可以查看相应的日志文件来查找问题。\n\n- [官方文档](http://supervisord.org/index.html)\n- [原文](http://liyangliang.me/posts/2015/06/using-supervisor/)\n- [Supervisor全攻略(2)](https://my.oschina.net/guol/blog/509238)\n","source":"_posts/python-2017-08-18-basic-supervisor.md","raw":"---\ntitle: 使用 Supervisor 管理进程\ndate: 2017-08-18\ntags: [python]\n---\n\n> [Supervisor](http://supervisord.org) 是一个用 Python 写的进程管理工具，可以很方便的用来启动、重启、关闭进程（不仅仅是 Python 进程）。除了对单个进程的控制，还可以同时启动、关闭多个进程，比如很不幸的服务器出问题导致所有应用程序都被杀死，此时可以用 Supervisor 同时启动所有应用程序而不是一个一个地敲命令启动。\n\n<!-- more -->\n\n<!-- toc -->\n\n## 安装\n\nSupervisor 可以运行在 Linux、Mac OS X 上。如前所述，Supervisor 是 Python 编写的，所以安装起来也很方便，可以直接用 pip :\n\n```bash\n$ sudo pip install supervisor\n```\n\n如果是 Ubuntu 系统，还可以使用 `apt` 安装。\n\n## Supervisor 配置\n> Supervisor 相当强大，提供了很丰富的功能，不过我们可能只需要用到其中一小部分。安装完成之后，可以编写配置文件，来满足自己的需求。为了方便，我们把配置分成两部分 Supervisor（Supervisor 是一个 C/S 模型的程序，这是 server 端，对应的有 client 端：supervisorctl）和应用程序（即我们要管理的程序）。\n\n首先来看 Supervisor 的配置文件。安装完 Supervisor 之后，可以运行 `echo_supervisord_conf` 命令输出默认的配置项，也可以重定向到一个配置文件里：\n```bash\necho_supervisord_conf > /etc/supervisord.conf\n```\n去除里面大部分注释和“不相关”的部分，我们可以先看这些配置：\n```bash\n\n[unix_http_server]\nfile=/tmp/supervisor.sock   ; UNIX socket 文件，supervisorctl 会使用\n;chmod=0700                 ; socket 文件的 mode，默认是 0700\n;chown=nobody:nogroup       ; socket 文件的 owner，格式： uid:gid\n\n;[inet_http_server]         ; HTTP 服务器，提供 web 管理界面\n;port=127.0.0.1:9001        ; Web 管理后台运行的 IP 和端口，如果开放到公网，需要注意安全性\n;username=user              ; 登录管理后台的用户名\n;password=123               ; 登录管理后台的密码\n\n[supervisord]\nlogfile=/tmp/supervisord.log ; 日志文件，默认是 $CWD/supervisord.log\nlogfile_maxbytes=50MB        ; 日志文件大小，超出会 rotate，默认 50MB\nlogfile_backups=10           ; 日志文件保留备份数量默认 10\nloglevel=info                ; 日志级别，默认 info，其它: debug,warn,trace\npidfile=/tmp/supervisord.pid ; pid 文件\nnodaemon=false               ; 是否在前台启动，默认是 false，即以 daemon 的方式启动\nminfds=1024                  ; 可以打开的文件描述符的最小值，默认 1024\nminprocs=200                 ; 可以打开的进程数的最小值，默认 200\n\n; the below section must remain in the config file for RPC\n; (supervisorctl/web interface) to work, additional interfaces may be\n; added by defining them in separate rpcinterface: sections\n[rpcinterface:supervisor]\nsupervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface\n\n[supervisorctl]\nserverurl=unix:///tmp/supervisor.sock ; 通过 UNIX socket 连接 supervisord，路径与 unix_http_server 部分的 file 一致\n;serverurl=http://127.0.0.1:9001 ; 通过 HTTP 的方式连接 supervisord\n\n; 包含其他的配置文件\n[include]\nfiles = relative/directory/*.ini    ; 可以是 *.conf 或 *.ini\n```\n我们把上面这部分配置保存到 /etc/supervisord.conf（或其他任意有权限访问的文件）然后启动 supervisord（通过 -c 选项指定配置文件路径，如果不指定会按照这个顺序查找配置文件：`$CWD/supervisord.conf, $CWD/etc/supervisord.conf, /etc/supervisord.conf）`\n```bash\nsupervisord -c /etc/supervisord.conf\n```\n查看 supervisord 是否在运行：\n```bash\nps aux | grep supervisord\n```\n\n## program 配置\n\n> 上面我们已经把 supervisrod 运行起来了，现在可以添加我们要管理的进程的配置文件。可以把所有配置项都写到 supervisord.conf 文件里，但并不推荐这样做，而是通过 include 的方式把不同的程序（组）写到不同的配置文件里。\n\n为了举例，我们新建一个目录 `/etc/supervisor/` 用于存放这些配置文件，相应的，把 `/etc/supervisord.conf` 里 include 部分的的配置修改一下：\n\n```bash\n[include]\nfiles = /etc/supervisor/*.conf\n```\n假设有个用 Python 和 Flask 框架编写的用户中心系统，取名 usercenter，用 [gunicorn](http://gunicorn.org/) 做 web 服务器。项目代码位于 `/home/leon/projects/usercenter`，gunicorn 配置文件为 gunicorn.py，WSGI callable 是 wsgi.py 里的 app 属性。所以直接在命令行启动的，方式可能是这样的：\n```bash\ncd /home/leon/projects/usercenter\ngunicorn -c gunicorn.py wsgi:app\n```\n现在编写一份配置文件来管理这个进程（需要注意：用 supervisord 管理时，gunicorn 的 daemon 选项需要设置为 False）：\n\n```bash\n[program:usercenter]\ndirectory = /home/leon/projects/usercenter ; 程序的启动目录\ncommand = gunicorn -c gunicorn.py wsgi:app  ; 启动命令，可以看出与手动在命令行启动的命令是一样的\nautostart = true     ; 在 supervisord 启动的时候也自动启动\nstartsecs = 5        ; 启动 5 秒后没有异常退出，就当作已经正常启动了\nautorestart = true   ; 程序异常退出后自动重启\nstartretries = 3     ; 启动失败自动重试次数，默认是 3\nuser = leon          ; 用哪个用户启动\nredirect_stderr = true  ; 把 stderr 重定向到 stdout，默认 false\nstdout_logfile_maxbytes = 20MB  ; stdout 日志文件大小，默认 50MB\nstdout_logfile_backups = 20     ; stdout 日志文件备份数\n; stdout 日志文件，需要注意当指定目录不存在时无法正常启动，所以需要手动创建目录（supervisord 会自动创建日志文件）\nstdout_logfile = /data/logs/usercenter_stdout.log\n\n; 可以通过 environment 来添加需要的环境变量，一种常见的用法是修改 PYTHONPATH\n; environment=PYTHONPATH=$PYTHONPATH:/path/to/somewhere\n```\n一份配置文件至少需要一个 [program:x] 部分的配置，来告诉 supervisord 需要管理那个进程。[program:x] 语法中的 x 表示 program name，会在客户端（supervisorctl 或 web 界面）显示，在 supervisorctl 中通过这个值来对程序进行 start、restart、stop 等操作。\n\n## 使用 supervisorctl\n\n> Supervisorctl 是 supervisord 的一个命令行客户端工具，启动时需要指定与 Supervisord 使用同一份配置文件，否则与 supervisord 一样按照顺序查找配置文件。\n\n```bash\nsupervisorctl -c /etc/supervisord.conf\n```\n\n上面这个命令会进入 supervisorctl 的 shell 界面，然后可以执行不同的命令了：\n\n```bash\n> status                # 查看程序状态\n> stop usercenter       # 关闭 usercenter 程序\n> start usercenter      # 启动 usercenter 程序\n> restart usercenter    # 重启 usercenter 程序\n> reread                # 重新加载守护进程的配置文件，无需添加/删除（不重新启动）\n> reload                # 重新加载配置文件，并重启\n> update                # 重新加载配置，然后根据需要添加和删除（重新启动程序）\n```\n\n上面这些命令都有相应的输出，除了进入 supervisorctl 的 shell 界面，也可以直接在 bash 终端运行：\n\n```bash\n$ supervisorctl status\n$ supervisorctl stop usercenter\n$ supervisorctl start usercenter\n$ supervisorctl restart usercenter\n$ supervisorctl reread\n$ supervisorctl update\n```\n\n## 开机自启动\n\n### CentOS\n\n适用 CentOS 7 及以上版本\n新建 `/usr/lib/systemd/system/supervisord.service` 文件\n\n```bash\n[Unit]\nDescription=Supervisor daemon\n\n[Service]\nType=forking\nExecStart=/usr/bin/supervisord -c /etc/supervisord.conf\nExecStop=/usr/bin/supervisorctl shutdown\nExecReload=/usr/bin/supervisorctl reload\nKillMode=process\nRestart=on-failure\nRestartSec=42s\n\n[Install]\nWantedBy=multi-user.target\n```\n\n**开启自启动**\n\n```bash\nsystemctl enable supervisord\n```\n\n**查看启动状态**\n\n```bash\nsystemctl status supervisord\n```\n\n### Ubuntu\n\n修改 `/etc/rc.local` 文件，在 `exit 0` 之前加入\n\n```bash\n/usr/local/bin/supervisord\n```\n\n保存退出，并修改权限\n\n```bash\nchmod +x /etc/rc.local\n```\n\n## 常见的错误\n\n在 `supervisorctl start program` 时，会报错\n\n```bash\nxxx:ERROR [no such file]\n```\n\n此时需要检查在配置中设计到的文件和命令是否存在，尤其是 `command` 的赋值，命令最好将全地址写出，比如\n\n```bash\ncommand = /usr/local/bin/gunicorn -c gunicorn.py wsgi:app\n```\n\n## 其它\n\n除了 supervisorctl 之外，还可以配置 supervisrod 启动 web 管理界面，这个 web 后台使用 Basic Auth 的方式进行身份认证。\n\n除了单个进程的控制，还可以配置 group，进行分组管理。\n\n经常查看日志文件，包括 supervisord 的日志和各个 pragram 的日志文件，程序 crash 或抛出异常的信息一半会输出到 stderr，可以查看相应的日志文件来查找问题。\n\n- [官方文档](http://supervisord.org/index.html)\n- [原文](http://liyangliang.me/posts/2015/06/using-supervisor/)\n- [Supervisor全攻略(2)](https://my.oschina.net/guol/blog/509238)\n","slug":"python-2017-08-18-basic-supervisor","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2avf01315gqooyr0bq2f"},{"title":"Python 使用 gunicorn 启动你的项目","date":"2017-08-15T00:00:00.000Z","_content":"\n> 虽然 Python 自带服务器服务，但是最多只能用作开发环境调试用，在生产环境中如同玩具一样，一碰就坏，今天给大家介绍使用 gunicorn 启动 Python 项目\n\n<!-- more --><!-- toc -->\n\n## 安装\n```bash\n$ pip install gunicorn\n```\n\n## 启动\n```bash\n$ gunicorn run:app\n\n[2017-08-15 15:25:28 +0800] [26628] [INFO] Starting gunicorn 19.7.1\n[2017-08-15 15:25:28 +0800] [26628] [INFO] Listening at: http://127.0.0.1:8000 (26628)\n[2017-08-15 15:25:28 +0800] [26628] [INFO] Using worker: sync\n[2017-08-15 15:25:28 +0800] [26631] [INFO] Booting worker with pid: 26631\n```\n\n## 配置参数\n### 命令行参数\n\n```bash\n$ gunicorn -w 2 -b 0.0.0.0:8000 run:app\n```\n其中` -b 或 --bind ` 指定项目启动绑定域名和端口，` -w 或 --workers` 指定启动几个进程\n\n**异步进程**\n\n虽然启动了两个进程，但它并不是异步进行，我需要指定实现异步进程的类，通常我们使用 `gevent`\n\n下载\n\n```bash\n$ pip install gevent\n```\n\n使用\n\n```bash\n$ gunicorn -w 2 -b 0.0.0.0:8000 -k gevent run:app\n```\n\n其中 `-k, --worker-class` 可以指定异步进程类\n\n### 配置参数文件\n在项目根目录下创建配置文件 `touch gunicorn_config.py` 并编辑\n```python\n#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n'''\n配置信息\nhttps://github.com/benoitc/gunicorn/blob/master/examples/example_config.py\n'''\n__author__ = \"wxnacy(wxnacy@gmail.com)\"\n__copyright__ = \"Copyright of wxnacy (2017).\"\n\nimport multiprocessing\n\nbind = '0.0.0.0:8002' # 绑定地址\nworkers =  multiprocessing.cpu_count() * 2 + 1 # 根据cpu数量指定线程数量\nworker_class = 'gevent' # 异步进程类\n\n```\n启动\n```bash\n$ gunicorn -c gunicorn_config.py run:app\n```\n\n[更多配置](http://docs.gunicorn.org/en/stable/settings.html)\n","source":"_posts/python-2017-08-15-gunicorn-run.md","raw":"---\ntitle: Python 使用 gunicorn 启动你的项目\ndate: 2017-08-15\ntags: [python]\n---\n\n> 虽然 Python 自带服务器服务，但是最多只能用作开发环境调试用，在生产环境中如同玩具一样，一碰就坏，今天给大家介绍使用 gunicorn 启动 Python 项目\n\n<!-- more --><!-- toc -->\n\n## 安装\n```bash\n$ pip install gunicorn\n```\n\n## 启动\n```bash\n$ gunicorn run:app\n\n[2017-08-15 15:25:28 +0800] [26628] [INFO] Starting gunicorn 19.7.1\n[2017-08-15 15:25:28 +0800] [26628] [INFO] Listening at: http://127.0.0.1:8000 (26628)\n[2017-08-15 15:25:28 +0800] [26628] [INFO] Using worker: sync\n[2017-08-15 15:25:28 +0800] [26631] [INFO] Booting worker with pid: 26631\n```\n\n## 配置参数\n### 命令行参数\n\n```bash\n$ gunicorn -w 2 -b 0.0.0.0:8000 run:app\n```\n其中` -b 或 --bind ` 指定项目启动绑定域名和端口，` -w 或 --workers` 指定启动几个进程\n\n**异步进程**\n\n虽然启动了两个进程，但它并不是异步进行，我需要指定实现异步进程的类，通常我们使用 `gevent`\n\n下载\n\n```bash\n$ pip install gevent\n```\n\n使用\n\n```bash\n$ gunicorn -w 2 -b 0.0.0.0:8000 -k gevent run:app\n```\n\n其中 `-k, --worker-class` 可以指定异步进程类\n\n### 配置参数文件\n在项目根目录下创建配置文件 `touch gunicorn_config.py` 并编辑\n```python\n#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n'''\n配置信息\nhttps://github.com/benoitc/gunicorn/blob/master/examples/example_config.py\n'''\n__author__ = \"wxnacy(wxnacy@gmail.com)\"\n__copyright__ = \"Copyright of wxnacy (2017).\"\n\nimport multiprocessing\n\nbind = '0.0.0.0:8002' # 绑定地址\nworkers =  multiprocessing.cpu_count() * 2 + 1 # 根据cpu数量指定线程数量\nworker_class = 'gevent' # 异步进程类\n\n```\n启动\n```bash\n$ gunicorn -c gunicorn_config.py run:app\n```\n\n[更多配置](http://docs.gunicorn.org/en/stable/settings.html)\n","slug":"python-2017-08-15-gunicorn-run","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2avh01335gqozkxo5j49"},{"title":"Python 获取本地或网络图片的宽高","date":"2017-08-22T00:00:00.000Z","_content":"\n\n## 本地\n```python\nfrom PIL import Image\nfp = '/Users/wxnacy/Documents/WX20170412-190958@2x.png'\ni = Image.open(fp)\nprint(i.size) # 获取宽高 (w,h)\nprint(i.format) # 获取图片格式\n```\n\n## 网络图片\n```python\nfrom PIL import Image\nimport io\nimport requests\nurl = ''\ni = Image.open(io.BytesIO(requests.get(url).content))\nprint(i.size) # 获取宽高 (w,h)\nprint(i.format) # 获取图片格式\n```\n","source":"_posts/python-2017-08-22-get-image-size.md","raw":"---\ntitle: Python 获取本地或网络图片的宽高\ndate: 2017-08-22\ntags: [python]\n---\n\n\n## 本地\n```python\nfrom PIL import Image\nfp = '/Users/wxnacy/Documents/WX20170412-190958@2x.png'\ni = Image.open(fp)\nprint(i.size) # 获取宽高 (w,h)\nprint(i.format) # 获取图片格式\n```\n\n## 网络图片\n```python\nfrom PIL import Image\nimport io\nimport requests\nurl = ''\ni = Image.open(io.BytesIO(requests.get(url).content))\nprint(i.size) # 获取宽高 (w,h)\nprint(i.format) # 获取图片格式\n```\n","slug":"python-2017-08-22-get-image-size","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2avi01355gqof0sel5iv"},{"title":"Python Scrapy 入门教程","date":"2017-08-23T00:00:00.000Z","_content":"\n\n## 安装\n```bash\n$ pip install Scrapy\n```\n\n## 创建项目\n```bash\n$ scrapy startproject crawler\n\nNew Scrapy project 'crawler', using template directory '/Users/wxnacy/.pyenv/versions/3.5.0/envs/env_lightcircle/lib/python3.5/site-packages/scrapy/templates/project', created in:\n    /Users/wxnacy/WebstormProjects/wxnacy.github.io/crawler\n\nYou can start your first spider with:\n    cd crawler\n    scrapy genspider example example.com\n\n```\n\n通过提示我们可以通过如下命令创建第一个spider\n```bash\n$ cd crawler\n$ scrapy genspider youtube youtube.com\n\nCreated spider 'youtube' using template 'basic' in module:\n  crawler.spiders.youtube\n\n```","source":"_posts/python-2017-08-23-scrapy-basic.md","raw":"---\ntitle: Python Scrapy 入门教程\ndate: 2017-08-23\ntags: [python]\n---\n\n\n## 安装\n```bash\n$ pip install Scrapy\n```\n\n## 创建项目\n```bash\n$ scrapy startproject crawler\n\nNew Scrapy project 'crawler', using template directory '/Users/wxnacy/.pyenv/versions/3.5.0/envs/env_lightcircle/lib/python3.5/site-packages/scrapy/templates/project', created in:\n    /Users/wxnacy/WebstormProjects/wxnacy.github.io/crawler\n\nYou can start your first spider with:\n    cd crawler\n    scrapy genspider example example.com\n\n```\n\n通过提示我们可以通过如下命令创建第一个spider\n```bash\n$ cd crawler\n$ scrapy genspider youtube youtube.com\n\nCreated spider 'youtube' using template 'basic' in module:\n  crawler.spiders.youtube\n\n```","slug":"python-2017-08-23-scrapy-basic","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2avj01375gqom9vwiez7"},{"title":"python 使用pigar管理requirements.txt","date":"2017-08-19T00:00:00.000Z","_content":"\n> 在查看别人的项目时，经常会看到一个 requirements.txt 文件，里面记录了当前程序的\n所有依赖包及其精确版本号。类似于 Java 框架管理 maven 中 pom.xml 文件或者 nodejs\n中 package.json 文件\n\n<!-- more -->\n\npip可以生成和安装 requirements.txt\n\n```bash\npip freeze > requirements.txt # 生成\npip install -r requirements.txt # 安装requirements.txt中依赖包\n```\n\n通过 pip 生成 requirements.txt 可以用，但是打开 requirements.txt 我们会发现，\n当前 python 环境下依赖包会全部写到文件中,这时候我们需要另一个工具来真正管理项目\n中需要的依赖\n\n## pigar\n项目地址:https://github.com/damnever/pigar\n### 安装\n\n```bash\npip install pigar\n```\n### 运行\n进入项目根目录并执行 pigar\n```bash\n$ cd project_path\n$ pigar\n\nStarting generate requirements ...\nWriting requirements to \"/root/myproject/requirements.txt\"\nRequirements file has been covered, no difference.\nGenerate requirements done!\n```\n出现如上则为成功，此时查看 requirements.txt 会发现，pigar 不止记录了依赖和版本，\n还把在代码中依赖具体出现的位置标了出来\n\n```bash\n# Requirements automatically generated by pigar.\n# https://github.com/Damnever/pigar\n\n# run.py: 3\nFlask == 0.12.2\n```\n\n在大型项目中执行 pigar 时会出现如下提示：\n```bash\nStarting generate requirements ...\nThe following modules are not found yet:\n  app referenced from:\n    app/common/base.py: 8,9,10,11\n    app/common/decorator.py: 16\n    app/common/elasticsearch.py: 7\n    app/common/markdown.py: 7,8\n    app/common/third/wx.py: 8,9,10\n    app/config.py: 7\n    app/local_config.py: 7\n    app/models.py: 7,8,9\n    app/run.py: 7,8,9,10\n    app/views/index.py: 7,8,9,10\n    run.py: 7,8,9,10,11\n    test/test_article.py: 7\n  oss2 referenced from:\n    app/common/aliyun.py: 7\n    app/common/qiniu.py: 7\nSome of them may not install in local environment.\n\nTry to search PyPI for the missing modules and filter some unnecessary modules? (y/[N])\n\n```\npigar 会提示你本地找不到一些依赖，询问你是否下载，这时候你要看清楚他提示的是\n需要下载的依赖，还是你写在项目中的 module ，如果不需要下载输入 n 继续即可。\n\n### Usage\n\n```bash\n\nusage: pigar [-h] [-v] [-u] [-s NAME [NAME ...]] [-c [PATH]] [-l LOG_LEVEL]\n             [-i DIR [DIR ...]] [-p SAVE_PATH] [-P PROJECT_PATH]\n\nPython requirements tool -- pigar, it will do only one thing at each time.\nDefault action is generate requirements.txt in current directory.\n\noptional arguments:\n  -h, --help          show this help message and exit\n  -v, --version       show pigar version information and exit\n  -u, --update        update database, use it when pigar failed you, exit when\n                      action done\n  -s NAME [NAME ...]  search package name by import name, use it if you do not\n                      know import name come from which package, exit when\n                      action done\n  -c [PATH]           check requirements for the latest version. If file path\n                      not given, search *requirements.txt in current\n                      directory, if not found, generate file requirements.txt,\n                      exit when action done\n  -l LOG_LEVEL        show given level log messages, argument can be (ERROR,\n                      WARNING, INFO), case-insensitive\n  -i DIR [DIR ...]    given a list of directory to ignore, relative directory,\n                      *used for* -c and default action\n  -p SAVE_PATH        save requirements in given file path, *used for* default\n                      action\n  -P PROJECT_PATH     project path, which is directory, *used for* default\n                      action\n```\n","source":"_posts/python-2017-08-19-pigar.md","raw":"---\ntitle: python 使用pigar管理requirements.txt\ndate: 2017-08-19\ntags: [python]\n---\n\n> 在查看别人的项目时，经常会看到一个 requirements.txt 文件，里面记录了当前程序的\n所有依赖包及其精确版本号。类似于 Java 框架管理 maven 中 pom.xml 文件或者 nodejs\n中 package.json 文件\n\n<!-- more -->\n\npip可以生成和安装 requirements.txt\n\n```bash\npip freeze > requirements.txt # 生成\npip install -r requirements.txt # 安装requirements.txt中依赖包\n```\n\n通过 pip 生成 requirements.txt 可以用，但是打开 requirements.txt 我们会发现，\n当前 python 环境下依赖包会全部写到文件中,这时候我们需要另一个工具来真正管理项目\n中需要的依赖\n\n## pigar\n项目地址:https://github.com/damnever/pigar\n### 安装\n\n```bash\npip install pigar\n```\n### 运行\n进入项目根目录并执行 pigar\n```bash\n$ cd project_path\n$ pigar\n\nStarting generate requirements ...\nWriting requirements to \"/root/myproject/requirements.txt\"\nRequirements file has been covered, no difference.\nGenerate requirements done!\n```\n出现如上则为成功，此时查看 requirements.txt 会发现，pigar 不止记录了依赖和版本，\n还把在代码中依赖具体出现的位置标了出来\n\n```bash\n# Requirements automatically generated by pigar.\n# https://github.com/Damnever/pigar\n\n# run.py: 3\nFlask == 0.12.2\n```\n\n在大型项目中执行 pigar 时会出现如下提示：\n```bash\nStarting generate requirements ...\nThe following modules are not found yet:\n  app referenced from:\n    app/common/base.py: 8,9,10,11\n    app/common/decorator.py: 16\n    app/common/elasticsearch.py: 7\n    app/common/markdown.py: 7,8\n    app/common/third/wx.py: 8,9,10\n    app/config.py: 7\n    app/local_config.py: 7\n    app/models.py: 7,8,9\n    app/run.py: 7,8,9,10\n    app/views/index.py: 7,8,9,10\n    run.py: 7,8,9,10,11\n    test/test_article.py: 7\n  oss2 referenced from:\n    app/common/aliyun.py: 7\n    app/common/qiniu.py: 7\nSome of them may not install in local environment.\n\nTry to search PyPI for the missing modules and filter some unnecessary modules? (y/[N])\n\n```\npigar 会提示你本地找不到一些依赖，询问你是否下载，这时候你要看清楚他提示的是\n需要下载的依赖，还是你写在项目中的 module ，如果不需要下载输入 n 继续即可。\n\n### Usage\n\n```bash\n\nusage: pigar [-h] [-v] [-u] [-s NAME [NAME ...]] [-c [PATH]] [-l LOG_LEVEL]\n             [-i DIR [DIR ...]] [-p SAVE_PATH] [-P PROJECT_PATH]\n\nPython requirements tool -- pigar, it will do only one thing at each time.\nDefault action is generate requirements.txt in current directory.\n\noptional arguments:\n  -h, --help          show this help message and exit\n  -v, --version       show pigar version information and exit\n  -u, --update        update database, use it when pigar failed you, exit when\n                      action done\n  -s NAME [NAME ...]  search package name by import name, use it if you do not\n                      know import name come from which package, exit when\n                      action done\n  -c [PATH]           check requirements for the latest version. If file path\n                      not given, search *requirements.txt in current\n                      directory, if not found, generate file requirements.txt,\n                      exit when action done\n  -l LOG_LEVEL        show given level log messages, argument can be (ERROR,\n                      WARNING, INFO), case-insensitive\n  -i DIR [DIR ...]    given a list of directory to ignore, relative directory,\n                      *used for* -c and default action\n  -p SAVE_PATH        save requirements in given file path, *used for* default\n                      action\n  -P PROJECT_PATH     project path, which is directory, *used for* default\n                      action\n```\n","slug":"python-2017-08-19-pigar","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2avk01395gqo9ivpuzxz"},{"title":"Python 微信公众号接口创建菜单编码问题","date":"2017-09-05T00:00:00.000Z","_content":"\n> 错误 {\"errcode\":40033,\"errmsg\":\"invalid charset. please check your request, if include \\\\uxxxx will create fail!\"}\n\n<!-- more -->\n## 方法\n利用 Python 的 json 内置模块，在进行 dumps 操作时，使用 `ensure_ascii=False`\n参数是中文不会被转码\n```python\ndata = json.dumps(data,ensure_ascii=False).encode('utf-8')\n```\n\n## 完整实例\n```python\nimport json\nimport requests\n\nurl = 'https://api.weixin.qq.com/cgi-bin/menu/create?access_token=...'\ndata = json.dumps(data,ensure_ascii=False).encode('utf-8')\nres = requests.post(url,data=data)\nprint(res)\n```\n","source":"_posts/python-2017-09-05-wx-create-menu-err.md","raw":"---\ntitle: Python 微信公众号接口创建菜单编码问题\ndate: 2017-09-05\ntags: [python, 微信]\n---\n\n> 错误 {\"errcode\":40033,\"errmsg\":\"invalid charset. please check your request, if include \\\\uxxxx will create fail!\"}\n\n<!-- more -->\n## 方法\n利用 Python 的 json 内置模块，在进行 dumps 操作时，使用 `ensure_ascii=False`\n参数是中文不会被转码\n```python\ndata = json.dumps(data,ensure_ascii=False).encode('utf-8')\n```\n\n## 完整实例\n```python\nimport json\nimport requests\n\nurl = 'https://api.weixin.qq.com/cgi-bin/menu/create?access_token=...'\ndata = json.dumps(data,ensure_ascii=False).encode('utf-8')\nres = requests.post(url,data=data)\nprint(res)\n```\n","slug":"python-2017-09-05-wx-create-menu-err","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2avl013b5gqo0wlm2scl"},{"title":"Flask api 文档","date":"2017-09-07T00:00:00.000Z","_content":"\n\n- [ 文档 ](http://flask.pocoo.org/docs/0.12/api)\n- [request 得到的数据](http://flask.pocoo.org/docs/0.12/api/#incoming-request-data)\n","source":"_posts/python-2017-09-07-flask-api.md","raw":"---\ntitle: Flask api 文档\ndate: 2017-09-07\ntags: [python]\n---\n\n\n- [ 文档 ](http://flask.pocoo.org/docs/0.12/api)\n- [request 得到的数据](http://flask.pocoo.org/docs/0.12/api/#incoming-request-data)\n","slug":"python-2017-09-07-flask-api","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2avn013d5gqouedxo8da"},{"title":"Python 使用 Markdown","date":"2017-09-06T21:15:00.000Z","_content":"> wxnacy 博客第一版 markdown 处理方案\n\n<!-- more -->\n\n<!-- toc -->\n## mistune\n\n[github](https://github.com/lepture/mistune)\n\n### 安装\n```bash\n$ pip install mistune\n```\n\n### 使用\n```python\nimport mistune\n\nres = mistune.Markdown('# title')\nprint(res)\n\nmd = mistune.Markdown()\ncontent = '# title'\nprint(md(content))\n```\n\n### 更多\n\n[更多用法](https://github.com/lepture/mistune#options)\n\n## markdown\n\n[github](https://github.com/Python-Markdown/markdown)\n\n### 安装\n```bash\n$ pip install markdown\n```\n\n### 使用\n\n```python\nimport markdown\n\nmd = markdown.Markdown()\nres = md.convert('# title')\nprint(res)\n```\n\n### TOC\n\n```python\nimport markdown\n\nEXT = ['markdown.extensions.toc']\nmd = markdown.Markdown(extensions=EXT)\nres = md.convert('# title \\n[TOC]\\n## h2')\nprint(res)\n\n```\n\n### 更多\n[ 官方文档 ](https://pythonhosted.org/Markdown/)\n[更多extensions值](https://pythonhosted.org/Markdown/extensions/index.html)\n\n## markdown2\n\n[github](https://github.com/trentm/python-markdown2)\n\n### 下载\n\n```bash\n$ pip install markdown2\n```\n\n### 使用\n\n```python\nimport markdown2\n\nmd = markdown2.Markdown()\nres = md.convert('# title')\nprint(res)\n```\n\n### TOC\n\n```python\nimport markdown2\n\nmd = markdown2.Markdown(extras=[\"toc\",\"header-ids\"])\nres = md.convert('# title \\n[TOC]\\n## h2')\nprint(res.toc_html)     # 这样只能得到单独生成的目录，不能生成到md文章中\n\n```\n\n### 更多\n[更多extras值](https://github.com/trentm/python-markdown2/wiki/Extras)\n\n","source":"_posts/python-2017-09-06-use-markdown.md","raw":"---\ntitle: Python 使用 Markdown\ndate: 2017-09-06 21:15\ntags: [python, markdown]\n---\n> wxnacy 博客第一版 markdown 处理方案\n\n<!-- more -->\n\n<!-- toc -->\n## mistune\n\n[github](https://github.com/lepture/mistune)\n\n### 安装\n```bash\n$ pip install mistune\n```\n\n### 使用\n```python\nimport mistune\n\nres = mistune.Markdown('# title')\nprint(res)\n\nmd = mistune.Markdown()\ncontent = '# title'\nprint(md(content))\n```\n\n### 更多\n\n[更多用法](https://github.com/lepture/mistune#options)\n\n## markdown\n\n[github](https://github.com/Python-Markdown/markdown)\n\n### 安装\n```bash\n$ pip install markdown\n```\n\n### 使用\n\n```python\nimport markdown\n\nmd = markdown.Markdown()\nres = md.convert('# title')\nprint(res)\n```\n\n### TOC\n\n```python\nimport markdown\n\nEXT = ['markdown.extensions.toc']\nmd = markdown.Markdown(extensions=EXT)\nres = md.convert('# title \\n[TOC]\\n## h2')\nprint(res)\n\n```\n\n### 更多\n[ 官方文档 ](https://pythonhosted.org/Markdown/)\n[更多extensions值](https://pythonhosted.org/Markdown/extensions/index.html)\n\n## markdown2\n\n[github](https://github.com/trentm/python-markdown2)\n\n### 下载\n\n```bash\n$ pip install markdown2\n```\n\n### 使用\n\n```python\nimport markdown2\n\nmd = markdown2.Markdown()\nres = md.convert('# title')\nprint(res)\n```\n\n### TOC\n\n```python\nimport markdown2\n\nmd = markdown2.Markdown(extras=[\"toc\",\"header-ids\"])\nres = md.convert('# title \\n[TOC]\\n## h2')\nprint(res.toc_html)     # 这样只能得到单独生成的目录，不能生成到md文章中\n\n```\n\n### 更多\n[更多extras值](https://github.com/trentm/python-markdown2/wiki/Extras)\n\n","slug":"python-2017-09-06-use-markdown","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2avp013f5gqo43np4pdk"},{"title":"Shell 基础命令","date":"2017-09-02T00:00:00.000Z","_content":"\n\n## type\n```bash\n$ type [-tpa] name\n选项与参数：\n    ：不加任何选项与参数时，type 会显示出 name 是外部命令还是 bash 内建命令\n-t  ：当加入 -t 参数时，type 会将 name 以底下这些字眼显示出他的意义：\n      file    ：表示为外部命令；\n      alias   ：表示该命令为命令别名所配置的名称；\n      builtin ：表示该命令为 bash 内建的命令功能；\n-p  ：如果后面接的 name 为外部命令时，才会显示完整文件名；\n-a  ：会由 PATH 变量定义的路径中，将所有含 name 的命令都列出来，包含 alias\n```\n\n## 设置别名alias和历史记录history\n```bash\n$ alias h='history'     # 设置别名\n$ unalias h             # 取消别名\n\n$ history [n]\n$ history [-c]\n$ history [-raw] histfiles\n```\n","source":"_posts/shell-2017-09-02-basic.md","raw":"---\ntitle: Shell 基础命令\ndate: 2017-09-02\ntags: [linux]\n---\n\n\n## type\n```bash\n$ type [-tpa] name\n选项与参数：\n    ：不加任何选项与参数时，type 会显示出 name 是外部命令还是 bash 内建命令\n-t  ：当加入 -t 参数时，type 会将 name 以底下这些字眼显示出他的意义：\n      file    ：表示为外部命令；\n      alias   ：表示该命令为命令别名所配置的名称；\n      builtin ：表示该命令为 bash 内建的命令功能；\n-p  ：如果后面接的 name 为外部命令时，才会显示完整文件名；\n-a  ：会由 PATH 变量定义的路径中，将所有含 name 的命令都列出来，包含 alias\n```\n\n## 设置别名alias和历史记录history\n```bash\n$ alias h='history'     # 设置别名\n$ unalias h             # 取消别名\n\n$ history [n]\n$ history [-c]\n$ history [-raw] histfiles\n```\n","slug":"shell-2017-09-02-basic","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2avq013h5gqozwwqt2xl"},{"title":"Zsh 与 oh-my-zsh 安装与使用","date":"2017-08-16T00:00:00.000Z","_content":"\n经常操作 Unix 系统有一款好的 Shell 工具是必备的，程序员刚开始接触的都是 Bash\n随着时代的进步，有越来越多的更好更方便的 Shell 工具可用，下面我们来介绍里面的\n翘楚 ***Zsh***\n\n<!-- toc -->\n\n## 安装 Zsh\n### CentOS\n```bash\n$ yum -y install zsh\n```\n### Ubuntu\n```bash\n$ apt-get -y install zsh\n```\n### Mac\n```bash\n$ brew install zsh\n```\n\n安装完毕我们就可以通过输入 `zsh` 进入 Zsh 命令行，如果想系统默认使用 Zsh 则可以\n修改配置文件\n```bash\n$ chsh -s /bin/zsh # 将默认shell改为zsh\n$ echo $SHELL # 查看是否生效\n```\n但是在 Mac 系统中这样会失败，因为 Zsh 的默认位置不在 `/bin/zsh`\n```bash\n$ which zsh\n/usr/local/bin/zsh\n```\n通过如上命令可以发现，brew 将 Zsh 安装到到 `/usr/local/bin/zsh`\n我们需要修改 Shell 配置，`sudo vim /etc/shells`\n```bash\n# List of acceptable shells for chpass(1).\n  2 # Ftpd will not allow users to connect who are not using\n  3 # one of these shells.\n  4\n  5 /bin/bash\n  6 /bin/csh\n  7 /bin/ksh\n  8 /bin/sh\n  9 /bin/tcsh\n-10 /bin/zsh\n+10 /usr/local/bin/zsh\n```\n我们将新的 Zsh 位置替换掉以前的，关闭文件，再次执行开始的命令即可\n\n## 安装 oh-my-zsh\n想要更好的使用 Zsh 我们还需要安装一个配置管理工具 [oh-my-zsh](http://ohmyz.sh/)\ncurl\n```bash\n$ sh -c \"$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)\"\n```\nwget\n```bash\n$ sh -c \"$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)\"\n```\n\n最后修改配置兼容 bash_profile 的环境变量 `vim ~/.zshrc`\n```bash\n...\nsource ~/.bash_profile\n...\n```\n\n## 皮肤\n\n```bash\n修改配置文件 `vim ~/.zshrc`\n\n...\nZSH_THEME=\"fishy\"       # 修改此处可以更改zsh使用皮肤\n...\n```\n\n[更多皮肤](https://github.com/robbyrussell/oh-my-zsh/wiki/themes)\n\nZsh 可以支持一些第三方应用命令的快速输入或简写，比如 `gst` 直接对应 `git status`\n`gd` 对应 `git diff`，这样在开发或维护服务都很有效率，不过想要生效还需要配置一下\n`vim ~/.zshrc`\n```bash\n...\nplugins=(git)\n...\n```\n","source":"_posts/shell-2017-08-16-zsh-install.md","raw":"---\ntitle: Zsh 与 oh-my-zsh 安装与使用\ndate: 2017-08-16\ntags: [linux, mac]\n---\n\n经常操作 Unix 系统有一款好的 Shell 工具是必备的，程序员刚开始接触的都是 Bash\n随着时代的进步，有越来越多的更好更方便的 Shell 工具可用，下面我们来介绍里面的\n翘楚 ***Zsh***\n\n<!-- toc -->\n\n## 安装 Zsh\n### CentOS\n```bash\n$ yum -y install zsh\n```\n### Ubuntu\n```bash\n$ apt-get -y install zsh\n```\n### Mac\n```bash\n$ brew install zsh\n```\n\n安装完毕我们就可以通过输入 `zsh` 进入 Zsh 命令行，如果想系统默认使用 Zsh 则可以\n修改配置文件\n```bash\n$ chsh -s /bin/zsh # 将默认shell改为zsh\n$ echo $SHELL # 查看是否生效\n```\n但是在 Mac 系统中这样会失败，因为 Zsh 的默认位置不在 `/bin/zsh`\n```bash\n$ which zsh\n/usr/local/bin/zsh\n```\n通过如上命令可以发现，brew 将 Zsh 安装到到 `/usr/local/bin/zsh`\n我们需要修改 Shell 配置，`sudo vim /etc/shells`\n```bash\n# List of acceptable shells for chpass(1).\n  2 # Ftpd will not allow users to connect who are not using\n  3 # one of these shells.\n  4\n  5 /bin/bash\n  6 /bin/csh\n  7 /bin/ksh\n  8 /bin/sh\n  9 /bin/tcsh\n-10 /bin/zsh\n+10 /usr/local/bin/zsh\n```\n我们将新的 Zsh 位置替换掉以前的，关闭文件，再次执行开始的命令即可\n\n## 安装 oh-my-zsh\n想要更好的使用 Zsh 我们还需要安装一个配置管理工具 [oh-my-zsh](http://ohmyz.sh/)\ncurl\n```bash\n$ sh -c \"$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)\"\n```\nwget\n```bash\n$ sh -c \"$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)\"\n```\n\n最后修改配置兼容 bash_profile 的环境变量 `vim ~/.zshrc`\n```bash\n...\nsource ~/.bash_profile\n...\n```\n\n## 皮肤\n\n```bash\n修改配置文件 `vim ~/.zshrc`\n\n...\nZSH_THEME=\"fishy\"       # 修改此处可以更改zsh使用皮肤\n...\n```\n\n[更多皮肤](https://github.com/robbyrussell/oh-my-zsh/wiki/themes)\n\nZsh 可以支持一些第三方应用命令的快速输入或简写，比如 `gst` 直接对应 `git status`\n`gd` 对应 `git diff`，这样在开发或维护服务都很有效率，不过想要生效还需要配置一下\n`vim ~/.zshrc`\n```bash\n...\nplugins=(git)\n...\n```\n","slug":"shell-2017-08-16-zsh-install","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2avs013j5gqo2swpr679"},{"title":"vim 插件管理","date":"2017-08-29T00:00:00.000Z","_content":"\n[专辑：Vim 练级手册](/vim)\n\n> 工欲善其事，必先利其器。熟练使用这些插件，开发起来会事半功倍\n\n<!-- more -->\n\n<!-- toc -->\n\n## Vundle\n官方推荐使用vim插件管理工具\n安装\n```bash\n$ git clone https://github.com/gmarik/Vundle.vim.git ~/.vim/bundle/Vundle.vim\n```\n\n配置.vimrc\n```bash\n$ touch ~/.vimrc\n\nset nocompatible              \" required\nfiletype off                  \" required\n\n\" set the runtime path to include Vundle and initialize\nset rtp+=~/.vim/bundle/Vundle.vim\ncall vundle#begin()\n\n\" alternatively, pass a path where Vundle should install plugins\n\"call vundle#begin('~/some/path/here')\n\n\" let Vundle manage Vundle, required\nPlugin 'gmarik/Vundle.vim'\n\n\" Add all your plugins here (note older versions of Vundle used Bundle instead of Plugin)\n\n\n\" All of your Plugins must be added before the following line\ncall vundle#end()            \" required\nfiletype plugin indent on    \" required\n```\n安装\n```bash\n$ vim\n$ :PluginInstall\n\n\n```\n\n## Powerline\n该工具可以很优雅的显示vim下方的工具栏\n```bash\nPlugin 'Lokaltog/powerline', {'rtp': 'powerline/bindings/vim/'}\n```\n修改.vimrc\n```bash\n$ vim ~/.vimrc\nset laststatus=2\n```\n\n## Solarized\n```bash\nPlugin 'altercation/vim-colors-solarized'\n\n$ vim ~/.vimrc\ncolorscheme solarized\n$ mkdir ~/.vim/colors\n$ cp ~/.vim/bundle/vim-colors-solarized ~/.vim/colors\n```\n\n## YouCompleteMe\n代码补全神器，但是安装也非常复杂，并不想其他插件那样一行命令就可以搞定\n首先还是配置来源\n```bash\nPlugin 'Valloric/YouCompleteMe'\n```\n保存退出后打开vim，在正常模式下输入\n```bash\n:PluginInstall\n```\n等待Vundle将YouCompleteMe安装完成，这个过程会很漫长，除非你的网络环境很好，最好翻墙\n最后进行编译\n```bash\n$ cd ~/.vim/bundle/YouCompleteMe\n$ ./install.sh --clang-completer\n```\n如果不需要c-family的补全，可以去掉--clang-completer。如果需要c#的补全，请加上--omnisharp-completer。\n\n默认使用本地py2的环境进行安装，但是执行install.sh，提示过期，如果使用install.py安装还是修改~/.bash_profile\n```bash\nexport PYTHON_CONFIGURE_OPTS=\"--enable-framework\"\n```\n执行``` source ~/.bash_profile``` 立即生效\n重新使用pyenv下载一个虚拟环境，在install即可\n\n## tarbar\ngithub:https://github.com/majutsushi/tagbar\n\n### 安装\n依赖 vim>7.0 和 [Exuberant ctags](http://ctags.sourceforge.net/)\n```bash\n# ubuntu\nsudo apt-get install ctags\n\n# centos\nsudo yum install ctags\n\n# mac\nbrew install ctags\n```\n在vim中安装\n```bash\nPlugin 'majutsushi/tagbar'\n```\n\n### 使用\n配置快捷键t，编辑文件时按t，自动进入，jk上下移动，回车选中跳转\n最终配置\n```bash\nPlugin 'majutsushi/tagbar'\nnmap t :TagbarToggle<CR>\n\" 启动时自动focus\nlet g:tagbar_autofocus = 1\n\n\" for ruby, delete if you do not need\nlet g:tagbar_type_ruby = {\n    \\ 'kinds' : [\n        \\ 'm:modules',\n        \\ 'c:classes',\n        \\ 'd:describes',\n        \\ 'C:contexts',\n        \\ 'f:methods',\n        \\ 'F:singleton methods'\n    \\ ]\n\\ }\n```\n### 配置markdown\nvim ~/.ctags\n```bash\n--langdef=markdown\n--langmap=markdown:.mkd\n--regex-markdown=/^#[ \\t]+(.*)/\\1/h,Heading_L1/\n--regex-markdown=/^##[ \\t]+(.*)/\\1/i,Heading_L2/\n--regex-markdown=/^###[ \\t]+(.*)/\\1/k,Heading_L3/\n```\nvim ~/.vimc\n```bash\nlet g:tagbar_type_markdown = {\n    \\ 'ctagstype' : 'markdown',\n    \\ 'kinds' : [\n        \\ 'h:Heading_L1',\n        \\ 'i:Heading_L2',\n        \\ 'k:Heading_L3'\n    \\ ]\n\\ }\n```\n### 命令\n```bash\n跳到光标下tag所定义的位置，用鼠标双击此tag功能也一样\no 在一个新打开的窗口中显示光标下tag\n显示光标下tag的原型定义\nu 更新taglist窗口中的tag\ns 更改排序方式，在按名字排序和按出现顺序排序间切换\nx taglist窗口放大和缩小，方便查看较长的tag\n+ 打开一个折叠，同zo\n- 将tag折叠起来，同zc\n* 打开所有的折叠，同zR\n= 将所有tag折叠起来，同zM\n[[ 跳到前一个文件\n]] 跳到后一个文件\nq 关闭taglist窗口\n```\n\n### 更多\n文档：https://github.com/majutsushi/tagbar/wiki\n\n## quickrun\n快速执行\ngithub：https://github.com/thinca/vim-quickrun\n### 安装\n```bash\nPlugin 'thinca/vim-quickrun'                                                \" 快速执行\n```\n### 配置\n```bash\nlet g:quickrun_config = {\n\\   \"_\" : {\n\\       \"outputter\" : \"message\",\n\\   },\n\\}\nlet g:quickrun_no_default_key_mappings = 1\nnmap <Leader>r <Plug>(quickrun)\nmap <F10> :QuickRun<CR>\n```\n\n## airline\n增强状态栏\n\n### 安装\n```bash\nPlugin 'bling/vim-airline'                                                  \" 状态栏\n```\n\n### 配置\n```bash\nif !exists('g:airline_symbols')\nlet g:airline_symbols = {}\nendif\nlet g:airline_left_sep       = '▶'\nlet g:airline_left_alt_sep   = '❯'\nlet g:airline_right_sep      = '◀'\nlet g:airline_right_alt_sep  = '❮'\nlet g:airline_symbols.linenr = '¶'\nlet g:airline_symbols.branch = '⎇'\n```\n\n## nerdcommenter\n> 快速注释/放开注释\n\ngithub：https://github.com/scrooloose/nerdcommentera\n\n### 安装\n```bash\nPlugin 'scrooloose/nerdcommenter'\n```\n\n### 使用\n官方快键键,更多用法见[快捷键](https://github.com/scrooloose/nerdcommenter#default-mappings)\n```\n<header>c<space>    # 自动判断注释还是放开注释\n<header>cy          # 添加注释后自动\n```\n\n### 配置\n常用配置，更多见[文档](https://github.com/scrooloose/nerdcommenter#documentation)\n```bash\nlet g:NERDSpaceDelims = 1   # 注释后添加空格，推荐\n```\n\n## gundo.\n> 查看/跳转历史记录\n\ngithub:https://github.com/sjl/gundo.vim\n### 安装\n```bash\nPlugin 'sjl/gundo.vim'                      \" 查看文件编辑历史记录\n```\n\n### 配置\n```bash\nnnoremap <leader>h :GundoToggle<CR>\n```\n\n### 使用\n```bash\n使用;h打开历史记录，使用<ctrl>w+hl左右移动窗口，在历史记录窗口使用jk上下移动，\n回车跳转到某次记录\n```\n\n## vim-expand-region\n> 区域选择\n\n[ github ](https://github.com/terryma/vim-expand-region)\n\n### 安装\n```bash\nPlugin 'terryma/vim-expand-region'\n```\n\n### 配置\n自定义快捷键 v 区域选择、V 取消选择 这样比较符合vim本身习惯\n```bash\nvmap v <Plug>(expand_region_expand)\nvmap V <Plug>(expand_region_shrink)\n```\n\n### 更多\n见[ 文档 ](https://github.com/terryma/vim-expand-region#setting)\n\n## vim-easy-align 快速对齐\n\n### 安装\n```bash\nPlugin 'junegunn/vim-easy-align'\n```\n\n### 配置\n```bash\nvmap <Leader>a <Plug>(EasyAlign)\nnmap <Leader>a <Plug>(EasyAlign)\nif !exists('g:easy_align_delimiters')\n  let g:easy_align_delimiters = {}\nendif\nlet g:easy_align_delimiters['#'] = { 'pattern': '#', 'ignore_groups': ['String'] }\n```\n\n### 使用\n绑定快捷键<Leader>a，使用 v 选中目标区域后执行响应命令\n```bash\n<Leader>a=        对齐等号表达\n<Leader>a:        对齐冒号表达式(json/map等)\n\n# 默认左对齐\n<Leader>a<space>  首个空格对齐\n<Leader>a2<space> 第二个空格对齐\n<Leader>a-<space> 倒数第一个空格对齐\n<Leader>a-2<space> 倒数第二个空格对齐\n<Leader>a*<space> 所有空格依次对齐\n\n# 右对齐\n<Leader>a<Enter>*<space>\n```\n\n### 更多\n见[ 文档 ](https://github.com/junegunn/vim-easy-align#demo)\n","source":"_posts/vim-2017-08-29-plug.md","raw":"---\ntitle: vim 插件管理\ndate: 2017-08-29\ntags: [vim]\n---\n\n[专辑：Vim 练级手册](/vim)\n\n> 工欲善其事，必先利其器。熟练使用这些插件，开发起来会事半功倍\n\n<!-- more -->\n\n<!-- toc -->\n\n## Vundle\n官方推荐使用vim插件管理工具\n安装\n```bash\n$ git clone https://github.com/gmarik/Vundle.vim.git ~/.vim/bundle/Vundle.vim\n```\n\n配置.vimrc\n```bash\n$ touch ~/.vimrc\n\nset nocompatible              \" required\nfiletype off                  \" required\n\n\" set the runtime path to include Vundle and initialize\nset rtp+=~/.vim/bundle/Vundle.vim\ncall vundle#begin()\n\n\" alternatively, pass a path where Vundle should install plugins\n\"call vundle#begin('~/some/path/here')\n\n\" let Vundle manage Vundle, required\nPlugin 'gmarik/Vundle.vim'\n\n\" Add all your plugins here (note older versions of Vundle used Bundle instead of Plugin)\n\n\n\" All of your Plugins must be added before the following line\ncall vundle#end()            \" required\nfiletype plugin indent on    \" required\n```\n安装\n```bash\n$ vim\n$ :PluginInstall\n\n\n```\n\n## Powerline\n该工具可以很优雅的显示vim下方的工具栏\n```bash\nPlugin 'Lokaltog/powerline', {'rtp': 'powerline/bindings/vim/'}\n```\n修改.vimrc\n```bash\n$ vim ~/.vimrc\nset laststatus=2\n```\n\n## Solarized\n```bash\nPlugin 'altercation/vim-colors-solarized'\n\n$ vim ~/.vimrc\ncolorscheme solarized\n$ mkdir ~/.vim/colors\n$ cp ~/.vim/bundle/vim-colors-solarized ~/.vim/colors\n```\n\n## YouCompleteMe\n代码补全神器，但是安装也非常复杂，并不想其他插件那样一行命令就可以搞定\n首先还是配置来源\n```bash\nPlugin 'Valloric/YouCompleteMe'\n```\n保存退出后打开vim，在正常模式下输入\n```bash\n:PluginInstall\n```\n等待Vundle将YouCompleteMe安装完成，这个过程会很漫长，除非你的网络环境很好，最好翻墙\n最后进行编译\n```bash\n$ cd ~/.vim/bundle/YouCompleteMe\n$ ./install.sh --clang-completer\n```\n如果不需要c-family的补全，可以去掉--clang-completer。如果需要c#的补全，请加上--omnisharp-completer。\n\n默认使用本地py2的环境进行安装，但是执行install.sh，提示过期，如果使用install.py安装还是修改~/.bash_profile\n```bash\nexport PYTHON_CONFIGURE_OPTS=\"--enable-framework\"\n```\n执行``` source ~/.bash_profile``` 立即生效\n重新使用pyenv下载一个虚拟环境，在install即可\n\n## tarbar\ngithub:https://github.com/majutsushi/tagbar\n\n### 安装\n依赖 vim>7.0 和 [Exuberant ctags](http://ctags.sourceforge.net/)\n```bash\n# ubuntu\nsudo apt-get install ctags\n\n# centos\nsudo yum install ctags\n\n# mac\nbrew install ctags\n```\n在vim中安装\n```bash\nPlugin 'majutsushi/tagbar'\n```\n\n### 使用\n配置快捷键t，编辑文件时按t，自动进入，jk上下移动，回车选中跳转\n最终配置\n```bash\nPlugin 'majutsushi/tagbar'\nnmap t :TagbarToggle<CR>\n\" 启动时自动focus\nlet g:tagbar_autofocus = 1\n\n\" for ruby, delete if you do not need\nlet g:tagbar_type_ruby = {\n    \\ 'kinds' : [\n        \\ 'm:modules',\n        \\ 'c:classes',\n        \\ 'd:describes',\n        \\ 'C:contexts',\n        \\ 'f:methods',\n        \\ 'F:singleton methods'\n    \\ ]\n\\ }\n```\n### 配置markdown\nvim ~/.ctags\n```bash\n--langdef=markdown\n--langmap=markdown:.mkd\n--regex-markdown=/^#[ \\t]+(.*)/\\1/h,Heading_L1/\n--regex-markdown=/^##[ \\t]+(.*)/\\1/i,Heading_L2/\n--regex-markdown=/^###[ \\t]+(.*)/\\1/k,Heading_L3/\n```\nvim ~/.vimc\n```bash\nlet g:tagbar_type_markdown = {\n    \\ 'ctagstype' : 'markdown',\n    \\ 'kinds' : [\n        \\ 'h:Heading_L1',\n        \\ 'i:Heading_L2',\n        \\ 'k:Heading_L3'\n    \\ ]\n\\ }\n```\n### 命令\n```bash\n跳到光标下tag所定义的位置，用鼠标双击此tag功能也一样\no 在一个新打开的窗口中显示光标下tag\n显示光标下tag的原型定义\nu 更新taglist窗口中的tag\ns 更改排序方式，在按名字排序和按出现顺序排序间切换\nx taglist窗口放大和缩小，方便查看较长的tag\n+ 打开一个折叠，同zo\n- 将tag折叠起来，同zc\n* 打开所有的折叠，同zR\n= 将所有tag折叠起来，同zM\n[[ 跳到前一个文件\n]] 跳到后一个文件\nq 关闭taglist窗口\n```\n\n### 更多\n文档：https://github.com/majutsushi/tagbar/wiki\n\n## quickrun\n快速执行\ngithub：https://github.com/thinca/vim-quickrun\n### 安装\n```bash\nPlugin 'thinca/vim-quickrun'                                                \" 快速执行\n```\n### 配置\n```bash\nlet g:quickrun_config = {\n\\   \"_\" : {\n\\       \"outputter\" : \"message\",\n\\   },\n\\}\nlet g:quickrun_no_default_key_mappings = 1\nnmap <Leader>r <Plug>(quickrun)\nmap <F10> :QuickRun<CR>\n```\n\n## airline\n增强状态栏\n\n### 安装\n```bash\nPlugin 'bling/vim-airline'                                                  \" 状态栏\n```\n\n### 配置\n```bash\nif !exists('g:airline_symbols')\nlet g:airline_symbols = {}\nendif\nlet g:airline_left_sep       = '▶'\nlet g:airline_left_alt_sep   = '❯'\nlet g:airline_right_sep      = '◀'\nlet g:airline_right_alt_sep  = '❮'\nlet g:airline_symbols.linenr = '¶'\nlet g:airline_symbols.branch = '⎇'\n```\n\n## nerdcommenter\n> 快速注释/放开注释\n\ngithub：https://github.com/scrooloose/nerdcommentera\n\n### 安装\n```bash\nPlugin 'scrooloose/nerdcommenter'\n```\n\n### 使用\n官方快键键,更多用法见[快捷键](https://github.com/scrooloose/nerdcommenter#default-mappings)\n```\n<header>c<space>    # 自动判断注释还是放开注释\n<header>cy          # 添加注释后自动\n```\n\n### 配置\n常用配置，更多见[文档](https://github.com/scrooloose/nerdcommenter#documentation)\n```bash\nlet g:NERDSpaceDelims = 1   # 注释后添加空格，推荐\n```\n\n## gundo.\n> 查看/跳转历史记录\n\ngithub:https://github.com/sjl/gundo.vim\n### 安装\n```bash\nPlugin 'sjl/gundo.vim'                      \" 查看文件编辑历史记录\n```\n\n### 配置\n```bash\nnnoremap <leader>h :GundoToggle<CR>\n```\n\n### 使用\n```bash\n使用;h打开历史记录，使用<ctrl>w+hl左右移动窗口，在历史记录窗口使用jk上下移动，\n回车跳转到某次记录\n```\n\n## vim-expand-region\n> 区域选择\n\n[ github ](https://github.com/terryma/vim-expand-region)\n\n### 安装\n```bash\nPlugin 'terryma/vim-expand-region'\n```\n\n### 配置\n自定义快捷键 v 区域选择、V 取消选择 这样比较符合vim本身习惯\n```bash\nvmap v <Plug>(expand_region_expand)\nvmap V <Plug>(expand_region_shrink)\n```\n\n### 更多\n见[ 文档 ](https://github.com/terryma/vim-expand-region#setting)\n\n## vim-easy-align 快速对齐\n\n### 安装\n```bash\nPlugin 'junegunn/vim-easy-align'\n```\n\n### 配置\n```bash\nvmap <Leader>a <Plug>(EasyAlign)\nnmap <Leader>a <Plug>(EasyAlign)\nif !exists('g:easy_align_delimiters')\n  let g:easy_align_delimiters = {}\nendif\nlet g:easy_align_delimiters['#'] = { 'pattern': '#', 'ignore_groups': ['String'] }\n```\n\n### 使用\n绑定快捷键<Leader>a，使用 v 选中目标区域后执行响应命令\n```bash\n<Leader>a=        对齐等号表达\n<Leader>a:        对齐冒号表达式(json/map等)\n\n# 默认左对齐\n<Leader>a<space>  首个空格对齐\n<Leader>a2<space> 第二个空格对齐\n<Leader>a-<space> 倒数第一个空格对齐\n<Leader>a-2<space> 倒数第二个空格对齐\n<Leader>a*<space> 所有空格依次对齐\n\n# 右对齐\n<Leader>a<Enter>*<space>\n```\n\n### 更多\n见[ 文档 ](https://github.com/junegunn/vim-easy-align#demo)\n","slug":"vim-2017-08-29-plug","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2avt013l5gqo2v1n6n30"},{"title":"Vim 基础命令","date":"2017-08-23T00:00:00.000Z","_content":"\n[专辑：Vim 练级手册](/vim)\n\n开始之前我们先来谈谈为什么用 Vim， 网上有很多探讨 Vim 哲学的文章，在我看来 Vim 是这样的一款编辑器。它可以很简单，简单到除了你正在编辑的文字，其余什么都没有。它也可以很复杂，复杂到可以囊括所有 IDE 可以有的功能。它可以很简单，简单到只需要几个输入几个字符，就可以完成其他 IDE 几分钟的工作量。它也可以很复杂，复杂到你连退出就不会。它是一个很神奇的编辑器，它可以无所不能，也可以化繁为简。它可以变成任何你想要的样子，问题只有一个，你是不是准备好开始接受它了。上车吧，我们要出发了\n\n<!-- more -->\n\n<!-- toc -->\n## 几种模式\n\n### normal\n以 vim 打开一个文档，默认进入的就是 normal 模式，在该模式下，我们可以 `上下左右` 移动光标，可以 `删除，黏贴，复制` 文本。\n\n### visual\n在 normal 模式下，我们可以进行的复制删除等操作仅限于打个字符或正行，如果想要对某个区域进行操作，需要通过输入 `V, v, <c-v>` 来进入 visual 模式\n\n### insert\n想要插入数据，可以通过按下 `i, I, a, A, o, O, s, S` 可以进入insert 模式，通过按下 `<es>` 退出键回到 normal 模式\n\n### replace\nreplace 模式，需要在 normal 模式下按下 `r, R` 键来进入，与 insert 不同的是，该模式只能对现有文本进行替换，同样需要按下 `<esc>` 回到 normal 模式\n\n### command\n在 normal 下通过输入 `:, /, ?` 来进入 command 模式，在该模式下光标会移动到最下边一行，同时可以完成 `搜索、读取，存档，替换，离开 Vim、配置 Vim` 等操作\n\n## 基本操作\n介绍完几种模式，这部分我们来探讨下各个模式下的基本操作\n\n### 移动光标\n这部分是在 normal 模式下完成的，我通过单个或组合按键来完成光标的移动，最简单的是 `h, j, k, l` 他们分别代表了小键盘区的 `← ↓ ↑ →` 来进行左下上右的移动操作，接下来是翻页，这涉及到一个组合键 `<c-f>` ，它代表的是 `ctrl + f` 的缩写，以后这类组合键我们都会这样写\n```vim\n<c-f>   \" 向下移动一页\n<c-d>   \" 向下移动半页\n<c-b>   \" 向上移动一页\n<c-u>   \" 向上移动半页\n```\n接下来要说到的是针对行的光标操作\n```vim\nn<space> / nl\t    \" n 表示数字，后边跟上空格或者 l ，就可以向右移动相应格数\nnh                  \" 跟上边一样，是向左移动\n0                   \" 0 可以移动到行首\n$                   \" 移动到行尾\ng_                  \" 移动到行尾最后一个非空字符\n\nn<Enter> / nj\t    \" n 表示数字，向下移动相应行数\nnk                  \" 跟上边一样，是向上移动\nnG                  \" 移动到指定的行数\ngg                  \" 动到文档第一行，相当于1G\nG                   \" 移动到文档最后一行\n\n```\n还有一些不常用的行操作，不记也没关系\n```vim\nH\t                \" 移动到当前屏幕第一行的第一个字符\nM\t                \" 移动到当前屏幕中间行的第一个字符\nL\t                \" 移动到当前屏幕最后一行的第一个字符\n+\t                \" 移动到非空白字符的下一行\n-\t                \" 移动到非空白字符的上一行\n```\n\n### 查找与替换\n\n```bash\n/word   \" 输入 / 会进入 command 模式，再输入先要搜索的单词并回车进行搜索\n?word   \" / 是向光标以后搜索，? 是向前搜索\nn       \" 英文字母 n，根据 / 或 ? 搜索的方向定位到下一个匹配目标\nN       \" 与 n 相反，定位匹配目标\n\n\n:n1,n2s/word1/word2/g   \" n1, n2 表示数字，替换 n1 行到 n2 行的单词\n:1,$s/word1/word2/g     \" 全文替换，也可以写成 :%s/word1/word2/g\n:1,$s/word1/word2/gc    \" 全文替换，并出现确认提示\n```\n\n### 删除、复制和黏贴\n\n```bash\nx, X        \" 删除字符，x 向后删除一个字符，X 向前删除一个字符\nnx, nX      \" 向后或向前删除 n 个字符\ndd          \" 删除当前行\nndd         \" 向下删除 n 行\nd1G / dgg   \" 删除第一行到当前行的数据\ndG          \" 删除当前行到最后一行的数据\nd$          \" 删除当前字符到行尾\nd0          \" 从行首删除到当前字符\n\nyy          \" 复制当前行\nnyy         \" 从当前行开始复制 n 行\ny1G / ygg   \" 从第一行复制到当前行\nyG          \" 从当前行复制到最后一行\ny0          \" 从行首复制到当前字符\ny$          \" 从当前字符复制到行尾\n\np, P        \" 黏贴，p 黏贴到光标下一行，P 黏贴到光标上一行\n\nJ           \" 将下一行合并到当前行，在 visual 模式下是合并选中行\nncj / nck   \" 向下或向上删除 n 行，并进入 insert 模式\nu           \" 撤销\n<c-r>       \" 重做\n\n.           \" 你没看错，就是个小数点，重复上一次的动作，可以在删除黏贴等后边用\n```\n\n第二部份：一般指令模式切換到編輯模式的可用的按鈕說明\n\n### 进入插入或替换的编辑模式\n\n```bash\ni       在光标所在处插入\nI       在该行第一个非空字符处插\na       在光标后一个字符插入\nA       在该行最后一个字符后插入\no, O\t進入插入模式(Insert mode)：\no       在光标的下一行插入\nO       在光标的上一行插入\ns       \" 删除当前字符，并进入 insert 模式\"\nS       \" 删除当前行，并进入插入模式\n\n\ncw      删除光标后第一个单词，并进入插入模式\ncc      \" 删除当前行，并进入插入模式\n\nr, R\t進入取代模式(Replace mode)：\nr       只會取代游標所在的那一個字元一次；R會一直取代游標所在的文字，直到按下 ESC 為止；(常用)\n<C-a>   光标放在数字上，按下该组合键可以让数字加一\n\n# 上面這些按鍵中，在 vi 畫面的左下角處會出現『--INSERT--』或『--REPLACE--』的字樣。 由名稱就知道該動作了吧！！特別注意的是，我們上面也提過了，你想要在檔案裡面輸入字元時， 一定要在左下角處看到 INSERT 或 REPLACE 才能輸入喔！\n\n\n[Esc]\t退出編輯模式，回到一般指令模式中(常用)\n```\n\n第三部份：一般指令模式切換到指令列模式的可用按钮说明\n\n### 指令列模式的保存、离开等指令\n\n```bash\n:w\t                將編輯的資料寫入硬碟檔案中(常用)\n:w!\t                若檔案屬性為『唯讀』時，強制寫入該檔案。不過，到底能不能寫入， 還是跟你對該檔案的檔案權限有關啊！\n:q\t                離開 vi (常用)\n:q!\t                若曾修改過檔案，又不想儲存，使用 ! 為強制離開不儲存檔案。\n\n# 注意一下啊，那個驚嘆號 (!) 在 vi 當中，常常具有『強制』的意思～\n\n:wq\t                儲存後離開           ，若為 :wq! 則為強制儲存後離開 (常用)\nZZ\t                這是大寫的 Z 喔！若檔案沒有更動，則不儲存離開，若檔案已經被更動過，則儲存後離開！\n:w [filename]\t    將編輯的資料儲存成另一個檔案（類似另存新檔）\n:r [filename]\t    在編輯的資料中，讀入另一個檔案的資料。亦即將 『filename』 這個檔案內容加到游標所在列後面\n:n1,n2 w [filename]\t將 n1 到 n2 的內容儲存成 filename 這個檔案。\n:! command\t        暫時離開 vi 到指令列模式下執行 command 的顯示結果！例如『:! ls /home』即可在 vi 當中察看 /home 底下以 ls 輸出的檔案資訊！\n```\n\n### vim 环境的变更\n\n```bash\n:set nu\t    顯示行號，設定之後，會在每一列的字首顯示該列的行號\n:set nonu\t與 set nu 相反，為取消行號！\n```\n## 额外功能\n### vim 的保存文件、恢复与打开时的警告信息\n當我們在使用 vim 編輯時， vim 會在與被編輯的檔案的目錄下，再建立一個名為 .filename.swp 的檔案。 比如說我們在上一個小節談到的編輯 /tmp/vitest/man_db.conf 這個檔案時， vim 會主動的建立 /tmp/vitest/.man_db.conf.swp 的暫存檔，你對 man_db.conf 做的動作就會被記錄到這個 .man_db.conf.swp 當中喔！如果你的系統因為某些原因斷線了， 導致你編輯的檔案還沒有儲存，這個時候 .man_db.conf.swp 就能夠發揮救援的功能了！我們來測試一下吧！ 底下的練習有些部分的指令我們尚未談到，沒關係，你先照著做，後續再回來瞭解囉！\n```bash\n$ cd /tmp/vitest\n$ vim man_db.conf\n# 此時會進入到 vim 的畫面，請在 vim 的一般指令模式下按下『 [ctrl]-z 』的組合鍵\n\n[1]+  Stopped             vim man_db.conf  <==按下 [ctrl]-z 會告訴你這個訊息\n```\n當我們在 vim 的一般指令模式下按下 [ctrl]-z 的組合按鍵時，你的 vim 會被丟到背景去執行。回到命令提示字元後，接下來我們來模擬將 vim 的工作不正常的中斷吧！\n```bash\n$ ls -al\ndrwxrwxr-x.  2 dmtsai dmtsai    69 Jul  6 23:54 .\ndrwxrwxrwt. 17 root   root    4096 Jul  6 23:53 ..\n-rw-r--r--.  1 dmtsai dmtsai  4850 Jul  6 23:47 man_db.conf\n-rw-r--r--.  1 dmtsai dmtsai 16384 Jul  6 23:54 .man_db.conf.swp  <==就是他，暫存檔\n-rw-rw-r--.  1 dmtsai dmtsai  5442 Jul  6 23:35 man.test.config\n\n$ kill -9 %1 <==這裡模擬斷線停止 vim 工作\n$ ls -al .man_db.conf.swp\n-rw-r--r--. 1 dmtsai dmtsai 16384 Jul  6 23:54 .man_db.conf.swp  <==暫存檔還是會存在！\n\n$ vim man_db.conf\n\nE325: ATTENTION  <==錯誤代碼\nFound a swap file by the name \".man_db.conf.swp\"  <==底下數列說明有暫存檔的存在\n          owned by: dmtsai   dated: Mon Jul  6 23:54:16 2015\n         file name: /tmp/vitest/man_db.conf  <==這個暫存檔屬於哪個實際的檔案？\n          modified: no\n         user name: dmtsai   host name: study.centos.vbird\n        process ID: 31851\nWhile opening file \"man_db.conf\"\n             dated: Mon Jul  6 23:47:21 2015\n\n底下說明可能發生這個錯誤的兩個主要原因與解決方案！\n(1) Another program may be editing the same file.  If this is the case,\n    be careful not to end up with two different instances of the same\n    file when making changes.  Quit, or continue with caution.\n(2) An edit session for this file crashed.\n    If this is the case, use \":recover\" or \"vim -r man_db.conf\"\n    to recover the changes (see \":help recovery\").\n    If you did this already, delete the swap file \".man_db.conf.swp\"\n    to avoid this message.\n\nSwap file \".man_db.conf.swp\" already exists! 底下說明你可進行的動作\n[O]pen Read-Only, (E)dit anyway, (R)ecover, (D)elete it, (Q)uit, (A)bort:\n```\n再次打开文件时，会出现六个按钮，他们的作用依次是：\n\n```bash\n[O]pen Read-Only：打開此檔案成為唯讀檔， 可以用在你只是想要查閱該檔案內容並不想要進行編輯行為時。一般來說，在上課時，如果你是登入到同學的電腦去看他的設定檔， 結果發現其實同學他自己也在編輯時，可以使用這個模式；\n\n(E)dit anyway：還是用正常的方式打開你要編輯的那個檔案， 並不會載入暫存檔的內容。不過很容易出現兩個使用者互相改變對方的檔案等問題！不好不好！\n\n(R)ecover：就是載入暫存檔的內容，用在你要救回之前未儲存的工作。 不過當你救回來並且儲存離開 vim 後，還是要手動自行刪除那個暫存檔喔！\n\n(D)elete it：你確定那個暫存檔是無用的！那麼開啟檔案前會先將這個暫存檔刪除！ 這個動作其實是比較常做的！因為你可能不確定這個暫存檔是怎麼來的，所以就刪除掉他吧！哈哈！\n\n(Q)uit：按下 q 就離開 vim ，不會進行任何動作回到命令提示字元。\n\n(A)bort：忽略這個編輯行為，感覺上與 quit 非常類似！ 也會送你回到命令提示字元就是囉！\n```\n\n### 多文件编辑\n\n很多同学任务高集成的IDE比vim好用，是因为vim不能操作一些事情，比如跨文件复制，但其实vim完全可以做到，首先下载文件：http://linux.vbird.org/linux_basic/0310vi/hosts 打开后如下所示:\n```bash\n192.168.1.1    host1.class.net\n192.168.1.2    host2.class.net\n192.168.1.3    host3.class.net\n192.168.1.4    host4.class.net\n.....中間省略......\n```\n\n我们再建一个新文件host2,并进行跨文件复制操作\n```bash\n$ touch host_copy\n$ vim hosts host_copy # 使用vim同时打开两个文件\n```\n下面我们会使用这几个命令\n```bash\n:n\t    編輯下一個檔案\n:N\t    編輯上一個檔案\n:files\t列出目前這個 vim 的開啟的所有檔案\n```\n\n```bash\n:files      # 再打开文件后一般模式下使用改名了查看有几个文件\n\n:files\n  1 %a   \"hosts\"                        line 1      # %a代表当前编辑的文件\n  2      \"host2\"                        line 0\n\n# 使用gg切换到第一行，使用4yy复制前四行\n:n          # 指令该命令编辑下一个文件\n\n# 使用p将刚才复制的内容粘贴到该文件中使用:q退出编辑并查看host2会发现刚才的内容已经复制过来了\n```\n\n\n\n\n\n\n```bash\nv\t        字元選擇，會將游標經過的地方反白選擇！\nV\t        列選擇，會將游標經過的列反白選擇！\n[Ctrl]+v    區塊選擇，可以用長方形的方式選擇資料\ny\t        將反白的地方複製起來\nd\t        將反白的地方刪除掉\np\t        將剛剛複製的區塊，在游標所在處貼上！\n```\n\n## 快替换\n```bash\n[Ctrl] + v 选中块\nc  输入替换文字\n<Esc> 完成替换\n```\n\n## 多窗口\n```bash\n:sp [filename]  # 垂直分割屏幕，filename 是想要打开的文件，默认当前文档\n:vsp [filename] # 水平分割屏幕\n[ctrl]+w+↓/j    # 按键的按法是：先按下 [ctrl] 不放， 再按下 w 后放开所有的按键，然后再按下 j (或向下箭头键)，则光标可移动到下方的窗口。\n[ctrl]+w+↑/k    # 同上，不过光标移动到上面的窗口。\n[ctrl]+w+q      # 其实就是 :q 结束离开啦！ 举例来说，如果我想要结束下方的窗口，那么利用 [ctrl]+w+↓ 移动到下方窗口后，按下 :q 即可离开， 也可以按下 [ctrl]+w+q 啊！\n\nctrl_w + r: 窗口本身, 不是鼠标指针顺时针 (向下, 向右 移动), R : 则是逆时针反方向(向上, 向左)移动.\nctrl_w+x: 左右上下对应位置的窗口 对调. 要注意窗口必须是 对应的, 如果不对应将无法对换, 比如左边一个大窗口, 右边有两个小的 子窗口, 则左右不能互换.\n```\n\n\n```bash\n# set compatible 就是让 vim 关闭所有扩展的功能，尽量模拟 vi 的行为。\n但这样就不应用 vim 的很多强大功能，所以一般没有什么特殊需要的话（比如执行很老的 vi 脚本），都要在 vim 的配置开始，写上 set nocompatible，关闭兼容模式。由于这个选项是最最基础的选项，会连带很多其它选项发生变动（称作副作用），所以它必需是第一个设定的选项。\nset nocompatible\n```\n\n## Operator-Pending映射\n```bash\nvip         # vip很好记\nviw         # 快速选中当前单词\nvi(         # 选择括号内的文字\nvt,         # 选择到下一个逗号\n```\n\n## 宏\nvim有个非常厉害的功能叫**宏**，它可以将你的操作进行宏录制，放到vim寄存器中，并按照你想要的方式播放出来\n\n### 操作\n\n- 首先准备一个文件，第一行为数字1\n- 光标放在1上并按下 qa（当然也可以 qb，qc，这只是录制宏的名字）开始录制，测试左下角会显示录制字样\n- 输入 yyp 复制当前行到下一行，并输入 <C-a> 将数字增加1，此时第二行数字为2\n- 按下 q 结束录制，并按下 @a 播放宏，此时第三行会变成3，按下 @@ 重复上次播放，第四行会变成4\n- 当按下 100@@ 时，宏会重复播放100次上次的播放记录，自动生成104行数据\n\n## 与系统剪切版交互\n加上 `\"+` 即可\n```bash\n\"+yy\n\"+Y\nv\"+y\n```\n\n## 其他操作\n```bash\n:inoremap <esc> <nop>   # 使<esc>失效\ng_  # 移动到当前行（译注：等号组成的行）的最后一个非空字符。\n```\n\n## 参考文献\n\n- [vim 程式编辑器](http://cn.linux.vbird.org/linux_basic/0310vi.php)\n","source":"_posts/vim-2017-08-23-basic-cmd.md","raw":"---\ntitle: Vim 基础命令\ndate: 2017-08-23\ntags: [vim]\n---\n\n[专辑：Vim 练级手册](/vim)\n\n开始之前我们先来谈谈为什么用 Vim， 网上有很多探讨 Vim 哲学的文章，在我看来 Vim 是这样的一款编辑器。它可以很简单，简单到除了你正在编辑的文字，其余什么都没有。它也可以很复杂，复杂到可以囊括所有 IDE 可以有的功能。它可以很简单，简单到只需要几个输入几个字符，就可以完成其他 IDE 几分钟的工作量。它也可以很复杂，复杂到你连退出就不会。它是一个很神奇的编辑器，它可以无所不能，也可以化繁为简。它可以变成任何你想要的样子，问题只有一个，你是不是准备好开始接受它了。上车吧，我们要出发了\n\n<!-- more -->\n\n<!-- toc -->\n## 几种模式\n\n### normal\n以 vim 打开一个文档，默认进入的就是 normal 模式，在该模式下，我们可以 `上下左右` 移动光标，可以 `删除，黏贴，复制` 文本。\n\n### visual\n在 normal 模式下，我们可以进行的复制删除等操作仅限于打个字符或正行，如果想要对某个区域进行操作，需要通过输入 `V, v, <c-v>` 来进入 visual 模式\n\n### insert\n想要插入数据，可以通过按下 `i, I, a, A, o, O, s, S` 可以进入insert 模式，通过按下 `<es>` 退出键回到 normal 模式\n\n### replace\nreplace 模式，需要在 normal 模式下按下 `r, R` 键来进入，与 insert 不同的是，该模式只能对现有文本进行替换，同样需要按下 `<esc>` 回到 normal 模式\n\n### command\n在 normal 下通过输入 `:, /, ?` 来进入 command 模式，在该模式下光标会移动到最下边一行，同时可以完成 `搜索、读取，存档，替换，离开 Vim、配置 Vim` 等操作\n\n## 基本操作\n介绍完几种模式，这部分我们来探讨下各个模式下的基本操作\n\n### 移动光标\n这部分是在 normal 模式下完成的，我通过单个或组合按键来完成光标的移动，最简单的是 `h, j, k, l` 他们分别代表了小键盘区的 `← ↓ ↑ →` 来进行左下上右的移动操作，接下来是翻页，这涉及到一个组合键 `<c-f>` ，它代表的是 `ctrl + f` 的缩写，以后这类组合键我们都会这样写\n```vim\n<c-f>   \" 向下移动一页\n<c-d>   \" 向下移动半页\n<c-b>   \" 向上移动一页\n<c-u>   \" 向上移动半页\n```\n接下来要说到的是针对行的光标操作\n```vim\nn<space> / nl\t    \" n 表示数字，后边跟上空格或者 l ，就可以向右移动相应格数\nnh                  \" 跟上边一样，是向左移动\n0                   \" 0 可以移动到行首\n$                   \" 移动到行尾\ng_                  \" 移动到行尾最后一个非空字符\n\nn<Enter> / nj\t    \" n 表示数字，向下移动相应行数\nnk                  \" 跟上边一样，是向上移动\nnG                  \" 移动到指定的行数\ngg                  \" 动到文档第一行，相当于1G\nG                   \" 移动到文档最后一行\n\n```\n还有一些不常用的行操作，不记也没关系\n```vim\nH\t                \" 移动到当前屏幕第一行的第一个字符\nM\t                \" 移动到当前屏幕中间行的第一个字符\nL\t                \" 移动到当前屏幕最后一行的第一个字符\n+\t                \" 移动到非空白字符的下一行\n-\t                \" 移动到非空白字符的上一行\n```\n\n### 查找与替换\n\n```bash\n/word   \" 输入 / 会进入 command 模式，再输入先要搜索的单词并回车进行搜索\n?word   \" / 是向光标以后搜索，? 是向前搜索\nn       \" 英文字母 n，根据 / 或 ? 搜索的方向定位到下一个匹配目标\nN       \" 与 n 相反，定位匹配目标\n\n\n:n1,n2s/word1/word2/g   \" n1, n2 表示数字，替换 n1 行到 n2 行的单词\n:1,$s/word1/word2/g     \" 全文替换，也可以写成 :%s/word1/word2/g\n:1,$s/word1/word2/gc    \" 全文替换，并出现确认提示\n```\n\n### 删除、复制和黏贴\n\n```bash\nx, X        \" 删除字符，x 向后删除一个字符，X 向前删除一个字符\nnx, nX      \" 向后或向前删除 n 个字符\ndd          \" 删除当前行\nndd         \" 向下删除 n 行\nd1G / dgg   \" 删除第一行到当前行的数据\ndG          \" 删除当前行到最后一行的数据\nd$          \" 删除当前字符到行尾\nd0          \" 从行首删除到当前字符\n\nyy          \" 复制当前行\nnyy         \" 从当前行开始复制 n 行\ny1G / ygg   \" 从第一行复制到当前行\nyG          \" 从当前行复制到最后一行\ny0          \" 从行首复制到当前字符\ny$          \" 从当前字符复制到行尾\n\np, P        \" 黏贴，p 黏贴到光标下一行，P 黏贴到光标上一行\n\nJ           \" 将下一行合并到当前行，在 visual 模式下是合并选中行\nncj / nck   \" 向下或向上删除 n 行，并进入 insert 模式\nu           \" 撤销\n<c-r>       \" 重做\n\n.           \" 你没看错，就是个小数点，重复上一次的动作，可以在删除黏贴等后边用\n```\n\n第二部份：一般指令模式切換到編輯模式的可用的按鈕說明\n\n### 进入插入或替换的编辑模式\n\n```bash\ni       在光标所在处插入\nI       在该行第一个非空字符处插\na       在光标后一个字符插入\nA       在该行最后一个字符后插入\no, O\t進入插入模式(Insert mode)：\no       在光标的下一行插入\nO       在光标的上一行插入\ns       \" 删除当前字符，并进入 insert 模式\"\nS       \" 删除当前行，并进入插入模式\n\n\ncw      删除光标后第一个单词，并进入插入模式\ncc      \" 删除当前行，并进入插入模式\n\nr, R\t進入取代模式(Replace mode)：\nr       只會取代游標所在的那一個字元一次；R會一直取代游標所在的文字，直到按下 ESC 為止；(常用)\n<C-a>   光标放在数字上，按下该组合键可以让数字加一\n\n# 上面這些按鍵中，在 vi 畫面的左下角處會出現『--INSERT--』或『--REPLACE--』的字樣。 由名稱就知道該動作了吧！！特別注意的是，我們上面也提過了，你想要在檔案裡面輸入字元時， 一定要在左下角處看到 INSERT 或 REPLACE 才能輸入喔！\n\n\n[Esc]\t退出編輯模式，回到一般指令模式中(常用)\n```\n\n第三部份：一般指令模式切換到指令列模式的可用按钮说明\n\n### 指令列模式的保存、离开等指令\n\n```bash\n:w\t                將編輯的資料寫入硬碟檔案中(常用)\n:w!\t                若檔案屬性為『唯讀』時，強制寫入該檔案。不過，到底能不能寫入， 還是跟你對該檔案的檔案權限有關啊！\n:q\t                離開 vi (常用)\n:q!\t                若曾修改過檔案，又不想儲存，使用 ! 為強制離開不儲存檔案。\n\n# 注意一下啊，那個驚嘆號 (!) 在 vi 當中，常常具有『強制』的意思～\n\n:wq\t                儲存後離開           ，若為 :wq! 則為強制儲存後離開 (常用)\nZZ\t                這是大寫的 Z 喔！若檔案沒有更動，則不儲存離開，若檔案已經被更動過，則儲存後離開！\n:w [filename]\t    將編輯的資料儲存成另一個檔案（類似另存新檔）\n:r [filename]\t    在編輯的資料中，讀入另一個檔案的資料。亦即將 『filename』 這個檔案內容加到游標所在列後面\n:n1,n2 w [filename]\t將 n1 到 n2 的內容儲存成 filename 這個檔案。\n:! command\t        暫時離開 vi 到指令列模式下執行 command 的顯示結果！例如『:! ls /home』即可在 vi 當中察看 /home 底下以 ls 輸出的檔案資訊！\n```\n\n### vim 环境的变更\n\n```bash\n:set nu\t    顯示行號，設定之後，會在每一列的字首顯示該列的行號\n:set nonu\t與 set nu 相反，為取消行號！\n```\n## 额外功能\n### vim 的保存文件、恢复与打开时的警告信息\n當我們在使用 vim 編輯時， vim 會在與被編輯的檔案的目錄下，再建立一個名為 .filename.swp 的檔案。 比如說我們在上一個小節談到的編輯 /tmp/vitest/man_db.conf 這個檔案時， vim 會主動的建立 /tmp/vitest/.man_db.conf.swp 的暫存檔，你對 man_db.conf 做的動作就會被記錄到這個 .man_db.conf.swp 當中喔！如果你的系統因為某些原因斷線了， 導致你編輯的檔案還沒有儲存，這個時候 .man_db.conf.swp 就能夠發揮救援的功能了！我們來測試一下吧！ 底下的練習有些部分的指令我們尚未談到，沒關係，你先照著做，後續再回來瞭解囉！\n```bash\n$ cd /tmp/vitest\n$ vim man_db.conf\n# 此時會進入到 vim 的畫面，請在 vim 的一般指令模式下按下『 [ctrl]-z 』的組合鍵\n\n[1]+  Stopped             vim man_db.conf  <==按下 [ctrl]-z 會告訴你這個訊息\n```\n當我們在 vim 的一般指令模式下按下 [ctrl]-z 的組合按鍵時，你的 vim 會被丟到背景去執行。回到命令提示字元後，接下來我們來模擬將 vim 的工作不正常的中斷吧！\n```bash\n$ ls -al\ndrwxrwxr-x.  2 dmtsai dmtsai    69 Jul  6 23:54 .\ndrwxrwxrwt. 17 root   root    4096 Jul  6 23:53 ..\n-rw-r--r--.  1 dmtsai dmtsai  4850 Jul  6 23:47 man_db.conf\n-rw-r--r--.  1 dmtsai dmtsai 16384 Jul  6 23:54 .man_db.conf.swp  <==就是他，暫存檔\n-rw-rw-r--.  1 dmtsai dmtsai  5442 Jul  6 23:35 man.test.config\n\n$ kill -9 %1 <==這裡模擬斷線停止 vim 工作\n$ ls -al .man_db.conf.swp\n-rw-r--r--. 1 dmtsai dmtsai 16384 Jul  6 23:54 .man_db.conf.swp  <==暫存檔還是會存在！\n\n$ vim man_db.conf\n\nE325: ATTENTION  <==錯誤代碼\nFound a swap file by the name \".man_db.conf.swp\"  <==底下數列說明有暫存檔的存在\n          owned by: dmtsai   dated: Mon Jul  6 23:54:16 2015\n         file name: /tmp/vitest/man_db.conf  <==這個暫存檔屬於哪個實際的檔案？\n          modified: no\n         user name: dmtsai   host name: study.centos.vbird\n        process ID: 31851\nWhile opening file \"man_db.conf\"\n             dated: Mon Jul  6 23:47:21 2015\n\n底下說明可能發生這個錯誤的兩個主要原因與解決方案！\n(1) Another program may be editing the same file.  If this is the case,\n    be careful not to end up with two different instances of the same\n    file when making changes.  Quit, or continue with caution.\n(2) An edit session for this file crashed.\n    If this is the case, use \":recover\" or \"vim -r man_db.conf\"\n    to recover the changes (see \":help recovery\").\n    If you did this already, delete the swap file \".man_db.conf.swp\"\n    to avoid this message.\n\nSwap file \".man_db.conf.swp\" already exists! 底下說明你可進行的動作\n[O]pen Read-Only, (E)dit anyway, (R)ecover, (D)elete it, (Q)uit, (A)bort:\n```\n再次打开文件时，会出现六个按钮，他们的作用依次是：\n\n```bash\n[O]pen Read-Only：打開此檔案成為唯讀檔， 可以用在你只是想要查閱該檔案內容並不想要進行編輯行為時。一般來說，在上課時，如果你是登入到同學的電腦去看他的設定檔， 結果發現其實同學他自己也在編輯時，可以使用這個模式；\n\n(E)dit anyway：還是用正常的方式打開你要編輯的那個檔案， 並不會載入暫存檔的內容。不過很容易出現兩個使用者互相改變對方的檔案等問題！不好不好！\n\n(R)ecover：就是載入暫存檔的內容，用在你要救回之前未儲存的工作。 不過當你救回來並且儲存離開 vim 後，還是要手動自行刪除那個暫存檔喔！\n\n(D)elete it：你確定那個暫存檔是無用的！那麼開啟檔案前會先將這個暫存檔刪除！ 這個動作其實是比較常做的！因為你可能不確定這個暫存檔是怎麼來的，所以就刪除掉他吧！哈哈！\n\n(Q)uit：按下 q 就離開 vim ，不會進行任何動作回到命令提示字元。\n\n(A)bort：忽略這個編輯行為，感覺上與 quit 非常類似！ 也會送你回到命令提示字元就是囉！\n```\n\n### 多文件编辑\n\n很多同学任务高集成的IDE比vim好用，是因为vim不能操作一些事情，比如跨文件复制，但其实vim完全可以做到，首先下载文件：http://linux.vbird.org/linux_basic/0310vi/hosts 打开后如下所示:\n```bash\n192.168.1.1    host1.class.net\n192.168.1.2    host2.class.net\n192.168.1.3    host3.class.net\n192.168.1.4    host4.class.net\n.....中間省略......\n```\n\n我们再建一个新文件host2,并进行跨文件复制操作\n```bash\n$ touch host_copy\n$ vim hosts host_copy # 使用vim同时打开两个文件\n```\n下面我们会使用这几个命令\n```bash\n:n\t    編輯下一個檔案\n:N\t    編輯上一個檔案\n:files\t列出目前這個 vim 的開啟的所有檔案\n```\n\n```bash\n:files      # 再打开文件后一般模式下使用改名了查看有几个文件\n\n:files\n  1 %a   \"hosts\"                        line 1      # %a代表当前编辑的文件\n  2      \"host2\"                        line 0\n\n# 使用gg切换到第一行，使用4yy复制前四行\n:n          # 指令该命令编辑下一个文件\n\n# 使用p将刚才复制的内容粘贴到该文件中使用:q退出编辑并查看host2会发现刚才的内容已经复制过来了\n```\n\n\n\n\n\n\n```bash\nv\t        字元選擇，會將游標經過的地方反白選擇！\nV\t        列選擇，會將游標經過的列反白選擇！\n[Ctrl]+v    區塊選擇，可以用長方形的方式選擇資料\ny\t        將反白的地方複製起來\nd\t        將反白的地方刪除掉\np\t        將剛剛複製的區塊，在游標所在處貼上！\n```\n\n## 快替换\n```bash\n[Ctrl] + v 选中块\nc  输入替换文字\n<Esc> 完成替换\n```\n\n## 多窗口\n```bash\n:sp [filename]  # 垂直分割屏幕，filename 是想要打开的文件，默认当前文档\n:vsp [filename] # 水平分割屏幕\n[ctrl]+w+↓/j    # 按键的按法是：先按下 [ctrl] 不放， 再按下 w 后放开所有的按键，然后再按下 j (或向下箭头键)，则光标可移动到下方的窗口。\n[ctrl]+w+↑/k    # 同上，不过光标移动到上面的窗口。\n[ctrl]+w+q      # 其实就是 :q 结束离开啦！ 举例来说，如果我想要结束下方的窗口，那么利用 [ctrl]+w+↓ 移动到下方窗口后，按下 :q 即可离开， 也可以按下 [ctrl]+w+q 啊！\n\nctrl_w + r: 窗口本身, 不是鼠标指针顺时针 (向下, 向右 移动), R : 则是逆时针反方向(向上, 向左)移动.\nctrl_w+x: 左右上下对应位置的窗口 对调. 要注意窗口必须是 对应的, 如果不对应将无法对换, 比如左边一个大窗口, 右边有两个小的 子窗口, 则左右不能互换.\n```\n\n\n```bash\n# set compatible 就是让 vim 关闭所有扩展的功能，尽量模拟 vi 的行为。\n但这样就不应用 vim 的很多强大功能，所以一般没有什么特殊需要的话（比如执行很老的 vi 脚本），都要在 vim 的配置开始，写上 set nocompatible，关闭兼容模式。由于这个选项是最最基础的选项，会连带很多其它选项发生变动（称作副作用），所以它必需是第一个设定的选项。\nset nocompatible\n```\n\n## Operator-Pending映射\n```bash\nvip         # vip很好记\nviw         # 快速选中当前单词\nvi(         # 选择括号内的文字\nvt,         # 选择到下一个逗号\n```\n\n## 宏\nvim有个非常厉害的功能叫**宏**，它可以将你的操作进行宏录制，放到vim寄存器中，并按照你想要的方式播放出来\n\n### 操作\n\n- 首先准备一个文件，第一行为数字1\n- 光标放在1上并按下 qa（当然也可以 qb，qc，这只是录制宏的名字）开始录制，测试左下角会显示录制字样\n- 输入 yyp 复制当前行到下一行，并输入 <C-a> 将数字增加1，此时第二行数字为2\n- 按下 q 结束录制，并按下 @a 播放宏，此时第三行会变成3，按下 @@ 重复上次播放，第四行会变成4\n- 当按下 100@@ 时，宏会重复播放100次上次的播放记录，自动生成104行数据\n\n## 与系统剪切版交互\n加上 `\"+` 即可\n```bash\n\"+yy\n\"+Y\nv\"+y\n```\n\n## 其他操作\n```bash\n:inoremap <esc> <nop>   # 使<esc>失效\ng_  # 移动到当前行（译注：等号组成的行）的最后一个非空字符。\n```\n\n## 参考文献\n\n- [vim 程式编辑器](http://cn.linux.vbird.org/linux_basic/0310vi.php)\n","slug":"vim-2017-08-23-basic-cmd","published":1,"updated":"2020-08-21T15:43:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cke4k2avu013n5gqoucncj755"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"cke4k29u500015gqoeowtian8","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k29uc00045gqoerfrcph6"},{"post_id":"cke4k29uh00075gqo9dtabw8e","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k29up000h5gqo4hf08ife"},{"post_id":"cke4k29uj00095gqo1zsdiycx","tag_id":"cke4k29up000g5gqocdir81bd","_id":"cke4k29uu000m5gqook96creq"},{"post_id":"cke4k29un000e5gqom9d1pk0q","tag_id":"cke4k29up000g5gqocdir81bd","_id":"cke4k29uy000t5gqoxk6sh8xc"},{"post_id":"cke4k29un000e5gqom9d1pk0q","tag_id":"cke4k29uv000o5gqo0aos50x5","_id":"cke4k29uz000v5gqoiakoeeuf"},{"post_id":"cke4k29ux000s5gqoa2h2a8jj","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k29v0000y5gqoqqexd6yu"},{"post_id":"cke4k29uy000u5gqohov56px4","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k29v000105gqontjngdt5"},{"post_id":"cke4k29uo000f5gqouqkogmz4","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k29v100135gqovj0mn0bb"},{"post_id":"cke4k29uo000f5gqouqkogmz4","tag_id":"cke4k29uz000w5gqoucw0qnrr","_id":"cke4k29v300155gqo0fdvmhao"},{"post_id":"cke4k29uu000n5gqojl5rrg55","tag_id":"cke4k29v100125gqor018viaq","_id":"cke4k29v500185gqopaqvtezl"},{"post_id":"cke4k29uw000q5gqobpuxex9v","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k29v5001a5gqo55p7ah2o"},{"post_id":"cke4k29v000115gqonajzj2kv","tag_id":"cke4k29v500195gqof1p05s8t","_id":"cke4k29v5001d5gqolrtql3ze"},{"post_id":"cke4k29v000115gqonajzj2kv","tag_id":"cke4k29v5001b5gqoj3d0bwp9","_id":"cke4k29v5001e5gqorjfivx60"},{"post_id":"cke4k29v100145gqox4mvmyw2","tag_id":"cke4k29v5001c5gqorokl1snl","_id":"cke4k29v6001g5gqo0ke2e56u"},{"post_id":"cke4k29v300165gqoas7x47sh","tag_id":"cke4k29v5001c5gqorokl1snl","_id":"cke4k29v6001h5gqotcw8x71q"},{"post_id":"cke4k2a3s001l5gqodp9t4z2t","tag_id":"cke4k2a3v001n5gqoy8ltn81f","_id":"cke4k2a3y001s5gqomhnlidpu"},{"post_id":"cke4k2a3u001m5gqo8sn8iwal","tag_id":"cke4k2a3y001r5gqo2xdkkw1j","_id":"cke4k2a42001x5gqo0ofbu9r2"},{"post_id":"cke4k2a3v001o5gqovzixldgb","tag_id":"cke4k2a41001v5gqoamkml0g7","_id":"cke4k2a4400215gqo5613sc6e"},{"post_id":"cke4k2a3w001p5gqozlw3ajjh","tag_id":"cke4k2a3y001r5gqo2xdkkw1j","_id":"cke4k2a4600255gqongubt88m"},{"post_id":"cke4k2a3y001t5gqorh9m3ghg","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2a4800295gqo3taey4d3"},{"post_id":"cke4k2a40001u5gqoogyh065j","tag_id":"cke4k2a4700275gqo54lvxrzy","_id":"cke4k2a4d002h5gqo23we1fcl"},{"post_id":"cke4k2a40001u5gqoogyh065j","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2a4d002j5gqok173qmu0"},{"post_id":"cke4k2a4c002g5gqohtvlofnw","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a4f002m5gqoz7fanrfk"},{"post_id":"cke4k2a41001w5gqof042qk9v","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a4g002o5gqoefs1z94c"},{"post_id":"cke4k2a4d002i5gqo5gtgzhit","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a4i002r5gqo2z4wpa24"},{"post_id":"cke4k2a4e002l5gqoqyzgr8ig","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a4j002t5gqorvkl6i77"},{"post_id":"cke4k2a42001y5gqouqptc5xx","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a4l002w5gqouglxgbaa"},{"post_id":"cke4k2a42001y5gqouqptc5xx","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a4l002y5gqoq8awi640"},{"post_id":"cke4k2a4f002n5gqo3ciggf8i","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a4n00315gqo9za8ifho"},{"post_id":"cke4k2a4300205gqo3xu1ox4o","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a4o00335gqoqtlis2zs"},{"post_id":"cke4k2a4300205gqo3xu1ox4o","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a4p00365gqoyrsx4q0r"},{"post_id":"cke4k2a4300205gqo3xu1ox4o","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a4p00385gqo6bgm2cqn"},{"post_id":"cke4k2a4k002v5gqorv014v77","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a4r003b5gqo55j9xawg"},{"post_id":"cke4k2a4400225gqofxleljfq","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a4s003d5gqo5cqu6lit"},{"post_id":"cke4k2a4l002x5gqoicuu27bk","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a4t003g5gqox0qh9fjz"},{"post_id":"cke4k2a4m00305gqoejnnrj8e","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a4u003i5gqo0svrpzfp"},{"post_id":"cke4k2a4500245gqop28wu2d9","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a4v003l5gqo6z4j2jj4"},{"post_id":"cke4k2a4n00325gqoy34b9peg","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a4w003n5gqopp4pbzkj"},{"post_id":"cke4k2a4o00355gqorpjd4j02","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a4y003q5gqo2bb3odco"},{"post_id":"cke4k2a4600265gqoh77ejxtb","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a4z003s5gqozp3xseld"},{"post_id":"cke4k2a4r003c5gqovirz9x75","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2a50003v5gqopppwysf2"},{"post_id":"cke4k2a4t003f5gqok0nypivj","tag_id":"cke4k2a3v001n5gqoy8ltn81f","_id":"cke4k2a51003x5gqoxhsb5h3w"},{"post_id":"cke4k2a4t003h5gqopq0ekvcg","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2a52003z5gqond634hhh"},{"post_id":"cke4k2a4v003k5gqoptexlveb","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2a5300425gqotu0myoab"},{"post_id":"cke4k2a4v003k5gqoptexlveb","tag_id":"cke4k2a4s003e5gqot7so9n3u","_id":"cke4k2a5400445gqonsv5rbb6"},{"post_id":"cke4k2a4w003m5gqo658kd1jp","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2a5600475gqof237g0xd"},{"post_id":"cke4k2a4700285gqoal5opiqx","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2a5700495gqoqxr4w6e4"},{"post_id":"cke4k2a4700285gqoal5opiqx","tag_id":"cke4k2a4s003e5gqot7so9n3u","_id":"cke4k2a58004c5gqo58sr8t5v"},{"post_id":"cke4k2a4700285gqoal5opiqx","tag_id":"cke4k2a4v003j5gqorlvew2gi","_id":"cke4k2a59004e5gqog69ij72j"},{"post_id":"cke4k2a4x003o5gqogqmkiv85","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a5a004h5gqoezcylkcs"},{"post_id":"cke4k2a4y003r5gqofozl817j","tag_id":"cke4k2a3v001n5gqoy8ltn81f","_id":"cke4k2a5b004j5gqobzn90i20"},{"post_id":"cke4k2a4z003t5gqoz17d6hgx","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a5c004m5gqocltpox1y"},{"post_id":"cke4k2a50003w5gqonh1p0y16","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a5d004o5gqo07g131ga"},{"post_id":"cke4k2a5200415gqor2esqqbt","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a5f004r5gqowkf6aygg"},{"post_id":"cke4k2a48002a5gqornlpzp7k","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2a5g004t5gqo5ldai8ma"},{"post_id":"cke4k2a48002a5gqornlpzp7k","tag_id":"cke4k2a50003u5gqormwi74gs","_id":"cke4k2a5h004w5gqoe2svxw50"},{"post_id":"cke4k2a48002a5gqornlpzp7k","tag_id":"cke4k2a4s003e5gqot7so9n3u","_id":"cke4k2a5i004y5gqo1wk233s0"},{"post_id":"cke4k2a49002b5gqow8m0trzp","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a5k00515gqozh8qvogj"},{"post_id":"cke4k2a5600485gqokg05nwcp","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a5k00535gqornllku5u"},{"post_id":"cke4k2a57004b5gqoaswich9f","tag_id":"cke4k29v100125gqor018viaq","_id":"cke4k2a5m00565gqo7nncfgdl"},{"post_id":"cke4k2a4a002d5gqoo45syhwx","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a5n00585gqohf7u9m8x"},{"post_id":"cke4k2a59004g5gqoldq9p70r","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a5o005b5gqobjx6fk0b"},{"post_id":"cke4k2a59004g5gqoldq9p70r","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2a5q005d5gqosvfyskix"},{"post_id":"cke4k2a4b002e5gqox3ikff44","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a5r005g5gqoqbp19tde"},{"post_id":"cke4k2a5a004i5gqo2gca9sy6","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a5s005i5gqoz7pzk336"},{"post_id":"cke4k2a4h002q5gqo0i3t3kbh","tag_id":"cke4k2a4v003j5gqorlvew2gi","_id":"cke4k2a5t005l5gqozkfnh3gt"},{"post_id":"cke4k2a5e004q5gqo0wjjvy0t","tag_id":"cke4k2a3y001r5gqo2xdkkw1j","_id":"cke4k2a5u005n5gqorrday3wl"},{"post_id":"cke4k2a4q003a5gqopnwrpone","tag_id":"cke4k2a4s003e5gqot7so9n3u","_id":"cke4k2a5v005q5gqot0narvff"},{"post_id":"cke4k2a4q003a5gqopnwrpone","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a5w005s5gqo2omvmkgz"},{"post_id":"cke4k2a5f004s5gqobdt14icd","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a5x005v5gqon7wzixzd"},{"post_id":"cke4k2a5f004s5gqobdt14icd","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2a5y005x5gqoe18i9b0o"},{"post_id":"cke4k2a5g004v5gqorb3hqgam","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a5z00605gqob1fvbscq"},{"post_id":"cke4k2a51003y5gqobmuet4lc","tag_id":"cke4k2a5g004u5gqoi5nlm5a5","_id":"cke4k2a6100625gqoo1q8l16d"},{"post_id":"cke4k2a5j00505gqozt34si9g","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a6200655gqov708u1rg"},{"post_id":"cke4k2a5300435gqoi4cb9j2l","tag_id":"cke4k2a5i004z5gqovxjpdrgv","_id":"cke4k2a6300675gqo6k1pa9g3"},{"post_id":"cke4k2a5300435gqoi4cb9j2l","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2a6400695gqor52fjk5c"},{"post_id":"cke4k2a5300435gqoi4cb9j2l","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a64006b5gqohhj51kka"},{"post_id":"cke4k2a5300435gqoi4cb9j2l","tag_id":"cke4k29v100125gqor018viaq","_id":"cke4k2a65006d5gqo4627epcw"},{"post_id":"cke4k2a5300435gqoi4cb9j2l","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a67006f5gqo2htz5az1"},{"post_id":"cke4k2a5l00555gqox2szufrj","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a68006h5gqoufw2kn19"},{"post_id":"cke4k2a5500465gqom892e3hr","tag_id":"cke4k2a5i004z5gqovxjpdrgv","_id":"cke4k2a69006j5gqombf2xi4e"},{"post_id":"cke4k2a5500465gqom892e3hr","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a6a006l5gqoa3omnofq"},{"post_id":"cke4k2a5500465gqom892e3hr","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a6c006o5gqosil5b4mt"},{"post_id":"cke4k2a5m00575gqojepml5wj","tag_id":"cke4k2a5i004z5gqovxjpdrgv","_id":"cke4k2a6d006q5gqos48z316m"},{"post_id":"cke4k2a58004d5gqo195saov6","tag_id":"cke4k2a5i004z5gqovxjpdrgv","_id":"cke4k2a6e006t5gqoo3dkchih"},{"post_id":"cke4k2a58004d5gqo195saov6","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a6f006v5gqol2775205"},{"post_id":"cke4k2a58004d5gqo195saov6","tag_id":"cke4k29v100125gqor018viaq","_id":"cke4k2a6g006y5gqod3hxhe47"},{"post_id":"cke4k2a58004d5gqo195saov6","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a6i00705gqoi9xkooro"},{"post_id":"cke4k2a5p005c5gqovkfnmqs5","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2a6j00725gqo173rwd77"},{"post_id":"cke4k2a5b004l5gqoenpn0sd8","tag_id":"cke4k2a5i004z5gqovxjpdrgv","_id":"cke4k2a6k00745gqorh7w9z1j"},{"post_id":"cke4k2a5b004l5gqoenpn0sd8","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2a6l00775gqobvkwatx6"},{"post_id":"cke4k2a5b004l5gqoenpn0sd8","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a6m00795gqojc64g0xa"},{"post_id":"cke4k2a5r005h5gqorvffripk","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2a6n007c5gqomxvxgw0x"},{"post_id":"cke4k2a5s005k5gqos382eja3","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2a6o007e5gqoqmh0hazh"},{"post_id":"cke4k2a5c004n5gqos65eaeba","tag_id":"cke4k2a5i004z5gqovxjpdrgv","_id":"cke4k2a6p007g5gqoyiw8j67k"},{"post_id":"cke4k2a5c004n5gqos65eaeba","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a6q007j5gqo35o2tujb"},{"post_id":"cke4k2a5u005m5gqo9m3jm8ht","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2a6r007l5gqoc2lh25j0"},{"post_id":"cke4k2a5v005p5gqoelg5dtei","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2a6t007o5gqoz33153a0"},{"post_id":"cke4k2a5w005r5gqoalbr545x","tag_id":"cke4k2a5v005o5gqoczr3kg2k","_id":"cke4k2a6v007q5gqo1dtihddo"},{"post_id":"cke4k2a5h004x5gqotfyhtgqw","tag_id":"cke4k2a5v005o5gqoczr3kg2k","_id":"cke4k2a6w007s5gqoi9jl24rf"},{"post_id":"cke4k2a5x005t5gqouaw6twu7","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a6x007u5gqo4zrmitsu"},{"post_id":"cke4k2a5y005w5gqozwlsrshq","tag_id":"cke4k2a3v001n5gqoy8ltn81f","_id":"cke4k2a6y007w5gqor4r1c7zr"},{"post_id":"cke4k2a5k00525gqoalw7rnde","tag_id":"cke4k2a5v005o5gqoczr3kg2k","_id":"cke4k2a73007y5gqow5a13g91"},{"post_id":"cke4k2a5z005y5gqox7qas073","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2a7400805gqol58f1ie5"},{"post_id":"cke4k2a6000615gqo5ykrxqir","tag_id":"cke4k2a3v001n5gqoy8ltn81f","_id":"cke4k2a7500825gqokhi8cbeq"},{"post_id":"cke4k2a5n005a5gqoyp94us9x","tag_id":"cke4k2a5v005o5gqoczr3kg2k","_id":"cke4k2a7500845gqoqujof97q"},{"post_id":"cke4k2a6100635gqors94xvk3","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a7600875gqotzkssx43"},{"post_id":"cke4k2a6200665gqoh7b7np7t","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a7700895gqo1mnrwnvx"},{"post_id":"cke4k2a5q005f5gqomlv2gsf5","tag_id":"cke4k2a6100645gqo92rvv5v0","_id":"cke4k2a78008c5gqo5lrb2zxz"},{"post_id":"cke4k2a6300685gqoat8gjypl","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a7a008e5gqojr1ml2pr"},{"post_id":"cke4k2a64006a5gqochcl152c","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2a7b008g5gqoybndkn0w"},{"post_id":"cke4k2a64006a5gqochcl152c","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a7c008i5gqo30uz93vo"},{"post_id":"cke4k2a65006c5gqo71lb8xmi","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2a7d008l5gqow3v672ri"},{"post_id":"cke4k2a66006e5gqoo18bh2qo","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2a7e008n5gqoszkgbrxa"},{"post_id":"cke4k2a66006e5gqoo18bh2qo","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a7e008p5gqo0cnxx5sv"},{"post_id":"cke4k2a67006g5gqoube7sxmc","tag_id":"cke4k2a3v001n5gqoy8ltn81f","_id":"cke4k2a7f008r5gqoyg6ube36"},{"post_id":"cke4k2a69006k5gqollqw9pmf","tag_id":"cke4k2a41001v5gqoamkml0g7","_id":"cke4k2a7g008t5gqonqsigd4a"},{"post_id":"cke4k2a68006i5gqor0ynefsk","tag_id":"cke4k29v100125gqor018viaq","_id":"cke4k2a7j008w5gqoiwcvnjss"},{"post_id":"cke4k2a68006i5gqor0ynefsk","tag_id":"cke4k2a6b006m5gqohvsrh7xr","_id":"cke4k2a7k008y5gqo1f3absmi"},{"post_id":"cke4k2a68006i5gqor0ynefsk","tag_id":"cke4k29v500195gqof1p05s8t","_id":"cke4k2a7l00905gqo0xpbm53e"},{"post_id":"cke4k2a6d006r5gqo2ze7a77g","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a7n00925gqo50adzxab"},{"post_id":"cke4k2a6e006u5gqoyhbjntuz","tag_id":"cke4k2a3y001r5gqo2xdkkw1j","_id":"cke4k2a7n00945gqo3gyfaw98"},{"post_id":"cke4k2a6b006n5gqo2t0boxxd","tag_id":"cke4k29v100125gqor018viaq","_id":"cke4k2a7p00965gqoodyvxqmy"},{"post_id":"cke4k2a6b006n5gqo2t0boxxd","tag_id":"cke4k2a6b006m5gqohvsrh7xr","_id":"cke4k2a7r00985gqox8pyyp0h"},{"post_id":"cke4k2a6b006n5gqo2t0boxxd","tag_id":"cke4k29v500195gqof1p05s8t","_id":"cke4k2a7s009a5gqo97jm6p04"},{"post_id":"cke4k2a6f006w5gqo0fs0oj2d","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a7t009c5gqoyzrc9qdr"},{"post_id":"cke4k2a6h006z5gqo0t4gljxk","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2a7u009e5gqojvguchfu"},{"post_id":"cke4k2a6c006p5gqo7vmcsrsd","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a7v009g5gqo766pwnbd"},{"post_id":"cke4k2a6c006p5gqo7vmcsrsd","tag_id":"cke4k2a6g006x5gqou7a8ixsg","_id":"cke4k2a7x009i5gqor3p2nhyg"},{"post_id":"cke4k2a6j00735gqorkng3uqn","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a7y009l5gqo61oj1ufw"},{"post_id":"cke4k2a6k00765gqox94d8qg4","tag_id":"cke4k2a3v001n5gqoy8ltn81f","_id":"cke4k2a7z009n5gqoyg7w2iko"},{"post_id":"cke4k2a6l00785gqogjpdebau","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a80009q5gqocu5btn31"},{"post_id":"cke4k2a6i00715gqodpgzj2t9","tag_id":"cke4k2a6k00755gqouyilq0r2","_id":"cke4k2a81009s5gqo5tjib7s2"},{"post_id":"cke4k2a6i00715gqodpgzj2t9","tag_id":"cke4k2a6n007b5gqohgnfcqdj","_id":"cke4k2a82009u5gqo3uis156q"},{"post_id":"cke4k2a6o007f5gqotbnxbff5","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a83009w5gqoorw7kvzu"},{"post_id":"cke4k2a6q007i5gqoeq1xlq34","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a83009y5gqozwk6qqug"},{"post_id":"cke4k2a6m007a5gqohzgj7c46","tag_id":"cke4k2a6b006m5gqohvsrh7xr","_id":"cke4k2a8400a05gqo2akgmxgu"},{"post_id":"cke4k2a6m007a5gqohzgj7c46","tag_id":"cke4k2a6p007h5gqodfn3r65h","_id":"cke4k2a8500a25gqomz2m9fcw"},{"post_id":"cke4k2a6q007k5gqofkkldszk","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a8600a45gqoifd0m252"},{"post_id":"cke4k2a6s007n5gqozhg4e6bm","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a8700a65gqow806wkoz"},{"post_id":"cke4k2a6n007d5gqo9s24g7mt","tag_id":"cke4k2a6b006m5gqohvsrh7xr","_id":"cke4k2a8800a85gqorolxmtsq"},{"post_id":"cke4k2a6n007d5gqo9s24g7mt","tag_id":"cke4k2a6p007h5gqodfn3r65h","_id":"cke4k2a8900aa5gqoh1yjv1q5"},{"post_id":"cke4k2a6u007p5gqo5qmc7z9l","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2a8a00ac5gqop7m5ivwe"},{"post_id":"cke4k2a6v007r5gqotiws3cn0","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2a8b00ae5gqo4xxup4l4"},{"post_id":"cke4k2a6w007t5gqo2wxnfp1i","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a8c00ag5gqo3wrz65dt"},{"post_id":"cke4k2a6x007v5gqo9geoov7i","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a8d00ai5gqo3kyb788j"},{"post_id":"cke4k2a6y007x5gqo35xtjgnk","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a8e00ak5gqo4ca0g8rr"},{"post_id":"cke4k2a73007z5gqoeab38h1f","tag_id":"cke4k2a4s003e5gqot7so9n3u","_id":"cke4k2a8f00am5gqoxjttvdvi"},{"post_id":"cke4k2a7500835gqondypqgkb","tag_id":"cke4k2a5v005o5gqoczr3kg2k","_id":"cke4k2a8g00ao5gqovyu5j2zc"},{"post_id":"cke4k2a7700885gqo0l63sdve","tag_id":"cke4k2a5v005o5gqoczr3kg2k","_id":"cke4k2a8h00aq5gqos5q1agwg"},{"post_id":"cke4k2a7400815gqo0nesxhzo","tag_id":"cke4k2a7600855gqofyqttusa","_id":"cke4k2a8i00as5gqo6ehruhy3"},{"post_id":"cke4k2a77008a5gqorpr2sj2o","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a8j00au5gqoup86a85x"},{"post_id":"cke4k2a77008a5gqorpr2sj2o","tag_id":"cke4k29v5001c5gqorokl1snl","_id":"cke4k2a8k00aw5gqortat9fzm"},{"post_id":"cke4k2a79008d5gqohbvxb5i8","tag_id":"cke4k2a7600855gqofyqttusa","_id":"cke4k2a8l00ay5gqoz2r9f0ro"},{"post_id":"cke4k2a7600865gqop9l72klk","tag_id":"cke4k2a7600855gqofyqttusa","_id":"cke4k2a8m00b05gqo3gk38jyl"},{"post_id":"cke4k2a7b008h5gqoc0dhsxi7","tag_id":"cke4k2a6n007b5gqohgnfcqdj","_id":"cke4k2a8n00b25gqo47o2lyed"},{"post_id":"cke4k2a7b008h5gqoc0dhsxi7","tag_id":"cke4k2a6k00755gqouyilq0r2","_id":"cke4k2a8o00b45gqo6nw63lck"},{"post_id":"cke4k2a7c008k5gqoagynpeu7","tag_id":"cke4k2a7600855gqofyqttusa","_id":"cke4k2a8p00b65gqocbqrkbnp"},{"post_id":"cke4k2a7d008m5gqo3x9gl9rq","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2a8q00b85gqo8arj5bji"},{"post_id":"cke4k2a7a008f5gqolqb7jcx2","tag_id":"cke4k2a7c008j5gqov3aoq7v3","_id":"cke4k2a8r00bb5gqoygihnozu"},{"post_id":"cke4k2a7e008o5gqoxrz7391l","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a8r00bd5gqofw5oxywl"},{"post_id":"cke4k2a7e008o5gqoxrz7391l","tag_id":"cke4k29uz000w5gqoucw0qnrr","_id":"cke4k2a8s00bf5gqo33wdmem9"},{"post_id":"cke4k2a7f008s5gqoa6ssvfck","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a8u00bi5gqoucbz1evq"},{"post_id":"cke4k2a7i008v5gqo6xwi3spq","tag_id":"cke4k2a3v001n5gqoy8ltn81f","_id":"cke4k2a8v00bk5gqow97m3yir"},{"post_id":"cke4k2a7j008x5gqo2pwc8xe4","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2a8w00bn5gqo3vppvxer"},{"post_id":"cke4k2a7f008q5gqoi527a9gy","tag_id":"cke4k2a7h008u5gqo7cc675ke","_id":"cke4k2a8x00bp5gqosyvk0i3i"},{"post_id":"cke4k2a7f008q5gqoi527a9gy","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a8y00br5gqozo05mfw6"},{"post_id":"cke4k2a7k008z5gqof9ntgi59","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a8z00bt5gqo27lg8wyj"},{"post_id":"cke4k2a7m00915gqo1ubbst8s","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a8z00bv5gqo9mqgx87o"},{"post_id":"cke4k2a7m00915gqo1ubbst8s","tag_id":"cke4k29uz000w5gqoucw0qnrr","_id":"cke4k2a9000bx5gqolr8bgqm6"},{"post_id":"cke4k2a7n00935gqoy2m66irv","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9100bz5gqoqdjtxu09"},{"post_id":"cke4k2a7o00955gqoqgyx2mhs","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a9200c15gqoifq3vfyr"},{"post_id":"cke4k2a7q00975gqoylm5mk6i","tag_id":"cke4k2a6100645gqo92rvv5v0","_id":"cke4k2a9400c35gqoaj70nsdw"},{"post_id":"cke4k2a7r00995gqoesjladd6","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9500c55gqoxyukxo1r"},{"post_id":"cke4k2a7r00995gqoesjladd6","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2a9600c75gqo64g91q75"},{"post_id":"cke4k2a7t009b5gqojkn7p9po","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9700c95gqofbibxpdm"},{"post_id":"cke4k2a7t009b5gqojkn7p9po","tag_id":"cke4k2a7h008u5gqo7cc675ke","_id":"cke4k2a9700cb5gqok556ofaa"},{"post_id":"cke4k2a7u009d5gqo775ezkcc","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9800cd5gqocpjjattl"},{"post_id":"cke4k2a7v009h5gqojoufn49o","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9900cf5gqo9pzdd21s"},{"post_id":"cke4k2a7x009k5gqobozc4c6v","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9a00ch5gqo2e6bieig"},{"post_id":"cke4k2a7y009m5gqomz8o4rxp","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2a9b00cj5gqoljuleucg"},{"post_id":"cke4k2a7z009o5gqobrj2ehes","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a9c00cl5gqozmxo5zul"},{"post_id":"cke4k2a80009r5gqog6k87esk","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9d00cn5gqolg0d9aju"},{"post_id":"cke4k2a7u009f5gqofevz6dyi","tag_id":"cke4k2a7x009j5gqoq6n5vbr9","_id":"cke4k2a9e00cp5gqony2hz6xv"},{"post_id":"cke4k2a7u009f5gqofevz6dyi","tag_id":"cke4k2a80009p5gqooonnq73l","_id":"cke4k2a9g00cr5gqo2ilmpgls"},{"post_id":"cke4k2a81009t5gqocwu96akl","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9h00ct5gqo6t7fcked"},{"post_id":"cke4k2a82009v5gqoxwckudp6","tag_id":"cke4k2a6100645gqo92rvv5v0","_id":"cke4k2a9i00cv5gqou1y53bj5"},{"post_id":"cke4k2a83009x5gqocs68fvrq","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a9i00cw5gqo410lbjpt"},{"post_id":"cke4k2a84009z5gqophc91j7s","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a9i00cx5gqo9jw2musy"},{"post_id":"cke4k2a8400a15gqo9096aubj","tag_id":"cke4k2a4s003e5gqot7so9n3u","_id":"cke4k2a9i00cy5gqo6mhhi793"},{"post_id":"cke4k2a8600a35gqohf2ar4n6","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9i00cz5gqo2i6pggyy"},{"post_id":"cke4k2a8700a55gqo9hhp1fk7","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9i00d05gqo0un10snh"},{"post_id":"cke4k2a8800a75gqogrgg27xv","tag_id":"cke4k2a4s003e5gqot7so9n3u","_id":"cke4k2a9i00d15gqov4d7uyu5"},{"post_id":"cke4k2a8800a75gqogrgg27xv","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2a9i00d25gqoctupnm6j"},{"post_id":"cke4k2a8900a95gqom6etrbti","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9j00d35gqop94i69s3"},{"post_id":"cke4k2a8900ab5gqocww0af7p","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9j00d45gqob8155kqd"},{"post_id":"cke4k2a8a00ad5gqo85ouku13","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2a9j00d55gqo0i5k9blj"},{"post_id":"cke4k2a8b00af5gqok5l4q9a8","tag_id":"cke4k2a3v001n5gqoy8ltn81f","_id":"cke4k2a9j00d65gqofz11z7dp"},{"post_id":"cke4k2a8c00ah5gqoyav1elts","tag_id":"cke4k2a5g004u5gqoi5nlm5a5","_id":"cke4k2a9j00d75gqopav14prf"},{"post_id":"cke4k2a8d00aj5gqo15lmaqul","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2a9j00d85gqojkz6uv96"},{"post_id":"cke4k2a8e00al5gqoj4eekmnm","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9j00d95gqo0doiszqn"},{"post_id":"cke4k2a8g00an5gqoq8yhmnj5","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9j00da5gqoi0vu07tc"},{"post_id":"cke4k2a8g00ap5gqovkg7qqls","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9j00db5gqo3gi1o7yd"},{"post_id":"cke4k2a8i00ar5gqoj2j1kkje","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9j00dc5gqola4z9oof"},{"post_id":"cke4k2a8i00at5gqocv3zksti","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9j00dd5gqocnesuryq"},{"post_id":"cke4k2a8j00av5gqotu9ttijh","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9j00de5gqo7zqu1wir"},{"post_id":"cke4k2a8k00ax5gqof42dz6pd","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9j00df5gqojfhdmra5"},{"post_id":"cke4k2a8l00az5gqotueber1c","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9j00dg5gqosccehaha"},{"post_id":"cke4k2a8m00b15gqoqiykszit","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a9j00dh5gqom68rhpu0"},{"post_id":"cke4k2a8p00b75gqos2zs6q2a","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2a9j00di5gqo9g2zarko"},{"post_id":"cke4k2a8q00ba5gqoolb382bq","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a9k00dj5gqozzmoyade"},{"post_id":"cke4k2a8o00b55gqoigu6jfen","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9k00dk5gqo3kjlcgo6"},{"post_id":"cke4k2a8o00b55gqoigu6jfen","tag_id":"cke4k2a8q00b95gqo9nl18tsu","_id":"cke4k2a9k00dl5gqo0cg33vg9"},{"post_id":"cke4k2a8s00be5gqob40z0fqr","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a9k00dm5gqofmulg2qb"},{"post_id":"cke4k2a8u00bj5gqowagzyye0","tag_id":"cke4k2a8s00bg5gqoi933d42w","_id":"cke4k2a9k00dn5gqog59w0in9"},{"post_id":"cke4k2a8r00bc5gqowrksp9e3","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2a9k00do5gqoc0dlz0u6"},{"post_id":"cke4k2a8r00bc5gqowrksp9e3","tag_id":"cke4k2a8s00bg5gqoi933d42w","_id":"cke4k2a9k00dp5gqow5u7kwoz"},{"post_id":"cke4k2a8v00bl5gqoh6ae2q6d","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2a9k00dq5gqokobmupem"},{"post_id":"cke4k2a8w00bo5gqocj6iwoj8","tag_id":"cke4k2a8s00bg5gqoi933d42w","_id":"cke4k2a9k00dr5gqoyf1ywf5u"},{"post_id":"cke4k2a8t00bh5gqox8jry824","tag_id":"cke4k2a8s00bg5gqoi933d42w","_id":"cke4k2a9k00ds5gqoeu4vv0vs"},{"post_id":"cke4k2a8x00bq5gqog1docc25","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2a9k00dt5gqoavozdy6z"},{"post_id":"cke4k2a8y00bs5gqoyfecthhf","tag_id":"cke4k2a8s00bg5gqoi933d42w","_id":"cke4k2a9k00du5gqo2nsh7lcg"},{"post_id":"cke4k2a8z00bu5gqov0mz6gbb","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2a9k00dv5gqo37ghvqi1"},{"post_id":"cke4k2a9000bw5gqodgusa9ff","tag_id":"cke4k2a6k00755gqouyilq0r2","_id":"cke4k2a9k00dw5gqoig9ry0qw"},{"post_id":"cke4k2a9100by5gqotijkeeop","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2a9l00dx5gqo2o9xqjj3"},{"post_id":"cke4k2a9100by5gqotijkeeop","tag_id":"cke4k2a3v001n5gqoy8ltn81f","_id":"cke4k2a9l00dy5gqozyfy38ds"},{"post_id":"cke4k2a9100c05gqokpmoaa7h","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2a9l00dz5gqoxqro0kdn"},{"post_id":"cke4k2a9300c25gqoigjd3lgq","tag_id":"cke4k2a8s00bg5gqoi933d42w","_id":"cke4k2a9l00e05gqo40nl1xn8"},{"post_id":"cke4k2a9400c45gqoql7auldq","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a9l00e15gqoxpj602vq"},{"post_id":"cke4k2a9500c65gqoocyohdn9","tag_id":"cke4k2a4s003e5gqot7so9n3u","_id":"cke4k2a9l00e25gqov3a0jwnp"},{"post_id":"cke4k2a9600c85gqot4pijmvh","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9l00e35gqovxtgx9bj"},{"post_id":"cke4k2a9700ca5gqo1af9ypgq","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2a9l00e45gqoy9nxoi3z"},{"post_id":"cke4k2a9700ca5gqo1af9ypgq","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a9l00e55gqo4r42s3s9"},{"post_id":"cke4k2a9800cc5gqok83ws2pe","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a9l00e65gqommxaiqt7"},{"post_id":"cke4k2a9900ce5gqo5m8k72ud","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2a9l00e75gqoq1q8x0z5"},{"post_id":"cke4k2a9900cg5gqoatdok5hb","tag_id":"cke4k2a41001v5gqoamkml0g7","_id":"cke4k2a9l00e85gqosktevzgv"},{"post_id":"cke4k2a9a00ci5gqovce0okv9","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2a9l00e95gqovayvrqnw"},{"post_id":"cke4k2a9b00ck5gqoes1i54lz","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9l00ea5gqowiubbj3w"},{"post_id":"cke4k2a9c00cm5gqo4e52mdqd","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2a9m00eb5gqokecove5h"},{"post_id":"cke4k2a9d00co5gqoropbzs31","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9m00ec5gqorhqqyvax"},{"post_id":"cke4k2a9f00cq5gqoqno0x1gj","tag_id":"cke4k2a3v001n5gqoy8ltn81f","_id":"cke4k2a9m00ed5gqo4kc1olfi"},{"post_id":"cke4k2a9g00cs5gqohma3b1vd","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9m00ee5gqoypik1pwl"},{"post_id":"cke4k2a9h00cu5gqobr72p8jw","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2a9m00ef5gqods6opafu"},{"post_id":"cke4k2ac600ek5gqo0fbpjrnk","tag_id":"cke4k2a5g004u5gqoi5nlm5a5","_id":"cke4k2ac900en5gqo94tuv2qg"},{"post_id":"cke4k2ac200eg5gqoqnkhaqgx","tag_id":"cke4k2ac500ei5gqone579l2a","_id":"cke4k2aca00ep5gqo3j0oaau0"},{"post_id":"cke4k2ac200eg5gqoqnkhaqgx","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2acc00es5gqo53crifov"},{"post_id":"cke4k2ac700el5gqoiw7twbuv","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2acd00eu5gqowfabywxk"},{"post_id":"cke4k2ac900eo5gqonuim17dw","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2acf00ew5gqo7i7thes6"},{"post_id":"cke4k2ac300eh5gqoybbg7av3","tag_id":"cke4k2ac500ei5gqone579l2a","_id":"cke4k2acg00ey5gqoebzeg9ro"},{"post_id":"cke4k2aca00eq5gqom56u284r","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2aci00f05gqo37mx5k1b"},{"post_id":"cke4k2acc00et5gqo1e6jv1nz","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2acj00f25gqogw7hx04a"},{"post_id":"cke4k2ac500ej5gqo4ms8q5z2","tag_id":"cke4k2ac500ei5gqone579l2a","_id":"cke4k2acl00f45gqo8qplzdix"},{"post_id":"cke4k2ac500ej5gqo4ms8q5z2","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2acm00f65gqo2ltyzvff"},{"post_id":"cke4k2ace00ev5gqo0xkohia3","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2aco00f95gqo11ge7003"},{"post_id":"cke4k2acf00ex5gqoktw4wnba","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2acp00fb5gqoyl8quh05"},{"post_id":"cke4k2acf00ex5gqoktw4wnba","tag_id":"cke4k2ac500ei5gqone579l2a","_id":"cke4k2acr00fd5gqo93nbaeyh"},{"post_id":"cke4k2acg00ez5gqou3dyh4d1","tag_id":"cke4k2a4s003e5gqot7so9n3u","_id":"cke4k2acs00ff5gqot16wmpsz"},{"post_id":"cke4k2acg00ez5gqou3dyh4d1","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2acu00fh5gqozqs8bfga"},{"post_id":"cke4k2aci00f15gqob4rui18s","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2acv00fj5gqoj9pg2dvh"},{"post_id":"cke4k2acj00f35gqok5xilx8j","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2acw00fl5gqoger58g3q"},{"post_id":"cke4k2acm00f75gqopmhpo4sp","tag_id":"cke4k2a3y001r5gqo2xdkkw1j","_id":"cke4k2ad600fn5gqo88p2zjpj"},{"post_id":"cke4k2aco00fa5gqoq22toh79","tag_id":"cke4k2a5v005o5gqoczr3kg2k","_id":"cke4k2ad700fp5gqo8c207du1"},{"post_id":"cke4k2acq00fc5gqo4wpg0oxw","tag_id":"cke4k2a5v005o5gqoczr3kg2k","_id":"cke4k2ad800fr5gqo2ehbcxnm"},{"post_id":"cke4k2acl00f55gqo5vjvrjby","tag_id":"cke4k2aco00f85gqocdcr5fak","_id":"cke4k2ad900ft5gqo1bphwubc"},{"post_id":"cke4k2acr00fe5gqocqhgm44k","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2ada00fv5gqou14fs8tb"},{"post_id":"cke4k2act00fg5gqoi5citaqs","tag_id":"cke4k29up000g5gqocdir81bd","_id":"cke4k2adc00fx5gqov3sz9z3o"},{"post_id":"cke4k2acu00fi5gqoq3zgs1h6","tag_id":"cke4k29up000g5gqocdir81bd","_id":"cke4k2add00g05gqozkue2419"},{"post_id":"cke4k2acv00fk5gqokt7e9ida","tag_id":"cke4k29up000g5gqocdir81bd","_id":"cke4k2ade00g25gqo42v62iny"},{"post_id":"cke4k2acx00fm5gqoqkjg9uej","tag_id":"cke4k29up000g5gqocdir81bd","_id":"cke4k2adg00g45gqok8w0ockh"},{"post_id":"cke4k2ad600fo5gqo421rgan2","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2adh00g65gqoosi7kl2k"},{"post_id":"cke4k2ad700fq5gqomhs1cuqy","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2adi00g85gqo6n0h0vod"},{"post_id":"cke4k2ad800fs5gqoo2i2sc20","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2adk00ga5gqoev8veb5e"},{"post_id":"cke4k2ad900fu5gqollkxebb8","tag_id":"cke4k29up000g5gqocdir81bd","_id":"cke4k2adm00gc5gqofcw63bso"},{"post_id":"cke4k2adc00fy5gqocijud8i3","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2adn00ge5gqoqox8gfxk"},{"post_id":"cke4k2add00g15gqo7fgl3nq0","tag_id":"cke4k2a8s00bg5gqoi933d42w","_id":"cke4k2ado00gg5gqos4xmlooe"},{"post_id":"cke4k2ade00g35gqon8ovfadr","tag_id":"cke4k2a7c008j5gqov3aoq7v3","_id":"cke4k2adq00gi5gqojhomkhqg"},{"post_id":"cke4k2adb00fw5gqop3czz0xw","tag_id":"cke4k2add00fz5gqolcz17c9q","_id":"cke4k2adr00gk5gqo1eg0hkci"},{"post_id":"cke4k2adg00g55gqobbelivk0","tag_id":"cke4k29up000g5gqocdir81bd","_id":"cke4k2adt00gm5gqodo2c5hs9"},{"post_id":"cke4k2adh00g75gqol0lg4rx8","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2adv00go5gqo3gnix1cn"},{"post_id":"cke4k2adi00g95gqohjqgsf5a","tag_id":"cke4k2a4s003e5gqot7so9n3u","_id":"cke4k2adw00gq5gqobutchpb9"},{"post_id":"cke4k2adk00gb5gqo1xtdv9gj","tag_id":"cke4k2a7c008j5gqov3aoq7v3","_id":"cke4k2ady00gs5gqok1eiyx9f"},{"post_id":"cke4k2adm00gd5gqo15j6dh6y","tag_id":"cke4k2a8s00bg5gqoi933d42w","_id":"cke4k2ae000gv5gqonjh21nkl"},{"post_id":"cke4k2adn00gf5gqo55dsozph","tag_id":"cke4k2a7c008j5gqov3aoq7v3","_id":"cke4k2ae100gx5gqotj9obla8"},{"post_id":"cke4k2adp00gh5gqovyydd13z","tag_id":"cke4k2a80009p5gqooonnq73l","_id":"cke4k2ae300gz5gqo28hmle5a"},{"post_id":"cke4k2adq00gj5gqohgcj72ow","tag_id":"cke4k2a7c008j5gqov3aoq7v3","_id":"cke4k2ae400h15gqopckqq5se"},{"post_id":"cke4k2adr00gl5gqocq29mi0v","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2ae600h35gqox510xaij"},{"post_id":"cke4k2adt00gn5gqoj0h4fb9x","tag_id":"cke4k2a7c008j5gqov3aoq7v3","_id":"cke4k2ae800h55gqodf1hy8dd"},{"post_id":"cke4k2adv00gp5gqompkqhwjn","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2ae900h75gqohs67su7b"},{"post_id":"cke4k2adz00gt5gqoyaw1kz3e","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2aea00h95gqod18yop0t"},{"post_id":"cke4k2adz00gt5gqoyaw1kz3e","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2aec00hc5gqo8jgxbjib"},{"post_id":"cke4k2ae000gw5gqozto1lkyg","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2aed00he5gqobf4bpmv0"},{"post_id":"cke4k2ae100gy5gqomtlfppxl","tag_id":"cke4k2ae000gu5gqofjj8i9v6","_id":"cke4k2aee00hg5gqo3hzf5hab"},{"post_id":"cke4k2adw00gr5gqo142pqrfn","tag_id":"cke4k2ae000gu5gqofjj8i9v6","_id":"cke4k2aef00hi5gqogddh2lyh"},{"post_id":"cke4k2ae300h05gqo4ko0yehj","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2aeh00hk5gqoi1u8prpe"},{"post_id":"cke4k2ae500h25gqohouzq4ws","tag_id":"cke4k29v100125gqor018viaq","_id":"cke4k2aei00hm5gqodi819tmc"},{"post_id":"cke4k2ae600h45gqobubtqtgs","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2aej00ho5gqoq7k8lyja"},{"post_id":"cke4k2ae600h45gqobubtqtgs","tag_id":"cke4k29v100125gqor018viaq","_id":"cke4k2ael00hq5gqo2290xqs4"},{"post_id":"cke4k2ae800h65gqo9a53vt3e","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2aem00hs5gqoga5tahuq"},{"post_id":"cke4k2aea00ha5gqogj25dn41","tag_id":"cke4k2ae000gu5gqofjj8i9v6","_id":"cke4k2aen00hu5gqoj0fjozb0"},{"post_id":"cke4k2aec00hd5gqodp8flo2x","tag_id":"cke4k29up000g5gqocdir81bd","_id":"cke4k2aep00hw5gqo5t8wgofr"},{"post_id":"cke4k2aed00hf5gqourpsvvnp","tag_id":"cke4k2ae000gu5gqofjj8i9v6","_id":"cke4k2aeq00hy5gqoolvnq5ov"},{"post_id":"cke4k2ae900h85gqohh6g92tv","tag_id":"cke4k2aeb00hb5gqoas8uol1f","_id":"cke4k2aer00i05gqo5qwnp0in"},{"post_id":"cke4k2aee00hh5gqo3zn6cyo4","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2aes00i25gqonv2wo99q"},{"post_id":"cke4k2aef00hj5gqowx6n2mob","tag_id":"cke4k2a80009p5gqooonnq73l","_id":"cke4k2aet00i45gqog7zozvgy"},{"post_id":"cke4k2aeh00hl5gqofvuspv0f","tag_id":"cke4k2a7c008j5gqov3aoq7v3","_id":"cke4k2aeu00i65gqokxo9jnqg"},{"post_id":"cke4k2aei00hn5gqog7ua37kz","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2aew00i85gqo4319feb1"},{"post_id":"cke4k2aei00hn5gqog7ua37kz","tag_id":"cke4k29v100125gqor018viaq","_id":"cke4k2aex00ia5gqok4nfytl9"},{"post_id":"cke4k2aej00hp5gqoijwdqeif","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2aey00ic5gqor3cvxc9s"},{"post_id":"cke4k2ael00hr5gqocqsnab3l","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2aez00if5gqoxwgobxta"},{"post_id":"cke4k2aem00ht5gqot38cyksp","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2af000ih5gqoayblevch"},{"post_id":"cke4k2aeo00hv5gqoaguznozm","tag_id":"cke4k2a5v005o5gqoczr3kg2k","_id":"cke4k2af100ij5gqoibu657da"},{"post_id":"cke4k2aep00hx5gqo3y8xuzwd","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2af300il5gqovh5ps86p"},{"post_id":"cke4k2aeq00hz5gqojs561a76","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2af400in5gqomcvb9pty"},{"post_id":"cke4k2aer00i15gqo0zxh6mds","tag_id":"cke4k2ae000gu5gqofjj8i9v6","_id":"cke4k2af500iq5gqoqn9780tw"},{"post_id":"cke4k2aes00i35gqocesg5gju","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2af600is5gqogyvrmbgp"},{"post_id":"cke4k2aet00i55gqo8g9ms9kv","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2af700iu5gqo2z6sdclh"},{"post_id":"cke4k2aev00i75gqo8i4vvxaa","tag_id":"cke4k2a7c008j5gqov3aoq7v3","_id":"cke4k2af900iw5gqo8yno3ub6"},{"post_id":"cke4k2aew00i95gqonjakrh60","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2af900iy5gqoje9804ol"},{"post_id":"cke4k2aey00id5gqoa6e3ibc3","tag_id":"cke4k2aeb00hb5gqoas8uol1f","_id":"cke4k2afb00j05gqoy7xrzbs6"},{"post_id":"cke4k2aez00ig5gqohsisedln","tag_id":"cke4k2aeb00hb5gqoas8uol1f","_id":"cke4k2afc00j25gqoqnpqe0b3"},{"post_id":"cke4k2af100ii5gqo4pdqryyw","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2afd00j45gqouseenhe3"},{"post_id":"cke4k2aex00ib5gqomqyhewbb","tag_id":"cke4k2aez00ie5gqo6ulucdgg","_id":"cke4k2afe00j75gqote168l1x"},{"post_id":"cke4k2af200ik5gqol1jbw8m5","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2aff00j95gqowtojyiuf"},{"post_id":"cke4k2af400io5gqoey9w61kw","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2afg00jb5gqoypwiolq1"},{"post_id":"cke4k2af600ir5gqozrwfyonf","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2afo00jd5gqolzmibnqc"},{"post_id":"cke4k2af700it5gqontw7v45t","tag_id":"cke4k29uz000w5gqoucw0qnrr","_id":"cke4k2afp00jf5gqourvbh0if"},{"post_id":"cke4k2af300im5gqofpnyy8w2","tag_id":"cke4k2af500ip5gqoks9vaeoa","_id":"cke4k2afq00jh5gqonag384m2"},{"post_id":"cke4k2af700iv5gqonie897x0","tag_id":"cke4k2add00fz5gqolcz17c9q","_id":"cke4k2afr00jj5gqobhvh36x1"},{"post_id":"cke4k2af900ix5gqoo4npqb5p","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2afs00jl5gqocfzunmwf"},{"post_id":"cke4k2afa00iz5gqojqj0fnq8","tag_id":"cke4k29v5001c5gqorokl1snl","_id":"cke4k2aft00jn5gqo5wnf3kk0"},{"post_id":"cke4k2afb00j15gqork5s74xg","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2afu00jp5gqoiqqhkzzg"},{"post_id":"cke4k2afd00j55gqoy5y0p7je","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2afv00jr5gqo6lp7j9o9"},{"post_id":"cke4k2afe00j85gqovfsbumqj","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2afw00jt5gqofhdjd3rw"},{"post_id":"cke4k2aff00ja5gqoxwpo3bz6","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2afx00jv5gqomye6626h"},{"post_id":"cke4k2afc00j35gqow3vra1s2","tag_id":"cke4k2afd00j65gqoz4ipio7i","_id":"cke4k2afy00jx5gqocsdgwpip"},{"post_id":"cke4k2afg00jc5gqou5oznwf0","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2afz00jz5gqoihbq4a8p"},{"post_id":"cke4k2afo00je5gqo0hqjylik","tag_id":"cke4k2add00fz5gqolcz17c9q","_id":"cke4k2ag000k15gqokqs1qn74"},{"post_id":"cke4k2afp00jg5gqolexsqvi5","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2ag200k35gqofcqexja3"},{"post_id":"cke4k2afq00ji5gqo9tq9q5ne","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2ag300k55gqo1m2duchk"},{"post_id":"cke4k2afr00jk5gqoh2qbg2gd","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2ag500k75gqore4m2hax"},{"post_id":"cke4k2afs00jm5gqo7higycrz","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2ag600k95gqoja1nwa15"},{"post_id":"cke4k2aft00jo5gqol9c2ck9w","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2ag700kb5gqoznn0bl99"},{"post_id":"cke4k2afu00jq5gqo2nkc2mp0","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2ag800ke5gqobnglyeor"},{"post_id":"cke4k2afv00js5gqofkf3ayas","tag_id":"cke4k29uv000o5gqo0aos50x5","_id":"cke4k2ag900kg5gqolrp61v6r"},{"post_id":"cke4k2afw00ju5gqog6srw3bi","tag_id":"cke4k29v5001c5gqorokl1snl","_id":"cke4k2aga00ki5gqo1p6tm83r"},{"post_id":"cke4k2afx00jw5gqopd76cl8h","tag_id":"cke4k2a7c008j5gqov3aoq7v3","_id":"cke4k2agc00kk5gqork3f994l"},{"post_id":"cke4k2afy00jy5gqok5uqgvwb","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2agd00kn5gqorkaw3jto"},{"post_id":"cke4k2afz00k05gqosdw72keu","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2age00kp5gqo5kznt2qt"},{"post_id":"cke4k2ag000k25gqo6kzh7b9d","tag_id":"cke4k29uz000w5gqoucw0qnrr","_id":"cke4k2agg00kr5gqon2i1d1op"},{"post_id":"cke4k2ag200k45gqoecv5ijly","tag_id":"cke4k29uz000w5gqoucw0qnrr","_id":"cke4k2agi00ku5gqodvvuzl23"},{"post_id":"cke4k2ag300k65gqo3nghqynj","tag_id":"cke4k2ac500ei5gqone579l2a","_id":"cke4k2agj00kw5gqorldbboxs"},{"post_id":"cke4k2ag300k65gqo3nghqynj","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2agl00kz5gqod1ilc0jm"},{"post_id":"cke4k2ag500k85gqo18z6ghd4","tag_id":"cke4k2afd00j65gqoz4ipio7i","_id":"cke4k2agm00l15gqobqoilp3a"},{"post_id":"cke4k2ag700kc5gqo39hoaog9","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2agn00l35gqo0x3c30w8"},{"post_id":"cke4k2ag800kf5gqo0iwuvkb7","tag_id":"cke4k2afd00j65gqoz4ipio7i","_id":"cke4k2ago00l55gqoi03swu9x"},{"post_id":"cke4k2ag900kh5gqoq59s1koc","tag_id":"cke4k29v100125gqor018viaq","_id":"cke4k2agp00l75gqotujlkq1p"},{"post_id":"cke4k2ag600ka5gqofivxzsdh","tag_id":"cke4k2ag800kd5gqoi6zplnhi","_id":"cke4k2agq00l95gqo8r75007o"},{"post_id":"cke4k2agf00kq5gqokrwejqj3","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2agr00lb5gqofebri7t7"},{"post_id":"cke4k2agf00kq5gqokrwejqj3","tag_id":"cke4k2afd00j65gqoz4ipio7i","_id":"cke4k2agt00ld5gqol9npl9t8"},{"post_id":"cke4k2aga00kj5gqofxpgs1x7","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2agu00lf5gqoevcpfhre"},{"post_id":"cke4k2agg00ks5gqo6szemv2h","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2agv00lh5gqocxzi9byt"},{"post_id":"cke4k2agi00kv5gqoutuelqbf","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2agw00lj5gqodu642ysl"},{"post_id":"cke4k2agc00kl5gqo4fl9e7ry","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2agy00ll5gqof2imdx2u"},{"post_id":"cke4k2agj00kx5gqovteexstg","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2agz00ln5gqo6f7oi87k"},{"post_id":"cke4k2agl00l05gqo4g4ai22x","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ah000lp5gqohk5uz7td"},{"post_id":"cke4k2agd00ko5gqottj2tw4t","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ah100lr5gqof9shim7z"},{"post_id":"cke4k2agm00l25gqogatgh80c","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ah200lt5gqodlxs1ct2"},{"post_id":"cke4k2agn00l45gqoyfcuj55b","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2ah300lv5gqoh7mpojy8"},{"post_id":"cke4k2ago00l65gqovw119zk4","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ah500lx5gqof2xwl1b5"},{"post_id":"cke4k2agp00l85gqo5xpmswds","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ah600lz5gqozs66tirl"},{"post_id":"cke4k2agq00la5gqot9at1p35","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ah700m15gqoh93u5f3l"},{"post_id":"cke4k2ags00lc5gqojg20lagf","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ah800m35gqoy1hfmyje"},{"post_id":"cke4k2agt00le5gqohfgkcuds","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2aha00m55gqoavlutr88"},{"post_id":"cke4k2agu00lg5gqowazq7q4i","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ahb00m75gqoetgqlcdj"},{"post_id":"cke4k2agv00li5gqojpaxwzzp","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2ahc00m95gqozs8zyqhe"},{"post_id":"cke4k2agw00lk5gqovtbbh7jh","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ahe00mb5gqo9y95wlag"},{"post_id":"cke4k2agy00lm5gqogb02wv2h","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ahf00md5gqorbmicypd"},{"post_id":"cke4k2agz00lo5gqo4jkoh7wq","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ahh00mf5gqo2u6fdvmg"},{"post_id":"cke4k2ah000lq5gqogqikklp5","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2ahi00mh5gqooewa5ryr"},{"post_id":"cke4k2ah100ls5gqog3n2n8wx","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2ahj00mk5gqo2thzvhug"},{"post_id":"cke4k2ah200lu5gqocsmir8iz","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2ahk00mm5gqo8nlh70yi"},{"post_id":"cke4k2ah200lu5gqocsmir8iz","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ahl00mo5gqoryqn3ovw"},{"post_id":"cke4k2ah300lw5gqonrwtg6wt","tag_id":"cke4k2a5i004z5gqovxjpdrgv","_id":"cke4k2ahn00mq5gqokxfmhgf6"},{"post_id":"cke4k2ah500ly5gqocupwczwr","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2aho00ms5gqojhuvq76v"},{"post_id":"cke4k2ah600m05gqopbl422zj","tag_id":"cke4k2a4700275gqo54lvxrzy","_id":"cke4k2ahp00mu5gqobraovspr"},{"post_id":"cke4k2ah700m25gqoi4bqtk4c","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ahq00mw5gqo0ya8gku2"},{"post_id":"cke4k2ah900m45gqoa33p3ajl","tag_id":"cke4k2a5i004z5gqovxjpdrgv","_id":"cke4k2ahr00my5gqogpszwyl9"},{"post_id":"cke4k2aha00m65gqo6gpbu4gw","tag_id":"cke4k2a4s003e5gqot7so9n3u","_id":"cke4k2aht00n05gqovao8uzxp"},{"post_id":"cke4k2ahb00m85gqoywp68n5k","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ahu00n25gqo6oxsbrj2"},{"post_id":"cke4k2ahd00ma5gqombp2557e","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ahv00n45gqoopkt5axh"},{"post_id":"cke4k2ahe00mc5gqosubb5gqt","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ahx00n65gqoql6v0hv7"},{"post_id":"cke4k2ahg00me5gqowi3khdha","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ahy00n85gqotmjzebad"},{"post_id":"cke4k2ahg00me5gqowi3khdha","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2ahz00nb5gqorbu4t70t"},{"post_id":"cke4k2ahi00mi5gqoexhlmlj2","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2ai100nd5gqo06fx1sc8"},{"post_id":"cke4k2ahj00ml5gqohfsndopg","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2ai200nf5gqoo1kg7m0d"},{"post_id":"cke4k2ahk00mn5gqouvaq3r4h","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ai300nh5gqofwm3hkkg"},{"post_id":"cke4k2ahh00mg5gqo68i4zzof","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2ai400nj5gqonzp76ato"},{"post_id":"cke4k2ahh00mg5gqo68i4zzof","tag_id":"cke4k2ahj00mj5gqoln9vzgp1","_id":"cke4k2ai500nl5gqok7zz01xf"},{"post_id":"cke4k2ahl00mp5gqouc67qsnv","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2ai800nn5gqodiiywwk3"},{"post_id":"cke4k2ahn00mr5gqo90y8mhqh","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2aia00np5gqo8yazs5ck"},{"post_id":"cke4k2aho00mt5gqo17b8dc04","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2aib00nr5gqoyu6a0pcz"},{"post_id":"cke4k2aho00mt5gqo17b8dc04","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2aic00nt5gqop89ry3d2"},{"post_id":"cke4k2ahp00mv5gqonssbgwiy","tag_id":"cke4k2a4s003e5gqot7so9n3u","_id":"cke4k2aid00nv5gqomokdkpvv"},{"post_id":"cke4k2ahq00mx5gqoghmk85yd","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2aie00nx5gqov5mkccmb"},{"post_id":"cke4k2ahr00mz5gqokcrd0c4n","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2aif00nz5gqo1muw5tc3"},{"post_id":"cke4k2aht00n15gqoj7k4vaqy","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2aih00o15gqoxnh3dwst"},{"post_id":"cke4k2ahu00n35gqoccorzkuk","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2aii00o35gqo0l3kuxjd"},{"post_id":"cke4k2ahv00n55gqo18e0yw5v","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2aij00o55gqox3o06jlf"},{"post_id":"cke4k2ahy00n95gqoy0f6v356","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2ail00o75gqo3l295aco"},{"post_id":"cke4k2ahz00nc5gqo2ak8o0bk","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2aim00oa5gqoq56l4qqr"},{"post_id":"cke4k2ai100ne5gqoikyvaukt","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2ain00oc5gqofqen6vds"},{"post_id":"cke4k2ahx00n75gqo646svlhq","tag_id":"cke4k2ahz00na5gqocpwf02sl","_id":"cke4k2aio00oe5gqotovzmeax"},{"post_id":"cke4k2ai200ng5gqofiu51oet","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2aip00oh5gqocyk9mcun"},{"post_id":"cke4k2ai300ni5gqo19ndh2oj","tag_id":"cke4k2a41001v5gqoamkml0g7","_id":"cke4k2aiq00oj5gqoj9wuwslr"},{"post_id":"cke4k2ai400nk5gqo55eed0d3","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2ais00om5gqo1icbg0ws"},{"post_id":"cke4k2ai500nm5gqouk4mdra0","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2aiu00oo5gqo6jug41ot"},{"post_id":"cke4k2ai900no5gqo6ofisty2","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2aiw00or5gqo5t2u0z4b"},{"post_id":"cke4k2aia00nq5gqojt5e2niz","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2aix00ot5gqotdkrobe9"},{"post_id":"cke4k2aib00ns5gqomu8axmu5","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2aiz00ov5gqoc6u9ttya"},{"post_id":"cke4k2aic00nu5gqoqy8r43q5","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2aj000ox5gqo6vqw9gn2"},{"post_id":"cke4k2aid00nw5gqofy6um8z7","tag_id":"cke4k2a5i004z5gqovxjpdrgv","_id":"cke4k2aj100oz5gqo7ejyt0bp"},{"post_id":"cke4k2aie00ny5gqo32f7w8p6","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2aj200p15gqohgbmtoh6"},{"post_id":"cke4k2aig00o05gqostnwxezj","tag_id":"cke4k2a5i004z5gqovxjpdrgv","_id":"cke4k2aj300p35gqooq118i8t"},{"post_id":"cke4k2aih00o25gqo7q9c0red","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2aj400p55gqocczpdti7"},{"post_id":"cke4k2aii00o45gqouv41p12g","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2aj500p75gqo0d08o85m"},{"post_id":"cke4k2aii00o45gqouv41p12g","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2aj600p95gqo258gogwt"},{"post_id":"cke4k2ail00o85gqok4bo27ij","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2aj800pb5gqoz13qedeu"},{"post_id":"cke4k2aij00o65gqo1ne5ma8x","tag_id":"cke4k2aim00o95gqogsww947j","_id":"cke4k2aj900pd5gqot4p7lshy"},{"post_id":"cke4k2aiq00oi5gqoga6n5n9y","tag_id":"cke4k2aip00og5gqom042sj5i","_id":"cke4k2ajb00pf5gqoyrcxef68"},{"post_id":"cke4k2aiq00oi5gqoga6n5n9y","tag_id":"cke4k2a5i004z5gqovxjpdrgv","_id":"cke4k2ajc00ph5gqo8uz6rv2r"},{"post_id":"cke4k2aim00ob5gqoqinrzjls","tag_id":"cke4k2aip00og5gqom042sj5i","_id":"cke4k2ajd00pk5gqonlw00n9x"},{"post_id":"cke4k2aim00ob5gqoqinrzjls","tag_id":"cke4k2a5i004z5gqovxjpdrgv","_id":"cke4k2aje00pm5gqox48ders1"},{"post_id":"cke4k2air00ok5gqomm9e1c7o","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2ajf00po5gqo1gahptt3"},{"post_id":"cke4k2ais00on5gqosl3zhj1i","tag_id":"cke4k2aip00og5gqom042sj5i","_id":"cke4k2ajh00pq5gqot1zo6spm"},{"post_id":"cke4k2ais00on5gqosl3zhj1i","tag_id":"cke4k2a5i004z5gqovxjpdrgv","_id":"cke4k2aji00ps5gqoyq2c3l7y"},{"post_id":"cke4k2ain00od5gqoef2w25e4","tag_id":"cke4k2aip00og5gqom042sj5i","_id":"cke4k2ajj00pu5gqo7t9nsxb8"},{"post_id":"cke4k2ain00od5gqoef2w25e4","tag_id":"cke4k2a5i004z5gqovxjpdrgv","_id":"cke4k2ajk00pw5gqozyu7qj2p"},{"post_id":"cke4k2aiu00op5gqoc2v5dxbc","tag_id":"cke4k2a4s003e5gqot7so9n3u","_id":"cke4k2ajl00py5gqow6k19fng"},{"post_id":"cke4k2aiw00os5gqogv8owpk6","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2ajm00q05gqo2hircv4g"},{"post_id":"cke4k2aio00of5gqoic8gw1hi","tag_id":"cke4k2aip00og5gqom042sj5i","_id":"cke4k2ajn00q25gqojv9wcab6"},{"post_id":"cke4k2aio00of5gqoic8gw1hi","tag_id":"cke4k2a5i004z5gqovxjpdrgv","_id":"cke4k2ajo00q45gqoz6lie989"},{"post_id":"cke4k2aix00ou5gqo27ieg0ni","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2ajp00q65gqot4dng88f"},{"post_id":"cke4k2aiz00ow5gqo7io7tbwg","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2ajr00q85gqo06t1e4gk"},{"post_id":"cke4k2aj000oy5gqoxpg4btku","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ajs00qa5gqofc0t7c7l"},{"post_id":"cke4k2aj100p05gqobujfll3v","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2ajt00qc5gqo1zcwo7ub"},{"post_id":"cke4k2aj200p25gqo4jtct685","tag_id":"cke4k2a80009p5gqooonnq73l","_id":"cke4k2aju00qe5gqouchbde5x"},{"post_id":"cke4k2aj300p45gqov4jto60g","tag_id":"cke4k2a41001v5gqoamkml0g7","_id":"cke4k2ajw00qg5gqomi2lbthe"},{"post_id":"cke4k2aj400p65gqoskw3inqc","tag_id":"cke4k2a4700275gqo54lvxrzy","_id":"cke4k2ajx00qi5gqorx2ldon7"},{"post_id":"cke4k2aj500p85gqod2p3t007","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ajy00qk5gqod57bami9"},{"post_id":"cke4k2aj700pa5gqozbq5tihh","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ajz00qm5gqovv76ag42"},{"post_id":"cke4k2aj800pc5gqo38rh22xo","tag_id":"cke4k2a7c008j5gqov3aoq7v3","_id":"cke4k2ak000qo5gqojkj2118v"},{"post_id":"cke4k2aja00pe5gqocittq3xq","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ak100qq5gqoxdn8q0cs"},{"post_id":"cke4k2ajc00pi5gqo1du9wjst","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ak300qs5gqooh8d0wxo"},{"post_id":"cke4k2ajd00pl5gqog8w3d8n9","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2ak400qu5gqo4qjacszh"},{"post_id":"cke4k2aje00pn5gqo449o8bs5","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ak500qw5gqo7fpoamtj"},{"post_id":"cke4k2ajb00pg5gqo9f9hxc8n","tag_id":"cke4k2ajd00pj5gqobk04uvyo","_id":"cke4k2ak600qy5gqot5qwacgv"},{"post_id":"cke4k2ajb00pg5gqo9f9hxc8n","tag_id":"cke4k2a3v001n5gqoy8ltn81f","_id":"cke4k2ak800r05gqow8zub794"},{"post_id":"cke4k2ajf00pp5gqobxipexwo","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2ak900r25gqonpudmgv6"},{"post_id":"cke4k2ajh00pr5gqotcktk6zo","tag_id":"cke4k2a5v005o5gqoczr3kg2k","_id":"cke4k2akb00r45gqoo4p9eeav"},{"post_id":"cke4k2aji00pt5gqovxb168cz","tag_id":"cke4k2ae000gu5gqofjj8i9v6","_id":"cke4k2akc00r65gqo8pg0nr9k"},{"post_id":"cke4k2ajj00pv5gqocr6hz41x","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2akd00r85gqohnybfyxc"},{"post_id":"cke4k2ajk00px5gqon866krfc","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2ake00ra5gqockhq7lyx"},{"post_id":"cke4k2ajl00pz5gqop62nehmh","tag_id":"cke4k2a4s003e5gqot7so9n3u","_id":"cke4k2akf00rc5gqokkgi1xa2"},{"post_id":"cke4k2ajm00q15gqodddnqmtr","tag_id":"cke4k2ahz00na5gqocpwf02sl","_id":"cke4k2akg00re5gqon4c3ip8y"},{"post_id":"cke4k2ajn00q35gqonst5k31p","tag_id":"cke4k2a3v001n5gqoy8ltn81f","_id":"cke4k2aki00rg5gqor0v1sif8"},{"post_id":"cke4k2ajo00q55gqo372ahqad","tag_id":"cke4k29v100125gqor018viaq","_id":"cke4k2akj00ri5gqovrfrbh6w"},{"post_id":"cke4k2ajq00q75gqoncsyxnzu","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2akn00rk5gqo88a6q8qg"},{"post_id":"cke4k2ajr00q95gqov5ifm3b6","tag_id":"cke4k29v100125gqor018viaq","_id":"cke4k2ako00rm5gqonenv5yw8"},{"post_id":"cke4k2ajs00qb5gqo9f1ye9bw","tag_id":"cke4k29v100125gqor018viaq","_id":"cke4k2akq00ro5gqo41nq51kv"},{"post_id":"cke4k2ajt00qd5gqof5ehshhi","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2akr00rq5gqoxohvm1io"},{"post_id":"cke4k2ajv00qf5gqo70uuc0hc","tag_id":"cke4k29v100125gqor018viaq","_id":"cke4k2aks00rs5gqobf219von"},{"post_id":"cke4k2ajw00qh5gqovk5garza","tag_id":"cke4k29v100125gqor018viaq","_id":"cke4k2akt00ru5gqo4t65mh3h"},{"post_id":"cke4k2ajx00qj5gqos1s8n9t9","tag_id":"cke4k29v100125gqor018viaq","_id":"cke4k2aku00rw5gqoluv8f7rc"},{"post_id":"cke4k2ajy00ql5gqoc3nbut3i","tag_id":"cke4k2a3v001n5gqoy8ltn81f","_id":"cke4k2akw00rz5gqoj07e43se"},{"post_id":"cke4k2ajz00qn5gqok1ktveh9","tag_id":"cke4k2a3v001n5gqoy8ltn81f","_id":"cke4k2akx00s15gqodt5n6h5j"},{"post_id":"cke4k2ak000qp5gqoxvge2zmh","tag_id":"cke4k2a3v001n5gqoy8ltn81f","_id":"cke4k2aky00s35gqof1oc1iy8"},{"post_id":"cke4k2ak100qr5gqohalwp37q","tag_id":"cke4k29v100125gqor018viaq","_id":"cke4k2akz00s55gqolp6s0j6r"},{"post_id":"cke4k2ak300qt5gqox5gjkxu9","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2al100s75gqozwehr552"},{"post_id":"cke4k2ak400qv5gqoaqj1b2uz","tag_id":"cke4k29v100125gqor018viaq","_id":"cke4k2al200s95gqos1mof92e"},{"post_id":"cke4k2ak500qx5gqo3gbi2noj","tag_id":"cke4k29v100125gqor018viaq","_id":"cke4k2al300sb5gqo7g4i03j7"},{"post_id":"cke4k2ak600qz5gqobld0ctau","tag_id":"cke4k29v100125gqor018viaq","_id":"cke4k2al400sd5gqod3s813vs"},{"post_id":"cke4k2ak800r15gqoe7bmxso7","tag_id":"cke4k29v100125gqor018viaq","_id":"cke4k2al600sf5gqoyr5u9sh8"},{"post_id":"cke4k2ak900r35gqoozbsa582","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2al700sh5gqo8mbb5uv9"},{"post_id":"cke4k2akb00r55gqot3ywpurh","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2al800sj5gqo1s2dkpl6"},{"post_id":"cke4k2akc00r75gqocsubaiug","tag_id":"cke4k2a7600855gqofyqttusa","_id":"cke4k2al900sl5gqoyyethl3t"},{"post_id":"cke4k2akd00r95gqogo4hif1i","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2alb00sn5gqobsux0c9f"},{"post_id":"cke4k2ake00rb5gqo1b8yu3kp","tag_id":"cke4k2a3y001r5gqo2xdkkw1j","_id":"cke4k2alc00sq5gqo7qw7y50f"},{"post_id":"cke4k2akf00rd5gqonjerixbl","tag_id":"cke4k29up000g5gqocdir81bd","_id":"cke4k2ald00ss5gqojwuifv4b"},{"post_id":"cke4k2akg00rf5gqog8n45g80","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2ale00su5gqo5i178adk"},{"post_id":"cke4k2aki00rh5gqomky5kr64","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2alg00sw5gqo8sfyfr82"},{"post_id":"cke4k2aki00rh5gqomky5kr64","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2alh00sy5gqoborjsa2n"},{"post_id":"cke4k2akj00rj5gqotmf4r3be","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2ali00t05gqon5sbx0up"},{"post_id":"cke4k2akn00rl5gqobpce8ba0","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2alj00t25gqoibtz4b97"},{"post_id":"cke4k2ako00rn5gqois45w3o3","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2all00t45gqo5jtpilyc"},{"post_id":"cke4k2akq00rp5gqocgmfgs6h","tag_id":"cke4k2a3y001r5gqo2xdkkw1j","_id":"cke4k2aln00t65gqogja1enee"},{"post_id":"cke4k2akr00rr5gqonlfiw8xo","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2alo00t85gqojt9q2igy"},{"post_id":"cke4k2aks00rt5gqohpgty5pj","tag_id":"cke4k2add00fz5gqolcz17c9q","_id":"cke4k2alp00ta5gqo44j8tbsu"},{"post_id":"cke4k2aku00rx5gqoyhjwwkvf","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2alr00tc5gqoiaumkplw"},{"post_id":"cke4k2akw00s05gqoi08ewicn","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2als00te5gqo5x17sx3n"},{"post_id":"cke4k2akx00s25gqo4wqiasz8","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2alt00tg5gqo8z0jmp1u"},{"post_id":"cke4k2akt00rv5gqoap9kkpno","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2alu00ti5gqoqhv8raoi"},{"post_id":"cke4k2akt00rv5gqoap9kkpno","tag_id":"cke4k2akv00ry5gqoue8m1evd","_id":"cke4k2alv00tk5gqog8vmk2ow"},{"post_id":"cke4k2aky00s45gqokl0pnnqm","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2alw00tm5gqom9hl0oph"},{"post_id":"cke4k2al000s65gqojyf56tol","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2aly00to5gqok52m1qoj"},{"post_id":"cke4k2al100s85gqo2qid6nr2","tag_id":"cke4k2a5i004z5gqovxjpdrgv","_id":"cke4k2alz00tr5gqoiz03jpmt"},{"post_id":"cke4k2al200sa5gqoy8iirevo","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2am100tt5gqo1xckcdhh"},{"post_id":"cke4k2al200sa5gqoy8iirevo","tag_id":"cke4k2a8q00b95gqo9nl18tsu","_id":"cke4k2am200tv5gqovulwglna"},{"post_id":"cke4k2al300sc5gqo635589ws","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2am300tx5gqopuvim7mp"},{"post_id":"cke4k2al500se5gqofnr0j11h","tag_id":"cke4k2a5i004z5gqovxjpdrgv","_id":"cke4k2am500tz5gqokjrro0w4"},{"post_id":"cke4k2al600sg5gqos5udm3bg","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2am700u15gqogqouk3fh"},{"post_id":"cke4k2al700si5gqoqdj48p81","tag_id":"cke4k2agd00km5gqo2apzfnd4","_id":"cke4k2am800u35gqowqrcuso5"},{"post_id":"cke4k2al800sk5gqofcoa4bei","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2am900u55gqo0hoc50bw"},{"post_id":"cke4k2alb00so5gqorcqfjfs7","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2amb00u75gqorzs1h9yf"},{"post_id":"cke4k2alc00sr5gqolam7l3gx","tag_id":"cke4k2a7c008j5gqov3aoq7v3","_id":"cke4k2amc00u95gqo8bk1f7pf"},{"post_id":"cke4k2ald00st5gqo40gv8kbm","tag_id":"cke4k2alc00sp5gqouur2mqe9","_id":"cke4k2amd00ub5gqo6p2fxgjh"},{"post_id":"cke4k2al900sm5gqollw7qs2d","tag_id":"cke4k2alc00sp5gqouur2mqe9","_id":"cke4k2ame00ud5gqos4qhg200"},{"post_id":"cke4k2alf00sv5gqolb0661qa","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2amf00uf5gqooxc4mu0f"},{"post_id":"cke4k2alf00sv5gqolb0661qa","tag_id":"cke4k2ahz00na5gqocpwf02sl","_id":"cke4k2amh00uh5gqojhkd9t2j"},{"post_id":"cke4k2alg00sx5gqorgdy2iit","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2ami00uj5gqoj525gyko"},{"post_id":"cke4k2alh00sz5gqocf3ztno8","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2amk00ul5gqo0c048p1n"},{"post_id":"cke4k2ali00t15gqo8ou6hz2z","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2aml00un5gqodqs5cvdy"},{"post_id":"cke4k2alj00t35gqo5bt0jx2d","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2amn00up5gqoe1y09un8"},{"post_id":"cke4k2all00t55gqo3h2wloi8","tag_id":"cke4k2a4s003e5gqot7so9n3u","_id":"cke4k2amo00ur5gqowdn7civb"},{"post_id":"cke4k2aln00t75gqoa6mc0qct","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2amp00ut5gqoved1jtww"},{"post_id":"cke4k2alo00t95gqojbuuwbjt","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2amq00uv5gqo7zerkisr"},{"post_id":"cke4k2alo00t95gqojbuuwbjt","tag_id":"cke4k2a8q00b95gqo9nl18tsu","_id":"cke4k2ams00ux5gqokjso2lwo"},{"post_id":"cke4k2alp00tb5gqo80dydwhe","tag_id":"cke4k2aim00o95gqogsww947j","_id":"cke4k2amt00uz5gqop78fx9o1"},{"post_id":"cke4k2alr00td5gqosq7fug5n","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2amu00v15gqow6q0w1pi"},{"post_id":"cke4k2als00tf5gqo1criib87","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2amw00v35gqonneeqxkt"},{"post_id":"cke4k2alt00th5gqoey3cnng9","tag_id":"cke4k2a80009p5gqooonnq73l","_id":"cke4k2amx00v55gqo4vwj8yqg"},{"post_id":"cke4k2alu00tj5gqov0h3ydak","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2amy00v75gqo4w7r3iow"},{"post_id":"cke4k2alv00tl5gqovxokad23","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2an300v95gqo8zc3ai5b"},{"post_id":"cke4k2aly00tp5gqo1e7lzjdk","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2an400vb5gqo2rnrkz60"},{"post_id":"cke4k2am000ts5gqoerjlnvcf","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2an500vd5gqob18xyt6g"},{"post_id":"cke4k2am100tu5gqoch96k46y","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2an600vf5gqoxu8hl0si"},{"post_id":"cke4k2alx00tn5gqovqdskdqw","tag_id":"cke4k2alz00tq5gqo7z0q5k1f","_id":"cke4k2an800vh5gqojq0plff6"},{"post_id":"cke4k2am200tw5gqok5t69gnk","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2an900vj5gqo5jn89pno"},{"post_id":"cke4k2am400ty5gqoy3vesaby","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2ana00vl5gqocvserdis"},{"post_id":"cke4k2am400ty5gqoy3vesaby","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2anb00vn5gqoihkhbhl1"},{"post_id":"cke4k2am500u05gqojq91ches","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2anc00vp5gqo0owpr99e"},{"post_id":"cke4k2am700u25gqohgopt15t","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2and00vr5gqoiopo1ihs"},{"post_id":"cke4k2am800u45gqojtaf3bne","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2anf00vt5gqoomb3z6lf"},{"post_id":"cke4k2am900u65gqo61njcjdt","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2ang00vv5gqocmr7xt1y"},{"post_id":"cke4k2amb00u85gqo3pcca2vq","tag_id":"cke4k2ahz00na5gqocpwf02sl","_id":"cke4k2ani00vx5gqobpbijyx9"},{"post_id":"cke4k2amc00ua5gqo9gatbanf","tag_id":"cke4k2a8q00b95gqo9nl18tsu","_id":"cke4k2anj00vz5gqorfh8fej4"},{"post_id":"cke4k2amd00uc5gqokcfjuw8i","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2ank00w15gqoeuk05hu1"},{"post_id":"cke4k2ame00ue5gqozxqmo4gr","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2anm00w35gqo75etcthk"},{"post_id":"cke4k2ame00ue5gqozxqmo4gr","tag_id":"cke4k2ahj00mj5gqoln9vzgp1","_id":"cke4k2ano00w55gqo2zjz11xt"},{"post_id":"cke4k2amg00ug5gqohvricwd5","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2anq00w75gqoyf4tbeej"},{"post_id":"cke4k2amh00ui5gqogj1c219g","tag_id":"cke4k2alz00tq5gqo7z0q5k1f","_id":"cke4k2ans00w95gqohznnojkl"},{"post_id":"cke4k2amj00uk5gqoujovfxb5","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2ant00wb5gqoyhxy2kfy"},{"post_id":"cke4k2amk00um5gqocu1xb3xl","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2anv00wd5gqoyaompcnf"},{"post_id":"cke4k2aml00uo5gqodq6gdetn","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2anx00wf5gqoksf0eqvl"},{"post_id":"cke4k2amn00uq5gqoyp7xg2ju","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2any00wh5gqosihiy0wq"},{"post_id":"cke4k2amo00us5gqo6oux4lux","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2anz00wj5gqo7ks8qowq"},{"post_id":"cke4k2amp00uu5gqoqfghzzek","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2ao100wl5gqomd13wvi8"},{"post_id":"cke4k2amr00uw5gqo2k5be5xk","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2ao200wn5gqonaz1b0l8"},{"post_id":"cke4k2ams00uy5gqoxczc1c4p","tag_id":"cke4k2a5i004z5gqovxjpdrgv","_id":"cke4k2ao400wp5gqouj0d4r5b"},{"post_id":"cke4k2amt00v05gqo3kf7rre2","tag_id":"cke4k2a41001v5gqoamkml0g7","_id":"cke4k2ao500wr5gqo3ct340iz"},{"post_id":"cke4k2amv00v25gqohzeihtbp","tag_id":"cke4k29v100125gqor018viaq","_id":"cke4k2ao600wt5gqo5cknlohx"},{"post_id":"cke4k2amw00v45gqordq03aba","tag_id":"cke4k2a8s00bg5gqoi933d42w","_id":"cke4k2ao800ww5gqoyjcaxzwa"},{"post_id":"cke4k2amx00v65gqoq9gfg8on","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2ao900wy5gqop1b8rhz7"},{"post_id":"cke4k2amx00v65gqoq9gfg8on","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2aoa00x05gqo05jqib5g"},{"post_id":"cke4k2amy00v85gqozfwjgp75","tag_id":"cke4k2a4700275gqo54lvxrzy","_id":"cke4k2aoc00x35gqoljsvefb3"},{"post_id":"cke4k2amy00v85gqozfwjgp75","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2aoe00x55gqoaqz3vpqv"},{"post_id":"cke4k2an300va5gqopar61y5v","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2aof00x75gqok11e7b12"},{"post_id":"cke4k2an400vc5gqoczhbuwqg","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2aoh00xa5gqo73gdhniv"},{"post_id":"cke4k2an500ve5gqoyxe3zdkc","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2aoi00xc5gqo8kz5rr8a"},{"post_id":"cke4k2an700vg5gqoq714927r","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2aoj00xe5gqobks1zzt5"},{"post_id":"cke4k2an800vi5gqop65sca0d","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2aol00xg5gqoub02fd0p"},{"post_id":"cke4k2an900vk5gqo72i9jp2w","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2aom00xi5gqoe3u7y5ip"},{"post_id":"cke4k2ana00vm5gqolkh4hua9","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2aoo00xk5gqo31zgcny0"},{"post_id":"cke4k2anb00vo5gqo2izjkd22","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2aop00xm5gqolagm69t7"},{"post_id":"cke4k2anc00vq5gqofkztoqyi","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2aoq00xo5gqo69a5hyxl"},{"post_id":"cke4k2ane00vs5gqoennr464d","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2aos00xq5gqofxuafhhf"},{"post_id":"cke4k2anf00vu5gqo58v8u5kq","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2aot00xs5gqok4tc0t53"},{"post_id":"cke4k2ang00vw5gqop6sksymm","tag_id":"cke4k2a8s00bg5gqoi933d42w","_id":"cke4k2aou00xu5gqofyooxd4e"},{"post_id":"cke4k2ani00vy5gqo515znwh6","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2aov00xw5gqo2126t5pb"},{"post_id":"cke4k2anj00w05gqoig58dtf4","tag_id":"cke4k2add00fz5gqolcz17c9q","_id":"cke4k2aox00xy5gqoudk780jr"},{"post_id":"cke4k2anl00w25gqojfb9mrl3","tag_id":"cke4k29up000g5gqocdir81bd","_id":"cke4k2aoy00y05gqo70qjc13p"},{"post_id":"cke4k2anm00w45gqoh6ak17kp","tag_id":"cke4k29up000g5gqocdir81bd","_id":"cke4k2aoz00y15gqofquabi3x"},{"post_id":"cke4k2ano00w65gqox1bspo8e","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2aoz00y25gqoyj8y3raq"},{"post_id":"cke4k2anq00w85gqohhcr2gk4","tag_id":"cke4k2aez00ie5gqo6ulucdgg","_id":"cke4k2aoz00y35gqohaosxq9w"},{"post_id":"cke4k2anq00w85gqohhcr2gk4","tag_id":"cke4k2add00fz5gqolcz17c9q","_id":"cke4k2aoz00y45gqoqes0kj0z"},{"post_id":"cke4k2ans00wa5gqodi0qajs3","tag_id":"cke4k29up000g5gqocdir81bd","_id":"cke4k2aoz00y55gqoekh47ef0"},{"post_id":"cke4k2ant00wc5gqo1yd444x2","tag_id":"cke4k29up000g5gqocdir81bd","_id":"cke4k2aoz00y65gqo2m7vd76z"},{"post_id":"cke4k2anv00we5gqo340zr94e","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2ap000y75gqorm9dzc48"},{"post_id":"cke4k2anx00wg5gqork0c42qu","tag_id":"cke4k29up000g5gqocdir81bd","_id":"cke4k2ap000y85gqon23u9d21"},{"post_id":"cke4k2any00wi5gqonkn8ruxa","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2ap000y95gqobwdgxdz6"},{"post_id":"cke4k2anz00wk5gqof0orypgw","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2ap000ya5gqoglqr8wc6"},{"post_id":"cke4k2ao100wm5gqowr6qrhgu","tag_id":"cke4k2a5v005o5gqoczr3kg2k","_id":"cke4k2ap000yb5gqoa9ue180j"},{"post_id":"cke4k2ao200wo5gqoxv0526ix","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2ap000yc5gqos89y3ogg"},{"post_id":"cke4k2ao400wq5gqo3o9xp1t3","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2ap000yd5gqonlx08ur6"},{"post_id":"cke4k2ao800wx5gqocoyjj7ln","tag_id":"cke4k29v5001c5gqorokl1snl","_id":"cke4k2ap000ye5gqox8fqjpub"},{"post_id":"cke4k2ao900wz5gqozi9rs08i","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2ap100yf5gqogccovxc6"},{"post_id":"cke4k2ao900wz5gqozi9rs08i","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2ap100yg5gqodvulvq1v"},{"post_id":"cke4k2ao500ws5gqokypz7648","tag_id":"cke4k2ao700wv5gqowbjf64vg","_id":"cke4k2ap100yh5gqo0erhl38e"},{"post_id":"cke4k2aoa00x15gqoszgdo9m8","tag_id":"cke4k29v5001c5gqorokl1snl","_id":"cke4k2ap100yi5gqo7o4sgj12"},{"post_id":"cke4k2aoa00x15gqoszgdo9m8","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2ap100yj5gqovuxqht3p"},{"post_id":"cke4k2aoc00x45gqoto9u0864","tag_id":"cke4k29ub00035gqophoh0c6j","_id":"cke4k2ap100yk5gqocl930nyx"},{"post_id":"cke4k2ao600wu5gqovgtzm128","tag_id":"cke4k2aob00x25gqoc6vfvlta","_id":"cke4k2ap100yl5gqo6xmjmpjz"},{"post_id":"cke4k2aof00x85gqoca8vv4e8","tag_id":"cke4k2a8s00bg5gqoi933d42w","_id":"cke4k2ap200ym5gqo2k5puqhw"},{"post_id":"cke4k2aoh00xb5gqol84nno4m","tag_id":"cke4k2a4s003e5gqot7so9n3u","_id":"cke4k2ap200yn5gqopfk3vh9j"},{"post_id":"cke4k2aoh00xb5gqol84nno4m","tag_id":"cke4k2aob00x25gqoc6vfvlta","_id":"cke4k2ap200yo5gqolo7kpftn"},{"post_id":"cke4k2aoi00xd5gqojyti723t","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2ap200yp5gqoht42dm4e"},{"post_id":"cke4k2aoe00x65gqoaanszpzm","tag_id":"cke4k2aog00x95gqorpr8ihok","_id":"cke4k2ap200yq5gqob992lcm5"},{"post_id":"cke4k2aoj00xf5gqoeftpy3ud","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2ap200yr5gqoc6tez24l"},{"post_id":"cke4k2aol00xh5gqouv40rixu","tag_id":"cke4k2a8s00bg5gqoi933d42w","_id":"cke4k2ap200ys5gqodazcqbb6"},{"post_id":"cke4k2aom00xj5gqozg4w8jdu","tag_id":"cke4k2alz00tq5gqo7z0q5k1f","_id":"cke4k2ap200yt5gqo9w1voq82"},{"post_id":"cke4k2aoo00xl5gqo8pr3xb9l","tag_id":"cke4k2a7c008j5gqov3aoq7v3","_id":"cke4k2ap200yu5gqonwxqxtzd"},{"post_id":"cke4k2aop00xn5gqocvf3vq2t","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2ap200yv5gqot3sdsiv0"},{"post_id":"cke4k2aoq00xp5gqohcot8qxa","tag_id":"cke4k2a7c008j5gqov3aoq7v3","_id":"cke4k2ap300yw5gqoxy0gmyuy"},{"post_id":"cke4k2aos00xr5gqotx8nljc8","tag_id":"cke4k2a7c008j5gqov3aoq7v3","_id":"cke4k2ap300yx5gqozm6bn81t"},{"post_id":"cke4k2aot00xt5gqoagqkob82","tag_id":"cke4k29up000g5gqocdir81bd","_id":"cke4k2ap300yy5gqogyi6gjpa"},{"post_id":"cke4k2aou00xv5gqohkl6vpeq","tag_id":"cke4k2a5v005o5gqoczr3kg2k","_id":"cke4k2ap300yz5gqo6fhkoe1k"},{"post_id":"cke4k2aow00xx5gqo58r528w9","tag_id":"cke4k2a4s003e5gqot7so9n3u","_id":"cke4k2ap300z05gqos98ij0hx"},{"post_id":"cke4k2aox00xz5gqocj783t6d","tag_id":"cke4k2a5v005o5gqoczr3kg2k","_id":"cke4k2ap300z15gqo4uuufeu1"},{"post_id":"cke4k2asf00z25gqo6zc5ki2e","tag_id":"cke4k2a7c008j5gqov3aoq7v3","_id":"cke4k2asl00z45gqoklp6f0bb"},{"post_id":"cke4k2asj00z35gqoro0om5fm","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2asn00z65gqodjb9iyby"},{"post_id":"cke4k2asl00z55gqobsnfan2u","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2aso00z85gqoemeo7gn2"},{"post_id":"cke4k2asn00z75gqo99nnpaux","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2asq00za5gqo6vcmw29r"},{"post_id":"cke4k2aso00z95gqo8m2ipxbn","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2asr00zc5gqof2dtl2on"},{"post_id":"cke4k2asq00zb5gqoripk5ph0","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2ast00ze5gqo58jgjuml"},{"post_id":"cke4k2asq00zb5gqoripk5ph0","tag_id":"cke4k29uz000w5gqoucw0qnrr","_id":"cke4k2asu00zg5gqohjmo226i"},{"post_id":"cke4k2asr00zd5gqopfwohqcs","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2asv00zi5gqoideundp6"},{"post_id":"cke4k2ast00zf5gqou6ug3jt9","tag_id":"cke4k2a7c008j5gqov3aoq7v3","_id":"cke4k2asw00zk5gqozg4w8ce0"},{"post_id":"cke4k2asu00zh5gqorux3q98n","tag_id":"cke4k2a4s003e5gqot7so9n3u","_id":"cke4k2asy00zm5gqopofwwnnd"},{"post_id":"cke4k2asv00zj5gqowxphjtk3","tag_id":"cke4k2aez00ie5gqo6ulucdgg","_id":"cke4k2asz00zp5gqo1nr3lsql"},{"post_id":"cke4k2asy00zn5gqoojh6lc0l","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2at000zr5gqojvxlw6g6"},{"post_id":"cke4k2asz00zq5gqo4fbpzolh","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2at200zt5gqo5oyayu7n"},{"post_id":"cke4k2asz00zq5gqo4fbpzolh","tag_id":"cke4k2a8q00b95gqo9nl18tsu","_id":"cke4k2at400zw5gqo0j1vsmvq"},{"post_id":"cke4k2asx00zl5gqotdvctjio","tag_id":"cke4k2a3y001r5gqo2xdkkw1j","_id":"cke4k2at500zy5gqo0ghqh11w"},{"post_id":"cke4k2asx00zl5gqotdvctjio","tag_id":"cke4k2asz00zo5gqoqunjkps2","_id":"cke4k2at601005gqo6kpyb1vs"},{"post_id":"cke4k2at400zx5gqohb4ayhd1","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2at901035gqo7bje1com"},{"post_id":"cke4k2at500zz5gqo42awu495","tag_id":"cke4k29v5001c5gqorokl1snl","_id":"cke4k2atb01055gqokl6nk531"},{"post_id":"cke4k2at100zs5gqoeor8md9c","tag_id":"cke4k2at300zv5gqo5dy6ikus","_id":"cke4k2atd01075gqozdb5i27x"},{"post_id":"cke4k2at701015gqo67s8h70h","tag_id":"cke4k29up000g5gqocdir81bd","_id":"cke4k2atf01095gqol46g5nw3"},{"post_id":"cke4k2at901045gqoj43ixqif","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2atg010b5gqoyj799nu2"},{"post_id":"cke4k2at200zu5gqolddz0ze2","tag_id":"cke4k2at801025gqoxu1leuno","_id":"cke4k2ati010d5gqoxnihhriq"},{"post_id":"cke4k2atb01065gqoe8cqg9o7","tag_id":"cke4k2at801025gqoxu1leuno","_id":"cke4k2atj010f5gqor1zii99v"},{"post_id":"cke4k2atd01085gqochv3s2s9","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2atl010h5gqohx1zw289"},{"post_id":"cke4k2atf010a5gqo856nl1vv","tag_id":"cke4k2a5i004z5gqovxjpdrgv","_id":"cke4k2atn010j5gqok469wubk"},{"post_id":"cke4k2atg010c5gqop7lr8383","tag_id":"cke4k2a5i004z5gqovxjpdrgv","_id":"cke4k2atp010l5gqom799lnyc"},{"post_id":"cke4k2ati010e5gqomstst5uq","tag_id":"cke4k2aez00ie5gqo6ulucdgg","_id":"cke4k2atq010n5gqopikcdoyx"},{"post_id":"cke4k2atj010g5gqojbwrr4vn","tag_id":"cke4k2aez00ie5gqo6ulucdgg","_id":"cke4k2atr010p5gqoe24alk2g"},{"post_id":"cke4k2atl010i5gqoq363o9br","tag_id":"cke4k2aez00ie5gqo6ulucdgg","_id":"cke4k2att010r5gqoxjh34bhe"},{"post_id":"cke4k2atn010k5gqo5sa4j1bm","tag_id":"cke4k2aez00ie5gqo6ulucdgg","_id":"cke4k2atu010t5gqo3fdnoqs2"},{"post_id":"cke4k2atp010m5gqo53xaoubc","tag_id":"cke4k2a5g004u5gqoi5nlm5a5","_id":"cke4k2atv010v5gqobupjkndi"},{"post_id":"cke4k2atq010o5gqo2z552egy","tag_id":"cke4k2a41001v5gqoamkml0g7","_id":"cke4k2atw010x5gqohc57jb3x"},{"post_id":"cke4k2atr010q5gqo063qyu7d","tag_id":"cke4k2a4700275gqo54lvxrzy","_id":"cke4k2aty010z5gqocgn14i91"},{"post_id":"cke4k2att010s5gqo2i3abmgq","tag_id":"cke4k29ul000b5gqotj41jajg","_id":"cke4k2atz01115gqogc3wezlm"},{"post_id":"cke4k2atu010u5gqohvfngjjn","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2au101135gqoupurapxs"},{"post_id":"cke4k2atv010w5gqofqdpjccn","tag_id":"cke4k2a6n007b5gqohgnfcqdj","_id":"cke4k2au201155gqo66x64327"},{"post_id":"cke4k2atv010w5gqofqdpjccn","tag_id":"cke4k2a6k00755gqouyilq0r2","_id":"cke4k2au301175gqomp9i7ymm"},{"post_id":"cke4k2atw010y5gqolnd2sknf","tag_id":"cke4k2a6n007b5gqohgnfcqdj","_id":"cke4k2au501195gqo0x6foext"},{"post_id":"cke4k2atw010y5gqolnd2sknf","tag_id":"cke4k2a6k00755gqouyilq0r2","_id":"cke4k2au6011b5gqogbgwi0rj"},{"post_id":"cke4k2aty01105gqo4hxb4few","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2au7011d5gqo66grepbx"},{"post_id":"cke4k2aty01105gqo4hxb4few","tag_id":"cke4k2a4700275gqo54lvxrzy","_id":"cke4k2au8011f5gqoahr6geo9"},{"post_id":"cke4k2atz01125gqoacswovmj","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2aua011h5gqocsjxl7qs"},{"post_id":"cke4k2au101145gqo0mug1069","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2aub011j5gqoonpod6uw"},{"post_id":"cke4k2au201165gqo5oo78c3v","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2auc011l5gqogy54au34"},{"post_id":"cke4k2au201165gqo5oo78c3v","tag_id":"cke4k2a50003u5gqormwi74gs","_id":"cke4k2aue011o5gqoxt3p5ua5"},{"post_id":"cke4k2au301185gqob98mk0qi","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2auj011q5gqo8ki87umv"},{"post_id":"cke4k2au5011a5gqo3dn8da39","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2aul011s5gqovlnmshdt"},{"post_id":"cke4k2au6011c5gqob5gyp9rp","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2aun011v5gqol4empdcs"},{"post_id":"cke4k2au7011e5gqowspvkp5v","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2auo011x5gqor15j15q9"},{"post_id":"cke4k2au7011e5gqowspvkp5v","tag_id":"cke4k2a80009p5gqooonnq73l","_id":"cke4k2auq011z5gqoe3tc6scm"},{"post_id":"cke4k2au9011g5gqo3y3a0ll2","tag_id":"cke4k2a4s003e5gqot7so9n3u","_id":"cke4k2aur01215gqorhg3p61l"},{"post_id":"cke4k2aua011i5gqoj8dgjg71","tag_id":"cke4k2a4s003e5gqot7so9n3u","_id":"cke4k2aus01235gqowi5x4gfx"},{"post_id":"cke4k2aue011p5gqo39jxkod8","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2aut01255gqo55uwlvhd"},{"post_id":"cke4k2auj011r5gqov6b0u2sx","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2auv01275gqo1owwg2zf"},{"post_id":"cke4k2aub011k5gqowcnupdft","tag_id":"cke4k2a4s003e5gqot7so9n3u","_id":"cke4k2auw01295gqoqbcax03t"},{"post_id":"cke4k2aub011k5gqowcnupdft","tag_id":"cke4k2aue011n5gqo7jl61nlr","_id":"cke4k2auy012b5gqoq1gnlkol"},{"post_id":"cke4k2aul011t5gqo5bx1wka3","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2auz012d5gqouthi0mc1"},{"post_id":"cke4k2aun011w5gqo89t118kh","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2av1012f5gqoqyovccc6"},{"post_id":"cke4k2auc011m5gqonvihhxr8","tag_id":"cke4k2aum011u5gqoevitefev","_id":"cke4k2av2012h5gqox1iamryc"},{"post_id":"cke4k2auo011y5gqogpdgxo2e","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2av3012k5gqosdrjl97s"},{"post_id":"cke4k2auq01205gqogpb0cdz3","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2av5012m5gqojfswdl0b"},{"post_id":"cke4k2aur01225gqow14l5lgg","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2av6012o5gqorbkik44k"},{"post_id":"cke4k2aus01245gqogt6qsear","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2av7012q5gqordxjpgl4"},{"post_id":"cke4k2auu01265gqowpn1p6b3","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2av9012s5gqoscgdbkzd"},{"post_id":"cke4k2auv01285gqorijh2o87","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2avb012u5gqo05lsluim"},{"post_id":"cke4k2auw012a5gqo2mnsyydu","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2avd012w5gqolhk6r4oi"},{"post_id":"cke4k2auy012c5gqotshwiu5t","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2ave012y5gqom87wugqj"},{"post_id":"cke4k2auz012e5gqo0qslf3ox","tag_id":"cke4k2a4500235gqoz16pm60x","_id":"cke4k2avf01305gqoxyqrz5tw"},{"post_id":"cke4k2av2012i5gqovyb6ok09","tag_id":"cke4k29uv000o5gqo0aos50x5","_id":"cke4k2avg01325gqobnt2cp32"},{"post_id":"cke4k2av3012l5gqosi196zkt","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2avi01345gqolw7cfhtx"},{"post_id":"cke4k2av5012n5gqokel73q9r","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2avj01365gqo4hojh0nl"},{"post_id":"cke4k2av1012g5gqowd6ls4if","tag_id":"cke4k2av3012j5gqo5zo4n2mr","_id":"cke4k2avk01385gqoubccfyws"},{"post_id":"cke4k2av6012p5gqod09qivm1","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2avl013a5gqox7reclyn"},{"post_id":"cke4k2av7012r5gqor303h8nj","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2avn013c5gqota363lf6"},{"post_id":"cke4k2av7012r5gqor303h8nj","tag_id":"cke4k29uz000w5gqoucw0qnrr","_id":"cke4k2avp013e5gqo9q555c34"},{"post_id":"cke4k2av9012t5gqosoqw1eq4","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2avq013g5gqo2dldm4r7"},{"post_id":"cke4k2avb012v5gqo6vzmvjtu","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2avr013i5gqofqr3q00g"},{"post_id":"cke4k2avd012x5gqo2zhenps8","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2avt013k5gqouis7n9fd"},{"post_id":"cke4k2avd012x5gqo2zhenps8","tag_id":"cke4k29uz000w5gqoucw0qnrr","_id":"cke4k2avu013m5gqorch6chxx"},{"post_id":"cke4k2ave012z5gqo9z3l4d6g","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2avv013o5gqoaze5f7mt"},{"post_id":"cke4k2avf01315gqooyr0bq2f","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2avw013p5gqoo5g3tt4u"},{"post_id":"cke4k2avh01335gqozkxo5j49","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2avw013q5gqo0aa7oudb"},{"post_id":"cke4k2avi01355gqof0sel5iv","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2avw013r5gqoizonx937"},{"post_id":"cke4k2avj01375gqom9vwiez7","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2avw013s5gqohq6fzz9m"},{"post_id":"cke4k2avk01395gqo9ivpuzxz","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2avw013t5gqodvr202m8"},{"post_id":"cke4k2avl013b5gqo0wlm2scl","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2avw013u5gqotjkabydd"},{"post_id":"cke4k2avl013b5gqo0wlm2scl","tag_id":"cke4k29v5001c5gqorokl1snl","_id":"cke4k2avw013v5gqoo8gdyu8w"},{"post_id":"cke4k2avn013d5gqouedxo8da","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2avw013w5gqo5mcdgcud"},{"post_id":"cke4k2avp013f5gqo43np4pdk","tag_id":"cke4k29ux000r5gqocmlzkyup","_id":"cke4k2avw013x5gqovyt65wu0"},{"post_id":"cke4k2avp013f5gqo43np4pdk","tag_id":"cke4k2ag800kd5gqoi6zplnhi","_id":"cke4k2avw013y5gqoypc8rlpb"},{"post_id":"cke4k2avq013h5gqozwwqt2xl","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2avw013z5gqo3y1yc3md"},{"post_id":"cke4k2avs013j5gqo2swpr679","tag_id":"cke4k2a4a002c5gqo7762whp5","_id":"cke4k2avw01405gqo9puptkx6"},{"post_id":"cke4k2avs013j5gqo2swpr679","tag_id":"cke4k2a4s003e5gqot7so9n3u","_id":"cke4k2avw01415gqovtyt6vz1"},{"post_id":"cke4k2avt013l5gqo2v1n6n30","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2avw01425gqo8ts9maqy"},{"post_id":"cke4k2avu013n5gqoucncj755","tag_id":"cke4k2a4c002f5gqoblhoi65l","_id":"cke4k2avw01435gqo7m62uimo"}],"Tag":[{"name":"工具","_id":"cke4k29ub00035gqophoh0c6j"},{"name":"javascript","_id":"cke4k29ul000b5gqotj41jajg"},{"name":"docker","_id":"cke4k29up000g5gqocdir81bd"},{"name":"openresty","_id":"cke4k29uv000o5gqo0aos50x5"},{"name":"python","_id":"cke4k29ux000r5gqocmlzkyup"},{"name":"flask","_id":"cke4k29uz000w5gqoucw0qnrr"},{"name":"java","_id":"cke4k29v100125gqor018viaq"},{"name":"spring","_id":"cke4k29v500195gqof1p05s8t"},{"name":"jpa","_id":"cke4k29v5001b5gqoj3d0bwp9"},{"name":"微信","_id":"cke4k29v5001c5gqorokl1snl"},{"name":"杂谈","_id":"cke4k2a3v001n5gqoy8ltn81f"},{"name":"hexo","_id":"cke4k2a3y001r5gqo2xdkkw1j"},{"name":"git","_id":"cke4k2a41001v5gqoamkml0g7"},{"name":"mysql","_id":"cke4k2a4500235gqoz16pm60x"},{"name":"http","_id":"cke4k2a4700275gqo54lvxrzy"},{"name":"linux","_id":"cke4k2a4a002c5gqo7762whp5"},{"name":"vim","_id":"cke4k2a4c002f5gqoblhoi65l"},{"name":"mac","_id":"cke4k2a4s003e5gqot7so9n3u"},{"name":"tmux","_id":"cke4k2a4v003j5gqorlvew2gi"},{"name":"ssh","_id":"cke4k2a50003u5gqormwi74gs"},{"name":"开发","_id":"cke4k2a5g004u5gqoi5nlm5a5"},{"name":"算法","_id":"cke4k2a5i004z5gqovxjpdrgv"},{"name":"node","_id":"cke4k2a5v005o5gqoczr3kg2k"},{"name":"杂文","_id":"cke4k2a6100645gqo92rvv5v0"},{"name":"maven","_id":"cke4k2a6b006m5gqohvsrh7xr"},{"name":"jinja2","_id":"cke4k2a6g006x5gqou7a8ixsg"},{"name":"北京","_id":"cke4k2a6k00755gqouyilq0r2"},{"name":"生活","_id":"cke4k2a6n007b5gqohgnfcqdj"},{"name":"springboot","_id":"cke4k2a6p007h5gqodfn3r65h"},{"name":"react","_id":"cke4k2a7600855gqofyqttusa"},{"name":"shell","_id":"cke4k2a7c008j5gqov3aoq7v3"},{"name":"graphql","_id":"cke4k2a7h008u5gqo7cc675ke"},{"name":"iterm","_id":"cke4k2a7x009j5gqoq6n5vbr9"},{"name":"expect","_id":"cke4k2a80009p5gqooonnq73l"},{"name":"sqlalchemy","_id":"cke4k2a8q00b95gqo9nl18tsu"},{"name":"nginx","_id":"cke4k2a8s00bg5gqoi933d42w"},{"name":"html","_id":"cke4k2ac500ei5gqone579l2a"},{"name":"electron","_id":"cke4k2aco00f85gqocdcr5fak"},{"name":"vagrant","_id":"cke4k2add00fz5gqolcz17c9q"},{"name":"宝贝","_id":"cke4k2ae000gu5gqofjj8i9v6"},{"name":"elastic","_id":"cke4k2aeb00hb5gqoas8uol1f"},{"name":"ansible","_id":"cke4k2aez00ie5gqo6ulucdgg"},{"name":"css","_id":"cke4k2af500ip5gqoks9vaeoa"},{"name":"jquery","_id":"cke4k2afd00j65gqoz4ipio7i"},{"name":"markdown","_id":"cke4k2ag800kd5gqoi6zplnhi"},{"name":"go","_id":"cke4k2agd00km5gqo2apzfnd4"},{"name":"awk","_id":"cke4k2ahj00mj5gqoln9vzgp1"},{"name":"redis","_id":"cke4k2ahz00na5gqocpwf02sl"},{"name":"zsh","_id":"cke4k2aim00o95gqogsww947j"},{"name":"leetcode","_id":"cke4k2aip00og5gqom042sj5i"},{"name":"漫威","_id":"cke4k2ajd00pj5gqobk04uvyo"},{"name":"ssr","_id":"cke4k2akv00ry5gqoue8m1evd"},{"name":"android","_id":"cke4k2alc00sp5gqouur2mqe9"},{"name":"ffmpeg","_id":"cke4k2alz00tq5gqo7z0q5k1f"},{"name":"chrome","_id":"cke4k2ao700wv5gqowbjf64vg"},{"name":"vmware","_id":"cke4k2aob00x25gqoc6vfvlta"},{"name":"youtube","_id":"cke4k2aog00x95gqorpr8ihok"},{"name":"jupyter","_id":"cke4k2asz00zo5gqoqunjkps2"},{"name":"windows","_id":"cke4k2at300zv5gqo5dy6ikus"},{"name":"excel","_id":"cke4k2at801025gqoxu1leuno"},{"name":"HomeBrew","_id":"cke4k2aue011n5gqo7jl61nlr"},{"name":"movie","_id":"cke4k2aum011u5gqoevitefev"},{"name":"nodejs","_id":"cke4k2av3012j5gqo5zo4n2mr"}]}}